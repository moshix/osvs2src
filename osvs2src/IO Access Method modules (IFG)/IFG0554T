         TITLE 'IFG0554T- END OF VOLUME ABEND B37 HANDLING LOAD'        00200021
IFG0554T CSECT                                                          00300002
*********************************************************************** 00350002
*                                                                     * 00400002
*          VS2 RELEASE 037 DELETIONS/CHANGES                          * 00450037
*                                                                     * 00450637
*A606010,606020                                                @ZA18533 00451237
*A603300,C602800,D606000                                       @ZA26360 00451537
*                                                                     * 00451837
*          VS2 RELEASE 030 DELETIONS/CHANGES                          * 00452437
*0000009000,013300,014500,018500,023500,033000,144900          @ZA02218 00453037
*304000-306000                                                 @ZA02218 00454037
*0000                                                          @ZA05438 00455037
*000352500                                                     @ZA08028 00456037
*0000                                                          @ZA12209 00458037
*A000350500,351000,353000                                      @ZA10234 00459037
*          VS2 RELEASE 03 DELETIONS                                   * 00460002
*0000180925,181150,182875,183100                                ZA00019 00470002
*          VS2 RELEASE 02 DELETIONS                                   * 00500002
*                                                                     * 00550002
*                                                                     * 00600002
*********************************************************************** 00650002
*                                                                     * 00700002
* MODULE NAME = IFG0554T (OS/VS2)                                     * 00750002
*                                                                     * 00800002
* DESCRIPTIVE NAME =                                                  * 00850002
*        END OF VOLUME ABEND B37/D37/E37 HANDLING LOAD                * 00900037
*                                                                     * 00950002
* COPYRIGHT = NONE                                                    * 01000002
*                                                                     * 01050002
* STATUS = RELEASE 2, LEVEL 0                                         * 01100002
*                                                                     * 01150002
* FUNCTION =                                                          * 01200002
*        ENTERED FROM IFG0554A WHEN NO VOLUME COULD BE DISMOUNTED     * 01250002
*        TO MOUNT ANOTHER VOLUME.                                     * 01300002
*                                                                     * 01302502
*        THE OLD VOLUME'S UNIT HAS ALREADY HAD ITS DATA               * 01305002
*        MANAGEMENT USE COUNT DECREMENTED, AND THE VOLUME MAY         * 01307502
*        NO LONGER BE MOUNTED.                                        * 01310002
*        DXVOLSEQ IS THE VOLUME SEQUENCE OF THE NEXT VOLUME           * 01312502
*        WHICH COULD NOT BE MOUNTED. THE COUNT WILL BE                * 01315002
*        DECREMENTED BY ONE AND USED TO LOCATE THE PREVIOUS           * 01317502
*        VOLUME'S VOLSERNO.                                           * 01320002
*        IF THIS VOLUME IS STILL MOUNTED ON THE UNIT WHICH THE        * 01322502
*        DEB IS OPEN TO, ITS DATA MANAGEMENT COUNT WILL BE            * 01325002
*        INCREMENTED SO THAT IT MAY BE ACCESSED.                      * 01327502
*        OTHERWISE AN IMMEDIATE B37/D37/E37 ABEND WILL BE ISSUED, AS  * 01330037
*        THE DSCB ON THE OLD VOLUME CAN NOT BE UPDATED.               * 01332502
         EJECT                                                          01350002
*        PROBLEM DETERMINATION IS GIVEN CONTROL WITH INTERNAL ABEND   * 01400002
*        CODE 184 TO ISSUE A E37-4 ABEND, 185 TO ISSUE A B37-4 ABEND  * 01410037
*        OR 186 TO ISSUE A D37-4 ABEND IF ANY OF THE                  * 01450037
*        FOLLOWING CONDITIONS OCCUR -                                 * 01460002
*        1) EXCP DCB.                                                 * 01500002
*        2) DSORG IS NOT PS.                                          * 01550002
*        3) THE WRITE (BSAM) OR PUT (QSAM) BITS ARE NOT ON IN         * 01600002
*        DCBMACRF.                                                    * 01650002
*        4) NO 08 EXIT LIST ADDRESS IS PRESENT IN THE DCB EXIT LIST,  * 01700002
*        OR THERE IS NO EXIT LIST ADDRESS.                            * 01750002
*        5) THE OLD VOLUME IS NO LONGER MOUNTED ON THE DEB'S          * 01752502
*        UNIT, OR ITS DATA MANAGEMENT COUNT COULD NOT BE              * 01755002
*        INCREMENTED.                                                 * 01757502
*                                                                     * 01800002
*        IF NONE OF THE ABOVE CONDITIONS EXIST AND                    * 01810002
*        IF THE DEB HAS LESS THAN 16 EXTENTS THE X37 ABEND EXIT IS    * 01850037
*        TAKEN AND THE VALUE RETURNED IN REGISTER 15 IS USED TO       * 01900002
*        DETERMINE THE ACTION TO BE TAKEN. THE RETURN CODE  AND THE   * 01950002
*        ACTION IS BELOW. IF THE DEB HAS 16 EXTENTS OR VIO IS USED,   * 02000002
*        THE EXIT IS NOT TAKEN BUT ACTION IS TAKEN AS IF IT WERE      * 02050002
*        AND A RETURN CODE OF 1 WERE RETURNED.                        * 02100002
*                                                                     * 02150002
*        0 - MODULE IFG0554P IS GIVEN CONTROL WITH 16 IN REGISTER     * 02200002
*        14 AND 1 IN REGISTER 13. THIS WILL CAUSE IFG0554P TO CALL    * 02250002
*        DADSM EXTEND FOR THE CURRENT VOLUME AND ONCE AGAIN TRY TO    * 02300002
*        OBTAIN SPACE ON THE VOLUME. HOWEVER, IF D37 ABEND PROCESSING * 02350037
*        IS BEING PERFORMED, THE X37 ABEND EXIT WILL BE TAKEN AGAIN.  * 02360037
*        IF A RETURN CODE OF 0 IS AGAIN RETURNED, THIS RETURN CODE    * 02360437
*        WILL BE IGNORED AND A RETURN CODE OF 2 WILL BE ASSUMED.      * 02370037
*                                                                     * 02400002
*        1 - THE FORMAT 1 DSCB FOR THE DATA SET IS READ AND IT IS     * 02450002
*        UPDATED. THE TTR OF THE LAST RECORD ON THE VOLUME IS         * 02500002
*        OBTAINED FROM DCBFDAD, THE TRACK BALANCE IS OBTAINED FROM    * 02550002
*        DCBTRBAL. THESE ARE PLACED IN THE DSCB AND IT IS REWRITTEN.  * 02600002
*        ALL THE BSAM/QSAM IOBS WILL GET THE UNIT EXCEPTION BIT IN    * 02650002
*        THE CSW TURNED OFF. THE FEOV BIT IN THE DCB IS TURNED OFF.   * 02700002
*        IF A SYNAD ADDRESS IS NOT PRESENT OR IF CLOSE CALLED EOV,    * 02750002
*        AN 001 ABEND IS ISSUED. OTHERWISE THE EOV WORKAREAS ARE      * 02800002
*        FREED, THE USER'S DCB IS REFRESHED FROM THE COPY, AND THE    * 02850002
*        ACCESS METHOD CALLER OF EOV IS RETURNED CONTROL TO PASS      * 02900002
*        CONTROL TO THE USER'S SYNAD ROUTINE. REGISTERS 0 AND 1 ARE   * 02950002
*        PASSED TO THE ACCESS METHOD CALLER OF EOV, AND, IN TURN, TO  * 03000002
*        THE SYNAD ROUTINE INDICATING AN OUTPUT ERROR, NO SPACE       * 03050002
*        AVAILABLE.                                                   * 03100002
*                                                                     * 03150002
*        2 -THE DSCB IS UPDATED AS FOR RETURN CODE 1, ABOVE, AND      * 03200002
*        PROBLEM DETERMINATION IS GIVEN CONTROL TO ISSUE A            * 03250002
*        B37-4, D37-4 OR E37-4 ABEND.                                 * 03300037
         EJECT                                                          08300002
* NOTES =                                                             * 08350002
*        WHEN THIS MODULE EXITS TO THE ACCESS METHOD CALLER OF EOV    * 08400002
*        IN ORDER TO PASS CONTROL TO THE USER'S SYNAD ROUTINE, THE    * 08450002
*        REGISTERS WHICH WILL BE PASSED TO THE ACCESS METHOD AND TO   * 08500002
*        THE SYNAD ROUTINE ARE THE USER'S REGISTERS AS A REGISTER     * 08550002
*        SWAP HAS BEEN PERFORMED IN THE FIRST LOAD OF EOV, IGC0005E.  * 08600002
*                                                                     * 08700002
*        THIS MODULE HAS AN ALIAS NAME OF IFG0554T.                   * 08800002
*                                                                     * 08900002
*    DEPENDENCIES =                                                   * 08950002
*            CLASS ONE CHARACTER CODE.  THE EBCDIC CHARACTER CODE     * 09000002
*            WAS USED FOR ASSEMBLY.  THE MODULE MUST BE REASSEMBLED   * 09050002
*            IF A DIFFERENT CHARACTER SET IS USED FOR EXECUTION.      * 09100002
*                                                                     * 09150002
*    RESTRICTIONS = NONE                                              * 09200002
*                                                                     * 09250002
*    REGISTER CONVENTIONS =                                           * 09300002
*            R2 POINTS TO DCB                                         * 09350002
*            R4 POINTS TO OPEN WORK AREA                              * 09400002
*            R5 POINTS TO THE RESIDENT ROUTINE                        * 09450002
*            R6 POINTS TO THE WTG TABLE                               * 09500002
*            R7 POINTS TO THE CURRENT PARAMETER LIST ENTRY            * 09550002
*            R8 POINTS TO THE CURRENT WTG TABLE ENTRY                 * 09600002
*            R9 POINTS TO THE DD ENTRY IN THE TIOT                    * 09650002
*            R10 POINTS TO THE UCB                                    * 09700002
*                                                                     * 09750002
*    PATCH LABEL = SEE THIRD FROM LAST LABEL BEFORE ORG STATEMENT AT  * 09800002
*                  END OF LISTING.                                    * 09850002
*                                                                     * 09900002
* MODULE TYPE = CONTROL (OPEN, CLOSE, EOV DATA MANAGEMENT)            * 09950002
*                                                                     * 10000002
*    PROCESSOR = ASSEMBLER XF                                         * 10050002
*                                                                     * 10100002
*    MODULE SIZE = SEE EXTERNAL SYMBOL DICTIONARY OR LOC FIELD ON     * 10150002
*                  ORG STATEMENT AT END OF LISTING                    * 10200002
*                                                                     * 10250002
*    ATTRIBUTES = REENTRANT, REFRESHABLE,READ-ONLY, ENABLED,          * 10300002
*                 PRIVILEGED, SUPERVISOR STATE, DATA MANAGEMENT KEY,  * 10350002
*                 LINK PACK AREA RESIDENT/PAGEABLE                    * 10400002
*                                                                     * 10450002
* ENTRY POINT =                                                       * 10500002
*        IFG0554T                                                     * 10550002
*                                                                     * 10600002
*    PURPOSE = SEE FUNCTION                                           * 10650002
*                                                                     * 10700002
*    LINKAGE =                                                        * 10750002
*        THIS MODULE IS TRANSFERRED CONTROL THROUGH THE IECRES-LOAD   * 10800002
*        MACRO INSTRUCTION.                                           * 10850002
         EJECT                                                          10900002
* INPUT =                                                             * 10950002
*        GIVEN CONTROL IN PROTECT KEY 5.                              * 11000002
*        REGISTER 2 POINTS TO THE COPIED DCB.                         * 11050002
*        DEBDCBAD POINTS TO THE COPIED DCB.                           * 11100002
*        REGISTER 4 POINTS TO THE EOV WORKAREA                        * 11150002
*        REGISTER 12 CONTAINS THE INTERNAL ABEND CODE                 * 11160037
*        FOR EITHER A B37-4, D37-4 OR E37-4 ABEND.                    * 11170037
*                                                                     * 11200002
* OUTPUT =                                                            * 11500002
*        THE NEXT MODULE IS GIVEN CONTROL IN PROTECT KEY 5 WITH       * 11550002
*        REGISTER 2 POINTING TO THE COPIED DCB,                       * 11600002
*        THE DEBDCBAD POINTING TO THE COPIED DCB,                     * 11650002
*        AND REGISTER 4 POINTING TO THE EOV WORKAREA,                 * 11700002
*                                                                     * 11750002
*        IFG0554P -                                                   * 11800002
*        REGISTER 14 CONTAINS ENTRY CODE 16                           * 11850002
*        REGISTER 13 CONTAINS DADSM EXTEND INPUT 1.                   * 11900002
*                                                                     * 12850002
*        IFG0550P GIVEN CONTROL THROUGH DMABCOND MACRO -              * 12900002
*        REGISTER 0 CONTAINS INTERNAL ABEND CODE                      * 12950002
*                                                                     * 13000002
*        EXIT TO THE ACCESS METHOD CALLER OF EOV FOR HIM TO PASS      * 13050002
*        CONTROL TO THE USER'S SYNAD ROUTINE -                        * 13100002
*        REGISTER 15 CONTAINS SYNAD ROUTINE ADDRESS.                  * 13150002
*        REGISTER 1 CONTAINS THE DCB ADDRESS WITH SYNAD ERROR         * 13200002
*        INFORMATION (X'42) IN THE HIGH ORDER BYTE.                   * 13210002
*        REGISTER 0 CONTAINS THE DECB ADDRESS FROM THE IOB IN ERROR   * 13220002
*        FOR BSAM AND THE ADDRESS OF THE IOB IN ERROR WITH THE OFFSET * 13230002
*        INTO THAT IOB OF THE WRITE CCW IN THE HIGH ORDER BYTE FOR    * 13240002
*        QSAM.                                                        * 13242002
*                                                                     * 13250002
*        IFG0RR0B IS GIVEN CONTROL TO CONTINUE RECOVERY PROCESSING.   * 13260002
*        REGISTERS OF THE IFG0RR0B SUBROUTINE PASSING CONTROL TO      * 13270002
*        IFG0554T WILL BE RESTORED BEFORE RETURNING TO IFG0RR0B.      * 13280002
*                                                                     * 13290002
* EXIT-NORMAL =                                                       * 13300002
*        IFG0554P TO MAKE STILL ANOTHER ATTEMPT TO GET SPACE ON       * 13350002
*        THE CURRENT VOLUME.                                          * 13400002
*                                                                     * 13500002
*        IFG0RR0B TO CONTINUE RECOVERY PROCESSING.                    * 13600002
*                                                                     * 13700002
* EXIT-ERROR =                                                        * 13750002
*        IFG0550P GIVEN CONTROL THROUGH DMABCOND MACRO WITH AN        * 13800002
*        INTERNAL ABEND CODE IN REGISTER 0 -                          * 13850002
*        190 - 737-4 - I/O ERROR READING OR WRITING DSCB              * 13900002
*        186 - D37-4 - NO SECONDARY SPACE SUPPLIED.                   * 13950037
*        185 - B37-4 - NO VOLUME COULD BE DISMOUNTED ON WHICH TO      * 14000002
*        MOUNT ANOTHER VOLUME TO CONTINUE OUTPUT PROCESSING.          * 14050002
*        184 - E37-4 - NO MORE VOLUMES SPECIFIED IN JFCB (VOLUME      * 14060037
*        COUNT OR NUMBER OF VOLUMES REACHED).                         * 14070037
*                                                                     * 14100002
*        SYSTEM 001 ABEND ISSUED.                                     * 14150002
         EJECT                                                          14250002
* EXTERNAL REFERENCES = SEE BELOW                                     * 14300002
*                                                                     * 14350002
*    ROUTINES =                                                       * 14400002
*        IFG019RA THROUGH THE IECRES MACRO.                           * 14450002
*                                                                     * 14460002
*        IECPRLTV - MBBCCHHR TO TTR CONVERT ROUTINE.                  * 14470002
*                                                                     * 14480002
*        B37/D37/E37 ABEND EXIT.                                      * 14490037
*                                                                     * 14500002
*    DATA AREAS =                                                     * 14550002
*        EOV WORKAREA.                                                * 14600002
*                                                                     * 14650002
*    CONTROL BLOCK =                                                  * 14700002
*        DCB                                                          * 14750002
*        CVT                                                          * 14850002
*        DEB                                                          * 15000002
*                                                                     * 15050002
* TABLES =                                                            * 15100002
*        DCB EXIT LIST.                                               * 15150002
*                                                                     * 15200002
* MACROS =                                                            * 15250002
*        MODESET                                                      * 15300002
*        IECRES-LOAD                                                  * 15350002
*        IECRES-FREE                                                  * 15360002
*        IECRES-EXIT                                                  * 15370002
*        IECRES-INIT                                                  * 15400002
*        IECRES-UEXIT                                                 * 15410002
*        ABEND                                                        * 15420002
*        EXCP                                                         * 15450002
*        WAIT                                                         * 15500002
*        DMABCOND                                                     * 15550002
*        XCTLTABL                                                     * 15600002
*        IECDSECS                                                     * 15650002
*        IECEQU                                                       * 15700002
*                                                                     * 15750002
* CHANGE ACTIVITY =                                                   * 15800002
*        SEE CHANGES/DELETIONS SECTION JUST AFTER CSECT CARD.         * 15850002
*                                                                     * 15900002
*********************************************************************** 15950002
         EJECT                                                          15960002
EABD185  EQU   185                      B37-4 INTERNAL ABEND CODE       16000002
EABD186  EQU   186                      D37-4 INTERNAL CODE    @ZA02218 16050037
EABD190  EQU   190                      737-4 INTERNAL ABEND CODE       16200002
         BALR  RBASE,0                  ESTABLISH ADDRESSABILITY        16400021
         USING *,RBASE                                           YM3903 16450002
         USING FORCORE,RCORE                                            16600021
         USING WTG,RWTG                 BASE FOR WTG TABLE       Y02080 16650002
         USING TIOENTRY,RTIOT                                           16800021
         USING UCB,RUCB                                                 17000021
         USING DEBBASIC,RDEB                                     YM1272 17200002
         USING DCBRELAD,RDCB                                            17400021
         L     RDEB,DCBDEBAD            GET DEB                  YM6520 17807502
         L     RUCB,DEBSUCBA            GET OLD UNIT             YM6520 17815002
         LA    RUCB,K0(,RUCB)           CLEAR HIGH BYTE          YM6520 17822502
         ST    RUCB,DXUCBADR            PLACE IN WORKAREA        YM6520 17830002
         LA    R1,EABD186               GET D37 ABEND CODE     @ZA02218 17832037
         CR    RC,R1                    D37 ABEND PROCESSING?  @ZA02218 17834037
         BE    EDO08400                 YES, BR TO CHECK FOR   @ZA02218 17836037
*                                       EXIT. BYPASS VOLUME    @ZA02218 17836437
*                                       MOUNT ROUTINE BECAUSE  @ZA02218 17836837
*                                       THE VOLUME IS STILL    @ZA02218 17837237
*                                       MOUNTED.               @ZA02218 17837337
*                                                                       17837502
*        LOCATE PREVIOUS VOLUME'S VOLSERNO USING DXVOLSEQ WHICH  YM6520 17845002
*        HAS BEEN INCREMENTED BY ONE IN ATTEMPTING TO MOUNT THE  YM6520 17852502
*        NEXT VOLUME.                                            YM6520 17860002
*                                                                       17867502
         LH    R1,DXVOLSEQ              NEW SEQUENCE             YM6520 17875002
         BCT   R1,EDO08310              BRANCH IF VOLSEQ NOT ONE YM6520 17882502
         B     EDO08875                 ABEND IF COUNT WAS ONE   YM6520 17890002
EDO08310 EQU   *                        R1 HAS OLD VOLUME SEQ    YM6520 17897502
         CH    R1,HWD5                  IS VOLSER IN JFCB        YM6520 17905002
         LA    RET,JFCBVOLS-K4          INITIALIZE IF IN JFCB    YM6520 17912502
         BNH   EDO08325                 BRANCH IF IN JFCB        YM6520 17920002
         LA    RET,JFCBEXAD             JFCB EXTENTION ADDR      YM6520 17927502
         SH    R1,HWD5                  REDUCE BY 5              YM6520 17935002
EDO08320 EQU   *                        CHECK NEXT EXTENTION     YM6520 17942502
         CLC   ADCON0,K0(RET)           IS THERE AN EXTENTION    YM6520 17944002
         BZ    EDO08875                 ABEND IF NOT             YM6520 17945502
         IECRES LOCJFCB,(RET)           LOCATE JFCB EXTENTION    YM6520 17950002
         CH    R1,HWD15                 IS VOLSER IN THIS EXT.   YM6520 17972502
         BNH   EDO08325                 BRANCH IF YES            YM6520 17980002
         SH    R1,HWD15                 REDUCE BY 15             YM6520 17987502
         B     EDO08320                 TRY NEXT ONE             YM6520 17995002
EDO08325 EQU   *                        GET VOLSER               YM6520 18002502
         BCTR  R1,0                     REDUCE BY 1              YM6520 18010002
         MH    R1,HWD6                  GET OFFSET               YM6520 18017502
         LA    RET,K4(R1,RET)           RET POINTS TO VOLSER     YM6520 18025002
         MVC   DXVOLSR1,K0(RET)         PUT VOLSER IN DXVOLSR1   YM6520 18032502
         EJECT                                                          18034002
*                                                                       18040002
*        ENSURE VOLUME IS STILL MOUNTED                          YM6520 18047502
*                                                                       18055002
         LA    RET,EDO08875             ABEND IF SUBSEQUENT ERR  YM6520 18062502
         L     RF,DXXPREFX              PREFIX ADDR              YM6520 18077502
         USING IECPREFX,RF              PREFIX ADDRESSABILITY    YM6520 18085002
         STM   R0,RET,IECREGSV          SAVE SETLOCK REGS       ZA00019 18092502
         MODESET EXTKEY=SUPR            SETLOCK KEY              YM6520 18094002
EDO08330 SETLOCK OBTAIN,TYPE=LOCAL,MODE=UNCOND,                        *18100002
               RELATED=(LOCAL,IFG0554T(EDO08345)) GET LOCK       YM6520 18107502
         MODESET EXTKEY=DATAMGT         RETURN TO D. M. KEY      YM6520 18109002
         LM    R0,RET,IECREGSV          RESTORE SETLOCK REGS    ZA00019 18115002
         CLC   UCBVOLI,DXVOLSR1         IS VOLUME MOUNTED STILL  YM6520 18122502
         BNE   EDO08340                 BRANCH IF NO-ABEND       YM6520 18130002
         L     R0,UCB+(((UCBDMCT-UCB)/K4)*K4) ALIGN & LOAD WORD  YM6520 18137502
EDO08335 EQU   *                        INCREMENT D M COUNT      YM6520 18145002
         LR    RF,R0                    SAVE IN RF               YM6520 18152502
         SLL   RF,K25                   COUNT IN HIGH 7 BITS     YM6520 18160002
         SRL   RF,K25                   COUNT IN LOW 7 BITS      YM6520 18167502
         CLM   RF,B'0001',BYTE127       IS THERE 127 USERS       YM6520 18175002
         BNL   EDO08340                 BRANCH IF YES            YM6520 18182502
         LA    R1,K1                    INCREMENT VALUE          YM6520 18190002
         AR    R1,R0                    R1 HAS UPDATED WORD      YM6520 18197502
         EJECT                                                          18199002
         MODESET EXTKEY=SUPR            UCB KEY                  YM6520 18205002
         CS    R0,R1,UCB+(((UCBDMCT-UCB)/K4)*K4) UPDATE COUNT    YM6520 18212502
         MODESET EXTKEY=DATAMGT         RETURN TO DM KEY         YM6520 18220002
         BNE   EDO08335                 TRY AGAIN-R0 IS RESET    YM6520 18227502
         NI    DXATEOV,X'FF'-DXATNVOL   INDICATE TO RECOVERY OLD YM6520 18242502
*                                       UNIT IS STILL ACTIVE     YM6520 18244002
         LA    RET,EDO08400             NORMAL RETURN            YM6520 18265002
EDO08340 EQU   *                        RLSE LOCK-RETURN ON RET  YM6520 18272502
         L     RF,DXXPREFX              PREFIX ADDRESS           YM6520 18280002
         STM   R0,RET,IECREGSV          SAVE SETLOCK REGS       ZA00019 18287502
         MODESET EXTKEY=SUPR            SETLOCK KEY              YM6520 18289002
EDO08345 SETLOCK RELEASE,TYPE=LOCAL,                                   *18295002
               RELATED=(LOCAL,IFG0554T(EDO08330)) RELEASE LOCK   YM6520 18302502
         MODESET EXTKEY=DATAMGT         RETURN TO D. M. KEY      YM6520 18304002
         LM    R0,RET,IECREGSV          RESTORE REGS            ZA00019 18310002
         BR    RET                      RETURN                   YM6520 18317502
*                                                                YM7099 18318002
*        RETURN TO IFG0RR0B                                      YM7099 18319002
*                                                                YM7099 18320002
EDO08360 EQU   *                                                 YM7099 18321002
         MVC   WTGMODNM,RECMOD          MOVE RECOVERY MOD NAME   YM7099 18322002
         L     RF,DXATCOM3              GET RRPLIST PTR          YM7099 18323002
         USING RRPLIST,RF                                        YM7099 18324002
         L     RF,RRFWORK               RECOVERY SUBRTN SAVEAREA YM7099 18325002
         L     RET,IECREGSV-IECEXTPR+K4*RET(,RF) GET RETURN ADDR YM7099 18327002
         ST    RET,WTGMODEP             SET EPA TO RETURN ADDR   YM7099 18328002
         LM    R0,RD,0(RF)              GET RECOVERY SUBRTN REGS YM7099 18329002
         IECRES LOAD,EXTPR=(RF),BRANCH=DIRECT RETURN TO IFG0RR0B YM7099 18330002
         EJECT                                                          18332502
         DROP  RF                                                YM6520 18340002
*                                                                       18400021
*        CHECK FOR DCB EXIT, IF NONE ISSUE B37 ABEND                    18400502
*                                                                       18402502
EDO08400 EQU   *                        ONLY LOOK IF BSAM/QSAM          18600002
         L     R1,WTGPREFX              GET BASE PREFIX ADDR     YM7099 18650002
         CLC   IECCORID-IECPREFX(K4,R1),RECCORID  RECOVERY ENTRY YM7099 18700002
         BE    EDO08360                 BRANCH IF RECOVERY ENTRY YM7099 18750002
         TM    DCBMACRF,DCBMEXCP        CHECK FOR EXCP                  18800021
         BO    EDO08875                 IF EXCP, IMMEDIATE ABEND YM6520 19000002
         TM    DCBDSORG,DCBORGPS        IS THIS PHYSICAL SEQ.           19200021
         BZ    EDO08875                 NO, IMMEDIATE ABEND      YM6520 19400002
         TM    DCBMACRF+K1,DCBMPUT+DCBMWRIT  QSAM (PUT) OR              19600021
*                                            BSAM (WRITE) DCB           19800021
         BZ    EDO08875                 NO, IMMEDIATE ABEND      YM6520 20000002
*                                                                       20200021
*                        CHECK FOR DCB EXIT                             20400021
*                                                                       20600021
         L     R1,DCBEXLST              EXIT LIST = 0 OR 1              20800021
         LA    R1,K0(,R1)                                               21000021
         LA    R0,K1                                                    21200021
         CR    R1,R0                                                    21400021
         BNH   EDO08875                 NO EXIT LIST SPECIFIED          21600002
         SR    RD,RD                    SET FIRST PASS SW FOR  @ZA02218 21650037
*                                       D37 ABEND PROCESSING   @ZA02218 21700037
EDO08600 EQU   *                        SEE IF 08 EXIT                  21800002
         MODESET KEYADDR=DXUKEY,WORKREG=15 USER EXIT LIST        Y02082 21850002
         CLI   0(R1),X08                CK FOR ACTIVE DCB EXIT          22000002
         BE    EDO08700                 YES SET UP EXIT                 22200021
         CLI   0(R1),X08+X80                                            22400002
         BE    EDO08700                 YES SET UP EXIT                 22600021
         TM    K0(R1),LASTNTRY          IS THIS END OF LIST             22800002
         BO    EDO08875                 YES, IMMEDIATE ABEND     YM6520 23000002
         LA    R1,K4(,R1)               INCREMENT TO NEXT ENTRY  YM1344 23050002
         B     EDO08600                 LOOP TO CHECK NEXT ENTRY YM1344 23400002
         EJECT                                                          23450002
EDO08700 EQU   *                        SEE IF ADDRESS ZERO             23600002
         L     RET,K0(,R1)              GET EXIT ADDRESS         Y02082 23610002
         MODESET EXTKEY=DATAMGT         EOV KEY                  Y02082 23650002
         LA    R1,K0(,RET)              CLEAR HIGH BYTE          Y02082 24050002
         CR    R1,R0                    IS ADDRESS SPECIFIED     Y02082 24100002
         BNH   EDO08875                 BRANCH IF NO             Y02082 24150002
         CLI   DEBNMEXT,K16             CHECK FOR 16 EXTENTS            24160002
         BNL   EDO08900                 BR HI OR EQ TO 16               24170002
         L     RUCB,DXUCBADR            GET UCB ADDRESS          YM5385 24180002
         TM    UCBJBNR,UCBVRDEV         IS IT VIO UNIT           YM5385 24190002
         BO    EDO08900                 BR IF YES-NO RECOVERY,   YM5385 24192002
*                                       LIKE 16 EXTENT DEB       YM5385 24194002
         NI    DCBOFLGS,X'FF'-DCBOLOCK  SET LOCK BIT OFF                24200021
*                                                                Y02082 24250002
* COPY THE DCB FROM THE WORK AREA TO USER'S STORAGE              Y02082 24300002
*                                                                Y02082 24350002
         IECRES INIT,DCBCOPY=FRWKAR,STM=(3,14,WTGPREFX) COPY DCB Y02082 24360002
         IECRES UEXIT,EXITAD=(RET),REG1=DXUDCBAD, TAKE EXIT      Y02082*24380002
               STM=(2,13,DXXPREFX)      TAKE EXIT                Y02082 24430002
         LR    RET,RF                   SAVE REGISTER 15         YM0854 28850000
         EJECT                                                          28860002
         L     RDCB,DXUDCBAD            GET PTR TO USER'S DCB    Y02082 28900002
         MODESET KEYADDR=DXUKEY,WORKREG=1 ASSUME USER'S KEY      Y02082 28942002
         OI    DCBOFLGS,DCBOLOCK        INDICATE RETURN FR USER  Y02082 28946002
         MODESET EXTKEY=DATAMGT         RESUME DATA MGT KEY      Y02082 28948402
         L     RDCB,DXPDCBAD            POINT TO COPIED DCB      Y02082 28948802
         OI    DCBOFLGS,DCBOLOCK        SET LOCK BIT ON          YM0854 29000000
*                                                                       29020002
*        INSPECT RETURN CODE                                            29030002
*                                                                       29040002
         LA    RET,K0(,RET)             CLEAR HI-ORDER BYTE      Y02082 29050002
         LA    R8,K2                    HIGHEST PERMISSIBLE RET  Y02082 29100002
         CLR   RET,R8                   CHK IF EXCEED MAX        YM1344 29150002
         BNH   EDO08840                 VALID - THEN USE IT      Y02082 29160002
         LA    RET,K2                   IF INVALID DEFLT B37     Y02082 29170002
EDO08840 EQU   *                        GET TO FULLWORDS         Y02082 29180002
         SLL   RET,K2                   RET * 4                  YM0854 29200002
         B     EDO08850(RET)            VECTOR BRANCH            YM0854 29400000
         SPACE 2                                                        29450002
EDO08850 EQU   *                        BRANCH TABLE                    29600002
         B     EDO09400                 RF=0 - TRY TO EXTEND            29610002
         SPACE 2                                                        29650002
         B     EDO08900                 RF=1 - UPDATE DSCB, SYNAD       29800002
         SPACE 2                                                        29850002
EDO08870 EQU   *                                               @ZA02218 29900037
         BAL   R8,EDO09700              RF=2 - UPDATE DSCB, ABEND       30000002
EDO08875 EQU   *                        ABEND                           30200002
         MODESET EXTKEY=DATAMGT         RETURN TO KEY 5          Y02082 30250002
         L     R1,WTGPREFX              GET BASE PREFIX ADDR     YM7099 30300002
         CLC   IECCORID-IECPREFX(K4,R1),RECCORID  RECOVERY ENTRY YM7099 30350002
         BE    EDO08360                 BRANCH IF RECOVERY ENTRY YM7099 30360002
         LR    R0,RC                    LOAD ABEND CODE        @ZA02218 30400037
         B     EDO10050                 BRANCH TO PROB DET     @ZA02218 30600037
         EJECT                                                          30650002
* 1) UPDATE DSCB                                                        30700002
* 2) LINK THROUGH ALL QSAM IOB/ICB(S) TURNING OFF THE UNIT EXCEPTION    30750002
* STATUS INDICATOR IN THE CSW'S.                                        30760002
* 3) EXIT TO SYNAD ROUTINE                                              30770002
EDO08900 EQU   *                        UPDATE DSCB FIRST               30800002
         BAL   R8,EDO09700              GO TO UPDATE LAST TRK IN DSCB   31000021
         L     RF,DCBIOBA               POINTER TO AN IOB IN CHAIN      32800021
         LA    RF,K0(,RF)                                               33000021
         MODESET KEYADDR=DXUKEY,WORKREG=1 IOB KEY                Y02082 33050002
         L     R1,K0(RF)                ADDRESS OF NEXT IOB IN CHAIN    33200021
EDO09000 EQU   *                        TURN OFF UNIT EXCEPTION         33400002
         LA    R1,K0(R1)                CLEAR HIGH ORDER BYTE           33600021
         NI    K20(R1),ALLBITS-CSWUNITX SET OFF UNIT EXCEPTION IN CSW   33800002
         CR    R1,RF                    IS THIS END OF CHAIN            34000021
         L     R1,K0(R1)                GET NEXT IOB IN CHAIN           34200021
         BNE   EDO09000                 NOT END OF CHAIN,CONTINUE LOOP  34400021
         LA    R1,X40+X02               INDICATE PUT ERROR NO SPACE ON  34600002
         SLL   R1,K24                   VOLUME JUSTIFY LEFT  THE CODE   34800021
         ICM   R1,B'0111',DXUDCBAD+K1   PUT USER DCBAD IN R1    YA02662 35000002
         TM    DCBMACRF+K1,DCBMWRIT     IS THIS BSAM           @ZA10234 35050037
         BO    EDO09050                 YES, BYPASS MOVE       @ZA10234 35100037
         MODESET EXTKEY=DATAMGT         DCB COPY KEY             Y02082 35150037
         MVC   DCBRECAD(K4),DCBEOBAD                                    35200037
         MODESET KEYADDR=DXUKEY,WORKREG=8 IOB KEY              @ZA08028 35250037
EDO09050 EQU   *                                               @ZA10234 35300037
         MVI   K4(RF),ECBCOD7F          RESET IOB COMPLETE              35400021
         L     RF,K4(,RF)               ADDRESS OF IOB IN ERROR         35600021
         LA    R0,K8(RF)                INDEX PAST IOB HDR              36000021
         SR    RF,RF                                                    36200021
         IC    RF,DCBOFFSW              INSERT IOB OFFSET               36400021
         SH    RF,CNST8                 ADJUST FOR EIGHT BYTE HDR       36600002
         SLL   RF,K24                   JUSTIFY LEFT THE OFFSET         36800021
         OR    R0,RF                    REG 0 WITH OFFSET & IOB ADDRESS 37000021
         TM    DCBMACRF+K1,DCBMREAD     IS CALLER BSAM                  37200021
         BZ    EDO09200                 NO,QSAM                         37400021
         LR    RF,R0                    MOVE IOB PTR TO ADDRESSABLE REG 37600021
         L     RF,K4(RF)                GET DECB PTR                    37800021
         LA    R0,K0(RF)                CLEAR HI BYTE + SET R0 FOR BSAM 38000021
         EJECT                                                          38050002
EDO09200 EQU   *                        SEE IF SYNAD CAN BE TAKEN       38200002
         MODESET EXTKEY=DATAMGT         EOV KEY                  Y02082 38250002
         NI    DCBCIND2,ALLBITS-DCBC2FEO CLEAR FEOV FLAGS               38400002
         TM    DCBCIND2,DCBC1EOB        IS CLOSE IN CONTROL             38600021
         BO    EDO10100                 YES, ABEND WITHOUT SYNAD        38800002
         TM    DCBSYNAD+K3,X01          TEST FOR SYNAD                  39000002
         BO    EDO10100                 IF NONE, ABEND                  39200002
         OI    DCBCIND2,DCBC2PIO        SET PERM ERR SO SYNAD CAN CLOSE 39400021
         NI    DCBOFLGS,ALLBITS-DCBOBUSY TURN OFF BUSY BIT              39600002
*                                                                Y02080 39650002
* POINT DEB TO USER DCB                                          Y02082 39700002
*                                                                Y02080 39750002
         TM    TIOELINK,TIOTSPOL        TEST FOR SPOOLED         YM1272 39754002
         BM    EDO09250                 BR IF SPOOLED            YM1272 39756002
         MVC   DEBDCBAD+K1(L'DEBDCBAD-K1),DXUDCBAD+K1 POINT DEB  YM1272*39758002
                                        TO USER DCB              YM1272 39758402
         L     RF,DXDEBXAD              GET PTR TO DEB EXTENSION YM1272 39758802
         NI    DEBXFLG1-DEBXTN(RF),ALLBITS-DEBXCDCB DEB PT USER  YM1272 39759202
EDO09250 EQU   *                        EXIT TO SYNAD ROUTINE    YM1272 39759602
         NI    DCBCIND1,X'FF'-DCBC1EOB  CLEAR QSAM VOLUME FULL INDICATR 39760002
*                                                                       39760802
*        REFRESH THE USER'S DCB FROM THE COPY                           39761202
*                                                                       39761602
         IECRES INIT,DCBCOPY=FRWKAR,STM=(0,14,DXXPREFX)          Y02082 39762002
         EJECT                                                          39762402
         L     R8,DCBSYNAD              SYNAD ADDRESS FROM DCB   Y02080 39764002
         LR    R9,R0                    SAVE REG 0 IN REG 9    @ZA05438 39764637
         LR    RA,R1                    SAVE REG 1 IN REG A    @ZA05438 39765237
*                                                                       39766002
*        FREE THE EOV WORKAREA(S)                                       39768002
*                                                                       39768402
         IECRES FREE,A=(RCORE),PREFIX=EOV                        Y02080 39770002
*                                                                Y02080 41450002
*        RETURN TO CALLER (QSAM)                                 Y02080 41500002
*                                                                Y02080 41550002
         LR    RF,R8                    SYNAD ADDRESS IN 15      Y02080 41552002
         LR    R0,R9                    RESTORE REG 0          @ZA05438 41554037
         LR    R1,RA                    RESTORE REG 1          @ZA05438 41556037
         IECRES EXIT                    RETURN                   Y02080 41560002
*                                                                       41640002
*        RETURN TO IFG0554P TO EXTEND ON SAME VOLUME                    41690002
*                                                                       41740002
EDO09400 EQU   *                        RETURN CODE 0 FROM EXIT         42200002
         LA    R1,EABD186               GET D37 ABEND CODE     @ZA02218 42250037
         CR    RC,R1                    D37 ABEND PROCESSING?  @ZA02218 42300037
         BNE   EDO09405                 NO, BR                 @ZA02218 42350037
         LTR   RD,RD                    FIRST PASS?            @ZA02218 42360037
         BNZ   EDO08870                 NO, BR TO ASSUME RC=2  @ZA02218 42370037
         LA    RD,4                     SET SECOND PASS SW     @ZA02218 42380037
         L     R1,DCBEXLST              GET EXLST ADDR IN REG 1@ZA02218 42382037
         B     EDO08600                 BR TO TAKE EXIT AGAIN  @ZA02218 42390037
EDO09405 EQU   *                                               @ZA02218 42392037
         LA    RD,K1                    GET SPACE ON SAME VOLUME        42400021
         LA    RWTG,DXXAREA             POINTER TO WTG TABLE     Y02134 42450002
         LA    RWTGC,DXXENTRY           POINTER TO WTG ENTRY     Y02134 42500002
         IECRES LOAD,MODID=ID4T4P,BRCODE=K16,BRANCH=QUEUED       Y02134 44250002
         EJECT                                                          44260002
*                                                                       46400021
*          ENTER VIA BAL RH,UPDATTRK                                    46600021
*          ROUTINE TO UPDATE LAST TRK                                   46800002
*                                                                       46850002
EDO09700 EQU   *                        WRITTEN AND PUT IN DSCB         47000021
         MVC   DXDEBUCB+K1(K3),DXUCBADR+K1 UCB TO WA DEB         Y02134 47400002
         MVC   DXDEBSCC(K10),UPDDUMXT   MOVE DUMMY EXTENT TO DEB        47600021
         L     RUCB,DXUCBADR            GET UCB ADDRESS          YM5385 47610002
         TM    UCBJBNR,UCBVRDEV         IS IT VIO UNIT           YM5385 47620002
         BZ    EDO09750                 BRANCH IF NO             YM5385 47630002
         DROP  RUCB                                              YM5385 47640002
         USING VDSCB,RUCB                                        YM5385 47650002
*                                       MOVE VDSDSCB TO WORKAREA YM5385 47660002
         MVC   DXDSCB(DSCEXT2-DSCFMTID),VDSDSCB+L'JFCBDSNM       YM5385 47670002
         OC    DXDSCB(DSCEXT2-DSCFMTID),DXDSCB IS DSCB SCRATCHED YM5385 47680002
         BZ    EDO10025                 BRANCH IF YES            YM5385 47690002
         XC    DSCEXT2(DSCBEND-DSCEXT2),DSCEXT2 ZERO 3RD EXTENT  YM5385 47700002
*                                       AND CHAIN POINTER        YM5385 47710002
         B     EDO09800                 UPDATE DSCB              YM5385 47720002
         DROP  RUCB                                              YM5385 47730002
         USING UCB,RUCB                                          YM5385 47740002
EDO09750 EQU   *                        USE REAL I/O             YM5385 47750002
         LR    R7,RDEB                  PICK UP DEB ADDRESS             47800021
         SH    R7,UPD016                POSITION AT (-16)               48000021
         MVC   DXDAADDR+K1(K7),DEB+K1-DEB(R7)  BBCCHHR OF               48200021
*                                                DSCB TO SEEK WRD       48400021
         MVI   DXDAADDR,K0              SET -M- TO ZERO                 48600021
*                                                                       48800021
*        GENERATE CHANNEL PROGRAM TO READ FRMT 1 DSCB                   49000021
*                                                                       49200021
         XC    DXCCW1(K24),DXCCW1       CLEAR CCW'S                     49400021
         LA    R1,DXDAADDR+K3           ADDRESS OF CCHHR                49600021
         ST    R1,DXCCW1                SEARCH ID TO CCW1               49800021
         LA    R1,DXCCW1                ADDR OF SEARCH CMD TO TIC       50000021
         ST    R1,DXCCW2                STORE IN CCW2                   50200021
         LA    R1,DXDSCB                READ INTO AREA ADDRESS          50400021
         ST    R1,DXCCW3                TO READ M/T COMMAND             50600021
         OC    DXCCW1(K24),UPDCCWS      OR IN SKELETON CCW'S            50800021
         BAL   R7,EDO10000              BRANCH TO I/O ROUTINE           51000021
*                                                                       51200021
*        END OF DSCB READ ROUTINE                                       51400021
         EJECT                                                          51600002
EDO09800 EQU   *                        UPDATE DSCB              YM5385 51610002
*              UPDATE LAST TRACK WRITTEN IN DSCB                        51800021
*                       MBBCCHHR TO TTR CONVERT ROUTINE                 52000021
*                       (IECPRLTV) WILL BE USED                         52200021
*                                                                       52400021
         STM   RDCB,RD,DXCCW5           SAVE REGS                       52600021
         LR    R1,RDEB                  ADDR USER'S DEB TO PARM REG     52800021
         LA    RDCB,DCBFDAD             ADDR MBBCCHHR TO PARAM REG      53000021
         L     RF,CVTPTR                ADDRESS OF CONVERT ROUTINE      53200021
         USING CVT,RF                                            YM6520 53207502
         L     RF,CVTPRLTV              FROM COMM VECTOR TABLE          53400021
         BALR  RET,RF                   GO TO CONVERT ROUTINE           53600021
         DROP  RF                                                YM6520 53607502
         LM    RDCB,RD,DXCCW5           RESTORE REGS                    53800021
         ST    R0,DXCCW5                PUT TTR OF LAST TRK USED        54000021
         MVC   DSCLSTAR(K3),DXCCW5      INTO THE DSCB                   54200021
         MVC   DSCLSTAR+K3(K2),DCBTRBAL  NUM OF BYTES LEFT ON TRACK     54400021
         OI    DSCDSIND,LASTNTRY        LAST VOLUME BIT         YA03178 54410002
         OI    DXATDACC,DXATTRAK        LAST TRK USED AND TRK    Y02144 54450002
*                                       BALANCE FIELDS UPDATED   Y02144 54500002
         EJECT                                                          54510002
*                                                                       54600021
*        WRITE FORMAT 1 DSCB BACK                                       54800021
*                                                                       55000021
         TM    UCBJBNR,UCBVRDEV         IS IT VIO UNIT           YM5385 55010002
         BZ    EDO09850                 BRANCH IF NO             YM5385 55020002
         DROP  RUCB                                              YM5385 55030002
         USING VDSCB,RUCB                                        YM5385 55040002
         MODESET EXTKEY=SCHED           VDSCB KEY                YM5385 55050002
*                                       MOVE DSCB TO SWA         YM5385 55060002
         MVC   VDSDSCB+L'JFCBDSNM(DSCEXT2-DSCFMTID),DXDSCB       YM5385 55070002
         MODESET EXTKEY=DATAMGT         RETURN TO D.M. KEY       YM5385 55080002
         B     EDO09900                 UPDATE COMPLETE          YM5385 55090002
         DROP  RUCB                                              YM5385 55100002
         USING UCB,RUCB                                          YM5385 55110002
EDO09850 EQU   *                        USE REAL I/O             YM5385 55120002
         XC    DXCCW3(K48),DXCCW3       CLEAR CCWS                      55200021
         LA    R1,DXDAADDR+K3           SEARCH ADDRESS                  55400021
         ST    R1,DXCCW6                                                55600021
         LA    R1,DXCCW1                TIC ADDRESS                     55800021
         ST    R1,DXCCW4                                                56000021
         LA    R1,DXDSCB                BUFFER ADDRESS                  56200021
         ST    R1,DXCCW5                                                56400021
         ST    R1,DXCCW8                                                56600021
         LA    R1,JFCBDSNM              DSNAME FOR SEARCH KEY           56800021
         ST    R1,DXCCW3                                                57000021
         LA    R1,DXCCW6                TIC ADDRESS                     57200021
         ST    R1,DXCCW7                                                57400021
         OC    DXCCW3(K48),WRTCCWS      FINISH CHANNEL PROGRAM          57600021
         BAL   R7,EDO10000              BRANCH TO I/O ROUTINE           57800021
EDO09900 EQU   *                        SET AUDIT TRAIL BIT      YM5385 57810002
         OI    DXATDACC,DXATUPDB        UPDATED DSCB WRITTEN     Y02144 57850002
         BR    R8                       RETURN                          58000021
         EJECT                                                          58050002
*                                                                       58200021
*        I/O ROUTINE- READS/WRITES FORMAT 1 DSCB                        58400021
*                                                                       58600021
EDO10000 EQU   *                        EXCP/WAIT/TEST FOR ERROR        58800002
         EXCP  DXIOB                    EXECUTE CHANNEL PROGRAM         59000021
         WAIT  ,ECB=DXECB               WAIT FOR COMPLETION             59200021
         TM    DXECB,ECBCOD7F           TEST COMPLETION CODE            59400021
         BCR   1,R7                     OK, RETURN                      59600021
EDO10025 EQU   *                        VIO ERROR ENTRY          YM5385 59610002
         LA    R0,EABD190               I/O ERROR WR DSCB 737 ABEND     59800021
EDO10050 EQU   *                        TEST IF CLOSE IN CONTROL        60000002
         TM    DCBMACRF,DCBMEXCP        IS THIS EXCP DCB?      @ZA18533 60200037
         BO    EDO10075                 YES, BRANCH            @ZA26360 60280037
         OI    DCBCIND2,DCBC2PIO        SET PERM ERR IN DCB    @ZA26360 60330037
         TM    DCBCIND2,DCBC2PUT        IS CLOSE IN CONTROL             60380037
         BO    EDO10075                 LEAVE BUSY BIT ON               60430037
         NI    DCBOFLGS,X'FF'-DCBOBUSY  TURN OFF BUSY BIT               60680037
EDO10075 EQU   *                        GO TO PROBLEM DETERMINATION     60800002
         LA    RWTGC,DXXENTRY           SET R8 FOR RES RTN              61000021
         LA    RWTG,DXXAREA             POINT TO EOV WTG                61200021
         DMABCOND (0),MODPD4T           LOAD ABEND ERROR CODE           61400021
         SPACE 2                                                        61450002
EDO10100 EQU   *                        ISSUE 001 ABEND DIRECTLY        61600002
         L     RDCB,DXUDCBAD            GET USER'S DCB ADDRESS   YM5924 61610002
         LA    R1,K1                    001 ABEND                Y02082 61650002
         ABEND (1),DUMP,,SYSTEM         SYSTEM ABEND WITH A DUMP Y02080 61800002
         EJECT                                                          61850002
*                                                                       67200021
*              CONSTANTS                                                67400021
*                                                                       67600021
UPDDUMXT DC    X'00000000FFFFFFFF7FFF'  MAX FOR DISK                    67800021
UPD016   DC    H'16'                    HALF WORD 16                    68000021
CNST8    DC    H'8'                     HALF WORKD 8             Y02082 68050002
HWD5     DC    H'5'                     HALF WORD 5              YM6520 68057502
HWD15    DC    H'15'                    HALF WORD 15             YM6520 68065002
HWD6     DC    H'6'                     HALF WORD 6              YM6520 68072502
         DS    0F                                                       68074002
BYTE127  DC    AL1(127)                 BYTE 127                 YM6520 68080002
ADCON0   DC    AL3(0)                   ADCON OF ZERO            YM6520 68087502
UPDCCWS  DC    X'3100000060000005'      SEARCH EQUAL ID                 68200021
         DC    X'0800000000000000'      TIC                             68400021
         DC    X'8600000000000060'      READ DATA M/T                   68600021
WRTCCWS  DC    X'290000004000002C'      SEARCH KEY (DSNAME)             68800021
         DC    X'0800000040000000'      TIC                             69000021
         DC    X'0500000060000060'      WRITE DSCB                      69200021
         DC    X'3100000060000005'      SEARCH ID                       69400021
         DC    X'0800000040000000'      TIC                             69600021
         DC    X'0600000010000060'      READ,NO DATA TRANSFER           69800021
RECCORID DC    C'RR0A'                  RECOVERY CORE ID         YM7099 70000002
         DS    0F                                                       70200021
MKB370S  DC    X'00000B37'              B37 COMPARE                     70400021
TIOTSPOL EQU   X'06'                    TIOT SPOOLED DS INDIC    YM1272 70450002
         EJECT                                                          70500002
*                                                                       71200021
*          XCTL TABLE FOR IFG0554T                                      71400021
*                                                                       71600021
XCTLTA4T XCTLTABL ID=(MODPD4T,0P,ID4T4P,4P,RECMOD,IFG0RR0B),     YM7099*71800002
               SVC=055,BRT=YES,LENGTH=                           Y02080 71810002
         IECDSECS CVT,TCB,TIOT,DCB,IEZDEB,UCB,MAIN,WTG,RB,PREFX, YM1272X72100002
               RRPL,PSA,EXPAND=YES                               Y02144 72200002
         IDDVDSCB ,                                              YM5385 72210002
         IECEQU IEZDEB=YES                                       YM1272 72250002
         END                                                            72400021
