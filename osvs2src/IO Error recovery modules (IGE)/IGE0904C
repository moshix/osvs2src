         TITLE 'IGE0904C - BSC UNIT EXCEPTION ERP ROUTINE'              00250002
IGE0904C CSECT                                                          00300002
*********************************************************************** 00350002
*                                                                     * 00400002
* MODULE NAME:                                                        * 00450002
*    IGE0904C                                                         * 00500002
*                                                                     * 00550002
* DESCRIPTIVE NAME:                                                   * 00600002
*    BTAM BSC UNIT EXCEPTION ERP                                      * 00650002
*                                                                     * 00700002
* COPYRIGHT:                                                          * 00750002
*    NONE                                                             * 00800002
*                                                                     * 00850002
* STATUS:                                                             * 00900002
*    CHANGE LEVEL 000                                                 * 00950002
*                                                                     * 01000002
* FUNCTION:                                                           * 01050002
*    THIS ROUTINE ATTEMPTS RECOVERY FROM ALL ERRORS THAT DO NOT       * 01100002
*    NORMALLY SET AN ERROR INDICATION. IT ALSO CHECKS VALID ERRORS,   * 01150002
*    SUCH AS  RECOVERY FROM FAILURE TO END TRANSPARENCY, AND FROM     * 01200002
*    CONTENTION SITUATIONS.                                           * 01250002
*                                                                     * 01300002
* NOTES:                                                              * 01350002
*    DEPENDENCIES:                                                    * 01400002
*        NONE                                                         * 01450002
*    RESTRICTIONS:                                                    * 01500002
*        THIS ERP IS ONLY FOR DEVICES SUPPORTED BY BTAM.              * 01550002
*    REGISTER CONVENTIONS:                                            * 01600002
*        SEE 'REGISTER DEFINITION' BELOW                              * 01650002
*                                                                     * 01700002
* PATCHLABEL:                                                         * 01750002
*    PACHAREA (104 BYTES)                                             * 01800002
*                                                                     * 01850002
* MODULE TYPE:                                                        * 01900002
*    PROCEDURE                                                        * 01950002
*    PROCESSOR:                                                       * 02000002
*        BAL                                                          * 02050002
*    ATTRIBUTES:                                                      * 02200002
*        REENTRANT, ENABLED, KEY 0, SUPERVISOR STATE, NO LOCKS HELD.  * 02250002
*                                                                     * 02300002
* ENTRY POINT:                                                        * 02350002
*    IGE0904C                                                         * 02400002
*    PURPOSE:                                                         * 02450002
*        SEE 'FUNCTION'                                               * 02500002
*    LINKAGE:                                                         * 02550002
*        THIS MODULE IS SCHEDULED FOR EXECUTION BY THE INPUT/OUTPUT   * 02600002
*        SUPERVISOR. IT RUNS UNDER AN SIRB.                           * 02650002
*    INPUT:                                                           * 02700002
*        REG 1 = ADDRESS OF IOSB                                      * 02750002
*    OUTPUT:                                                          * 02800002
*        ALTERED CHANNEL PROGRAM                                      * 02850002
*        SETS ERROR INDICATORS IN DECERRST                            * 02900002
*                                                                     * 02950002
* EXITS-NORMAL:                                                       * 03000002
*    APPROPRIATE BTAM ERROR HANDLER VIA BRANCH ENTRY TO XCTL.         * 03100002
*        ALL LOADS START WITH IGE0. THE FIRST LOAD IS IGE0004C.       * 03150000
*        SUBSEQUENT LOADS ARE NUMBERED 1000 HIGHER THAN THE PREVIOUS  * 03200002
*        LOAD.                                                        * 03250000
*        NO REGISTERS ARE SAVED BY THE ERROR ROUTINES AND ONLY        * 03350002
*        REGISTER 1 MAINTAINS TRANSPARENCY BETWEEN LOADS.             * 03400002
*                                                                     * 03450002
* EXITS-ERROR:                                                        * 03500002
*    NONE                                                             * 03550002
*                                                                     * 03600002
* EXTERNAL REFERENCES:                                                * 03650002
*    ROUTINES:                                                        * 03700002
*        NONE                                                         * 03750002
*    DATA AREAS                                                       * 03850002
*        IOB (MAPPED BY IEZIOB)                                       * 03900002
*        VIRTUAL CHANNEL PROGRAM                                      * 03950002
*        ERP WORKAREA (MAPPED BY IECDERWA)                            * 04000002
*    CONTROL BLOCKS                                                   * 04050002
*        UCB                                                          * 04100002
*        DCB                                                          * 04150002
*        DECB                                                         * 04200002
*        IOSB         (MAPPED BY IECDIOSB)                            * 04250002
*        CVT          (MAPPED BY CVT)                                 * 04300002
*        IOB          (MAPPED BY IEZIOB)                              * 04350002
*        RQE          (MAPPED BY IECDRQE)                             * 04400002
*                                                                     * 04450002
* TABLES-WORKAREAS:                                                   * 04500002
*    ERP WORKAREA                                                     * 04550002
*    IOB CHANNEL PROGRAM AREA IN IOB BTAM EXTENSION                   * 04600002
*                                                                     * 04650002
* MACROS:                                                             * 04700002
*    NONE                                                             * 04750002
*                                                                     * 04800002
* CHANGE ACTIVITY:                                                    * 04850002
*    YA01232  (IN BASE)                                               * 04860002
*    YM02595K (9/20/73)                                               * 04866003
*    YM02594K (9/24/73)                                               * 04872003
*    YA02454  (11/1/73)                                               * 04878003
*    YM05652K (1/25/74)                                               * 04884003
*    ZA00519  (7/15/74)                                               * 04890003
*    ZA02314  (11/18/74)                                              * 04900003
*    ZA02316  (11/18/74)                                              * 04902003
*    ZA02846  (03/03/75)                                              * 04904003
*    ZA02847  (03/03/75)                                              * 04906003
*    ZA02849  (03/03/75)                                              * 04908003
*    ZA03556  (03/05/75)                                              * 04910003
*    AZ03974  (04/24/75)          AZ03989  (04/24/75)                 * 04915003
*    AZ04185  (10/01/75)          AZ04866  (08/26/75)                 * 04920003
*    AZ06368  (09/09/75)          AZ06383  (10/01/75)                 * 04925003
*    AZ07662  (11/25/75)          AZ07674  (12/04/75)                 * 04930003
*    AZ11416  (06/08/76)          AZ11424  (06/08/76)                 * 04932003
*    AZ13172  (09/14/76)          AZ13180  (09/13/76)                 * 04935000
*    AZ13206  (09/13/76)          AZ13207  (09/23/76)                 * 04940000
*    AZ17702  (02/15/77)          AZ29189  (01/06/78)                 * 04945000
*    AZ29193  (01/06/78)                                              * 04955000
*                                                                     * 04965000
*********************************************************************** 05000002
         EJECT                                                          05050002
         USING *,BASEREG                                                05100002
         LR    BASEREG,ERREG5      SET BASE REG                         05150002
         USING RQE,ERREG5                                               05200002
         USING IECTDECB,DECBRG                                          05250002
         USING IHADCB,DCBREG                                            05300002
         USING IOSB,IOSBREG                                             05350002
         USING IOBSTDRD,IOBRG                                           05400002
         USING EWA,EWAREG                                               05450002
         B     BEGIN               BRANCH AROUND ID         LD @ZA00519 05460000
         DC    C'IGE0904C'         MODULE ID                LD @ZA00519 05470000
         DC    C' UZ16243'         PTF NUMBER                           05476000
         DC    C'&SYSDATE'         ASSEMBLY DATE            LD @ZA00519 05482000
BEGIN    DS    0H                                           LD @ZA00519 05490000
         L     ERREG5,IOSUSE       BASE RQE                             05500002
         L     EWAREG,IOSERP       BASE ERP WORKAREA                    05550002
         L     IOBRG,RQEIOB        BASE IOB                             05600002
         L     DECBRG,IOBECBPT     BASE DECB                            05650002
         L     DCBREG,IOBDCBPT     BASE DCB                             05700002
         L     UCBREG,IOSUCB       BASE UCB                             05750002
         DROP  ERREG5                                                   05800002
         L     CCWREG,IOBFL3       GET CSW FORM IOB                     05850002
         LA    CCWREG,ZERO(CCWREG)   CLEAR OUT FLAG BYTE                05900002
         SH    CCWREG,ERRCN8       ADJUST TO FAILING CCW IN IOB         05950002
         CLI   ZERO(CCWREG),CCWWRITE   ERROR ON A WRITE OPERATION       06000002
         BE    BSCUE02             YES CHECK FURTHER                    06050002
         CLI   ZERO(CCWREG),CCWAPOLL   ERROR ON A POLL                  06100002
         BE    BSCUE01             YES SET NEW POLL                     06150002
         CLI   ZERO(CCWREG),CCWREAD   FAILURE ON READ (CEA END ERROR)   06200002
         BNE   BSCUE00A            NO SET SNO AND PERM ERROR            06250002
         TM    DECFLAGS,RVIRCV     2 RVI'S RECEIVED IN ORDER            06300002
         BO    BSCUET0A            YES, POST IN ERROR                   06350002
         CLC   DECRESPN(L1),DCBBSENQ  TEST FOR ENQ CHAR.       @ZA06383 06360003
         BNE   BSCCT003            IF NOT, BRANCH           LD @ZA02316 06370003
         CLI   L5(CCWREG),L6       TP-OP CODE OF 06         LD @ZA02316 06380003
         BNE   BSCCT003            IF NOT, BRANCH           LD @ZA02316 06390003
         SH    CCWREG,SIXTEEN      BACK UP 2 CCW'S          LD @ZA02316 06392003
         B     BSCUETA7            UPDATE IOBSTART AND...   LD @ZA02316 06394003
*                                  ...CHECK RETRIES         LD @ZA02316 06396003
BSCCT003 EQU   *                                            LD @ZA02316 06398003
         CLI   IOBWORK,TPOPRENQ    READ ENQ                             06400002
         BNE   BSCUE000            NO CHECK FURTHER                     06450002
         CLC   DECRESPN(L1),DCBBSEOT   EOT RECEIVED                     06500002
         BE    BSCUET0A            YES POST WITH ERROR                  06550002
         SH    CCWREG,ERRCN8       BACK UP ONE CCW                      06600002
         B     BSCUETA7            RETRY PREPARE                        06650002
BSCCT004 NI    IOSFLA,L255-IOSERR-IOSEX   TURN OFF ERP CONTROL INDS.    06700002
         NI    IOBFLAG1,L255-IOBERRTN-IOBIOERR   ALSO IN IOB            06710002
         MVI   IOBSENS0,ZERO                                            06750002
****           ONE LINE OF CODE DELETED BY APAR --------->     @ZA07662 06760003
         NI    EWASTUP,FIRSTBIT    TURN OFF AND TEST X'80'              06800002
         BZ    BSCUET10            POST OPERATION COMPLETE              06810002
         OI    IOSFLB,IOSLOG       SET STAT UPDATE NEEDED               06850002
         MVI   EWAIND1,EWAISTAT    EXIT TO STAT UPDATE         YM05652K 06860002
         B     STATRTN             EXIT TO STAT RTN            @ZA13180 06900000
BSCUE000 EQU   *                                                        06950002
         CLI   IOBWORK,TPOPRREN    READ RESP TO ENQ                     07000002
         BE    BSCUECON            YES CHECK FOR CONTENTION    @ZA13206 07050000
         CLI   IOBWORK,TPOPRTXT    READ TEXT                            07100000
         BE    BSCUE03             YES CHECK FURTHER                    07150002
         CLI   IOBWORK,TPOPRRID    RD ID SEQUENCE                       07200002
         BNE   BSCUE0BB                                                 07250002
         TM    DECFLAGS,INVALID    WAS INVALID ID                       07300002
         BZ    BSCUEVID            IF NOT, BRANCH                       07350002
         CLI   DECTYPE+L1,WRTCON   IS OPERATION WRITE TC                07400002
         BNE   BSCUERTC            NO, BRANCH                           07450002
BSCUECCW EQU   *                                                        07550002
         SH    CCWREG,ERRCN8       BACK UP ONE CCW                      07600002
         B     BSCUETA7            RETRY WRITE ID ENQ                   07650002
BSCUECON TM    DCBXCODE,DCBMASTR   MASTER STATION ?            @ZA13206 07658000
         BNO   BSCUECCW            YES - DO RETRY              @ZA13206 07666000
         TM    DECFLAGS,CONTETON   IS CONTENTION ON ?          @ZA13206 07674000
         BO    BSCUET09            YES, POST PERMANENT         @ZA13206 07682000
         B     BSCUECCW            NO, DO RETRY                @ZA13206 07690000
BSCUERTC EQU   *                                                        07700002
         CLI   DECTYPE+L1,RCONTONE   IS THIS READ TCW                   07750002
         BE    BSCUETA7                                                 07800002
         CLI   DECTYPE+L1,RDCON    IS OPERATION READ TC                 07850002
         BNE   BSCUE00A            NO, SET SHOULD NOT OCCUR             07900002
         B     BSCUETA7            RETRY READ ID ENQ                    07950002
BSCUEVID EQU   *                                                        08000002
         LH    ERREG2,L6(CCWREG)   PICK UP ORIGINAL COUNT               08050002
         SH    ERREG2,IOBCSW+L5    SUBTRACT RESIDUAL COUNT              08100002
         BCTR  ERREG2,ZERO                                              08150002
         A     ERREG2,ZERO(CCWREG)   POINT TO LAST CHARACTER            08200002
         CLC   ZERO(L1,ERREG2),DCBBSNAK   WAS NAK RECEIVED              08250002
         BNE   BSCUE00A            NO, SET SHOULD NOT OCCUR             08300002
         B     BSCUECCW                                                 08350002
BSCUE0BB EQU   *                                                        08400002
         CLI   IOBWORK,TPOPRRTX    READ RESP TO TEXT                    08450002
         BNE   BSCUE00A            NO, SET SHOULD NOT OCCUR             08500002
         L     ERREG2,ZERO(CCWREG)   GET PTR TO RESPONSE                08550002
         CLC   ZERO(L1,ERREG2),DCBBSNAK   WAS RESPONLE NAK              08600002
         BE    BSCUET11            YES, CHECK DYN BUFFERING             08650002
         TM    L17(UCBREG),MULTIPNT   MULTIPOINT ?             @ZA11416 08760000
         BO    BSCUETQ               YES, CHECK ENQ            @ZA11416 08770000
         CLC   ZERO(L1,ERREG2),DCBBSEOT  EOT RECEIVED          @ZA11416 08780003
         BE    BSCUE00A                  YES,SET PERM ERROR    @ZA11416 08790003
BSCUETQ  CLC   ZERO(L1,ERREG2),DCBBSENQ WAS RESPONSE ENQ?      @ZA13172 08800000
         BNE   BSCUE01B            NO, GENERATE WRITE ENQ      @ZA13172 08810000
         CLI   DECTYPE+L1,WTTVX WR CONT CONVERSATIONAL TRANSP? @ZA13172 08820000
         BE    BSCUET11            SET UP TO RETRY WR TEXT     @ZA13172 08830000
         CLI   DECTYPE+L1,WRITTQ   IS THIS A WR INQUIRY?       @ZA13172 08840000
         BNE   BSCUE01B            NO, GENERATE WRITE ENQ      @ZA13172 08850000
         OI    DECFLAGS,SLVCONT    INDICATE CONTENTION                  08900002
         MVC   IOBCSW(L7),IOBERCCW+L17   RESTORE FAILING DATA           08950002
         NI    IOSFLA,L255-IOSERR TURN OFF ERP IN CONTROL IN IOSB       09050003
         NI    IOBFLAG1,L255-IOBERRTN   ALSO IN IOB                     09060002
***      ONE LINE OF CODE DELETED BY APAR----------------->    @ZA07662 09065003
         B     BSCUET10            EXIT VIA IOS                         09100002
BSCUET11 TM    DCBBFTEK,DYNBUF     DYNAMIC BUFFERING                    09150002
         BO    BSCUET0A            YES, POST WITH ERROR                 09200002
         SH    CCWREG,ERRCN8       BACK UP ONE CCW                      09250003
         CLI   TPOPCODE(CCWREG),TPOPRTXT   READ TEXT                    09300002
         BE    BSCUETA7            RETRY WRITE  TEXT                    09350003
         CLI   TPOPCODE(CCWREG),TPOPWENQ  WRITE ENQ ? IF SO    @ZA04866 09360003
*                                     DON'T BACK UP ANY MORE   @ZA04866 09370003
         BE    BSCUETA7            RETRY WRITE TEST            @ZA04866 09380003
         SH    CCWREG,ERRCN8       TRANSPART,  BACK ONE MORE            09400002
         B     BSCUETA7            RETRY WRITE TEXT                     09450002
BSCUE01  LA    ERREG1,IOBCPA       START OF CHAN PROG                   09500002
         CR    ERREG1,CCWREG       FAILING CCW FIRST ONE                09550002
         BE    BSCUERC8       INDICATE INTERNAL ROUTINE 88     @ZA13180 09650000
BSCUE01A EQU   *                                                        09700002
         LA    CCWREG,IOBCPA       RESTART ADDRESS                      09750002
         L     ERREG1,IOBCPA+L8    ADDR OF POLLING ENTRY                09800002
         MVC   IOBCPA+L9(L3),DECENTRY+L1   FAILING ENTRY ADDR           09850002
         L     ERREG3,IOBCPA+L8    SAME ADDR                            09900002
         SR    ERREG1,ERREG3       DIFFERENCE                           09950002
         AH    ERREG1,IOBCPA+L14   TOTAL COUNT                          10000002
         STH   ERREG1,IOBCPA+L14   STORED IN CCW                        10050002
BSCUETA7 ST    CCWREG,IOBSTART                                          10150002
BSCUET08 CLI   IOBERRCT,ERRMAXCT   RETRIES EXHAUSTED                    10250002
         BNL   BSCUET09            YES SET PERM ERROR                   10300002
         IC    ERREG1,IOBERRCT     PICK UP RETRY COUNT                  10350002
         LA    ERREG1,L1(ERREG1)   BUMP BY ONE                          10400002
         STC   ERREG1,IOBERRCT     RESTORE NEW COUNT                    10450002
         NI    DECFLAGS,XBF        RESET BIT 1 IN DECB FLAGS            10460002
BSCUET10 EQU   *                                                        10500002
         MVI   EWAIND1,EWAISVCF    SET SVC 15 RETRY FLAG       @ZA07662 11300003
STATRTN  L     NAMEREG,TRANSRTN    LOAD NAME                   @ZA13180 12200000
         B     XCTLOUT             XCTL                                 12250002
BSCUE00A OI    DECERRST,DECSNO     SET SHOULD NOT OCCUR                 12500002
BSCUET09 NI    IOSFLA,L255-IOSERR  INDICATE PERM ERROR                  12550002
         NI    IOBFLAG1,L255-IOBERRTN   ALSO IN IOB                     12560002
         CLI   DECTYPE+L1,WRTCON   IS OPERATION WRITE TC                12600002
         BNE   BSCUENOW                                                 12650002
         TM    DECFLAGS,IMPRESP    WAS THE RESPONSE A NAK               12700002
         BZ    BSCUEID                                                  12750002
         MVI   IOBCPA+L5,CONNECT   INDICATE LINE CONNECTION             12800002
         B     BSCCT004            POST NORMALLY                        12850002
BSCUEID  EQU   *                                                        12900002
         TM    DECFLAGS,INVALID    WAS IT AN INVALID ID                 12950002
         BZ    BSCUET0A                                                 13000002
         MVC   IOBERCCW(L16),DLEOTCCW   WRITE DLE EOT , DISABLE         13050002
         LA    ERREG1,DCBBSDLE     GET ADDRESS OF DLE EOT               13100002
         ST    ERREG1,IOBERCCW     STORE ADDRESS IN CCW                 13150002
         MVI   IOBERCCW,CCWWRITE   MOVE IN WRITE COMMAND                13200002
         B     BSCUERST                                                 13300002
BSCUENOW EQU   *                                                        13350002
         CLI   DECTYPE+L1,RCONTONE   IS OPERATION READ TCW              13400002
         BE    BSCUETCW                                                 13450002
         CLI   DECTYPE+L1,RDCON    IS OPERATION READ TC                 13500002
         BNE   BSCUET0A                                                 13550002
BSCUETCW EQU   *                                                        13600002
         TM    DECFLAGS,INVALID    WAS IT AN INVALID ID                 13650002
         BZ    BSCUET0A                                                 13700002
         MVC   IOBERCCW(L8),DISABCCW   MOVE IN DISABLE CCW              13750002
BSCUERST EQU   *                                                        13800002
         LA    CCWREG,IOBERCCW                                          13850002
         ST    CCWREG,IOBSTART                                          13900002
         MVI   IOBERRCT,ZERO       SET ERROR COUNT TO ZERO              14600002
         OI    IOSFLA,IOSERR   TURN ON ERP IN CONTROL IN IOSB           14650003
         OI    IOBFLAG1,IOBERRTN   ALSO IN IOB                          14660002
****           ONE LINE OF CODE DELETED BY APAR ------------>  @ZA07662 14670003
         B     BSCUET10                                                 14700002
BSCUET0A LA    NAMEREG,BSCLOD2     ADDRESS OF ERROR POST                14750002
         MVC   EWACHA(L2),L4(UCBREG) MOVE UNIT ADDR TO WK AREA @ZA03989 14770003
XCTLOUT  EQU   *                                                        14800002
         L     ERRETR,CVTPTR       POINT TO CVT                         14850002
         USING CVTMAP,ERRETR                                            14900002
         L     ERRETR,CVTXTLER     POINT TO XCTL ROUTINE                14950002
         DROP  ERRETR                                                   15000002
         BR    ERRETR              XCTL OUT                             15050002
BSCUE01B MVI   IOBWORK+L1,RTRNCDE6   INDICATE INTERNAL ROUTINE          15100002
         LA    ERRLNK,DCBBSENQ     ADDRESS OF ENQ CHAR                  15150000
BSCUET02 LA    ERREG2,CCWWRITE     1ST COMMAND                          15200002
         LA    ERREG5,CCWTIC       2ND COMMAND                          15250000
BSCUET05 ST    ERRLNK,IOBERCCW     STORE DATA ADDR IN CHAN PROG         15300002
         STC   ERREG2,IOBERCCW     STORE COMMAND IN 1ST CCW             15350002
         ST    ERREG2,IOBERCCW+L4   PUT COUNT IN CCW                    15400000
         CLI   IOBWORK+L1,ZERO    HAS SPECIAL INTERNAL RETURN           15430000
*                                 CODE BEEN SET?                        15460000
         BE    BSCUETA6       NO, DON'T SET FLAG FOR 004C               15500000
         MVI   IOBERRCT+L1,RTRNSPCD  SET BRANCHING FLAG FOR             15530000
*                                    SPECIAL RETURN MODULE              15560000
BSCUETA6 EQU   *                                                        15600002
         ST    CCWREG,IOBERCCW+L8  STORE TIC ADDR                       15650002
         MVI   IOBERCCW+L4,CHAINCDE   COM CH, SLI                       15700002
         CLI   IOBWORK+L1,RTRNCDE8   SPEC RETURN OF 88                  15750002
         BNE   BSCUE040           NO,DONT SET COM CH        L5 @ZA03556 15800003
         MVI   IOBERCCW+L4,X70     COM CH, SLI, SKIP                    15850002
         B     BSCUE02F                BUILD 2ND RETRY CCW  L5 @ZA03556 15860003
BSCUE040 CLI   IOBWORK+L1,RTRNCDE0     SPEC RETURN OF 80    L5 @ZA03556 15870003
         BNE   BSCUE02F             NO,BUILD 2ND RETEY CCW  L5 @ZA03556 15880003
         CLI   IOBWORK,TPOPWREN  TP OP CODE OF 08(WT ENQ)   L5 @ZA03556 15890003
         BNE   BSCUE02F              NO,BUILD 2ND RETRY CCW L5 @ZA03556 15892003
         MVI   IOBERCCW+L8,CCWREAD  MAKE 2ND CCW A READ     L5 @ZA03556 15894003
         MVI   IOBERCCW+L12,SLISKIP  SUPRESS INCORRECT      L5 @ZA03556 15896003
*            LENGTH AND TRANSFER TO STORAGE ON 2ND CCW      L5 @ZA03556 15898003
         MVI   IOBERCCW+L4,CDSLI       DATA CHAING AND      L5 @ZA03556 15898103
*                                      SUPP LEN IN FST CCW  L5 @ZA03556 15898203
         MVI   IOBERCCW+L15,L255  MAKE 2ND CCW LENGTH          @ZA03556 15898403
*                                  FIELD EQU FF                @ZA03556 15898803
         B     BSCUE02G                GET RESTART ADDR     L5 @ZA03556 15899203
BSCUE02F STC   ERREG5,IOBERCCW+L8   STORE COMMAND IN 2ND CCW            15900002
         ST    ERREG2,IOBERCCW+L12   PUT COUNT IN CCW                   15950002
BSCUE02G EQU   *                                            L5 @ZA03556 15960003
         LA    CCWREG,IOBERCCW     ADDR OF NEW CHAN PROG                16000002
         B     BSCUETA7            RETRY ERROR                          16100002
BSCUE02  CLI   IOBWORK,TPOPWENQ    THIS WRITE ENQ                       16150002
         BE    BSCUE02C            YES GENERATE RD ENQ                  16200002
         CLI   IOBWORK,TPOPWREN    WRITE RESP TO ENQ                    16250002
         BE    BSCUET2D            YES SET UP READ ENQ         @ZA13180 16300000
         CLI   IOBWORK,TPOPWRTT    WRITE WACK OR            LD @ZA00519*16310000
                                   WRITE RESP TO TEXT       LD @ZA00519 16320000
         BL    BSCUET2D            IOBWORK = WRITE WACK     LD @ZA00519 16330000
         BE    BSCUERC8            IOBWORK = WRITE          LD @ZA00519*16340000
                                   RESP TO TEXT             LD @ZA00519 16342000
         CLI   IOBWORK,TPOPDTXT    ERROR DURING TEXT                    16350002
         BNE   BSCUE002            NO CHECK FURTHER                     16400002
BSCUERC8 EQU   *                                                        16450002
         MVI   IOBWORK+L1,RTRNCDE8   INDICATE INTERNAL ROUTINE          16500002
         B     BSCUET2A            CONTINUE GENERATION                  16550002
*        SIXTEEN LINES OG CODE DELETED BY APAR ------------->  @ZA13180 16560000
BSCUET2D EQU   *                                                        16633303
         MVI   IOBWORK+L1,RTRNCDE0   INDICATE INTERNAL ROUTINE          16650002
BSCUET2A LA    ERREG5,CCWNOP       SET 2ND COMMAND FOR NO-OP            16700002
         LA    ERRLNK,IOBWORK+L2   DATA ADDRESS                         16750000
         LA    ERREG2,CCWREAD      SET IS COMMAND FOR READ              16800002
         B     BSCUET05            COMPLETE CHAN PROG                   16850002
BSCUETRY OI    DECFLAGS,IMPRESP    IMPROPER RESPONSE                    16900002
         SH    CCWREG,ERRCN8       BACK UP ONE CCW                      16950002
         B     BSCUETA7            RETRY                                17000002
BSCUE02C CLC   DECRESPN(L1),DCBBSNAK   NAK RECEIVED                     17050002
         BE    BSCUETRY            YES, BRANCH TO IMPROPER              17100002
         CLC   DECRESPN(L2),DCBBSRVI   RVI RECEIVED                     17150002
         BE    BSCUETRY            YES, BRANCH TO IMPROPER              17200002
         SH    CCWREG,ERRCN8       BACK UP ONE CCW                      17250002
         CLI   L5(CCWREG),TPOPRDID   IS PREV CCW READ ID                17300002
         LA    CCWREG,L8(CCWREG)   RESET CCW REG                        17350002
         BE    BSCUET2D            BRANCH IF READ ID PREV               17400002
         MVI   IOBWORK+L1,RTRNCDE4   SET SPECIAL RETURN CODE            17450002
         B     BSCUET2A            GENERATE CHAN PROG                   17500002
BSCUE03  EQU   *                                                        17505000
         TM    DCBBFTEK,DYNBUF     DYNAMIC BUFFERING ?         @Z29189  17510000
         BNO   BSCUE031            NO, BRANCH                  @Z29189  17515000
         OI    DECERRST,DECSNO     SET SHOULD NOT OCCUR        @Z29189  17520000
         NI    IOSFLA,L255-IOSERR  INDICATE PERM ERROR         @Z29189  17525000
         NI    IOBFLAG1,L255-IOBERRTN   ALSO IN IOB            @Z29189  17530000
         B     BSCUET0A            POST PERM ERROR             @Z29189  17535000
BSCUE031 EQU   *                                               @Z29189  17540000
         LH    ERREG2,L6(CCWREG)   PICK UP ORIG CT             @Z29189  17550000
         BCTR  ERREG2,ZERO         SUBTRACT ONE                         17600002
         CH    ERREG2,IOBCSW+L5    THIS COUNT=RESIDUAL COUNT            17650002
         BE    BSCUE03B            YES CHECK FOR ENQ                    17700002
         L     ERREG1,IOBERINF                                          17750002
         CLC   ZERO(L2,ERREG1),DCBBSONL   SOH % MESSAGE RECEIVED?       17800002
         BE    BSCUET0A            YES, GO TO ERROR POST                17850002
         SH    ERREG2,IOBCSW+L5    FIND DIFFERENCE                      17900002
         A     ERREG2,ZERO(CCWREG)   LAST CHAR ADDRESS         @ZA04185 17950003
         CLC   ZERO(L1,ERREG2),DCBBSENQ   THIS ENQ CHARACTER            18000002
         BE    BSCUE03I             INDICATE ENQ               @ZA04185 18001003
         CLC   ZERO(L1,ERREG2),DCBBSEOT IS LAST CHAR AN EOT    @ZA04185 18002003
         BNE   BSCUE00A            NO SET SNO                  @ZA04185 18003003
*              THE FOLLOWING TEST WILL DETERMINE IF GARBLED    @ZA04185 18004003
*              SYN CHARACTORS PRECEEDED THE EOT                @ZA04185 18005003
         TM    L17(UCBREG),X40      MULTI-POINT BSC3 LINE      @ZA04185 18006003
         BNO   BSCUE00A            SET SNO                     @ZA04185 18007003
         LA    ERRLNK,DECAREA      INPUT AREA ADDR             @ZA04185 18008003
         CLI   IOBCPA,CCWAPOLL     MULTI-POINT RD INIT         @ZA04185 18009003
         BNE   BSCUE03A              NO                        @ZA04185 18010003
         LA    ERRLNK,L1(ERRLNK)   SKIP OVER INDEX BYTE        @ZA04185 18011003
BSCUE03A CLC   ZERO(L1,ERRLNK),DCBBSSTX  FIRST BYTE STX        @ZA04185 18012003
         BE    BSCUE00A             YES, POST SNO              @ZA04185 18013003
         CLC   ZERO(L1,ERRLNK),DCBBSONL  FIRST BYTE SOH        @ZA04185 18014003
         BE    BSCUE00A             YES, POST SNO              @ZA04185 18015003
         CLC   ZERO(L1,ERRLNK),DCBBSRSV  FIRST BYTE DLE...     @ZA04185 18016003
*                             INDICATING TRANSPARENT MODE      @ZA04185 18017003
         BE    BSCUE00A             YES, POST SNO              @ZA04185 18018003
         CLI   IOBCPA,CCWAPOLL     MULTI-POINT RD TI           @ZA04185 18019003
         BE    BSCUE03D                                        @ZA04185 18020003
         MVI   IOBWORK+L1,RTRNCDED  INDICATE INTERNAL ROUTINE  @ZA04185 18021003
         B     BSCUE03G        WRITE NAK, TIC TO RD TXT        @ZA04185 18022003
BSCUE03D MVI   IOBWORK+L1,RTRNCDE2                             @ZA04185 18023003
         L     ERRLNK,ZERO(CCWREG)   FIND RD TXT               @ZA04185 18024003
         BCTR  ERRLNK,ZERO         DECREMENT BY ONE            @ZA04185 18025003
         STCM  ERRLNK,L7,L1(CCWREG) UPDATE INPUT AREA ADDR     @ZA04185 18026003
         LH    ERRLNK,L6(CCWREG)    ORGINAL LENGTH             @ZA04185 18027003
         LA    ERRLNK,L1(ERRLNK) ADJUST INPUT AREA ADDR BY ONE @ZA04185 18028003
         STH   ERRLNK,L6(CCWREG)    UPDATE LENGTH              @ZA04185 18029003
         B     BSCUE03G                                        @ZA04185 18030003
BSCUE03I EQU   *                                               @ZA04185 18031003
         OI    DECFLAGS,STXENQ     MSG ENDING IN ENQ RCVD   LD @ZA02314 18060003
         BCTR  ERREG2,ZERO         BACK UP ONE CHARACTER                18100002
         CLC   ZERO(L1,ERREG2),DCBBSSTX   IS THIS CHARACTER STX         18150002
         BNE   BSCUE03C            NO, NOT ABORT SEQUENCE               18200002
*        ONE LINE OF CODE DELETED BY APAR ------------->       @ZA13180 18300000
         MVI   IOBWORK+L1,RTRNCDE9   SET SPECIAL RETURN CODE            18350002
BSCUE03C EQU   *                                                        18400002
         TM    DCBBFTEK,DYNBUF     DYNAMIC BUFFERING                    18450002
         BO    BSCUET0A            YES POST WITH ERROR                  18500002
         CLI   IOBCPA,CCWAPOLL         MULTIPOINT RD INIT?  L5 @ZA02846 18510003
         BNE   BSCUE03G                NO,WRITE NAK         L5 @ZA02846 18520003
         L     ERREG2,0(CCWREG)        RD TXT DATA ADDR     L5 @ZA02846 18530003
         SH    CCWREG,ERRCN8           BACK UP 1 CCW        L5 @ZA02846 18540003
         C     ERREG2,0(CCWREG)        ADDR  MODIFIED?      L5 @ZA02846 18542003
         BNE   BSCUE03H                NO                   L5 @ZA02846 18546003
         LA    CCWREG,8(CCWREG)        RESTART NEXT CCW     L5 @ZA02846 18548003
         B     BSCUE03G                                     L5 @ZA02846 18548403
BSCUE03H BCTR  ERREG2,0                BACK UP 1 CHAR       L5 @ZA02846 18548803
         B     BSCUE03J                SET UP NEW RD ADDR   L5 @ZA02846 18549203
BSCUE03G EQU   *                                            L5 @ZA02846 18549603
         LA    ERRLNK,DCBBSNAK     SET ADDR TO NAK                      18550002
         B     BSCUET02            GO COMPLETE CHAN PROG                18600002
BSCUE03B L     ERREG2,ZERO(CCWREG)   ENQ POINTER                        18650002
         CLC   ZERO(L1,ERREG2),DCBBSENQ   ENQ RECEIVED                  18700002
         BE    BSCUE03E            YES,CONTINUE                         18750002
         CLC   ZERO(L1,ERREG2),DCBBSEOT   EOT RECEIVED?                 18800002
         BNE   BSCUE00A            NO ,POST WITH ERROR         @ZA13207 18850000
*        TWO LINES OF CODE DELETED BY APAR ---------------->   @ZA13207 18860000
         L     ERREG2,DECAREA      GET BUFFER ADDRESS          @Z29193  18868000
         CLC   0(1,ERREG2),DCBBSDLE IS FIRST CHAR DLE          @Z29193  18876000
         BE    BSCUE00A            YES, POST WITH ERROR        @Z29193  18884000
         L     ERREG2,ZERO(CCWREG) LOAD DATA ADDRESS           @Z29193  18892000
         MVC   IOBERCCW+L17(L7),IOBCSW  SAVE NEW CSW                    18900002
         TM    DECFLAGS,STXENQ     ABORT SITUATION?                     18950002
         BNO   BSCUE03F                                                 19000002
         MVI   IOBECBCC,ERRCODE    SET 41 COMPLETION                    19050002
BSCUE03F EQU   *                                                        19100002
         CLI   IOBCPA,CCWAPOLL     MULTIPOINT READ INITIAL?             19150002
         BNE   BSCCT004            POST NORMAL                  YA02454 19200002
         SH    CCWREG,ERRCN8       BACK UP TO READ INDEX CCW            19250002
         C     ERREG2,ZERO(CCWREG)   HAS ADDRESS BEEN MODIFIED?         19300002
         BNE   BSCUE00A            NO, SET SHOULD NOT OCCUR             19350002
         LH    ERREG2,IOBERCCW+L22   GET RESIDUAL COUNT                 19400002
         BCTR  ERREG2,ZERO         SUBTRACT FOR INDEX BYTE              19450002
         STH   ERREG2,IOBERCCW+L22   STORE CORRECTED COUNT              19500002
         B     BSCUET0A                                                 19600002
BSCUE03E EQU   *                                                        19650002
         TM    DCBBFTEK,DYNBUF     DYNAMIC BUFFERING                    19700002
         BO    BSCUET0A            YES POST WITH ERROR                  19750002
         SH    CCWREG,ERRCN8       BACK UP TO NEXT CCW                  19800002
         CLI   L5(CCWREG),TPOPWRTX   THIS WRT RESP TO TEXT              19850002
         BNE   BSCUE03N             NO, CHECK CONV. WRITE      @ZA17702 19900000
         MVI   IOBWORK+L1,RTRNCDE1     SET RETURN CODE 81      @ZA17702 19910000
         MVI   IOBERRCT+L1,RTRNSPCD    SET SPECIAL RETURN CODE @ZA17702 19920000
         MVI   IOBWORK+L3,CON9A        SET INDICATOR           @ZA17702 19930000
         BE    BSCUETA7                                        @ZA17702 19940000
BSCUE03N CLI   L5(CCWREG),TPOPRRTX   THIS A CONV WRITE         @ZA17702 19950000
         BE    BSCUE03C            GEN WRT NAK CHAN PROGRAM             20000002
         CLI   IOBCPA,CCWAPOLL     POLLING SEQUENCE                     20050002
         BNE   BSCUE00A            NO, SET SNO                          20100002
         L     ERRLNK,DECAREA      GET I/O AREA ADDR           @ZA03974 20103003
         LA    ERRLNK,L1(ERRLNK)   PT TO INPUT AREA + ONE      @ZA03974 20106003
         LA    ERREG2,ZERO(ERREG2) CLEAR HI BYTE-THIS REG      @ZA03974 20109003
*                   CONTAINS CURRENT INPUT AREA ADDR FROM CCW  @ZA03974 20112003
         CR    ERRLNK,ERREG2       HAS READ TXT CCW BEEN       @ZA03974 20115003
*                              ALTERED (READ TI POLLING)       @ZA03974 20118003
         BNE   BSCUE03K            NO, CONTINUE NORMALLY       @ZA03974 20121003
         MVI   IOBWORK+L1,RTRNCDE2  SET INTERNAL CODE          @ZA03974 20124003
         MVI   IOBERCCW+L16,TIMEOUT  SET T.O. SENSE            @ZA03974 20127003
         NI    IOBERCCW+L20,XFE     TURN OFF UNIT EXCEPTION    @ZA03974 20130003
         OI    IOBERCCW+L20,UNITCHK SET U.C. STATUS            @ZA03974 20133003
         LA    CCWREG,L8(CCWREG)     POINT TO FAILING CCW      @ZA03974 20136003
         B     BSCUE03G              GO BUILD RETRY CHAN PGM   @ZA03974 20139003
BSCUE03K EQU   *                                                        20142003
         BCTR  ERREG2,ZERO         ADDRESS OF BEGINNING TEXT            20150002
         CLC   ZERO(L1,ERREG2),DCBBSSTX   STX PRECEDING ENQ ?           20200002
         BNE   BSCUE00A            NO, SET SNO                          20250002
         OI    DECFLAGS,STXENQ         INDICATE ENQ RECVD   L5 @ZA02846 20260003
         MVI   IOBWORK+1,RTRNCDE9      SET SPEC RETURN      L5 @ZA02846 20270003
BSCUE03J EQU   *                                            L5 @ZA02846 20280003
         STCM  ERREG2,L7,L9(CCWREG) SET UP NEW READ IN AREA    @ZA07674 20300003
         STCM  ERREG2,L7,L1(CCWREG) MODIFY AREA ADDRESS        @ZA07674 20350003
         LA    CCWREG,L8(CCWREG)   BACK TO PROPER CCW                   20400002
         LH    ERREG2,L6(CCWREG)   INCRIMENT                            20450002
         LA    ERREG2,L1(ERREG2)   COUNT                                20500002
         STH   ERREG2,L6(CCWREG)   FOR READ                             20550002
         B     BSCUE03G         SET SP RTN - GEN CHAN PROG  L5 @ZA02846 20650003
BSCUE002 CLI   IOBWORK,TPOPRSET    THIS A RESET OPERATION               20700002
         BNE   BSCUE00A            NO SET SNO ERROR                     20750002
         CLI   L13(CCWREG),X8B     WRITE RESET CHAN PROGRAM             20800002
         BNE   BSCUE0X2            NO, CONTINUE                         20900002
         LA    CCWREG,L8(CCWREG)   YES, RESTART AT NEXT CCW             20950002
         B     BSCUETA7                                                 21000002
BSCUE0X2 MVI   IOBWORK+L1,RTRNCDE7   INDICATE INTERNAL ROUTINE          21050002
         B     BSCUET2A            GENERATE CHAN PROGRAM                21100002
         EJECT                                                          21150002
**********                                                              21200002
*                                                                       21250002
*        CONSTANTS                                                      21300002
*                                                                       21350002
**********                                                              21400002
TRANSRTN DC    F'9042'             NAME OF BTAM TRANSLATE ROUTINE       21450002
FOURTY   DC    AL4(40)                                      L5 @ZA02847 21460003
DLEOTCCW DC    X'0100000060210002'                                      21500002
DISABCCW DC    X'2F00000020010001'    DISABLE CCW                       21550002
ERRCN8   DC    H'8'                                                     21600002
SIXTEEN  DC    H'16'                                        LD @ZA02316 21610003
PACHAREA DC    26C'0000'           PATCH AREA FOR MAINTENANCE           21650000
**********                                                              21700002
*                                                                       21750002
*        MISCELLANEOUS EQUATES                                          21800002
*                                                                       21850002
**********                                                              21900002
TPOPRRTX EQU   X'25'                                                    22000002
DECSNO   EQU   X'40'                                                    22050002
XFE      EQU   X'FE'                                           @ZA03974 22070003
L255     EQU   X'FF'               AND MASK                             22100002
BSCLOD2  EQU   2043                BSC ERROR POST IDENT                 22200002
ERRCN2   EQU   8                                                        22250002
FIRSTBIT EQU   X'7F'               AND MASK FOR X'80'                   22300002
NORMCOND EQU   X'0D'               CE,DE,UE FLAGS ON                    22350002
ZERO     EQU   X'00'               LENGTH AND DISPLACEMENT              22400002
L1       EQU   1                   LENGTH AND DISPLACEMENT              22450002
L2       EQU   2                   LENGTH AND DISPLACEMENT              22500002
L3       EQU   3                   LENGTH AND DISPLACEMENT              22550002
L4       EQU   4                   LENGTH AND DISPLACEMENT              22600002
L5       EQU   5                   LENGTH AND DISPLACEMENT              22650002
L6       EQU   6                   LENGTH AND DISPLACEMENT              22700002
L7       EQU   7                   LENGTH AND DISPLACEMENT              22750002
L8       EQU   8                   LENGTH AND DISPLACEMENT              22800002
L9       EQU   9                   LENGTH AND DISPLACEMENT              22850002
L12      EQU   12                  LENGTH AND DISPLACEMENT              22900002
L13      EQU   13                  LENGTH AND DISPLACEMENT              22950002
L14      EQU   14                  LENGTH AND DISPLACEMENT              23000002
L15      EQU   15                  LENGTH AND DISPLACEMENT  L5 @ZA03556 23010003
L16      EQU   16                  LENGTH AND DISPLACEMENT              23050002
L17      EQU   17                  LENGTH AND DISPLACEMENT              23100002
L20      EQU   20                                              @ZA03974 23120003
L22      EQU   22                  LENGTH AND DISPLACEMENT              23150002
X40      EQU   X'40'                                           @ZA04185 23170003
X70      EQU   X'70'                                                    23200002
X8B      EQU   X'8B'                                                    23250002
XBF      EQU   X'BF'               DECB FLAGS AND MASK                  23300002
WLR      EQU   X'40'               SLI FLAG                             23350002
TIMEOUT  EQU   X'01'          TIME OUT SENSE BYTE              @ZA03974 23360003
UNITCHK  EQU   X'02'          UNIT CHECK STATUS                @ZA03974 23370003
TPOPWENQ EQU   X'03'                                                    23400002
TPOPDTXT EQU   X'11'                                                    23450002
CCWNOP   EQU   3                                                        23500002
TPOPWRTX EQU   X'08'                                                    23550002
TPOPCODE EQU   5                                                        23600002
WRITTQ   EQU   X'16'                                                    23650002
WTTVX    EQU   X'1F'                                           @ZA13172 23670000
SLVCONT  EQU   X'10'                                                    23700002
CCWWRITE EQU   1                                                        23750002
CCWAPOLL EQU   X'09'                                                    23800002
TPOPWRTT EQU   X'02'               TP-OP WRITE RESP TO TEXT LD @ZA00519 23810000
TPOPWREN EQU   X'08'                                                    23850002
CCWREAD  EQU   2                                                        23900002
TPOPRENQ EQU   X'0B'                                                    23950002
TPOPRREN EQU   X'0C'                                                    24000002
TPOPRTXT EQU   X'11'                                                    24050002
STXENQ   EQU   X'01'                                                    24100002
IMPRESP  EQU   X'40'                                                    24150002
CONNECT  EQU   X'DD'                                                    24200002
TPOPRRID EQU   X'07'                                                    24250002
WRTCON   EQU   X'1C'                                                    24300002
RDCON    EQU   X'11'                                                    24350002
RCONTONE EQU   X'1E'                                                    24400002
INVALID  EQU   X'10'                                                    24450002
ERRCODE  EQU   X'41'                                                    24500002
ERRMAXCT EQU   X'07'                                                    24550002
RTRNCDE1 EQU   X'81'          RETURN CODES                     @ZA17702 24560000
RTRNCDE2 EQU   X'82'                                           @ZA03974 24570003
RTRNCDE4 EQU   X'84'                                                    24600002
RTRNCDE6 EQU   X'86'                                                    24650002
RTRNCDE0 EQU   X'80'                                                    24700002
RTRNCDE7 EQU   X'87'                                                    24750002
RTRNCDE8 EQU   X'88'                                                    24800002
RTRNCDE9 EQU   X'89'                                                    24850002
RTRNCDED EQU   X'8D'                                           @ZA04185 24870003
TPOPRSET EQU   X'21'                                                    24900002
TPOPRDID EQU   X'07'                                                    24950002
RTRNSPCD EQU   X'14'                                                    25000002
CHAINCDE EQU   X'60'                                                    25050002
CCWTIC   EQU   X'08'                                                    25100002
RVIRCV   EQU   X'42'               RVI RECEIVED ; DEFLAG SETTING        25150002
DYNBUF   EQU   X'08'                                                    25250002
X08      EQU   X'08'                                                    25260002
SIX      EQU   6       RD SKIP CCW LEN FIELD                L5 @ZA03556 25262003
CDSLI    EQU   X'A0'   DATA CHAINING AND SUPRESS            L5 @ZA03556 25264003
*                      INCORRECT LENGTH                                 25266003
SLISKIP  EQU   X'30'   SUPPRESS INCORRECT LENGTH AND        L5 @ZA03556 25268003
*                      TRANSFER TO STORAGE                              25268403
RLN0A    EQU   X'0A'                   RELATIVE LINE TEN    L5 @ZA02847 25270003
MULTIPNT EQU   X'40'                                           @ZA11416 25280003
CONTETON EQU   X'10'       CONTENTION CHECK                    @ZA13206 25286000
DCBMASTR EQU   X'80'        REMOTE STATION                     @ZA13206 25292000
CON9A    EQU   X'9A'        SPECIAL CODE                       @ZA17702 25296000
**********                                                              25300002
*                                                                       25350002
*        REGISTER DEFINITION                                            25400002
*                                                                       25450002
**********                                                              25500002
ERREG3   EQU   0                   WORK REG                             25550002
IOSBREG  EQU   1                   IOSB BASE/PARAMETER REG              25600002
ERREG2   EQU   2                   WORK REG                             25650002
EWAREG   EQU   3                   ERP WORKAREA BASE                    25700002
CCWREG   EQU   4                   CCW ADDRESS REG                      25750002
DECBRG   EQU   5                   DECB BASE                            25800002
DCBREG   EQU   6                   DCB BASE                             25850002
UCBREG   EQU   7                   UCB BASE                             25900002
BASEREG  EQU   8                   PROGRAM BASE                         25950002
ERREG1   EQU   9                   WORK REG                             26000002
IOBRG    EQU   10                  IOB BASE                             26050002
ERREG4   EQU   11                  WORK REG                             26100002
ERRLNK   EQU   12                  LINK REG                             26150002
NAMEREG  EQU   13                  LINK REG                             26200002
ERRETR   EQU   14                  LINK REG                             26250002
ERREG5   EQU   15                  LINK REG/WORK REG                    26300002
         EJECT                                                          26350002
         IECTDECB                                                       26400002
         EJECT                                                          26450002
         DCBD  DSORG=BX,DEVD=BS              DCB DESECT MACRO           26500002
         EJECT                                                          26550002
         IECDRQE                                                        26600002
         EJECT                                                          26650002
         IEZIOB                                                         26700002
         EJECT                                                          26750002
CVT      DSECT                                                          26800002
         CVT                                                            26850002
         EJECT                                                          26900002
         IECDERWA                                                       26950002
**********                                                              27000002
*                                                                       27050002
*        THE FOLLOWING DEFINITIONS ARE LOCAL FOR BTAM ERPS ONLY.        27100002
*                                                                       27150002
**********                                                              27200002
         ORG   EWAIERP                                                  27250002
EWAITRAN DS    F                   ADDRESS OF IECVTCCW         YM02594K 27300002
EWAITCCW DS    F                   PARALLEL TCCW               YM02594K 27350002
EWAIOVST DS    F                   ORIGINAL IOSVST CONTENTS    YM02594K 27400002
EWAIND0  DS    B                   FLAG BYTE                            27450002
EWAIVISR EQU   X'10'               V=R REQUEST                          28050002
EWAIPMAP EQU   X'08'               PARALLEL MAPPING DONE       YM02594K 28100002
EWAIGPRO EQU   X'04'               GETMAIN IN PROCESS          YM02594K 28150002
EWAIFPRO EQU   X'02'               FREEMAIN IN PROCESS         YM02594K 28200002
EWAIND1  DS    B                   FLAG BYTE                            28250002
EWAILD00 EQU   X'80'               EXIT TO 004C                YM02594K 28300002
EWAILD15 EQU   X'40'               EXIT TO LOAD 15             YM02594K 28350002
EWAIWTOL EQU   X'20'               EXIT TO IOS WTO             YM02594K 28400002
EWAISTAT EQU   X'10'               EXIT TO STAT UPDATE         YM05652K 28410002
EWAISVCF EQU   X'08'               SVC 15/SVC 3                YM05652K 28420002
EWAIND2  DS    B                   FLAG BYTE                            28450002
EWAIND3  DS    B                   FLAG BYTE                            28500002
EWAIAREA DS    20F                 SAVE AREA FOR MA OR AREA FOR WTO     28550002
EWAISAVE DS    2F                  TEMPORARY SAVE AREA                  28600002
EWAIEXIT DS    4F                  ESATE PARAMETER LIST                 28650002
*********  END OF BTAM LOCAL DEFINITIONS **********                     28700002
         EJECT                                                          29350002
         IECDIOSB                                                       29400002
         END                                                            29450002
