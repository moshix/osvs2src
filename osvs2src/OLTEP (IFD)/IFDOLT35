FD35    TITLE '***  IFDOLT35 - OLTEP AR-145 EXIO. BASE MODULE  ***'     00100002
IFDOLT35 START                                                          00200002
*A000000,999999                                                 @Y02008 00300002
*D-392000             VS 2-2 PTM YM08623                       @YM08623 00350002
         SPACE 3                                                        00400002
*********************************************************************** 00500002
*                                                                     * 00600002
*MODULE NAME: IFDOLT35                                                * 00700002
*                                                                     * 00800002
*DESCRIPTIVE NAME: OLTEP AR-145 EXIO                                  * 00900002
*                                                                     * 01000002
*COPYRIGHT: NONE                                                      * 01100002
*                                                                     * 01200002
*STATUS: RECODED IN BAL FOR OS-VS/2 RELEASE 2 VERSION 0               * 01300002
*                                                                     * 01400002
*FUNCTION: THIS MODULE RECIEVES CONTROL FROM AN AR-145 LEVEL OLT VIA  * 01500002
*   THE OLTEP TRANSIENT MANAGER. UPON ENTRY REGISTER ONE CONTAINS THE * 01600002
*   ADDRESS OF A PARAMETER LIST FROM THE OLT. THIS PARAMETER LIST     * 01700002
*   CONTAINS POINTERS TO THE DEVICE, THE TECB, THE CCW'S; A COUNT OF  * 01800002
*   THE CCW'S; A FLAG BYTE; AND A MACRO CALL LEVEL NUMBER.            * 01900002
*      FIRST THE VALIDITY OF THE REQUEST IS CHECKED.                  * 02000002
*         1.ALL NECESSARY PARAMETERS PASSED AND VALID.                * 02100002
*         2.IS DEVICE IN DEVTAB, EITHER PRIMARY OR SECONDARY, AND NOT * 02200002
*          ACTIVE.                                                    * 02300002
*      NEXT A CHECK IS MADE FOR A REMOTE DEVICE WHICH REQUIRES LINE   * 02400002
*     CONNECTION. IF SO, IFDOLT73 IS GIVEN CONTROL TO PERFORM THIS    * 02500002
*     OPERATION. IF IFDOLT73 IS SUCCESSFUL OR NOT REQUIRED THE I/O    * 02600002
*     EFFECTOR CONTROL BLOCK, EFCTRCB, IS FILLED WITH THE APPROPRIATE * 02700002
*     INFORMATION. IF THE DEVICE IS A DIRECT ACCESS TYPE THE CCW'S ARE* 02800002
*     SCANNED FOR VIOLATIONS WHEN THE DEVICE IS FILE PROTECTED OR     * 02900002
*     ALLOCATED.                                                      * 03000002
*                                                                     * 03100002
* I/O EFFECTOR: THE I/O EFFECTOR IS A CLOSED SUBROUTINE RESIDING IN   * 03200002
*   THE IFDOLT35 CSECT. IT CAN BE CALLED BY ANY OLTEP MODULE WISHING  * 03300002
*   AN I/O EVENT TO BE STARTED. IT IS PASSED ALL NECESSARY PARAMETERS * 03400002
*   IN THE I/O EFFECTOR CONTROL BLOCK, RESIDING IN THE OLTEP COMMON   * 03500002
*   AREA. THE EFFECTOR BUILDS A BASIC IOSB AND IOS USE CONTROL BLOCK, * 03600002
*   IOSUSECB, IN THE COMMON AREA. IT THEN SETS THE FIRST WORD OF ROPT * 03700002
*   TO POINT TO THE IOSB AND THE SECOND WORD OF ROPT WITH THE ADDRESS * 03800002
*   OF THE DEVTAB ENTRY FOR THIS I/O REQUEST. IT THEN ISSUES OLTEP'S  * 03900002
*   SVC-59, CALL X'5C' TO FIND A IOSCB (SRB/IOSB/IOSUSECB/OECB SET)   * 04000002
*   FOR THE I/O EVENT, MOVE THE IOSB/IOSUSECB PASSED TO THE AVAILABLE * 04100002
*   IOSCB IN SUBPOOL 245, FILL IN THE REMAINING FIELDS IN THE IOSCB,  * 04200002
*   LINK TO THE IOS CCW TRANSLATOR IF THE CCW'S ARE VIRTUAL, AND ISSUE* 04300002
*   THE IOS 'STARTIO' MACRO. SVC-59 THEN RETURNS TO THE I/O EFFECTOR. * 04400002
*                                                                     * 04500002
*NOTES: SEE BELOW                                                     * 04600002
*                                                                     * 04700002
*  DEPENDENCIES: THIS MODULE HAS NO HARDWARE DEPENDENCIES.            * 04800002
*                                                                     * 04900002
*  RESTRICTIONS: NOT COMPATABLE FOR VS/1.                             * 05000002
*                                                                     * 05100002
*  REGISTER CONVENTIONS:                                              * 05200002
*    ENTRY: ALL REGISTERS ARE SAVED UPON ENTRY TO BOTH IFDOLT35 AND   * 05300002
*   THE I/O EFFECTOR.                                                 * 05400002
*      FOR IFDOLT35:                                                  * 05500002
*         REG  1 = POINTER TO OLT'S EXIO PARAMETER LIST.              * 05600002
*         REG  2 = POINTER TO OLTEP COMMON AREA.                      * 05700002
*         REG 12 = BASE REGISTER FOR THIS ENTRY POINT                 * 05800002
*         REG 13 = POINTER TO OLT'S SAVE AREA:                        * 05900002
*         REG 14 = RETURN POINT IN OLT.                               * 06000002
*      FOR I/O EFFECTOR:                                              * 06100002
*         REG  2 = POINTER TO OLTEP COMMON AREA.                      * 06200002
*         REG 13 = POINTER TO CALLERS SAVE AREA.                      * 06300002
*         REG 14 = RETURN POINT IN CALLER.                            * 06400002
*                                                                     * 06500002
*         REG 15 = ENTRY POINT OF I/O EFFECTOR                        * 06600002
*                                                                     * 06700002
*    EXIT:                                                            * 06800002
*      FOR IFDOLT35:                                                  * 06900002
*         REG 15 = 00        STARTIO ISSUED                           * 07000002
*                = 04        MACRO LEVEL NOT 2 OR 3                   * 07100002
*                = 08        DEVICE NOT PRIMARY,GRABBED,OR DATA       * 07200002
*                             PROTECTED.DEVICE ALREADY ACTIVE.DEVICE  * 07300002
*                             NOT IN DEVTAB.NO IOSCB AVAILABLE FOR    * 07400002
*                             USE.(ALREADY TWO OUTSTANDING ACTIVE I/O)* 07500002
*                = 0C        CCW CHAIN VIOLATES DATA PROTECTION MODE. * 07600002
*                = 10        SENSE = NO NOT PROCESSED.                * 07700002
*                = 14        TP LINE CONNECTION FAILED.               * 07800002
*                                                                     * 07900002
*      FOR THE I/O EFFECTOR:                                          * 08000002
*         REG 15 = 00        STARTIO ISSUED.                          * 08100002
*                = 04        NO IOSB AVAILABLE FOR THIS REQUEST.      * 08200002
*                = 08        NOT USED.                                * 08300002
*                = 0C        RETURNED TO INTERNAL CALLERS (TP LINE    * 08400002
*                             CONNECT,DATA PROTECTION) IF CCW'S ARE   * 08500002
*                             VIRTUAL AND IOS CCW TRANSLATOR FAILS.   * 08600002
*                                                                     * 08700002
*    SEE REGISTER EQUATES FOR SYMBOLS OF REGISTERS USED IN THIS       * 08800002
*    MODULE.                                                          * 08900002
*                                                                     * 09000002
*  PATCH-LABEL: PATCH35                                               * 09100002
*                                                                     * 09200002
*MODULE TYPE: PROCEDURE                                               * 09300002
*                                                                     * 09400002
*  PROCESSOR: OS/VS ASSEMBLER                                         * 09500002
*                                                                     * 09600002
*  MODULE SIZE: APPROXIMATELY 2K                                      * 09700002
*                                                                     * 09800002
*  ATTRIBUTES: SERIALLY REUSEABLE                                     * 09900002
*                                                                     * 10000002
*ENTRY POINTS:                                                        * 10100002
*                                                                     * 10200002
*  EXIO (AR-145): IFDOLT35                                            * 10300002
*                                                                     * 10400002
*     PURPOSE: TO PROVIDE OLT'S CODED TO THE AR-145 INTERFACE A METHOD* 10500002
*      OF INITIATING AN I/O OPERATION.                                * 10600002
*                                                                     * 10700002
*     LINKAGE: MACRO CALL TO OLTEP TRANSIENT MANAGER FOR BRANCH AND   * 10800002
*      LINKAGE.                                                       * 10900002
*                                                                     * 11000002
*  I/O EFFECTOR: IOEFFCTR                                             * 11100002
*                                                                     * 11200002
*     PURPOSE: TO ACCEPT A PARAMETER LIST FROM THE CALLER AND INITIATE* 11300002
*      AN I/O EVENT THROUGH THE SVC-59 STARTIO FUNCTION.              * 11400002
*                                                                     * 11500002
*     LINKAGE: BRANCH AND LINK WITH NORMAL LINKAGE CONVENTIONS. THE   * 11600002
*      ADDRESS OF THIS ENTRY POINT EXISTS IN OLTEP'S COMMON AREA      * 11700002
*      AT 'IORTNADR'.                                                 * 11800002
*                                                                     * 11900002
*                                                                     * 12000002
*INPUT:                                                               * 12100002
*                                                                     * 12200002
*  EXIO:                                                              * 12300002
*       A PARAMETER LIST FROM THE OLT POINTED TO BY REGISTER 1 WHICH  * 12400002
*   CONTAINS THE ADDRESSES OF THE DEVICE CDS FOR THIS REQUEST,THE CCW * 12500002
*   CHAIN,THE TECB,AND A BYTE OF FLAGS.                               * 12600002
*  I/O EFFECTOR:                                                      * 12700002
*                                                                     * 12800002
*       A PARAMETER LIST RESIDING IN THE COMMON AREA AT 'EFCTRCB'.    * 12900002
*   THE PARAMETER LIST CONTAINS POINTERS TO THE CCW CHAIN, THE DEVTAB * 13000002
*   ENTRY FOR THIS REQUEST, AND THE TECB. IT ALSO CONTAINS TWO FLAG   * 13100002
*   BYTES FOR THE CALLER TO INDICATE WHAT SPECIAL FUNCTIONS (CE/DE    * 13200002
*   SEPARATION,BYPASS PREFIX,SPECIFIC EXPOSURE) ARE REQUIRED. THE TWO * 13300002
*   REMAINING BYTES ARE FOR THE FILE MASK/MODE SET COMMAND AND THE    * 13400002
*   EXPECTED NUMBER OF SENSE BYTES ON UNIT CHECK.                     * 13500002
*                                                                     * 13600002
*OUTPUT:                                                              * 13700002
*                                                                     * 13800002
*  EXIO:                                                              * 13900002
*       NO SPECIFIC OUTPUT                                            * 14000002
*                                                                     * 14100002
*  I/O EFFECTOR:                                                      * 14200002
*       NO SPECIFIC OUTPUT                                            * 14300002
*                                                                     * 14400002
*EXITS: NORMAL                                                        * 14500002
*                                                                     * 14600002
*  EXIO:                                                              * 14700002
*       RETURN TO THE OLT                                             * 14800002
*                                                                     * 14900002
*  I/O EFFECTOR                                                       * 15000002
*       RETURN TO CALLER ON REGISTER 14 + 0                           * 15100002
*                                                                     * 15200002
*EXITS: ABNORMAL                                                      * 15300002
*                                                                     * 15400002
*  EXIO:                                                              * 15500002
*       N/A                                                           * 15600002
*                                                                     * 15700002
*  I/O EFFECTOR:                                                      * 15800002
*       TO SCHEDULER (IFDOLT48) WITH 'OLTTERM' BIT IN CE SWITCHES ON  * 15900002
*        TO TERMINATE THE OLT IF THE CCW TRANSLATOR FAILS FOR AN OLT  * 16000002
*        CALL.                                                        * 16100002
*                                                                     * 16200002
*EXTERNAL REFERENCES:                                                 * 16300002
*                                                                     * 16400002
*  ROUTINES:                                                          * 16500002
*     EXIO: IFDOLT73                                                  * 16600002
*                                                                     * 16700002
*     I/O EFFECTOR: SVC-59 (STARTIO FUNCTION)                         * 16800002
*                                                                     * 16900002
*  DATA AREAS:                                                        * 17000002
*     EXIO: DEVTAB                                                    * 17100002
*           EFCTRCB                                                   * 17200002
*                                                                     * 17300002
*     I/O EFFECTOR: EFCTRCB                                           * 17400002
*                   DEVTAB                                            * 17500002
*                   ROPT                                              * 17600002
*                                                                     * 17700002
*  CONTROL BLOCKS:                                                    * 17800002
*     EXIO: NONE                                                      * 17900002
*                                                                     * 18000002
*     I/O EFFECTOR: IOSCB                                             * 18100002
*                                                                     * 18200002
*TABLES: NONE                                                         * 18300002
*                                                                     * 18400002
*MACROS: NONE                                                         * 18500002
*                                                                     * 18600002
*CHANGE ACTIVITY:                                                     * 18700002
*                                                                     * 18800002
*                                                                     * 18900002
*                                                                     * 19000002
*                                                                     * 19100002
*                                                                     * 19200002
*********************************************************************** 19300002
         EJECT                                                          19400002
*********************************************************************** 19500002
*              REGISTER EQUATES FOR IFDOLT35 EXIO                     * 19600002
*********************************************************************** 19700002
         SPACE                                                          19800002
PLISTPTR EQU   1                  OLT PARAMETER LIST POINTER            19900002
COMPTREG EQU   2                  COMMON AREA POINTER                   20000002
WORKREG3 EQU   3                  WORK REG #3                           20100002
CDSPTREG EQU   4                  CDS POINTER REGISTER                  20200002
DVTBCNTR EQU   5                  REG TO CONTROL DEVTAB SCAN            20300002
TECBPREG EQU   6                  TECB POINTER REG                      20400002
WORKREG2 EQU   7                  WORKING GPR # 2                       20500002
LSTCCWAD EQU   7                  POINTER TO LAST CCW IN CHAIN FOR SCAN 20600002
LINKREG  EQU   10                 INTERNAL LINKAGE REGISTER             20700002
CCWPTREG EQU   11                 REG USED TO POINT TO CCW LIST         20800002
BASEREG  EQU   12                 BASE REGISTER FOR THIS CSECT          20900002
REG15    EQU   15                 NAME FOR REG 15                       21000002
*********************************************************************** 21100002
*              MISC EQUATES FOR IFDOLT35 EXIO                         * 21200002
*********************************************************************** 21300002
         SPACE                                                          21400002
CCWCOMND EQU   0                  DISPLACEMENT INTO CCW FOR OP-CODE     21500002
SENSELOC EQU   2                  DISPLACEMENT INTO TECB FOR SENSE      21600002
*                                  FIELD SIZE                           21700002
THREE    EQU   3                  NAME FOR NUMERIC 3                    21800002
RETHEX04 EQU   4                  VALUE OF 4 FOR RETURN CODE            21900002
L4       EQU   4                  CCHH LENGTH OF SEEK ADDRESS           22000002
L6       EQU   6                  SEEK ADDRESS LENGTH OF 6              22100002
DEC16    EQU   16                 VALUE OF 16 FOR CONSTANT              22200002
WRT      EQU   X'01'              WRITE BIT                             22300002
RD       EQU   X'02'              READ BIT                              22400002
NOOP     EQU   X'03'              NO-OP OP CODE                         22500002
SENSE    EQU   X'04'              SENSE OP CODE                         22600002
U2305TY1 EQU   X'06'              2305 TYPE 1 UNIT TYPE CODE            22700002
U2305TY2 EQU   X'07'              2305 TYPE 2 UNIT TYPE CODE            22800002
TIC      EQU   X'08'              TIC OP-CODE                           22900002
BITS45   EQU   X'0C'              NAME FOR THESE BITS                   23000002
FRMTWRT  EQU   X'10'              MASK FOR FORMATED WRITE BIT           23100002
RESTORE  EQU   X'17'              RESTORE CCW OP CODE                   23200002
SFM      EQU   X'1F'              SET FILE MASK COMMAND CODE            23300002
MAXSNSCT EQU   X'23'              THE MAX SIZE FOR SENSE INFO           23400002
TAPE     EQU   X'80'              CLASS CODE FOR TAPE DEVICES           23500002
MULTITRK EQU   X'80'              MULTI TRACK BIT IN CCW COMMAND        23600002
         EJECT                                                          23700002
*********************************************************************** 23800002
*                   ESTABLISH ADDRESSABILITY AND PERFORM STANDARD     * 23900002
*                   LINKAGE                                           * 24000002
*********************************************************************** 24100002
         SPACE                                                          24200002
         SAVE  (14,12),,IFDOLT35&SYSDATE    SAVE CALLER'S REGS          24300002
         LR    BASEREG,ENTRYREG   SET UP BASE REG                       24400002
         USING IFDOLT35,BASEREG   ESTABLISH ADDRESSABILITY FOR CSECT    24500002
         ST    SAVEREG,SAVEARE1+4 SAVE CALLERS SAVE AREA ADDRESS IN ME  24600002
         LA    REG15,SAVEARE1     GET MY SAVE AREA ADDRESS              24700002
         ST    REG15,8(SAVEREG)   PUT IT INTO CALLER'S SAVEAREA         24800002
         LR    SAVEREG,REG15      PUT MY SAVE AREA ADDRESS INTO SAVEREG 24900002
         USING EXIOPLST,PLISTPTR  ESTABLISH OLT PARM LIST,DEVTAB,AND    25000002
         USING TECB,TECBPREG       TECB ADDRESSABILITY                  25100002
         USING DEVTABMP,DVTABPTR                                        25200002
         USING CHASCT,2                                                 25300002
         USING DEVTABMP,DVTABPTR  SET ADDRESSABILITY TO DEVTAB          25400002
         MVI   IFD35SW1,X'00'     ZERO THIS MODULE'S SWITCH BYTE        25500002
*********************************************************************** 25600002
*                   CHECK VALIDITY OF MACRO CALL                      * 25700002
*********************************************************************** 25800002
         SPACE                                                          25900002
         CLI   OEXIOLVL,THREE     IS EXIO LEVEL 3                       26000002
         BNH   IFD35000           IF 3 OR LESS GO PROCESS               26100002
         LA    RETCODER,RETHEX04  IF MORE THAN 3 GIVE RETURN OF 4       26200002
         B     IFD35200           GO RESTORE REGS AND RETURN            26300002
IFD35000 EQU   *                                                        26400002
         ICM   CDSPTREG,B'1111',OCDSADR     GET CDS ADDRESS FROM OLT'S  26500002
*                                 PARAMETER LIST AND SEE IF IT'S ZEROES 26600002
         BNZ   IFD35010           GO SET-UP AND SEARCH DEVICE TABLE     26700002
*                                  USING PASSED CDS ADDRESS.            26800002
         L     DVTABPTR,PRIDVPTR  HERE BECAUSE OLT DEFAULTS TO PRIMARY  26900002
*                                  DEVICE                               27000002
         B     IFD35060           GO PROCESS ON                         27100002
IFD35010 EQU   *                                                        27200002
         L     DVTABPTR,DEVTBPTR  GET ADDRESS OF 1ST DEVTAB ENTRY       27300002
         USING CDSMAP,CDSPTREG    SET ADDRESSABILITY TO CDS             27400002
         LA    DVTBCNTR,DEC16     SET DEVICE ENTRY COUNTER TO 16        27500002
IFD35020 EQU   *                                                        27600002
         TM    CDEVFLAG,CSYMBIT   IS THIS CDS A SYMBOLIC NAMED ONE      27700002
         BO    IFD35030           YES-GO COMPARE CDS/DEVTAB SYMBOLIC    27800002
*                                  DEVICE NAMES                         27900002
         CLC   DEVAD,CDEVADDR+2   DO HEX DEVICE ADDRESSES MATCH         28000002
         BE    IFD35060           YES-GOCHECK IF PRIMARY OR SECONDARY   28100002
         B     IFD35040           NO-GO UPDATE POINTER TO NEXT DEVTAB   28200002
IFD35030 EQU   *                                                        28300002
         CLC   DEVSYMAM,CDSYMNAM  DO SYMBOLIC NAMES MATCH               28400002
         BE    IFD35060           YES-GO CHECK IF PRIMARY OR SECONDARY  28500002
IFD35040 EQU   *                                                        28600002
         LA    DVTABPTR,DVTABEND-DEVTABMP(DVTABPTR) POINT TO NEXT ENTRY 28700002
         CLI   DEVEBCAD,X'00'     IS THERE AN ENTRY HERE (NOT HEX 00)   28800002
         BE    IFD35050           NO-IT'S ZEROES-GO GIVE BAD RETURN =8  28900002
         BCT   DVTBCNTR,IFD35020  GO CHECK NEXT ENTRY IF IT EXISTS      29000002
IFD35050 EQU   *                  IF NOT- RETURN TO OLT WITH CODE OF 8  29100002
         B     IFD35170                                                 29200002
         SPACE 2                                                        29300002
IFD35060 EQU   *                                                        29400002
         TM    DEVFLAG1,PRIMARY+GRABED IS THIS DEVICE ASSIGNED AS PRI-  29500002
*                                       MARY OR SECONDARY               29600002
         BZ    IFD35050           NO-NEITHER ONE- GO GIVE ERROR RETURN  29700002
         NI    DEVFLAG2,ALL-HIODONE    TURN OFF HALT I/O DONE BIT       29800002
         ICM   TECBPREG,B'1111',OTECBADR    GET TECB ADDR AND CHECK IF  29900002
*                                 IT'S ZEROES                           30000002
         BZ    IFD35050           YES-IT'S ZEROES- GO GIVE RETURN OF 8  30100002
         TM    CDSFLAG1,CDSLNCON  IS THIS A REMOTE DEVICE               30200002
         BNO   IFD35080           NO-GO CHECK FOR DASD. BYPASS CALL-73  30300002
         ICM   CDSPTREG,B'1111',OCDSADR     GET CDS ADDRESS AND CHECK   30400002
*                                 FOR ZERO                              30500002
         BZ    IFD35070           IF ZERO-GO STRAIGHT TO CALL-73        30600002
         TM    CDEVFLAG,CLCRREQ   IS THIS A LINE CONNECTION REQUEST     30700002
         BNO   IFD35080           NO-BYPASS CALL-73                     30800002
         SPACE                                                          30900002
IFD35070 EQU   *                  CALL-73                               31000002
         ST    CDSPTREG,C73PCDSP  PUT CDS ADDR INTO CALL-73 PARM LIST   31100002
         ST    DVTABPTR,C73PDVTB  PUT DEVTAB ADDR INTO CALL-73 PARMLIST 31200002
         LR    WORKREG1,PLISTPTR  SAVE OLT EXIO PARM LIST PTR           31300002
         SPACE                                                          31400002
         IFDMOD CALL='73',LIST=C73PLIST     CALL IFDOLT73               31500002
         SPACE                                                          31600002
         LR    PLISTPTR,WORKREG1  RESTORE OLT EXIO PARM LIST PTR        31700002
         LTR   RETCODER,RETCODER  DID IFDOLT73 GIVE RETURN CODE = 0     31800002
         BNZ   IFD35200           NO-GO RETURN TO OLT                   31900002
         EJECT                                                          32000002
IFD35080 EQU   *                                                        32100002
         XC    EFCTRCB,EFCTRCB    ZERO I/O EFFECTOR PARM LIST           32200002
         ICM   CCWPTREG,B'1111',OCCWPTR     GET CCW ADDR FROM OLT PLIST 32300002
         BZ    IFD35050           IF ZEROES- GO GIVE BAD RETURN         32400002
         ST    CCWPTREG,CCWPTR    PUT CCW POINTER INTO EFECTR PARM LIST 32500002
         ST    TECBPREG,TECBPTRX  PUT TECB POINTER INTO IOEFFECTOR LIST 32600002
         ST    DVTABPTR,DVTPTR    PUT DEVTAB POINTER INTO IOEFFCTR LIST 32700002
         SR    WORKREG1,WORKREG1  ZERO WORK REG 1                       32800002
         LH    WORKREG1,SENSELOC(TECBPREG)  GET SENSE FIELD SIZE FROM   32900002
*                                  TECB                                 33000002
         LA    WORKREG2,THREE     SET A CONSTANT OF 3                   33100002
         SR    WORKREG1,WORKREG2  SUBTRACT DEVICE ADDRESS FIELD SIZE    33200002
*                                  FROM SENSE FIELD SIZE.               33300002
         LA    WORKREG2,MAXSNSCT  SET MAX SENSE SIZE                    33400002
         CR    WORKREG1,WORKREG2  IS SENSE SIZE > MAX ALLOWED           33500002
         BNH   IFD35090           NO-IT'S OK-GO MOVE IT                 33600002
         LR    WORKREG1,WORKREG2  IT'S > THAN 35- SO SET IT TO 35       33700002
         SPACE                                                          33800002
IFD35090 EQU   *                                                        33900002
         STC   WORKREG1,SNSCNT    SET SENSE COUNT IN EFFECTOR PARM LIST 34000002
         CLI   DEVCLASS,DASD      IS THIS A DIRECT ACCESS DEVICE        34100002
         BNE   IFD35120           NO-GO CHECK FOR TAPE                  34200002
         TM    DEVFLAG1,ALOCATED+FILEPRT    IS DEVICE EITHER ALOCATED   34300002
*                                  OR FILE PROTECTED?                   34400002
         BZ    IFD35100           NEITHER ONE - GO CHECK IF 2305        34500002
         BAL   LINKREG,IFD35400   GO TO SCAN CCW                        34600002
         BNZ   IFD35180           OLT CCW CHAIN IN ERROR-SO GO RETURN   34700002
*                                  WITH RET CODE = 12                   34800002
         SPACE                                                          34900002
*********************************************************************** 35000002
*                                                                     * 35100002
*  THIS ROUTINE SET THE APPROPRIATE BITS FOR THE I/O EFFECTOR TO START* 35200002
*AN I/O OPERATION. THE BITS ARE SET IN THE 'EFCTRCB' RESIDING IN THE  * 35300002
*COMMON AREA. BITS ARE SET AS FOLLOWS:                                * 35400002
*                                                                     * 35500002
*     1.) BYPASS PREFIX                                               * 35600002
*            SET IF DEVICE IS TAPE OR DASD                            * 35700002
*     2.) CE/DE SEPARATION                                            * 35800002
*            SET IF 'ATTN' NOT REQUESTED FOR ALL DEVICES              * 35900002
*     3.) ATTN                                                        * 36000002
*            SET FOR ALL DEVICES IF REQUESTED BY THE OLT TO ALLOW ONE * 36100002
*          MORE INTERRUPT AFTER CE/DE                                 * 36200002
*     4.) SPECIFIC EXPOSURE                                           * 36300002
*            SET FOR ALL I/O REQUESTS TO A 2305 TYPE DASD             * 36400002
*     5.) GDP                                                         * 36500002
*            SET FOR ALL I/O REQUESTS THROUGH THIS MODULE             * 36600002
*                                                                     * 36700002
*********************************************************************** 36800002
         SPACE 2                                                        36900002
IFD35100 EQU   *                                                        37000002
         CLI   DEVUNTYP,U2305TY1  IS THIS DASD A 2305 TYPE 1            37100002
         BE    IFD35110           GO SET SPECIFIC EXPOSURE BIT FOR I/O  37200002
*                                 EFFECTOR                              37300002
         CLI   DEVUNTYP,U2305TY2  IS DEVICE A 2305 TYPE 2               37400002
         BNE   IFD35130           GO SET BYPASS PREFIX BIT              37500002
IFD35110 EQU   *                                                        37600002
         OI    FLGA,SPEXPOS       SET 2305 SPECIFIC EXPOSURE BIT        37700002
         B     IFD35130           GO SET BYPASS PREFIX BIT              37800002
         SPACE                                                          37900002
IFD35120 EQU   *                                                        38000002
         CLI   DEVCLASS,TAPE      IS THIS A TAPE DEVICE                 38100002
         BNE   IFD35140           GO CHECK FOR ATTN REQUEST             38200002
IFD35130 EQU   *                                                        38300002
         OI    FLGA,BYPASPFX      SET TO BYPASS PREFIX                  38400002
IFD35140 EQU   *                                                        38500002
         TM    OEXIOFLG,ATTNREQ   CHECK IF ATTN REQUESTED               38600002
         BNO   IFD35150           GO SET UP FOR CE/DE POSTING           38700002
         OI    IFD35SW1,SCANFNCT  SET SCAN RTN SW FOR NO-OP/SENSE SCAN  38800002
         BAL   LINKREG,IFD35400   GO SCAN FOR NO-OP/SENSE AT LAST CCW   38900002
         BNZ   IFD35170           INVALID CHAIN -GO RETURN WITH RC = 8  39000002
         OI    FLGB,ATTNIN        SET BIT TO ALLOW EXTRA INTERRUPT      39100002
IFD35150 EQU   *                                                        39300002
         OI    FLGA,CEDEPOST      ALLOW FOR CE/DE SEPARATE POSTING      39400002
IFD35160 EQU   *                                                        39500002
         OI    FLGA,GDP           SET FOR GUARENTEED DEVICE PATH        39600002
         TM    DEVFLAG1,ACTIVE    IS THIS DEVTAB ACTIVE                 39610002
         BO    IFD35170           YES-GO GIVE BAD RETURN TO OLT         39620002
         NI    DEVFLAG2,ALL-EXIOLVL3   SET THE EXIO LEVEL=3 BIT OFF     39630002
         CLI   OEXIOLVL,THREE     IS THIS EXIO CALL A LEVEL 3           39640002
         BNE   IFD35165           NO-GO PROCESS FOR NON-LEVEL=3         39650002
         OI    DEVFLAG2,EXIOLVL3  IT'S A LEVEL 3,SO SET EXIO LEVEL=3    39660002
         SPACE 3                                                        39700002
IFD35165 EQU   *                                                        39750002
         NI    TBFLAGS,ALL-TBSIONOG    SET BIT = 0 FOR INDI-            39800002
*                                  CATION TO DPRINT IF WAITIO FINDS SIO 39900002
*                                  DIDN'T GO. THAT IS TECB IS EMPTY     40000002
         L     R15,IORTNADR       GET I/O EFFECTOR ENTRY ADDRESS        40100002
         BALR  R14,R15            GO TO I/O EFFECTOR TO ISSUE STARTIO   40200002
         LTR   RETCODER,RETCODER  IS RETURN CODE = 0                    40300002
         BZ    IFD35190           ALL IS OK - GO RESTORE REGS AND RETRN 40400002
         SPACE                                                          40500002
IFD35170 EQU   *                                                        40600002
         LA    RETCODER,RETHEX8   GIVE RETURN CODE OF 8 TO OLT          40700002
         B     IFD35200                                                 40800002
         SPACE                                                          40900002
IFD35180 EQU   *                                                        41000002
         LA    RETCODER,RETHEXC                                         41100002
         B     IFD35200                                                 41200002
IFD35190 EQU   *                                                        41300002
         TM    OEXIOFLG,SNSEQNO   IS THIS EXIO FOR SENSE = NO AFTER     41400002
*                                  UNIT CHECK                           41500002
         BNO   IFD35200           GO RESTORE CALLERS REGS               41600002
         LA    RETCODER,RETHEX10  SET REG 15 = X'10'                    41700002
IFD35200 EQU   *                                                        41800002
         L     SAVEREG,SAVEARE1+4   GET HIS SAVEAREA POINTER            41900002
         L     REG14,12(SAVEREG)  RESTORE REG UJ                        42000002
         LM    REG0,REG12,20(SAVEREG)  RESTORE REGS 0 - 12              42050002
         BR    REG14              RETURN TO CALLER                      42100002
         EJECT                                                          42200002
*********************************************************************** 42300002
*                   SCAN SUBROUTINE                                   * 42400002
*   THIS ROUTINE PERFORMS TWO FUNCTIONS BASED ON SCAN FUNCTION FLAG   * 42500002
* IN IFD35SW1,SCANFNCT.                                               * 42600002
*        1. IF SCANFNCT = 0 DO:                                       * 42700002
*          SCAN CCW'S POINTED TO BY 'CCWPTREG' TO DETERMINE IF OLT IS * 42800002
*        VIOLATING THE FILE PROTECTED OR ALLOCATED DIRACT ACCESS      * 42900002
*        DEVICE.                                                      * 43000002
*        2. IF SCANFUCT = 1 DO:                                       * 43100002
*          SCAN TO END OF CCW CHAIN POINTED TO BY 'CCWPTREG' TO SEE   * 43200002
*        IF THE OLT TERMINATES THE CCW CHAIN WITH A 'NO-OP' OR 'SENSE'* 43300002
*        COMMAND. THIS IS REQUIRED IF THE OLT WISHES THE 'ATTENTION'  * 43400002
*        FUNCTION INVOKED FOR THIS REQUEST.                           * 43500002
*   THIS ROUTINE SETS THE CONDITION TO ZERO IF THE CCW CHAIN IS OK.   * 43600002
* IT SETS THE CONDITION CODE TO NOT-ZERO IF A VIOLATION IS FOUND.     * 43700002
*                                                                     * 43800002
*********************************************************************** 43900002
         SPACE 3                                                        44000002
IFD35400 EQU   *                                                        44100002
         XC    FILMSKSV,FILMSKSV  ZERO THE FILE MASK SAVE AREA          44200002
         SR    WORKREG1,WORKREG1  ZERO WORK REG # 1                     44300002
         IC    WORKREG1,OCCWCNT   GET CCW COUNT                         44400002
         BCTR  WORKREG1,0         SUBTRACT 1 FROM THE COUNT             44500002
         SLL   WORKREG1,THREE     MULTIPLY CCW COUNT-1 BY 8 TO GET      44530002
*                                  DISPLACEMENT TO LAST CCW             44560002
         LA    LSTCCWAD,0(WORKREG1,CCWPTREG)     POINT TO LAST CCW IN   44600002
*                                  THIS CHNL PROGRAM.                   44700002
         LR    WORKREG1,CCWPTREG  GET COPY OF 1ST CCW ADDRESS           44800002
IFD35410 EQU   *                  SCAN LOOP START                       44900002
         MVC   CCWCOPY1,0(WORKREG1)    GET A COPY OF THIS CCW           45000002
         TM    IFD35SW1,SCANFNCT       IS REQUEST TO SEARCH FOR         45100002
*                                       CHAIN END OF NO-OP/SENSE        45200002
         BO    IFD35430                YES-GO CHECK FOR TIC             45300002
         TM    CCWCOPY1+CCWCOMND,TICFILL    IS THIS A 'TIC' CCW         45400002
         BZ    IFD35430           YES- GO TO TIC CHECKING RTN           45500002
         NI    CCWCOPY1+CCWCOMND,ALL-MULTITRK    ZERO MULTI TRACK BIT   45600002
         CLI   CCWCOPY1+CCWCOMND,SFM   IS COMMAND A SET FILE MASK       45700002
         BNE   IFD35420           NO-GO AROUND FILE MASK SAVE           45800002
         L     WORKREG3,CCWCOPY1  GET FILE MASK ADDRESS FROM SFM CCW    45900002
         LA    WORKREG3,0(WORKREG3)    ZERO HIGH ORDER BYTE             46000002
         MVC   FILMSKSV,0(WORKREG3)    SAVE FILE MASK                   46100002
IFD35420 EQU   *                                                        46200002
         BNL   IFD35440                IF COMMAND > X'1E' WRITE COUNT,  46300002
*                                       KEY,DATA -THEN COMMAND DOESN'T  46400002
*                                       NEED CHECKING-GO CHECK CHAINING 46500002
         TM    CCWCOPY1+CCWCOMND,RD+WRT     IS READ OR WRITE BIT ON     46600002
         BM    IFD35510           YES-ONE IS.SO GO CHECK WHICH          46700002
         BZ    IFD35430           NEITHER ARE-GO LOOK FOR TIC OR SENSE  46800002
         TM    CCWCOPY1+CCWCOMND,BITS45     ARE BITS 4 AND 5 ON OR OFF  46900002
         BNM   IFD35440           EITHER ALL ON OR OFF - GO CHECK NEXT  47000002
         CLI   CCWCOPY1+CCWCOMND,RESTORE    IS IT A RESTORE             47100002
         BE    IFD35440           YES-GO TO NEXT CCW                    47200002
         SPACE 2                                                        47300002
*  HERE BECAUSE CCW IS A SEEK - DO EXTENT CHECKING                      47400002
         SPACE                                                          47500002
         L     WORKREG3,CCWCOPY1  GET SEEK ADDRESS POINTER              47600002
         LA    WORKREG3,0(WORKREG3)    ZERO HIGH ORDER BYTE             47700002
         CLC   0(L6,WORKREG3),DEVLOEXT IS SEEK LOWER THAN LOWEST VALID  47800002
         BL    IFD35530           YES-GO GIVE ERROR RETURN              47900002
         CLC   2(L4,WORKREG3),DEVHIEXT IS SEEK HIGHER THAN HIGHEST VAL  48000002
         BH    IFD35530           YES-GO GIVE ERROR RETURN              48100002
IFD35430 EQU   *                                                        48200002
         NI    CCWCOPY1+CCWCOMND,LOBITS     ZERO TIC MODIFIERS          48300002
         CLI   CCWCOPY1+CCWCOMND,TIC   IS THIS A 'TIC'                  48400002
         BNE   IFD35440           NO-GO CHECK CHAINING FLAGS            48500002
         L     WORKREG3,CCWCOPY1+CCWCOMND   GET TIC TO ADDRESS          48600002
         LA    WORKREG3,0(WORKREG3)    ZERO HI ORDER BYTE               48700002
         CR    WORKREG3,CCWPTREG  IS TIC 'TO' ADDRESS LESS THAN START   48800002
         BL    IFD35530           YES-GO GIVE ERROR RETURN              48900002
         CR    WORKREG3,LSTCCWAD  IS TIC 'TO' ADDRESS MORE THAN END     49000002
         BH    IFD35530           YES-GO GIVE ERROR RETURN              49100002
         LA    WORKREG1,8(WORKREG1)    POINT TO NEXT CCW                49200002
         CR    WORKREG1,LSTCCWAD  DOES SCAN CCW POINDER POINT PAST LAST 49300002
         BNH   IFD35410           NO-GO CHECK THE NEXT CCW              49400002
         B     IFD35470           PAST CHAIN-GO SEE IF OK TO END IN TIC 49500002
         SPACE 2                                                        49600002
*  CHECK CCW CHAINING FLAGS                                             49700002
         SPACE                                                          49800002
IFD35440 EQU   *                                                        49900002
         TM    CCWCOPY1+CCWFLAGS,DATACHAN+CMNDCHAN    ARE ANY CHAINING  50000002
*                                  BITS ON                              50100002
         BZ    IFD35490           NO-GO SEE IF END OF CCW LIST          50200002
         TM    CCWCOPY1+CCWFLAGS,CMNDCHAN   IS IT COMMAND CHAINING      50300002
         BO    IFD35500           YES-GO UPDATE TO NEXT CCW ADDR        50400002
IFD35450 EQU   *                                                        50500002
         LA    WORKREG1,8(WORKREG1)    POINT TO NEXT CCW                50600002
         TM    CCWFLAGS(WORKREG1),DATACHAN  DOES THIS SHOW DATA CHAIN   50700002
         BO    IFD35450           YES-GO UPDATE AND CHECK NEXT          50800002
IFD35460 EQU   *                                                        50900002
         CR    WORKREG1,LSTCCWAD  HAS SCAN POINTER GONE PAST LAST CCW   51000002
         BH    IFD35530           YES-GO GIVE ERROR                     51100002
         BL    IFD35410           IT'S LOW-GO SCAN THIS CCW             51200002
IFD35470 EQU   *                                                        51300002
         TM    IFD35SW1,SCANFNCT  IS ONLY NO-OP/SENSE SCAN WANTED       51400002
         BZ    IFD35480           NO-GO GIVE OK CONDITION               51500002
         CLI   CCWCOPY1+CCWCOMND,NOOP  IS IT A NO-OP                    51600002
         BE    IFD35480           YES-GO GIVE OK CONDITION              51700002
         CLI   CCWCOPY1+CCWCOMND,SENSE IS IT A SENSE                    51800002
         BNE   IFD35530           NO-GO GIVE NON-ZERO RETURN CODE       51900002
IFD35480 EQU   *                                                        52000002
         CR    LSTCCWAD,LSTCCWAD  SET CC = 0                            52100002
         BR    LINKREG            RETURN TO CALLER                      52200002
         SPACE                                                          52300002
IFD35490 EQU   *                                                        52400002
         LA    WORKREG1,8(WORKREG1)    POINT TO NEXT CCW                52500002
         CR    WORKREG1,LSTCCWAD  END OF CHAIN                          52600002
         BNH   IFD35410           NO-GO CHECK THIS CCW                  52700002
         B     IFD35470           YES-GO SEE IF LAST CCW OK             52800002
         SPACE                                                          52900002
IFD35500 EQU   *                                                        53000002
         LA    WORKREG1,8(WORKREG1)    POINT TO NEXT CCW                53100002
         CR    WORKREG1,LSTCCWAD  IS IT PAST LAST CCW                   53200002
         BNH   IFD35410           NO-GO SCAN THIS CCW                   53300002
         B     IFD35530           YES-GO GIVE ERROR RETURN              53400002
         SPACE 3                                                        53500002
*  CHECK FOR READ/WRITE OP CODES                                        53600002
         SPACE                                                          53700002
IFD35510 EQU   *                                                        53800002
         TM    CCWCOPY1+CCWCOMND,RD+MULTITRK ON                         53900002
         BNZ   IFD35440           YES-GO CHECK CHAINING FLAGS           54000002
         TM    DEVFLAG1,FILEPRT   IS DEVICE FILE PROTECTED              54100002
         BO    IFD35520           YES-GO CHECK IF 3340 FOR OK WRITE     54200002
         TM    DEVFLAG1,ALOCATED  IS DEVICE ALLOCATED                   54300002
         BNO   IFD35440           NO-GO CHECK CHAINING FLAGS            54400002
         TM    CCWCOPY1+CCWCOMND,FRMTWRT    IS IT A FORMATED WRITE      54500002
         BNO   IFD35440           NO-GO CHECK CHAINING FLAGS            54600002
         TM    CCWCOPY1+CCWCOMND,BITS45    (REST OF FORMATED WRITE BITS 54700002
         BO    IFD35440           WRITE IS OK-GO CHECK FLAGS            54800002
IFD35520 EQU   *                                                        54900002
IFD35530 EQU   *                                                        55400002
         LTR   LSTCCWAD,LSTCCWAD  SET CC = NOT 0                        55500002
         BR    LINKREG            RETURN TO CALLER                      55600002
         TITLE '***  IFDOLT35 - OLTEP AR-145 EXIO. I/O EFFECTOR  ***'   55700002
         EJECT                                                          55800002
         ENTRY IOEFFCTR           ENTRY POINT TO I/O EFFECTOR           55900002
IOEFFCTR DS    0H                                                       56000002
         SPACE                                                          56100002
*********************************************************************** 56200002
*                                                                     * 56300002
*                I/O EFFECTOR                                         * 56400002
*                                                                     * 56500002
*   THIS ROUTINE IS ENTERED BY A BRANCH AND LINK INTERFACE FROM       * 56600002
*  ANY OLTEP MODULE THAT WISHES A STARTIO ISSUED TO A DEVICE.         * 56700002
*  THE ENTRY POINT TO THIS MODULE EXISTS IN THE OLTEP COMMON          * 56800002
*  AREA POINTED TO BY REGISTER 2. THE LABEL IN THE COMMON AREA        * 56900002
*  IS 'IORTNADR'.                                                     * 57000002
*   UPON ENTRY THIS MODULE EXPECTS THE I/O EFFECTOR CONTROL           * 57100002
*  BLOCK TO BE INITIALIZED. THIS CONTROL BLOCK RESIDES IN THE         * 57200002
*  OLTEP COMMON AREA AND IS MAPPED THERE BEGINNING AT THE LABEL       * 57300002
*  'EFCTRCB'. IF THE CCW, DEVICE TABLE, OR TECB POINTERS OR THE       * 57400002
*  SENSE COUNT IS ZEROES A RETURN OF X'10' IS RETURNED TO THE         * 57500002
*  CALLER. TRYING TO START AN ACTIVE DEVICE RESULTS IN A RETURN       * 57600002
*  CODE OF X'8'. IF NO IOSB CONTROL BLOCK SET IS AVAILABLE TO         * 57700002
*  INIATE THE I/O EVENT A RETURN CODE OF X'4' IS PASSED FROM          * 57800002
*  SVC-59 TO THE CALLER. IF THE CCW TRANSLATOR FAILS, A MESSAGE       * 57900002
*  IS OUTPUTTED FROM THIS ROUTINE AND A RETURN CODE OF X'C' IS        * 58000002
*  RETURNED TO THE CALLER IF IT IS AN INTERNAL CALL, E.G. DATA        * 58100002
*  PROTECTION. IF NOT AN INTERNAL CALL THE TERMINATE OLT BIT IS       * 58200002
*  SET AND OLTEP'S SCHEDULER'S REG ARE RESTORED AND RETURN IS         * 58300002
*  MADE TO THE SCHEDULER.                                             * 58400002
*                                                                     * 58500002
*********************************************************************** 58600002
         EJECT                                                          58700002
*********************************************************************** 58800002
*                   REGISTER EQUATES                                    58900002
*********************************************************************** 59000002
         SPACE                                                          59100002
REG0     EQU   0                  NAME FOR REG 0                        59200002
REG1     EQU   1                  NAME FOR REG 1                        59300002
R1       EQU   1                  NAME FOR REG 1                        59400002
SVCALLRG EQU   1                  SVC-59 CALL CODE REG = 1              59500002
IOSBREG  EQU   5                  POINTER TO MODEL IOSB                 59600002
WORKREG1 EQU   8                  A WORKING GPR # 1                     59700002
DVTABPTR EQU   9                  DEVTAB ENTRY POINTER                  59800002
CHARPTR  EQU   12                 REG POINTS TO CONVERT CHAR            59900002
REG12    EQU   12                 NAME FOR REG 12                       60000002
SAVEREG  EQU   13                 SAVE AREA POINTER REG                 60100002
R14      EQU   14                 NAME FOR REG 14                       60200002
REG14    EQU   14                 NAME FOR REG 14                       60300002
RETCODER EQU   15                 NAME FOR RETURN CODE REG 15           60400002
R15      EQU   15                 NAME FOR REG 15                       60500002
ENTRYREG EQU   15                 THIS REG CONTAINS THE ENTRY POINT     60600002
         EJECT                                                          60700002
*********************************************************************** 60800002
*                  MISC EQUATES                                       * 60900002
*********************************************************************** 61000002
         SPACE                                                          61100002
L1       EQU   1                  VALUE FOR LENGTH OF 1                 61200002
CCWFLAGS EQU   4                  DISPLACEMENT INTO CCW FOR FLAG        61300002
FOUR     EQU   4                  A DECIMAL VALUE OF 4                  61400002
SEEKLGN  EQU   6                  SEEK ADDRESS CHARACTER LENGTH         61500002
L4WDS    EQU   16                 NAME FOR A LENGTH OF 4 WORDS          61600002
OLTEPSVC EQU   59                 OLTEP'S SVC NUMBER                    61700002
OLTTERM  EQU   X'01'               VALUE FOR THE OLT TERM SWITCH IN     61800002
*                                  CE SWITCH 9                          61900002
VIRTSPC  EQU   X'02'              MASK FOR 'OLTEP IN VIRTUAL' BIT IN    62000002
*                                  CESWT7 IN COMMON AREA                62100002
SEEKOP   EQU   X'07'              SEEK CCW OP CODE                      62200002
TICFILL  EQU   X'07'              TIC CCW LOW ORDER BITS                62300002
TICBIT   EQU   X'08'              TIC CCW OP CODE BIT                   62400002
RETHEX8  EQU   X'08'              VALUE FOR A RETURN CODE OF 8          62500002
RETHEX10 EQU   X'10'              VALUE FOR A RETURN CODE OF 16         62600002
DASD     EQU   X'20'              DIRECT ACCESS DEVICE CLASS            62700002
CMNDCHAN EQU   X'40'              CCW FLAG COMMAND CHAINING BIT         62800002
DATACHAN EQU   X'80'              CCW FLAG DATA CHAINING BIT            62900002
SVCSIOCD EQU   X'5C'              SVC-59 SIO CALL CODE                  63000002
LOBITS   EQU   X'0F'              VALUE FOR CONVERTING RET CODES        63100002
HIBITS   EQU   X'F0'              VALUE FOR CONVERTING RET CODES        63200002
ALL      EQU   X'FF'              VALUE FOR ALL FLAG BITS               63300002
RETHEXC  EQU   X'0C'              VALUE FOR A RETURN CODE OF 12         63400002
*                                  FOR VIRTUAL CCW XLATION ERROR        63480002
*                                  ON INTERNAL CALLS                    63560002
BYTEZERO EQU   X'00'              A HEX BYTE OF ZERO                    63650002
         EJECT                                                          63700002
         USING IOSB,IOSBREG       SET MODEL IOSB ADDRESSABILITY       * 63800002
         STM   REG14,REG12,12(SAVEREG) SAVE CALLERS REGS IN HIS         63830002
*                                  SAVE AREA                            63860002
         LR    BASEREG,ENTRYREG   GET ENTRY POINT VALUE                 63900002
         LA    ENTRYREG,IOEFFCTR-IFDOLT35   VALUE TO ADJUST ENTRY POINT 64000002
*                                            FOR ADDRESSABILITY         64100002
         SR    BASEREG,ENTRYREG   ADJUST ENTRY POINT FOR MODULE         64200002
*                                  ADDRESSABILITY                       64300002
         SPACE 3                                                        64400002
         ST    SAVEREG,SAVEAREA+4 SAVE CALLERS SAVE AREA POINTER        64700002
         LA    REG14,SAVEAREA     GET MY SAVE AREA ADDRESS              64800002
         ST    REG14,8(SAVEREG)   PUT MY SAVE AREA POINTER INTO         64900002
*                                  CALLERS SAVE AREA                    65000002
         LR    SAVEREG,REG14      PUT MY SAVE AREA ADDRESS INTO         65100002
*                                  SAVE AREA REG                        65200002
         LA    IOSBREG,MODIOSB    GET MODEL IOSB ADDRESS                65300002
         ICM   DVTABPTR,B'1111',DVTPTR GET DEVTAB ENTRY ADDRESS         65400002
*                                 IS POINTER ZEROES                     65500002
         BZ    EFF35160           YES-GO ERROR RETURN CODE X'10'        65600002
         TM    DEVFLAG1,ACTIVE    IS THIS DEVICE ALREADY ACTIVE         65700002
         BO    EFF35150           YES-GO ERROR RETURN CODE X'08'        65800002
         OI    DEVFLAG1,ACTIVE    NO-SET IT ACTIVE                      65900002
         NI    DEVFLAG2,ALL-PCIIND   SET THE PIC INDICATOR BIT OFF      65950002
         XC    IOSCB,IOSCB        ZERO THE MODEL IOSB AND IOSUSE        66000002
*                                  CONTROL BLOCKS IN THE COMMON         66100002
*                                  AREA                                 66200002
         ICM   WORKREG1,B'1111',TECBPTRX     GET TECB POINTER           66300002
*                                  FROM EFFECTOR CONTROL BLOCK          66400002
         BZ    EFF35160           IT'S ZERO-GO GIVE RETURN OF 16        66500002
         ST    WORKREG1,TECBPTR   PUT TECB POINTER INTO MODEL           66600002
*                                  IOS USE CONTROL BLOCK                66700002
         LA    WORKREG1,IODEVTAB  GET ADDRESS OF 1ST IODEVTAB           66800002
         ST    WORKREG1,IODVTBPT  PUT IT INTO I/O USE CTRL BLK          66900002
         SPACE 3                                                        67000002
         TM    FLGB,INTERNAL      IS INTERNAL CALL BIT ON               67100002
         BNO   EFF35000           NO-GO CHECK NEXT BIT                  67200002
         OI    USEFLAGA,INTRNLCB  SET USE CB BIT ON FOR INTERNAL        67300002
         SPACE                                                          67400002
EFF35000 EQU   *                   CALL                                 67500002
         TM    FLGB,ATTNIN        IS ATTENTION REQUESTED                67600002
         BNO   EFF35010           NO-GO CHECK NEXT BIT                  67700002
         OI    USEFLAGA,ATTN      TURN ON USE CB ATTN BIT               67800002
         SPACE                                                          67900002
EFF35010 EQU   *                                                        68000002
         TM    CESWT7,VIRTSPC     CHECK IF OLTEP/OLT ARE VIRTUAL FOR    68100002
*                                  SETTING THE VIRTUAL CCW BIT          68200002
         BNO   EFF35020           NO-GO CHECK NEXT BIT                  68300002
         OI    USEFLAGA,VIRTCCW   TURN ON USE CB VIRTUAL CCW BIT        68400002
         SPACE                                                          68500002
EFF35020 EQU   *                                                        68600002
         TM    FLGB,OLDTECBX      IS THIS FOR A P3116 TECB              68700002
         BNO   EFF35030           NO-DON'T TURN ON OLD TECB BIT         68800002
         OI    USEFLAGA,OLDTECB   SET USE CB OLD TECB BIT ON            68900002
         SPACE                                                          69000002
EFF35030 EQU   *                                                        69100002
         TM    FLGA,BYPASPFX      IS BYPASS IOS CCW PREFIX ON           69200002
         BNO   EFF35040           NO-GO CHECK NEXT FUNCTION             69300002
         OI    IOSOPT,IOSBYP      TURN ON BYPASS BIT IN IOSB            69400002
         SPACE                                                          69500002
EFF35040 EQU   *                                                        69600002
         TM    FLGA,CEDEPOST      IS CHNL END/DEVICE END POSTING        69700002
*                                  REQUESTED                            69800002
         BNO   EFF35050           GO CHECK NEXT BIT                     69900002
         OI    IOSOPT,IOSDEP      TURN ON IOSB CE/DE POST BIT           70000002
         SPACE                                                          70100002
EFF35050 EQU   *                                                        70200002
         OI    IOSPATH,IOSGDP     SET IOSB GDP BIT                      70500002
EFF35060 EQU   *                                                        70600002
         TM    FLGA,SPEXPOS       IS SPECIFIC EXPOSURE REQUESTED        70700002
         BNO   EFF35070           NO-GO AROUND SETTING BIT              70800002
         OI    IOSPATH,IOSEXP     SET SPECIFIC EXPOSURE BIT-IOSB        70900002
         SPACE 3                                                        71000002
EFF35070 EQU   *                                                        71100002
         OI    IOSOPT,IOSNERP+IOSTSLL    SET 'NO ERP' AND NO LOCAL      71200002
*                                     LOCK ON TERM RTN IN IOSB          71250002
         OC    IOSPATH,DEVAD      MOVE HEX DEVICE ADDRESS TO            71300002
*                                  IOSB FROM DEVTAB                     71400002
         MVC   IOSPCI(L4WDS),PCIEXIT   MOVE PCI, NORMAL, ABNOR-         71500002
*                                  MAL,AND DISABLED INTERRUPT           71600002
*                                  ADDRESSES FROM COMMON AREA TO        71700002
*                                  IOSB                                 71800002
         ICM   WORKREG1,B'1111',CCWPTR GET CCW POINTER                  71900002
         BZ    EFF35160           IF ZERO GO EXIT-BAD-RETCODE=16        72000002
         ST    WORKREG1,IOSVST    PUT CCW ADDRESS INTO IOSB             72100002
         MVC   IOSUCB,DEVUCBAD    MOVE UCB ADDRESS FROM DEVTAB          72200002
*                                  TO IOSB                              72300002
         CLI   DEVCLASS,DASD      IS THE DEVICE A DIRECT ACCESS         72400002
         BNE   EFF35130           NO-BYPASS MOVING SEEK ADDR            72500002
         ICM   WORKREG2,B'1111',SEEKPTR     GET SEEK ADDRESS PTR IF     72502002
*                                  CALL IS FOR OLD 'P3116' OLT          72504002
         BZ    EFF35090           CALL NOT FROM OLD OLT . GO PROCESS    72506002
*                                  FOR NEW CHAINS                       72508002
         MVC   IOSSKBB(SEEKLGN),0(WORKREG2)      MOVE SEEK ADDR TO      72508402
*                                  IOSB                                 72508802
         B     EFF35130           GO FINISH IOSB                        72509202
         SPACE                                                          72600002
EFF35090 EQU   *                                                        72700002
         CLI   0(WORKREG1),SEEKOP IS THIS CCW A SEEK                    72800002
         BE    EFF35120           YES-GO MOVE SEEK ADDRESS              72900002
         CLI   0(WORKREG1),X'13'    IS THIS CCW A RECALIBRATE  @UZ00852 72930003
         BE    EFF35120             YES GO MOVE CCW            @UZ00852 72960003
         TM    0(WORKREG1),TICBIT IS TIC BIT ON                         73000002
         BNO   EFF35100           NO-CHECK FOR CHAINING                 73100002
         TM    0(WORKREG1),TICFILL IS THIS A REAL TIC                   73200002
         BNZ   EFF35100           NO-GO CHECK FOR CHAINING              73300002
         ICM   WORKREG1,B'0111',1(WORKREG1) GET TICKED-TO CCW           73400002
*                                  ADDRESS                              73500002
         B     EFF35090           CONTINUE                              73600002
EFF35100 EQU   *                                                        73700002
         TM    CCWFLAGS(WORKREG1),CMNDCHAN WANT COMMAND CHAINING        73800002
         BNZ   EFF35110           YES-GO INCREMENT AND CONTINUE         73900002
         TM    CCWFLAGS(WORKREG1),DATACHAN WANT DATA CHAINING           74000002
         BNO   EFF35130           NO-END CHAIN                          74100002
         LA    WORKREG1,8(WORKREG1) ADD 8 TO CCW INCREMENTER REG        74200002
         B     EFF35100           GO CHECK CHAINING FLAGS               74300002
         SPACE 2                                                        74400002
EFF35110 EQU   *                                                        74500002
         LA    WORKREG1,8(WORKREG1) ADD 8 TO CCW INCREMENTER REG        74600002
         B     EFF35090           GO CONTINUE SCAN                      74700002
         SPACE 2                                                        74800002
EFF35120 EQU   *                                                        74900002
         ICM   WORKREG1,B'0111',1(WORKREG1) GET SEEK ADDRESS PTR        75000002
         MVC   IOSSKBB(SEEKLGN),0(WORKREG1) MOVE BBCCHH TO IOSB         75100002
         SPACE                                                          75200002
EFF35130 EQU   *                                                        75300002
         ST    IOSBREG,ROPT       PUT MODEL IOSB ADDR INTO SVC59        75400002
*                                  PARM LIST WORD 1.                    75500002
         ST    DVTABPTR,ROPT+4    PUT DEVTAB ENTRY POINTER INTO         75600002
*                                  SVC-59 PARM LIST                     75700002
         XR    WORKREG1,WORKREG1  ZERO WORKREG1                         75800002
         ICM   WORKREG1,B'0001',SNSCNT GET THE PASSED SENSE CNT         75900002
         BZ    EFF35160           IS IT ZERO                            76000002
         STC   WORKREG1,OECBSNSC  NO-PUT EXPECTED SENSE COUNT           76100002
*                                  INTO MODEL OECB WORD 1               76200002
         MVC   IOSFMSK(L'FILEMSK),FILEMSK GET FILEMASK/MODESET          76300002
*                                   FOR THIS REQUEST                    76400002
         MVI   DEVINTPT,BYTEZERO  SET DEVTAB INTERRUPT COUNTER TO       76410002
*                                 ZEROES                                76420002
*                                   FOR THIS REQUEST                    76430002
         LA     SVCALLRG,SVCSIOCD PUT START IO CALL CODE INTO           76500002
*                                  SVC-59 CALL CODE REG                 76600002
         LA    REG0,ROPT          PUT ADDR OF ROPT INTO REG 0 FOR SVC-  76700002
         SPACE                                                          76800002
         SVC   OLTEPSVC           ISSUE SVC-59 FOR A STARTI0            76900002
         SPACE 2                                                        77000002
         LTR   RETCODER,RETCODER  IS RETURN CODE = 0                    77100002
         BZ    EFF35190           YES-GO RESTORE REGS AND RETURN        77200002
         SPACE                                                          77300002
         LA    WORKREG1,FOUR      SET A REG = 4 TO COMPARE RETCD        77400002
         CR    RETCODER,WORKREG1  IS RETURN CODE = 4                    77500002
         BE    EFF35180           HERE BECAUSE SVC-59 SAYS NO IOSB.     77600002
*                                  SO GO TURN OFF ACTIVE BIT IN DEVTAB  77700002
*                                  AND RETURN TO CALLER                 77800002
         SPACE 2                                                        77900002
EFF35140 EQU   *                                                        78000002
         NI    DEVFLAG1,ALL-ACTIVE   TURN OFF ACTIVE BIT                78100002
         LA    WORKREG1,LOBITS    GET 'AND' MASK FOR LOW BITS ON        78200002
         NR    WORKREG1,RETCODER  'AND' OUT HIGH BITS                   78300002
         LA    CHARPTR,CONVCHAR(WORKREG1)   POINT TO EBCDIC CHAR        78400002
*                                            FOR LOW CHAR BITS          78500002
         MVC   MSGCODE+1(L1),0(CHARPTR)     PUT LOW ORDER OF RET        78600002
*                                            CODE INTO MSG              78700002
         LA    WORKREG1,HIBITS    MASK FOR HIGH ORDER RETURNCODE        78800002
         NR    WORKREG1,RETCODER  ZERO LOW ORDER RET CDE BITS           78900002
         LA    CHARPTR,CONVCHAR(WORKREG1)   GET ADDR OF EBCDIC          79000002
*                                  RETURN CODE HIGH ORDER BITS          79100002
         MVC   MSGCODE(L1),0(CHARPTR)  MOVE HIGH ORDER RET CODE         79200002
*                                  BITS TO MESSAGE                      79300002
         LA    REG1,IFD310        GET MESSAGE ADDRESS                   79400002
         PWTO  REG=(REG1)         OUTPUT MSG3101                        79500002
         SPACE 3                                                        79600002
         TM    FLGB,INTERNAL      WAS IT AN INTERNAL CALL               79700002
         BE    EFF35170           YES-GO RETURN TO CALLER               79800002
         OI    CESWT9,OLTTERM     NO-SET TERMINATE OLT SW ON            79900002
         L     SAVEREG,SCHEDSA    GET ADDRESS OF SCHEDULER'S            80000002
*                                  SAVE AREA                            80100002
         LM    REG14,REG12,12(SAVEREG) RESTORE SCHEDULERS REGS          80200002
         BR    REG14              RETURN TO SCHEDULER                   80300002
         SPACE 2                                                        80400002
EFF35150 EQU   *                                                        80500002
         LA    RETCODER,RETHEX8   SET RETURN CODE OF 8                  80600002
         B     EFF35190           GO RESTORE REGS AND RETURN            80700002
         SPACE 3                                                        80800002
EFF35160 EQU   *                                                        80900002
         LA    RETCODER,RETHEX10  SET RETURN CODE OF 16                 81000002
         B     EFF35180           GO RESTORE REGS AND RETURN            81100002
         SPACE 3                                                        81200002
EFF35170 EQU   *                                                        81300002
         LA    RETCODER,RETHEXC   SET RETURN CODE OF 12                 81400002
EFF35180 EQU   *                                                        81500002
         NI    DEVFLAG1,ALL-ACTIVE     SET DEVTAB ACTIVE BIT OFF        81600002
EFF35190 EQU   *                                                        81700002
         L     SAVEREG,SAVEAREA+4 GET ADDRESS OF CALLERS SAVE AREA      81800002
         L     REG14,12(SAVEREG)  RESTORE REG 14                        81900002
         LM    REG0,REG12,20(SAVEREG)  RESTORE REST OF REGS AND         82000002
         BR    REG14               RETURN TO CALLER                     82100002
         TITLE '***  IFDOLT35 - OLTEP AR-145 EXIO. BASE MODULE  ***'    82200002
         EJECT                                                          82300002
*********************************************************************** 82400002
*                   MISC CONSTANTS AND DATA AREAS                     * 82500002
*********************************************************************** 82600002
         SPACE                                                          82700002
         SPACE                                                          82800002
SAVEAREA DC    18F'0'             I/O EFFECTOR SAVE AREA                82900002
SAVEARE1 DC    18F'0'             IFDOLT35 SAVE AREA                    83000002
CCWCOPY1 DC    XL8'00'            SCAN ROUTINE WORK AREA                83100002
         SPACE                                                          83200002
C73PLIST DS    2F                 PARAMETER LIST FOR IFDOLT73 LINE      83300002
*                                  CONNECTION REQUEST                   83400002
C73PDVTB EQU   C73PLIST+0         DEVTAB POINTER FOR IFDOLT73           83500002
C73PCDSP EQU   C73PLIST+4         CDS ADDRESS IN OLT FOR IFDOLT73       83600002
CT3340   DC    XL2'200C'          CONSTANT FOR 3340 CLASS AND TYPE      83700002
CT3350   DC    XL2'200B'          CONSTANT FOR 3350 CLASS/TYPE @Z30RSAG 83750003
IFD35SW1 DC    XL1'00'            IFDOLT35 SWITCH BYTE # 1              83800002
FILMSKSV DC    XL1'00'            SAVE AREA FOR SCAN CCW FILEMASK       83900002
CETRKWRT EQU   X'04'              3340 FILE MASK FOR CE TRACK WRTS ONLY 84000002
*  BIT NAMES FOR 'IFD35SW1'                                             84100002
SCANFNCT EQU   X'80'              CCW SCAN SEARCH CHAIN END-NO-OP/SENSE 84200002
*        EQU   X'40'              UNUSED                                84300002
*        EQU   X'20'              UNUSED                                84400002
*        EQU   X'10'              UNUSED                                84500002
*        EQU   X'08'              UNUSED                                84600002
*        EQU   X'04'              UNUSED                                84700002
*        EQU   X'02'              UNUSED                                84800002
*        EQU   X'01'              UNUSED                                84900002
CONVCHAR DC    C'0123456789ABCDEF'     CHARACTERS TO CONVERT IOS        85000002
*                                  CCW XLATOR ERROR CODE                85100002
*                                  FOR MSG IFD310I                      85200002
         EJECT                                                          85300002
*********************************************************************** 85400002
*                   MESSAGES                                          * 85500002
*********************************************************************** 85600002
         SPACE                                                          85700002
*  MESSAGE TO NOTIFY OPERATOR OF IOS CCW XLATOR ERRORS                  85800002
IFD310   WTO   'IFD310I OLT VIRTUAL CCW TRANSLATION ERROR - XX',MF=L,ROX85900002
               UTCDE=10,DESC=7                                          86000002
MSGCODE  EQU   IFD310+44          DISPLACEMENT INTO MSG 310I FOR        86100002
*                                  THE RETURN CODE FROM XLATOR          86200002
         EJECT                                                          86300002
*********************************************************************** 86400002
*                   DSECTS                                            * 86500002
*********************************************************************** 86600002
         SPACE                                                          86700002
*  OLTEP COMMON AREA MACRO                                              86800002
COM      IFDCOM                                                         86900002
         SPACE 5                                                        87000002
         IECDIOSB                                                       87100002
         SPACE 5                                                        87200002
*  DESCT FOR OLTEP'S IOSB USER CONTROL BLOCK AND EVENT CONTROL BLOCK    87300002
         SPACE 2                                                        87400002
IOSUSECB EQU   *                                                        87500002
USERCB   DS    0CL24              START OF IOSB USER CONTROL BLOCK      87600002
OECBPTR  DS    F                  POINTER TO OLTEP EVENT CONTROL BLOCK  87700002
TECBPTR  DS    F                  OLT'S TECB POINTER FOR THIS EVENT     87800002
IODVTBPT DS    F                  POINTER TO 3 WORDS IN OLTEP COMMON    87900002
*                                   AREA WHICH HAVE:                    88000002
*                                       0   DEVTAB ENTRY POINTER        88100002
*                                       4   POINTER TO THIS IOSB        88200002
*                                       8   THE ECB FOR THIS EVENT      88300002
TCCWPTR  DS    F                  POINTER TO THE TCCW SYSTEM CONTROL    88400002
*                                    BLOCK FOR THE CCW TRANSLATOR       88500002
USEFLAGS DS    0F                 A WORD OF FLAGS                       88600002
USEFLAGA DS    1C                 FIRST FLAG BYTE FOR THIS CB SET       88700002
INUSE    EQU   X'80'              THIS IOSB IS IN USE                   88800002
ATTN     EQU   X'40'              ATTENTION=YES REQUEST (OFF IF DONE)   88900002
VIRTCCW  EQU   X'20'              THE CCW'S ARE IN VIRTUAL              89000002
OLDTECB  EQU   X'10'              OLD TECB TO BE POSTED                 89100002
INTRNLCB EQU   X'08'              REQUEST IS INTERNAL (LINE CONNECT,DP) 89200002
PURGED   EQU   X'04'              THIS I/O EVENT IS PURGED              89300002
PCIENTRY EQU   X'02'              PCI EXIT OPERATING                    89400002
USEFLAGB DS    1C                 UNUSED                                89500002
USEFLAGC DS    1C                 UNUSED                                89600002
USEFLAGD DS    1C                 UNUSED                                89700002
USERSVD  DS    F                  RESERVED FOR FUTURE                   89800002
         SPACE                                                          89900002
OECB     DS    0CL64              START OF OLTEP'S EVENT CONTROL BLOCK  90000002
OSNSCNT  DS    CL1                OLT'S SENSE BYTES REQUESTED COUNT     90100002
OINCNT   DS    CL1                NUMBER OF INTERRUPTS IN OECB          90200002
UNUSED   DS    CL2                NOT USED                              90300002
OCSW1    DS    0CL8               FIRST INTERRUPT POSTED IN OECB        90400002
OCSWCC1  DS    CL1                IOS SIO CONDITION CODE                90500002
OCSWCMD1 DS    CL3                CSW COMMAND ADDRESS                   90600002
OCSWSTS1 DS    0CL2               CSW1 STATUS BYTES                     90700002
OCSWSTA1 DS    CL1                CSW1 STATUS BYTE A                    90800002
OCSWSTB1 DS    CL1                CSW1 STATUS BYTE B                    90900002
OCSWBYT1 DS    CL2                CSW1 RESIDUAL BYTE COUNT              91000002
OCSW2    DS    0CL8               SECOND INTERRUPT POSTED IN OECB       91100002
OCSWCC2  DS    CL1                IOS SIO CONDITION CODE                91200002
OCSWCMD2 DS    CL3                CSW COMMAND ADDRESS                   91300002
OCSWSTS2 DS    0CL2               CSW2 STATUS BYTES                     91400002
OCSWSTA2 DS    CL1                CSW2 STATUS BYTESA                    91500002
OCSWSTB2 DS    CL1                CSW2 STATUS BYTESB                    91600002
OCSWBYT2 DS    CL2                CSW2 RESIDUAL BYTE COUNT              91700002
OCSW3    DS    0CL8               THIRD INTERRUPT POSTED IN OECB        91800002
OCSWCC3  DS    CL1                IOS SIO CONDITION CODE                91900002
OCSWCMD3 DS    CL3                CSW COMMAND ADDRESS                   92000002
OCSWSTS3 DS    0CL2               CSW3 STATUS BYTES                     92100002
OCSWSTA3 DS    CL1                CSW3 STATUS BYTESA                    92200002
OCSWSTB3 DS    CL1                CSW3 STATUS BYTESB                    92300002
OCSWBYT3 DS    CL2                CSW3 RESIDUAL BYTE COUNT              92400002
OSNS1    DS    CL36               SENSE SAVE AREA FOR UNIT CHECK ON     92500002
*                                   THIS REQUEST                        92600002
*  OLTEP DEVICE TABLE ENTRY MAP MACRO                                   92700002
         IFDEVTAB                                                       92800002
DVTABEND EQU   *                                                        92850002
         SPACE 5                                                        92900002
*  OLT TEST EVENT CONTROL BLOCK MAP                                     93000002
TECB     DSECT                                                          93100002
TBFLDCNT DS    CL1                                                      93200002
TBFLDSZE DS    CL1                                                      93300002
TBSNSIZE DS    CL2                                                      93400002
TBFLAGS  DS    CL1                                                      93500002
TBSIONOG EQU   X'80'                                                    93600002
TBSNSCNT DS    CL1                                                      93700002
TBSNSPST DS    CL1                                                      93800002
TBEVTPST DS    CL1                                                      93900002
TECBDATA EQU   *                  START OF TECB DATA FIELDS             94000002
         SPACE 5                                                        94100002
*  OLT EXIO PARAMETER LIST MAP                                          94200002
EXIOPLST DSECT                                                          94300002
OPLSTFLG DS    CL1                CONTROL PROGRAM FLAG                  94400002
OEXIOLVL DS    CL1                                                      94500002
OMACROID DS    CL2                                                      94600002
OTECBADR DS    A                                                        94700002
OCDSADR  DS    A                                                        94800002
OCCWPTR  DS    A                                                        94900002
OCCWCNT  DS    CL1                                                      95000002
OEXIOFLG DS    CL1                                                      95100002
ATTNREQ  EQU   X'80'                                                    95200002
SNSEQNO  EQU   X'40'                                                    95300002
         SPACE 5                                                        95400002
*  MAP OF A BASIC CDS (CONFIGURATION DATA SET ENTRY)                    95500002
CDSMAP   DSECT                                                          95600002
CDEVADDR DS    CL4                CDS DEVICE ADDRESS IN HEX             95700002
CDEVDISC DS    0CL4               WORD OF DEVICE DESCRIPTORS            95800002
CDEVMODL DS    CL1                DEVICE MODEL                          95900002
CDEVFEAT DS    CL1                DEVICE FEATURES                       96000002
CDEVCLAS DS    CL1                DEVICE CLASS                          96100002
CDEVUNIT DS    CL1                DEVICE UNIT TYPE                      96200002
CDEVBCNT DS    CL1                CDS ENTRY BYTE COUNT                  96300002
CDEVFLAG DS    CL2                CDS FLAGS                             96400002
CSYMBIT  EQU   X'08'              BIT SAYS CDS IS SYMBOLIC NAMED        96500002
CLCRREQ  EQU   X'01'              LINE CONNECTION ROUTINE REQUIRED      96600002
CDEVEXTM DS    CL1                CDS EXTERNAL SIGNAL MASK AREA         96700002
CDSYMNAM DS    CL8                CDS DEVICE SYMBOLIC NAME FIELD        96800002
         END                                                            96900002
