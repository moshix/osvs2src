         TITLE 'IFDOLT53 RESTORE TAPE LABELS'                           00010000
         TITLE 'IFDOLT53 RESTORE TAPE LABELS,INDICATE MSS STATUS'       00020000
         LCLA  &T,&SPN                                            0002  00030000
.@001    ANOP                                                     0002  00040000
IFDOLT53 CSECT ,                                                  0002  00050000
         BC    15,24(0,@F)                                              00060000
         DC    C'IFDOLT53 26 APR 78'                             0002  00070000
         STM   @E,@C,12(@D)                                       0002  00080000
         BALR  @B,0                                               0002  00090000
@PSTART  DS    0H                                                 0002  00100000
         USING @PSTART+00000,@B                                   0002  00110000
         ST    @D,@SAV001+4                                       0002  00120000
         LA    @F,@SAV001                                         0002  00130000
         ST    @F,8(0,@D)                                         0002  00140000
         LR    @D,@F                                              0002  00150000
*  GEN(USING CHASCT,2);                  /* COMMON AREA BASE REGISTER * 00160000
         USING CHASCT,2                                                 00170000
         DS    0H                                                       00180000
* /******************************************************************** 00190000
* /*                                                                  * 00200000
* /*                 CCW STRING FOR WRITING TAPE LABEL                * 00210000
* /*                                                                  * 00220000
* /******************************************************************** 00230000
*         GENERATE DATA;                                                00240000
*         GEN DATA;                                                     00250000
* GENERATE DATA;                                                        00260000
*  /******************************************************************* 00270000
*  /*                                                                 * 00280000
*  /*                     DECLARED  REGISTERS                         * 00290000
*  /*                                                                 * 00300000
*  /******************************************************************* 00310000
*  DCL R0  REG(0)  PTR;                                                 00320000
*  DCL R1  REG(1)  PTR;                                                 00330000
*  DCL R2  REG(2)  PTR;                                                 00340000
*  DCL R3  REG(3)  PTR;                                                 00350000
*  DCL R4  REG(4)  PTR;                                                 00360000
*  DCL R5  REG(5)  PTR;                                                 00370000
*  DCL R6  REG(6)  PTR;                                                 00380000
*  DCL R7  REG(7)  PTR;                                                 00390000
*  DCL R8  REG(8)  PTR;                                                 00400000
*  DCL R9  REG(9)  PTR;                                                 00410000
*  DCL R10 REG(10) PTR;                                                 00420000
*  DCL R11 REG(11) PTR;                                                 00430000
*  DCL R12 REG(12) PTR;                                                 00440000
*  DCL R13 REG(13) PTR;                                                 00450000
*  DCL R14 REG(14) PTR;                                                 00460000
*  DCL R15 REG(15) PTR;                                                 00470000
*         RESTRICT(2,4,5,7,8);                              /*@ZA15468* 00480000
*  DCL ROPT GENERATED;                   /* SVC AREA            X02906* 00490000
*  DCL WKSVC GENERATED;                  /* SVC WORK AREA       X02906* 00500000
*  DCL MCT GENERATED;                    /* MODULE CONTROL TABLEX02906* 00510000
*  DCL VID CHAR(2) BASED(ADDR(WKSVC)+2); /* MODID IN SVC PLIST  X02906* 00520000
*  DCL MID1 CHAR(2) BASED(ADDR(MCT)+10); /* MY MODID            X02906* 00530000
*                                                                       00540000
*  /******************************************************************* 00550000
*  /*                                                                 * 00560000
*  /*           EXIO PARAMETER LIST                                   * 00570000
*  /*                                                                 * 00580000
*  /******************************************************************* 00590000
*                                                                       00600000
*                                       /* IO EFFECTOR CNTL BLK Y02906* 00610000
*                                       /* IN COMMON AREA       Y02906* 00620000
*  DCL EFCTRCB CHAR(20) GEND;           /* IO EFFECTOR CONTROL BLOCK  * 00630000
*  DCL CCWPTR PTR(31) GEND;             /* CCW LIST POINTER     Y02906* 00640000
*  DCL DVTPTR PTR(31) GEND;             /* DEVICE TABEL POINTER Y02906* 00650000
*  DCL FLGA   BIT(8)  GEND;             /* FLAG BYTE 1          Y02906* 00660000
*                                                                       00670000
*  DCL FLGB   BIT(8)  GEND;             /* FLAG BYTE 2          Y02906* 00680000
*                                                                       00690000
* DCL 1 FLG1A BIT(8) BASED(ADDR(FLGA)),                                 00700000
*       3 BYPASS BIT(1);                 /* BYPASS PREFIX       Y02906* 00710000
*                                                                       00720000
*  DCL 1 FLG2 BIT(8) BASED(ADDR(FLGB)),                       /*Y02906* 00730000
*        3 INTCALL BIT(1),              /* INTERNAL CALL FOR IO Y02906* 00740000
*        3 MODEREQ BIT(1);              /* IF ON MODE SET REQ   Y02906* 00750000
*  DCL FILEMSK CHAR(1) GEND;            /* FILE MSK FOR IOEFFEC Y02906* 00760000
* DCL SNSCNT CHAR(1) GEND;                                              00770000
* DCL TECBPTRX PTR(31) GEND;                                            00780000
*  DCL IORTNADR GEND;                   /* ADDR OF IO EFFECTOR  Y02906* 00790000
*         DCL 1 WAITLST CHAR(16) BDY(WORD), /* WAITIO LIST      Y02906* 00800000
*              3 XMGR CHAR(1) INIT('00'X), /* TRANS MGR STUFF   Y02906* 00810000
*              3 LVL CHAR(1) INIT('02'X),/* WAITIO LVL          Y02906* 00820000
*              3 MODID CHAR(2) INIT('36'), /* IFDOLT36 ID       Y02906* 00830000
*              3 TECBPTR PTR(31) INIT(ADDR(TECB)),/* TECB ADDR  Y02906* 00840000
*              3 CDSPTR PTR(31) INIT(0),  /*CDS = 0             Y02906* 00850000
*              3 FLG BIT(8) INIT('80'X), /* SET WAIT = YES      Y02906* 00860000
*               5 WAITYES BIT(1),        /* FLAG TO 1           Y02906* 00870000
*              3 TIME CHAR(2) INIT('001E'X); /* TIME IN SECONDS Y02906* 00880000
*                                                                       00890000
*                                                                       00900000
*                                                                       00910000
*  /******************************************************************* 00920000
*  /*                                                                 * 00930000
*  /*                COMMUNICATION SWITCH STRUCTURE                   * 00940000
*  /*                                                                 * 00950000
*  /******************************************************************* 00960000
*                                                                       00970000
*  DCL CESWT CHAR(5) GENERATED;     /* COMMUNICATION SWITCHES         * 00980000
*  DCL 1 * BASED(ADDR(CESWT)),      /*                                * 00990000
*        3 * BIT(8),                /* CESWT                          * 01000000
*          5 * BIT(1),              /* NA                             * 01010000
*          5 PROTECT BIT(1),        /* DP FOR PRIMARY OR SEC DEVICE   * 01020000
*          5 * BIT(6),              /* NA                             * 01030000
*        3 * BIT(8),                /* CESWT1                         * 01040000
*          5 * BIT(1),              /* NA                             * 01050000
*          5 SEEK2321 BIT(1),       /* SEEK ONLY COMMANDS ON 2321     * 01060000
*          5 SECONLOK BIT(1),       /* SEC DEV ONLINE OK              * 01070000
*          5 * BIT(1),              /* NA                             * 01080000
*          5 FILMSK BIT(1),         /* ALLOWS FILE MASK CHANGES       * 01090000
*          5 T2321 BIT(1),          /* T2321 IS DEV BEING TESTED      * 01100000
*          5 ONLINEOK BIT(1),       /* DEV IS ONLINE PROCEED          * 01110000
*          5 * BIT(1),              /* NA                             * 01120000
*        3 * BIT(8),                /* CESWT2                         * 01130000
*          5 NDCFO BIT(1),          /* PREV OCCUR OF DYN COMM INTERVAL* 01140000
*          5 DPONDEV BIT(1),        /* DP HAS BEEN DONE ON THIS DEV   * 01150000
*          5 * BIT(1),              /* NA                             * 01160000
*          5 CHANTEST BIT(1),       /* DATA PROT TO BE DONE ON CHAN   * 01170000
*          5 * BIT(1),              /* NA                             * 01180000
*          5 * BIT(1),              /* NA                             * 01190000
*          5 TAPEHDR BIT(1),        /* TAPE HEADER IS TO BE WRITTEN   * 01200000
*          5 DEVDPOK BIT(1),        /* DP ON DEVICE WAS SUCCESSFUL    * 01210000
*        3 * BIT(8),                /* CESWT3                         * 01220000
*          5 * BIT(1),              /* NA                             * 01230000
*          5 BYPALDEV BIT(1),       /* BYPASS ALL TESTS AND DEVICES   * 01240000
*          5 BYPDEV BIT(1),         /* BYPASS TESTS ON THIS DEVICE    * 01250000
*          5 * BIT(1),              /* NA                             * 01260000
*         5 SUSDEL BIT(1),               /* SUSPENDED DELETION   M4506* 01270000
*          5 * BIT(1),              /* NA                             * 01280000
*          5 * BIT(1),              /* NA                             * 01290000
*          5 STDLAB BIT(1);         /* STANDARD LABEL                 * 01300000
*                                                                       01310000
*         DCL   CESWT8 CHAR(1) GENERATED; /* ADDRESS OF SWITCH  X02906* 01320000
*         DCL   1 * BASED(ADDR(CESWT8)), /* SET ADDR FOR LETGO CHECK*/  01330000
*                 3 * BIT(2),            /* NOT USED BITS            */ 01340000
*                 3  LETGO BIT(1);       /* LETGO REQUEST       X02906* 01350000
*                                                                       01360000
* /******************************************************************** 01370000
* /*                                                                  * 01380000
* /*                      DEVICE TABLE STRUCTURE                      * 01390000
* /*                                                                  * 01400000
* /******************************************************************** 01410000
*                                                                       01420000
*         DCL DEVTBPTR PTR GENERATED;      /* PTR TO DEVTAB      21050* 01430000
*         DCL TABLNGTH FIXED(15)         /* LENGTH OF DEVTAB    S21050* 01440000
*           GENERATED;                   /* ENTRY               S21050* 01450000
*         DCL  1 * BASED(R7),          /*                       S21050* 01460000
*         3 DEVADEB CHAR(8),             /* DEV ADDR IN EBCDIC        * 01470000
*                3 UCBAD POINTER(31),  /* UCB ADDR (2BYTES)     S21050* 01480000
*                3 DEVFLG1 CHAR(1),    /* FLAG BYTE #1          S21050* 01490000
*                 5 STATUS BIT(1),     /* ON LINE VS. OFF-LINE  S21050* 01500000
*                 5 PRIMARY BIT(1),    /* PRIMARY BIT           S21050* 01510000
*                 5 DPDONE  BIT(1),    /* D.P. COMPLETE         S21050* 01520000
*                 5 *       BIT(3),    /* FILL                  S21050* 01530000
*                 5 FILEPROT BIT(1),   /* F.P. MODE OPERATION   S21050* 01540000
*                 5 *       BIT(1),    /* FILL                  S21050* 01550000
*                3 DEVFLG2 CHAR(1),    /* FLAG BYTE # 2         S21050* 01560000
*                 5 * BIT(3),          /* FILL                  S21050* 01570000
*                 5   STDLABL BIT(1),  /* STANDARD TAPE LABEL   S21050* 01580000
*                 5 * BIT(4),          /* FILL                  S21050* 01590000
*                3 DEVFLG3 CHAR(1),    /* FLAG BYTE # 3         S21050* 01600000
*                 5 * BIT(3),            /* N/A                 X02906* 01610000
*                 5 TAPEBIT BIT (1),     /* RESET UCB NOTRDY FLGX02906* 01620000
*                 5 * BIT(4),            /* N/A                 X02906* 01630000
*                3 DEVFLG4 CHAR(1),    /* FLAG BYTE # 3         S21050* 01640000
*                3 TAPELABL CHAR(16),  /* TAPE LABEL SAVE AREA  S21050* 01650000
*                 5 VOL CHAR(10),      /* VOL NAME              S21050* 01660000
*                 5 HDR CHAR (4),      /* HDR NAME              S21050* 01670000
*                 5 MODESV CHAR(1),    /* MODE SAVE AREA        S21050* 01680000
*                 5 * CHAR(1),         /* FILL                  S21050* 01690000
*                3 ADRHEX CHAR (4),    /* 4 BYTE HEX ADDRESS    S21050* 01700000
*                 5 * CHAR(2),         /* FILL                  S21050* 01710000
*                 5 HEXAD CHAR(2);     /* 2 BYTE HEX ADDRESS    S21050* 01720000
*                                                                       01730000
*  /**********************************************************@ZA15468* 01740000
*  /*                                                         @ZA15468* 01750000
*  /*                     UCB DEVICE CLASS-TYPE STRUCTURE     @ZA15468* 01760000
*  /*                                                         @ZA15468* 01770000
*  /**********************************************************@ZA15468* 01780000
*                                                                       01790000
*  DCL 1 * BASED(R8),                    /*                   @ZA15468* 01800000
*        3 UCBOB CHAR(24),               /* UCB STRUCTURE     @ZA15468* 01810000
*          5 *        CHAR(16),          /* N/A               @ZA15468* 01820000
*          5 MODEL    CHAR(1),           /* MODEL OPTIONS     @ZA15468* 01830000
*          5 FEATURES CHAR(1),           /* DEVICE FEATURES   @ZA15468* 01840000
*          5 CLASS    CHAR(1),           /* DEVICE CLASS      @ZA15468* 01850000
*          5 TYPE     CHAR(1);           /* DEVICE TYPE       @ZA15468* 01860000
*                                                                       01870000
*                                                                       01880000
*  /******************************************************************* 01890000
*  /*                                                                 * 01900000
*  /*                  TEST EVENT CONTROL BLOCK FIELD                 * 01910000
*  /*                                                                 * 01920000
*  /******************************************************************* 01930000
*                                                                       01940000
*         DCL 1 TECB,                     /* EVENT BLOCK FOR IO Y02906* 01950000
*               2 FLDCNT CHAR(1) INIT('01'X),  /* NUMBER FDLS   Y02906* 01960000
*               2 FLDSIZE CHAR(1) INIT('0C'X), /* SIZE EACH FLD Y02906* 01970000
*               2 SOMETNG CHAR(1) INIT('00'X), /* N/A           Y02906* 01980000
*               2 SNSSIZE CHAR(1) INIT('18'X), /* SENSE EXPTD   Y02906* 01990000
*               2 FLG1 CHAR(1) INIT('00'X),    /* FLAGS         Y02906* 02000000
*               2 SNSCNTTB CHAR(1) INIT('01'X), /* XPECTED COUNTY02906* 02010000
*               2 CLRTECB  CHAR(39),     /* LABEL TO CLEAR TECB YM3336* 02020000
*                 3 CNTSNS CHAR(1) INIT('00'X), /* NUMB OCCURED Y02906* 02030000
*                 3 CNTINT CHAR(1) INIT('00'X), /*NUMB INTERRUPTY02906* 02040000
*                 3 CCP CHAR(1),        /* SIO COND CODE        Y02906* 02050000
*                 3 * CHAR(3),          /* N/A                  YM3336* 02060000
*                 3 CSW1 CHAR(8),       /* CSW NO. ONE          Y02906* 02070000
*                   5 * CHAR(4),        /* N/A                  Y02906* 02080000
*                   5 STATUSX CHAR(2),  /* TWO STATUS BYTES     Y02906* 02090000
*                     7 EXIOK CHAR(1),  /* STATUS BYTE 1        Y02906* 02100000
*                       9 * BIT(6),     /* N/A                  Y02906* 02110000
*                       9 UNITCK BIT(1), /* UNIT CHECK          Y02906* 02120000
*                       9 UNITEXCP BIT(1), /* UNIT EXCEPTION BITY02906* 02130000
*                     7 BYTE2 CHAR(1),  /* STATUS BYTE 2        Y02906* 02140000
*                       9 * BIT(1),     /* N/A                  Y02906* 02150000
*                       9 INLENGTH  BIT(1), /* INCORR LNG IND   Y02906* 02160000
*                       9 * BIT(6),     /* N/A                  Y02906* 02170000
*                   5 * CHAR(2),        /* N/A                  Y02906* 02180000
*                 3 SENSE CHAR(24),     /* SENSE COUNT          Y02906* 02190000
*                   5 * CHAR(3),        /* N/A                  Y02906* 02200000
*                   5 SNS1 CHAR(7),     /* SENSE BYTES          Y02906* 02210000
*                     7 SNSFLD BIT(8),  /* BYTE0  SENSE         Y02906* 02220000
*                       9 * BIT(1),     /* N/A                  Y02906* 02230000
*                       9 SNS2 BIT(1),  /* BIT 1 SNS BYTE 0     Y02906* 02240000
*                     7 * CHAR(2),      /* SNS BYTES 1 & 2      Y02906* 02250000
*                     7 * BIT(8),       /* SNS BYTE 3           Y02906* 02260000
*                       9 * BIT(5),     /* FILL                 Y02906* 02270000
*                       9 PEIND BIT(1), /* BIT 5 BYTE3 OF SNS   Y02906* 02280000
*                     7 * CHAR(2),      /* SENCE BYTES 4 AND 5  Y02906* 02290000
*                     7 * CHAR(1),      /* SENCE BYTE 6         Y02906* 02300000
*                       9 * BIT(4),     /* NOT REFERENCED       Y02906* 02310000
*                       9 BIT4 BIT(1);  /* BIT FOUR FOR BIRTCH  Y03128* 02320000
*  /**********************************************************@ZA15468* 02330000
*  /*                                                         @ZA15468* 02340000
*  /*                     MSS STATUS BYTE STRUCTURE           @ZA15468* 02350000
*  /*                                                         @ZA15468* 02360000
*  /**********************************************************@ZA15468* 02370000
*                                                                       02380000
*  DCL MSSSTAT CHAR(1) GENERATED;        /* MSS STATUS BYTE   @ZA15468* 02390000
*  DCL 1 * CHAR(1) BASED(ADDR(MSSSTAT)), /*                   @ZA15468* 02400000
*        3 FINITSW BIT(1),               /* FUNCT INIT BIT    @ZA15468* 02410000
*        3 DINITSW BIT(1),               /* DIAGN INIT BIT    @ZA15468* 02420000
*        3 INITSW  BIT(1),               /* INTERFACE STATUS  @ZA15468* 02430000
*        3 *       BIT(5);               /* N/A               @ZA15468* 02440000
*                                                                       02450000
*  /******************************************************************* 02460000
*  /*                                                                 * 02470000
*  /*                    MESSAGE STRUCTURES                           * 02480000
*  /*                                                                 * 02490000
*  /******************************************************************* 02500000
*                                                                       02510000
*         DCL IFDMSG53 EXT ENTRY;        /*MESSAGE MODULE             * 02520000
*  DCL 1 * BASED(R4),               /* MESSAGE ADDRESS                * 02530000
*        3 MSG1 PTR,                /* POINTER TO MESSAGE             * 02540000
*        3 MSG2 PTR,                     /* PTR TO IFD137I    @ZA15468* 02550000
*        3 MSG3 PTR,                     /* PTR TO IFD139D    @ZA15468* 02560000
*        3 MSG4 PTR,                     /* PTR TO IFD476I    @ZA15468* 02570000
*        3 MSG5 PTR;                     /* PTR TO IFD477I    @ZA15468* 02580000
*  DCL MSGSNS CHAR(12) BASED(R1+37);     /* SENSE DATA AREA     S21050* 02590000
*  DCL MSGCSW CHAR(14) BASED(R1+18);     /* CSW DATA AREA       S21050* 02600000
*  DCL MSGDEVAD CHAR(8) BASED(R1+39);    /*DEV ADDR AREA IN MSG S21050* 02610000
*         DCL MECB FIXED;                /* ECB FOR PWTOR             * 02620000
*         DCL INBUF1 CHAR(1);            /*BUFFER FOR REPLY           * 02630000
*         DCL 1 * BASED(R1),             /* PARMLIST FOR WTOR         * 02640000
*           3 LENGTH CHAR(1),                                           02650000
*           3 REPLYAD PTR(24),                                          02660000
*           3 ECBAD PTR;                                                02670000
*                                                                       02680000
*  DCL MSG4DVAD CHAR(8) BASED(R1+22);    /* DEVICE ADDRESS IN @ZA15468* 02690000
*                                        /* MESSAGE IFD476I   @ZA15468* 02700000
*                                                                       02710000
*  DCL 1 OUTBUFRI CHAR(13),         /* OUTPUT BUFFER                  * 02720000
*        3 SNSOUT CHAR(6),          /* SENSE DATA TO BE CONVERTED     * 02730000
*        3 CSWOUT CHAR(7);          /* CSW DATA TO BE CONVERTED       * 02740000
*  DCL 1 INBUF CHAR(26),            /* INPUT BUFFER                   * 02750000
*        3 SNSIN CHAR(12),          /* CONVERTED SENSE DATA           * 02760000
*        3 CSWIN CHAR(14);          /* CONVERTED CSW DATA             * 02770000
*  DCL OLTTAB PTR GENERATED;             /* LINK TABLE           M4506* 02780000
*  DCL OLTTAB2 PTR BASED(ADDR(OLTTAB)+4); /* WAITIO INDICATOR    M4506* 02790000
*  DCL TAB28 PTR(31) GENERATED;     /* NEW MACRO ENTRY POINT          * 02800000
*  DCL CNVRT CHAR(14) GENERATED;    /* CONVERT PARAMETER LIST         * 02810000
*             DCL UNICTR CHAR(1) GENERATED;                             02820000
*         DCL DEVTAB CHAR(576) GENERATED;    /*DEVICE TABLE           * 02830000
*         DCL TPSAVE CHAR(4) GENERATED;  /* ID OF OLT BEING RUNOX01386* 02840000
*         DCL WRTBOTH LABEL GENERATED;      /*CCW LABEL               * 02850000
*         DCL 1 VOL1BUF CHAR(80),        /*OUTPUT BUFFER FOR VOL1 REC * 02860000
*           3 VOLNAME CHAR(10),                                         02870000
*           3 *(70) CHAR(1) INIT((70)'0');                              02880000
*         DCL 1 HDR1BUF CHAR(80),        /*OUTPUT BUFFER FOR HDR1 REC * 02890000
*           3 HDRNAME CHAR(4) INIT('HDR1'),                             02900000
*           3 *(76) CHAR(1) INIT((76)'0');                              02910000
*                                                                       02920000
*  /******************************************************************* 02930000
*  /*                                                                 * 02940000
*  /*     PARAMETER LIST FOR SVC59                                    * 02950000
*  /*                                                                 * 02960000
*  /******************************************************************* 02970000
*                                                                       02980000
*  DCL 1 * BASED(ADDR(ROPT)),            /*                     X02906* 02990000
*         3 UCBADDR CHAR(4),             /* UCB ADDR OF DEV     X02906* 03000000
*         3 FLAGS CHAR(4),               /*                     X02906* 03010000
*           5 SVCFLG CHAR(1),            /* FIRST FLAG BYTE     X02906* 03020000
*           5 * CHAR(3);                 /* N/A                 X02906* 03030000
*  DCL HCODE CHAR(1) BASED(84);          /* FUNC 21 SVC CODE #  X02906* 03040000
*                                                                       03050000
*          R4=ADDR(IFDMSG53);            /* GET ADD OF MSG53  @ZA15468* 03060000
         L     @3,@V1              ADDRESS OF IFDMSG53            0075  03070000
         LR    @4,@3                                              0075  03080000
*         R7  =  DEVTBPTR;         /* SET R 7 TO HEAD OF DEVTAB       * 03090000
         L     @7,DEVTBPTR                                        0076  03100000
*             DO R5=UNICTR TO 1 BY -1;                                  03110000
         SR    @5,@5                                              0077  03120000
         IC    @5,UNICTR                                          0077  03130000
         LTR   @5,@5                                              0077  03140000
         BC    12,@DO9FE                                          0077  03150000
*          R8=UCBAD;                     /* GET ADD OF UCB    @ZA15468* 03160000
@DO9FF   L     @8,8(0,@7)                                         0078  03170000
*          IF CLASS='08'X &              /* IF THE DEVICE IS  @ZA15468* 03180000
*             TYPE='42'X THEN            /* AN MSS, CHECK TO  @ZA15468* 03190000
         CLI   18(@8),X'08'                                       0079  03200000
         BC    07,@9FB                                            0079  03210000
         CLI   19(@8),X'42'                                       0079  03220000
         BC    07,@9FA                                            0079  03230000
*               DO;                      /* SEE HOW IT WAS    @ZA15468* 03240000
*                 IF INITSW='0'B |       /* INITIALIZED. IF   @ZA15468* 03250000
*                    FINITSW='1'B THEN   /* FUNCTIONALLY OR   @ZA15468* 03260000
         TM    A00044,B'00100000'                                 0081  03270000
         BC    08,@9F9                                            0081  03280000
         TM    A00044,B'10000000'                                 0081  03290000
         BC    12,@9F8                                            0081  03300000
*                   GO TO INCRPTR;       /* NOT, GO           @ZA15468* 03310000
         BC    03,INCRPTR                                         0082  03320000
*                                        /* AHEAD NORMALLY.   @ZA15468* 03330000
*                 R1=MSG4;               /* ELSE,DIAGNOSTICALLY       * 03340000
@9F8     L     @1,12(0,@4)                                        0083  03350000
*                 MSG4DVAD=DEVADEB;      /* TELL THE CE.      @ZA15468* 03360000
         MVC   22(8,@1),0(@7)                                     0084  03370000
*                 GEN(PWTO REG=(1));     /*                   @ZA15468* 03380000
         PWTO REG=(1)                                                   03390000
         DS    0H                                                       03400000
*                 R1=MSG5;               /* TELL HOW TO CLEAR @ZA15468* 03410000
         L     @1,16(0,@4)                                        0086  03420000
*                 GEN(PWTO REG=(1));     /* IT.               @ZA15468* 03430000
         PWTO REG=(1)                                                   03440000
         DS    0H                                                       03450000
*                 GO TO INCRPTR;         /*                   @ZA15468* 03460000
         BC    15,INCRPTR                                         0088  03470000
*               END;                     /*                   @ZA15468* 03480000
*         IF TPSAVE='SOSP' THEN          /* IS THIS SOSP       OX01386* 03490000
@9FA     EQU   *                                                  0090  03500000
@9FB     CLC   TPSAVE(4),@C5                                      0090  03510000
*           GO TO RTRNWT;                /* YES, DONT RESTORE  OX01386* 03520000
         BC    08,RTRNWT                                          0091  03530000
*                                        /* TAPE LABEL.        OX01386* 03540000
*         IF STDLABL='1'B THEN                                          03550000
         TM    13(@7),B'00010000'                                 0092  03560000
*           GOTO WRLAB;                  /*GO WRITE LABEL             * 03570000
         BC    01,WRLAB                                           0093  03580000
*  RTRNWT:                                                              03590000
*                                                                       03600000
*         IF TAPEBIT^='1'B THEN          /* SET UCB NOTRDY FLG? X02906* 03610000
RTRNWT   TM    14(@7),B'00010000'                                 0094  03620000
*           GOTO INCRPTR;                /* NO                  X02906* 03630000
         BC    12,INCRPTR                                         0095  03640000
*  ROPT= UCBAD;                          /*UCB ADDR             X02906* 03650000
         MVC   ROPT(4),8(@7)                                      0096  03660000
*  SVCFLG= '40'X;                        /* RESET NOTRDY FLG    X02906* 03670000
         MVI   A00050+4,X'40'                                     0097  03680000
*  VID= MID1;                            /* MY ID IN SVC PLIST  X02906* 03690000
         MVC   VID(2),MID1                                        0098  03700000
*  R0= ADDR(ROPT);                       /* SVC PLIST ADDRESS   X02906* 03710000
         LA    @0,ROPT                                            0099  03720000
*  R1= ADDR(HCODE);                      /* FUNC 21 SVC CODE #  X02906* 03730000
         LA    @1,HCODE                                           0100  03740000
*  GEN(SVC 59);                          /* ISSUE SVC 59        X02906* 03750000
         SVC 59                                                         03760000
         DS    0H                                                       03770000
*                                                                       03780000
*  INCRPTR:                              /*                     X02906* 03790000
*         R7=R7 + TABLNGTH;              /* INCREMENT DEVTAB PTR 21050* 03800000
INCRPTR  AH    @7,TABLNGTH                                        0102  03810000
*                                        /* TO NEXT ENTRY        21050* 03820000
*         END;                                                          03830000
*         RETURN;                                                       03840000
         BCT   @5,@DO9FF                                          0103  03850000
         BC    15,@EL01                                           0104  03860000
*                                                                       03870000
*  WRLAB:                                                               03880000
*                                                                       03890000
*  /******************************************************************* 03900000
*  /*                                                                 * 03910000
*  /*                          SET UP FOR EXIO                        * 03920000
*  /*                                                                 * 03930000
*  /******************************************************************* 03940000
*         EFCTRCB = EFCTRCB&&EFCTRCB; /* CLEAR EFFECTOR CONTROL BLOCK * 03950000
WRLAB    XC    EFCTRCB(20),EFCTRCB                                0105  03960000
*         VOLNAME=VOL;             /*PUT VOL SER # IN OUTPUT BUFFER   * 03970000
         MVC   VOL1BUF(10),16(@7)                                 0106  03980000
*         FILEMSK = MODESV;          /* SET FILE MODE FOR DRIVE YM5401* 03990000
         MVC   FILEMSK(1),30(@7)                                  0107  04000000
*         CCWPTR = ADDR(WRTBOTH);       /* SET POINTER TO CCWS  Y02906* 04010000
         LA    @F,WRTBOTH                                         0108  04020000
         ST    @F,CCWPTR                                          0108  04030000
*         DVTPTR = R7;                  /* SET POINTER TO DEVTABY02906* 04040000
         ST    @7,DVTPTR                                          0109  04050000
*         FLGA = '00'X;                 /* SET FLG TO ZERO      Y02906* 04060000
         MVI   FLGA,X'00'                                         0110  04070000
*         INTCALL = '1'B;               /* SET INTERNAL CALL    Y02906* 04080000
         OI    FLG2,B'10000000'                                   0111  04090000
*         CLRTECB = CLRTECB &&CLRTECB;  /* CLEAR TECB FOR IO    Y02906* 04100000
         XC    TECB+6(39),TECB+6                                  0112  04110000
*         OUTBUFRI = OUTBUFRI &&OUTBUFRI;/* SET FEILD TO ZEROS  Y02906* 04120000
         XC    OUTBUFRI(13),OUTBUFRI                              0113  04130000
*         BYPASS = '1'B;                 /* SET BYPASS PREFIX SWY02906* 04140000
         OI    FLG1A,B'10000000'                                  0114  04150000
*         SNSCNT = '18'X;                /* SET SENSE COUNT     Y02906* 04160000
         MVI   SNSCNT,X'18'                                       0115  04170000
*         TECBPTRX = ADDR(TECB);         /* SET ADDR TECB       Y02906* 04180000
         LA    @F,TECB                                            0116  04190000
         ST    @F,TECBPTRX                                        0116  04200000
*         CDSPTR = ADDR(ADRHEX);        /* SET ADDR OF CDS DEV  Y02906* 04210000
         LA    @F,32(0,@7)                                        0117  04220000
         ST    @F,WAITLST+8                                       0117  04230000
*         R15 = IORTNADR;               /* GET PTR OF IO EFFECTRY02906* 04240000
         L     @F,IORTNADR                                        0118  04250000
*         GEN(BALR  14,15);             /* GO TO IO EFFECTOR    Y02906* 04260000
         BALR  14,15                                                    04270000
         DS    0H                                                       04280000
*         GEN(LTR   R15,R15);           /* IF EXIO FAILED       Y02906* 04290000
         LTR   R15,R15                                                  04300000
         DS    0H                                                       04310000
*         GEN(BNZ   RSTORE1);           /* GO PUT OUT MSG       Y02906* 04320000
         BNZ   RSTORE1                                                  04330000
         DS    0H                                                       04340000
*         R1 = ADDR(WAITLST);           /* GET POINTER FOR WAIT Y02906* 04350000
         LA    @1,WAITLST                                         0122  04360000
*         R14 = ADDR(STATS);            /* GET WAIT RETURNADDR  Y02906* 04370000
         LA    @E,STATS                                           0123  04380000
*         R15 = TAB28;                   /* GET TRANS MGR ENTRY Y02906* 04390000
         L     @F,TAB28                                           0124  04400000
*         GO TO R15;                    /* GO TO THE WAIT MOD   Y02906* 04410000
         BCR   15,@F                                              0125  04420000
*                                       /* GO TO WAITIO         Y02906* 04430000
*       STATS:                          /* WAIT RETURN POINT    Y02906* 04440000
*         GEN(LTR   R15,R15);           /* WAS HE SUCCESSFUL    Y02906* 04450000
STATS    LTR   R15,R15                                                  04460000
         DS    0H                                                       04470000
*         GEN(BNZ   RSTORE1);           /* IF NOT GO PUT MSG    Y02906* 04480000
         BNZ   RSTORE1                                                  04490000
         DS    0H                                                       04500000
*    FILMSK='1'B;                                                       04510000
         OI    A00000+1,B'00001000'                               0128  04520000
*         PROTECT='0'B;                  /* CLEAR BIT           S21050* 04530000
         NI    A00000,B'10111111'                                 0129  04540000
*  IF EXIOK^='0C'X THEN                  /* CHECK EXIO RUN       M4506* 04550000
         CLI   TECB+16,X'0C'                                      0130  04560000
*    GOTO WRTAPE;                        /* UNSUCCESSFUL         M4506* 04570000
*         GOTO RTRNWT;                   /*CHECK NEXT DEVICE          * 04580000
         BC    08,RTRNWT                                          0132  04590000
*  WRTAPE:                                                              04600000
*  R1=MSG1;                         /* POINTER TO MESSAGE             * 04610000
WRTAPE   L     @1,0(0,@4)                                         0133  04620000
*         MSGDEVAD=DEVADEB;              /*PUT UNIT ADDR IN MESSAGE   * 04630000
         MVC   39(8,@1),0(@7)                                     0134  04640000
*         GEN(PWTO REG=(1));             /*PRINT MESSAGE TO OPERATOR  * 04650000
         PWTO REG=(1)                                                   04660000
         DS    0H                                                       04670000
*  /******************************************************************* 04680000
*  /*                                                                 * 04690000
*  /*                     CONVERT SENSE/CSW DATA                      * 04700000
*  /*                                                                 * 04710000
*  /******************************************************************* 04720000
*  SNSOUT=SNS1;                     /* SENSE DATA TO BE CONVERTED     * 04730000
         MVC   OUTBUFRI(6),TECB+23                                0136  04740000
*  CSWOUT=CSW1;                     /* CSW DATA TO BE CONVERTED       * 04750000
         MVC   OUTBUFRI+6(7),TECB+12                              0137  04760000
*  R1=ADDR(CNVRT);                  /* GET ADDR OF CONVERT PARMLIST   * 04770000
         LA    @1,CNVRT                                           0138  04780000
*  R15=TAB28;                       /* GET ENTRY POINT ADDRESS        * 04790000
         L     @F,TAB28                                           0139  04800000
*  GEN(BALR R14,R15);               /* EXECUTE CONVERT MODULE         * 04810000
         BALR R14,R15                                                   04820000
         DS    0H                                                       04830000
*  /******************************************************************* 04840000
*  /*                                                                 * 04850000
*  /*                     PRINT MESSAGE IFD137I                       * 04860000
*  /*                                                                 * 04870000
*  /******************************************************************* 04880000
*  R1=MSG2;                         /* POINTER TO MESSAGE             * 04890000
         L     @1,4(0,@4)                                         0141  04900000
*  MSGSNS=SNSIN;                    /* PUT SENSE DATA IN MSG3         * 04910000
         MVC   37(12,@1),INBUF                                    0142  04920000
*  MSGCSW=CSWIN;                    /* PUT CSW DATA IN MSG3           * 04930000
         MVC   18(14,@1),INBUF+12                                 0143  04940000
*  GEN    (PWTO REG=(1));           /* PRINT MESSAGE                  * 04950000
         PWTO REG=(1)                                                   04960000
         DS    0H                                                       04970000
*         /************************************************************ 04980000
*         /*                                                          * 04990000
*         /*        PRINT MESSAGE IFD139D                             * 05000000
*         /*                                                          * 05010000
*         /************************************************************ 05020000
*  RSTORE1:                                                             05030000
*         R4=ADDR(IFDMSG53);             /*ADDR OF MESSAGE MODULE     * 05040000
RSTORE1  L     @3,@V1              ADDRESS OF IFDMSG53            0145  05050000
         LR    @4,@3                                              0145  05060000
*         MECB=0;                        /* CLEAR ECB                 * 05070000
         SR    @F,@F                                              0146  05080000
         ST    @F,MECB                                            0146  05090000
*         R1=MSG3;                       /*POINTER TO MESSAGE         * 05100000
         L     @1,8(0,@4)                                         0147  05110000
*         LENGTH='01'X;                  /*LENGTH OF RESPONSE         * 05120000
         MVI   0(@1),X'01'                                        0148  05130000
*         INBUF1=' ';                    /*CLEAR INBUF1               * 05140000
         MVI   INBUF1,C' '                                        0149  05150000
*         REPLYAD=ADDR(INBUF1);                                         05160000
         LA    @F,INBUF1                                          0150  05170000
         ST    @F,@TEMP4                                          0150  05180000
         MVC   1(3,@1),@TEMP4+1                                   0150  05190000
*         ECBAD=ADDR(MECB);              /*ADDRESS OF ECB             * 05200000
         LA    @F,MECB                                            0151  05210000
         ST    @F,4(0,@1)                                         0151  05220000
*         GEN(PWTOR REG=(1));                                           05230000
         PWTOR REG=(1)                                                  05240000
         DS    0H                                                       05250000
*         IF INBUF1 = 'R' THEN                                          05260000
         CLI   INBUF1,C'R'                                        0153  05270000
*           GOTO WRLAB;                  /*RETRY                      * 05280000
         BC    08,WRLAB                                           0154  05290000
*         IF INBUF1^='P' THEN                                           05300000
         CLI   INBUF1,C'P'                                        0155  05310000
*           GOTO RSTORE1;                /* REPEAT MESSAGE            * 05320000
         BC    07,RSTORE1                                         0156  05330000
*         PROTECT='0'B;                  /* CLEAR BIT           A50386* 05340000
         NI    A00000,B'10111111'                                 0157  05350000
*         GOTO RTRNWT;                   /*CHECK NEXT DEVICE          * 05360000
         BC    15,RTRNWT                                          0158  05370000
*         END;                                                          05380000
@EL01    L     @D,4(0,@D)                                         0159  05390000
         LM    @E,@C,12(@D)                                       0159  05400000
         BCR   15,@E                                              0159  05410000
@DATA1   EQU   *                                                        05420000
@0       EQU   00                  EQUATES FOR REGISTERS 0-15           05430000
@1       EQU   01                                                       05440000
@2       EQU   02                                                       05450000
@3       EQU   03                                                       05460000
@4       EQU   04                                                       05470000
@5       EQU   05                                                       05480000
@6       EQU   06                                                       05490000
@7       EQU   07                                                       05500000
@8       EQU   08                                                       05510000
@9       EQU   09                                                       05520000
@A       EQU   10                                                       05530000
@B       EQU   11                                                       05540000
@C       EQU   12                                                       05550000
@D       EQU   13                                                       05560000
@E       EQU   14                                                       05570000
@F       EQU   15                                                       05580000
@V1      DC    V(IFDMSG53)                                              05590000
         DS    0F                                                       05600000
@C5      DC    C'SOSP'                                                  05610000
         DS    0D                                                       05620000
@DATA    EQU   *                                                        05630000
@SAV001  EQU   @DATA+00000000      72 BYTE(S) ON WORD                   05640000
Y        EQU   00000000            FULLWORD INTEGER                     05650000
R0       EQU   00000000            FULLWORD POINTER REGISTER            05660000
R1       EQU   00000001            FULLWORD POINTER REGISTER            05670000
R2       EQU   00000002            FULLWORD POINTER REGISTER            05680000
R3       EQU   00000003            FULLWORD POINTER REGISTER            05690000
R4       EQU   00000004            FULLWORD POINTER REGISTER            05700000
R5       EQU   00000005            FULLWORD POINTER REGISTER            05710000
R6       EQU   00000006            FULLWORD POINTER REGISTER            05720000
R7       EQU   00000007            FULLWORD POINTER REGISTER            05730000
R8       EQU   00000008            FULLWORD POINTER REGISTER            05740000
R9       EQU   00000009            FULLWORD POINTER REGISTER            05750000
R10      EQU   00000010            FULLWORD POINTER REGISTER            05760000
R11      EQU   00000011            FULLWORD POINTER REGISTER            05770000
R12      EQU   00000012            FULLWORD POINTER REGISTER            05780000
R13      EQU   00000013            FULLWORD POINTER REGISTER            05790000
R14      EQU   00000014            FULLWORD POINTER REGISTER            05800000
R15      EQU   00000015            FULLWORD POINTER REGISTER            05810000
WAITLST  EQU   @DATA+00000072      16 BYTE(S) ON WORD                   05820000
         ORG   WAITLST+00000000                                         05830000
XMGR     EQU   *                   1 BYTE(S)                            05840000
         DC    X'00'                                                    05850000
LVL      EQU   *                   1 BYTE(S)                            05860000
         DC    X'02'                                                    05870000
MODID    EQU   *                   2 BYTE(S)                            05880000
         DC    C'36'                                                    05890000
TECBPTR  EQU   *                   FULLWORD POINTER                     05900000
         DC    AL4(TECB)                                                05910000
CDSPTR   EQU   *                   FULLWORD POINTER                     05920000
         DC    AL4(0)                                                   05930000
FLG      EQU   *                   8 BIT(S) ON BYTE                     05940000
         DC    X'80'                                                    05950000
WAITYES  EQU   WAITLST+00000012    1 BIT(S)                             05960000
TIME     EQU   *                   2 BYTE(S)                            05970000
         DC    X'001E'                                                  05980000
A00019   EQU   00000000            36 BYTE(S) ON WORD                   05990000
DEVADEB  EQU   A00019+00000000     8 BYTE(S)                            06000000
UCBAD    EQU   A00019+00000008     FULLWORD POINTER                     06010000
DEVFLG1  EQU   A00019+00000012     1 BYTE(S)                            06020000
STATUS   EQU   A00019+00000012     1 BIT(S)                             06030000
PRIMARY  EQU   A00019+00000012     1 BIT(S)                             06040000
DPDONE   EQU   A00019+00000012     1 BIT(S)                             06050000
A00020   EQU   A00019+00000012     3 BIT(S)                             06060000
FILEPROT EQU   A00019+00000012     1 BIT(S)                             06070000
A00021   EQU   A00019+00000012     1 BIT(S)                             06080000
DEVFLG2  EQU   A00019+00000013     1 BYTE(S)                            06090000
A00022   EQU   A00019+00000013     3 BIT(S)                             06100000
STDLABL  EQU   A00019+00000013     1 BIT(S)                             06110000
A00023   EQU   A00019+00000013     4 BIT(S)                             06120000
DEVFLG3  EQU   A00019+00000014     1 BYTE(S)                            06130000
A00024   EQU   A00019+00000014     3 BIT(S)                             06140000
TAPEBIT  EQU   A00019+00000014     1 BIT(S)                             06150000
A00025   EQU   A00019+00000014     4 BIT(S)                             06160000
DEVFLG4  EQU   A00019+00000015     1 BYTE(S)                            06170000
TAPELABL EQU   A00019+00000016     16 BYTE(S)                           06180000
VOL      EQU   A00019+00000016     10 BYTE(S)                           06190000
HDR      EQU   A00019+00000026     4 BYTE(S)                            06200000
MODESV   EQU   A00019+00000030     1 BYTE(S)                            06210000
A00026   EQU   A00019+00000031     1 BYTE(S)                            06220000
ADRHEX   EQU   A00019+00000032     4 BYTE(S)                            06230000
A00027   EQU   A00019+00000032     2 BYTE(S)                            06240000
HEXAD    EQU   A00019+00000034     2 BYTE(S)                            06250000
A00028   EQU   00000000            24 BYTE(S) ON WORD                   06260000
UCBOB    EQU   A00028+00000000     24 BYTE(S)                           06270000
A00029   EQU   A00028+00000000     16 BYTE(S)                           06280000
MODEL    EQU   A00028+00000016     1 BYTE(S)                            06290000
FEATURES EQU   A00028+00000017     1 BYTE(S)                            06300000
CLASS    EQU   A00028+00000018     1 BYTE(S)                            06310000
TYPE     EQU   A00028+00000019     1 BYTE(S)                            06320000
TECB     EQU   @DATA+00000088      45 BYTE(S) ON WORD                   06330000
         ORG   TECB+00000000                                            06340000
FLDCNT   EQU   *                   1 BYTE(S)                            06350000
         DC    X'01'                                                    06360000
FLDSIZE  EQU   *                   1 BYTE(S)                            06370000
         DC    X'0C'                                                    06380000
SOMETNG  EQU   *                   1 BYTE(S)                            06390000
         DC    X'00'                                                    06400000
SNSSIZE  EQU   *                   1 BYTE(S)                            06410000
         DC    X'18'                                                    06420000
FLG1     EQU   *                   1 BYTE(S)                            06430000
         DC    X'00'                                                    06440000
SNSCNTTB EQU   *                   1 BYTE(S)                            06450000
         DC    X'01'                                                    06460000
CLRTECB  EQU   TECB+00000006       39 BYTE(S)                           06470000
CNTSNS   EQU   *                   1 BYTE(S)                            06480000
         DC    X'00'                                                    06490000
CNTINT   EQU   *                   1 BYTE(S)                            06500000
         DC    X'00'                                                    06510000
CCP      EQU   TECB+00000008       1 BYTE(S)                            06520000
A00030   EQU   TECB+00000009       3 BYTE(S)                            06530000
CSW1     EQU   TECB+00000012       8 BYTE(S)                            06540000
A00031   EQU   TECB+00000012       4 BYTE(S)                            06550000
STATUSX  EQU   TECB+00000016       2 BYTE(S)                            06560000
EXIOK    EQU   TECB+00000016       1 BYTE(S)                            06570000
A00032   EQU   TECB+00000016       6 BIT(S)                             06580000
UNITCK   EQU   TECB+00000016       1 BIT(S)                             06590000
UNITEXCP EQU   TECB+00000016       1 BIT(S)                             06600000
BYTE2    EQU   TECB+00000017       1 BYTE(S)                            06610000
A00033   EQU   TECB+00000017       1 BIT(S)                             06620000
INLENGTH EQU   TECB+00000017       1 BIT(S)                             06630000
A00034   EQU   TECB+00000017       6 BIT(S)                             06640000
A00035   EQU   TECB+00000018       2 BYTE(S)                            06650000
SENSE    EQU   TECB+00000020       24 BYTE(S)                           06660000
A00036   EQU   TECB+00000020       3 BYTE(S)                            06670000
SNS1     EQU   TECB+00000023       7 BYTE(S)                            06680000
SNSFLD   EQU   TECB+00000023       8 BIT(S)                             06690000
A00037   EQU   TECB+00000023       1 BIT(S)                             06700000
SNS2     EQU   TECB+00000023       1 BIT(S)                             06710000
A00038   EQU   TECB+00000024       2 BYTE(S)                            06720000
A00039   EQU   TECB+00000026       8 BIT(S)                             06730000
A00040   EQU   TECB+00000026       5 BIT(S)                             06740000
PEIND    EQU   TECB+00000026       1 BIT(S)                             06750000
A00041   EQU   TECB+00000027       2 BYTE(S)                            06760000
A00042   EQU   TECB+00000029       1 BYTE(S)                            06770000
A00043   EQU   TECB+00000029       4 BIT(S)                             06780000
BIT4     EQU   TECB+00000029       1 BIT(S)                             06790000
A00046   EQU   00000000            20 BYTE(S) ON WORD                   06800000
MSG1     EQU   A00046+00000000     FULLWORD POINTER                     06810000
MSG2     EQU   A00046+00000004     FULLWORD POINTER                     06820000
MSG3     EQU   A00046+00000008     FULLWORD POINTER                     06830000
MSG4     EQU   A00046+00000012     FULLWORD POINTER                     06840000
MSG5     EQU   A00046+00000016     FULLWORD POINTER                     06850000
MSGSNS   EQU   00000037            12 BYTE(S)                           06860000
MSGCSW   EQU   00000018            14 BYTE(S)                           06870000
MSGDEVAD EQU   00000039            8 BYTE(S)                            06880000
MECB     EQU   @DATA+00000136      FULLWORD INTEGER                     06890000
INBUF1   EQU   @DATA+00000140      1 BYTE(S)                            06900000
A00047   EQU   00000000            8 BYTE(S) ON WORD                    06910000
LENGTH   EQU   A00047+00000000     1 BYTE(S)                            06920000
REPLYAD  EQU   A00047+00000001     3  BYTE  POINTER ON WORD+1           06930000
ECBAD    EQU   A00047+00000004     FULLWORD POINTER                     06940000
MSG4DVAD EQU   00000022            8 BYTE(S)                            06950000
OUTBUFRI EQU   @DATA+00000141      13 BYTE(S)                           06960000
SNSOUT   EQU   OUTBUFRI+00000000   6 BYTE(S)                            06970000
CSWOUT   EQU   OUTBUFRI+00000006   7 BYTE(S)                            06980000
INBUF    EQU   @DATA+00000154      26 BYTE(S)                           06990000
SNSIN    EQU   INBUF+00000000      12 BYTE(S)                           07000000
CSWIN    EQU   INBUF+00000012      14 BYTE(S)                           07010000
VOL1BUF  EQU   @DATA+00000180      80 BYTE(S)                           07020000
VOLNAME  EQU   VOL1BUF+00000000    10 BYTE(S)                           07030000
         ORG   VOL1BUF+00000010                                         07040000
A00048   EQU   *                   70*1 BYTE(S)                         07050000
         DC    00070C'0'                                                07060000
HDR1BUF  EQU   @DATA+00000260      80 BYTE(S)                           07070000
HDRNAME  EQU   *                   4 BYTE(S)                            07080000
         DC    C'HDR1'                                                  07090000
A00049   EQU   *                   76*1 BYTE(S)                         07100000
         DC    00076C'0'                                                07110000
HCODE    EQU   00000084            1 BYTE(S)                            07120000
         ORG   @DATA                                                    07130000
         DS    00000344C                                                07140000
@TEMPS   DS    0F                                                       07150000
@TEMP4   DC    F'0'                                                     07160000
WRTBOTH  CCW   7,*,X'60',1              REWIND                          07170000
         CCW   1,VOL1BUF,X'60',80       WRITE VOL1 RECORD               07180000
         CCW   1,HDR1BUF,X'60',80       WRITE HDR1 RECORD               07190000
         CCW   04,*,X'30',1  FORCE CHAN END AND DEV END, NO DATA TRANS  07200000
CNVRT    DC    B'00000000'         CONTROL PROGRAM FLAGS                07210000
         DC    AL1(2)              MACRO LEVEL                          07220000
         DC    CL2'41'             MACRO ID                             07230000
         DC    A(OUTBUFRI)                                              07240000
         DC    A(INBUF)                                                 07250000
         DC    AL2(13+32768)       COUNT AND TYPE INFORMATION           07260000
DSECT53  IFDCOM                                                         07270000
VID      EQU   WKSVC+00000002      2 BYTE(S)                            07280000
MID1     EQU   MCT+00000010        2 BYTE(S)                            07290000
FLG1A    EQU   FLGA+00000000       8 BIT(S) ON BYTE                     07300000
BYPASS   EQU   FLG1A+00000000      1 BIT(S)                             07310000
FLG2     EQU   FLGB+00000000       8 BIT(S) ON BYTE                     07320000
INTCALL  EQU   FLG2+00000000       1 BIT(S)                             07330000
MODEREQ  EQU   FLG2+00000000       1 BIT(S)                             07340000
A00000   EQU   CESWT+00000000      4 BYTE(S) ON WORD                    07350000
A00001   EQU   A00000+00000000     8 BIT(S)                             07360000
A00002   EQU   A00000+00000000     1 BIT(S)                             07370000
PROTECT  EQU   A00000+00000000     1 BIT(S)                             07380000
A00003   EQU   A00000+00000000     6 BIT(S)                             07390000
A00004   EQU   A00000+00000001     8 BIT(S)                             07400000
A00005   EQU   A00000+00000001     1 BIT(S)                             07410000
SEEK2321 EQU   A00000+00000001     1 BIT(S)                             07420000
SECONLOK EQU   A00000+00000001     1 BIT(S)                             07430000
A00006   EQU   A00000+00000001     1 BIT(S)                             07440000
FILMSK   EQU   A00000+00000001     1 BIT(S)                             07450000
T2321    EQU   A00000+00000001     1 BIT(S)                             07460000
ONLINEOK EQU   A00000+00000001     1 BIT(S)                             07470000
A00007   EQU   A00000+00000001     1 BIT(S)                             07480000
A00008   EQU   A00000+00000002     8 BIT(S)                             07490000
NDCFO    EQU   A00000+00000002     1 BIT(S)                             07500000
DPONDEV  EQU   A00000+00000002     1 BIT(S)                             07510000
A00009   EQU   A00000+00000002     1 BIT(S)                             07520000
CHANTEST EQU   A00000+00000002     1 BIT(S)                             07530000
A00010   EQU   A00000+00000002     1 BIT(S)                             07540000
A00011   EQU   A00000+00000002     1 BIT(S)                             07550000
TAPEHDR  EQU   A00000+00000002     1 BIT(S)                             07560000
DEVDPOK  EQU   A00000+00000002     1 BIT(S)                             07570000
A00012   EQU   A00000+00000003     8 BIT(S)                             07580000
A00013   EQU   A00000+00000003     1 BIT(S)                             07590000
BYPALDEV EQU   A00000+00000003     1 BIT(S)                             07600000
BYPDEV   EQU   A00000+00000003     1 BIT(S)                             07610000
A00014   EQU   A00000+00000003     1 BIT(S)                             07620000
SUSDEL   EQU   A00000+00000003     1 BIT(S)                             07630000
A00015   EQU   A00000+00000003     1 BIT(S)                             07640000
A00016   EQU   A00000+00000003     1 BIT(S)                             07650000
STDLAB   EQU   A00000+00000003     1 BIT(S)                             07660000
A00017   EQU   CESWT8+00000000     1 BYTE(S) ON WORD                    07670000
A00018   EQU   A00017+00000000     2 BIT(S)                             07680000
LETGO    EQU   A00017+00000000     1 BIT(S)                             07690000
A00044   EQU   MSSSTAT+00000000    1 BYTE(S)                            07700000
FINITSW  EQU   A00044+00000000     1 BIT(S)                             07710000
DINITSW  EQU   A00044+00000000     1 BIT(S)                             07720000
INITSW   EQU   A00044+00000000     1 BIT(S)                             07730000
A00045   EQU   A00044+00000000     5 BIT(S)                             07740000
OLTTAB2  EQU   OLTTAB+00000004     FULLWORD POINTER                     07750000
A00050   EQU   ROPT+00000000       8 BYTE(S) ON WORD                    07760000
UCBADDR  EQU   A00050+00000000     4 BYTE(S)                            07770000
FLAGS    EQU   A00050+00000004     4 BYTE(S)                            07780000
SVCFLG   EQU   A00050+00000004     1 BYTE(S)                            07790000
A00051   EQU   A00050+00000005     3 BYTE(S)                            07800000
@DATEND  EQU   *                                                        07810000
@9F9     EQU   INCRPTR                                                  07820000
@DO9FE   EQU   @EL01                                                    07830000
         END    ,(C'PL/S',1400,78116)                                   07840000
