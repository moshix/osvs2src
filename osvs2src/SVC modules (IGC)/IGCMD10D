         TITLE 'IGCMD10D - 3705 IPL - INITIALIZATION MODULE'            00050022
IGCMD10D CSECT                                                          00100022
*A000000-999999                                                @X26X5R0 00110012
*D148000-171500                                                @YA03836 00130056
*A210000                                                       @YA03836 00160056
*C066000                                                       @Y17XARS 00161000
*A066000                                                       @Y17XARS 00162000
*A080000                                                       @Y17XARS 00163000
*D081000                                                       @Y17XARS 00164000
*C085000                                                       @Y17XARS 00165000
*C087000                                                       @Y17XARS 00166000
*A088500                                                       @Y17XARS 00167000
*C089000                                                       @Y17XARS 00168000
*C095000                                                       @Y17XARS 00169000
*C098000                                                       @Y17XARS 00170000
*A114000                                                       @Y17XARS 00171000
*C117000-122000                                                @Y17XARS 00172000
*C128000                                                       @Y17XARS 00173000
*C135000                                                       @Y17XARS 00174000
*C141000                                                       @Y17XARS 00175000
*C220000                                                       @Y17XARS 00176000
*C272000                                                       @Y17XARS 00177000
*C273500                                                       @Y17XARS 00178000
*C276000                                                       @Y17XARS 00179000
*C283000                                                       @Y17XARS 00180000
*C297000                                                       @Y17XARS 00181000
*C297500                                                       @Y17XARS 00182000
*A297500                                                       @Y17XARS 00183000
*C117000,A118000,A398000,D120000,D128000                       @Y17XARS 00191000
*A297500                                                       @OY19803 00191186
*A001911                                                       @OZ35627 00191927
*C223000                                                       @OZ35627 00192727
*                                                                       00193527
* $01=OZ41286 ETC2202 79.11.06 047252:                             @01A 00194327
* $02=OZ43079 ETC2202 79.11.06 047252:                             @02A 00195127
* $21=OZ49371 ETC2402 81.02.23 506174:                             @21A 00195927
* $22=OZ49826 ETC2402 81.02.23 506174:                             @22A 00196727
*                                                                       00198327
         SPACE                                                          00200022
************************START OF SPECFICATIONS************************* 00300000
*                                                                     * 00360000
* $MOD(IGCMD10D) COMP(R@) PROD(TCAM):                             @01C* 00420012
*                                                                     * 00480000
* DESCRIPTIVE NAME = 3705 IPL INITIALIZATION MODULE                   * 00540000
*                                                                     * 00600000
* COPYRIGHT = NONE                                                    * 00660000
*                                                                     * 00720000
* STATUS = VERSION 10.0                                               * 00780000
*                                                                     * 00840000
*    FUNCTION = IGCMD10D IS THE 1ST LOAD OF IPL PROPER. IT GAINS      * 00900000
*    CONTROL FROM THE COMMON IPL/DUMP MODULE IGCMH10D WHO OBTAINS A   * 01000022
*    WORKAREA.  IGCMD10D INITIALIZES THE WORKAREA AND CHECKS THE 3705 * 01100000
*    TTE FOR THE IPL LOAD MODULE NAME. IF NOT PRESENT IT XCTLS TO     * 01120000
*    IGCMI10D TO RESPOND IED163I 'IPL TERMINATED LOAD MODULE NAME NOT * 01140000
*    IN 3705 TTE. IF THE IPL LOAD MODULE NAME IS PRESENT              * 01160000
*    THE WORKAREA IS SETUP WITH THE LOAD MODULE NAME AND THE DECB TYPE* 01700022
*    VALUE. THE 3705 TTE IS NOW CHECKED TO SEE IF INITIAL TEST WAS    * 01800000
*    SPECIFIED AND THE INDICATION YES OR NO IS SET IN THE WORKAREA.   * 01900022
*    THE BLDLLIST IS SETUP IN THE WORKAREA AND THE DIAGNOSTIC MAXI AND* 02000022
*    MINI PHASE 1 NAMES ARE MOVED IN.   THE IOB IN THE 3705 LCB IS    * 02030000
*    INITIALIZED FOR CHANNEL I?O AND IPL REQUIRED, AND THE UCB        * 02060000
*    NAME ARE SETUP IN THE WORKAREA. NEXT THE 3705 UCB IS CHECKED FOR * 02400000
*    A MINI OR MAXI CHANNEL ADAPTER. IF MINI THE NO CHAINING BIT IS   * 02500022
*    SET IN THE CCW AND THE PHASE VECTOR TABLE IS SETUP WITH THE      * 02600022
*    MINI OR MAXI PHASE 1 ADDRESS. NEXT THE MINI OR MAXI PHASE 1      * 02700000
*    ROUTINES ARE LOADED INTO CORE AND THE ADDRESS OF PHASE 1 IS      * 02710000
*    INSERTED INTO THE PHASE TABLE.  NEXT THE PHASE 1 ROUTINE IS      * 02720000
*    LOADED AND ITS ADDRESS IS INSERTED INTO THE PHASE TABLE.  THE    * 02730000
*    LENGTH OF PHASE 2 IS INSERTED INTO PHASE 1. IF INITIAL TEST WAS  * 02740000
*    SELECTED, THE MEMBER NAME IFL3705D IS MOVED INTO THE BLDLLIST    * 02750000
*    AND A BLDL IS ISSUED.   IF THE BLDL FAILS, AN XCTL               * 02760000
*    IS DONE TO IGCMH10D TO WRITE OUT IPL TERMINATED -                * 02770000
*    BLDL FAILED. OTHERWISE THE 'FIND' ROUTINE IS ENTERED.            * 02780000
*    NEXT A TEST IS MADE TO SEE IF PART 2 IS BEING LOADED, IF YES,    * 03200000
*    XCTL IS ISSUED TO IGCME10D, OTHERWISE XCTL TO IGCMF10D.          * 03210000
*    IF INITIAL TEST IS NOT TO BE DONE, OR FOLLOWING INITIAL TEST     * 03220000
*    EXECUTION, A BIT IS SET IN PHASE 1 TO INDICATE INITIAL TEST WILL * 03230000
*    NOT BE LOADED AND INITIAL TEST IS SET IN THE WORKAREA.  THE      * 03240000
*    ADDRESS OF THE DCB CONTAINING THE LOAD MODULE IS OBTAINED AND    * 03250000
*    OPENED.  IF OPEN FAILS, AN XCTL TO IGCMI10D TO RESPOND IED165I   * 03260000
*    IPL TERMINATED.  OTHERWISE, THE LOAD MODULE NAME IS MOVED INTO   * 03270000
*    BLDLLIST AND A BLDL IS DONE.  IF BLDL FAILS, MESAGE IED165 IS    * 03280000
*    SENT AS DESCRIBED EARLIER.  OTHERWISE A FIND IS DONE AND THEN    * 03290000
*    XCTL IS DONE TO IGCMF10D (IF NOT ENTERED FROM IGCMF10D), OR TO   * 03300000
*    IGCME10D WITH 1 IN REG0                                          * 03310000
*                                                                     * 05200000
* NOTES = SEE BELOW                                                   * 05210000
*                                                                     * 05220000
*    DEPENDENCIES = EBCDIC CHARACTER CODE DEPENDENCIES - CORRECTABLE  * 05230000
*                   BY REASSEMBLY                                     * 05240000
*                                                                     * 05250000
*    RESTRICTIONS = NONE                                              * 05253000
*                                                                     * 05256000
*    REGISTER CONVENTIONS = R1 = OPCAVT                               * 05260000
*                           R3 = CURRENT ELEMENT                      * 05261000
*                           R4 = TCAM AVT                             * 05262000
*                           R7 = COMMON IPL/DUMP WORKAREA             * 05263000
*                           R5 = IPL WORKAREA 1                       * 05264000
*                           R6 = IPL WORKAREA 2                       * 05265000
*                           R11 = TRAILER                             * 05266000
*                                                                     * 05270000
*    PATCH LABEL = NONE                                               * 05300000
*                                                                     * 05310000
* MODULE TYPE = PROCEDURE                                             * 05320000
*                                                                     * 05330000
*    PROCESSOR = ASSEMBLER XF                                           05340000
*                                                                     * 05350000
*    MODULE SIZE =                                                    * 05360000
*                                                                     * 05370000
*    ATTRIBUTES = SERIALLY REUSABLE,REENTRANT,TRANSIENT TYPE 4,       * 05380000
*                 SUPERVISOR MODE                                     * 05385000
*                                                                     * 05390000
* ENTRY POINT = IGCMD10D                                              * 05400000
*                                                                     * 05410000
*    PURPOSE = SEE FUNCTION                                           * 05420000
*                                                                     * 05425000
*    LINKAGE = XCTL SF=(E,OPCXCTL)                                    * 05430000
*                                                                     * 05450000
* INPUT = R1 = OPCAVT ,OPCOPCE CONTAINS ADDRESS OF CURRENT ELEMENT    * 05460000
* OCTRUNIT CONTAINS ADDRESS OF A TRAILER ELEMENT, THE FIRST 4 BYTES   * 05460300
* OF OCMODNME CONTAINS THE ADDRESS OF THE COMMON IPL/DUMP WORKAREA    * 05460600
*                                                                     * 05470000
* OUTPUT = R0 = 0 XCTL TO IGCME10D TO READ RECORD, R1 = OPCAVT ADDRESS* 05480000
* AND OCTRTRN SET XCTL TO IGCME10D.  R1 = OPCAVT XCTL TO IGCMF10D     * 05482000
* TO ISSUE IPL COMMAND                                                * 05484000
*                                                                     * 05490000
* EXIT-NORMAL = IGCME10D IGCMF10D                                     * 05500000
*                                                                     * 05510000
* EXIT-ERROR = IGCMI10D                                               * 05520000
*                                                                     * 05530000
* EXTERNAL REFERENCES = SEE BELOW                                     * 05540000
*                                                                     * 05550000
*    ROUTINES = IEDQCA  OPEN ROUTINE                                  * 05560000
*               FIND ROUTINE                                          * 05565000
*                                                                     * 05570000
*    DATA AREAS = IPL/DUMP COMMON WORKAREA                            * 05580000
*                 IPL WORKAREA 1                                      * 05582000
*                 IPL WORKAREA 2                                      * 05584000
*                                                                     * 05590000
*    CONTROL BLOCKS = AVT, DCB, LCB, TTE, OPCAVT, OPCE, UCB, DECB,    * 05595000
*    IOB, ECB                                                         * 05610000
*                                                                     * 05650000
* TABLES = NONE                                                       * 05660000
*                                                                     * 05670000
* MACROS = LOAD XCTL BLDL                                             * 05680000
*                                                                     * 05690000
* CHANGE ACTIVITY = NONE                                              * 05700000
*                                                                     * 05710000
*************************END OF SPECIFICATIONS************************* 05720000
         EJECT                                                          06000022
         SPACE                                                          06100022
         USING IEDQOPCD,R2              OPCAVT BASE                     06200022
         USING IEDQOPCE,R3              OPCE  BASE                      06300022
         USING IEDQAVTD,R4              ADDRESSABILITY FOR AVT          06400022
         USING IEDCOM,R7                COMMON AREA BASE       @Y17XARS 06600000
         USING IEDOCTR,RB               TRAILER ADDRESSABILITY @Y17XARS 06650000
         SPACE 2                                                        06700022
         BALR  RC,0                     ESTABLISH                       06800022
         USING *,RC                     ADDRESSABILITY                  06900022
IGCMD10D IEDHJN  SKIPID                                                 07000000
         SPACE 5                                                        07400022
         LR    R2,R1                    SET BASE FOR OPCAVT             07500022
         L     R3,OPCCOPCE              ADDR CURRENT ELEMENT            07600022
         L     R4,OPCAVTPT              BASE FOR AVT                    07700022
         L     R7,OCMODNME              GET BASE FOR COMMON AREA        07800022
         LA    R5,COMCCWS               SET BASE FOR LWKAREA            07900022
         LA    R6,DATAOFF(R5)           SET BASE FOR DATADS             08000022
         L     RB,OCTRUNIT              SET BASE FOR TRAILER   @Y17XARS 08030000
         TM    OCTRSW,OCTRINMF          REENTERED FROM MF?     @Y17XARS 08060000
         BO    BLDL4LM                  YES- DO BLDL AND FIND FOR L.M.  08200022
         L     R9,OCTRDCB               GET DCB ADDR OF 3705   @Y17XARS 08500000
         ST    R9,FOUR(R5)              STORE IN LWKAREA                08600022
         L     R8,OCTRUCB               GET UCB FOR 3705       @Y17XARS 08700000
         ST    R8,EIGHT(R5)             STORE IN LWKAREA                08800022
         LA    R0,MSG163                ERROR MSG NUMBER                08850022
         USING IEDNCP,R8                SET BASE FOR DEVICE    @Y17XARS 08860000
*                                       DEP. SECTION OF TTE    @Y17XARS 08870000
         L     R8,OCTRDVD               LOAD BASE              @Y17XARS 08880000
         CLI   NCPTXID,BLANK            BLANKS-- NO NAME ?     @Y17XARS 08900000
         BE    OUT                      YES, EXIT TO MI TO FREE CORE    09000000
GETNAME  EQU   *                                                        09400022
         MVC   TWELVE(EIGHT,R5),NCPTXID  MOVE NAME INTO L-WRK  @Y17XARS 09500000
         MVC   DECBTYPE(TWO,R5),TYPE    INSERT TYPE VALUE IN DECB       09600022
         USING DATADS,R6                                                09700022
         LA    R6,DATAOFF(R5)           INSERT ADDR DATADS IN BASE REG. 09800022
         TM    NCPFLAG1,NCPBGUP         WAS BRINGUP SPECIFIED  @Y17XARS 09900000
         BNO   NOBRNGUP                 NO                              10000022
         OI    ZERO(R5),SETBRGUP        YES  SET BIT IN C-WRAREA        10100022
NOBRNGUP EQU   *                                                        10200022
*        THIS SECTION OF CODE INITIALIZES THE DATA DSECT USED BY        10300022
*        VARIOUS LOADS OF IPL TO SAVE AND MANIPULATE DATA. THE USING    10400022
*        STATEMENT (USING DATADS,REGISTER) SETS UP ADDRESSABILITY TO    10500022
*        THE 2ND WORKAREA AND PREFIXED BY THE 1ST WORKAREA.           * 10600000
         SPACE 3                                                        10800022
SETUP    EQU   *                                                        10900022
         MVC   N256HW(EIGHT),TN256HW    MOVE VALUES TO LWKAREA          11000022
         MVC   MAXLIN(EIGHT),TMAXLIN    SET UP BLDLLIST                 11100022
         MVI   MEMBER,AVTEBLNK          INSER A BLANK                   11200022
         MVC   MEMBER+ONE(SEVEN),MEMBER PROPAGATE BLANKS                11300022
         USING IEDQLCB,R7               LCB ADDRESSABILITY              11400022
         L     R7,OCTRLCB               GET ADDRESS OF 3705 LCB@Y17XARS 11405000
         MVC   LCBCCW3(SIXTEEN),TRNCCWLN INSERT CHANNEL PROG   @Y17XARS 11700000
*                                       IN LCB        @Y17XARS          11760000
         USING IEDQCCW,R1               CCW STRUC ADDRESSABIL  @Y17XARS 11820000
         LA    R1,LCBCCW2               SENSE COMMAND FIELD    @Y17XARS 11840000
         STCM  R1,SEVEN,LCBCCW4+ONE     STORE VALID ADDR IN NOP    @22A 11846627
*                                       CCW ADDRESS                @22A 11853227
         MVC   LCBCCW2(EIGHT),SENOPCD   INSERT SENSE CHAN PROG @Y17XARS 11860000
         LA    R3,LCBSENS0              ADDRESS IOB SENSE      @Y17XARS 11870000
         STCM  R3,7,CCWADDR             ADDRESS                @Y17XARS 11880000
         DROP  R1                                                       11940000
         LA    R3,LCBCCW2               ASSUME START ON SENSE  @Y17XARS 12120000
         TM    OCTRSW,OCTRBLST          IPL WITHOUT SENSE?     @Y17XARS 12140000
         BNO   SETUP2                   NO, START ON SENSE@Y17XARS      12200000
         LA    R3,LCBCCW3               YES, START ON IPL      @Y17XARS 12230000
SETUP2   EQU   *                                               @Y17XARS 12260000
         STCM  R3,7,LCBSTART            STORE CHAN PROG START ADDRESS   12300000
*                                       IN CSW                 @Y17XARS 12350000
         SPACE 3                                                        12400022
         SPACE 3                                                        12500022
LOADPHAS EQU   *                                                        12600022
         OI    SWITCH,ONIPL             INDICATE IPL REQUIRED           12700022
         SPACE                                                          12900022
INIT50   EQU   *                                                        13000022
         SPACE 3                                                        13100022
*    REGISTER 5 POINTS TO THE LOCAL WORKAREA AND REGISTER 6 POINTS    * 13200022
*    TO THE COMMON WORKAREA                                           * 13300022
         SPACE 3                                                        13400022
         L     R3,OCTRUCB               GET PTR TO UCB FROM    @Y17XARS 13500000
*                                       LOCAL WORKAREA                  13550000
         MVC   RNADR(THREE),UCBNAME(R3)   SAVE UCB NAME IN C-WK         13600022
INIT60   EQU   *                                                        13700022
         CLI   UCBCA(R3),MINICA         DOES THIS 3705 HAVE A MIMI CA   13800022
         BNE   INIT62                   NO ASSUME MAXI                  13900022
         OI    CASW,ONCA           INDICATE MINI FOR BRING UP.          14000022
         NI    LCBCCW3+FOUR,ONES-CHAIN  DON'T CHAIN FOR MINI   @Y17XARS 14100000
         LA    R7,MINIVT                YES ADJUST PHASE VECTOR         14200022
         B     INIT62AA                 CONTINUE                        14300022
INIT62   EQU   *                                                        14400022
         LA    R7,MAXIVT                GET MAXI PHASE V.T.             14500022
INIT62AA EQU   *                                                        14600022
         ST    R7,PHASPTR               SAVE THE PHASE PTR              14700022
         SPACE 5                                                        17200022
         SPACE 3                                                        17300022
PHASLOAD EQU   *                                                        17400022
         TM    SWITCH2,ONCA             MINI CHANNEL ?                  17500022
         BO    INIT76                   YES GO SET MINI                 17600022
         MVC   MEMBER(EIGHT),MXIBUPH    MODULE NAME                     17620000
         BAL   RE,BLDLSET               ISSUE BLDL FOR MODULE           17640000
         L     R1,TWENFOUR(R5)          GET ADD OF DCB FOR         @01A 17642012
*                                       3705 IPL                   @01A 17644012
         USING IHADCB,R1                                           @01A 17646012
         LOAD  DE=MEMBER,DCB=IHADCB                                @01A 17648012
         SH    R0,HFOUR                 SET BACK TO START          @01A 17650012
         ST    R0,ZERO(R7)              PUR ADD INPHASE TABLE      @01A 17652012
         LR    R1,R0                                               @01A 17654012
         NI    RNSWITCH(R1),ONES-SIXTBIT SET 18 BIT FLG IN PH 1    @01A 17656012
         DROP  R1                                                  @01A 17658012
         MVC   MEMBER(EIGHT),MXIBUPH+EIGHT MODULE NAME                  17660000
         BAL   RE,BLDLSET               ISSUE BLDL FOR MODULE           17680000
         MVC   MAXIBUPH(SIXTEEN),MXIBUPH INSERT NAME PHASE 1 AND 2      17700000
*                                       FOR MAXI C.A.                   17800000
         L     R1,TWENFOUR(R5)          GET ADDRESS OF DCB FOR     @01A 17810012
*                                       3705 IPL                   @01A 17820012
         USING IHADCB,R1                                           @01A 17830012
         LOAD  DE=MEMBER,DCB=IHADCB                                @01A 17840012
         ST    R0,FOUR(R7)              SET ADD OF PHASE 2         @01A 17850012
         DROP  R1                                                  @01C 17900012
         B     INIT77                   CONTINUE                        18000022
INIT76   EQU   *                                                        18100022
         MVC   MEMBER(EIGHT),TMIN       MODULE NAME                     18120000
         BAL   RE,BLDLSET               ISSUE BLDL FOR MODULE           18140000
         L     R1,TWENFOUR(R5)          GET ADD OF DCB FOR         @01A 18142012
*                                       3705 IPL                   @01A 18144012
         USING IHADCB,R1                                           @01A 18146012
         LOAD  DE=MEMBER,DCB=IHADCB                                @01A 18148012
         SH    R0,HFOUR                 SET BACK TO START          @01A 18150012
         ST    R0,ZERO(R7)              PUR ADD INPHASE TABLE      @01A 18152012
         LR    R1,R0                                               @01A 18154012
         NI    RNSWITCH(R1),ONES-SIXTBIT SET 18 BIT FLG IN PH 1    @01A 18156012
         DROP  R1                                                  @01A 18158012
         MVC   MEMBER(EIGHT),TMIN+EIGHT MODULE NAME                     18160000
         BAL   RE,BLDLSET               ISSUE BLDL FOR MODULE           18180000
         MVC   MAXIBUPH(SIXTEEN),TMIN   INSERT NAME OF PHASE 1 AND 2    18200000
*                                       FOR MINI C.A.                   18300000
         L     R1,TWENFOUR(R5)          GET ADDRESS OF DCB FOR     @01A 18310012
*                                       3705 IPL                   @01A 18320012
         USING IHADCB,R1                                           @01A 18330012
         LOAD  DE=MEMBER,DCB=IHADCB                                @01A 18340012
         ST    R0,FOUR(R7)              SET ADD OF PHASE 2         @01A 18350012
         DROP  R1                                                  @01C 18400012
INIT77   EQU   *                                                   @01C 18450012
         L     R1,ZERO(R7)              ADDRESS OF PHASE 1              20500000
         LR    R7,R0                                                    20600022
         MVC   RNPH2D(TWO,R1),TWO(R7)    SET PHASE 2 LENGTH IN          20700022
*                                       BRING-UP PHASE 1                20800022
         TM    ZERO(R5),SETBRGUP        BRING-UP REQUESTED              20900022
         BNO   INIT80                   NO; DO BLDL AND FIND FOR L.M.   21000022
         XC    MEMBER(FOURTY),MEMBER    ZERO OUT BLDL LIST     @YA03836 21007056
         MVC   MEMBER(EIGHT),DIAGMEM    MOVE IN ITEST PART 1   @YA03836 21014056
GETDCB   EQU   *                                               @YA03836 21021056
         LR    R3,RB                    SAVE TRAILER               @02A 21024012
         BAL   RE,BLDLPHS1              OPEN ITEST DCB         @YA03836 21028056
         SLR   RB,RB                    CLEAR REGISTER FOR IC      @21A 21028527
         IC    RB,OPCIPLCT              GET COUNT OF 3705'S        @21A 21029027
*                                       BEING IPL'D                @21A 21029527
         BCTR  RB,0                     DECREMENT BY ONE           @21A 21030027
         STC   RB,OPCIPLCT              UPDATE IPL COUNT           @21A 21030527
         LR    RB,R3                    RESTORE TRAILER            @02A 21031012
         BAL   RE,BLDLSET               ISSUE BLDL FOR BRINGUP @YA03836 21035056
         LA    RF,RALTTRK               LOAD AREA ADDRESS      @YA03836 21042056
         MVC   ZERO(FOUR,R1),ZERO(RF)   MOVE RELAD TO DCB      @YA03836 21049056
         USING IEDCOM,R7                                       @YM07698 21050000
         L     R3,OPCCOPCE              POINT TO OPCE          @YM07698 21051000
         L     R7,OCMODNME              COMMON WA BASE         @YM07698 21052000
         MVC   COMTTRZ(THREE),RALTTRK   SAVE TTR FOR POINT     @YM07698 21053000
         MVI   COMTTRZ+THREE,ZERO       CLEAR Z FIELD          @YM07698 21054000
         LR    R0,R1                    INDICATE C TYPE FIND   @YA03836 21056056
         L     RF,EIGHT4(R0,R1)         LOAD FIND ROUTINE ADDR @YA03836 21063056
         BAL   RE,FOUR(R0,RF)           LINK TO FIND ROUTINE   @YA03836 21070056
         CLC   MEMBER(EIGHT),DIAGMEM+EIGHT LOADING PART 2      @YA03836 21077056
         BE    GOTOME                   YES, EXIT TO SEND IT   @YA03836 21084056
         SPACE 3                                                        21100022
INIT78   EQU   *                                                        21200022
         SPACE 3                                                        21300022
*    XCTL TO THE WRITE MODULE TO ISSUE A SENSE CMD. LOAD PHASE 1      * 21400022
*    THEN WRITE WILL XCTL TO IGCME10D TO READ BRING-UP RECORDS. AFTER * 21500022
*     BRING-UP FINISHES SEND PHASE 2. THEN SEND L.M. IPL REQ. WILL    * 21600022
*    BE SET. OPCCOPCE POINTS TO A REAL OPCE OR AN LCB                 * 21700022
         SPACE 3                                                        21800022
GOTOWRTE EQU   *                                                        21900022
         MVC   OPCMODID,XCTLWRTE        XCTL TO IFLWRITE RTN   @Y17XARS 22000000
EXIT     EQU   *                                                        22100022
         LR    R1,R2                                                    22200022
         IEDXCTL                                               @OZ35627 22300012
         SPACE  3                                                       22400022
*    OPCCOPCE POINTS TO AN OPCE OR A L-WKAREA. IF AN OPCE HIGH ORDER  * 22500022
*    BIT ONLY IS ON. IF L-WKAREA THE TWO HIGH ORDER BITS ARE ON.      * 22600022
BLDL4LM  EQU   *                                                        22700022
         USING IEDQOPCE,R3              ADDRESSABILITY FOR OPCE         22800022
         CLI   DIAGIND,CHARN            INITIAL TEST PART 2 REQD.       22900000
         BNE   OVER                     NO CONTINUE                     23000000
         MVC   MEMBER(EIGHT),DIAGMEM+EIGHT MOVE IN INITIAL TEST         23100000
*                                       PART 2                          23200000
         MVI   DIAGIND,AVTEZERO         CLEAR INITIAL TEST INDICATOR    23300000
         B     GETDCB                   BRANCH TO OPEN DCBS             23400000
INIT80   EQU   *                        LINK TO INPUT RTN               23800022
         OI    NOBRUP(R1),ON            INDICATE BRING-UP WILL NOT BE   23900022
*                                       LOADED                          24000022
OVER     EQU   *                                                        24100022
         MVI   DIAGIND,CHARN            NO INITIAL TEST                 24200022
         XC    TXTLNGTH(TEN),TXTLNGTH   ZERO L.M. INDICATORS            24300022
         SPACE 5                                                        24400022
         L     R1,OPCIPLAD              GET DCB                         24500000
         LR    R3,RB                    SAVE TRAILER           @YM04661 24550000
         BAL   RE,SAVEADDR              OPEN THE DCB             S22024 24600022
         LR    RB,R3                    RESTORE TRAILER        @YM04661 24620000
         XC    MEMBER(FOURTY),MEMBER    ZERO OUT BLDLLIST               24650022
         MVC   MEMBER(EIGHT),TWELVE(R5)  SET MEMBER NAME                24700022
         SPACE 5                                                        24800022
         BAL   RE,BLDLSET               ISSUE BLDL AND DETERMINE        24900022
*                                       WHERE THE MODULE RESIDES        25000022
INIT85   EQU   *                        BLDL SUCCESSFUL NOW DO FIND     25100022
         TM    C,ALIASIND               IS THIS AN ALIAS?               25200022
         BNO   INIT86                   NO NORMAL                       25300022
         TM    ATTRIB,RENREUS           IS ALIAS RENT OR REUS?          25400022
         BZ    INIT86                   NO NORMAL                       25500022
         MVC   ENTRYPT+ONE(THREE),EPAALS GET THE ENTRY POINT            25600022
         B     INIT87                   CONTINUE                        25700022
INIT86   EQU   *                        MEMBER NAME                     25800022
         MVC   ENTRYPT+ONE(THREE),EPAMEM GET THE ENTRY POINT            25900022
INIT87   EQU   *                                                        26000022
         LA    RF,RALTTRK               GET AREA ADDRESS                26100022
         MVC   ZERO(FOUR,R1),ZERO(RF)   MOVE RELAD TO DCB               26200022
         L     R3,OPCCOPCE              OPCE ADDRESS           @YM07698 26220000
         L     R7,OCMODNME              COMMON WA BASE         @YM07698 26240000
         MVC   COMTTRZ(THREE),RALTTRK   SAVE TTR FOR POINT     @YM07698 26260000
         MVI   COMTTRZ+THREE,ZERO       CLEAR Z FIELD          @YM07698 26280000
         LR    R0,R1                                                    26300022
         L     RF,EIGHT4(R0,R1)                                         26400022
         BAL   RE,FOUR(R0,RF)           BRANCH                   S22024 26500000
** RETURN CODE ALWAYS ZERO FOR C-TYPE FIND  ***                         26600022
****************************************************************        26700022
         SPACE  3                                                       26800022
*    XCTL TO IGCME10D TO READ THE L.M. RECORDS IF NOTFIRST SET        * 26900000
         SPACE  3                                                       27000022
         TM    OCTRSW,OCTRINMF          ENTERED FROM IFLWRITE  @Y17XARS 27200000
         BNO   GOTOWRTE                 NO PREPARE TO XCTL TO IFLWRITE  27300022
         NI    OCTRSW,ONES-OCTRINMF     TURN OFF REENTERED FLAG@Y17XARS 27350000
GOTOME   EQU   *                                                        27370000
         LA    R0,ONE                   CONTROL CAME FROM 1ST LOAD      27400022
         MVC   OPCMODID,XCTLINPT        XCTL TO IFLINPUT       @Y17XARS 27600000
         B     EXIT                     PREPARE TO EXIT                 27700022
         DROP  R7                                              @YM04692 27750000
         SPACE  3                                                       27800022
OUT      EQU   *                                                        27900022
NORMAL   EQU   *                                                        28200022
         MVC   OPCMODID,XCTLMI          GO TO COMMON EXIT RTNE @Y17XARS 28300000
         B     EXIT                     BRANCH TO EXIT           S22024 28400000
         SPACE 3                                                        28500022
*    XCTL TO IGCMF10D TO SEND PHASE 1 AND PHASE 2 IF INITIAL          * 28600000
*    TEST IS NOT TO BE LOADED, OTHERWISE SEND INITIAL TEST, THEN      * 28700000
*    PHASE 2. THE NCP IS NOW SENT OVER.                               * 28800000
         SPACE 3                                                        29000022
BLDLSET  EQU   *                        SET UP FOR BLDL SVC             29100022
         LA    R0,BLDLIST               ADDR OF BLDL LIST IN C-WKAREA   29200022
         L     R1,TWENFOUR(R5)          GET ADDR OF DCB FOR 3705 IPL    29300022
         BLDL  (1),(0)                                                  29400000
         LTR   RF,RF                    SUCCESSFUL ?                    29500022
         L     R1,TWENFOUR(R5)          PICK UP DCB ADDR AGAIN          29600022
         BCR   EIGHT,RE                 YES- CONTINUE                   29700022
         OI    OCTRRTN,OCTRERI          SET IPL ERROR FLAG     @Y17XARS 29750000
         L     R3,OPCCOPCE              RESTORE OPCE ADDR      @OY19803 29760086
         MVI   OCSWITCH,OCIPLC          SET OCSWITCH TO IPL CMD@Y17XARS 29770000
         LA    R0,MSG165                NO - GET ERROR MSG NUMBER       29800022
         B     OUT                      PREPARE TO EXIT                 30000022
         SPACE 3                                                        30100022
BLDLPHS1 EQU   *                                                        30200022
         L     R1,OPCIPLAD              GET DCB                         30300000
         LA    R1,DCBOFF(R1)            2ND DCB ADDRESS                 30400022
         SPACE 3                                                        30500022
SAVEADDR EQU   *                                                        30600022
         ST    R1,TWENFOUR(R5)          SAVE DCB JUST FOUND             30700022
         LA    RD,REGSAVE(R5)           GET ADDR OF REG SAVEAREA        30800022
         LR    RA,R1                    SET UP REG 1 WITH DCB ADDR      30900022
         L     RF,OPCOPTLK              ADDR OF GETBLDL LIST            31000022
         LA    RF,ADDROPEN(RF)          PICKUP ADDR TO ADDR OF OPENCODE 31100022
*                                       IN IEDQCA RTN                   31200022
         L     RF,ZERO(RF)              ADDR OF OPEN CODE               31300022
         BR    RF                       BRANCH TO OPEN CODE IN IEDQCA   31400022
*                                       TO DETERMINE IF THE DCB FOR     31500022
*                                       IPL PROCESSING HAS BEEN OPENED  31600022
         SPACE 3                                                        31700022
         SPACE                                                          31800022
         SPACE                                                          31900022
         EJECT                                                          32000022
*************  LOCAL DATA FOR INIT ONLY ************************        32100022
         SPACE                                                          32200022
         SPACE 5                                                        32300022
DIAGMEM  DC    C'IFL3705D'              INITIAL TEST PART 1             32400000
         DC    C'IFL3705E'              INITIAL TEST PART 2             32500000
         SPACE 5                                                        32600022
         SPACE 5                                                        32700022
DELAY    EQU   X'32'                    OFFSET INTO WKAREA FOR TIME     32800000
*                                       TO WAIT                         32850000
*                                       TO WAIT FOR BOTH PARTS          32900022
*                                       OF INITIAL TEST TO RUN          33000022
TIME1    DC    H'0015'                  TIME FOR PART 1 TO RUN          33050000
         SPACE 5                                                        33100022
TMIN     DC    C'IFL3705A'              PHASE 1 RAS                     33200000
         DC    C'IFLLD1P2'              PHASE 2 NCP SUPPORT GROUP       33300000
MXIBUPH  DC    C'IFL3705B'              PHASE 1 RAS                     33400000
         DC    C'IFLLD2P2'              PHASE 2 NCP SUPPORT GROUP       33500000
         SPACE 5                                                        33600022
CVTLOC   EQU   X'10'                    OFFSET TO CVT ADDRESS           33700022
NIDLE    EQU   X'02'                    TO SET 3705 IDLE                33730000
IPLED    EQU   X'08'                    TO SET 3705 NOT IPLED           33760000
TYPE     DC    X'8080'                  TYPE FIELD VALUE                33800022
DCBOFF   EQU   X'58'                    SIZE OF A DCB                   33900022
CLNUPPRI EQU   X'88'                    CLEAN UP INDICATOR TO MH        34000022
HFOUR    DC    H'4'                     CONSTANT FOUR                   34100022
DECBTYPE EQU   60                       OFFSET IN L-WKAREA TO DECB      34200022
*                                       TYPE FIELD                      34300022
RNPH2D   EQU   6                        DISP IN BU PH1 FOR PH2 LEN      34400022
LEN      EQU   256                      LENGTH IN MVC OF ZEROS          34500022
AUTOIPL  EQU   X'DF'                    PRIORITY OF AUTO-IPL ELEMENT    34600022
HALFTWO  DC    H'2'                     TWO                      S22024 34700000
ALLLEFT  EQU   235                      LENGTH REMAINING AFTE 1ST M5C   34800022
TN256HW  DC    H'256'                   MAXIMUM MVC COUNT               34900022
TINBUFSZ DC    H'1024'                  SIZE OF INPUT BUFFER            35000022
         DC    H'512'                   SIZE OF OUTPUT BUFFER           35100022
TMAXLIN  DC    H'52'                    MAXIMUM LINES PER PAGE          35200022
         DC    H'4'                     FOUR CONSTANT                   35300022
         DC    H'1'                     ONE ENTRY IN THIS LIST          35400022
         DC    H'58'                    EACH ENTRY IS 58 BYTES LONG     35500022
TLINECNT DC    H'0'                     LINE COUNT FOR OUTPUT           35600022
TEC      EQU   X'EC'                    PHASE VECTOR TABLE PTR.         35700022
TPHASCNT DC    H'8'                     NUM OF PHASES TIMES 4           35800022
TDIAGIND DC    C'Y6'                    INITIAL-TEST INDICATOR          36100022
         DC    C'Y6'                    DEFAULT DIAG VALUE              36200022
TFLAGS   EQU   X'60'                    FLAGS IN CCW                    36300022
*                                                              @Y17XARS 36310000
*              SENSE CCW                                       @Y17XARS 36320000
*                                                              @Y17XARS 36330000
SENOPCD  DC    AL1(CCWSENSE)            SENSE OP CODE          @Y17XARS 36340000
SENADDR  DC    AL3(0)                   ADDRESS                @Y17XARS 36350000
SENFLG   DC    AL1(CCWCC)               FLAGS                  @Y17XARS 36360000
         DC    AL1(0)                   UNUSED                 @Y17XARS 36370000
SENCNT   DC    AL2(1)                   DATA COUNT             @Y17XARS 36380000
*                                                              @Y17XARS 36390000
TRNCCWLN DC    AL1(0)                   ZERO                     S22024 36400000
RNCCWAD  DC    AL3(0)                   ZERO                     S22024 36500000
         DC    X'60'                    HEX 60                   S22024 36600000
         DC    AL1(0)                   ZERO                     S22024 36700000
RNCCWLN  DC    AL2(1025)                CCW LEN                  S22024 36800000
NOPCCW   DC    AL1(3)                   NOP CCW                  S22024 36900000
         DC    AL3(0)                   ZERO                     S22024 37000000
         DC    X'20'                    HEX 20                   S22024 37100000
         DC    AL3(1)                   ONE                      S22024 37200000
TIOBRN   EQU   X'42'                    HEX 42                   S22024 37300000
THIRTEEN EQU   13                       UCBNAME OFFSET IN UCB           37400022
WKSIZE   DC    X'0001EC'                LEN OF L-WK AND C-WK            37500022
LCBPRIO  EQU   X'E2'                    UNIQUE PRIORITY FOR 3705 LCB    37600022
*                                       PASSED FROM ERP OR OPEN         37700022
ERPCMD   EQU   X'01'                    CMD CAME IN FROM ERP OR OPEN    37800022
BLANK    EQU   X'40'                    BLANK                    S22024 37900000
THIRTY2  EQU   32                       OFFSET IN DEB TO DCB ADDR       38000022
TWENFOUR EQU   24                       OFFSET IN WKAREA TO SAVE LCB    38100022
HSEVEN   DC    H'7'                     SEVEN                    S22024 38200000
LCB      EQU   X'E1'                    INDICATES A REDISPATCHED CMD    38300022
NOBRUP   EQU   X'15'                    OFFSET IN PHASE 1 CODE TO       38400022
*                                      SWITCHES                         38500022
ON       EQU   X'02'                    BRING-UP NOT REQUESTED          38600022
MSG164   EQU   164                      CORE NOT AVAIL FOR 3705 IPL CMD 39000022
MSG18    EQU   18                       INVALID CMD                     39100022
TICLAST  DC    X'08000002'              TIC AND LAST UNIT INDICATORS    39200022
MSG163   EQU   163                      LOAD MOD NAME NOT FOUND IN      39300022
*                                       THE 3705 DCB                    39400022
MSG165   EQU   165                      BLDL FAILED                     39500022
TWENTY   EQU   20                       BIT IN DCB FOR BRING-UP         39600022
IOBOFF   DC    H'32'                    OFFSET IN LCB TO IOB            39700022
ADDROPEN EQU   X'48'                    OFFSET TO ADDRESS OF OPEN CODE  39800022
         SPACE 5                                                        39900022
*        IPL   EQU                                                      40000022
*      INPROG    EQU                                                    40100022
          SPACE 5                                                       40200022
FOXZERO  EQU   X'F0'                    MASK TO INDICATE HARDWARE ADDR  40300022
MSG17    EQU   17                       DCB NOT OPENED ERROR MSG        40400022
RETRY    EQU   X'05'                    NUMBER OF TIMES TO RETRY OPER.  40500022
EIGHTEEN EQU   X'F8'                    MASK FOR 1, BIT MACHINE         40600022
REGSAVE  EQU   96                       OFFSET IN L-WK OF REG SAVEAREA  40700022
CHAIN    EQU   X'40'                    CCW CHAINING FLAG               40800022
UCBNAME  EQU   13                       UCB NAME FIELD DISP             40900022
FOURTY   EQU   40                       OFFSET IN TCB TO JOBLIB DCB     41000022
FOURTY4  EQU   X'44'                    OFFSET IN DEB TO UCB ADDR       41100022
EIGHT4   EQU   84                       FIND RTN                        41200022
XCTLINPT DC    C'ME'                    MOD ID FOR IFLINPUT RTN         41300022
BRNGUP   EQU   X'20'                    BRING UP SPECIFIED              41400022
SETBRGUP EQU   X'05'                    INDICATES BRING-UP SPECIFIED    41500022
TWENTY8  EQU   28                       UCBNAME SAVE OFFSET IN L-WKAR   41600022
APPVCTAB EQU   X'14'                    OFFSET IN CVT TO IOS APPEN.     41700022
*                                       VECTOR TABLE                    41800022
LCBSAVE  EQU   88                       SAVEAREA IN L-WKAREA FOR LCB    41900022
RNAPPTAB EQU   28                       OFFSET IN DEB TO 3705 APPEN     42000022
*                                       VECTOR TABLE                    42100022
LINK     EQU   X'01'                    MASK TO CHK LINKLIB FOR         42200022
*                                       RESIDENCY                       42300022
STEPJOB  EQU   X'02'                    MASK TO CHK STEP OR JOB LIB FOR 42400022
*                                       RESIDENCY                       42500022
THIRTY   EQU   X'30'                    DCBOFLAGS                       42600022
THIRTONE EQU   X'31'                    NO SYS ERROR RTN FLAG           42700022
REALOPCE EQU   X'08'                    INDICATES OPCE AND NOT LCB      42800022
NOTFIRST EQU   X'80'                    IF SET IN ELEMENT POINTED TO BY 42900022
*                                       OPCCOPCE NOT 1ST TIME ENTERED   43000022
RDISP    EQU   X'08'                    CMD WAS REDISPATCHED            43100022
XCTLMI   DC    C'MI'                    ID OF COMMON EXIT RTNE @Y17XARS 43200000
MODID    DC    C'MD'                    INDICATES AN IPL CMD            43300022
XCTL00ID DC    C'00'                    ID OF IGC0010D ROUTINE          43400022
TWENSIX  EQU   26                       NUMBER OF BYTES TO MOVE         43500022
SIXTEEN  EQU   16                       NUM OF BYTES TO MOVE            43600022
TXRDCB   EQU   X'04'                    3705 DCB MASK                   43700022
MSG173   EQU   173                      ERROR MSG NUMBER FOR 3705       43800022
CESDOFF  EQU   40                       OFFSET IN L-WK TO CESD TABLE    43900022
OPCE2ND  EQU   X'C0'                    OPCE PASSED FROM IFLWRITE RTN   44000022
DATAOFF  EQU   184                      OFFSET TO C-WKAREA              44100022
MSG168   EQU   168                      MSG NO 168               S22024 44200000
         SPACE                                                          44300022
XCTLWRTE DC    C'MF'                    ID FOR IFLWRITE MODULE          44400022
PATCH    B     PATCH                    START OF PATCH AREA             44420000
         ORG   IGCMD10D+X'3FF'          SET MODULE LENGTH TO X'400'     44440000
         DC    X'00'                                                    44460000
         EJECT                                                          44500022
DATADS   DSECT                                                          44600022
****************************************************************        44700022
*        REGISTER AND NUMBER EQUATES                                    44800000
R0       EQU   0                                                        44900022
R1       EQU   1                                                        45000022
R2       EQU   2                                                        45100022
R3       EQU   3                                                        45200022
R4       EQU   4                                                        45300022
R5       EQU   5                                                        45400022
R6       EQU   6                                                        45500022
R7       EQU   7                                                        45600022
R8       EQU   8                                                        45700022
R9       EQU   9                                                        45800022
RA       EQU   10                                                       45900022
RB       EQU   11                                                       46000022
RC       EQU   12                                                       46100022
RD       EQU   13                                                       46200022
RE       EQU   14                                                       46300022
RF       EQU   15                                                       46400022
         SPACE                                                          46500022
         SPACE                                                          48100022
ZERO     EQU   0                                                        48200022
ONE      EQU   1                                                        48300022
TWO      EQU   2                                                        48400022
THREE    EQU   3                                                        48500022
FOUR     EQU   4                                                        48600022
FIVE     EQU   5                                                        48700022
SIX      EQU   6                                                        48800022
SEVEN    EQU   7                                                        48900022
EIGHT    EQU   8                                                        49000022
NINE     EQU   9                                                        49100022
TEN      EQU   10                                                       49200022
ELEVEN   EQU   11                                                       49300022
TWELVE   EQU   12                                                       49400022
         SPACE 2                                                        49500022
****************************************************************        49600022
**    MISCELLANEOUS  EQUATES  AND CONSTANTS                   **        49700022
         SPACE                                                          49800022
BIT10    EQU   X'10'                    TEST FOR OPEN IN DCB            49900022
IFLGSD   EQU   49                       DCB FLAGS DISPLACEMENT          50000022
NOERRTN  EQU   X'0C'                    INDICATE NO SYS ERR RTNS        50100022
UCBCA    EQU   19                       UCB DISP OF CA INDICATORS       50200022
MINICA   EQU   X'15'                    MIMI CA INDIC IN UCB            50300022
         SPACE                                                          50400022
ABORTVAL EQU   12                       ABORT RETURN CODE THRESHOLD     50500022
RETCODE  DC    H'0'                RETURN CODE.                         50600022
MAXRC    DC    H'0'          MAXIMUM RETURN CODE SET.                   50700022
RNDDN    DC    C'        '    RN DDNAME                                 50800022
RNADR    DC    C'   '              UNIT ADDRESS AREA.                   50900022
ENTRYPT  DC    F'0'           ENTRY POINT FOR LOAD.                     51000022
ARADDR   EQU   12             DECB AREA ADDR. DISP.                     51100022
RNSWITCH EQU   X'14'         DISP OF SWITCH IN DIAG PHASE 1.            51200022
SIXTBIT  EQU   X'01'         SIXTEEN BIT INDICATOR.                     51300022
ALIASIND EQU   X'80'          THIS IS AN ALIAS-INDICATOR.  BLDL         51400022
RENREUS  EQU   X'C0'          REENTRANT & REUSABLE         BLDL         51500022
ABORT    EQU   X'03'          ABORT SENSE INDICATORS.                   51600022
         DS    0H                                                       51700022
TXTLNGTH DC    H'0'           LENGTH OF TEXT RECORD                     51800022
         DS    0F                                                       51900022
TOTLNGTW DC    AL1(0)         TOTAL LENGTH OF DATA                      52000022
TOTLNGTH DC    AL3(0)         TRANSFERRED                               52100022
         DS    0F                                                       52200022
TXTADDRW DC    AL1(0)         ADDRESS (REL TO ZERO) OF                  52300022
TXTADDR  DC    AL3(0)         THIS TEXT RECORD.                         52400022
         SPACE                                                          52500022
N256HW   DC    H'256'         MAXIMUM MVC COUNT                         52600022
INBUFSZ  DC    H'1024'        SIZE OF INPUT BUFFER                      52700022
OUTBFSZ  DC    H'512'         SIZE OF OUTPUT BUFFER.                    52800022
DOUBLE   DC    D'0'           DOUBLE WORD WORK AREA                     52900022
LINECNT  DC    H'0'           LINE COUNT FOR OUTPUT                     53000022
MAXLIN   DC    H'52'          MAXIMUM LINES PER PAGE.                   53100022
N4H      DC    H'4'           FOUR CONSTANT                             53200022
         SPACE                                                          53300022
**   BLDL  LIST  FOR  LOAD  MODULE  DATA  SET                 **        53400022
         DS    0H                                                       53500022
BLDLIST  DC    H'1'           ONE ENTRY IN THIS LIST.                   53600022
         DC    H'58'          EACH ENTRY IS 58 BYTES LONG               53700022
MEMBER   EQU   *              MEMBER NAME PLACE HERE.                   53800022
         DS    CL8                      CHAR 8                   S22024 53900000
RALTTRK  DC    4X'00'              USED IN FIND                         54000022
*                                                                       54100022
Z        DC    X'00'          FLAG BYTE                                 54200022
C        DC    X'00'          FLAG BYTE                                 54300022
         ORG   MEMBER+22                                                54400022
ATTRIB   EQU   *              ATTRIBUTE FIELD                           54500022
         ORG   MEMBER+29                                                54600022
EPAMEM   EQU   *              ENTRY PT IF MEMBER DIR.ENTRY.             54700022
         ORG   MEMBER+43                                                54800022
EPAALS   EQU   *              ENTRY PT IF ALIAS DIR.ENTRY.              54900022
         ORG   MEMBER+58                                                55000022
         SPACE                                                          55100022
MAXIVT   EQU   *                                                        55200022
         DC    V(CXWMAXI1)         ADDRESS OF MAXI PHASE 1              55300022
         DC    V(CXWMAXI2)              ADDRESS OF MAXI PHASE 2         55400022
MINIVT   EQU   *                                                        55500022
         SPACE                                                          55600022
         DC    V(CXWMINI1)         ADDRESS OF MINI PHASE 1              55700022
         DC    V(CXWMINI2)         ADDRESS OF MINI PHASE 2..            55800022
         SPACE                                                          55900022
PHASPTR  DC    A(MAXIVT)           PHASE VECTOR TABLE PTR..             56000022
PHASCNT  DC    H'8'                NUMBER OF PHASES TIMES FOUR..        56100022
MAXIPH1  DC    V(CXWMAXI1)         ADDRESS OF MAXI PHASE 1.             56200022
MINIPH1  DC    V(CXWMINI1)         ADDRESS OF MINI PHASE 1.             56300022
MAXIBUPH DC    CL8'IFL3705B'       NAME OF DIAG MAXI PHASE 1.           56400022
MINIBUPH DC    CL8'IFL3705A'       NAME OF DIAG MINI PHASE 1.           56500022
         SPACE                                                          56600022
*                               *                              *        56700022
****************************************************************        56800022
***      SWITCHES AND TEST EQUATES                            **        56900022
         SPACE                                                          57000022
SWITCH   EQU   *         * SWITCH BYTE *                                57100022
         SPACE                                                          57200022
SW1      EQU   *          INDICATES ONE PARM PROCESSED                  57300022
ON1      EQU   X'80'          TURN ON SW1                               57400022
OFF1     EQU   X'7F'          TURN OFF SW1                              57500022
         SPACE                                                          57600022
TXTSW    EQU   *            INDICATES TEXT RECORD IN NEXT BUFFER        57700022
ONTXT    EQU   X'40'          TURN ON TXTSW                             57800022
OFFTXT   EQU   X'BF'          TURN OFF TXTSW                            57900022
         SPACE                                                          58000022
LASTSW   EQU   *            INDICATES LAST TEXT RECORD                  58100022
ONLAST   EQU   X'20'          TURN ON LASTSW                            58200022
         SPACE                                                          58300022
ENDIN    EQU   *            INDICATES INPUT BUFFER IS EMPTY.            58400022
ONEND    EQU   X'10'          TURN ON ENDIN.                            58500022
OFFEND   EQU   X'EF'          TURN OFF ENDIN.                           58600022
         SPACE                                                          58700022
IPLSW    EQU   *            INDICATES BOOTSTRAP IS TO BE SENT           58800022
ONIPL    EQU   X'08'          TURN ON IPLSW.                            58900022
OFFIPL   EQU   X'F7'          TURN OFF IPLSW.                           59000022
         SPACE                                                          59100022
IOPEND   EQU   *            INDICATES AN EXCP IS OUTSTANDING.           59200022
ONIO     EQU   X'04'          TURN ON IOPEND                            59300022
OFFIO    EQU   X'FB'          TURN OFF IOPEND                           59400022
         SPACE                                                          59500022
ERRENT   EQU   *            INDICATES ERROR RTN HAS BEEN ENTERED        59600022
ONENT    EQU   X'02'          TURN ON ERRENT.                           59700022
         SPACE                                                          59800022
BUFFERSW EQU   *                 INDICATES PRIMING OF BUFFERS..         59900022
BUFSW    EQU   X'01'                    HEX 01                   S22024 60000000
         SPACE                                                          60100022
ONES     EQU   X'FF'          USED IN SWITCH MANIPULATIONS.             60200022
         SPACE                                                          60300022
         DC    AL1(0)      * ACTUAL SWITCH BYTE *                       60400022
         SPACE 2                                                        60500022
SWITCH2  EQU   *                                                        60600022
CASW     EQU   *                                                        60700022
         SPACE                                                          60800022
LOADFLG  EQU   X'80'          LOADMOD KEYWORD PROCESSED.                60900022
UNITFLG  EQU   X'40'          UNIT    KEYWORD PROCESSED.                61000022
DIAGFLG  EQU   X'20'          DIAG    KEYWORD PROCESSED.            BUP 61100022
DIAGOK   EQU   X'10'          BRING-UP COMPLETED INDICATOR.         BUP 61200022
ONCA     EQU   X'01'               ON INDICATING MINI CA.               61300022
COMPLETE EQU   X'02'          LAST WRITE JUST ISSUED.                   61400022
NXTPHS   EQU   X'04'          NEXT PHASE REQUEST.                       61500022
         SPACE                                                          61600022
         DC    AL1(0)          * ACTUAL SWITCH2 BYTE *                  61700022
         SPACE                                                          61800022
DIAGIND  DC    C'Y6'              INITIAL-TEST INDICATOR.               61900022
DIAGDEF  DC    C'Y6'               DEFAULT DIAG VALUE.                  62000022
CHARN    EQU   C'N'           NO BRING-UP INDICATOR.                BUP 62100022
         SPACE 2                                                        62200022
WARN     DC    AL1(0)        BYTE USED FOR WARNING INDICATORS           62300022
RNFULL   EQU   X'80'            RN IS FULL WARNING                      62400022
         SPACE                                                          62500022
GOODCODE EQU   X'7F'          NORMAL ECB COMPLETION CODE.               62600022
PERMERR  EQU   X'41'          PERMANENT ERROR ECB CODE.                 62700022
         SPACE 2                                                        62800022
         SPACE                                                          62900022
RNEND    EQU   X'C0'        * TEMPORARY - WILL NEED TO BE *             63000022
*                               MORE EXTENSIVE.                         63100022
****************************************************************        63200022
         SPACE                                                          63300022
**********  CONTROL BLOCKS FOR ASSOCIATED DATA SETS  ***********        63400022
         SPACE                                                          63500022
ECBRN    DC    F'0'       **  ECB FOR EXCP'S TO 27RN.                   63600022
         SPACE                                                          63700022
IOBRN    DS    0F         **  IOB FOR EXCP'S TO 27RN.                   63800022
         DC    X'42'         -COMMAND CHAINING & NOT RELATED.           63900022
         DC    AL1(0)        -FLAGS                                     64000022
IOBSENSE DC    AL2(0)        -SENSE BYTES                               64100022
         DC    AL1(0)        -ECB CODE                                  64200022
         DC    AL3(0)                   ECB ADDRESS                     64300022
         DC    AL1(0)        -FLAGS                                     64400022
         DC    AL3(0)        -CSW COMMAND ADDRESS.                      64500022
IOBCSWS  DC    AL2(0)        -CSW STATUS BYTES                          64600022
         EJECT                                                          64700022
IOBCSWC  DC    AL2(0)        -CSW BYTE COUNT.                           64800022
         DC    AL1(0)        -SIO CODE                                  64900022
         DC    AL3(0)                   CHANNEL PROGRAM ADDRESS         65000022
         DC    AL1(0)        -RESERVED                                  65100022
         DC    AL3(0)                   DCB ADDRESS                     65200022
         DC    AL1(0)        -REPOSITION MODIFIER                       65300022
         DC    AL3(0)        -RESTART ADDRESS.                          65400022
         DC    AL2(0)        -BLOCK COUNT INCREMENT N/A.                65500022
         DC    AL2(0)        -ERROR COUNTS.                             65600022
         DC    AL1(0)        -EXTENT 0 OF DEB.                          65700022
         DC    AL3(0)        -BBCCHHR                                   65800022
         DC    AL4(0)        -(SAME)                                    65900022
* END OF IOB DEFINITION  ***************************************        66000022
         DCBD                                                      @01A 66050012
         EJECT                                                          66100022
         TAVTD                                                          66200022
         EJECT                                                          66300022
         TCCWD                                                 @Y17XARS 66330000
         EJECT                                                 @Y17XARS 66360000
         TOPCAVTD                                                       66400022
         EJECT                                                          66500022
         TOPCED                                                         66600022
         EJECT                                                          66700022
         TLCBD                                                          66800022
         EJECT                                                          66900022
         TCOMD                                                          66910000
         TCOMIPLD                                                       66920000
         EJECT                                                          66930000
         TNCPID                                                @Y17XARS 66940000
         EJECT                                                          66950000
         TOCTRD                                                @Y17XARS 66960000
         EJECT                                                          66970000
         END                                                            66980000
