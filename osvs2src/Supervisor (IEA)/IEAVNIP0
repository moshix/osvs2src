         TITLE 'IEAVNIP0 - BASE SYSTEM INITIALIZATION ROUTINE          *00001000
                        '                                               00002000
IEAVNIP0 CSECT ,                                                   0001 00003000
IEAANIP0 DS    0H                                                  0001 00004000
         ENTRY IEAANIP0                                                 00005000
@MAINENT BALR  @15,0                                               0001 00006000
         USING *,@15                                               0001 00007000
         B     @PROLOG                                             0001 00008000
         DC    AL2(@EP00001-@MAINENT-2)                                 00009000
         DC    AL1(19)                                             0001 00010000
         DC    C'IEAVNIP0R0300077129'                              0001 00011000
NIP0CPUI BALR  @15,0                                               0001 00012000
         USING *,@15                                               0001 00013000
         B     @PROLOG                                             0001 00014000
         DC    AL2(@EP02006-NIP0CPUI-2)                                 00015000
         ENTRY NIP0CPUI                                                 00016000
NIP0MCHT BALR  @15,0                                               0001 00017000
         USING *,@15                                               0001 00018000
         B     @PROLOG                                             0001 00019000
         DC    AL2(@EP02207-NIP0MCHT-2)                                 00020000
         ENTRY NIP0MCHT                                                 00021000
NIP0MFAT BALR  @15,0                                               0001 00022000
         USING *,@15                                               0001 00023000
         B     @PROLOG                                             0001 00024000
         DC    AL2(@EP02224-NIP0MFAT-2)                                 00025000
         ENTRY NIP0MFAT                                                 00026000
NP0RTP01 BALR  @15,0                                               0001 00027000
         USING *,@15                                               0001 00028000
         B     @PROLOG                                             0001 00029000
         DC    AL2(@EP02405-NP0RTP01-2)                                 00030000
         ENTRY NP0RTP01                                                 00031000
NP0RTP02 BALR  @15,0                                               0001 00032000
         USING *,@15                                               0001 00033000
         B     @PROLOG                                             0001 00034000
         DC    AL2(@EP02409-NP0RTP02-2)                                 00035000
         ENTRY NP0RTP02                                                 00036000
NP0RTP03 BALR  @15,0                                               0001 00037000
         USING *,@15                                               0001 00038000
         B     @PROLOG                                             0001 00039000
         DC    AL2(@EP02413-NP0RTP03-2)                                 00040000
         ENTRY NP0RTP03                                                 00041000
NP0RTP04 BALR  @15,0                                               0001 00042000
         USING *,@15                                               0001 00043000
         B     @PROLOG                                             0001 00044000
         DC    AL2(@EP02417-NP0RTP04-2)                                 00045000
         ENTRY NP0RTP04                                                 00046000
NP0RTP05 BALR  @15,0                                               0001 00047000
         USING *,@15                                               0001 00048000
         B     @PROLOG                                             0001 00049000
         DC    AL2(@EP02421-NP0RTP05-2)                                 00050000
         ENTRY NP0RTP05                                                 00051000
NP0RTP06 BALR  @15,0                                               0001 00052000
         USING *,@15                                               0001 00053000
         B     @PROLOG                                             0001 00054000
         DC    AL2(@EP02425-NP0RTP06-2)                                 00055000
         ENTRY NP0RTP06                                                 00056000
NP0RTP07 BALR  @15,0                                               0001 00057000
         USING *,@15                                               0001 00058000
         B     @PROLOG                                             0001 00059000
         DC    AL2(@EP02429-NP0RTP07-2)                                 00060000
         ENTRY NP0RTP07                                                 00061000
NP0RTP08 BALR  @15,0                                               0001 00062000
         USING *,@15                                               0001 00063000
         B     @PROLOG                                             0001 00064000
         DC    AL2(@EP02433-NP0RTP08-2)                                 00065000
         ENTRY NP0RTP08                                                 00066000
NP0RTP09 BALR  @15,0                                               0001 00067000
         USING *,@15                                               0001 00068000
         B     @PROLOG                                             0001 00069000
         DC    AL2(@EP02437-NP0RTP09-2)                                 00070000
         ENTRY NP0RTP09                                                 00071000
NP0RTP10 BALR  @15,0                                               0001 00072000
         USING *,@15                                               0001 00073000
         B     @PROLOG                                             0001 00074000
         DC    AL2(@EP02441-NP0RTP10-2)                                 00075000
         ENTRY NP0RTP10                                                 00076000
NP0RTP11 BALR  @15,0                                               0001 00077000
         USING *,@15                                               0001 00078000
         B     @PROLOG                                             0001 00079000
         DC    AL2(@EP02445-NP0RTP11-2)                                 00080000
         ENTRY NP0RTP11                                                 00081000
NP0RTP12 BALR  @15,0                                               0001 00082000
         USING *,@15                                               0001 00083000
         B     @PROLOG                                             0001 00084000
         DC    AL2(@EP02449-NP0RTP12-2)                                 00085000
         ENTRY NP0RTP12                                                 00086000
NP0RTP13 BALR  @15,0                                               0001 00087000
         USING *,@15                                               0001 00088000
         B     @PROLOG                                             0001 00089000
         DC    AL2(@EP02453-NP0RTP13-2)                                 00090000
         ENTRY NP0RTP13                                                 00091000
NP0RTP14 BALR  @15,0                                               0001 00092000
         USING *,@15                                               0001 00093000
         B     @PROLOG                                             0001 00094000
         DC    AL2(@EP02457-NP0RTP14-2)                                 00095000
         ENTRY NP0RTP14                                                 00096000
NP0RTP15 BALR  @15,0                                               0001 00097000
         USING *,@15                                               0001 00098000
         B     @PROLOG                                             0001 00099000
         DC    AL2(@EP02461-NP0RTP15-2)                                 00100000
         ENTRY NP0RTP15                                                 00101000
         DROP  @15                                                      00102000
@PROLOG  BALR  @08,0                                               0001 00103000
@PSTART  LA    @09,4095(,@08)                                      0001 00104000
         LA    @11,4095(,@09)                                      0001 00105000
         USING @PSTART,@08                                         0001 00106000
         USING @PSTART+4095,@09                                    0001 00107000
         USING @PSTART+8190,@11                                    0001 00108000
         LA    @12,@DATA                                           0001 00109000
         USING @DATA,@12                                           0001 00110000
         ST    @13,@SA00001+4                                      0001 00111000
         LA    @14,@SA00001                                        0001 00112000
         LR    @13,@14                                             0001 00113000
         AH    @15,4(,@15)                                         0001 00114000
         BR    @15                                                 0001 00115000
@EP00001 DS    0H                                                  0002 00116000
RBPRFXLN EQU 64                                                         00117000
RBPRFLNA EQU 32                                                         00118000
PRBLEN   EQU 136                                                        00119000
SIRBLEN  EQU 200                                                        00120000
TIRBLEN  EQU 136                                                        00121000
IRBLEN   EQU 128                                                        00122000
SVRBLEN  EQU 224                                                        00123000
*                                                                  0559 00124000
*/*  SAVE INPUT REG'S IN SAVE AREA                                   */ 00125000
*                                                                  0560 00126000
*   NP0IPLD=R3;                     /* R3 CONTAINS ADDR OF IPLDATA   */ 00127000
         LR    NP0IPLD,R3                                          0560 00128000
*   NP0ISTSZ=R6;                    /* R6 CONTAINS STOR SIZE AS    0561 00129000
*                                      DETERMINED BY IPL             */ 00130000
         ST    R6,NP0ISTSZ                                         0561 00131000
*   NP0NCEND=R7;                    /* R7 CONTAINS ADDR OF END (TOP)    00132000
*                                      OF NUCLEUS, EXCLUDING NIP0  0562 00133000
*                                      CSECT                         */ 00134000
         LR    NP0NCEND,R7                                         0562 00135000
*   NP0IPLU=R10;                    /* R10 CONTAINS IPL DEVICE ADDR     00136000
*                                      IN CUA FORM.                  */ 00137000
         STH   R10,NP0IPLU                                         0563 00138000
*   RCVT=FLCCVT;                    /* PUT ADDR OF CVT IN R3, THIS IS   00139000
*                                      A NIP STANDARD                */ 00140000
*                                                                  0564 00141000
         L     @15,NPSAPTR                                         0564 00142000
         L     RCVT,FLCCVT(,@15)                                   0564 00143000
*   /*****************************************************************/ 00144000
*   /*                                                               */ 00145000
*   /* TRAP ANY REQUESTS FOR 'SVC 60' THAT SVC HAS NOT BEEN LOADED   */ 00146000
*   /* YET AND MIGHT BE REQUESTED BEFORE IT IS LOADED (STAE)         */ 00147000
*   /*                                                               */ 00148000
*   /*****************************************************************/ 00149000
*                                                                  0565 00150000
*   CVTSV60=ADDR(NSVC60TP);         /* SET PTR. TO SVC 60 IN CVT TO     00151000
*                                      ADDR. OF TRAP RTN. IT WILL  0565 00152000
*                                      CLEAR REG 15 AND RETURN TO  0565 00153000
*                                      CALLER                        */ 00154000
         LA    @14,NSVC60TP                                        0565 00155000
         ST    @14,CVTSV60(,RCVT)                                  0565 00156000
*   RFY                                                            0566 00157000
*    (SVCENTRY) BASED(NP0SVCBA);                                   0566 00158000
*   NP0SVCBA=NVTSVCTB               /* GET ADDR. OF SVCTABLE ENTRY   */ 00159000
*       +(60                        /* FOR SVC 60 IN BASE FOR THE    */ 00160000
*       *LENGTH(SVCENTRY));         /* SVCTABLE ENTRY MAPPING MACRO  */ 00161000
         LA    NP0SVCBA,480                                        0567 00162000
         AL    NP0SVCBA,NVTSVCTB                                   0567 00163000
*   NVTSVC60=SVCENTRY;              /* MOVE SVC 60 ENTRY TO SAVE AREA*/ 00164000
         MVC   NVTSVC60(8),SVCENTRY(NP0SVCBA)                      0568 00165000
*   SVCEP=ADDR(NSVC60TP);           /* MOVE ADDR OF NIP0 TRAP INTO 0569 00166000
*                                      SVC 60 ENTRY IN SVC TABLE     */ 00167000
         LA    @14,NSVC60TP                                        0569 00168000
         ST    @14,SVCEP(,NP0SVCBA)                                0569 00169000
*   SVCATTR1=SVCATTR1&&             /* CLEAR ATTRIBUTE 1 FIELD TO 0  */ 00170000
*       SVCATTR1;                                                  0570 00171000
         XC    SVCATTR1(2,NP0SVCBA),SVCATTR1(NP0SVCBA)             0570 00172000
*   SVCATTR2=SVCATTR2&&             /* CLEAR ATTRIBUTE 2 FIELD TO 0  */ 00173000
*       SVCATTR2;                                                  0571 00174000
         XC    SVCATTR2(2,NP0SVCBA),SVCATTR2(NP0SVCBA)             0571 00175000
*   SVCLL='1'B;                     /* TURN ON FLAG TO INDICATE LOCAL   00176000
*                                      LOCK REQUIRED. THE SVC 60   0572 00177000
*                                      ENTRY NOW DESCRIBES A TYPE 1     00178000
*                                      SVC, UN-AUTHORIZED, AND     0572 00179000
*                                      REQUIRING THE LOCAL LOCK THE     00180000
*                                      ROUTINE POINTED TO IS THE NIP0   00181000
*                                      SVC 60 TRAP WHICH JUST CLEARS    00182000
*                                      REG. 15 TO ZERO AND RETURNS TO   00183000
*                                      THE CALLER.                   */ 00184000
         OI    SVCLL(NP0SVCBA),B'10000000'                         0572 00185000
*   RFY                                                            0573 00186000
*    (R3,                                                          0573 00187000
*     R6,                                                          0573 00188000
*     R7,                                                          0573 00189000
*     R10) UNRSTD;                                                 0573 00190000
*                                                                  0573 00191000
*   /*****************************************************************/ 00192000
*   /*                                                               */ 00193000
*   /* CHECK IF THIS IS AN OS/VS2 SYSTEM ---- IF SO, NIP0 WILL HAVE  */ 00194000
*   /* BEEN LOADED JUST ABOVE THE NUCLEUS IF NOT, NIP0 WILL HAVE BEEN*/ 00195000
*   /* LOADED ELSEWHERE                                              */ 00196000
*   /*                                                               */ 00197000
*   /*****************************************************************/ 00198000
*                                                                  0574 00199000
*   IF NP0ENTRY^=NP0NCEND THEN                                     0574 00200000
         C     NP0NCEND,NP0ENTRY                                   0574 00201000
         BNE   @RT00574                                            0574 00202000
*     GOTO NP0NNIPM;                /* LOAD WAIT STATE PSW TO      0575 00203000
*                                      INDICATE NIPM NOT FOUND.      */ 00204000
*/* TRAP PROGRAM CHECKS BY REPLACING SYSGEN'D P/C NEW PSW            */ 00205000
*/* PROG. CHECKS ARE TRAPPED SINCE THE PROG. CHECK FLIH WOULD TRY    */ 00206000
*/* TO INVOKE SVC 13 (ABEND) TO ABEND THE OFFENDING TASK.  DURING    */ 00207000
*/* NIP THAT TASK WOULD BE THE MASTER SCHEDULER.  ALSO, SVC 13 IS    */ 00208000
*/* NOT INITIALIZED YET AND IS THEREFORE UNUSABLE                    */ 00209000
*/*                                                                  */ 00210000
*/* NOTE: THE SYS. GEN'D. PROGRAM CHECK NEW PSW HAS THE WAIT BIT ON  */ 00211000
*/*        SO THAT IF A PROGRAM CHECK OCCURRS BEFORE NIP0 SETS UP    */ 00212000
*/*        THIS TRAP, THE SYSTEM WILL BE PUT INTO A WAIT STATE.      */ 00213000
*/*                                                                  */ 00214000
*                                                                  0576 00215000
*   NP0SPCSA=FLCPNPSW;              /* SAVE SYSGEN'D P/C NEW PSW     */ 00216000
         MVC   NP0SPCSA(8),FLCPNPSW(@15)                           0576 00217000
*   PCBR10=ADDR(NP0UXPC);           /* GET ADDR OF NIP0 ROUTINE TO 0577 00218000
*                                      HANDLE UNEXPECTED PROG.CHECKS */ 00219000
         LA    PCBR10,NP0UXPC                                      0577 00220000
*   FLCPNPSW=NP0PCPSW;              /* PUT REPLACEMENT P/C NEW PSW IN   00221000
*                                      PLACE, IT POINTS TO A 'BR 10'    00222000
*                                      INSTRUCTION                   */ 00223000
         MVC   FLCPNPSW(8,@15),NP0PCPSW                            0578 00224000
*   NP0SRSSA=FLCRNPSW;              /* SAVE SYSGEN'D RESTART PSW, THE   00225000
*                                      SYSGEN'D PSW WILL BE MODIFIED    00226000
*                                      IN THE SIGP RTN,THIS SAVED  0579 00227000
*                                      COPY WILL BE USED TO RECREATE    00228000
*                                      THE ORIGINAL                  */ 00229000
*                                                                  0579 00230000
         MVC   NP0SRSSA(8),FLCRNPSW(@15)                           0579 00231000
*   /*****************************************************************/ 00232000
*   /*                                                               */ 00233000
*   /* THE FOLLOWING CODE WILL DETERMINE IF THE TOD CLOCK IS IN THE  */ 00234000
*   /* ERROR STATE, AND IF SO WILL PROVIDE LOGIC TO CLEAR THE ERROR  */ 00235000
*   /* STATE VIA SET CLOCK INSTRUCTION. IF THE CLOCK REMAINED IN THE */ 00236000
*   /* ERROR STATE A SET CPU TIMER INSTRUCTION WOULD CAUSE A MACHINE */ 00237000
*   /* CHECK TO BECOME PENDING. WHEN THIS MODULE WOULD THEN REACH THE*/ 00238000
*   /* POINT IN PROCESSING TO ENABLE FOR MACHINE CHECKS, IT WOULD    */ 00239000
*   /* TERMINATE IN A WAIT STATE BECAUSE 0F THE PENDING MACHINE      */ 00240000
*   /* CHECK.                                                        */ 00241000
*   /*                                                               */ 00242000
*   /*****************************************************************/ 00243000
*                                                                  0580 00244000
*/*                                                          @YM03537*/ 00245000
*                                                                  0580 00246000
*   RFY                                                            0580 00247000
*     WORKREG6 RSTD;                /* RESTRICT R6           @YM03537*/ 00248000
*   WORKREG6=ADDR(CLOKWORK);        /* R6 = ADDR OF DWORD TO STORE 0581 00249000
*                                      TOD CLOCK VALUE.      @YM03537*/ 00250000
         LA    WORKREG6,CLOKWORK                                   0581 00251000
*   GEN(STCK 0(WORKREG6));          /* STORE TOD CLOCK TO DETERMINE     00252000
*                                      IF IT IS IN THE ERR STATE.  0582 00253000
*                                                            @YM03537*/ 00254000
         STCK 0(WORKREG6)                                               00255000
*   BC(13,ROUNDNUC);                /* BRANCH AROUND SET CLOCK LOGIC    00256000
*                                      IF TOD CLK IS NOT IN ERR.   0583 00257000
*                                                            @YM03537*/ 00258000
         BC    13,ROUNDNUC                                         0583 00259000
*   CLOKWORK=''B;                   /* ZERO OUT CLOK WORK AREA FOR 0584 00260000
*                                      SET CLOCK INSTRUCTION.      0584 00261000
*                                                            @YM03537*/ 00262000
         XC    CLOKWORK(8),CLOKWORK                                0584 00263000
*   FLCRNPSW=SETCKPSW;              /* SET RESTART NEW PSW POINTING     00264000
*                                      TO SET CLOCK INSTRUCTION.   0585 00265000
*                                                            @YM03537*/ 00266000
         L     @07,NPSAPTR                                         0585 00267000
         MVC   FLCRNPSW(8,@07),SETCKPSW                            0585 00268000
*   NVTFLWSC=NVTWCN05;              /* PUT WAIT STATE CODE OF 4A INTO   00269000
*                                      WAIT PSW.             @YM03537*/ 00270000
         MVI   NVTFLWSC,X'4A'                                      0586 00271000
*   LPSW(NVTWTPSW);                 /* LOAD WAIT STATE AND CAUSE THE    00272000
*                                      OPERATOR TO DEPRESS THE     0587 00273000
*                                      RESTART BUTTON AND TO OPERATE    00274000
*                                      THE CLOCK SECURITY SWITCH.  0587 00275000
*                                                            @YM03537*/ 00276000
*                                                                  0587 00277000
         LPSW  NVTWTPSW                                            0587 00278000
*   /*****************************************************************/ 00279000
*   /*                                                               */ 00280000
*   /* WE WILL RESUME PROCESSING HERE WHEN THE OPERATOR HITS RESTART.*/ 00281000
*   /* THIS SET CLOCK INSTRUCTION WILL CLEAR THE ERROR STATE. CLOCK  */ 00282000
*   /* IS SET TO ZERO.                                               */ 00283000
*   /*                                                               */ 00284000
*   /*****************************************************************/ 00285000
*                                                                  0588 00286000
*/*                                                          @YM03537*/ 00287000
*                                                                  0588 00288000
*SETTODCK:                                                         0588 00289000
*   GEN(SCK 0(WORKREG6));           /* SET CLOCK TO ZERO     @YM03537*/ 00290000
SETTODCK SCK 0(WORKREG6)                                                00291000
*   BC(7,SETTODCK);                 /* LOOP BACK TO SET CLOCK      0589 00292000
*                                      INSTRUCT IF OPERATOR HAS NOT     00293000
*                                      OPERATED THE CLOCK SECURITY 0589 00294000
*                                      SWITCH.               @YM03537*/ 00295000
         BC    7,SETTODCK                                          0589 00296000
*   NVTCLKER='1'B;                  /* FORCE PROMPTING AT TOD CLOCK     00297000
*                                      INITIALIZATION.       @ZA10111*/ 00298000
         OI    NVTCLKER,B'00000001'                                0590 00299000
*   FLCRNPSW=NP0SRSSA;              /* RESTORE RESTART NEW TO SYSGEND   00300000
*                                      VALUE, IN THE EVENT RESTART IS   00301000
*                                      DEPRESSED AGAIN.      @YM03537*/ 00302000
         L     @07,NPSAPTR                                         0591 00303000
         MVC   FLCRNPSW(8,@07),NP0SRSSA                            0591 00304000
*   RFY                                                            0592 00305000
*     WORKREG6 UNRSTD;              /* FREE R6 FOR USE       @YM03537*/ 00306000
*                                                                  0592 00307000
*   /*****************************************************************/ 00308000
*   /*                                                               */ 00309000
*   /* ROUND ADDR OF TOP OF NUCLEUS UP TO AN 8-BYTE MULTIPLE AND     */ 00310000
*   /* STORE IN INITIAL NVT                                          */ 00311000
*   /*                                                               */ 00312000
*   /*****************************************************************/ 00313000
*                                                                  0593 00314000
*ROUNDNUC:                          /* BRANCH HERE IF SET CLOCK LOGIC   00315000
*                                      IS BYPASSED.          @YM03537*/ 00316000
*   NVTNUCND=((NP0NCEND+7)|7)&&7;   /* ROUND TO 8 BYTE BOUNDARY      */ 00317000
ROUNDNUC LA    @02,7                                               0593 00318000
         LR    @15,NP0NCEND                                        0593 00319000
         ALR   @15,@02                                             0593 00320000
         OR    @15,@02                                             0593 00321000
         XR    @15,@02                                             0593 00322000
         ST    @15,NVTNUCND                                        0593 00323000
*/* PUT ADDR. OF NEXT AVAIL. BYTE IN NUC BUFF IN NIP0 POINTER        */ 00324000
*                                                                  0594 00325000
*   NP0NBAVL=NVTNUCND;                                             0594 00326000
*                                                                  0594 00327000
         ST    @15,NP0NBAVL                                        0594 00328000
*/* ROUND REAL STORAGE SIZE (PASSED FROM IPL) DOWN TO PAGE BOUND     */ 00329000
*/* SAVE ROUNDED-DOWN VALUE IN SAVEAREA                              */ 00330000
*                                                                  0595 00331000
*   NP0STSZ=(NP0ISTSZ/4096)*4096;                                  0595 00332000
         L     @02,NP0ISTSZ                                        0595 00333000
         SRL   @02,12                                              0595 00334000
         SLA   @02,12                                              0595 00335000
         ST    @02,NP0STSZ                                         0595 00336000
*   CVTNUCLS=IPLDNUCM;              /* PUT ID OF NUCLEUS MEMBER IN 0596 00337000
*                                      CVT                           */ 00338000
*                                                                  0596 00339000
         L     @02,CVTEXT2(,RCVT)                                  0596 00340000
         MVC   CVTNUCLS(1,@02),IPLDNUCM(NP0IPLD)                   0596 00341000
*   /*****************************************************************/ 00342000
*   /*                                                               */ 00343000
*   /* SET UP PARAMETERS AND USE IOSGEN MACRO TO INVOKE UCB LOOK-UP  */ 00344000
*   /* ALGORITHM TO GET ADDR. OF UCB FOR IPL DEVICE                  */ 00345000
*   /*                                                               */ 00346000
*   /*****************************************************************/ 00347000
*                                                                  0597 00348000
*   RFY                                                            0597 00349000
*    (RENTRY,                                                      0597 00350000
*     R6,                                                          0597 00351000
*     UCBADR) RSTD;                                                0597 00352000
*   R6=NP0IPLU;                     /* PUT IPL DEVICE ADDR. IN PARAM    00353000
*                                      REG FOR IOSGEN                */ 00354000
         SLR   R6,R6                                               0598 00355000
         ICM   R6,3,NP0IPLU                                        0598 00356000
*   GENERATE REFS(CVTILK1,CVTILK2,CVTIXAVL,CVTPTR,CVTMAP,CVTILCH,  0599 00357000
*       IOCOMEX,UCBOB,UCBCHAN,UCBFL5,UCBLCI,LCH,LCHTCH,IOCOM,IOX,  0599 00358000
*       IOCUCBBM,IOXHICH);                                         0599 00359000
*                                                       /*@YM06032*/    00360000
        CNOP  0,4                                                       00361000
        IOSGEN UCBLOOK,UCB=(7),REG=(6)                                  00362000
*/* ON RETURN; REG 15 CONTAINS A RETURN CODE                       */*  00363000
*/*   IF REG 15 = 0  UCB FOUND, UCB ADDR IN REG 7.                 */*  00364000
*/*   IF REG 15 ^= 0  UCB NOT FOUND                                */*  00365000
        LTR   15,15             */*CHECK RETURN CODE               */*  00366000
        BNZ   NP0NIPLU          */*IF NON-ZERO, BRANCH TO A RTN TO */*  00367000
*/*                                LOAD WAIT STATE PSW             */*  00368000
*   RFY                                                            0600 00369000
*    (R1,                                                          0600 00370000
*     RENTRY,                                                      0600 00371000
*     R6) UNRSTD;                                                  0600 00372000
*   NPBNUCBA=UCBADR;                /* PUT UCB ADDR IN DEB FOR     0601 00373000
*                                      SYS1.NUCLEUS DATA SET         */ 00374000
         STCM  UCBADR,7,NPBNUCBA                                   0601 00375000
*   CVTSYSAD=UCBADR;                /* PUT UCB ADDR IN CVT           */ 00376000
         ST    UCBADR,CVTSYSAD(,RCVT)                              0602 00377000
*   RFY                                                            0603 00378000
*    (UCBOB) BASED(NPBNUCBA);                                      0603 00379000
*   RFY                                                            0604 00380000
*    (UCBADR) UNRSTD;                                              0604 00381000
*   UCBPRES='1'B;                   /* TURN ON PERM. RESID. UCB FLAG */ 00382000
*   UCBSYSR='1'B;                   /* TURN ON SYS.RESID UCB FLAG    */ 00383000
         SLR   @02,@02                                             0606 00384000
         ICM   @02,7,NPBNUCBA                                      0606 00385000
         OI    UCBPRES(@02),B'00000110'                            0606 00386000
*   UCBVOLI=IPLDVSER;               /* PUT VOL. SER. OF IPL VOLUME IN   00387000
*                                      UCB                           */ 00388000
         MVC   UCBVOLI(6,@02),IPLDVSER(NP0IPLD)                    0607 00389000
*/********************************************************************/ 00390000
*/*                                                                  */ 00391000
*/* SET UP TO CONVERT MBBCCHHR MACHINE ADDRESSES TO TTR ADDRESSES.   */ 00392000
*/* CONVERT RTN (IECPRLTV) EXPECTS AS INPUT:                         */ 00393000
*/*                  R1 - ADDR OF THE DEB FOR THE DATA SET           */ 00394000
*/*                  R2 - ADDR OF 8 BYTE AREA CONTAINING             */ 00395000
*/*                       'MBBCCHHR' MACHINE ADDRESS                 */ 00396000
*/*                  R14 - RETURN ADDR                               */ 00397000
*/*                  R15 - ADDR OF 'IECPRLTV' RTN.                   */ 00398000
*/* CONVERT RTN OUTPUT:                                              */ 00399000
*/*                  R0 - TTRN, REL. ADDR, N IS CATENATION NUMBER    */ 00400000
*/*                                                                  */ 00401000
*/* NOTE: THE 'IECPRLTV' ROUTINE USES REGISTERS 9 - 13 BUT DOES NOT  */ 00402000
*/* RESTORE THEM, THUS THE CALLER SHOULD PRESERVE THE REGISTERS IF   */ 00403000
*/* THEY CONTAIN VALUABLE INFORMATION.                               */ 00404000
*/*                                                                  */ 00405000
*/* THE CONVERT ROUTINE DOES NOT USE REGISTERS 3 - 8                 */ 00406000
*/****************************************************************** */ 00407000
*                                                                  0608 00408000
*   NP0ACTA1=IPLDVTOC;              /* PUT MACH.ADDR.OF IPL VOL VTOC    00409000
*                                      IN WORKAREA                   */ 00410000
         MVC   NP0ACTA1(5),IPLDVTOC(NP0IPLD)                       0608 00411000
*   RFY                                                            0609 00412000
*    (WORKPTR,                                                     0609 00413000
*     DEBPNTR,                                                     0609 00414000
*     RENTRY,                                                      0609 00415000
*     REXIT,                                                       0609 00416000
*     RTTRN,                                                       0609 00417000
*     R6) RSTD;                                                    0609 00418000
*   WORKPTR=ADDR(NP0ACTAD);         /* PUT ADDR 8-BYTE WORK AREA IN     00419000
*                                      PARAM. REG                    */ 00420000
         LA    WORKPTR,NP0ACTAD                                    0610 00421000
*   DEBPNTR=ADDR(NIPDEBSN);         /* PUT DEB ADDR IN PARAM REG     */ 00422000
         LA    DEBPNTR,NIPDEBSN                                    0611 00423000
*   R6=ADDR(NREGSAV);               /* PICK UP ADDR OF REG SAVE AREA */ 00424000
         LA    R6,NREGSAV                                          0612 00425000
*   GEN(STM     9,13,0(R6));        /* SAVE REG'S 9 - 13             */ 00426000
         STM     9,13,0(R6)                                             00427000
*   RENTRY=CVTPRLTV;                /* PICK UP ADDR OF IECPRLTV RTN  */ 00428000
         L     RENTRY,CVTPRLTV(,RCVT)                              0614 00429000
*   GEN(BALR   REXIT,RENTRY);       /* BRANCH TO CONVERT RTN         */ 00430000
         BALR   REXIT,RENTRY                                            00431000
*   GEN(LM     9,13,0(R6));         /* RESTORE REG'S 9 - 13          */ 00432000
         LM     9,13,0(R6)                                              00433000
*   UCBVTOC=RTTRN;                  /* PUT TTR ADDR IN IPL UCB       */ 00434000
         SLR   @07,@07                                             0617 00435000
         ICM   @07,7,NPBNUCBA                                      0617 00436000
         ST    RTTRN,UCBVTOC(,@07)                                 0617 00437000
*   UCBCHAN=NP0IPLU;                /* OVERLAY CHAN ADDR. IN IPL UCB    00438000
*                                      IN CASE ALT. CHAN. PATH ADDR.    00439000
*                                      IS NOT SET TO CHAN USED IN IPL*/ 00440000
*                                                                  0618 00441000
         MVC   UCBCHAN(2,@07),NP0IPLU                              0618 00442000
*   /*****************************************************************/ 00443000
*   /*                                                               */ 00444000
*   /* DEB INITIALIZATION FOR SYS1.NUCLEUS                           */ 00445000
*   /*                                                               */ 00446000
*   /*****************************************************************/ 00447000
*                                                                  0619 00448000
*   NP0NSTCH=NIPLNUCS;              /* PUT CCHH START ADDR. OF SYS1.    00449000
*                                      NUCLEUS DATA SET IN DEB       */ 00450000
         MVC   NP0NSTCH(4),NIPLNUCS(NP0IPLD)                       0619 00451000
*   NP0NNDCH=NIPLNUCE;              /* PUT CCHH END ADDR.OF SYS1.  0620 00452000
*                                      NUCLEUS DATA SET IN DEB       */ 00453000
         MVC   NP0NNDCH(4),NIPLNUCE(NP0IPLD)                       0620 00454000
*   NP0ACTA3=0;                     /* ZERO OUT 'R' BYTE IN 8-BYTE 0621 00455000
*                                      WORK AREA                     */ 00456000
         MVI   NP0ACTA3,X'00'                                      0621 00457000
*   NP0ACTA2=NIPLNUCS;              /* PUT SYS1.NUCLEUS START ADDR IN   00458000
*                                      WORKAREA                      */ 00459000
         MVC   NP0ACTA2(4),NIPLNUCS(NP0IPLD)                       0622 00460000
*   GEN(STM     9,13,0(R6));        /* SAVE REG'S 9 - 13             */ 00461000
         STM     9,13,0(R6)                                             00462000
*   RENTRY=CVTPRLTV;                /* LOAD ADDR OF IECPRLTV RTN     */ 00463000
         L     RENTRY,CVTPRLTV(,RCVT)                              0624 00464000
*   GEN(BALR    REXIT,RENTRY);      /* BRANCH TO CONVERT RTN         */ 00465000
         BALR    REXIT,RENTRY                                           00466000
*   GEN(LM     9,13,0(R6));         /* RESTORE REG'S 9 - 13          */ 00467000
         LM     9,13,0(R6)                                              00468000
*   NP0RELAD=RTTRN;                 /* SAVE TTR ADDR.                */ 00469000
         LR    NP0RELAD,RTTRN                                      0627 00470000
*   NP0ACTA2=NIPLNUCE;              /* PUT SYS1.NUCLEUS END ADDR. IN    00471000
*                                      WORKAREA                      */ 00472000
         MVC   NP0ACTA2(4),NIPLNUCE(NP0IPLD)                       0628 00473000
*   GEN(STM     9,13,0(R6));        /* SAVE REG'S 9 - 13             */ 00474000
         STM     9,13,0(R6)                                             00475000
*   RENTRY=CVTPRLTV;                /* LOAD ADDR OF IECPRLTV RTN     */ 00476000
         L     RENTRY,CVTPRLTV(,RCVT)                              0630 00477000
*   GEN(BALR     REXIT,RENTRY);     /* BRANCH TO CONVERT RTN         */ 00478000
         BALR     REXIT,RENTRY                                          00479000
*   GEN(LM     9,13,0(R6));         /* RESTORE REG'S 9 - 13          */ 00480000
         LM     9,13,0(R6)                                              00481000
*   RFY                                                            0633 00482000
*    (R6) UNRSTD;                                                  0633 00483000
*   RTTRN=RTTRN-NP0RELAD;           /* CALC. SIZE OF SYS1.NUCLEUS  0634 00484000
*                                      DATA SET                      */ 00485000
         SLR   RTTRN,NP0RELAD                                      0634 00486000
*   GEN(SRL  RTTRN,16);             /* CLEAR THE 'RN' FIELD OF 'TTRN'   00487000
*                                      REL. ADDR.                    */ 00488000
         SRL  RTTRN,16                                                  00489000
*   NPBNNTRK=RTTRN+1;               /* PUT NUMBER OF TRACKS IN SYS1.    00490000
*                                      NUCLEUS IN DEB FOR THAT DATA     00491000
*                                      SET                   @YA00098*/ 00492000
         LR    @05,RTTRN                                           0636 00493000
         AH    @05,@CH00070                                        0636 00494000
         STH   @05,NPBNNTRK                                        0636 00495000
*   NPBNAPAD=CVTXAPG;               /* PUT ADDR. OF SYSTEM APPENDAGE    00496000
*                                      VECTOR TABLE IN SYS1.NUCLEUS     00497000
*                                      DEB                           */ 00498000
         MVC   NPBNAPAD(3),CVTXAPG+1(RCVT)                         0637 00499000
*/* NOTE: 'NIPDEBSN' IS NIP'S OWN MAP OF A DEB.  TO SET THE APF FLAG */ 00500000
*/*       WE NEED THE STANDARD MAPPING MACRO SINCE THERE IS NO       */ 00501000
*/*       ASSURANCE 'NIPDEBSN' MAPS THE FLAG.                        */ 00502000
*                                                                  0638 00503000
*   DEBPTR=ADDR(NIPDEBSN);          /* PUT ADDR. OF DEB FOR        0638 00504000
*                                      SYS1.NUCLEUS DATA SET IN BASE    00505000
*                                      FOR DEB MAP                   */ 00506000
         LA    DEBPTR,NIPDEBSN                                     0638 00507000
*   DEBAPFIN='1'B;                  /* TURN ON AUTHORIZED PROGRAM  0639 00508000
*                                      FACILITY FLAG IN THE DEB FOR     00509000
*                                      THE SYS1.NUCLEUS DATA SET     */ 00510000
         OI    DEBAPFIN(DEBPTR),B'00000010'                        0639 00511000
*   RFY                                                            0640 00512000
*    (WORKPTR,                                                     0640 00513000
*     DEBPNTR,                                                     0640 00514000
*     RENTRY,                                                      0640 00515000
*     REXIT,                                                       0640 00516000
*     RTTRN,                                                       0640 00517000
*     R6) UNRSTD;                                                  0640 00518000
*                                                                  0640 00519000
*/* CHECK FOR  NON-370 CPU                                           */ 00520000
*                                                                  0641 00521000
*   PCBR10=ADDR(NP0N370);           /* RE-SET P/C TRAP TO NON-370  0641 00522000
*                                      ERROR RTN.                    */ 00523000
         LA    PCBR10,NP0N370                                      0641 00524000
*/* GET ID OF IPL CPU                                                */ 00525000
*                                                                  0642 00526000
*   GEN(STIDP  NP0CPUID)                                           0642 00527000
*   REFS(NP0CPUID);                 /* INSTRUCTION WILL PROG. CHECK     00528000
*                                      IF CPU IS NOT A 370 MODEL     */ 00529000
         STIDP  NP0CPUID                                                00530000
*   CVTMDL=NP0MODNO;                /* PUT MODEL NUMBER IN CVT       */ 00531000
         LR    @02,RCVT                                            0643 00532000
         AL    @02,@CF05593                                        0643 00533000
         MVC   CVTMDL-250(2,@02),NP0MODNO                          0643 00534000
*   IF NP0MODNO=MOD168 THEN         /* IF PROCESSOR IS 168   @Z30LQXA*/ 00535000
         CLC   NP0MODNO(2),MOD168                                  0644 00536000
         BNE   @RF00644                                            0644 00537000
*     IF NP0NOCRH='1'B THEN         /* IF HAS NO CRH         @Z30LQXA*/ 00538000
         TM    NP0NOCRH,B'10000000'                                0645 00539000
         BNO   @RF00645                                            0645 00540000
*       CVTIXAVL->IOCOMEX->IOXCRHA=0;/* INDICATE TO IOS THAT THIS  0646 00541000
*                                      PROCESSOR HAS NO CRH  @Z30LQXA*/ 00542000
         L     @02,CVTIXAVL(,RCVT)                                 0646 00543000
         L     @02,IOCOMEX(,@02)                                   0646 00544000
         SLR   @15,@15                                             0646 00545000
         ST    @15,IOXCRHA(,@02)                                   0646 00546000
*     ELSE                                                         0647 00547000
*       ;                           /* 168 W/CRH, IOXCRHA    @G47AN2O   00548000
*                                      SET BY SYSGEN         @G47AN2O*/ 00549000
@RF00645 DS    0H                                                  0648 00550000
*   ELSE                                                           0648 00551000
*     CVTIXAVL->                    /* CVT -> IOCOM          @G47AN2O*/ 00552000
*         IOCOMEX->                 /* IOCOM -> IOCX         @G47AN2O*/ 00553000
*         IOXCRHA=0;                /* NO CRH FOR A ...      @G47AN2O   00554000
*                                      ... NON 168           @G47AN2O*/ 00555000
*                                                                  0648 00556000
         B     @RC00644                                            0648 00557000
@RF00644 L     @02,CVTIXAVL(,RCVT)                                 0648 00558000
         L     @02,IOCOMEX(,@02)                                   0648 00559000
         SLR   @15,@15                                             0648 00560000
         ST    @15,IOXCRHA(,@02)                                   0648 00561000
*   /*****************************************************************/ 00562000
*   /*                                                               */ 00563000
*   /* SET THE CPU CLOCKS TO HIGH VALUES SO NO TIMER INTERRUPTS WILL */ 00564000
*   /* OCCUR WHEN SUCH INTERRUPTS ARE ENABLED. SET CPU TIMER AND     */ 00565000
*   /* CLOCK COMPARATOR TO A HIGH VALUE                              */ 00566000
*   /*                                                               */ 00567000
*   /*****************************************************************/ 00568000
*                                                                  0649 00569000
*   GEN(SPT  NP0CTVAL)                                             0649 00570000
*   REFS(NP0CTVAL);                 /* SET CPU TIMER                 */ 00571000
@RC00644 DS    0H                                                  0649 00572000
         SPT  NP0CTVAL                                                  00573000
*   GEN(SCKC  NP0CKVAL)                                            0650 00574000
*   REFS(NP0CKVAL);                 /* SET CLOCK COMPARATOR          */ 00575000
*                                                                  0650 00576000
         SCKC  NP0CKVAL                                                 00577000
*   /*****************************************************************/ 00578000
*   /*                                                               */ 00579000
*   /* THESE INSTRUCTIONS WILL PROG. CHECK IF CPU IS NOT A 370 MODEL */ 00580000
*   /* CHECK FOR RELOCATE FEATURE ON THE IPL CPU                     */ 00581000
*   /*                                                               */ 00582000
*   /*****************************************************************/ 00583000
*                                                                  0651 00584000
*   PCBR10=ADDR(NP0NREL);           /* RE-SET P/C TRAP TO          0651 00585000
*                                      NON-RELOCATE ERROR RTN.       */ 00586000
         LA    PCBR10,NP0NREL                                      0651 00587000
*   GEN(PTLB       );               /* GENERATE PTLB INSTRUCTION,  0652 00588000
*                                      WILL PROG.CHECK IF RELOCATE 0652 00589000
*                                      FEATURE IS NOT INSTALLED ON 0652 00590000
*                                      THIS CPU                      */ 00591000
*                                                                  0652 00592000
         PTLB                                                           00593000
*   /*****************************************************************/ 00594000
*   /*                                                               */ 00595000
*   /* CHECK FOR 'IPK'/'SPKA' INSTRUCTIONS ON THE IPL CPU. THE TWO   */ 00596000
*   /* INSTR'S ARE BOTH INSTALLED OR NEITHER IS INSTALLED. THUS, A   */ 00597000
*   /* CHECK FOR ONE CHECKS FOR BOTH.                                */ 00598000
*   /*                                                               */ 00599000
*   /*****************************************************************/ 00600000
*                                                                  0653 00601000
*   RFY                                                            0653 00602000
*    (R2) RSTD;                                                    0653 00603000
*   PCBR10=ADDR(NP0NIPK);           /* RE-SET P/C TRAP TO 'NON-IPK'     00604000
*                                      RTN                           */ 00605000
         LA    PCBR10,NP0NIPK                                      0654 00606000
*   GEN(IPK       );                /* GENERATE THE INSTRUCTION      */ 00607000
         IPK                                                            00608000
*   RFY                                                            0656 00609000
*    (R2) UNRSTD;                                                  0656 00610000
*                                                                  0656 00611000
*/* CHECK FOR 'CS'/'CDS' INSTRUCTIONS ON THE IPL CPU. THE TWO INSTR'S*/ 00612000
*/* ARE BOTH INSTALLED OR NEITHER IS INSTALLED.  THUS A CHECK FOR    */ 00613000
*/* ONE CHECKS FOR BOTH.                                             */ 00614000
*                                                                  0657 00615000
*   RFY                                                            0657 00616000
*    (R6,                                                          0657 00617000
*     R7) RSTD;                                                    0657 00618000
*   PCBR10=ADDR(NP0NCS);            /* RE-SET P/C TRAP TO 'NON-CS' 0658 00619000
*                                      RTN                           */ 00620000
         LA    PCBR10,NP0NCS                                       0658 00621000
*   GEN(CS       R6,R7,CHEKWORD);   /* GENERATE THE INSTRUCTION      */ 00622000
         CS       R6,R7,CHEKWORD                                        00623000
*   RFY                                                            0660 00624000
*    (R6,                                                          0660 00625000
*     R7) UNRSTD;                                                  0660 00626000
*                                                                  0660 00627000
*   /*****************************************************************/ 00628000
*   /*                                                               */ 00629000
*   /* SET UP TO TEST FOR EXTENDED FLOATING POINT FEATURE            */ 00630000
*   /*                                                               */ 00631000
*   /*****************************************************************/ 00632000
*                                                                  0661 00633000
*   PCBR10=ADDR(NP0CONT);           /* CONTINUATION ADDRESS IF NOT 0661 00634000
*                                      INSTALLED                     */ 00635000
         LA    PCBR10,NP0CONT                                      0661 00636000
*   GEN(LRER 0,0);                  /* TRY EXFP INST         @Z30ENXA*/ 00637000
*                                                                  0662 00638000
         LRER 0,0                                                       00639000
*   /*****************************************************************/ 00640000
*   /*                                                               */ 00641000
*   /* IF CONTROL REACHES THIS POINT SET FLAG IN CVT INDICATING THAT */ 00642000
*   /* EXTENDED FLOATING POINT FEATURE EXISTS                        */ 00643000
*   /*                                                               */ 00644000
*   /*****************************************************************/ 00645000
*                                                                  0663 00646000
*   CVTXPFP='1'B;                   /* SET FEATURE FLAG      @Z30ENXA*/ 00647000
*                                                                  0663 00648000
         OI    CVTXPFP(RCVT),B'00000001'                           0663 00649000
*   /*****************************************************************/ 00650000
*   /*                                                               */ 00651000
*   /* RE-SET PROG. CHECK TRAP TO UNEXPECTED P/C RTN                 */ 00652000
*   /*                                                               */ 00653000
*   /*****************************************************************/ 00654000
*                                                                  0664 00655000
*NP0CONT:                                                          0664 00656000
*   PCBR10=ADDR(NP0UXPC);                                          0664 00657000
*                                                                  0664 00658000
NP0CONT  LA    PCBR10,NP0UXPC                                      0664 00659000
*   /*****************************************************************/ 00660000
*   /*                                                               */ 00661000
*   /* GET THE ADDRESS OF THE END OF NIP0 CSECT. THIS VALUE WILL BE  */ 00662000
*   /* USED TO BUILD NIP0'S STORAGE MAP.                             */ 00663000
*   /*                                                               */ 00664000
*   /*****************************************************************/ 00665000
*                                                                  0665 00666000
*   NVTSTMAP=NPFTCHE;               /* NVT FIELD WHICH POINTS TO   0665 00667000
*                                      NIP0'S STORAGE MAP    @ZMXXXXX*/ 00668000
         L     @15,NPFTCHE                                         0665 00669000
         ST    @15,NVTSTMAP                                        0665 00670000
*   INDXPTR=NVTSTMAP;               /* PUT SAME ADDR. IN PTR. USED IN   00671000
*                                      ACCESSING THE MAP             */ 00672000
         LR    INDXPTR,@15                                         0666 00673000
*/* PUT ADDR. OF NEXT AVAIL. BYTE IN NUC. BUFF. IN NIP0 POINTER      */ 00674000
*                                                                  0667 00675000
*   NP0NBAVL=NVTSTMAP+LENGTH(NP0STMAP);                            0667 00676000
*                                                                  0667 00677000
         LH    @14,@CH04248                                        0667 00678000
         LR    @07,@15                                             0667 00679000
         ALR   @07,@14                                             0667 00680000
         ST    @07,NP0NBAVL                                        0667 00681000
*   /*****************************************************************/ 00682000
*   /*                                                               */ 00683000
*   /* THE STORAGE MAP HAS A ONE BYTE ENTRY FOR EACH POSSIBLE FRAME  */ 00684000
*   /* IN A SYSTEM WITH 16MB OF REAL STORAGE. THUS THE MAP ITSELF IS */ 00685000
*   /* 4K IN SIZE. THE MAP ENTRIES ARE IN A 1-1 CORRESPONDENCE WITH  */ 00686000
*   /* THE ADDRESSES OF THE REAL FRAMES THEY REPRESENT.(I.E. THE     */ 00687000
*   /* FIRST ENTRY IN THE TABLE REPRESENTS THE FIRST REAL FRAME,ETC) */ 00688000
*   /* A MAP ENTRY OF X'00' INDICATES THAT THE CORRESPONDING FRAME IS*/ 00689000
*   /* ONLINE, AN ENTRY OF X'01' INDICATES THAT THE CORRESPONDING    */ 00690000
*   /* FRAME IS OFFLINE. NO OTHER MAP ENTRIES HAVE BEEN DEFINED TO   */ 00691000
*   /* DATE THE MAP IS BUILT, DYNAMICALLY, JUST ABOVE THE HIGH END OF*/ 00692000
*   /* THE NIP0 CSECT CLEAR THE MAP TO ZEROS (ALL FRAMES INDICATED   */ 00693000
*   /* ONLINE) SET UP TO CALL SUBROUTINE TO CLEAR AN AREA TO ZEROS   */ 00694000
*   /*                                                               */ 00695000
*   /*****************************************************************/ 00696000
*                                                                  0668 00697000
*   NCLRBASE=NVTSTMAP;              /* SET UP VIRT. ADDR. OF AREA TO    00698000
*                                      BE CLEARED                    */ 00699000
         LR    NCLRBASE,@15                                        0668 00700000
*   NCLRLEN=4096;                   /* SET UP LENGTH OF AREA TO BE 0669 00701000
*                                      CLEARED                       */ 00702000
         STH   @14,NCLRLEN                                         0669 00703000
*   CALL NIP0CLRZ;                  /* CALL THE SUB ROUTINE          */ 00704000
         BAL   @14,NIP0CLRZ                                        0670 00705000
*/* CHECK IF HAVE 16MB OF ONLINE REAL STORAGE                        */ 00706000
*                                                                  0671 00707000
*   RFY                                                            0671 00708000
*    (MAPINDX) RSTD;                                               0671 00709000
*   IF NP0STSZ<16777216             /* COMPARE ONLINE STORAGE SIZE TO*/ 00710000
*     THEN                          /* 16MB. IF LESS, GET ADDRESS OF */ 00711000
         L     @05,NP0STSZ                                         0672 00712000
         C     @05,@CF05001                                        0672 00713000
         BNL   @RF00672                                            0672 00714000
*     DO;                           /* NEXT FRAME ABOVE HIGHEST    0673 00715000
*                                      ONLINE FRAME AND CONVERT      */ 00716000
*       MAPINDX=NP0STSZ;            /* IT TO AN INDEX INTO           */ 00717000
         LR    MAPINDX,@05                                         0674 00718000
*       GEN(SRL     MAPINDX,12);    /* STORAGE MAP                   */ 00719000
         SRL     MAPINDX,12                                             00720000
*/*  CALCULATE NUMBER OF FRAMES APPARENTLY NOT  ONLINE               */ 00721000
*                                                                  0676 00722000
*       MAPINDX=NVTSTMAP+MAPINDX;   /* CALC. ADDR OF MAP ENTRY CORRES   00723000
*                                      TO THIS FRAME                 */ 00724000
         AL    MAPINDX,NVTSTMAP                                    0676 00725000
*       NP0NOFL=(16777216-NP0STSZ)/4096;                           0677 00726000
         L     @00,@CF05001                                        0677 00727000
         SL    @00,NP0STSZ                                         0677 00728000
         SRDA  @00,32                                              0677 00729000
         D     @00,@CF04248                                        0677 00730000
         LR    NP0NOFL,@01                                         0677 00731000
*       DO I=NP0NOFL TO 1 BY-1;                                    0678 00732000
         LR    I,NP0NOFL                                           0678 00733000
         B     @DE00678                                            0678 00734000
@DL00678 DS    0H                                                  0679 00735000
*         NP0MPBYT='01'X;           /* SET CURRENT MAP ENTRY POINTED    00736000
*                                      TO BY BASE REG. TO OFFLINE  0679 00737000
*                                      STATUS                        */ 00738000
         MVI   NP0MPBYT(MAPINDX),X'01'                             0679 00739000
*         MAPINDX=MAPINDX+1;        /* INCREMENT BASE REG TO NEXT  0680 00740000
*                                      ENTRY                         */ 00741000
         AH    MAPINDX,@CH00070                                    0680 00742000
*       END;                        /* LOOP UNTIL MAP ENTRIES ARE  0681 00743000
*                                      DONE                          */ 00744000
         BCTR  I,0                                                 0681 00745000
@DE00678 LTR   I,I                                                 0681 00746000
         BP    @DL00678                                            0681 00747000
*     END;                                                         0682 00748000
*   RFY                                                            0683 00749000
*    (MAPINDX) UNRSTD;                                             0683 00750000
*                                                                  0683 00751000
@RF00672 DS    0H                                                  0684 00752000
*   /*****************************************************************/ 00753000
*   /*                                                               */ 00754000
*   /* DETERMINE IF UNIPROCESSOR SYSTEM WAS SYSGENNED BY SPECIFYING  */ 00755000
*   /* ACRCODE=NO. IF UNIPROCESSOR, BRANCH AROUND TEST FOR MP        */ 00756000
*   /* CAPABILITY AND INITIALIZE SYSTEM AS A UNIPROCESSOR. THIS      */ 00757000
*   /* ALLOWS A UP SYSTEM TO BE IPL'D ON AN MP HALF-DUPLEX MACHINE.  */ 00758000
*   /*                                                       @YM02441*/ 00759000
*   /*                                                               */ 00760000
*   /*****************************************************************/ 00761000
*                                                                  0684 00762000
*   IF CVTNOMP='1'B|                /* IF ACRCODE=NO WAS SPECIFIED 0684 00763000
*                                      THEN                  @YM02441*/ 00764000
*       NP0MODNO=AU THEN            /* OR IF THE MODEL IS ACCELERATOR   00765000
*                                      UNIT                  @Z30LQXA*/ 00766000
         TM    CVTNOMP(RCVT),B'00000100'                           0684 00767000
         BO    @RT00684                                            0684 00768000
         CLC   NP0MODNO(2),AU                                      0684 00769000
         BE    @RT00684                                            0684 00770000
*     GOTO NP0NMP;                  /* INITIALIZE THE SYSTEM AS A  0685 00771000
*                                      UNIPROC               @YM03241*/ 00772000
*   PCBR10=ADDR(NP0NMP);            /* RESET P/C TRAP TO NON-MULTI-     00773000
*                                      PROCESSOR RTN (NOT AN ERROR 0686 00774000
*                                      RTN)                          */ 00775000
         LA    PCBR10,NP0NMP                                       0686 00776000
*   STPX(CHEKWORD);                 /* CHECK FOR MULTI-SYSTEM      0687 00777000
*                                      FEATURE. THIS INSTR. WILL   0687 00778000
*                                      (SHOULD) PROG. CHECK IF THE 0687 00779000
*                                      FEATURE IS NOT INSTALLED      */ 00780000
         STPX  CHEKWORD                                            0687 00781000
*/********************************************************************/ 00782000
*/* NOTE: IF THE MULTI-SYSTEM FEATURE IS INSTALLED, CERTAIN          */ 00783000
*/*       ASSOCIATED INSTRUCTIONS ARE INSTALLED ALSO.  THIS TEST     */ 00784000
*/*       ONLY CHECKS FOR THE INSTALLATION OF THE MULTI-SYSTEM       */ 00785000
*/*       FEATURE BY ATTEMPTING TO EXECUTE ONE OF THOSE ASSOCIATED   */ 00786000
*/*       INSTRUCTIONS.  THIS TEST DOES NOT CHECK FOR MULTI-         */ 00787000
*/*       PROCESSORS.  THE CONFIGURATION COULD HAVE THE MULTI-       */ 00788000
*/*       SYSTEM FEATURE INSTALLED YET HAVE ONLY ONE CPU INSTALLED,  */ 00789000
*/*       OR ONLY ONE CPU ONLINE AT THIS TIME.  FOR THE PURPOSES OF  */ 00790000
*/*       THIS ROUTINE, IF THE MULTI-SYSTEM FEATURE IS INSTALLED, THE*/ 00791000
*/*       CONFIGURATION IS, OR HAS THE CAPABILITY OF BEING, MULTI-   */ 00792000
*/*       PROCESSOR.                                                 */ 00793000
*/********************************************************************/ 00794000
*/*                                                            Y02751*/ 00795000
*                                                                  0688 00796000
*   STAP(NICPADR);                  /* IF MULTI-SYSTEM FEATURE IS  0688 00797000
*                                      INSTALLED, GET PHYS. ADDR. OF    00798000
*                                      THIS CPU.                     */ 00799000
         STAP  NICPADR                                             0688 00800000
*/********************************************************************/ 00801000
*/* THE 'STAP' INSTR. STORES THE PHYS. ADDR OF THE CPU IN THE HALF-  */ 00802000
*/* WORD OPERAND DESIGNATED IN THE INSTR. HARDWARE ALLOWS AN ADDRESS */ 00803000
*/* RANGE OF  X'0000' TO X'003F', BUT OS/VS2 SOFTWARE ONLY SUPPORTS  */ 00804000
*/* A RANGE OF X'0000' TO X'000F'.                                   */ 00805000
*/*                                                                  */ 00806000
*/********************************************************************/ 00807000
*                                                                  0689 00808000
*   /*****************************************************************/ 00809000
*   /*                                                               */ 00810000
*   /* STORAGE SCAN ROUTINE - ENTERED ONLY IF SYSTEM IS MP. THIS     */ 00811000
*   /* ROUTINE SCANS ALL POSSIBLE REAL ADDRESSES UP TO 16MB TO       */ 00812000
*   /* LOCATE, VERIFY AND SET TO ZEROS ALL FRAMES THAT ARE ONLINE BUT*/ 00813000
*   /* WERE NOT FOUND BY IPL RTN (IPL RTN GETS A P/C WHEN IT FINDS AN*/ 00814000
*   /* OFFLINE FRAME, THIS ROUTINE LOCATES ALL OTHER ONLINE FRAMES)  */ 00815000
*   /* THIS ROUTINE IS ENTERED ONLY FOR M.P. SYSTEMS BECAUSE THERE   */ 00816000
*   /* CAN BE NO HOLES IN STOREAGE AT IPL TIME FOR A UNIPROC.        */ 00817000
*   /*                                                       @YM02441*/ 00818000
*   /*                                                               */ 00819000
*   /*****************************************************************/ 00820000
*                                                                  0689 00821000
*NP0SSCAN:                          /* COME HERE IF HAVE M.P.      0689 00822000
*                                      CONFIGURATION                 */ 00823000
*/*                                                            Y02751*/ 00824000
*                                                                  0689 00825000
*   NVTMP='1'B;                     /* TURN ON BIT IN NVT INDICATING    00826000
*                                      M.P. CONFIGURATION            */ 00827000
NP0SSCAN OI    NVTMP,B'00100000'                                   0689 00828000
*/*                                                            Y02751*/ 00829000
*                                                                  0690 00830000
*   NP0EORM=NP0STSZ-1;              /* INITIALIZE A PTR TO CURRENT 0690 00831000
*                                      HIGH REAL ADDR        @YM06709*/ 00832000
         L     @02,NP0STSZ                                         0690 00833000
         LR    @15,@02                                             0690 00834000
         BCTR  @15,0                                               0690 00835000
         ST    @15,NP0EORM                                         0690 00836000
*/*                                                            Y02751*/ 00837000
*                                                                  0691 00838000
*   IF NP0STSZ^=16777216            /* IF ONLINE STOR IS LESS THAT 0691 00839000
*                                      16MB                          */ 00840000
*     THEN                          /* SCAN UP TO 16MB               */ 00841000
         C     @02,@CF05001                                        0691 00842000
         BE    @RF00691                                            0691 00843000
*     DO;                                                          0692 00844000
*                                                                  0692 00845000
*/*                                                            Y02751*/ 00846000
*                                                                  0693 00847000
*       FRMAD=NP0STSZ;              /* SET A PTR. TO BEGINNING ADDR     00848000
*                                      OF NEXT FRAME ABOVE CURRENT HI   00849000
*                                      ON- LINE FRAME                */ 00850000
         ST    @02,FRMAD                                           0693 00851000
*/*                                                            Y02751*/ 00852000
*                                                                  0694 00853000
*       PCBR10=ADDR(NP0SSRCV);      /* RE-SET P/C TRAP TO STORAGE  0694 00854000
*                                      SCAN RECOVERY ROUTINE         */ 00855000
         LA    PCBR10,NP0SSRCV                                     0694 00856000
*       RESPECIFY                                                  0695 00857000
*        (NP0KEY,                                                  0695 00858000
*         NP0BLK) RESTRICTED;                                      0695 00859000
*NP0SSLP:                                                          0696 00860000
*       INDXPTR=FRMAD;              /* SET INDEX TO CURR FRAME, THEN    00861000
*                                      LOOP TO SET THE FRAME TO 0'S  */ 00862000
NP0SSLP  L     INDXPTR,FRMAD                                       0696 00863000
*       RFY                                                        0697 00864000
*        (REG4,                                                    0697 00865000
*         REG5,                                                    0697 00866000
*         REG6,                                                    0697 00867000
*         REG7) RSTD;               /*                       @ZM00132*/ 00868000
*       REG4=INDXPTR;               /* ADDRESS TO ZERO       @YA00098*/ 00869000
         LR    REG4,INDXPTR                                        0698 00870000
*       REG5=4096;                  /* LENGTH TO ZERO        @YA00098*/ 00871000
         LH    REG5,@CH04248                                       0699 00872000
*       REG6=0;                     /* ZERO PAD CHARACTER    @YA00098*/ 00873000
         SLR   REG6,REG6                                           0700 00874000
*       REG7=0;                     /* ZERO FROM ADDRESS     @YA00098*/ 00875000
         SLR   REG7,REG7                                           0701 00876000
*       GEN(MVCL  REG4,REG6);       /* ZERO STORAGE          @YA00098*/ 00877000
         MVCL  REG4,REG6                                                00878000
*       RFY                                                        0703 00879000
*        (REG4,                                                    0703 00880000
*         REG5,                                                    0703 00881000
*         REG6,                                                    0703 00882000
*         REG7) UNRSTD;             /*                       @ZM00132*/ 00883000
*       NP0KEY=0;                   /* ZERO STORAGE KEY      @ZM00132*/ 00884000
         SLR   NP0KEY,NP0KEY                                       0704 00885000
*       NP0BLK=FRMAD;               /* PICK UP ADDR OF FIRST 2K BLOCK   00886000
*                                      IN IN THIS FRAME FOR SSK    0705 00887000
*                                      INSTR.                        */ 00888000
         L     NP0BLK,FRMAD                                        0705 00889000
*/*                                                            Y02751*/ 00890000
*                                                                  0706 00891000
*       GEN(SSK    NP0KEY,NP0BLK);  /* SET KEY TO 0                  */ 00892000
         SSK    NP0KEY,NP0BLK                                           00893000
*/*                                                            Y02751*/ 00894000
*                                                                  0707 00895000
*       NP0BLK=NP0BLK+2048;         /* UPDATE TO NEXT 2K BLK         */ 00896000
         AH    NP0BLK,@CH04619                                     0707 00897000
*/*                                                            Y02751*/ 00898000
*                                                                  0708 00899000
*       GEN(SSK    NP0KEY,NP0BLK);  /* SET KEY TO 0                  */ 00900000
         SSK    NP0KEY,NP0BLK                                           00901000
*/*                                                            Y02751*/ 00902000
*                                                                  0709 00903000
*       NP0EORM=FRMAD+4096-1;       /* UPDATE HI REAL ADDR FOUND SO     00904000
*                                      FAR                           */ 00905000
         L     @06,FRMAD                                           0709 00906000
         SH    @06,@CH05570                                        0709 00907000
         ST    @06,NP0EORM                                         0709 00908000
*/*                                                            Y02751*/ 00909000
*                                                                  0710 00910000
*       NP0STSZ=NP0STSZ+4096;       /* UPDATE COUNT OF ONLINE STORAGE*/ 00911000
         LH    @06,@CH04248                                        0710 00912000
         AL    @06,NP0STSZ                                         0710 00913000
         ST    @06,NP0STSZ                                         0710 00914000
*/*                                                            Y02751*/ 00915000
*                                                                  0711 00916000
*       GEN(SRL     NP0BLK,12);     /* GENERATE INDEX INTO STORAGE 0711 00917000
*                                      MAP FOR FRAME JUST VALIDATED     00918000
*                                      (ANY ADDR IN THE FRAME WILL 0711 00919000
*                                      DO)                           */ 00920000
         SRL     NP0BLK,12                                              00921000
*/*                                                            Y02751*/ 00922000
*                                                                  0712 00923000
*       NP0STMAP(NP0BLK+1)='00'X;   /* SET STORAGE MAP ENTRY CORRES.    00924000
*                                      TO THIS FRAME TO ONLINE STATUS   00925000
*                                      (ADJ FOR 1-ORIGIN INDEXING)   */ 00926000
         L     @06,NVTSTMAP                                        0712 00927000
         ALR   @06,NP0BLK                                          0712 00928000
         MVI   NP0STMAP(@06),X'00'                                 0712 00929000
*NP0TPCHK:                                                         0713 00930000
*                                                                  0713 00931000
*/*                                                            Y02751*/ 00932000
*                                                                  0713 00933000
*       IF FRMAD<(16777216-4096)    /* CHECK IF FRAME JUST PROCESSED */ 00934000
*         THEN                      /* WAS HIGHEST POSSIBLE FRAME    */ 00935000
NP0TPCHK L     @06,FRMAD                                           0713 00936000
         C     @06,@CF05571                                        0713 00937000
         BNL   @RF00713                                            0713 00938000
*         DO;                       /* IF NOT, UPDATE FRAME ADDR TO  */ 00939000
*/*                                                            Y02751*/ 00940000
*                                                                  0715 00941000
*           FRMAD=4096+FRMAD;       /* NEXT HIGHER FRAME AND TRY TO  */ 00942000
         AL    @06,@CF04248                                        0715 00943000
         ST    @06,FRMAD                                           0715 00944000
*/*                                                            Y02751*/ 00945000
*                                                                  0716 00946000
*           GOTO NP0SSLP;           /* SET IT TO ZEROS               */ 00947000
         B     NP0SSLP                                             0716 00948000
*         END;                                                     0717 00949000
*     END;                          /* CLOSE DO-LOOP                 */ 00950000
@RF00713 DS    0H                                                  0719 00951000
*/* GET HERE IF IPLTXT FOUND 16MB OF REAL STORAGE ON-LINE, OR WHEN   */ 00952000
*/* STOR SCAN ROUTINE COMPLETES                                      */ 00953000
*/*                                                            Y02751*/ 00954000
*                                                                  0719 00955000
*   PCBR10=ADDR(NP0UXPC);           /* RE-SET P/C TRAP TO UN-EXPECTED   00956000
*                                      P/C RTN                       */ 00957000
@RF00691 LA    PCBR10,NP0UXPC                                      0719 00958000
*/* CVTEORM FIELD CONTAINS A USER SPECIFIED VALUE OF MAX ONLINE STOR */ 00959000
*/* (M.P. CONFIGURATIONS ONLY)                                       */ 00960000
*/* THE VALUE IS ROUNDED DOWN TO A PAGE BOUNDARY AND THE LARGER      */ 00961000
*/* VALUE OF THE FOLLOWING IS PLACED IN CVTEORM :                    */ 00962000
*/*    (USER SPECIFIED MAXIMUM ADDRESS)                              */ 00963000
*/*                  OR                                              */ 00964000
*/*    (HIGH ADDRESS CURRENTLY ONLINE)                               */ 00965000
*/*                                                            Y02751*/ 00966000
*                                                                  0720 00967000
*   NP0UMXST=(CVTEORM               /* ROUND VALUE DOWN TO           */ 00968000
*       /4096)                      /* PAGE BOUND                    */ 00969000
*       *4096;                                                     0720 00970000
*                                                                  0720 00971000
         L     @06,CVTEORM(,RCVT)                                  0720 00972000
         SRL   @06,12                                              0720 00973000
         SLA   @06,12                                              0720 00974000
         ST    @06,NP0UMXST                                        0720 00975000
*/*                                                            Y02751*/ 00976000
*                                                                  0721 00977000
*   IF NP0UMXST>=NP0EORM            /* IF USER MAX IS        @OZ17829*/ 00978000
*     THEN                          /* LARGER, PUT THAT VALUE, LESS  */ 00979000
         C     @06,NP0EORM                                         0721 00980000
         BL    @RF00721                                            0721 00981000
*/*                                                            Y02751*/ 00982000
*                                                                  0722 00983000
*     CVTEORM=NP0UMXST-1;           /* ONE, IN CVTEORM (CVTEORM IS 0722 00984000
*                                      THE HIGHEST VALID ADDRESS, NOT   00985000
*                                      THE SIZE OF STORAGE)          */ 00986000
         BCTR  @06,0                                               0722 00987000
         ST    @06,CVTEORM(,RCVT)                                  0722 00988000
*   ELSE                            /* IF CURRENT ONLINE STORAGE     */ 00989000
*/*                                                            Y02751*/ 00990000
*                                                                  0723 00991000
*     CVTEORM=NP0EORM;              /* EXCEEDS USER MAX, PUT CURRENT    00992000
*                                      HI REAL ADDR IN CVT           */ 00993000
         B     @RC00721                                            0723 00994000
@RF00721 MVC   CVTEORM(4,RCVT),NP0EORM                             0723 00995000
*                                                                  0724 00996000
*   /*****************************************************************/ 00997000
*   /*                                                               */ 00998000
*   /* GET HERE IF CONFIGURATION IS UNI-PROCESSOR OR MULTI-PROCESSOR.*/ 00999000
*   /* DETERMINE IF WE HAVE MIN STOR REQUIREMENTS FOR THE IPL        */ 01000000
*   /*                                                       @YM02441*/ 01001000
*   /*                                                               */ 01002000
*   /*****************************************************************/ 01003000
*                                                                  0724 01004000
*NP0SS1:                                                           0724 01005000
*   IF NP0STSZ<786432               /* CHECK IF TOTAL ONLINE STOR IS    01006000
*                                      LESS THAN 768K.               */ 01007000
*     THEN                          /* IF SO, THEN                   */ 01008000
@RC00721 DS    0H                                                  0724 01009000
NP0SS1   CLC   NP0STSZ(4),@CF05014                                 0724 01010000
         BNL   @RF00724                                            0724 01011000
*     CALL NP0MSGF;                 /* CALL RTN. TO SET UP A MESSAGE    01012000
*                                      ABOUT THIS                    */ 01013000
         BAL   @14,NP0MSGF                                         0725 01014000
*   CVTRLSTG=NP0STSZ                /* PUT SIZE OF ONLINE STORAGE, IN*/ 01015000
*       /1024;                      /* 'K', IN CVT.                  */ 01016000
@RF00724 L     @06,NP0STSZ                                         0726 01017000
         SRL   @06,10                                              0726 01018000
         ST    @06,CVTRLSTG(,RCVT)                                 0726 01019000
*   RESPECIFY                                                      0727 01020000
*    (NP0KEY,                                                      0727 01021000
*     NP0BLK) UNRSTD;                                              0727 01022000
*NP0SQAI:                           /* SQA INITIALIZATION ROUTINE    */ 01023000
*/*   CALC. VIRT. ADDR. OF BEGINNING (LOW END) OF SQA                */ 01024000
*                                                                  0728 01025000
*   NP0VSQAP=16777216-(NVTNVSQA*65536);/* NUMBER OF SEGMENTS         */ 01026000
*                                                                  0728 01027000
NP0SQAI  L     @15,@CF05001                                        0728 01028000
         LH    @14,NVTNVSQA                                        0728 01029000
         SLA   @14,16                                              0728 01030000
         LCR   @14,@14                                             0728 01031000
         ALR   @14,@15                                             0728 01032000
         ST    @14,NP0VSQAP                                        0728 01033000
*   /*****************************************************************/ 01034000
*   /*                                                               */ 01035000
*   /* CALC REAL ADDR OF BEGINNING (LOW END) OF SQA                  */ 01036000
*   /*                                                               */ 01037000
*   /*****************************************************************/ 01038000
*                                                                  0729 01039000
*   NP0RSQAP=1+NP0EORM-(NVTSQANO*4096);                            0729 01040000
         LA    @14,1                                               0729 01041000
         AL    @14,NP0EORM                                         0729 01042000
         LH    @07,NVTSQANO                                        0729 01043000
         SLA   @07,12                                              0729 01044000
         LCR   @07,@07                                             0729 01045000
         ALR   @07,@14                                             0729 01046000
         ST    @07,NP0RSQAP                                        0729 01047000
*   NFRRSLEN=YSTAKLEN;              /* PUT LENGTH OF FRR STACKS IN 0730 01048000
*                                      TABLE OF CTL BLOCKS TO BE   0730 01049000
*                                      ALLOCATED FROM SQA            */ 01050000
         MVC   NFRRSLEN(4),@CF03735                                0730 01051000
*   ENQLNG=((Q40*40)+(Q32*32)+(Q24*24)+(Q16*16)+(Q8*8));/* LENGTH  0731 01052000
*                                                            @Z30BNXA*/ 01053000
*                                                                  0731 01054000
         L     @07,Q40                                             0731 01055000
         MH    @07,@CH00810                                        0731 01056000
         L     @06,Q32                                             0731 01057000
         SLA   @06,5                                               0731 01058000
         ALR   @07,@06                                             0731 01059000
         L     @06,Q24                                             0731 01060000
         MH    @06,@CH00079                                        0731 01061000
         ALR   @07,@06                                             0731 01062000
         L     @06,Q16                                             0731 01063000
         SLA   @06,4                                               0731 01064000
         ALR   @07,@06                                             0731 01065000
         L     @06,Q8                                              0731 01066000
         SLA   @06,3                                               0731 01067000
         ALR   @07,@06                                             0731 01068000
         ST    @07,ENQLNG                                          0731 01069000
*   /*****************************************************************/ 01070000
*   /*                                                               */ 01071000
*   /* SET SIZE OF CPU RELATED SAVE AREAS FOR CONFIGURATION          */ 01072000
*   /*                                                               */ 01073000
*   /*****************************************************************/ 01074000
*                                                                  0732 01075000
*   NPCPUSA=LGTH*8;                 /* SIZE SET FROM TABLE IN WSAVT     01076000
*                                                            @ZM30488*/ 01077000
*                                                                  0732 01078000
         L     @01,CVTWSAC(,RCVT)                                  0732 01079000
         LH    @07,LGTH(,@01)                                      0732 01080000
         SLA   @07,3                                               0732 01081000
         ST    @07,NPCPUSA                                         0732 01082000
*   /*****************************************************************/ 01083000
*   /*                                                               */ 01084000
*   /* SET UP PARAM AREA FOR SPACE ALLOC RTN                         */ 01085000
*   /*                                                               */ 01086000
*   /*****************************************************************/ 01087000
*                                                                  0733 01088000
*   NP0SATBL=ADDR(NP0SQACB);        /* PUT ADDR OF TABLE OF CTL BLK     01089000
*                                      LENGTHS TO BE ALLOC FROM SQA     01090000
*                                      IN PARAMETER AREA             */ 01091000
         LA    NP0SATBL,NP0SQACB                                   0733 01092000
*   NP0SAHIR=NP0EORM+1;             /* PUT HI REAL ADDR TO BE USED BY   01093000
*                                      SUB RTN IN PARAM AREA         */ 01094000
         LR    NP0SAHIR,@14                                        0734 01095000
*   NP0SAHIV=16777216;              /* PUT HI VIRT ADDR TO BE USED BY   01096000
*                                      SUB RTN IN PARAM AREA.        */ 01097000
         LR    NP0SAHIV,@15                                        0735 01098000
*/* NOTE: SPACE ALLOCATION ROUTINE ALLOCATES SPACE FROM TOP (HI      */ 01099000
*/*       ADDRESS) DOWN.                                             */ 01100000
*                                                                  0736 01101000
*   CALL NSPALLOC;                  /* CALL SPACE ALLOC. SUBROUTINE  */ 01102000
         BAL   @14,NSPALLOC                                        0736 01103000
*   NP0RSQAV=NP0SAHIR;              /* SAVE REAL ADDR OF NEXT LOWER     01104000
*                                      AVAILABLE BYTE IN SQA         */ 01105000
         ST    NP0SAHIR,NP0RSQAV                                   0737 01106000
*   NP0VSQAV=NP0SAHIV;              /* SAVE VIRT ADDR OF NEXT LOWER     01107000
*                                      AVAILABLE BYTE IN SQA         */ 01108000
*                                                                  0738 01109000
         ST    NP0SAHIV,NP0VSQAV                                   0738 01110000
*   /*****************************************************************/ 01111000
*   /*                                                               */ 01112000
*   /* INIT CVT FIELDS                                               */ 01113000
*   /*                                                               */ 01114000
*   /*****************************************************************/ 01115000
*                                                                  0739 01116000
*   CVTSHRVM=NVTLSQAS;              /* BEGINNING OF SHARED MEMORY  0739 01117000
*                                                            @Z30ENXA*/ 01118000
         MVC   CVTSHRVM(4,RCVT),NVTLSQAS                           0739 01119000
*   TABPTR=ADDR(NGDA);              /* SET PTR TO REAL ADDR OF TABLE    01120000
*                                      ENTRY FOR GDA                 */ 01121000
         LA    @15,NGDA                                            0740 01122000
         LR    TABPTR,@15                                          0740 01123000
*   CVTGDA=NP0VADDR;                /* PUT VIRT ADDR OF GDA IN CVT   */ 01124000
         MVC   CVTGDA(4,RCVT),NP0VADDR(TABPTR)                     0741 01125000
*   TABPTR=ADDR(NTASVT);            /* SET BASE PTR. TO TABLE ENTRY     01126000
*                                      FOR                           */ 01127000
         LA    TABPTR,NTASVT                                       0742 01128000
*   CVTASVT=NP0VADDR                /* FOR TEMP ASVT. PUT VIRT ADDR  */ 01129000
*       -512;                       /* OF TEMP ASVT IN CVT, BACK OFF    01130000
*                                      VIRT ADDR BY AM'T OF UN-USED     01131000
*                                      SPACE IN ASVT, SO MAPPING   0743 01132000
*                                      MACRO WILL WORK.              */ 01133000
         LA    @06,512                                             0743 01134000
         L     @14,NP0VADDR(,TABPTR)                               0743 01135000
         SLR   @14,@06                                             0743 01136000
         ST    @14,CVTASVT(,RCVT)                                  0743 01137000
*   TABPTR=ADDR(NCSD);              /* SET BASE PTR TO TABLE ENTRY 0744 01138000
*                                      FOR                           */ 01139000
         LA    TABPTR,NCSD                                         0744 01140000
*   CVTCSD=NP0VADDR;                /* CSD. PUT VIRT ADDR OF CSD IN     01141000
*                                      CVT                           */ 01142000
         MVC   CVTCSD(4,RCVT),NP0VADDR(TABPTR)                     0745 01143000
*   CVTCSDRL=NP0RADDR;              /* PUT REAL ADDR. OF CSD IN CVT     01144000
*                                      (RTM NEEDS THIS POINTER)      */ 01145000
         MVC   CVTCSDRL(4,RCVT),NP0RADDR(TABPTR)                   0746 01146000
*   TABPTR=ADDR(NPCCAVT);           /* SET BASE PTR TO TABLE ENTRY 0747 01147000
*                                      FOR                           */ 01148000
         LA    TABPTR,NPCCAVT                                      0747 01149000
*   CVTPCCAT=NP0VADDR;              /* PCCAVT,PUT VIRT ADDR OF PCCAVT   01150000
*                                      IN CVT                        */ 01151000
         MVC   CVTPCCAT(4,RCVT),NP0VADDR(TABPTR)                   0748 01152000
*   TABPTR=ADDR(NLCCAVT);           /* SET BASE PTR TO TABLE ENTRY 0749 01153000
*                                      FOR                           */ 01154000
         LA    TABPTR,NLCCAVT                                      0749 01155000
*   CVTLCCAT=NP0VADDR;              /* LCCAVT PUT VIRT ADDR OF LCCAVT   01156000
*                                      IN CVT                        */ 01157000
         MVC   CVTLCCAT(4,RCVT),NP0VADDR(TABPTR)                   0750 01158000
*   TABPTR=ADDR(NPCDAL);            /* SET BASE PTR TO TABLE ENTRY 0751 01159000
*                                      FOR CDAL              @Z40FPXA*/ 01160000
         LA    TABPTR,NPCDAL                                       0751 01161000
*   CVTCDAL=NP0VADDR;               /* PUT VIRTUAL @ IN CVT  @Z40FPXA*/ 01162000
         MVC   CVTCDAL(4,RCVT),NP0VADDR(TABPTR)                    0752 01163000
*   NVTRTMSA=CVTBTERM;              /* SAVE CVTBTERM IN NVT          */ 01164000
         MVC   NVTRTMSA(4),CVTBTERM(RCVT)                          0753 01165000
*   CVTBTERM=ADDR(NP0RTTAB);        /* PUT ADDR. OF NIP0 TABLE OF RTM   01166000
*                                      TRAPS IN CVT                  */ 01167000
*                                                                  0754 01168000
         LA    @14,NP0RTTAB                                        0754 01169000
         ST    @14,CVTBTERM(,RCVT)                                 0754 01170000
*   /*****************************************************************/ 01171000
*   /*                                                               */ 01172000
*   /* INIT THE GDA                                                  */ 01173000
*   /*                                                               */ 01174000
*   /*****************************************************************/ 01175000
*                                                                  0755 01176000
*   RFY                                                            0755 01177000
*    (GDA) BASED(TBASE);            /* RESET BASE PTR FOR GDA        */ 01178000
*   TABPTR=ADDR(NGDA);              /* SET BASE PTR TO TABLE ENTRY 0756 01179000
*                                      FOR GDA                       */ 01180000
         LR    TABPTR,@15                                          0756 01181000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR. OF GDA IN ITS     01182000
*                                      NEW BASEPTR                   */ 01183000
         L     @15,NP0RADDR(,TABPTR)                               0757 01184000
         LR    TBASE,@15                                           0757 01185000
*   GDAPTR=NP0RADDR;                /* SAVE REAL ADDR OF GDA IN ITS     01186000
*                                      MACRO'S BASE PTR FOR LATER USE*/ 01187000
         ST    @15,GDAPTR                                          0758 01188000
*   NIPFOURK='1'B;                  /* TURN ON NIPFOURK FLAG IN GDA  */ 01189000
         OI    NIPFOURK(TBASE),B'00100000'                         0759 01190000
*   TABPTR=ADDR(NCSAPQE);           /* SET TABLE BASE PTR TO TABLE 0760 01191000
*                                      ENTRY FOR CSAPQE              */ 01192000
         LA    @15,NCSAPQE                                         0760 01193000
         LR    TABPTR,@15                                          0760 01194000
*   CSAPQEP=NP0VADDR;               /* PUT VIRT ADDR OF CSAPQE IN GDA*/ 01195000
         MVC   CSAPQEP(4,TBASE),NP0VADDR(TABPTR)                   0761 01196000
*   TABPTR=ADDR(NVRPQE);            /* SET BASE PTR TO TABLE ENTRY 0762 01197000
*                                      FOR PQE FOR V=R AREA          */ 01198000
         LA    @14,NVRPQE                                          0762 01199000
         LR    TABPTR,@14                                          0762 01200000
*   VRPQEP=NP0VADDR;                /* PUT REAL ADDR OF THE PQE IN 0763 01201000
*                                      GDA                           */ 01202000
         MVC   VRPQEP(4,TBASE),NP0VADDR(TABPTR)                    0763 01203000
*   TABPTR=ADDR(NSQASPQE);          /* SET BASE PTR TO TABLE ENTRY 0764 01204000
*                                      FOR                           */ 01205000
         LA    TABPTR,NSQASPQE                                     0764 01206000
*   SQASPQEP=NP0VADDR;              /* SPQE FOR SQA, PUT VIRT ADDR OF   01207000
*                                      SPQE IN GDA                   */ 01208000
         MVC   SQASPQEP(4,TBASE),NP0VADDR(TABPTR)                  0765 01209000
*   TABPTR=ADDR(GMSQCELL);          /* BASE FOR GM POOL ADDR @Z30ENXA*/ 01210000
         LA    TABPTR,GMSQCELL                                     0766 01211000
*   GLBLCELL=NP0VADDR;              /* ANCHOR GM CELLS       @Z30ENXA*/ 01212000
         MVC   GLBLCELL(4,TBASE),NP0VADDR(TABPTR)                  0767 01213000
*   GBLCELCT=(NP0LNGTH/16);         /* COUNT OF CELLS        @Z30ENXA*/ 01214000
         L     @05,NP0LNGTH(,TABPTR)                               0768 01215000
         SRL   @05,4                                               0768 01216000
         ST    @05,GBLCELCT(,TBASE)                                0768 01217000
*   TABPTR=ADDR(NCPAB1);            /* SET BASE PTR TO TABLE ENTRY 0769 01218000
*                                      FOR                           */ 01219000
         LA    TABPTR,NCPAB1                                       0769 01220000
*   PFSTCPAB=NP0VADDR;              /* FIRST CPAB PUT VIRT ADDR OF 0770 01221000
*                                      CPAB IN GDA                   */ 01222000
         MVC   PFSTCPAB(4,TBASE),NP0VADDR(TABPTR)                  0770 01223000
*   RFY                                                            0771 01224000
*    (GDA) BASED(GDAPTR);                                          0771 01225000
*                                                                  0771 01226000
*   /*****************************************************************/ 01227000
*   /*                                                               */ 01228000
*   /* INIT PQE FOR V=R AREA                                         */ 01229000
*   /*                                                               */ 01230000
*   /*****************************************************************/ 01231000
*                                                                  0772 01232000
*   RFY                                                            0772 01233000
*    (PQESECT) BASED(TBASE);        /* RE SPECIFY BASE PTR. FOR PQE  */ 01234000
*   TABPTR=ADDR(NVRPQE);            /* SET NEW BASE TO REAL ADDR OF  */ 01235000
         LR    TABPTR,@14                                          0773 01236000
*   TBASE=NP0RADDR;                 /* PQE FOR V=R AREA              */ 01237000
         L     TBASE,NP0RADDR(,TABPTR)                             0774 01238000
*   TABPTR=ADDR(NVRFBQE);           /* SET BASE PTR TO TABLE ENTRY 0775 01239000
*                                      FOR FBQE FOR V=R AREA         */ 01240000
         LA    @14,NVRFBQE                                         0775 01241000
         LR    TABPTR,@14                                          0775 01242000
*   PQEFFBQE=NP0VADDR;              /* PUT VIRT ADDR OF THE FBQE IN  */ 01243000
         L     @05,NP0VADDR(,TABPTR)                               0776 01244000
         ST    @05,PQEFFBQE(,TBASE)                                0776 01245000
*   PQEBFBQE=NP0VADDR;              /* TWO FIELDS IN THE PQE         */ 01246000
         ST    @05,PQEBFBQE(,TBASE)                                0777 01247000
*   VVVRFLG='1'B;                   /* TURN ON PQE FLAG INDICATING 0778 01248000
*                                      V=R SPACE                     */ 01249000
*                                                                  0778 01250000
         OI    VVVRFLG(TBASE),B'00000001'                          0778 01251000
*   /*****************************************************************/ 01252000
*   /*                                                               */ 01253000
*   /* INIT PQE FOR CSA                                              */ 01254000
*   /*                                                               */ 01255000
*   /*****************************************************************/ 01256000
*                                                                  0779 01257000
*   TABPTR=ADDR(NCSAPQE);           /* SET BASE TO TABLE ENTRY FOR 0779 01258000
*                                      PQE FOR CSA                   */ 01259000
         LR    TABPTR,@15                                          0779 01260000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF PQE IN NEW 0780 01261000
*                                      BASE                          */ 01262000
         L     TBASE,NP0RADDR(,TABPTR)                             0780 01263000
*   TABPTR=ADDR(NCSAFBQE);          /* SET BASE PTR TO TABLE ENTRY 0781 01264000
*                                      FOR FBQE FOR CSA              */ 01265000
         LA    @15,NCSAFBQE                                        0781 01266000
         LR    TABPTR,@15                                          0781 01267000
*   PQEFFBQE=NP0VADDR;              /* PUT VIRT ADDR OF FBQE IN TWO  */ 01268000
         L     @05,NP0VADDR(,TABPTR)                               0782 01269000
         ST    @05,PQEFFBQE(,TBASE)                                0782 01270000
*   PQEBFBQE=NP0VADDR;              /* FIELDS OF THE PQE             */ 01271000
*                                                                  0783 01272000
         ST    @05,PQEBFBQE(,TBASE)                                0783 01273000
*   /*****************************************************************/ 01274000
*   /*                                                               */ 01275000
*   /* INIT PQE FOR M.S. V=R REGION                                  */ 01276000
*   /*                                                               */ 01277000
*   /*****************************************************************/ 01278000
*                                                                  0784 01279000
*   TABPTR=ADDR(NMVRPQE);           /* SET PQE BASE PTR. TO REAL ADDR*/ 01280000
         LA    @05,NMVRPQE                                         0784 01281000
         LR    TABPTR,@05                                          0784 01282000
*   TBASE=NP0RADDR;                 /* OF PQE FOR M.S. V=R REGION    */ 01283000
         L     TBASE,NP0RADDR(,TABPTR)                             0785 01284000
*   TABPTR=ADDR(NMVRFBQE);          /* SET BASE PTR.TO TABLE ENTRY 0786 01285000
*                                      FOR FBQE FOR M.S. V=R REGION  */ 01286000
         LA    TABPTR,NMVRFBQE                                     0786 01287000
*   PQEFFBQE=NP0VADDR;              /* PUT VIRT ADDR. OF FBQE IN TWO */ 01288000
         L     @04,NP0VADDR(,TABPTR)                               0787 01289000
         ST    @04,PQEFFBQE(,TBASE)                                0787 01290000
*   PQEBFBQE=NP0VADDR;              /* FIELDS IN THE PQE             */ 01291000
         ST    @04,PQEBFBQE(,TBASE)                                0788 01292000
*   VVVRFLG='1'B;                   /* TURN ON FLAG IN PQE INDICATING   01293000
*                                      V=R SPACE                     */ 01294000
*                                                                  0789 01295000
         OI    VVVRFLG(TBASE),B'00000001'                          0789 01296000
*   /*****************************************************************/ 01297000
*   /*                                                               */ 01298000
*   /* INIT D-PQE FOR M.S. V=R REGION                                */ 01299000
*   /*                                                               */ 01300000
*   /*****************************************************************/ 01301000
*                                                                  0790 01302000
*   TABPTR=ADDR(NMVRDPQE);          /* SET PQE BASE PTR TO REAL ADDR    01303000
*                                      OF                            */ 01304000
         LA    TABPTR,NMVRDPQE                                     0790 01305000
*   TBASE=NP0RADDR-8;               /* D-PQE FOR M.S. V=R REGION     */ 01306000
         L     TBASE,NP0RADDR(,TABPTR)                             0791 01307000
         SH    TBASE,@CH00068                                      0791 01308000
*   TABPTR=ADDR(NMVRPQE);           /* SET BASE PTR TO TABLE ENTRY 0792 01309000
*                                      FOR PQE FOR M.S. V=R REGION   */ 01310000
         LR    TABPTR,@05                                          0792 01311000
*   PQEFPQE=NP0VADDR;               /* PUT VIRT ADDR PQE FOR M.S. V=R   01312000
*                                      REGION IN                     */ 01313000
         L     @04,NP0VADDR(,TABPTR)                               0793 01314000
         ST    @04,PQEFPQE(,TBASE)                                 0793 01315000
*   PQEBPQE=NP0VADDR;               /* TWO FIELDS OF THE D-PQE       */ 01316000
         ST    @04,PQEBPQE(,TBASE)                                 0794 01317000
*   RFY                                                            0795 01318000
*    (PQESECT) BASED(PQESEPTR);                                    0795 01319000
*                                                                  0795 01320000
*   /*****************************************************************/ 01321000
*   /*                                                               */ 01322000
*   /* INIT. FBQE'S                                                  */ 01323000
*   /*                                                               */ 01324000
*   /*****************************************************************/ 01325000
*                                                                  0796 01326000
*   RFY                                                            0796 01327000
*    (FBQESECT) BASED(TBASE);       /* RESPECIFY THEIR BASE PTR      */ 01328000
*                                                                  0796 01329000
*   /*****************************************************************/ 01330000
*   /*                                                               */ 01331000
*   /* INIT FBQE FOR V=R AREA                                        */ 01332000
*   /*                                                               */ 01333000
*   /*****************************************************************/ 01334000
*                                                                  0797 01335000
*   TABPTR=ADDR(NVRFBQE);           /* SET FBQE BASE TO REAL ADDR OF */ 01336000
         LR    TABPTR,@14                                          0797 01337000
*   TBASE=NP0RADDR;                 /* FBQE FOR V=R AREA             */ 01338000
         L     TBASE,NP0RADDR(,TABPTR)                             0798 01339000
*   TABPTR=ADDR(NVRPQE);            /* SET BASE PTR TO TABLE ENTRY 0799 01340000
*                                      FOR PQE FOR V=R AREA          */ 01341000
         LA    TABPTR,NVRPQE                                       0799 01342000
*   FWDPTR=NP0VADDR;                /* PUT VIRT ADDR OF PQE IN TWO   */ 01343000
         L     @14,NP0VADDR(,TABPTR)                               0800 01344000
         ST    @14,FWDPTR(,TBASE)                                  0800 01345000
*   BCKPTR=NP0VADDR;                /* FIELDS OF THE FBQE.           */ 01346000
*                                                                  0801 01347000
         ST    @14,BCKPTR(,TBASE)                                  0801 01348000
*   /*****************************************************************/ 01349000
*   /*                                                               */ 01350000
*   /* INIT FBQE FOR CSA                                             */ 01351000
*   /*                                                               */ 01352000
*   /*****************************************************************/ 01353000
*                                                                  0802 01354000
*   TABPTR=ADDR(NCSAFBQE);          /* PUT REAL ADDR. OF FBQE FOR CSA*/ 01355000
         LR    TABPTR,@15                                          0802 01356000
*   TBASE=NP0RADDR;                 /* IN FBQE BASE PTR.             */ 01357000
         L     TBASE,NP0RADDR(,TABPTR)                             0803 01358000
*   TABPTR=ADDR(NCSAPQE);           /* SET BASE PTR. TO TABLE ENTRY     01359000
*                                      FOR PQE FOR CSA               */ 01360000
         LA    TABPTR,NCSAPQE                                      0804 01361000
*   FWDPTR=NP0VADDR;                /* PUT VIRT ADDR OF THE PQE IN 0805 01362000
*                                      TWO                           */ 01363000
         L     @04,NP0VADDR(,TABPTR)                               0805 01364000
         ST    @04,FWDPTR(,TBASE)                                  0805 01365000
*   BCKPTR=NP0VADDR;                /* FIELDS OF THE FBQE            */ 01366000
*                                                                  0806 01367000
         ST    @04,BCKPTR(,TBASE)                                  0806 01368000
*   /*****************************************************************/ 01369000
*   /*                                                               */ 01370000
*   /* INIT FBQE FOR MASTER SCHEDULER V=R REGION                     */ 01371000
*   /*                                                               */ 01372000
*   /*****************************************************************/ 01373000
*                                                                  0807 01374000
*   TABPTR=ADDR(NMVRFBQE);          /* PUT REAL ADDR OF FBQE FOR M.S.*/ 01375000
         LA    TABPTR,NMVRFBQE                                     0807 01376000
*   TBASE=NP0RADDR;                 /* V=R REGION IN FBQE BASE PTR   */ 01377000
         L     TBASE,NP0RADDR(,TABPTR)                             0808 01378000
*   TABPTR=ADDR(NMVRPQE);           /* SET BASE PTR TO TABLE ENTRY 0809 01379000
*                                      FOR PQE FOR M.S. V=R REGION   */ 01380000
         LR    TABPTR,@05                                          0809 01381000
*   FWDPTR=NP0VADDR;                /* PUT VIRT ADDR OF THE PQE IN 0810 01382000
*                                      TWO                           */ 01383000
         L     @15,NP0VADDR(,TABPTR)                               0810 01384000
         ST    @15,FWDPTR(,TBASE)                                  0810 01385000
*   BCKPTR=NP0VADDR;                /* FIELDS OF THE FBQE            */ 01386000
         ST    @15,BCKPTR(,TBASE)                                  0811 01387000
*   RFY                                                            0812 01388000
*    (FBQESECT) BASED(FBQESPTR);    /* RESPECIFY BASE PTR FOR FBQE'S */ 01389000
*                                                                  0812 01390000
*   /*****************************************************************/ 01391000
*   /*                                                               */ 01392000
*   /* INIT SPQE'S                                                   */ 01393000
*   /*                                                               */ 01394000
*   /*****************************************************************/ 01395000
*                                                                  0813 01396000
*   RFY                                                            0813 01397000
*    (SPQESECT) BASED(TBASE);       /* RESPECIFY SPQE BASE PTR.      */ 01398000
*                                                                  0813 01399000
*   /*****************************************************************/ 01400000
*   /*                                                               */ 01401000
*   /* INIT SPQE FOR SQA                                             */ 01402000
*   /*                                                               */ 01403000
*   /*****************************************************************/ 01404000
*                                                                  0814 01405000
*   TABPTR=ADDR(NSQASPQE);          /* PUT REAL ADDR OF SPQE FOR SQA */ 01406000
         LA    TABPTR,NSQASPQE                                     0814 01407000
*   TBASE=NP0RADDR;                 /* IN BASE PTR FOR SPQE          */ 01408000
         L     TBASE,NP0RADDR(,TABPTR)                             0815 01409000
*   TABPTR=ADDR(NSQADQE);           /* SET BASE PTR TO TABLE ENTRY 0816 01410000
*                                      FOR DQE FOR SQA               */ 01411000
         LA    @15,NSQADQE                                         0816 01412000
         LR    TABPTR,@15                                          0816 01413000
*   SPDQEAD=NP0VADDR;               /* PUT VIRT ADDR. OF THE DQE IN     01414000
*                                      THE SPQE                      */ 01415000
         MVC   SPDQEAD(4,TBASE),NP0VADDR(TABPTR)                   0817 01416000
*   SPQEFLGS='40'X;                 /* SET LAST ELT. FLAG IN SPQE    */ 01417000
         MVI   SPQEFLGS(TBASE),X'40'                               0818 01418000
*   SPQEID='F5'X;                   /* PUT SUBPOOL ID IN SPQE        */ 01419000
*                                                                  0819 01420000
         MVI   SPQEID(TBASE),X'F5'                                 0819 01421000
*   /*****************************************************************/ 01422000
*   /*                                                               */ 01423000
*   /* INIT SPQE FOR M.S. SP 251 (NUC BUF)                           */ 01424000
*   /*                                                               */ 01425000
*   /*****************************************************************/ 01426000
*                                                                  0820 01427000
*   TABPTR=ADDR(NSPQE251);          /* PUT REAL ADDR OF SPQE FOR SP     01428000
*                                      251                           */ 01429000
         LA    TABPTR,NSPQE251                                     0820 01430000
*   TBASE=NP0RADDR;                 /* IN SPQE BASE PTR              */ 01431000
         L     TBASE,NP0RADDR(,TABPTR)                             0821 01432000
*   TABPTR=ADDR(NDQE251);           /* SET BASE PTR TO TABLE ENTRY 0822 01433000
*                                      FOR DQE FOR SP. 251           */ 01434000
         LA    TABPTR,NDQE251                                      0822 01435000
*   SPDQEAD=NP0VADDR;               /* PUT VIRT ADDR OF THE DQE IN 0823 01436000
*                                      THE SPQE                      */ 01437000
         MVC   SPDQEAD(4,TBASE),NP0VADDR(TABPTR)                   0823 01438000
*   SPQEFLGS='40'X;                 /* SET 'LAST ELT' FLAG IN SPQE   */ 01439000
         MVI   SPQEFLGS(TBASE),X'40'                               0824 01440000
*   SPQEID='FB'X;                   /* SET SUBPOOL NUMBER IN SPQE    */ 01441000
         MVI   SPQEID(TBASE),X'FB'                                 0825 01442000
*   RFY                                                            0826 01443000
*    (SPQESECT) BASED(SPQESPTR);    /* RESPECIFY SPQE BASE PTR BACK     01444000
*                                      TO ORIGINAL                   */ 01445000
*                                                                  0826 01446000
*   /*****************************************************************/ 01447000
*   /*                                                               */ 01448000
*   /* INIT DQE FOR SQA                                              */ 01449000
*   /*                                                               */ 01450000
*   /*****************************************************************/ 01451000
*                                                                  0827 01452000
*   RFY                                                            0827 01453000
*    (DQESECT) BASED(TBASE);        /* RESPECIFY BASE PTR FOR DQE'S  */ 01454000
*   TABPTR=ADDR(NSQADQE);           /* PUT REAL ADDR OF DQE FOR SQA     01455000
*                                      IN                            */ 01456000
         LR    TABPTR,@15                                          0828 01457000
*   TBASE=NP0RADDR;                 /* THE BASE PTR                  */ 01458000
         L     TBASE,NP0RADDR(,TABPTR)                             0829 01459000
*   DQEBLKAD=NP0VSQAP;              /* PUT VIRT ADDR OF BEGINNING  0830 01460000
*                                      (LOW END) OF SQA IN DQE       */ 01461000
         MVC   DQEBLKAD(4,TBASE),NP0VSQAP                          0830 01462000
*   DQELNTH=(NVTNVSQA               /* PUT SIZE (IN VIRT) OF SQA     */ 01463000
*       *65536);                    /* IN DQE FOR SQA                */ 01464000
         LH    @15,NVTNVSQA                                        0831 01465000
         SLA   @15,16                                              0831 01466000
         ST    @15,DQELNTH(,TBASE)                                 0831 01467000
*/*  NOTE: CAN'T INIT DQE FOR SP 251 (NUC. BUFF.) YET AS THE SPACE   */ 01468000
*/*        HASN'T BEEN DEFINED YET                                   */ 01469000
*                                                                  0832 01470000
*   RFY                                                            0832 01471000
*    (DQESECT) BASED(DQESEPTR);     /* RESPECIFY DQE BASE PTR.BACK TO   01472000
*                                      ORIGINAL                      */ 01473000
*                                                                  0832 01474000
*   /*****************************************************************/ 01475000
*   /*                                                               */ 01476000
*   /* INIT ASVT                                                     */ 01477000
*   /*                                                               */ 01478000
*   /*****************************************************************/ 01479000
*                                                                  0833 01480000
*   RFY                                                            0833 01481000
*    (ASVT) BASED(TBASE);           /* RESPECIFY BASE PTR FOR ASVT   */ 01482000
*   TABPTR=ADDR(NTASVT);            /* PUT REAL ADDR OF ASVT IN NEW  */ 01483000
         LA    TABPTR,NTASVT                                       0834 01484000
*   TBASE=NP0RADDR-512;             /* BASE PTR., BACK OFF ADDR OF 0835 01485000
*                                      TEMP. ASVT BY AM'T OF UNUSED     01486000
*                                      SPACE IN ASVT SO MAPPING MACRO   01487000
*                                      WILL WORK PROPERLY            */ 01488000
         LCR   @06,@06                                             0835 01489000
         AL    @06,NP0RADDR(,TABPTR)                               0835 01490000
         LR    TBASE,@06                                           0835 01491000
*   ASVTASVT='ASVT';                /* PUT ACRONYM 'ASVT' IN THE ASVT*/ 01492000
         MVC   ASVTASVT(4,TBASE),@CC05034                          0836 01493000
*   ASVTMAXU='00000001'X;           /* PUT MAX USERS COUNT IN ASVT   */ 01494000
         MVC   ASVTMAXU(4,TBASE),@CF05035                          0837 01495000
*   ASVTAVAI='1'B;                  /* SET HI ORDER BIT OF ASVTFRST     01496000
*                                      FIELD ON (1)                  */ 01497000
         OI    ASVTAVAI(TBASE),B'10000000'                         0838 01498000
*   ASVTENTY(1)=NVTMASCB;           /* PUT VIRT ADDR OF M.S. ASCB IN    01499000
*                                      FIRST ENTRY IN ASVT           */ 01500000
         MVC   ASVTENTY(4,TBASE),NVTMASCB                          0839 01501000
*   RFY                                                            0840 01502000
*    (ASVT) BASED(ASVTPTR);         /* RESPECIFY BASE PTR FOR ASVT 0840 01503000
*                                      BACK TO ORIG. VALUE           */ 01504000
*                                                                  0840 01505000
*   /*****************************************************************/ 01506000
*   /*                                                               */ 01507000
*   /* INIT PCCAVT                                                   */ 01508000
*   /*                                                               */ 01509000
*   /*****************************************************************/ 01510000
*                                                                  0841 01511000
*   RFY                                                            0841 01512000
*    (PCCAVT) BASED(TBASE);         /* RESPECIFY PCCAVT BASE PTR.    */ 01513000
*   TABPTR=ADDR(NPCCAVT);           /* PUT REAL ADDR IF PCCAVT IN THE*/ 01514000
         LA    TABPTR,NPCCAVT                                      0842 01515000
*   TBASE=NP0RADDR;                 /* NEW BASE PTR                  */ 01516000
         L     TBASE,NP0RADDR(,TABPTR)                             0843 01517000
*   TABPTR=ADDR(NPCCA);             /* SET BASE PTR TO TABLE ENTRY 0844 01518000
*                                      FOR PCCA                      */ 01519000
         LA    TABPTR,NPCCA                                        0844 01520000
*   PCCVTPTR=TBASE                  /* PUT ADDR. OF PCCAVT ENTRY   0845 01521000
*                                      CORRES                        */ 01522000
*       +(LENGTH(PCCAT00P)          /* TO IPL CPU IN BASE FOR MAP OF */ 01523000
*       *NICPADR);                  /* PCCAVT ENTRY                  */ 01524000
         SLR   @06,@06                                             0845 01525000
         ICM   @06,3,NICPADR                                       0845 01526000
         SLA   @06,2                                               0845 01527000
         LR    @15,TBASE                                           0845 01528000
         ALR   @15,@06                                             0845 01529000
         ST    @15,PCCVTPTR                                        0845 01530000
*   PCCVTENT=NP0VADDR;              /* PUT VIRT ADDR OF PCCA FOR IPL    01531000
*                                      CPU IN APPROPRIATE PCCAVT   0846 01532000
*                                      ENTRY                         */ 01533000
         MVC   PCCVTENT(4,@15),NP0VADDR(TABPTR)                    0846 01534000
*   RFY                                                            0847 01535000
*    (PCCAVT) BASED(CVTPCCAT);      /* RESPECIFY PCCAVT BASE BACK TO    01536000
*                                      ORIG VALUE                    */ 01537000
*                                                                  0847 01538000
*   /*****************************************************************/ 01539000
*   /*                                                               */ 01540000
*   /* INIT LCCAVT                                                   */ 01541000
*   /*                                                               */ 01542000
*   /*****************************************************************/ 01543000
*                                                                  0848 01544000
*   RFY                                                            0848 01545000
*    (LCCAVT) BASED(TBASE);         /* RESPECIFY LCCAVT BASE PTR     */ 01546000
*   TABPTR=ADDR(NLCCAVT);           /* PUT REAL ADDR. OF LCCAVT IN 0849 01547000
*                                      NEW                           */ 01548000
         LA    TABPTR,NLCCAVT                                      0849 01549000
*   TBASE=NP0RADDR;                 /* BASE PTR                      */ 01550000
         L     TBASE,NP0RADDR(,TABPTR)                             0850 01551000
*   TABPTR=ADDR(NLCCA);             /* SET BASE PTR TO TABLE ENTRY 0851 01552000
*                                      FOR LCCA                      */ 01553000
         LA    TABPTR,NLCCA                                        0851 01554000
*   LCCVTPTR=TBASE                  /* PUT ADDR OF LCCAVT ENTRY    0852 01555000
*                                      CORRES                        */ 01556000
*       +(LENGTH(LCCAT00P)          /* TO IPL CPU IN BASE FOR MAP OF */ 01557000
*       *NICPADR);                  /* LCCAVT ENTRY                  */ 01558000
         ALR   @06,TBASE                                           0852 01559000
         ST    @06,LCCVTPTR                                        0852 01560000
*   LCCVTENT=NP0VADDR;              /* PUT VIRT ADDR OF LCCA FOR IPL    01561000
*                                      CPU IN APPROPRIATE LCCAVT   0853 01562000
*                                      ENTRY RESPECIFY LCCAVT BASE 0853 01563000
*                                      PTR BACK TO ORIG. VALUE       */ 01564000
         MVC   LCCVTENT(4,@06),NP0VADDR(TABPTR)                    0853 01565000
*   RFY                                                            0854 01566000
*    (LCCAVT) BASED(CVTLCCAT);                                     0854 01567000
*                                                                  0854 01568000
*   /*****************************************************************/ 01569000
*   /*                                                               */ 01570000
*   /* INIT THE CSD                                                  */ 01571000
*   /*                                                               */ 01572000
*   /*****************************************************************/ 01573000
*                                                                  0855 01574000
*   RFY                                                            0855 01575000
*    (CSD) BASED(TBASE);            /* RESPECIFY BASE FOR CSD        */ 01576000
*   TABPTR=ADDR(NCSD);              /* PUT REAL ADDR OF CSD IN NEW   */ 01577000
         LA    TABPTR,NCSD                                         0856 01578000
*   TBASE=NP0RADDR;                 /* BASE                          */ 01579000
         L     TBASE,NP0RADDR(,TABPTR)                             0857 01580000
*   CSDCSD='CSD ';                  /* PUT ACRONYM 'CSD' IN CSD      */ 01581000
         MVC   CSDCSD(4,TBASE),@CC05042                            0858 01582000
*   RFY                                                            0859 01583000
*    (IOCOM) BASED(CVTIXAVL);                                      0859 01584000
*   RFY                                                            0860 01585000
*    (IOCX) BASED(IOCOMEX);                                        0860 01586000
*   CSDCHAD=IOXHICH;                /* PUT HI SYS GEN'D CHAN ADDR IN    01587000
*                                      CSD                           */ 01588000
         L     @01,CVTIXAVL(,RCVT)                                 0861 01589000
         L     @01,IOCOMEX(,@01)                                   0861 01590000
         SLR   @00,@00                                             0861 01591000
         IC    @00,IOXHICH(,@01)                                   0861 01592000
         STH   @00,CSDCHAD(,TBASE)                                 0861 01593000
*   RFY                                                            0862 01594000
*    (IOCOM) BASED(IOCOMPTR);                                      0862 01595000
*   RFY                                                            0863 01596000
*    (IOCX) BASED(IOCXPTR);                                        0863 01597000
*   CSDMSKMP=NCPMSKMP;              /* MOVE TABLE OF CPU MASKS INTO     01598000
*                                      THE CSD. THE TABLE CAN BE   0864 01599000
*                                      INDEXED BY A CPU ADDR. TO GET    01600000
*                                      THE MASK CORRES. TO THAT CPU  */ 01601000
         MVC   CSDMSKMP(32,TBASE),NCPMSKMP                         0864 01602000
*   IF NVTMP='1'B                   /* IF CONFIGURATION IS MP, TURN     01603000
*                                      ON                            */ 01604000
*/*                                                            Y02751*/ 01605000
*                                                                  0865 01606000
*     THEN                                                         0865 01607000
*                                                                  0865 01608000
         TM    NVTMP,B'00100000'                                   0865 01609000
         BNO   @RF00865                                            0865 01610000
*/*                                                            Y02751*/ 01611000
*                                                                  0866 01612000
*     CSDMP='1'B;                   /* MP FLAG IN CSD, IF NOT,DON'T  */ 01613000
         OI    CSDMP(TBASE),B'10000000'                            0866 01614000
*   RFY                                                            0867 01615000
*    (CSD) BASED(CVTCSD);           /* RESPECIFY CSD BASE BACK TO  0867 01616000
*                                      ORIG VALUE                    */ 01617000
*                                                                  0867 01618000
@RF00865 DS    0H                                                  0868 01619000
*   /*****************************************************************/ 01620000
*   /*                                                               */ 01621000
*   /* INIT THE PCCA FOR IPL CPU                                     */ 01622000
*   /*                                                               */ 01623000
*   /*****************************************************************/ 01624000
*                                                                  0868 01625000
*   RFY                                                            0868 01626000
*    (PCCA) BASED(TBASE);           /* RESPECIFY BASE FOR PCCA       */ 01627000
*   TABPTR=ADDR(NPCCA);             /* PUT REAL ADDR OF PCCA IN NEW  */ 01628000
         LA    TABPTR,NPCCA                                        0869 01629000
*   TBASE=NP0RADDR;                 /* BASE PTR FOR PCCA             */ 01630000
         L     TBASE,NP0RADDR(,TABPTR)                             0870 01631000
*   PCCAPCCA='PCCA';                /* PUT ACRONYM 'PCCA' IN PCCA    */ 01632000
         MVC   PCCAPCCA(4,TBASE),@CC05049                          0871 01633000
*   PCCACPUA=NICPADR;               /* PUT PHYS ADDR OF IPL CPU IN 0872 01634000
*                                      PCCA                          */ 01635000
*                                                                  0872 01636000
         SLR   @06,@06                                             0872 01637000
         ICM   @06,3,NICPADR                                       0872 01638000
         STH   @06,PCCACPUA(,TBASE)                                0872 01639000
*   /*****************************************************************/ 01640000
*   /*                                                               */ 01641000
*   /* CONVERT 1ST SIX BYTES OF CPU ID TO EBCDIC AND PUT IN PCCA     */ 01642000
*   /*                                                               */ 01643000
*   /*****************************************************************/ 01644000
*                                                                  0873 01645000
*   UNPK(NP0CONVT,NP07);            /* UN-PACK FIRST 7 BYTES OF CPUID   01646000
*                                      INTO 13 BYTE FIELD            */ 01647000
         UNPK  NP0CONVT(13),NP07(7)                                0873 01648000
*   TR(NP012,NP0BATAB);             /* TRANSLATE THE UN-PACKED BYTES    01649000
*                                      INTO THEIR EBCDIC EQUILAVENTS */ 01650000
         LA    @05,NP0TRTAB                                        0874 01651000
         AL    @05,@CF05595                                        0874 01652000
         TR    NP012(12),NP0BATAB(@05)                             0874 01653000
*   PCCACPID=NP012;                 /* MOVE THE 12 BYTE FIELD      0875 01654000
*                                      CONTAINING THE EBCDIC CHAR'S     01655000
*                                      INTO THE PCCA FIELD           */ 01656000
         MVC   PCCACPID(12,TBASE),NP012                            0875 01657000
*   RFY                                                            0876 01658000
*    (PCCA) BASED(PCCAPTR);         /* RESPECIFY THE PCCA BASE BACK     01659000
*                                      TO THE ORIG VALUE             */ 01660000
*                                                                  0876 01661000
*   /*****************************************************************/ 01662000
*   /*                                                               */ 01663000
*   /* INIT THE LCCA                                                 */ 01664000
*   /*                                                               */ 01665000
*   /*****************************************************************/ 01666000
*                                                                  0877 01667000
*   RFY                                                            0877 01668000
*    (LCCA) BASED(TBASE);           /* RESPECIFY BASE FOR LCCA       */ 01669000
*   TABPTR=ADDR(NLCCA);             /* SET BASE FOR LCCA TO REAL ADDR*/ 01670000
         LA    TABPTR,NLCCA                                        0878 01671000
*   TBASE=NP0RADDR;                 /* OF LCCA                       */ 01672000
         L     TBASE,NP0RADDR(,TABPTR)                             0879 01673000
*   LCCALCCA='LCCA';                /* PUT ACRONYM 'LCCA' IN LCCA    */ 01674000
         MVC   LCCALCCA(4,TBASE),@CC05054                          0880 01675000
*   LCCACPUA=NICPADR+'40'X;         /* PUT LOGICAL CPU ADDR IN LCCA  */ 01676000
*                                                                  0881 01677000
         AH    @06,@CH02302                                        0881 01678000
         STH   @06,LCCACPUA(,TBASE)                                0881 01679000
*   /*****************************************************************/ 01680000
*   /*                                                               */ 01681000
*   /* PUT LOG. CPU ADDR. OF IPL CPU IN 'NIP0 ID' TO BE USED IN      */ 01682000
*   /* SERIALIZING ACCESS TO RESTART RESOURCE.                       */ 01683000
*   /*                                                               */ 01684000
*   /*****************************************************************/ 01685000
*                                                                  0882 01686000
*   NRSTLCPU=NICPADR+'40'X;         /* PUT LOG. CPU ADDR IN 'NIP0 ID'*/ 01687000
         STH   @06,NRSTLCPU                                        0882 01688000
*   RFY                                                            0883 01689000
*    (LCCA) BASED(LCCAPTR);         /* RE-SET LCCA BASE BACK TO ORIG    01690000
*                                      VALUE                         */ 01691000
*                                                                  0883 01692000
*   /*****************************************************************/ 01693000
*   /*                                                               */ 01694000
*   /* INITIALIZE GETMAIN CELL'S BY CHAINING CELLS TOGETHER          */ 01695000
*   /*                                                               */ 01696000
*   /*****************************************************************/ 01697000
*                                                                  0884 01698000
*   TABPTR=ADDR(GMSQCELL);          /* BASE FOR CELL POOL ADDRESSES     01699000
*                                                            @Z30ENXA*/ 01700000
         LA    TABPTR,GMSQCELL                                     0884 01701000
*   TBASE=NP0RADDR;                 /* REAL ADDRESS OF CELL POOL   0885 01702000
*                                                            @Z30ENXA*/ 01703000
         L     TBASE,NP0RADDR(,TABPTR)                             0885 01704000
*   CHNADDR=NP0VADDR;               /* VIRT ADDRESS OF CELLS @Z30ENXA*/ 01705000
*                                                                  0886 01706000
         L     CHNADDR,NP0VADDR(,TABPTR)                           0886 01707000
*   /*****************************************************************/ 01708000
*   /*                                                               */ 01709000
*   /* SET UP DO LOOP TO MARK ALL CELLS WITHIN THE POOL EXCEPT THE   */ 01710000
*   /* LAST CELL WHICH WILL BE ZERO                                  */ 01711000
*   /*                                                               */ 01712000
*   /*****************************************************************/ 01713000
*                                                                  0887 01714000
*   DO LOOPCNT=(NP0LNGTH/16) TO 2 BY-1;/* LOOP CONTROL       @Z30ENXA*/ 01715000
         L     @06,NP0LNGTH(,TABPTR)                               0887 01716000
         SRL   @06,4                                               0887 01717000
         ST    @06,LOOPCNT                                         0887 01718000
         B     @DE00887                                            0887 01719000
@DL00887 DS    0H                                                  0888 01720000
*     CHNADDR=CHNADDR+16;           /* SET ADDRESS OF NEXT CELL    0888 01721000
*                                                            @Z30ENXA*/ 01722000
         LA    @05,16                                              0888 01723000
         ALR   CHNADDR,@05                                         0888 01724000
*     CHAINPTR=CHNADDR;             /* SET CHAIN ADDRESS     @Z30ENXA*/ 01725000
         ST    CHNADDR,CHAINPTR(,TBASE)                            0889 01726000
*     TBASE=TBASE+16;               /* INCREMENT TO NEXT CELL      0890 01727000
*                                                            @Z30ENXA*/ 01728000
         ALR   TBASE,@05                                           0890 01729000
*   END;                                                           0891 01730000
*                                                                  0891 01731000
         BCTR  @06,0                                               0891 01732000
         ST    @06,LOOPCNT                                         0891 01733000
@DE00887 CH    @06,@CH00082                                        0891 01734000
         BNL   @DL00887                                            0891 01735000
*   /*****************************************************************/ 01736000
*   /*                                                               */ 01737000
*   /* INIT THE CELLPOOL ANCHOR BLOCKS (CPAB'S)                      */ 01738000
*   /*                                                               */ 01739000
*   /*****************************************************************/ 01740000
*                                                                  0892 01741000
*   RFY                                                            0892 01742000
*    (CPAB) BASED(TBASE);           /* RESPECIFY CPAB BASE PTR       */ 01743000
*                                                                  0892 01744000
*   /*****************************************************************/ 01745000
*   /*                                                               */ 01746000
*   /* CALC NUMBER OF CPAB'S TO INITIALIZE                   @YM08214*/ 01747000
*   /*                                                               */ 01748000
*   /*****************************************************************/ 01749000
*                                                                  0893 01750000
*   NCPABS=LENGTH(NP0CPIDS)/LENGTH(CPABCPID);                      0893 01751000
         LA    NCPABS,7                                            0893 01752000
*   TABPTR=ADDR(NCPAB1);            /* SET NEW BASE FOR CPAB.TO REAL */ 01753000
         LA    TABPTR,NCPAB1                                       0894 01754000
*   TBASE=NP0RADDR;                 /* ADDR OF FIRST CPAB            */ 01755000
         L     TBASE,NP0RADDR(,TABPTR)                             0895 01756000
*   NCPFROM=ADDR(NP0CPIDS);         /* SET PTR TO FIRST ENTRY IN   0896 01757000
*                                      TABLE OF CPID'S               */ 01758000
         LA    NCPFROM,NP0CPIDS                                    0896 01759000
*   DO I=NCPABS TO 1 BY-1;                                         0897 01760000
         LR    I,NCPABS                                            0897 01761000
         B     @DE00897                                            0897 01762000
@DL00897 DS    0H                                                  0898 01763000
*     CPABCPID=NCPIDFM;             /* MOVE IN THE CPID              */ 01764000
         MVC   CPABCPID(4,TBASE),NCPIDFM(NCPFROM)                  0898 01765000
*     TBASE=TBASE+LENGTH(CPAB);     /* UPDATE CPAB BASE BY LEN OF A     01766000
*                                      CPAB                          */ 01767000
         AH    TBASE,@CH00116                                      0899 01768000
*     NCPFROM=LENGTH(CPABCPID)      /* UPDATE PTR TO CPID BY LEN OF  */ 01769000
*         +NCPFROM;                 /* A CPID AND LOOP               */ 01770000
         AH    NCPFROM,@CH00062                                    0900 01771000
*   END;                                                           0901 01772000
         BCTR  I,0                                                 0901 01773000
@DE00897 LTR   I,I                                                 0901 01774000
         BP    @DL00897                                            0901 01775000
*   RFY                                                            0902 01776000
*    (CPAB) BASED(CPABPTR);                                        0902 01777000
*                                                                  0902 01778000
*   /*****************************************************************/ 01779000
*   /*                                                               */ 01780000
*   /* IF THIS IS AN MULTI-PROCESSOR CONFIGURATION, SAVE A 'CLEAN'   */ 01781000
*   /* COPY OF THE PSA                                               */ 01782000
*   /*                                                               */ 01783000
*   /*****************************************************************/ 01784000
*                                                                  0903 01785000
*   IF NVTMP='1'B                   /* IF CONFIG. IS M.P. THEN       */ 01786000
*/*                                                            Y02751*/ 01787000
*                                                                  0903 01788000
*     THEN                                                         0903 01789000
*                                                                  0903 01790000
         TM    NVTMP,B'00100000'                                   0903 01791000
         BNO   @RF00903                                            0903 01792000
*/*                                                            Y02751*/ 01793000
*                                                                  0904 01794000
*     DO;                           /* GET ADDR OF FIRST AVAIL. BYTE    01795000
*                                      ABOVE THE STORAGE MAP (WHICH     01796000
*                                      IS JUST ABOVE NIP0 CSECT)     */ 01797000
*/*                                                            Y02751*/ 01798000
*                                                                  0905 01799000
*       NP0PSASA=NVTSTMAP+LENGTH(NP0STMAP);                        0905 01800000
         LH    @02,@CH04248                                        0905 01801000
         L     @15,NVTSTMAP                                        0905 01802000
         ALR   @15,@02                                             0905 01803000
         ST    @15,NP0PSASA                                        0905 01804000
*       RFY                                                        0906 01805000
*        (REG4,                                                    0906 01806000
*         REG5,                                                    0906 01807000
*         REG6,                                                    0906 01808000
*         REG7) RSTD;               /*                       @Z30ENXA*/ 01809000
*       REG4=NP0PSASA;              /* TO ADDRESS            @Z30ENXA*/ 01810000
         LR    REG4,@15                                            0907 01811000
*       REG5=4096;                  /* LENGTH OF MOVE        @Z30ENXA*/ 01812000
         LR    REG5,@02                                            0908 01813000
*       REG6=0;                     /* CURRENT PSA ADDRESS   @Z30ENXA*/ 01814000
         SLR   REG6,REG6                                           0909 01815000
*       REG7=4096;                  /* LENGTH OF MOVE        @Z30ENXA*/ 01816000
         LR    REG7,@02                                            0910 01817000
*       GEN(MVCL REG4,REG6);        /* MOVE PSA              @Z30ENXA*/ 01818000
         MVCL REG4,REG6                                                 01819000
*       RFY                                                        0912 01820000
*        (REG4,                                                    0912 01821000
*         REG5,                                                    0912 01822000
*         REG6,                                                    0912 01823000
*         REG7) UNRSTD;             /*                       @Z30ENXA*/ 01824000
*       NVTSGPSA=NP0PSASA;          /* PUT ADDR. OF SYS. GEN'D. PSA     01825000
*                                      IN THE NVT, SO THE COPY OF THE   01826000
*                                      PSA CAN BE KEPT AND MADE    0913 01827000
*                                      AVAILABLE TO THE 'VARY CPU  0913 01828000
*                                      ONLINE' RTNS.                 */ 01829000
*                                                                  0913 01830000
         L     @02,NP0PSASA                                        0913 01831000
         ST    @02,NVTSGPSA                                        0913 01832000
*       /*************************************************************/ 01833000
*       /*                                                           */ 01834000
*       /* PUT ADDR. OF NEXT AVAIL. BYTE IN NUC. BUFF. IN NIP0       */ 01835000
*       /* POINTER Y02751                                            */ 01836000
*       /*                                                           */ 01837000
*       /*************************************************************/ 01838000
*                                                                  0914 01839000
*       NP0NBAVL=NVTSGPSA+LENGTH(PSA);                             0914 01840000
         AL    @02,@CF04248                                        0914 01841000
         ST    @02,NP0NBAVL                                        0914 01842000
*     END;                                                         0915 01843000
*                                                                  0915 01844000
*   /*****************************************************************/ 01845000
*   /*                                                               */ 01846000
*   /* INIT THE PSA (IN ABS 0-4K).------ NO RESPECIFY NEEDED AS PSA  */ 01847000
*   /* IS AT LOC'N 0 AND IS BASED ON A PTR. THAT IS INIT. TO ZERO    */ 01848000
*   /*                                                               */ 01849000
*   /*****************************************************************/ 01850000
*                                                                  0916 01851000
*   PSAPSA='PSA ';                  /* PUT ACRONYM 'PSA' IN PSA      */ 01852000
@RF00903 L     @15,NPSAPTR                                         0916 01853000
         MVC   PSAPSA(4,@15),@CC05058                              0916 01854000
*   PSACPUPA=NICPADR;               /* PUT PHYS CPU ADDR OF IPL CPU     01855000
*                                      IN PSA. COULD CHANGE DURING 0917 01856000
*                                      ACR                   @YM03489*/ 01857000
         SLR   @14,@14                                             0917 01858000
         ICM   @14,3,NICPADR                                       0917 01859000
         STH   @14,PSACPUPA(,@15)                                  0917 01860000
*   PSACPUSA=NICPADR;               /* PUT STATIC PHYSICAL CPU ADDR     01861000
*                                      OF IPL CPU IN PSA. WILL NOT 0918 01862000
*                                      CHANGE DURING ACR PROCESSING     01863000
*                                                            @YM03489*/ 01864000
         STH   @14,PSACPUSA(,@15)                                  0918 01865000
*   PSACDAL=ADDR(CDAL(NICPADR+1));  /* ADDR OF CDAL ENTRY FOR THIS 0919 01866000
*                                      CPU IN ITS PSA        @Z40FPXA*/ 01867000
         LR    @01,@14                                             0919 01868000
         SLA   @01,2                                               0919 01869000
         L     @14,CVTCDAL(,RCVT)                                  0919 01870000
         LA    @14,CDAL(@01,@14)                                   0919 01871000
         ST    @14,PSACDAL(,@15)                                   0919 01872000
*   PSACPULA=NICPADR+'40'X;         /* PUT LOG CPU ADDR OF IPL CPU IN   01873000
*                                      PSA                           */ 01874000
         SLR   @14,@14                                             0920 01875000
         ICM   @14,3,NICPADR                                       0920 01876000
         AH    @14,@CH02302                                        0920 01877000
         STH   @14,PSACPULA(,@15)                                  0920 01878000
*   TABPTR=ADDR(NPCCA);             /* SET BASE PTR TO ADDR OF TABLE    01879000
*                                      ENTRY FOR PCCA                */ 01880000
         LA    TABPTR,NPCCA                                        0921 01881000
*   PSAPCCAV=NP0VADDR;              /* PUT VIRT ADDR OF PCCA IN PSA  */ 01882000
         MVC   PSAPCCAV(4,@15),NP0VADDR(TABPTR)                    0922 01883000
*   PSAPCCAR=NP0RADDR;              /* PUT REAL ADDR OF PCCA IN PSA  */ 01884000
         MVC   PSAPCCAR(4,@15),NP0RADDR(TABPTR)                    0923 01885000
*   TABPTR=ADDR(NLCCA);             /* SET BASE PTR. TO TABLE ENTRY     01886000
*                                      FOR LCCA                      */ 01887000
         LA    TABPTR,NLCCA                                        0924 01888000
*   PSALCCAV=NP0VADDR;              /* PUT VIRT ADDR OF LCCA IN PSA  */ 01889000
         MVC   PSALCCAV(4,@15),NP0VADDR(TABPTR)                    0925 01890000
*   PSALCCAR=NP0RADDR;              /* PUT REAL ADDR OF LCCA IN PSA  */ 01891000
         MVC   PSALCCAR(4,@15),NP0RADDR(TABPTR)                    0926 01892000
*   PSATNEW=NVTMSTCB;               /* PUT ADDR. OF M.S. TCB IN PSA  */ 01893000
         L     @14,NVTMSTCB                                        0927 01894000
         ST    @14,PSATNEW(,@15)                                   0927 01895000
*   PSATOLD=NVTMSTCB;                                              0928 01896000
         ST    @14,PSATOLD(,@15)                                   0928 01897000
*   PSAANEW=NVTMASCB;               /* PUT ADDR.OF M.S. ASCB IN PSA  */ 01898000
         L     @14,NVTMASCB                                        0929 01899000
         ST    @14,PSAANEW(,@15)                                   0929 01900000
*   PSAAOLD=NVTMASCB;                                              0930 01901000
*                                                                  0930 01902000
         ST    @14,PSAAOLD(,@15)                                   0930 01903000
*   /*****************************************************************/ 01904000
*   /*                                                               */ 01905000
*   /* ROUTINE TO FORMAT ENQ/DEQ CELLS. STORAGE IS ALLOCATED OUT OF  */ 01906000
*   /* SQA AND AFTER FORMATING QUE HEADERS WILL BE PLACED IN ENQ/DEQ */ 01907000
*   /* WSA                                                           */ 01908000
*   /*                                                               */ 01909000
*   /*****************************************************************/ 01910000
*                                                                  0931 01911000
*   TABPTR=ADDR(ENQCELL);           /* POINT TO ENQ CELL LIST      0931 01912000
*                                                            @Z30BNXA*/ 01913000
         LA    TABPTR,ENQCELL                                      0931 01914000
*   ENQCPTR=WSAGNQDQ;               /* ADDRESS OF ENQ/DEQ WORK AREA     01915000
*                                                            @Z30BNXA*/ 01916000
         L     @01,CVTSPSA(,RCVT)                                  0932 01917000
         L     ENQCPTR,WSAGNQDQ(,@01)                              0932 01918000
*   GSCOUNT=QTAB;                   /* COPY HEADER TO WORK AREA    0933 01919000
*                                                            @Z30BNXA*/ 01920000
         MVC   GSCOUNT(24,ENQCPTR),QTAB                            0933 01921000
*   ENQLIBTB=QTAB;                  /* MOVE CONSTANTS TO ENQ CSECT 0934 01922000
*                                                            @Z30BNXA*/ 01923000
         L     @01,ENQLIMIT                                        0934 01924000
         MVC   ENQLIBTB(24,@01),QTAB                               0934 01925000
*   GSBLOCKB=NP0VADDR;              /* ADDRESS OF INITIAL POOL     0935 01926000
*                                                            @Z30BNXA*/ 01927000
         L     @15,NP0VADDR(,TABPTR)                               0935 01928000
         ST    @15,GSBLOCKB(,ENQCPTR)                              0935 01929000
*   GSBLOCKE=NP0VADDR+ENQLNG;       /* END OF BLOCK          @Z30BNXA*/ 01930000
         LR    @14,@15                                             0936 01931000
         AL    @14,ENQLNG                                          0936 01932000
         ST    @14,GSBLOCKE(,ENQCPTR)                              0936 01933000
*   CURCPTR=NP0VADDR;               /* ADDRESS OF CURRENT CELL     0937 01934000
*                                                            @Z30BNXA*/ 01935000
         LR    CURCPTR,@15                                         0937 01936000
*   CURCPTRR=NP0RADDR;              /* REAL ADDRESS OF CURRENT CELL     01937000
*                                                            @Z30BNXA*/ 01938000
         L     CURCPTRR,NP0RADDR(,TABPTR)                          0938 01939000
*   CELLNGTH=40;                    /* LENGTH OF INITIAL CELL      0939 01940000
*                                                            @Z30BNXA*/ 01941000
*                                                                  0939 01942000
         LA    CELLNGTH,40                                         0939 01943000
*   /*****************************************************************/ 01944000
*   /*                                                               */ 01945000
*   /* SET UP DO LOOP TO HANDLE ENQ HEADER TABLE                     */ 01946000
*   /*                                                               */ 01947000
*   /*****************************************************************/ 01948000
*                                                                  0940 01949000
*   DO ENQCPTR=ENQCPTR+20 BY-4 WHILE(GSCNT^=0);/* LOOP CONTROL       */ 01950000
         LA    @07,20                                              0940 01951000
         ALR   @07,ENQCPTR                                         0940 01952000
         LR    ENQCPTR,@07                                         0940 01953000
         B     @DE00940                                            0940 01954000
@DL00940 DS    0H                                                  0941 01955000
*     GSQUEPT=CURCPTR;              /* SET HEAD OF CURRENT QUE     0941 01956000
*                                                            @Z30BNXA*/ 01957000
*                                                                  0941 01958000
         ST    CURCPTR,GSQUEPT(,ENQCPTR)                           0941 01959000
*     /***************************************************************/ 01960000
*     /*                                                             */ 01961000
*     /* LOOP TO INITIALIZE REST OF CELL                             */ 01962000
*     /*                                                             */ 01963000
*     /***************************************************************/ 01964000
*                                                                  0942 01965000
*     DO LOOPCNT=GSCNT TO 2 BY-1;   /* LOOP CONTROL          @Z30BNXA*/ 01966000
         L     @07,GSCNT(,ENQCPTR)                                 0942 01967000
         ST    @07,LOOPCNT                                         0942 01968000
         B     @DE00942                                            0942 01969000
@DL00942 DS    0H                                                  0943 01970000
*       CELLPTR=CURCPTR+CELLNGTH;   /* POINT TO NEXT CELL    @Z30BNXA*/ 01971000
         LR    @15,CURCPTR                                         0943 01972000
         ALR   @15,CELLNGTH                                        0943 01973000
         ST    @15,CELLPTR(,CURCPTRR)                              0943 01974000
*       CURCPTR=CURCPTR+CELLNGTH;   /* ADDRESS OF NEXT CELL  @Z30BNXA*/ 01975000
         ALR   CURCPTR,CELLNGTH                                    0944 01976000
*       CURCPTRR=CURCPTRR+CELLNGTH; /* INCREMENT REAL ADDR   @Z30BNXA*/ 01977000
         ALR   CURCPTRR,CELLNGTH                                   0945 01978000
*     END;                                                         0946 01979000
*                                                                  0946 01980000
         BCTR  @07,0                                               0946 01981000
         ST    @07,LOOPCNT                                         0946 01982000
@DE00942 CH    @07,@CH00082                                        0946 01983000
         BNL   @DL00942                                            0946 01984000
*     /***************************************************************/ 01985000
*     /*                                                             */ 01986000
*     /* UPDATE HEADER POINTER TO NEXT CELL GROUP                    */ 01987000
*     /*                                                             */ 01988000
*     /***************************************************************/ 01989000
*                                                                  0947 01990000
*     CURCPTR=CURCPTR+CELLNGTH;     /* SKIP TO NEXT CELL START     0947 01991000
*                                                            @Z30BNXA*/ 01992000
         ALR   CURCPTR,CELLNGTH                                    0947 01993000
*     CURCPTRR=CURCPTRR+CELLNGTH;   /* INCREMENT REAL ADDR   @Z30BNXA*/ 01994000
         ALR   CURCPTRR,CELLNGTH                                   0948 01995000
*     CELLNGTH=CELLNGTH-8;          /* NEXT GROUP OF CELLS IS 8 BYTES   01996000
*                                      SMALLER                       */ 01997000
         SH    CELLNGTH,@CH00068                                   0949 01998000
*   END;                                                           0950 01999000
*                                                                  0950 02000000
         AH    ENQCPTR,@CH05060                                    0950 02001000
@DE00940 ICM   @07,15,GSCNT(ENQCPTR)                               0950 02002000
         BNZ   @DL00940                                            0950 02003000
*   /*****************************************************************/ 02004000
*   /*                                                               */ 02005000
*   /* INIT LSQA.                                                    */ 02006000
*   /*                                                               */ 02007000
*   /*****************************************************************/ 02008000
*                                                                  0951 02009000
*NP0LSQI:                                                          0951 02010000
*   NP0RLSQP=NP0RSQAP               /* CALC REAL ADDR OF BEGINNING   */ 02011000
*       -(NVTLSQNO                  /* (LOW END) OF THE LSQA         */ 02012000
*       *4096);                                                    0951 02013000
NP0LSQI  L     @15,NP0RSQAP                                        0951 02014000
         LH    @14,NVTLSQNO                                        0951 02015000
         SLA   @14,12                                              0951 02016000
         LCR   @14,@14                                             0951 02017000
         ALR   @14,@15                                             0951 02018000
         ST    @14,NP0RLSQP                                        0951 02019000
*   NP0SATBL=ADDR(NP0LSQCB);        /* PUT REAL ADDR OF TABLE OF LSQA   02020000
*                                      CTL BLKS IN PARAM AREA        */ 02021000
         LA    NP0SATBL,NP0LSQCB                                   0952 02022000
*   NP0SAHIR=NP0RSQAP;              /* PUT HI REAL ADDRESS TO BE USED   02023000
*                                      BY SPACE ALLOC RTN IN PARAM 0953 02024000
*                                      AREA (NOTE: IN REAL STRG, LSQA   02025000
*                                      PAGE IS JUST BELOW SGA PAGES.    02026000
*                                      THUS THE LOW SQA ADDR IS THE     02027000
*                                      HI LSQA ADDR                  */ 02028000
         LR    NP0SAHIR,@15                                        0953 02029000
*   NP0SAHIV=NVTLSQAS;              /* PUT SYSTEM DEFINED VIRT. ADDR    02030000
*                                      OF END (TOP) OF M.S. LSQA IN     02031000
*                                      PARAM AREA                    */ 02032000
         L     NP0SAHIV,NVTLSQAS                                   0954 02033000
*   CALL NSPALLOC;                  /* CALL SPACE ALLOC. SUBROUTINE  */ 02034000
         BAL   @14,NSPALLOC                                        0955 02035000
*   NP0RLSQA=NP0SAHIR;              /* SAVE REAL ADDR OF NEXT LOWER     02036000
*                                      AVAIL. BYTE IN LSQA           */ 02037000
         LR    NP0RLSQA,NP0SAHIR                                   0956 02038000
*   NP0VLSQA=NP0SAHIV;              /* SAVE VIRT. ADDR OF NEXT LOWER    02039000
*                                      AVAIL. BYTE IN LSQA           */ 02040000
*                                                                  0957 02041000
         LR    NP0VLSQA,NP0SAHIV                                   0957 02042000
*   /*****************************************************************/ 02043000
*   /*                                                               */ 02044000
*   /* INIT M.S. RSMHD                                               */ 02045000
*   /*                                                               */ 02046000
*   /*****************************************************************/ 02047000
*                                                                  0958 02048000
*   ASCBPTR=NVTMASCB;                                              0958 02049000
         L     @06,NVTMASCB                                        0958 02050000
         ST    @06,ASCBPTR                                         0958 02051000
*   RFY                                                            0959 02052000
*    (RSMHD) BASED(TBASE);          /* RESPECIFY BASE PTR FOR RSMHD  */ 02053000
*   TBASE=ASCBRSM;                  /* PUT REAL ADDR OF M.S. RSMHD IN   02054000
*                                      BASE PTR (NOTE: M.S. ASCB AND    02055000
*                                      RSMHD ARE BOTH SYSGEN'D IN THE   02056000
*                                      NUCLEUS THUS, ADDR. OF RSMHD     02057000
*                                      IS ALREADY IN ASCB)           */ 02058000
         L     TBASE,ASCBRSM(,@06)                                 0960 02059000
*   TABPTR=ADDR(NSEGTAB);           /* SET BASE TO TABLE ENTRY FOR 0961 02060000
*                                      M.S. SEG TABLE                */ 02061000
         LA    TABPTR,NSEGTAB                                      0961 02062000
*   RSMVSTO=NP0VADDR;               /* PUT VIRT ADDR OF SEG TABLE IN    02063000
*                                      RSMHD                         */ 02064000
         MVC   RSMVSTO(4,TBASE),NP0VADDR(TABPTR)                   0962 02065000
*   RFY                                                            0963 02066000
*    (RSMHD) BASED(ASCBRSM);                                       0963 02067000
*                                                                  0963 02068000
*   /*****************************************************************/ 02069000
*   /*                                                               */ 02070000
*   /* INIT M.S. ASCB                                                */ 02071000
*   /*                                                               */ 02072000
*   /*****************************************************************/ 02073000
*                                                                  0964 02074000
*   RFY                                                            0964 02075000
*    (ASCB) BASED(TBASE);           /* RESPECIFY BASE FOR ASCB       */ 02076000
*   TBASE=NVTMASCB;                 /* PUT REAL ADDR OF M.S. ASCB IN    02077000
*                                      BASE                          */ 02078000
         LR    TBASE,@06                                           0965 02079000
*   TABPTR=ADDR(NLDA);              /* SET BASE TO TABLE ENTRY FOR 0966 02080000
*                                      LDA                           */ 02081000
         LA    @15,NLDA                                            0966 02082000
         LR    TABPTR,@15                                          0966 02083000
*   ASCBLDA=NP0VADDR;               /* PUT VIRT ADDR OF LDA IN ASCB  */ 02084000
         MVC   ASCBLDA(4,TBASE),NP0VADDR(TABPTR)                   0967 02085000
*   ASCBFMCT=NVTLSQNO;              /* PUT NUMBER OF REAL LSQA FRAMES   02086000
*                                      IN ASCB FIELD CONTAINING A  0968 02087000
*                                      COUNT OF PRIVATE AREA FRAMES.    02088000
*                                      NOTE: THIS COUNT DOES NOT   0968 02089000
*                                      INCL. THE FRAMES IN THE M.S.     02090000
*                                      V=R RGN. SINCE THE V=R REG. IS   02091000
*                                      NOT PERMANENT AND WILL NOT BE    02092000
*                                      INCL. IN THE PRIVATE AREA AS     02093000
*                                      IT WILL EVENTUALLY BE DEFINED.*/ 02094000
         MVC   ASCBFMCT(2,TBASE),NVTLSQNO                          0968 02095000
*   RFY                                                            0969 02096000
*    (ASCB) BASED(ASCBPTR);         /* RESPECIFY ASCB BASE BACK TO 0969 02097000
*                                      ORIG VALUE                    */ 02098000
*                                                                  0969 02099000
*   /*****************************************************************/ 02100000
*   /*                                                               */ 02101000
*   /* INIT LDA                                                      */ 02102000
*   /*                                                               */ 02103000
*   /*****************************************************************/ 02104000
*                                                                  0970 02105000
*   RFY                                                            0970 02106000
*    (LDA) BASED(TBASE);            /* RESPECIFY BASE PTR FOR LDA    */ 02107000
*   TABPTR=ADDR(NLDA);              /* SET BASE TO TABLE ENTRY FOR 0971 02108000
*                                      LDA                           */ 02109000
         LR    TABPTR,@15                                          0971 02110000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF LDA IN BASE     02111000
*                                      FOR LDA                       */ 02112000
         L     TBASE,NP0RADDR(,TABPTR)                             0972 02113000
*   PASCBSV=NVTMASCB;               /* PUT ADDR OF M.S. ASCB IN LDA  */ 02114000
         ST    @06,PASCBSV(,TBASE)                                 0973 02115000
*   TABPTR=ADDR(NMSAPQE);           /* SET BASE TO TABLE ENTRY FOR 0974 02116000
*                                      PGE FOR M.S. ADDR. SPACE      */ 02117000
         LA    TABPTR,NMSAPQE                                      0974 02118000
*   ASDPQE=NP0VADDR;                /* PUT VIRT ADDR OF M.S. ADDR  0975 02119000
*                                      SPACE PQE IN LDA              */ 02120000
         MVC   ASDPQE(4,TBASE),NP0VADDR(TABPTR)                    0975 02121000
*   TABPTR=ADDR(NRSVPT);            /* SET BASE TO TABLE ENTRY FOR 0976 02122000
*                                      RESV'D PAGE TABLE AND EXTERNAL   02123000
*                                      PAGE TABLE                    */ 02124000
         LA    TABPTR,NRSVPT                                       0976 02125000
*   LDARSVPT=NP0VADDR;              /* PUT VIRT. ADDR. OF RESERVED 0977 02126000
*                                      PAGE TABLE AND EXTERNAL PAGE     02127000
*                                      TABLE IN MASTER SCHEDULER'S 0977 02128000
*                                      LDA                           */ 02129000
*                                                                  0977 02130000
         MVC   LDARSVPT(4,TBASE),NP0VADDR(TABPTR)                  0977 02131000
*   /*****************************************************************/ 02132000
*   /*                                                               */ 02133000
*   /* INITIALIZE GETMAIN CELL IN LSQA                               */ 02134000
*   /*                                                               */ 02135000
*   /*****************************************************************/ 02136000
*                                                                  0978 02137000
*   TABPTR=ADDR(GMLSCELL);          /* SET UP BASE FOR SPACE ALLOC 0978 02138000
*                                                            @Z30ENXA*/ 02139000
         LA    TABPTR,GMLSCELL                                     0978 02140000
*   LCLCELL=NP0VADDR;               /* CHAIN POOL OUT OF LDA @Z30ENXA*/ 02141000
         L     @06,NP0VADDR(,TABPTR)                               0979 02142000
         ST    @06,LCLCELL(,TBASE)                                 0979 02143000
*   LCLCELCT=(NP0LNGTH/16);         /* COUNT OF CELLS        @Z30ENXA*/ 02144000
         L     @15,NP0LNGTH(,TABPTR)                               0980 02145000
         LR    @14,@15                                             0980 02146000
         SRL   @14,4                                               0980 02147000
         ST    @14,LCLCELCT(,TBASE)                                0980 02148000
*   TBASE=NP0RADDR;                 /* SET ADDRESS OF CELLS  @Z30ENXA*/ 02149000
         L     TBASE,NP0RADDR(,TABPTR)                             0981 02150000
*   CHNADDR=NP0VADDR;               /* ADDRESS OF CELLS              */ 02151000
*                                                                  0982 02152000
         LR    CHNADDR,@06                                         0982 02153000
*   /*****************************************************************/ 02154000
*   /*                                                               */ 02155000
*   /* SET LOOP TO INIT ALL CELLS IN POOL                            */ 02156000
*   /*                                                               */ 02157000
*   /*****************************************************************/ 02158000
*                                                                  0983 02159000
*   DO LOOPCNT=(NP0LNGTH/16) TO 2 BY-1;/* LOOP CONTROL       @Z30ENXA*/ 02160000
         SRL   @15,4                                               0983 02161000
         ST    @15,LOOPCNT                                         0983 02162000
         B     @DE00983                                            0983 02163000
@DL00983 DS    0H                                                  0984 02164000
*     CHNADDR=CHNADDR+16;           /* ADDRESS OF NEXT CELL  @Z30ENXA*/ 02165000
         LA    @06,16                                              0984 02166000
         ALR   CHNADDR,@06                                         0984 02167000
*     CHAINPTR=CHNADDR;             /* SET ADDRESS OF NEXT CELL    0985 02168000
*                                                            @Z30ENXA*/ 02169000
         ST    CHNADDR,CHAINPTR(,TBASE)                            0985 02170000
*     TBASE=TBASE+16;               /* STEP TO NEXT CELL     @Z30ENXA*/ 02171000
         ALR   TBASE,@06                                           0986 02172000
*   END;                                                           0987 02173000
         BCTR  @15,0                                               0987 02174000
         ST    @15,LOOPCNT                                         0987 02175000
@DE00983 CH    @15,@CH00082                                        0987 02176000
         BNL   @DL00983                                            0987 02177000
*   RFY                                                            0988 02178000
*    (LDA) BASED(LDAPTR);                                          0988 02179000
*                                                                  0988 02180000
*   /*****************************************************************/ 02181000
*   /*                                                               */ 02182000
*   /* INIT SPQE FOR LSQA                                            */ 02183000
*   /*                                                               */ 02184000
*   /*****************************************************************/ 02185000
*                                                                  0989 02186000
*   RFY                                                            0989 02187000
*    (SPQESECT) BASED(TBASE);       /* RESPECIFY BASE FOR SPQE       */ 02188000
*   TABPTR=ADDR(NLSQSPQE);          /* SET BASE TO TABLE ENTRY FOR 0990 02189000
*                                      SPQE FOR LSQA                 */ 02190000
         LA    TABPTR,NLSQSPQE                                     0990 02191000
*   NVTLSPQE=NP0VADDR;              /* PUT VIRT. ADDR. OF SPQE FOR 0991 02192000
*                                      LSQA IN SAVE AREA IN NVT      */ 02193000
         MVC   NVTLSPQE(4),NP0VADDR(TABPTR)                        0991 02194000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF SPQE IN BASE */ 02195000
         L     TBASE,NP0RADDR(,TABPTR)                             0992 02196000
*   TABPTR=ADDR(NLSQADQE);          /* SET BASE TO TABLE ENTRY FOR 0993 02197000
*                                      DQE FOR LSQA                  */ 02198000
         LA    @04,NLSQADQE                                        0993 02199000
         LR    TABPTR,@04                                          0993 02200000
*   SPDQEAD=NP0VADDR;               /* PUT VIRT ADDR OF DQE IN SPQE  */ 02201000
         MVC   SPDQEAD(4,TBASE),NP0VADDR(TABPTR)                   0994 02202000
*   SPQEFLGS='40'X;                 /* SET LAST ELT FLAGS IN SPQE    */ 02203000
         MVI   SPQEFLGS(TBASE),X'40'                               0995 02204000
*   SPQEID='FF'X;                   /* PUT SUBPOOL ID IN SPQE        */ 02205000
         MVI   SPQEID(TBASE),X'FF'                                 0996 02206000
*   RFY                                                            0997 02207000
*    (SPQESECT) BASED(SPQESPTR);    /* RESPECIFY SPQE BASE BACK TO 0997 02208000
*                                      ORIG VALUE                    */ 02209000
*                                                                  0997 02210000
*   /*****************************************************************/ 02211000
*   /*                                                               */ 02212000
*   /* INIT DQE FOR LSQA                                             */ 02213000
*   /*                                                               */ 02214000
*   /*****************************************************************/ 02215000
*                                                                  0998 02216000
*   RFY                                                            0998 02217000
*    (DQESECT) BASED(TBASE);        /* RESPECIFY BASE FOR DQE        */ 02218000
*   RFY                                                            0999 02219000
*    (GDA) BASED(GDAPTR);           /* RESPECIFY GDA BASE TO ITS   0999 02220000
*                                      ORIG. VALUE. NEED THIS TO PUT    02221000
*                                      IN TWO FIELDS IN THE GDA TO 0999 02222000
*                                      FAKE OUT FREEMAIN. 'GDAPTR' 0999 02223000
*                                      WAS SET EARLIER TO REAL ADDR.    02224000
*                                      OF GDA.                       */ 02225000
*   TABPTR=ADDR(NLSQADQE);          /* SET BASE TO TABLE ENTRY FOR 1000 02226000
*                                      DQE FOR LSQA                  */ 02227000
         LR    TABPTR,@04                                          1000 02228000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF DQE IN NEW 1001 02229000
*                                      BASE                          */ 02230000
         L     TBASE,NP0RADDR(,TABPTR)                             1001 02231000
*   TABPTR=ADDR(NLSQAFQE);          /* SET BASE TO TABLE ENTRY FOR 1002 02232000
*                                      FQE FOR LSQA                  */ 02233000
         LA    @04,NLSQAFQE                                        1002 02234000
         LR    TABPTR,@04                                          1002 02235000
*   DQFQEPTR=NP0VADDR;              /* PUT VIRT ADDR OF FQE IN DQE   */ 02236000
         MVC   DQFQEPTR(4,TBASE),NP0VADDR(TABPTR)                  1003 02237000
*   DQEBLKAD=NVTLSQAS               /* PUT VIRT ADDR OF BEGINNING    */ 02238000
*       -(NVTLSQNO                  /* (LOW END) OF LSQA IN DQE      */ 02239000
*       *4096);                                                    1004 02240000
         LH    @06,NVTLSQNO                                        1004 02241000
         SLA   @06,12                                              1004 02242000
         L     @15,NVTLSQAS                                        1004 02243000
         SLR   @15,@06                                             1004 02244000
         ST    @15,DQEBLKAD(,TBASE)                                1004 02245000
*   PASTRT=DQEBLKAD;                /* PUT THIS SAME ADDR IN GDA   1005 02246000
*                                      FIELD FOR USE BY FREEMAIN.    */ 02247000
         L     @14,GDAPTR                                          1005 02248000
         ST    @15,PASTRT(,@14)                                    1005 02249000
*   NVTALSQA=DQEBLKAD;              /* SAVE THIS VIRT ADDR IN NVT    */ 02250000
         ST    @15,NVTALSQA                                        1006 02251000
*   DQELNTH=NVTLSQNO                /* PUT SIZE (IN VIRT) OF LSQA IN */ 02252000
*       *4096;                      /* DQE                           */ 02253000
         ST    @06,DQELNTH(,TBASE)                                 1007 02254000
*   PASIZE=DQELNTH;                 /* PUT THIS SAME LENGTH IN GDA 1008 02255000
*                                      FIELD, FOR USE BY FREEMAIN.   */ 02256000
         ST    @06,PASIZE(,@14)                                    1008 02257000
*   RFY                                                            1009 02258000
*    (DQESECT) BASED(DQESEPTR);     /* RESPECIFY DQE BASE BACK TO  1009 02259000
*                                      ORIG. VALUE                   */ 02260000
*                                                                  1009 02261000
*   /*****************************************************************/ 02262000
*   /*                                                               */ 02263000
*   /* INIT PQE FOR M.S. ADDR SPACE                                  */ 02264000
*   /*                                                               */ 02265000
*   /*****************************************************************/ 02266000
*                                                                  1010 02267000
*   RFY                                                            1010 02268000
*    (PQESECT) BASED(TBASE);        /* RESPECIFY BASE FOR PQE        */ 02269000
*   TABPTR=ADDR(NMSAPQE);           /* SET BASE TO TABLE ENTRY FOR 1011 02270000
*                                      PQE FOR M.S. ADDR SPACE       */ 02271000
         LA    @15,NMSAPQE                                         1011 02272000
         LR    TABPTR,@15                                          1011 02273000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF PQE IN BASE  */ 02274000
         L     TBASE,NP0RADDR(,TABPTR)                             1012 02275000
*   TABPTR=ADDR(NMSAFBQE);          /* SET BASE TO TABLE ENTRY FOR 1013 02276000
*                                      FBQE FOR M.S. ADDR SPACE      */ 02277000
         LA    @14,NMSAFBQE                                        1013 02278000
         LR    TABPTR,@14                                          1013 02279000
*   PQEFFBQE=NP0VADDR;              /* PUT VIRT ADDR OF THE FBQE     */ 02280000
         L     @01,NP0VADDR(,TABPTR)                               1014 02281000
         ST    @01,PQEFFBQE(,TBASE)                                1014 02282000
*   PQEBFBQE=NP0VADDR;              /* IN TWO FIELDS OF THE PQE      */ 02283000
         ST    @01,PQEBFBQE(,TBASE)                                1015 02284000
*   PQETCB=NVTMSTCB;                /* PUT ADDR. M.S. TCB IN PQE     */ 02285000
         MVC   PQETCB(4,TBASE),NVTMSTCB                            1016 02286000
*   RFY                                                            1017 02287000
*    (PQESECT) BASED(PQESEPTR);     /* RESPECIFY BASE FOR PGE BACK TO   02288000
*                                      ORIG. VALUE                   */ 02289000
*                                                                  1017 02290000
*   /*****************************************************************/ 02291000
*   /*                                                               */ 02292000
*   /* INIT FBQE FOR M.S. ADDRESS SPACE                              */ 02293000
*   /*                                                               */ 02294000
*   /*****************************************************************/ 02295000
*                                                                  1018 02296000
*   RFY                                                            1018 02297000
*    (FBQESECT) BASED(TBASE);       /* RESPECIFY BASE FOR FBQE       */ 02298000
*   TABPTR=ADDR(NMSAFBQE);          /* SET BASE TO TABLE ENTRY FOR 1019 02299000
*                                      FBQE FOR M.S. ADDR SPACE      */ 02300000
         LR    TABPTR,@14                                          1019 02301000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF FBQE IN BASE */ 02302000
         L     TBASE,NP0RADDR(,TABPTR)                             1020 02303000
*   TABPTR=ADDR(NMSAPQE);           /* SET BASE TO TABLE ENTRY FOR 1021 02304000
*                                      PQE FOR M.S. ADDR SPACE       */ 02305000
         LR    TABPTR,@15                                          1021 02306000
*   FWDPTR=NP0VADDR;                /* PUT VIRT ADDR OF PQE IN TWO   */ 02307000
         L     @15,NP0VADDR(,TABPTR)                               1022 02308000
         ST    @15,FWDPTR(,TBASE)                                  1022 02309000
*   BCKPTR=NP0VADDR;                /* FIELDS OF THE FBQE            */ 02310000
         ST    @15,BCKPTR(,TBASE)                                  1023 02311000
*   RFY                                                            1024 02312000
*    (FBQESECT) BASED(FBQESPTR);    /* RESPECIFY FBQE BASE BACK TO 1024 02313000
*                                      ORIG. VALUE                   */ 02314000
*                                                                  1024 02315000
*   /*****************************************************************/ 02316000
*   /*                                                               */ 02317000
*   /* INIT FQE FOR LSQA                                             */ 02318000
*   /*                                                               */ 02319000
*   /*****************************************************************/ 02320000
*                                                                  1025 02321000
*   RFY                                                            1025 02322000
*    (FQESECT) BASED(TBASE);        /* RESPECIFY BASE FOR FQE        */ 02323000
*   TABPTR=ADDR(NLSQAFQE);          /* SET BASE TO TABLE ENTRY FOR 1026 02324000
*                                      FQE FOR LSQA                  */ 02325000
         LR    TABPTR,@04                                          1026 02326000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF FQE IN BASE     02327000
*                                      CALC. AMOUNT OF UNUSED LSQA 1027 02328000
*                                      SPACE AND PUT VALUE IN FQE    */ 02329000
         L     TBASE,NP0RADDR(,TABPTR)                             1027 02330000
*   FQELNTH=((NVTLSQNO              /* NVTLSQNO * PAGE SIZE IS TOTAL */ 02331000
*       *4096)                      /* LSQA SIZE                     */ 02332000
*       -(NP0RSQAP                  /* NP0RSQAP - NP0RLSQA IS AMOUNT */ 02333000
*       -NP0RLSQA)                  /* USED, DIFFERENCE BETWEEN THESE   02334000
*                                      IS THE AMOUNT OF AVAIL SPACE     02335000
*                                      IN LSQA                       */ 02336000
*       +LENGTH(FQESECT));          /* LENGTH OF THE FQE IS ADDED IN    02337000
*                                      SINCE THE AVAILABLE COUNT IN     02338000
*                                      AN FQE MUST INCLUDE THE FQE IN   02339000
*                                      THAT COUNT.                   */ 02340000
         L     @04,NP0RSQAP                                        1028 02341000
         SLR   @04,NP0RLSQA                                        1028 02342000
         SLR   @06,@04                                             1028 02343000
         AH    @06,@CH00068                                        1028 02344000
         ST    @06,FQELNTH(,TBASE)                                 1028 02345000
*   RFY                                                            1029 02346000
*    (FQESECT) BASED(FQESEPTR);                                    1029 02347000
*NP0SSZCK:                          /* STORAGE SIZE CHECK            */ 02348000
*/*  THIS RTN VERIFIES THAT THERE IS SUFFICIENT ON LINE REAL STORAGE */ 02349000
*/*  TO ACCOMODATE  THE NUCLEUS, REAL SQA, REAL LSQA, NIP'S V=R      */ 02350000
*/*  REGION  AND  RESERVED SPACE FOR LATER USE IN PAGING.  NIP'S     */ 02351000
*/*  V=R REGION CONSISTS OF THE NUCLEUS BUFFER (SP 251) AND FREE     */ 02352000
*/*  SPACE FOR DYNAMIC GETMAIN'S FOR SUBSEQUENT NIP BIM'S AND RIMS   */ 02353000
*/*  THE MASTER SCHEDULER'S TCB IS SET UP TO MAKE IT LOOK AS IF IT   */ 02354000
*/*  OWNS THIS REGION. SINCE THERE IS NO TCB FOR THE NIP ROUTINES,   */ 02355000
*/*  THEY ARE MADE TO LOOK AS IF THEY EXECUTE UNDER THE M.S. TCB.    */ 02356000
*/*  RESTRICTIONS ON THE NIP V=R REGION:                             */ 02357000
*/*   - THE ENTIRE REGION MUST BE A SINGLE, CONTIGUOUS BLOCK OF      */ 02358000
*/*     ONLINE REAL STORAGE                                          */ 02359000
*/*   - THE REGION MUST BEGIN AT THE TOP OF THE NUCLEUS              */ 02360000
*/*   - THE ENTIRE REGION MUST FIT BELOW THE FIRST (LOW) OFFLINE     */ 02361000
*/*     FRAME                                                        */ 02362000
*/*   - THERE MUST BE SUFFICIENT ONLINE REAL STORAGE BELOW THE FIRST */ 02363000
*/*       (LOWEST) OFFLINE FRAME FOR THE MINIMUM NIP REGION          */ 02364000
*                                                                  1030 02365000
*   NP0TOF=NP0STSZ/4096;            /* CALC. TOTAL NUMBER OF ONLINE     02366000
*                                      FRAMES                        */ 02367000
NP0SSZCK L     @15,NP0STSZ                                         1030 02368000
         LR    NP0TOF,@15                                          1030 02369000
         SRL   NP0TOF,12                                           1030 02370000
*   NP0NUCND=((NVTNUCND             /* ROUND NUC END ADDR UP TO      */ 02371000
*       +4095)                      /* PAGE BOUND                    */ 02372000
*       |4095)&&4095;                                              1031 02373000
*                                                                  1031 02374000
         LA    @14,4095                                            1031 02375000
         L     NP0NUCND,NVTNUCND                                   1031 02376000
         ALR   NP0NUCND,@14                                        1031 02377000
         OR    NP0NUCND,@14                                        1031 02378000
         XR    NP0NUCND,@14                                        1031 02379000
*   /*****************************************************************/ 02380000
*   /*                                                               */ 02381000
*   /* CALCULATE TOTAL NUMBER OF AVAILABLE FRAMES ---- CALCULATE     */ 02382000
*   /* NUMBER OF FRAMES OCCUPIED BY SQA, LSQA, AND THE NUCLEUS AND   */ 02383000
*   /* SUBTRACT THIS TOTAL FROM THE TOTAL NUMBER OF ONLINE FRAMES    */ 02384000
*   /*                                                               */ 02385000
*   /*****************************************************************/ 02386000
*                                                                  1032 02387000
*   NP0AVAIL=NP0TOF                 /* TOTAL ONLINE FRAMES           */ 02388000
*       -(NVTSQANO                  /* NUMBER OF SQA FRAMES          */ 02389000
*       +NVTLSQNO                   /* NUMBER OF LSQA FRAMES         */ 02390000
*       +(NP0NUCND                  /* NUMBER OF NUCLEUS FRAMES      */ 02391000
*       /4096));                                                   1032 02392000
*                                                                  1032 02393000
         LH    NP0AVAIL,NVTSQANO                                   1032 02394000
         AH    NP0AVAIL,NVTLSQNO                                   1032 02395000
         LR    @14,NP0NUCND                                        1032 02396000
         SRL   @14,12                                              1032 02397000
         ALR   NP0AVAIL,@14                                        1032 02398000
         LCR   NP0AVAIL,NP0AVAIL                                   1032 02399000
         ALR   NP0AVAIL,NP0TOF                                     1032 02400000
*   /*****************************************************************/ 02401000
*   /*                                                               */ 02402000
*   /* CHECK IF THERE IS ENOUGH SPACE FOR MIN REQ'TS -               */ 02403000
*   /*                                                               */ 02404000
*   /*****************************************************************/ 02405000
*                                                                  1033 02406000
*   IF NP0AVAIL-(NVTNBMIN           /* SUBTRACT NUC BUF MIN,         */ 02407000
*       +NVTRGNAV                   /* AND REGION AVAIL. SPACE MIN   */ 02408000
*       +NVTRSVMN)                  /* AND RESERVED (FOR PAGING) MIN.*/ 02409000
*       <0                          /* ENOUGH?                       */ 02410000
*     THEN                                                         1033 02411000
         LH    @02,NVTNBMIN                                        1033 02412000
         AH    @02,NVTRGNAV                                        1033 02413000
         AH    @02,NVTRSVMN                                        1033 02414000
         LCR   @02,@02                                             1033 02415000
         ALR   @02,NP0AVAIL                                        1033 02416000
         LTR   @02,@02                                             1033 02417000
         BM    @RT01033                                            1033 02418000
*     GOTO NP0INSRS;                /* IF NOT - WAIT STATE           */ 02419000
*                                                                  1034 02420000
*   /*****************************************************************/ 02421000
*   /*                                                               */ 02422000
*   /* IF THERE IS ENOUGH, SCAN STOR. MAP TO LOCATE LOW OFFLINE      */ 02423000
*   /* ADDRESS                                                       */ 02424000
*   /*                                                               */ 02425000
*   /*****************************************************************/ 02426000
*                                                                  1035 02427000
*   IF NP0STSZ^=16777216            /* CHECK IF THERE IS ANY OFFLINE    02428000
*                                      STRG.                         */ 02429000
*     THEN                          /* IF THERE IS                   */ 02430000
         C     @15,@CF05001                                        1035 02431000
         BE    @RF01035                                            1035 02432000
*     DO;                           /* THEN                          */ 02433000
*       INDXPTR=NVTSTMAP;           /* GET ADDR. OF STOR. MAP        */ 02434000
         L     INDXPTR,NVTSTMAP                                    1037 02435000
*       RFY                                                        1038 02436000
*        (NP0MPBYT) BASED(INDXPTR);                                1038 02437000
*NP0SSC01:                                                         1039 02438000
*       RFY                                                        1039 02439000
*        (OFLINDX) RSTD;                                           1039 02440000
NP0SSC01 DS    0H                                                  1040 02441000
*       IF NP0MPBYT='00'X           /* SCAN THE MAP FOR OFFLINE      */ 02442000
*         THEN                      /* INDICATOR                     */ 02443000
         CLI   NP0MPBYT(INDXPTR),X'00'                             1040 02444000
         BNE   @RF01040                                            1040 02445000
*         DO;                                                      1041 02446000
*           INDXPTR=1+INDXPTR;      /* UPDATE INDEX TO NEXT ENTRY    */ 02447000
         AH    INDXPTR,@CH00070                                    1042 02448000
*           GOTO NP0SSC01;          /* LOOP                          */ 02449000
         B     NP0SSC01                                            1043 02450000
*         END;                                                     1044 02451000
*       ELSE                        /* IF OFFLINE MAP ENTRY FOUND, 1045 02452000
*                                      GET                           */ 02453000
*         DO;                       /* ADDR. OF CORRES. FRAME        */ 02454000
@RF01040 DS    0H                                                  1046 02455000
*           OFLINDX=INDXPTR         /* GET INDEX OF MAP ENTRY        */ 02456000
*               -NVTSTMAP;                                         1046 02457000
         LR    OFLINDX,INDXPTR                                     1046 02458000
         SL    OFLINDX,NVTSTMAP                                    1046 02459000
*           GEN(SLL    OFLINDX,12); /* CONVERT INDEX TO FRAME ADDR   */ 02460000
         SLL    OFLINDX,12                                              02461000
*           NP0LUNAV=OFLINDX;       /* PUT THIS ADDR. IN SAVE AREA 1048 02462000
*                                      FOR                           */ 02463000
         LR    NP0LUNAV,OFLINDX                                    1048 02464000
*         END;                      /* LOW UN-AVAIL ADDR.            */ 02465000
*       RFY                                                        1050 02466000
*        (OFLINDX) UNRSTD;                                         1050 02467000
*     END;                          /* CLOSE DO-GROUP                */ 02468000
*   ELSE                            /* IF HAVE 16MB OF ONLINE REAL   */ 02469000
*     NP0LUNAV=16777216             /* STRG, SET LOW UN-AVAIL ADDR TO*/ 02470000
*         -4096;                    /* ADDR. OF TOP REAL FRAME       */ 02471000
         B     @RC01035                                            1052 02472000
@RF01035 L     NP0LUNAV,@CF05571                                   1052 02473000
*   RFY                                                            1053 02474000
*    (NP0STMAP) BASED(NVTSTMAP);                                   1053 02475000
@RC01035 DS    0H                                                  1054 02476000
*   IF NP0LUNAV>NP0RLSQP            /* CHECK IF LOW UN-AVAIL ADDR IS    02477000
*                                      ABOVE LSQA. IF SO, SET LOW UN-*/ 02478000
*     THEN                          /* AVAIL ADDR TO START OF LSQA   */ 02479000
         L     @15,NP0RLSQP                                        1054 02480000
         CR    NP0LUNAV,@15                                        1054 02481000
         BNH   @RF01054                                            1054 02482000
*     NP0LUNAV=NP0RLSQP;            /* IF NOT, LEAVE LOW UN-AVAIL  1055 02483000
*                                      ADDR ALONE                    */ 02484000
         LR    NP0LUNAV,@15                                        1055 02485000
*   NP0DIFF=NP0AVAIL                /* CALC. NUMBER OF FRAMES LEFT   */ 02486000
*       -(NVTNBMIN                  /* AFTER MINIMUMS ARE TAKEN OUT  */ 02487000
*       +NVTRGNAV+NVTRSVMN);                                       1056 02488000
@RF01054 LH    @15,NVTRSVMN                                        1056 02489000
         LH    @14,NVTNBMIN                                        1056 02490000
         LH    NP0DIFF,NVTRGNAV                                    1056 02491000
         ALR   NP0DIFF,@14                                         1056 02492000
         ALR   NP0DIFF,@15                                         1056 02493000
         LCR   NP0DIFF,NP0DIFF                                     1056 02494000
         ALR   NP0DIFF,NP0AVAIL                                    1056 02495000
*   IF NP0DIFF<2                    /* IF NUMBER AVAIL IS < 2        */ 02496000
*     THEN                          /* THEN                          */ 02497000
         CH    NP0DIFF,@CH00082                                    1057 02498000
         BNL   @RF01057                                            1057 02499000
*     DO;                           /* ADD THE EXTRA FRAMES TO       */ 02500000
*       NP0NUCBF=NVTNBMIN           /* NUCLEUS BUFFER                */ 02501000
*           +NP0DIFF;                                              1059 02502000
         ALR   @14,NP0DIFF                                         1059 02503000
         LR    NP0NUCBF,@14                                        1059 02504000
*       NP0RSRVD=NVTRSVMN;          /* SET NUMBER RESERVED FRAMES TO    02505000
*                                      ITS MINIMUM                   */ 02506000
         STH   @15,NP0RSRVD                                        1060 02507000
*     END;                                                         1061 02508000
*   ELSE                            /* IF NUMBER OF FRAMES LEFT AFTER*/ 02509000
*     DO;                           /* MINIMUMS ARE TAKEN OUT IS     */ 02510000
         B     @RC01057                                            1062 02511000
@RF01057 DS    0H                                                  1063 02512000
*       NP0QUOT=NP0DIFF/2;          /* GREATER THAN TWO, DIVIDE BY 2 */ 02513000
         LR    @15,NP0DIFF                                         1063 02514000
         SRL   @15,1                                               1063 02515000
         STH   @15,NP0QUOT                                         1063 02516000
*       NP0RSRVD=NVTRSVMN+          /* AND ADD THE QUOTIENT TO MIN.  */ 02517000
*           NP0QUOT;                /* FOR RESERVED FRAMES           */ 02518000
         LH    @14,NVTRSVMN                                        1064 02519000
         ALR   @14,@15                                             1064 02520000
         STH   @14,NP0RSRVD                                        1064 02521000
*       NP0NUCBF=NVTNBMIN+          /* ADD ALL REMAINING FRAMES TO   */ 02522000
*           (NP0DIFF-               /* MIN. FOR NUC BUFF. (THIS SAVES*/ 02523000
*           NP0QUOT);               /* THE FRAME POSSIBLY LOST BY    */ 02524000
         LCR   @15,@15                                             1065 02525000
         ALR   @15,NP0DIFF                                         1065 02526000
         AH    @15,NVTNBMIN                                        1065 02527000
         LR    NP0NUCBF,@15                                        1065 02528000
*     END;                          /* DIVISION)                     */ 02529000
*NP0SSC02:                          /* CALC. ADDR OF TOP OF NIP    1067 02530000
*                                      REGION                        */ 02531000
*   NP0TPRGN=NP0NUCND               /* TOP OF NUCLEUS                */ 02532000
*       +((NP0NUCBF                 /* NUMBER OF FRAMES IN NUC BUF   */ 02533000
*       +NVTRGNAV)                  /* NUMBER OF FRAMES OF AVAIL   1067 02534000
*                                      SPACE                         */ 02535000
*       *4096);                     /* IN REGION, CONVERT TO SIZES IN   02536000
*                                      BYTES                         */ 02537000
*                                                                  1067 02538000
@RC01057 DS    0H                                                  1067 02539000
NP0SSC02 LR    @04,NP0NUCBF                                        1067 02540000
         AH    @04,NVTRGNAV                                        1067 02541000
         SLA   @04,12                                              1067 02542000
         ALR   @04,NP0NUCND                                        1067 02543000
         ST    @04,NP0TPRGN                                        1067 02544000
*   /*****************************************************************/ 02545000
*   /*                                                               */ 02546000
*   /* FIELD 'NVTNVRSZ' IS PROVIDED TO ALLOW THE INSTALL. TO ZAP A   */ 02547000
*   /* VALUE THEY WANT USED AS THE TOP (ENDING) ADDR OF NIP'S REGION.*/ 02548000
*   /* THE FIELD IS ZERO IF THE INSTALL. HAS NOT USED THIS OPTION    */ 02549000
*   /*                                                               */ 02550000
*   /*****************************************************************/ 02551000
*                                                                  1068 02552000
*   IF NVTNVRSZ^=0                  /* IF INSTALL. REGION TOP IS NOT */ 02553000
*     THEN                          /* ZERO THEN                     */ 02554000
         L     @04,NVTNVRSZ                                        1068 02555000
         LTR   @04,@04                                             1068 02556000
         BZ    @RF01068                                            1068 02557000
*     DO;                           /* ROUND INSTALL. ADDR UP TO A 1069 02558000
*                                      PAGE                          */ 02559000
*       NVTNVRSZ=((NVTNVRSZ         /* BOUND                         */ 02560000
*           +4095)|4095)&&4095;                                    1070 02561000
*                                                                  1070 02562000
         LA    @15,4095                                            1070 02563000
         ALR   @04,@15                                             1070 02564000
         OR    @04,@15                                             1070 02565000
         XR    @04,@15                                             1070 02566000
         ST    @04,NVTNVRSZ                                        1070 02567000
*       /*************************************************************/ 02568000
*       /*                                                           */ 02569000
*       /* CHECK IF INSTALLATION VALUE IS ABOVE THE LOW END OF LSQA  */ 02570000
*       /* IN VIRTUAL. IF SO DON'T USE INSTALLATION VALUE.           */ 02571000
*       /*                                                           */ 02572000
*       /*************************************************************/ 02573000
*                                                                  1071 02574000
*       IF NVTNVRSZ>NVTLSQAS        /* CHECK IF INSTALLATION SPEC'D  */ 02575000
*           -(NVTLSQNO              /* ADDR OF TOP OF NIP V=R REG    */ 02576000
*           *4096)                  /* FALLS ABOVE THE LOW END OF    */ 02577000
*         THEN                      /* LSQA, IN VITRUAL.             */ 02578000
         LH    @15,NVTLSQNO                                        1071 02579000
         SLA   @15,12                                              1071 02580000
         LCR   @15,@15                                             1071 02581000
         AL    @15,NVTLSQAS                                        1071 02582000
         CR    @04,@15                                             1071 02583000
         BNH   @RF01071                                            1071 02584000
*         DO;                                                      1072 02585000
*           NVTFLASM='1'B;          /* IF SO, TURN ON FLAG INDICATING   02586000
*                                      THE INSTALL. SPEC'D. VALUE IS    02587000
*                                      NOT USED.                     */ 02588000
         OI    NVTFLASM,B'00010000'                                1073 02589000
*           CALL NP0MSGG;           /* CALL RTN. TO SET UP A MESSAGE    02590000
*                                      ABOUT THIS                    */ 02591000
         BAL   @14,NP0MSGG                                         1074 02592000
*           GOTO NP0SSC03;          /* GO TO ROUTINE THAT IGNORES THE*/ 02593000
         B     NP0SSC03                                            1075 02594000
*         END;                      /* INSTALLATION SPEC'D VALUE   1076 02595000
*                                      NOTE: THIS COULD ONLY HAPPEN     02596000
*                                      IF THERE WAS MORE THAN 8 MB OF   02597000
*                                      ONLINE REAL STOR ON THE SYSTEM   02598000
*                                      BEING IPL'D. IF THE         1076 02599000
*                                      INSTALLATION SPEC'D A V=R REG.   02600000
*                                      TOP THAT FELL ABOVE THE VIRT.    02601000
*                                      PLACEMENT OF M.S. LSQA AT 8 MB   02602000
*                                      THEN THE V=V LSQA WOULD BE  1076 02603000
*                                      WITHIN THE V=R REGION, CAUSING   02604000
*                                      MUCH CONFUSION.               */ 02605000
*                                                                  1076 02606000
*       /*************************************************************/ 02607000
*       /*                                                           */ 02608000
*       /* CHECK TO SEE IF THE INSTALLATION VALUE IS LOWER THEN NIPS */ 02609000
*       /* MINIMUM REQUIREMENTS. IF SO DON'T USE THE INSTALLATION    */ 02610000
*       /* VALUE.                                                    */ 02611000
*       /*                                                           */ 02612000
*       /*************************************************************/ 02613000
*                                                                  1077 02614000
*       NP0MINRT=NP0NUCND           /* CALC ADDR OF TOP OF NIP REGION*/ 02615000
*           +((NVTNBMIN             /* USING MINIMUM VALUES          */ 02616000
*           +NVTRGNAV)*4096);                                      1077 02617000
@RF01071 LH    NP0MINRT,NVTNBMIN                                   1077 02618000
         AH    NP0MINRT,NVTRGNAV                                   1077 02619000
         SLA   NP0MINRT,12                                         1077 02620000
         ALR   NP0MINRT,NP0NUCND                                   1077 02621000
*       IF NVTNVRSZ<NP0MINRT        /* CHECK IF USER ADDR IS LOWER   */ 02622000
*         THEN                      /* THAN THE MIN. ADDR, IF SO THEN*/ 02623000
         C     NP0MINRT,NVTNVRSZ                                   1078 02624000
         BNH   @RF01078                                            1078 02625000
*         DO;                                                      1079 02626000
*           NVTFLASM='1'B;          /* TURN ON FLAG INDICATING THE 1080 02627000
*                                      INSTALLATION VALUE IS NOT USED*/ 02628000
         OI    NVTFLASM,B'00010000'                                1080 02629000
*           CALL NP0MSGH;           /* CALL RTN. TO SET UP A MESSAGE    02630000
*                                      ABOUT THIS                    */ 02631000
         BAL   @14,NP0MSGH                                         1081 02632000
*           GOTO NP0SSC03;          /* GO TO ROUTINE THAT IGNORES THE*/ 02633000
         B     NP0SSC03                                            1082 02634000
*         END;                      /* INSTALLATION SPEC'D VALUE.    */ 02635000
*                                                                  1083 02636000
*       /*************************************************************/ 02637000
*       /*                                                           */ 02638000
*       /* SET TEMPORARY NUC BUFF SIZE TO ALL FRAMES LEFT BELOW      */ 02639000
*       /* INSTALLATION VALUE AFTER THE MINIMUMS FOR NUC BUFF AND    */ 02640000
*       /* REGION AVAILABLE SPACE HAVE BEEN SUBTRACTED OUT.          */ 02641000
*       /*                                                           */ 02642000
*       /*************************************************************/ 02643000
*                                                                  1084 02644000
*       NP0TNCBF=(NVTNVRSZ          /* SET NUC BUF SIZE TO ALL FRAMES*/ 02645000
*           -(NP0NUCND              /* LEFT BELOW USER ADDR, AFTER   */ 02646000
*           +(NVTRGNAV              /* FRAMES FOR NUC, AND REGION  1084 02647000
*                                      AVAILABLE SPACE HAVE BEEN     */ 02648000
*           *4096)))                /* TAKEN OUT -(IE. FORCE NIP REG.*/ 02649000
*           /4096;                  /* TO USER ADDR)                 */ 02650000
*                                                                  1084 02651000
@RF01078 L     @15,NVTNVRSZ                                        1084 02652000
         LH    @00,NVTRGNAV                                        1084 02653000
         SLA   @00,12                                              1084 02654000
         ALR   @00,NP0NUCND                                        1084 02655000
         LCR   @00,@00                                             1084 02656000
         ALR   @00,@15                                             1084 02657000
         SRDA  @00,32                                              1084 02658000
         D     @00,@CF04248                                        1084 02659000
         LR    NP0TNCBF,@01                                        1084 02660000
*       /*************************************************************/ 02661000
*       /*                                                           */ 02662000
*       /* CHECK IF RESULTING NIP REGION WILL FIT BELOW THE LOWEST   */ 02663000
*       /* UNAVAILABLE ADDR. IF NOT DON'T USE INSTALLATION VALUE.    */ 02664000
*       /*                                                           */ 02665000
*       /*************************************************************/ 02666000
*                                                                  1085 02667000
*       IF NVTNVRSZ>NP0LUNAV        /* CHECK IF RESULTING NIP REGION */ 02668000
*         THEN                      /* WILL NOT FIT BELOW LOW        */ 02669000
         CR    @15,NP0LUNAV                                        1085 02670000
         BNH   @RF01085                                            1085 02671000
*         DO;                       /* UNAVAILABLE ADDR. IF NOT,     */ 02672000
*           NVTFLASM='1'B;          /* TURN ON FLAG INDICATING THE 1087 02673000
*                                      INSTALLATION VALUE IS NOT USED*/ 02674000
         OI    NVTFLASM,B'00010000'                                1087 02675000
*           CALL NP0MSGG;           /* CALL RTN. TO SET UP A MESSAGE    02676000
*                                      ABOUT THIS                    */ 02677000
         BAL   @14,NP0MSGG                                         1088 02678000
*           GOTO NP0SSC03;          /* GO TO ROUTINE THAT IGNORES THE*/ 02679000
         B     NP0SSC03                                            1089 02680000
*         END;                      /* INSTALLATION SPEC'D VALUE.    */ 02681000
*                                                                  1090 02682000
*       /*************************************************************/ 02683000
*       /*                                                           */ 02684000
*       /* CHECK IF NUMBER OF FRAMES LEFT IS LESS THEN MINIMUM       */ 02685000
*       /* REQUIRED FOR RESERVED PAGING. IF SO, DON'T USE            */ 02686000
*       /* INSTALLATION VALUE.                                       */ 02687000
*       /*                                                           */ 02688000
*       /*************************************************************/ 02689000
*                                                                  1091 02690000
*       IF NVTRSVMN>NP0AVAIL        /* CHECK IF NUMBER OF FRAMES LEFT*/ 02691000
*           -(NP0TNCBF              /* FOR RESERVED SPACE (PAGING) IS*/ 02692000
*           +NVTRGNAV)              /* LESS THAN THE MIN. REQUIRED   */ 02693000
*         THEN                      /* IF SO THEN                    */ 02694000
@RF01085 LR    @15,NP0TNCBF                                        1091 02695000
         AH    @15,NVTRGNAV                                        1091 02696000
         LCR   @15,@15                                             1091 02697000
         ALR   @15,NP0AVAIL                                        1091 02698000
         CH    @15,NVTRSVMN                                        1091 02699000
         BNL   @RF01091                                            1091 02700000
*         DO;                                                      1092 02701000
*           NVTFLASM='1'B;          /* TURN ON FLAG INDICATING THE 1093 02702000
*                                      INSTALLATION VALUE IS NOT USED*/ 02703000
         OI    NVTFLASM,B'00010000'                                1093 02704000
*           CALL NP0MSGG;           /* CALL RTN. TO SET UP A MESSAGE    02705000
*                                      ABOUT THIS                    */ 02706000
         BAL   @14,NP0MSGG                                         1094 02707000
*           GOTO NP0SSC03;          /* GO TO ROUTINE THAT IGNORES THE*/ 02708000
         B     NP0SSC03                                            1095 02709000
*         END;                      /* INSTALLATION SPEC'D VALUE.    */ 02710000
*/* ******************************************************************/ 02711000
*/*                                                                  */ 02712000
*/*  IF INSTALLATION SPECIFIED ADDRESS OF TOP OF NIP V=R REGION CAN  */ 02713000
*/*  BE USED, SET SIZE OF NUC. BUF. ACCORDINGLY AND SET THE TOP OF   */ 02714000
*/*  REGION ADDRESS ACCORDINGLY.                                     */ 02715000
*/*                                                                  */ 02716000
*/* ******************************************************************/ 02717000
*                                                                  1097 02718000
*       NP0NUCBF=NP0TNCBF;          /* SET NUC. BUF. SIZE TO THE SIZE   02719000
*                                      REQUIRED BY INSTALL. SPEC'D 1097 02720000
*                                      ADDR. OF TOP OF NIP V=R REG.  */ 02721000
@RF01091 LR    NP0NUCBF,NP0TNCBF                                   1097 02722000
*       NP0TPRGN=NVTNVRSZ;          /* SET REGION TOP TO USER ADDR.  */ 02723000
         MVC   NP0TPRGN(4),NVTNVRSZ                                1098 02724000
*     END;                                                         1099 02725000
*   ELSE                                                           1100 02726000
*     DO;                                                          1100 02727000
*                                                                  1100 02728000
         B     @RC01068                                            1100 02729000
@RF01068 DS    0H                                                  1101 02730000
*       /*************************************************************/ 02731000
*       /*                                                           */ 02732000
*       /* THE FOLLOWING RTN IS EXECUTED IF INSTALLATION DID NOT     */ 02733000
*       /* SUPERZAP FIELD 'NVTNVRSZ' OR IF THE INSTALLATION VALUE CAN*/ 02734000
*       /* NOT BE USED. DETERMINE IF TOP OF NIP REGION IS ABOVE      */ 02735000
*       /* SYSTEM DEFAULT LIMIT. IF SO DECREMENT NUC BUFF BY THE     */ 02736000
*       /* AMOUNT IT EXCEEDS DEFAULT LIMIT.                          */ 02737000
*       /*                                                           */ 02738000
*       /*************************************************************/ 02739000
*                                                                  1101 02740000
*NP0SSC03:                                                         1101 02741000
*       IF NP0TPRGN>2097152         /* CHECK IF ADDR OF TOP OF NIP   */ 02742000
*         THEN                      /* REGION IS ABOVE SYSTEM DEFAULT*/ 02743000
NP0SSC03 L     @04,NP0TPRGN                                        1101 02744000
         L     @15,@CF05093                                        1101 02745000
         CR    @04,@15                                             1101 02746000
         BNH   @RF01101                                            1101 02747000
*         DO;                       /* LIMIT IF SO,                  */ 02748000
*           NP0EX=(NP0TPRGN         /* CALC. NUMBER OF FRAMES BY   1103 02749000
*                                      WHICH                         */ 02750000
*               -2097152)           /* REGION EXCEEDS LIMIT          */ 02751000
*               /4096;              /* AND                           */ 02752000
         L     @14,NP0TPRGN                                        1103 02753000
         LR    @00,@15                                             1103 02754000
         LCR   @00,@00                                             1103 02755000
         ALR   @00,@14                                             1103 02756000
         SRDA  @00,32                                              1103 02757000
         D     @00,@CF04248                                        1103 02758000
         LR    NP0EX,@01                                           1103 02759000
*           NP0NUCBF=NP0NUCBF       /* DECREMENT NUC BUF BY THAT   1104 02760000
*                                      NUMBER                        */ 02761000
*               -NP0EX;                                            1104 02762000
         SLR   NP0NUCBF,NP0EX                                      1104 02763000
*           NP0TPRGN=NP0TPRGN       /* CALCULATE NEW ADDR. OF TOP OF */ 02764000
*               -(NP0EX             /* THE REGION                    */ 02765000
*               *4096);                                            1105 02766000
         LR    @15,NP0EX                                           1105 02767000
         SLA   @15,12                                              1105 02768000
         SLR   @14,@15                                             1105 02769000
         ST    @14,NP0TPRGN                                        1105 02770000
*         END;                                                     1106 02771000
*                                                                  1106 02772000
*       /*************************************************************/ 02773000
*       /*                                                           */ 02774000
*       /* CHECK IF NIP REGION WILL FIT BELOW LOW UNAVAILABLE ADDR.  */ 02775000
*       /* IF NOT, CALCULATE TOP OF REGION USING THE MINIMUM VALUES. */ 02776000
*       /* IF REGION STILL WON'T FIT, LOAD WAITSTATE.                */ 02777000
*       /*                                                           */ 02778000
*       /*************************************************************/ 02779000
*                                                                  1107 02780000
*       IF NP0TPRGN>NP0LUNAV        /* CHECK IF NIP REGION WILL FIT  */ 02781000
*         THEN                      /* BELOW LOW UNAVAILABLE ADDR    */ 02782000
@RF01101 C     NP0LUNAV,NP0TPRGN                                   1107 02783000
         BNL   @RF01107                                            1107 02784000
*         DO;                       /* IF NOT                        */ 02785000
*           NP0TPRGN=NP0NUCND       /* CALC. TOP ADDR. OF REGION   1109 02786000
*                                      USING                         */ 02787000
*               +((NVTNBMIN         /* MIN VALUES                    */ 02788000
*               +NVTRGNAV)*4096);                                  1109 02789000
*                                                                  1109 02790000
         LH    @15,NVTRGNAV                                        1109 02791000
         LH    @14,NVTNBMIN                                        1109 02792000
         ALR   @14,@15                                             1109 02793000
         SLA   @14,12                                              1109 02794000
         ALR   @14,NP0NUCND                                        1109 02795000
         ST    @14,NP0TPRGN                                        1109 02796000
*           /*********************************************************/ 02797000
*           /*                                                       */ 02798000
*           /* IF NIP REGION FITS BELOW THE LOW UNAVAILABLE ADDR, SET*/ 02799000
*           /* NUC BUF TO ALL AVAILABLE FRAMES BELOW THE LOW         */ 02800000
*           /* UNAVAILABLE ADDR.                                     */ 02801000
*           /*                                                       */ 02802000
*           /*********************************************************/ 02803000
*                                                                  1110 02804000
*           IF NP0TPRGN>NP0LUNAV    /* IF MIN REGION WON'T FIT,      */ 02805000
*             THEN                                                 1110 02806000
         CR    @14,NP0LUNAV                                        1110 02807000
         BH    @RT01110                                            1110 02808000
*             GOTO NP0INSRS;        /* WAIT STATE                    */ 02809000
*           NP0NUCBF=(NP0LUNAV      /* IF MIN REGION WILL FIT, SET 1112 02810000
*                                      NUC.                          */ 02811000
*               -(NP0NUCND          /* BUF TO ALL AVAILABLE FRAMES   */ 02812000
*               +(NVTRGNAV          /* BELOW THE LOW UNAVAILABLE   1112 02813000
*                                      ADDR.                         */ 02814000
*               *4096)))            /* NOTE: THIS DECREASES THE SIZE */ 02815000
*               /4096;              /* OF NIP REGION FROM ITS      1112 02816000
*                                      CALCULATED SIZE               */ 02817000
         LR    @00,@15                                             1112 02818000
         SLA   @00,12                                              1112 02819000
         ALR   @00,NP0NUCND                                        1112 02820000
         LCR   @00,@00                                             1112 02821000
         ALR   @00,NP0LUNAV                                        1112 02822000
         SRDA  @00,32                                              1112 02823000
         D     @00,@CF04248                                        1112 02824000
         LR    NP0NUCBF,@01                                        1112 02825000
*           NP0TPRGN=NP0NUCND       /* RE SET ADDR. OF TOP OF NIP    */ 02826000
*               +((NP0NUCBF         /* V=R REGION TO CORRESPOND TO   */ 02827000
*               +NVTRGNAV)          /* NEW NUC. BUFFER SIZE          */ 02828000
*               *4096);                                            1113 02829000
         ALR   @15,NP0NUCBF                                        1113 02830000
         SLA   @15,12                                              1113 02831000
         ALR   @15,NP0NUCND                                        1113 02832000
         ST    @15,NP0TPRGN                                        1113 02833000
*         END;                                                     1114 02834000
*     END;                                                         1115 02835000
*                                                                  1115 02836000
@RF01107 DS    0H                                                  1116 02837000
*   /*****************************************************************/ 02838000
*   /*                                                               */ 02839000
*   /* IF THE NUC BUFF WAS DECREASED, THE EXTRA FRAMES WILL BE       */ 02840000
*   /* CALCULATED INTO THE RESERVED FRAME COUNT FOR PAGING.          */ 02841000
*   /*                                                               */ 02842000
*   /*****************************************************************/ 02843000
*                                                                  1116 02844000
*NP0SSC04:                          /* SET THE NUMBER OF RESERVED    */ 02845000
*   NP0RSRVD=NP0AVAIL               /* FRAMES TO TAKE UP THE SLACK   */ 02846000
*       -(NP0NUCBF                  /* SET RESERVED                  */ 02847000
*       +NVTRGNAV);                 /* FRAMES TO ALL REMAINING ONLINE   02848000
*                                      AVAILABLE FRAMES              */ 02849000
@RC01068 DS    0H                                                  1116 02850000
NP0SSC04 LR    @04,NP0NUCBF                                        1116 02851000
         AH    @04,NVTRGNAV                                        1116 02852000
         LCR   @04,@04                                             1116 02853000
         ALR   @04,NP0AVAIL                                        1116 02854000
         STH   @04,NP0RSRVD                                        1116 02855000
*                                                                  1117 02856000
*   /*****************************************************************/ 02857000
*   /*                                                               */ 02858000
*   /* DEFINITION OF MASTER SCHEDULER'S REGION                       */ 02859000
*   /*                                                               */ 02860000
*   /*****************************************************************/ 02861000
*                                                                  1117 02862000
*NP0MSRD:                                                          1117 02863000
*   RFY                                                            1117 02864000
*    (PQESECT) BASED(TBASE);                                       1117 02865000
NP0MSRD  DS    0H                                                  1118 02866000
*   TABPTR=ADDR(NMVRPQE);           /* SET BASE TO TABLE ENTRY FOR 1118 02867000
*                                      PQE FOR M.S. V=R REGION       */ 02868000
         LA    @04,NMVRPQE                                         1118 02869000
         LR    TABPTR,@04                                          1118 02870000
*   TBASE=NP0RADDR;                 /* PUT R. ADDR OF THE PQE IN BASE   02871000
*                                      FOR PQE                       */ 02872000
         L     TBASE,NP0RADDR(,TABPTR)                             1119 02873000
*   PQEREGN=NVTNUCND;               /* PUT NUC. END ADDR (NOT ROUNDED   02874000
*                                      UP TO PAGE MULT, JUST TO AN 8-   02875000
*                                      BYTE MULT.) IN PQE AS       1120 02876000
*                                      BEGINNING ADDR OF NIP REGION,    02877000
*                                      THIS ABSORBS THE SPACE BETWEEN   02878000
*                                      THE TWO (ROUNDED-UP) ADDRESSES   02879000
*                                      INTO THE NIP REGION           */ 02880000
         L     @15,NVTNUCND                                        1120 02881000
         ST    @15,PQEREGN(,TBASE)                                 1120 02882000
*   CVTNUCB=NP0NUCND                /* PUT ADDR OF THE NEXT BYTE   1121 02883000
*                                      ABOVE                         */ 02884000
*       +(NP0NUCBF                  /* THE NUC BUF IN THE CVT        */ 02885000
*       *4096);                                                    1121 02886000
*                                                                  1121 02887000
         LR    @14,NP0NUCBF                                        1121 02888000
         SLA   @14,12                                              1121 02889000
         ALR   @14,NP0NUCND                                        1121 02890000
         ST    @14,CVTNUCB(,RCVT)                                  1121 02891000
*   /*****************************************************************/ 02892000
*   /*                                                               */ 02893000
*   /* INIT DQE FOR SP 251 (NUC BUF)                                 */ 02894000
*   /*                                                               */ 02895000
*   /*****************************************************************/ 02896000
*                                                                  1122 02897000
*   RFY                                                            1122 02898000
*    (DQESECT) BASED(TBASE);                                       1122 02899000
*   TABPTR=ADDR(NDQE251);           /* SET BASE TO TABLE ENTRY FOR 1123 02900000
*                                      DQE FOR SP 251                */ 02901000
         LA    TABPTR,NDQE251                                      1123 02902000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF DQE IN ITS 1124 02903000
*                                      BASE                          */ 02904000
         L     TBASE,NP0RADDR(,TABPTR)                             1124 02905000
*   DQEBLKAD=NVTNUCND;              /* PUT ADDR OF TOP OF NUC. IN DQE*/ 02906000
         ST    @15,DQEBLKAD(,TBASE)                                1125 02907000
*   DQELNTH=(CVTNUCB                /* PUT SIZE OF NUC BUF IN DQE    */ 02908000
*       -NVTNUCND);                                                1126 02909000
         LR    @06,@14                                             1126 02910000
         SLR   @06,@15                                             1126 02911000
         ST    @06,DQELNTH(,TBASE)                                 1126 02912000
*   RFY                                                            1127 02913000
*    (DQESECT) BASED(DQESEPTR);                                    1127 02914000
*   TABPTR=ADDR(NMVRPQE);           /* SET BASE TO TABLE ENTRY FOR 1128 02915000
*                                      M.S. V=R PQE                  */ 02916000
         LR    TABPTR,@04                                          1128 02917000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF THE PQE IN 1129 02918000
*                                      BASE                          */ 02919000
         L     TBASE,NP0RADDR(,TABPTR)                             1129 02920000
*   PQESIZE=(CVTNUCB                /* CALC SIZE OF NIP V=R REGION   */ 02921000
*       -NVTNUCND)                  /* AND PUT IT IN REGION PQE      */ 02922000
*       +(NVTRGNAV*4096);                                          1130 02923000
         LH    @05,NVTRGNAV                                        1130 02924000
         SLA   @05,12                                              1130 02925000
         ALR   @06,@05                                             1130 02926000
         ST    @06,PQESIZE(,TBASE)                                 1130 02927000
*   RFY                                                            1131 02928000
*    (PQESECT) BASED(PQESEPTR);                                    1131 02929000
*   CVTREAL=NP0TPRGN;               /* PUT ADDR OF FIRST V=V BYTE  1132 02930000
*                                      (FIRST BYTE ABOVE V=R REGION)    02931000
*                                      IN                            */ 02932000
         L     @06,NP0TPRGN                                        1132 02933000
         ST    @06,CVTREAL(,RCVT)                                  1132 02934000
*   NVTVVPG1=NP0TPRGN;              /* CVT, DITTO IN THE NVT         */ 02935000
*                                                                  1133 02936000
         ST    @06,NVTVVPG1                                        1133 02937000
*   /*****************************************************************/ 02938000
*   /*                                                               */ 02939000
*   /* INIT FBQE FOR NIP V=R REGION                                  */ 02940000
*   /*                                                               */ 02941000
*   /*****************************************************************/ 02942000
*                                                                  1134 02943000
*   RFY                                                            1134 02944000
*    (FBQESECT) BASED(TBASE);                                      1134 02945000
*   TABPTR=ADDR(NMVRFBQE);          /* SET BASE TO TABLE ENTRY FOR 1135 02946000
*                                      FBQE FOR M.S. V=R REGION      */ 02947000
         LA    TABPTR,NMVRFBQE                                     1135 02948000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR. OF FBQE IN ITS    02949000
*                                      BASE                          */ 02950000
         L     TBASE,NP0RADDR(,TABPTR)                             1136 02951000
*   SIZE=NVTRGNAV                   /* PUT SIZE OF AVAILABLE AREA IN */ 02952000
*       *4096;                      /* THE REGION IN THE FBQE        */ 02953000
         ST    @05,SIZE(,TBASE)                                    1137 02954000
*   FBQAREA=CVTNUCB;                /* PUT BEGINNING ADDR OF THE FREE   02955000
*                                      AREA IN THE FBQE              */ 02956000
         ST    @14,FBQAREA(,TBASE)                                 1138 02957000
*   RFY                                                            1139 02958000
*    (FBQESECT) BASED(FBQESPTR);                                   1139 02959000
*                                                                  1139 02960000
*   /*****************************************************************/ 02961000
*   /*                                                               */ 02962000
*   /* INIT COMM TASK TCB                                            */ 02963000
*   /*                                                               */ 02964000
*   /*****************************************************************/ 02965000
*                                                                  1140 02966000
*   RFY                                                            1140 02967000
*    (LDA) BASED(TBASE);                                           1140 02968000
*   TCBPTR=NVTCMTCB;                /* PUT ADDR OF COMM TASK TCB IN     02969000
*                                      TCB BASE                      */ 02970000
         L     @06,NVTCMTCB                                        1141 02971000
         ST    @06,TCBPTR                                          1141 02972000
*   TABPTR=ADDR(NLDA);              /* SET BASE TO TABLE ENTRY FOR 1142 02973000
*                                      LDA                           */ 02974000
         LA    TABPTR,NLDA                                         1142 02975000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF LDA IN ITS 1143 02976000
*                                      BASE                          */ 02977000
         L     TBASE,NP0RADDR(,TABPTR)                             1143 02978000
*   TCBPQE=ADDR(ASDPQE)-8;          /* PUT ADDR OF D-PQE (IN LDA) IN    02979000
*                                      COMM TASK TCB                 */ 02980000
         LA    @05,8                                               1144 02981000
         LA    @04,ASDPQE(,TBASE)                                  1144 02982000
         SLR   @04,@05                                             1144 02983000
         ST    @04,TCBPQE(,@06)                                    1144 02984000
*/* WHILE HAVE ADDRESSABILITY TO THE LDA, PUT ADDR OF LOW AVAIL BYTE */ 02985000
*/* IN NIP'S V=R REG IN THE LDA - ITS NEEDED BY GETMAIN              */ 02986000
*                                                                  1145 02987000
*   CURRGNTP=CVTNUCB;               /* PUT ADDR OF TOP OF NUC BUF IN    02988000
*                                      LDA                           */ 02989000
         ST    @14,CURRGNTP(,TBASE)                                1145 02990000
*   RFY                                                            1146 02991000
*    (LDA) BASED(LDAPTR);                                          1146 02992000
*                                                                  1146 02993000
*/*   INIT M.S. TCB                                                  */ 02994000
*                                                                  1147 02995000
*   TCBPTR=NVTMSTCB;                /* PUT ADDR OF M.S. TCB IN BASE  */ 02996000
         L     @06,NVTMSTCB                                        1147 02997000
         ST    @06,TCBPTR                                          1147 02998000
*   TABPTR=ADDR(NMVRDPQE);          /* SET BASE TO TABLE ENTRY FOR 1148 02999000
*                                      D-PQE FOR M.S. REGION         */ 03000000
         LA    TABPTR,NMVRDPQE                                     1148 03001000
*   TCBPQE=NP0VADDR-8;              /* PUT VIRT ADDR OF D-PQE IN TCB */ 03002000
         LCR   @05,@05                                             1149 03003000
         AL    @05,NP0VADDR(,TABPTR)                               1149 03004000
         ST    @05,TCBPQE(,@06)                                    1149 03005000
*   TABPTR=ADDR(NSPQE251);          /* SET BASE TO TABLE ENTRY FOR 1150 03006000
*                                      SPQE FOR SP 251               */ 03007000
         LA    TABPTR,NSPQE251                                     1150 03008000
*   TCBMSS=NP0VADDR;                /* PUT VIRT ADDR OF SPQE IN TCB  */ 03009000
         MVC   TCBMSS(4,@06),NP0VADDR(TABPTR)                      1151 03010000
*/* ADJUST POINTER TO 'NEXT AVAIL. BYTE IN NUC. BUFF.' TO RESERVE    */ 03011000
*/* A WORK AREA AT THE LOW END OF THE NUC. BUFF. FOR IEAVNIPX        */ 03012000
*                                                                  1152 03013000
*   NVTNXPTR=NVTNUCND;              /* PUT ADDR. OF BEGINNING (LOW 1152 03014000
*                                      END) OF THE WORK AREA IN NVT     03015000
*                                      PTR.                          */ 03016000
         ST    @15,NVTNXPTR                                        1152 03017000
*   NVTNUCND=NVTNUCND               /* CONVERT SIZE OF AREA (IN    1153 03018000
*                                      DOUBLE                        */ 03019000
*       +(NVTNXSIZ                  /* WORDS) TO BYTES AND RE-SET  1153 03020000
*                                      PTR.                          */ 03021000
*       *8);                        /* TO 'NEXT AVAIL. BYTE'         */ 03022000
         LH    @02,NVTNXSIZ                                        1153 03023000
         SLA   @02,3                                               1153 03024000
         ALR   @15,@02                                             1153 03025000
         ST    @15,NVTNUCND                                        1153 03026000
*/* PUT ADDR. OF NEXT AVAIL. BYTE IN NUC. BUFF. IN NIP0 POINTER      */ 03027000
*                                                                  1154 03028000
*   NP0NBAVL=NVTNUCND;                                             1154 03029000
         ST    @15,NP0NBAVL                                        1154 03030000
*NP0PFTBD:                                                         1155 03031000
*                                                                  1155 03032000
*/********************************************************************/ 03033000
*/*  PAGE FRAME  TABLE ENTRY (PFTE) BUILD RTN                        */ 03034000
*/*  THIS RTN BUILDS PFTE'S FOR THE REAL FRAMES CONTAINING SQA AND   */ 03035000
*/*  LSQA PAGES. THIS RTN ALSO INITIALIZES THE POINTERS AND QUEUE    */ 03036000
*/*  HEADERS  IN THE PAGE VECTOR TABLE (PVT) AND IN THE MASTER       */ 03037000
*/*  SCHEDULER'S REAL STORAGE MANAGEMENT HEADER (RSMHD).             */ 03038000
*/*  THROUGHOUT THIS ROUTINE  REAL BLOCK NUMBERS (RBN'S) AND VIRTUAL */ 03039000
*/*  BLOCK NUMBERS (VBN'S) ARE USED. THESE ARE INDEXES OBTAINED BY   */ 03040000
*/*  ADJUSTING THE HIGH ORDER 12 BITS OF A 24-BIT REAL OR VIRTUAL    */ 03041000
*/*  ADDRESS , RESPECTIVELY, TO A HALF-WORD BOUND. THAT IS, THE REAL */ 03042000
*/*  OR VIRTUAL ADDRESS IS SHIFTED RIGHT 12 BITS, THEN SHIFTED LEFT  */ 03043000
*/*  4 BITS. NOTICE THAT THIS INTRODUCES FOUR LOW ORDER ZERO BITS    */ 03044000
*/*  IN THE  RBN AND VBN.                                            */ 03045000
*/********************************************************************/ 03046000
*/*  BUILD PFTE'S FOR SQA                                            */ 03047000
*                                                                  1155 03048000
*   RFY                                                            1155 03049000
*    (PFTE) BASED(NP0PFTEP);                                       1155 03050000
NP0PFTBD DS    0H                                                  1156 03051000
*   RFY                                                            1156 03052000
*    (PVT) BASED(CVTPVTP);          /* BASE PVT ON ITS VIRT ADDR IN     03053000
*                                      CVT SINCE THE PVT IS SYS GEN'D   03054000
*                                      IN THE NUCLEUS, THIS ADDR IS     03055000
*                                      V=R                           */ 03056000
*   NP0PFTCT=NVTSQANO;              /* SET COUNTER TO NUMBER OF REAL    03057000
*                                      SQA FRAMES                    */ 03058000
         MVC   NP0PFTCT(2),NVTSQANO                                1157 03059000
*   RFY                                                            1158 03060000
*     SHFTREG RSTD;                                                1158 03061000
*   SHFTREG=NP0EORM;                /* PICK UP HI ONLINE REAL ADDRESS   03062000
*                                                            @YM05097*/ 03063000
         L     SHFTREG,NP0EORM                                     1159 03064000
*   GEN(SRL    SHFTREG,12);         /* SHIFT RIGHT 12 BITS           */ 03065000
         SRL    SHFTREG,12                                              03066000
*   GEN(SLL    SHFTREG,4);          /* SHIFT LEFT 4 BITS             */ 03067000
         SLL    SHFTREG,4                                               03068000
*   NP0RBN=SHFTREG;                 /* PUT THIS HIGH RBN IN SAVE AREA*/ 03069000
         LR    NP0RBN,SHFTREG                                      1162 03070000
*   SHFTREG=16777216-1;             /* PICK UP HI VIRT ADDR          */ 03071000
         L     SHFTREG,@CF05573                                    1163 03072000
*   GEN(SRL    SHFTREG,12);         /* SHIFT RIGHT 12 BITS           */ 03073000
         SRL    SHFTREG,12                                              03074000
*   GEN(SLL    SHFTREG,4);          /* SHIFT LEFT 4 BITS             */ 03075000
         SLL    SHFTREG,4                                               03076000
*   NP0VBN=SHFTREG;                 /* PUT HI VBN IN SAVE AREA       */ 03077000
         LR    NP0VBN,SHFTREG                                      1166 03078000
*   RFY                                                            1167 03079000
*     SHFTREG UNRSTD;                                              1167 03080000
*   NP0PFTEP=CVTNUCB;               /* PICK UP ADDR OF TOP (HIGH   1168 03081000
*                                      ADDR) OF NUC BUF.             */ 03082000
         L     NP0PFTEP,CVTNUCB(,RCVT)                             1168 03083000
*   DO I=NP0PFTCT TO 1 BY-1;        /* LOOP TO BUILD PFTE'S FOR SQA  */ 03084000
         LH    I,NP0PFTCT                                          1169 03085000
         B     @DE01169                                            1169 03086000
@DL01169 DS    0H                                                  1170 03087000
*     NP0PFTEP=NP0PFTEP             /* ADJUST PFTE PTR TO ADDR OF  1170 03088000
*                                      NEXT                          */ 03089000
*         -LENGTH(PFTE);            /* PFTE                          */ 03090000
         LA    @04,16                                              1170 03091000
         SLR   NP0PFTEP,@04                                        1170 03092000
*     PFTE=PFTE                     /* CLEAR THIS AREA TO ZEROS      */ 03093000
*         &&PFTE;                                                  1171 03094000
         XC    PFTE(16,NP0PFTEP),PFTE(NP0PFTEP)                    1171 03095000
*     PFTASID='FFFF'X;              /* PUT ADDR SPACE ID FOR SQA   1172 03096000
*                                      PAGES IN THE PFTE             */ 03097000
         MVC   PFTASID(2,NP0PFTEP),@CH00821                        1172 03098000
*     PFTVBN=NP0VBN;                /* PUT CURR. VBN IN THIS PFTE    */ 03099000
         STH   NP0VBN,PFTVBN(,NP0PFTEP)                            1173 03100000
*     PFTBQPTR=NP0RBN               /* PUT BACKWARD (DOWNWARD) INDEX */ 03101000
*         -16;                      /* IN THIS PFTE.(THAT IS, THE RBN   03102000
*                                      OF THE NEXT LOWER FRAME)      */ 03103000
         LCR   @04,@04                                             1174 03104000
         ALR   @04,NP0RBN                                          1174 03105000
         STH   @04,PFTBQPTR(,NP0PFTEP)                             1174 03106000
*     IF NP0PFTSW='1'B              /* IF THIS IS THE FIRST SQA PFTE */ 03107000
*       THEN                        /* THEN                          */ 03108000
         TM    NP0PFTSW,B'10000000'                                1175 03109000
         BNO   @RF01175                                            1175 03110000
*       DO;                                                        1176 03111000
*         NP0PFTSW='0'B;            /* TURN FIRST-TIME SWITCH OFF    */ 03112000
         NI    NP0PFTSW,B'01111111'                                1177 03113000
*         PVTSQAQL=NP0RBN;          /* PUT RBN CORRES. TO LAST (TOP)    03114000
*                                      PFTE FOR SQA PAGES IN PVT     */ 03115000
         L     @04,CVTPVTP(,RCVT)                                  1178 03116000
         STH   NP0RBN,PVTSQAQL(,@04)                               1178 03117000
*         PVTLPFN=NP0RBN;           /* PUT RBN CORRES. TO LAST (TOP)    03118000
*                                      PFTE IN PVT                   */ 03119000
         STH   NP0RBN,PVTLPFN(,@04)                                1179 03120000
*       END;                                                       1180 03121000
*     ELSE                          /* IF NOT FIRST PFTE             */ 03122000
*       PFTFQPTR=NP0RBN             /* PUT FORWARD (UPWARD) INDEX IN */ 03123000
*           +16;                    /* THIS PFTE (THAT IS, THE RBN OF   03124000
*                                      THE NEXT HIGHER FRAME).       */ 03125000
         B     @RC01175                                            1181 03126000
@RF01175 LA    @04,16                                              1181 03127000
         ALR   @04,NP0RBN                                          1181 03128000
         STH   @04,PFTFQPTR(,NP0PFTEP)                             1181 03129000
*     PFTLSQA='1'B;                 /* SET FLAG INDICATING THIS IS A    03130000
*                                      PFTE FOR A L/SQA PAGE         */ 03131000
@RC01175 OI    PFTLSQA(NP0PFTEP),B'00100000'                       1182 03132000
*     PFTQNDX=PFTSQAN;              /* SET QUEUE INDEX IN THE PFTE TO   03133000
*                                      INDICATE THAT THIS PFTE IS ON    03134000
*                                      THE SQA QUEUE OF PFTE'S       */ 03135000
         MVI   PFTQNDX(NP0PFTEP),X'0C'                             1183 03136000
*     NP0RBN=NP0RBN                 /* ADJUST RBN TO CORRES. TO NEXT */ 03137000
*         -16;                      /* LOWER REAL FRAME              */ 03138000
         LA    @04,16                                              1184 03139000
         SLR   NP0RBN,@04                                          1184 03140000
*     NP0VBN=NP0VBN                 /* ADJUST VBN TO CORRES. TO NEXT */ 03141000
*         -16;                      /* LOWER VIRT. PAGE              */ 03142000
         SLR   NP0VBN,@04                                          1185 03143000
*   END;                                                           1186 03144000
*                                                                  1186 03145000
         BCTR  I,0                                                 1186 03146000
@DE01169 LTR   I,I                                                 1186 03147000
         BP    @DL01169                                            1186 03148000
*   /*****************************************************************/ 03149000
*   /*                                                               */ 03150000
*   /* PROCESSING FOR LOWEST (BOTTOM) PFTE FOR SQA PAGES             */ 03151000
*   /*                                                               */ 03152000
*   /*****************************************************************/ 03153000
*                                                                  1187 03154000
*   PFTBQPTR=PFTBQPTR               /* SET BACKWARD (DOWNWARD) INDEX    03155000
*                                      IN                            */ 03156000
*       &&PFTBQPTR;                 /* THIS LOWEST (BOTTOM) PFTE TO     03157000
*                                      ZERO                          */ 03158000
         XC    PFTBQPTR(2,NP0PFTEP),PFTBQPTR(NP0PFTEP)             1187 03159000
*   PVTSQAQF=NP0RBN                 /* PUT RBN CORRES. TO THIS LAST  */ 03160000
*       +16;                        /* PFTE FOR SQA IN PVT           */ 03161000
         L     @01,CVTPVTP(,RCVT)                                  1188 03162000
         LA    @00,16                                              1188 03163000
         ALR   @00,NP0RBN                                          1188 03164000
         STH   @00,PVTSQAQF(,@01)                                  1188 03165000
*/*  BUILD PFTE'S FOR LSQA PAGES                                     */ 03166000
*                                                                  1189 03167000
*   NP0PFTSW='1'B;                  /* TURN FIRST TIME SWITCH ON     */ 03168000
         OI    NP0PFTSW,B'10000000'                                1189 03169000
*   NP0PFTCT=NVTLSQNO;              /* PICK UP NUMBER OF REAL LSQA 1190 03170000
*                                      PAGES                         */ 03171000
         MVC   NP0PFTCT(2),NVTLSQNO                                1190 03172000
*   RFY                                                            1191 03173000
*     SHFTREG RSTD;                                                1191 03174000
*   SHFTREG=NVTLSQAS-1;             /* GET VIRT. ADDR. OF TOP OF   1192 03175000
*                                      LSQA, LESS ONE                */ 03176000
         L     SHFTREG,NVTLSQAS                                    1192 03177000
         BCTR  SHFTREG,0                                           1192 03178000
*   GEN(SRL    SHFTREG,12);         /* CONVERT THIS TO THE VBN FOR   */ 03179000
         SRL    SHFTREG,12                                              03180000
*   GEN(SLL    SHFTREG,4);          /* THAT VIRT. PAGE               */ 03181000
         SLL    SHFTREG,4                                               03182000
*   NP0VBN=SHFTREG;                 /* PUT THIS VBN IN SAVEAREA      */ 03183000
         LR    NP0VBN,SHFTREG                                      1195 03184000
*   RFY                                                            1196 03185000
*     SHFTREG UNRSTD;                                              1196 03186000
*                                                                  1196 03187000
*/*  NOTE: NP0RBN IS PROPERLY SET, SINCE  BEFORE EXITING LOOP THAT   */ 03188000
*/*  BUILT PFTE'S FOR SQA, IT WAS ADJUSTED TO RBN CORRES.TO NEXT     */ 03189000
*/*  FRAME BELOW LAST (LOW) SQA FRAME. THIS FRAME IS THE FIRST (TOP) */ 03190000
*/*  LSQA FRAME.                                                     */ 03191000
*                                                                  1197 03192000
*   DO I=NP0PFTCT TO 1 BY-1;                                       1197 03193000
         LH    I,NP0PFTCT                                          1197 03194000
         B     @DE01197                                            1197 03195000
@DL01197 DS    0H                                                  1198 03196000
*     NP0PFTEP=NP0PFTEP             /* ADJUST PFTE PTR TO ADDR OF  1198 03197000
*                                      NEXT                          */ 03198000
*         -LENGTH(PFTE);            /* LOWER PFTE                    */ 03199000
         LA    @04,16                                              1198 03200000
         SLR   NP0PFTEP,@04                                        1198 03201000
*     PFTE=PFTE                     /* CLEAR THE AREA TO ZEROS       */ 03202000
*         &&PFTE;                                                  1199 03203000
         XC    PFTE(16,NP0PFTEP),PFTE(NP0PFTEP)                    1199 03204000
*     PFTASID='0001'X;              /* PUT ASID FOR LSQA PAGES IN THE   03205000
*                                      PFTE                          */ 03206000
         MVC   PFTASID(2,NP0PFTEP),@CH04202                        1200 03207000
*     PFTVBN=NP0VBN;                /* PUT CURR. VBN IN THIS PFTE    */ 03208000
         STH   NP0VBN,PFTVBN(,NP0PFTEP)                            1201 03209000
*     PFTBQPTR=NP0RBN               /* PUT BACKWARD (DOWNWARD) INDEX */ 03210000
*         -16;                      /* IN THIS PFTE (THAT IS, THE RBN   03211000
*                                      OF THE NEXT LOWER FRAME)      */ 03212000
         LCR   @04,@04                                             1202 03213000
         ALR   @04,NP0RBN                                          1202 03214000
         STH   @04,PFTBQPTR(,NP0PFTEP)                             1202 03215000
*     IF NP0PFTSW='1'B              /* IF THIS IS THE FIRST PFTE FOR */ 03216000
*       THEN                        /* LSQA THEN                     */ 03217000
         TM    NP0PFTSW,B'10000000'                                1203 03218000
         BNO   @RF01203                                            1203 03219000
*       DO;                                                        1204 03220000
*         NP0PFTSW='0'B;            /* TURN FIRST TIME SWITCH OFF    */ 03221000
         NI    NP0PFTSW,B'01111111'                                1205 03222000
*         RSMLSQAL=NP0RBN;          /* PUT RBN CORRES TO LAST (TOP)  */ 03223000
         L     @04,ASCBPTR                                         1206 03224000
         L     @04,ASCBRSM(,@04)                                   1206 03225000
         STH   NP0RBN,RSMLSQAL(,@04)                               1206 03226000
*       END;                        /* PFTE FOR LSQA IN M.S. RSMHD   */ 03227000
*     ELSE                          /* IF NOT FIRST LSQA PFTE        */ 03228000
*       PFTFQPTR=NP0RBN             /* PUT FORWARD (UPWARD) INDEX IN */ 03229000
*           +16;                    /* THIS PFTE (THAT IS, THE RBN OF   03230000
*                                      THE NEXT HIGHER FRAME)        */ 03231000
         B     @RC01203                                            1208 03232000
@RF01203 LA    @04,16                                              1208 03233000
         ALR   @04,NP0RBN                                          1208 03234000
         STH   @04,PFTFQPTR(,NP0PFTEP)                             1208 03235000
*     PFTLSQA='1'B;                 /* SET FLAG INDICATING THIS PFTE    03236000
*                                      IS FOR AN L/SQA PAGE          */ 03237000
@RC01203 OI    PFTLSQA(NP0PFTEP),B'00100000'                       1209 03238000
*     PFTQNDX=PFTLSQAN;             /* SET QUEUE INDEX IN THE PFTE TO   03239000
*                                      INDICATE THAT THIS PFTE IS ON    03240000
*                                      THE LSQA QUEUE OF PFTE'S      */ 03241000
         MVI   PFTQNDX(NP0PFTEP),X'84'                             1210 03242000
*     NP0RBN=NP0RBN                 /* ADJUST RBN TO CORRES TO NEXT  */ 03243000
*         -16;                      /* LOWER REAL FRAME              */ 03244000
         LA    @04,16                                              1211 03245000
         SLR   NP0RBN,@04                                          1211 03246000
*     NP0VBN=NP0VBN                 /* ADJUST VBN TO CORRES TO NEXT  */ 03247000
*         -16;                      /* LOWER VIRT. FRAME             */ 03248000
         SLR   NP0VBN,@04                                          1212 03249000
*   END;                                                           1213 03250000
*                                                                  1213 03251000
         BCTR  I,0                                                 1213 03252000
@DE01197 LTR   I,I                                                 1213 03253000
         BP    @DL01197                                            1213 03254000
*   /*****************************************************************/ 03255000
*   /*                                                               */ 03256000
*   /* PROCESSING FOR LOWEST (BOTTOM) PFTE FOR LSQA PAGES            */ 03257000
*   /*                                                               */ 03258000
*   /*****************************************************************/ 03259000
*                                                                  1214 03260000
*   PFTBQPTR=PFTBQPTR               /* SET BACKWARD (DOWNWARD) INDEX    03261000
*                                      IN                            */ 03262000
*       &&PFTBQPTR;                 /* THIS LOWEST (BOTTOM) PFTE TO     03263000
*                                      ZERO                          */ 03264000
         XC    PFTBQPTR(2,NP0PFTEP),PFTBQPTR(NP0PFTEP)             1214 03265000
*   PVTFPFN=NP0RBN                  /* PUT RBN CORRES. TO THIS LOWEST*/ 03266000
*       +16;                        /* (BOTTOM) PFTE IN PVT          */ 03267000
         L     @07,CVTPVTP(,RCVT)                                  1215 03268000
         LA    @15,16                                              1215 03269000
         ALR   @15,NP0RBN                                          1215 03270000
         STH   @15,PVTFPFN(,@07)                                   1215 03271000
*   RSMLSQAF=NP0RBN                 /* PUT RBN CORRES. TO THIS LOWEST*/ 03272000
*       +16;                        /* (BOTTOM) PFTE FOR LSQA IN M.S.   03273000
*                                      RSMHD                         */ 03274000
         L     @01,ASCBPTR                                         1216 03275000
         L     @01,ASCBRSM(,@01)                                   1216 03276000
         STH   @15,RSMLSQAF(,@01)                                  1216 03277000
*   PVTPFTP=CVTNUCB                 /* CALC. APPARENT ADDR. OF PAGE  */ 03278000
*       -(((NP0EORM                 /* FRAME TABLE (PFT) AND PUT IT     03279000
*                                      IN                            */ 03280000
*       +1)                         /* PVT.                          */ 03281000
*       /4096)*LENGTH(PFTE));       /*                       @YM06361*/ 03282000
         LA    @00,1                                               1217 03283000
         AL    @00,NP0EORM                                         1217 03284000
         SRDA  @00,32                                              1217 03285000
         D     @00,@CF04248                                        1217 03286000
         SLA   @01,4                                               1217 03287000
         LCR   @01,@01                                             1217 03288000
         AL    @01,CVTNUCB(,RCVT)                                  1217 03289000
         ST    @01,PVTPFTP(,@07)                                   1217 03290000
*   NVTNBFND=NP0PFTEP;              /* PUT ADDR. OF THE LOW USED BYTE   03291000
*                                      IN NUC BUFF IN SAVE AREA      */ 03292000
         ST    NP0PFTEP,NVTNBFND                                   1218 03293000
*   RFY                                                            1219 03294000
*    (SHFTREG) RSTD;                                               1219 03295000
*   SHFTREG=CVTREAL;                /* PICK UP VIRT. ADDR. OF FIRST     03296000
*                                      (LOW) V=V BYTE                */ 03297000
         L     SHFTREG,CVTREAL(,RCVT)                              1220 03298000
*/*  CONVERT THIS ADDR. TO ITS 'VBN'                                 */ 03299000
*                                                                  1221 03300000
*   GEN(SRL     SHFTREG,12);                                       1221 03301000
         SRL     SHFTREG,12                                             03302000
*   GEN(SLL     SHFTREG,4);                                        1222 03303000
         SLL     SHFTREG,4                                              03304000
*   PVTLPRIV=SHFTREG;               /* PUT THIS VBN IN TWO FIELDS OF */ 03305000
         L     @05,CVTPVTP(,RCVT)                                  1223 03306000
         STH   SHFTREG,PVTLPRIV(,@05)                              1223 03307000
*   PVTLCSA=SHFTREG;                /* THE PVT - RSM NEEDS THEM      */ 03308000
         STH   SHFTREG,PVTLCSA(,@05)                               1224 03309000
*   RFY                                                            1225 03310000
*    (SHFTREG) UNRSTD;                                             1225 03311000
*                                                                  1225 03312000
*   /*****************************************************************/ 03313000
*   /*                                                               */ 03314000
*   /* INITIALIZE THE PVT FIELD INDICATING THE NUMBER OF 4K FRAMES   */ 03315000
*   /* WITHIN A CONFIGURABLE STORAGE UNIT                    @YD03005*/ 03316000
*   /*                                                               */ 03317000
*   /*****************************************************************/ 03318000
*                                                                  1226 03319000
*   IF NVTMP='0'B THEN              /* FOR UP SYSTEMS DEFAULT UNIT 1226 03320000
*                                      SIZE TO 256K                  */ 03321000
         TM    NVTMP,B'00100000'                                   1226 03322000
         BNZ   @RF01226                                            1226 03323000
*     PVTRSUS=128;                  /* SET 512K UNIT SIZE DEFAULT  1227 03324000
*                                                            @YD03005*/ 03325000
         MVC   PVTRSUS(2,@05),@CH02217                             1227 03326000
*   ELSE                                                           1228 03327000
*     PVTRSUS=256;                  /* ASSUME ONE MEG STORAGE UNITS     03328000
*                                                            @YD03005*/ 03329000
*                                                                  1228 03330000
         B     @RC01226                                            1228 03331000
@RF01226 L     @02,CVTPVTP(,RCVT)                                  1228 03332000
         MVC   PVTRSUS(2,@02),@CH00693                             1228 03333000
*   /*****************************************************************/ 03334000
*   /*                                                               */ 03335000
*   /* CHECK FOR MULTIPROCESSOR 158 CONFIGURATION AND NOT OPERATING  */ 03336000
*   /* UNDER A HYPERVISOR                                    @YD03005*/ 03337000
*   /*                                                               */ 03338000
*   /*****************************************************************/ 03339000
*                                                                  1229 03340000
*   IF NVTMP='1'B&(PSAPCCAR->PCCACPID(9:12)='0158')&/* MP 158 SYSTEM?*/ 03341000
*       (PSAPCCAR->PCCACPID(1:2)^='FF')/* NOT A HYPERVISOR   @YD03005*/ 03342000
*     THEN                                                         1229 03343000
@RC01226 TM    NVTMP,B'00100000'                                   1229 03344000
         BNO   @RF01229                                            1229 03345000
         L     @02,NPSAPTR                                         1229 03346000
         L     @02,PSAPCCAR(,@02)                                  1229 03347000
         CLC   PCCACPID+8(4,@02),@CC05111                          1229 03348000
         BNE   @RF01229                                            1229 03349000
         CLC   PCCACPID(2,@02),@CC05112                            1229 03350000
         BE    @RF01229                                            1229 03351000
*     DO;                                                          1230 03352000
*                                                                  1230 03353000
*       /*************************************************************/ 03354000
*       /*                                                           */ 03355000
*       /* ISSUE DIAGNOISE TO DETERMINE STORAGE UNIT SIZE FOR THIS   */ 03356000
*       /* PROCESSOR                                                 */ 03357000
*       /*                                                           */ 03358000
*       /*************************************************************/ 03359000
*                                                                  1231 03360000
*       REG0='8300012D'X;           /* MODEL DEPENDENT INFORMATION 1231 03361000
*                                      FOR DIAGNOISE         @YD03005*/ 03362000
         L     REG0,@CF05113                                       1231 03363000
*       REG15=ADDR(DIAGMCW);        /* POINT TO MCW FOR DIAGNOISE  1232 03364000
*                                                            @YD03005*/ 03365000
         LA    REG15,DIAGMCW                                       1232 03366000
*       GEN(DC  X'8300F000');       /* DIAGNOISE             @YD03005*/ 03367000
*                                                                  1233 03368000
         DC  X'8300F000'                                                03369000
*       /*************************************************************/ 03370000
*       /*                                                           */ 03371000
*       /* ON RETURN FROM THE DIAGNOISE REG0 WILL CONTAIN A BIT MASK */ 03372000
*       /* REPRESENTING STORAGE UNIT SIZE                    @YD03005*/ 03373000
*       /*                                                           */ 03374000
*       /*************************************************************/ 03375000
*                                                                  1234 03376000
*       TEMPWORK=REG0;              /* STORE INFORMATION     @YD03005*/ 03377000
*                                                                  1234 03378000
         ST    REG0,TEMPWORK                                       1234 03379000
*       /*************************************************************/ 03380000
*       /*                                                           */ 03381000
*       /* CHECK FOR STORAGE UNIT SIZE                               */ 03382000
*       /*                                                           */ 03383000
*       /*************************************************************/ 03384000
*                                                                  1235 03385000
*       IF ONEMGB='0'B&HALFMEG='0'B THEN/* 256K SIZE?        @YD03005*/ 03386000
         TM    ONEMGB,B'11000000'                                  1235 03387000
         BNZ   @RF01235                                            1235 03388000
*         PVTRSUS=64;               /* 64 4K UNITS IN 256K   @YD03005*/ 03389000
         L     @02,CVTPVTP(,RCVT)                                  1236 03390000
         MVC   PVTRSUS(2,@02),@CH01627                             1236 03391000
*       IF ONEMGB='0'B&HALFMEG='1'B THEN/* 512K SIZE?        @YD03005*/ 03392000
@RF01235 TM    HALFMEG,B'01000000'                                 1237 03393000
         BNO   @RF01237                                            1237 03394000
         TM    ONEMGB,B'10000000'                                  1237 03395000
         BNZ   @RF01237                                            1237 03396000
*         PVTRSUS=128;              /* 128 4K UNITS IN 512K  @YD03005*/ 03397000
*                                                                  1238 03398000
         L     @02,CVTPVTP(,RCVT)                                  1238 03399000
         MVC   PVTRSUS(2,@02),@CH02217                             1238 03400000
*       /*************************************************************/ 03401000
*       /*                                                           */ 03402000
*       /* STORAGE SIZE WAS NOT 512K OR 256K MUST THEN BE DEFAULT    */ 03403000
*       /* SIZE OF 1MEG LEAVE DEFAULT VALUE                          */ 03404000
*       /*                                                           */ 03405000
*       /*************************************************************/ 03406000
*                                                                  1239 03407000
*     END;                          /*                       @YD03005*/ 03408000
@RF01237 DS    0H                                                  1240 03409000
*   RFY                                                            1240 03410000
*    (PFTE) BASED(PFTEPTR);                                        1240 03411000
@RF01229 DS    0H                                                  1241 03412000
*   RFY                                                            1241 03413000
*    (RSMHD) BASED(RSMHDPTR);                                      1241 03414000
*   RFY                                                            1242 03415000
*    (PVT) BASED(PVTPTR);                                          1242 03416000
*                                                                  1243 03417000
*   /*****************************************************************/ 03418000
*   /*                                                               */ 03419000
*   /* THIS ROUTINE WILL BUILD A TRACE TABLE FOR THE NUMBER OF       */ 03420000
*   /* ENTRIES SPECIFIED IN THE NVTTRACE FIELD                       */ 03421000
*   /*                                                               */ 03422000
*   /*****************************************************************/ 03423000
*                                                                  1243 03424000
*NP0TTBLD:                          /* TRACE TABLE BUILD RTN         */ 03425000
*   IF NVTTRACE^=0                  /* IF TRACE TABLE IS REQUESTED,  */ 03426000
*     THEN                          /* THEN DO THE FOLLOWING         */ 03427000
NP0TTBLD LH    @02,NVTTRACE                                        1243 03428000
         LTR   @02,@02                                             1243 03429000
         BZ    @RF01243                                            1243 03430000
*     DO;                                                          1244 03431000
*       NP0TTSZ=NVTTRACE            /* CALCULATE SIZE OF TABLE IN  1245 03432000
*                                      BYTES                         */ 03433000
*           *32;                                                   1245 03434000
         LH    @05,NVTTRACE                                        1245 03435000
         SLA   @05,5                                               1245 03436000
         LR    NP0TTSZ,@05                                         1245 03437000
*       NP0TTADR=NVTNBFND           /* CALCULATE START ADDR OF TABLE */ 03438000
*           -NP0TTSZ;                                              1246 03439000
         L     NP0TTADR,NVTNBFND                                   1246 03440000
         SLR   NP0TTADR,NP0TTSZ                                    1246 03441000
*       NP0TTADR=(NP0TTADR          /* ROUND RESULT TO 32 BYTE     1247 03442000
*                                      MULTIPLE                      */ 03443000
*           /32)*32;                                               1247 03444000
         LR    @15,NP0TTADR                                        1247 03445000
         SRL   @15,5                                               1247 03446000
         SLA   @15,5                                               1247 03447000
         LR    NP0TTADR,@15                                        1247 03448000
*       NP0TTHDR=NP0TTADR           /* CALCULATE ADDR OF 3 WORD    1248 03449000
*                                      HEADER                        */ 03450000
*           -LENGTH(TRHDR);         /* FOR THE TRACE TABLE           */ 03451000
         LR    NP0TTHDR,NP0TTADR                                   1248 03452000
         SH    NP0TTHDR,@CH01253                                   1248 03453000
*       NVTNBFND=NP0TTHDR;          /* ADJUST ADDR OF NEXT AVAILABLE    03454000
*                                      BYTE IN THE NUC BUFFER        */ 03455000
         ST    NP0TTHDR,NVTNBFND                                   1249 03456000
*/* INITIALIZE TRACE TABLE HEADER                                    */ 03457000
*                                                                  1250 03458000
*       TRPTR=NP0TTADR;             /* NEXT ENTRY ADDR               */ 03459000
         ST    NP0TTADR,TRPTR(,NP0TTHDR)                           1250 03460000
*       TRBEG=NP0TTADR;             /* FIRST ENTRY ADDR              */ 03461000
         ST    NP0TTADR,TRBEG(,NP0TTHDR)                           1251 03462000
*       TREND=NP0TTADR              /* ADDR. OF LAST ENTRY IN TABLE  */ 03463000
*           +(NVTTRACE*32);                                        1252 03464000
         ALR   @05,NP0TTADR                                        1252 03465000
         ST    @05,TREND(,NP0TTHDR)                                1252 03466000
*       FLCTRACE=NP0TTHDR;          /* PUT VIRTUAL ADDR OF TRACE   1253 03467000
*                                      HEADER INTO ABS LOC 84 (LOC 54   03468000
*                                      HEX)                          */ 03469000
         L     @01,NPSAPTR                                         1253 03470000
         ST    NP0TTHDR,FLCTRACE(,@01)                             1253 03471000
*       RFY                                                        1254 03472000
*        (SCVTSECT) BASED(CVTABEND);                               1254 03473000
*       SCVTRPTR=NP0TTHDR;          /* PUT VIRTUAL ADDR OF TRACE   1255 03474000
*                                      HEADER INTO SECONDARY CVT     */ 03475000
         L     @01,CVTABEND(,RCVT)                                 1255 03476000
         ST    NP0TTHDR,SCVTRPTR(,@01)                             1255 03477000
*       CVTTRCA=NP0TTHDR;           /* SAVE IN CVT ALSO      @ZA02352*/ 03478000
         ST    NP0TTHDR,CVTTRCA(,RCVT)                             1256 03479000
*       RFY                                                        1257 03480000
*        (SCVTSECT) BASED(SCVTSPTR);                               1257 03481000
*       CVTTRACE=NP0TRINS;          /* PUT TRACE ACTIVE INSTRUCT. (BR   03482000
*                                      10) IN CVT                    */ 03483000
         MVC   CVTTRACE(2,RCVT),NP0TRINS                           1258 03484000
*     END;                                                         1259 03485000
*NP0STPTB:                                                         1260 03486000
*                                                                  1260 03487000
*/********************************************************************/ 03488000
*/* SEGMENT / PAGE TABLE BUILD RTN                                   */ 03489000
*/* THIS INITIALIZES SEGMENT TABLE ENTRIES AND CORRESPONDING PAGE    */ 03490000
*/* TABLES FOR NIP'S V=R REGION AND FOR SQA AND LSQA SPACE ALLOCATED */ 03491000
*/* IN VIRTUAL. IF VIRTUAL SQA OR LSQA SPACE IS NOT BACKED UP IN     */ 03492000
*/* REAL, THE APPROPRIATE PAGE TABLES ARE BUILT BUT THE PAGE TABLE   */ 03493000
*/* ENTRIES FOR THE VIRTUAL PAGES NOT BACKED-UP IN REAL, ARE SET     */ 03494000
*/* INVALID                                                          */ 03495000
*/********************************************************************/ 03496000
*                                                                  1260 03497000
*   TABPTR=ADDR(NSEGTAB);           /* SET BASE TO TABLE ENTRY FOR 1260 03498000
*                                      SEGMENT TABLE                 */ 03499000
@RF01243 DS    0H                                                  1260 03500000
NP0STPTB LA    TABPTR,NSEGTAB                                      1260 03501000
*   NP0STEP=NP0RADDR;               /* PUT REAL ADDR OF SEG TABLE IN    03502000
*                                      POINTER TO SEG. TABLE ENTRIES */ 03503000
         L     NP0STEP,NP0RADDR(,TABPTR)                           1261 03504000
*/*                                                                  */ 03505000
*/* DETERMINE THE SEGMENT IN WHICH NIP'S V=R REGION ENDS, THIS WILL  */ 03506000
*/* TRIGGER SPECIAL PROCESSING FOR THE PAGE TABLE ENTRIES FOR THE    */ 03507000
*/* TOP OF THE REGION.                                               */ 03508000
*/*                                                                  */ 03509000
*/* IF THE REGION ENDS ON A SEGMENT BOUNDARY, SET THE HI SEGMENT     */ 03510000
*/*   ADDRESS TO THE NEXT LOWER SEGMENT BOUNDARY.                    */ 03511000
*/*                                                                  */ 03512000
*/* IF THE REGION DOES NOT END ON A SEGMENT BOUNDARY, SET THE HI     */ 03513000
*/*   SEGMENT ADDRESS TO THE NEXT LOWER SEGMENT BOUNDARY.            */ 03514000
*/*                                                                  */ 03515000
*/* IF THE REGION DOES END ON A SEGMENT BOUND, THE 'ROUND UP'        */ 03516000
*/* PRODECURE WILL NOT EFFECT THAT ADDRESS.                          */ 03517000
*/*                                                                  */ 03518000
*                                                                  1262 03519000
*   NP0HISEG=(((NP0TPRGN+65535)     /* ROUND REG. TOP UP TO A        */ 03520000
*       |65535)                     /* SEGMENT BOUND                 */ 03521000
*       &&65535)-65536;             /* SUBTRACT 1 SEGMENT FROM THE 1262 03522000
*                                      RESULT OF THE ROUND-UP        */ 03523000
         L     @15,@CF05123                                        1262 03524000
         L     @14,NP0TPRGN                                        1262 03525000
         LR    NP0HISEG,@14                                        1262 03526000
         ALR   NP0HISEG,@15                                        1262 03527000
         OR    NP0HISEG,@15                                        1262 03528000
         XR    NP0HISEG,@15                                        1262 03529000
         SL    NP0HISEG,@CF05018                                   1262 03530000
*   NP0TFRMS=NP0TPRGN               /* CALC TOTAL NUMBER OF FRAMES IN*/ 03531000
*       /4096;                      /* NUCLEUS AND NIP REGION        */ 03532000
         SRL   @14,12                                              1263 03533000
         LR    NP0TFRMS,@14                                        1263 03534000
*   NP0TFRMS=((NP0TFRMS             /* ROUND THIS NUMBER UP TO A     */ 03535000
*       +15)                        /* MULTIPLE OF 16 (THE NUMBER OF */ 03536000
*       |15)                        /* PAGES IN A SEGMENT).          */ 03537000
*       &&15;                                                      1264 03538000
         LA    @15,15                                              1264 03539000
         LR    @14,NP0TFRMS                                        1264 03540000
         ALR   @14,@15                                             1264 03541000
         OR    @14,@15                                             1264 03542000
         XR    @14,@15                                             1264 03543000
         LR    NP0TFRMS,@14                                        1264 03544000
*   NP0SPLEN=(NP0TFRMS              /* CALC AM'T OF SPACE REQUIRED 1265 03545000
*                                      FOR                           */ 03546000
*       /16)                        /* THIS NUMBER OF                */ 03547000
*       *(32+                       /* PAGE TABLES           @G559P2L*/ 03548000
*       16*LENGTH(XPTE));           /* AND XPTE TABLES .     @G559P2L*/ 03549000
*                                                                  1265 03550000
         LR    @15,NP0TFRMS                                        1265 03551000
         SRL   @15,4                                               1265 03552000
         MH    @15,@CH04660                                        1265 03553000
         ST    @15,NP0SPLEN                                        1265 03554000
*   /*****************************************************************/ 03555000
*   /*                                                               */ 03556000
*   /* PUT THE AMOUNT IN SPACE ALLOC SUBRTN TABLE.           @G559P2L*/ 03557000
*   /*                                                               */ 03558000
*   /*****************************************************************/ 03559000
*                                                                  1266 03560000
*   NP0SATBL=ADDR(NP0SPTBL);        /* PUT ADDR OF TABLE IN PARAM  1266 03561000
*                                      AREA FOR SPACE ALLOC. SUBRTN  */ 03562000
         LA    NP0SATBL,NP0SPTBL                                   1266 03563000
*   NP0SAHIR=(NP0RSQAV              /* PUT HI REAL ADDR TO BE USED BY*/ 03564000
*       /8)                         /* THE SUBRTN IN PARAM AREA      */ 03565000
*       *8;                         /* ROUND THE START VALUE DOWN TO    03566000
*                                      AN EIGHT BYTE BOUND SINCE PAGE   03567000
*                                      TABLES MUST BEGIN ON EIGHT  1267 03568000
*                                      BYTE BOUNDARIES               */ 03569000
         L     NP0SAHIR,NP0RSQAV                                   1267 03570000
         SRL   NP0SAHIR,3                                          1267 03571000
         SLA   NP0SAHIR,3                                          1267 03572000
*   NP0SAHIV=(NP0VSQAV              /* PUT HI VIRT ADDR TO BE USED BY*/ 03573000
*       /8)                         /* THE SUBRTN IN PARAM AREA      */ 03574000
*       *8;                         /* ROUND THE START VALUE DOWN TO    03575000
*                                      AN EIGHT BYTE BOUND SINCE PAGE   03576000
*                                      TABLES MUST BEGIN ON EIGHT  1268 03577000
*                                      BYTE BOUNDARIES               */ 03578000
         L     NP0SAHIV,NP0VSQAV                                   1268 03579000
         SRL   NP0SAHIV,3                                          1268 03580000
         SLA   NP0SAHIV,3                                          1268 03581000
*   CALL NSPALLOC;                  /* CALL SPACE ALLOC SUBROUTINE   */ 03582000
         BAL   @14,NSPALLOC                                        1269 03583000
*   NP0RSQAV=NP0SAHIR;              /* SAVE LOW USED REAL ADDR IN SQA*/ 03584000
         ST    NP0SAHIR,NP0RSQAV                                   1270 03585000
*   NP0VSQAV=NP0SAHIV;              /* SAVE LOW USED VIRT ADDR. IN 1271 03586000
*                                      SQA                           */ 03587000
         ST    NP0SAHIV,NP0VSQAV                                   1271 03588000
*   NP0PTEP=NP0RSQAV;               /* SET PAGE TABLE POINTER TO   1272 03589000
*                                      FIRST (LOW) ENTRY IN FIRST  1272 03590000
*                                      (LOW) PAGE TABLE              */ 03591000
         L     @02,NP0RSQAV                                        1272 03592000
         ST    @02,NP0PTEP                                         1272 03593000
*   RFY                                                            1273 03594000
*    (SHFTREG) RSTD;                                               1273 03595000
*   SHFTREG=NP0PTEP;                /* PUT PAGE TABLE ADDR. IN REG   */ 03596000
         LR    SHFTREG,@02                                         1274 03597000
*   GEN(SLL     SHFTREG,8);         /* SHIFT HI 8 BITS OFF           */ 03598000
         SLL     SHFTREG,8                                              03599000
*   GEN(SRL     SHFTREG,8);         /* SHIFT IN 8 ZERO BITS          */ 03600000
         SRL     SHFTREG,8                                              03601000
*   NP0PTEP=SHFTREG;                /* REPLACE RESULTS, HI ORDER BYTE   03602000
*                                      IS ZERO                       */ 03603000
         ST    SHFTREG,NP0PTEP                                     1277 03604000
*   RFY                                                            1278 03605000
*    (SHFTREG) UNRSTD;                                             1278 03606000
*                                                                  1278 03607000
*   /*****************************************************************/ 03608000
*   /*                                                               */ 03609000
*   /* VARIABLES 'NP0SEGAD' AND 'NP0FRMNO' ARE BOTH INIT. TO ZERO.   */ 03610000
*   /* 'NP0SEGAD' IS THE INITIAL SEGMENT ADDRESS, AND 'NP0FRMNO' IS  */ 03611000
*   /* THE INITIAL FRAME NUMBER. A FRAME NUMBER IS THE HI ORDER 12   */ 03612000
*   /* BITS OF A 24 BIT REAL ADDR. IN A PAGE TABLE ENTRY, THE FRAME  */ 03613000
*   /* NUMBER IS PUT IN THE HI 12 BITS OF THE 16 BIT ENTRY, THE LOW 4*/ 03614000
*   /* BITS IN THE PAGE TABLE ENTRY ARE FLAGS. THIS ROUTINE PLACES   */ 03615000
*   /* THE FRAME NUMBER IN THE HI 12 BITS OF 'NP0FRMNO' SO IT CAN BE */ 03616000
*   /* ADDED TO A SKELETON PAGE TABLE ENTRY AND YIELD A VALID PAGE   */ 03617000
*   /* TABLE ENTRY WITHOUT FURTHER SHIFTING.                         */ 03618000
*   /*                                                               */ 03619000
*   /*****************************************************************/ 03620000
*                                                                  1279 03621000
*   RFY                                                            1279 03622000
*    (SGTSTE) BASED(NP0STEP);                                      1279 03623000
*   RFY                                                            1280 03624000
*    (PGTPTE) BASED(NP0PTEP);                                      1280 03625000
*NSTPTB01:                                                         1281 03626000
*   IF NP0SEGAD<NP0HISEG            /* CHECK IF CURR SEG IS BELOW TOP*/ 03627000
*     THEN                          /* SEG OF NIP REGION             */ 03628000
NSTPTB01 C     NP0HISEG,NP0SEGAD                                   1281 03629000
         BNH   @RF01281                                            1281 03630000
*     DO;                           /* IF IT IS -                    */ 03631000
*       SGTSTE=NP0SSTE              /* SET SEG TABLE ENTRY VALID, PUT*/ 03632000
*           +NP0PTEP;               /* IN ADDR. OF CURR. PAGE TABLE  */ 03633000
         L     @02,NP0SSTE                                         1283 03634000
         AL    @02,NP0PTEP                                         1283 03635000
         ST    @02,SGTSTE(,NP0STEP)                                1283 03636000
*       DO I=16 TO 1 BY-1;          /* LOOP THRU PAGE TABLE -        */ 03637000
         LA    I,16                                                1284 03638000
@DL01284 DS    0H                                                  1285 03639000
*         PGTPTE=NP0SPTE            /* VALIDATE PAGE TABLE ENTRY AND */ 03640000
*             +NP0FRMNO;            /* PUT IN NUMBER OF CURR FRAME   */ 03641000
         L     @04,NP0PTEP                                         1285 03642000
         SLR   @02,@02                                             1285 03643000
         ICM   @02,3,NP0FRMNO                                      1285 03644000
         SLR   @15,@15                                             1285 03645000
         ICM   @15,3,NP0SPTE                                       1285 03646000
         ALR   @15,@02                                             1285 03647000
         STH   @15,PGTPTE(,@04)                                    1285 03648000
*         NP0PTEP=LENGTH(PGTPTE)    /* UPDATE PAGE TABLE ENTRY PTR   */ 03649000
*             +NP0PTEP;             /* TO NEXT PAGE TABLE ENTRY      */ 03650000
         AL    @04,@CF00082                                        1286 03651000
         ST    @04,NP0PTEP                                         1286 03652000
*         NP0FRMNO=16               /* UPDATE FRAME NUMBER TO THE    */ 03653000
*             +NP0FRMNO;            /* NUMBER CORRES TO THE NEXT   1287 03654000
*                                      HIGHER FRAME                  */ 03655000
         LA    @02,16(,@02)                                        1287 03656000
         STH   @02,NP0FRMNO                                        1287 03657000
*       END;                        /* CLOSE DO-GROUP                */ 03658000
         BCTR  I,0                                                 1288 03659000
         LTR   I,I                                                 1288 03660000
         BP    @DL01284                                            1288 03661000
*       NP0PTEP=NP0PTEP+(16*LENGTH(XPTE));/* ALLOC XPTE@G559P2L      */ 03662000
         LA    @02,192                                             1289 03663000
         AL    @02,NP0PTEP                                         1289 03664000
         ST    @02,NP0PTEP                                         1289 03665000
*       NP0STEP=LENGTH(SGTSTE)      /* UPDATE SEG TABLE ENTRY PTR.   */ 03666000
*           +NP0STEP;               /* TO NEXT SEG. TABLE ENTRY      */ 03667000
         AH    NP0STEP,@CH00062                                    1290 03668000
*       NP0SEGAD=65536              /* UPDATE SEG ADDR TO NEXT       */ 03669000
*           +NP0SEGAD;              /* HIGHER SEG                    */ 03670000
         L     @02,@CF05018                                        1291 03671000
         AL    @02,NP0SEGAD                                        1291 03672000
         ST    @02,NP0SEGAD                                        1291 03673000
*       GOTO NSTPTB01;              /* LOOP                          */ 03674000
         B     NSTPTB01                                            1292 03675000
*     END;                          /* CLOSE DO-GROUP                */ 03676000
*                                                                  1293 03677000
*   /*****************************************************************/ 03678000
*   /*                                                               */ 03679000
*   /* THIS RTN IS ENTERED WHEN THE SEGMENT IN WHICH NIP'S REGION    */ 03680000
*   /* ENDS IS BEING PROCESSED.                                      */ 03681000
*   /*                                                               */ 03682000
*   /*****************************************************************/ 03683000
*                                                                  1294 03684000
*   NP0PTCT2=(NP0TPRGN              /* CALC NUMBER OF FRAMES IN THIS */ 03685000
*       -NP0HISEG)                  /* SEG THAT ARE IN NIP'S REG.    */ 03686000
*       /4096;                                                     1294 03687000
@RF01281 L     @00,NP0TPRGN                                        1294 03688000
         SLR   @00,NP0HISEG                                        1294 03689000
         SRDA  @00,32                                              1294 03690000
         D     @00,@CF04248                                        1294 03691000
         LR    NP0PTCT2,@01                                        1294 03692000
*   SGTSTE=NP0SSTE                  /* VALIDATE SEG TABLE ENTRY, PUT */ 03693000
*       +NP0PTEP;                   /* IN ADDR.OF CURR. PAGE TABLE   */ 03694000
         L     @07,NP0SSTE                                         1295 03695000
         AL    @07,NP0PTEP                                         1295 03696000
         ST    @07,SGTSTE(,NP0STEP)                                1295 03697000
*   DO I=NP0PTCT2 TO 1 BY-1;        /* LOOP THRU PAGE TABLE          */ 03698000
         LR    I,NP0PTCT2                                          1296 03699000
         B     @DE01296                                            1296 03700000
@DL01296 DS    0H                                                  1297 03701000
*     PGTPTE=NP0SPTE                /* VALIDATE PAGE TABLE           */ 03702000
*         +NP0FRMNO;                /* ENTRY, PUT IN NUMBER OF CURR     03703000
*                                      FRAME                         */ 03704000
         L     @07,NP0PTEP                                         1297 03705000
         SLR   @04,@04                                             1297 03706000
         ICM   @04,3,NP0FRMNO                                      1297 03707000
         SLR   @15,@15                                             1297 03708000
         ICM   @15,3,NP0SPTE                                       1297 03709000
         ALR   @15,@04                                             1297 03710000
         STH   @15,PGTPTE(,@07)                                    1297 03711000
*     NP0PTEP=LENGTH(PGTPTE)        /* UPDATE PAGE TABLE ENTRY       */ 03712000
*         +NP0PTEP;                 /* PTR TO NEXT PAGE TABLE ENTRY  */ 03713000
         AL    @07,@CF00082                                        1298 03714000
         ST    @07,NP0PTEP                                         1298 03715000
*     NP0FRMNO=16                   /* UPDATE FRAME NUMBER TO THE    */ 03716000
*         +NP0FRMNO;                /* NUMBER CORRES TO THE NEXT     */ 03717000
         LA    @04,16(,@04)                                        1299 03718000
         STH   @04,NP0FRMNO                                        1299 03719000
*   END;                            /* HIGHER FRAME                  */ 03720000
*                                                                  1300 03721000
         BCTR  I,0                                                 1300 03722000
@DE01296 LTR   I,I                                                 1300 03723000
         BP    @DL01296                                            1300 03724000
*   /*****************************************************************/ 03725000
*   /*                                                               */ 03726000
*   /* FOLLOWING RTN COMPLETES THE PAGE TABLE IF THERE ARE PAGE TABLE*/ 03727000
*   /* ENTRIES LEFT UN-PROCESSED BY RTN ABOVE                        */ 03728000
*   /*                                                               */ 03729000
*   /*****************************************************************/ 03730000
*                                                                  1301 03731000
*   IF NP0PTCT2<16                  /* IF THERE ARE ANY UN-PROCESSED */ 03732000
*     THEN                          /* PAGE TABLE ENTRIES, THEN -  1301 03733000
*                                      PROCESS THOSE REMAINING -     */ 03734000
         LA    @07,16                                              1301 03735000
         CR    NP0PTCT2,@07                                        1301 03736000
         BNL   @RF01301                                            1301 03737000
*     DO I=(16-NP0PTCT2) TO 1 BY-1;                                1302 03738000
         SLR   @07,NP0PTCT2                                        1302 03739000
         LR    I,@07                                               1302 03740000
         B     @DE01302                                            1302 03741000
@DL01302 DS    0H                                                  1303 03742000
*       PGTPTE=NP0SIPTE;            /* SET THEM INVALID              */ 03743000
         L     @07,NP0PTEP                                         1303 03744000
         MVC   PGTPTE(2,@07),NP0SIPTE                              1303 03745000
*       NP0PTEP=LENGTH(PGTPTE)      /* UPDATE PAGE TABLE ENTRY       */ 03746000
*           +NP0PTEP;               /* POINTER TO NEXT PAGE TABLE    */ 03747000
         AL    @07,@CF00082                                        1304 03748000
         ST    @07,NP0PTEP                                         1304 03749000
*     END;                          /* ENTRY                         */ 03750000
         BCTR  I,0                                                 1305 03751000
@DE01302 LTR   I,I                                                 1305 03752000
         BP    @DL01302                                            1305 03753000
*   NP0PTEP=NP0PTEP+(16*LENGTH(XPTE));/* LAST XPTES          @G559P2L*/ 03754000
@RF01301 LA    @07,192                                             1306 03755000
         AL    @07,NP0PTEP                                         1306 03756000
         ST    @07,NP0PTEP                                         1306 03757000
*   NP0STEP=LENGTH(SGTSTE)          /* WHEN PAGE TABLE IS FINISHED   */ 03758000
*       +NP0STEP;                   /* UPDATE SEG TABLE ENTRY PTR TO    03759000
*                                      NEXT SEG TABLE ENTRY          */ 03760000
         AH    NP0STEP,@CH00062                                    1307 03761000
*   NP0SEGAD=65536                  /* UPDATE SEG ADDR TO NEXT       */ 03762000
*       +NP0SEGAD;                  /* HIGHER SEG ADDR.              */ 03763000
*                                                                  1308 03764000
         L     @07,@CF05018                                        1308 03765000
         L     @15,NP0SEGAD                                        1308 03766000
         ALR   @15,@07                                             1308 03767000
         ST    @15,NP0SEGAD                                        1308 03768000
*   /*****************************************************************/ 03769000
*   /*                                                               */ 03770000
*   /* THE FIELD NVTLSQAS CONTAINS THE VIRT ADDR AT WHICH THE M.S.   */ 03771000
*   /* LSQA ENDS. THE SYSTEM DEFINED ADDR IS 8MB. TO CALC THE ADDR OF*/ 03772000
*   /* THE SEGMENT IN WHICH M.S. LSQA ENDS, JUST SUB'T 1 SEG. FROM   */ 03773000
*   /* THIS ENDING ADDR AND USE THE RESULT AS THE VIRT ADDR OF THE   */ 03774000
*   /* SEGMENT IN WHICH LSQA IS LOCATED. LSQA OCCUPIES THE TOP 'N'   */ 03775000
*   /* PAGES OF THIS SEGMENT                                         */ 03776000
*   /*                                                               */ 03777000
*   /*****************************************************************/ 03778000
*                                                                  1309 03779000
*   NP0LSQSG=NVTLSQAS               /* CALC. VIRT. SEG. IN WHICH     */ 03780000
*       -65536;                     /* LSQA IS LOCATED               */ 03781000
*                                                                  1309 03782000
         LCR   @07,@07                                             1309 03783000
         AL    @07,NVTLSQAS                                        1309 03784000
         LR    NP0LSQSG,@07                                        1309 03785000
*   /*****************************************************************/ 03786000
*   /*                                                               */ 03787000
*   /* FOLLOWING RTN SETS SEG. TABLE ENTRIES INVALID FOR ALL SEGMENTS*/ 03788000
*   /* BETWEEN NIP REGION AND THE SEGMENT IN WHICH LSQA IS LOCATED   */ 03789000
*   /*                                                               */ 03790000
*   /*****************************************************************/ 03791000
*                                                                  1310 03792000
*NSTPTB02:                                                         1310 03793000
*   IF NP0SEGAD<NP0LSQSG            /* IF CURR SEG IS BELOW THE LSQA */ 03794000
*     THEN                          /* SEG., THEN                    */ 03795000
NSTPTB02 L     @07,NP0SEGAD                                        1310 03796000
         CR    @07,NP0LSQSG                                        1310 03797000
         BNL   @RF01310                                            1310 03798000
*     DO;                           /* SET CORRES                    */ 03799000
*       SGTSTE=NP0SISTE;            /* SEG. TABLE ENTRY INVALID      */ 03800000
         MVC   SGTSTE(4,NP0STEP),NP0SISTE                          1312 03801000
*       NP0STEP=LENGTH(SGTSTE)      /* UPDATE SEG TABLE PTR TO NEXT  */ 03802000
*           +NP0STEP;               /* SEG TABLE ENTRY               */ 03803000
         AH    NP0STEP,@CH00062                                    1313 03804000
*       NP0SEGAD=65536              /* UPDATE SEG ADDR TO NEXT       */ 03805000
*           +NP0SEGAD;              /* HIGHER SEG ADDR.              */ 03806000
         AL    @07,@CF05018                                        1314 03807000
         ST    @07,NP0SEGAD                                        1314 03808000
*       GOTO NSTPTB02;              /* LOOP                          */ 03809000
         B     NSTPTB02                                            1315 03810000
*     END;                                                         1316 03811000
*                                                                  1316 03812000
*   /*****************************************************************/ 03813000
*   /*                                                               */ 03814000
*   /* THIS ROUTINE PROCESSES THE PAGE TABLE ENTRIES FOR THE SEGMENT */ 03815000
*   /* IN WHICH LSQA IS LOCATED                                      */ 03816000
*   /*                                                               */ 03817000
*   /*****************************************************************/ 03818000
*                                                                  1317 03819000
*   RFY                                                            1317 03820000
*    (SHFTREG) RSTD;                                               1317 03821000
@RF01310 DS    0H                                                  1318 03822000
*   TABPTR=ADDR(NPT);               /* SET BASE TO TABLE ENTRY FOR 1318 03823000
*                                      PAGE TABLE FOR THE SEGMENT IN    03824000
*                                      WHICH LSQA IS LOCATED (THIS 1318 03825000
*                                      PAGE TABLE HAS ALREADY BEEN 1318 03826000
*                                      ALLOCATED IN LSQA             */ 03827000
         LA    TABPTR,NPT                                          1318 03828000
*   NP0PTEP=NP0RADDR;               /* SET PAGE TABLE ENTRY PTR TO 1319 03829000
*                                      REAL ADDR OF THAT PAGE TABLE  */ 03830000
         MVC   NP0PTEP(4),NP0RADDR(TABPTR)                         1319 03831000
*   SHFTREG=NP0RLSQP;               /* GET REAL ADDR OF THE FRAME  1320 03832000
*                                      HOLDING THE FIRST (LOW) LSQA     03833000
*                                      PAGE                          */ 03834000
         L     SHFTREG,NP0RLSQP                                    1320 03835000
*   GEN(SRL   SHFTREG,8);           /* CONVERT IT TO A FRAME NUMBER     03836000
*                                      ADJUSTED FOR ADDING TO THE  1321 03837000
*                                      SKELETON PAGE TABLE ENTRY   1321 03838000
*                                      (SINCE THE REAL ADDR MUST BE     03839000
*                                      ON A PAGE BOUND AND THUS, THE    03840000
*                                      LOW 12 BITS ARE ZEROS, IT IS     03841000
*                                      NOT NECESSARY TO SHIFT RIGHT     03842000
*                                      12 AND SHIFT LEFT 4)          */ 03843000
         SRL   SHFTREG,8                                                03844000
*   NP0FRMNO=SHFTREG;               /* PUT RESULT IN NP0FRMNO        */ 03845000
         STH   SHFTREG,NP0FRMNO                                    1322 03846000
*   RFY                                                            1323 03847000
*    (SHFTREG) UNRESTRICTED;                                       1323 03848000
*                                                                  1323 03849000
*   /*****************************************************************/ 03850000
*   /*                                                               */ 03851000
*   /* THIS RTN PROCESSES THE SEGMENT TABLE ENTRY AND THE PAGE TABLE */ 03852000
*   /* ENTRIES CORRES. TO THE NON-LSQA PAGES IN THIS SEGMENT         */ 03853000
*   /*                                                               */ 03854000
*   /*****************************************************************/ 03855000
*                                                                  1324 03856000
*   SGTSTE=NP0SSTE+NP0PTEP;         /* VALIDATE SEG TABLE ENTRY AND     03857000
*                                      PUT IN ADDR OF CURRENT PAGE 1324 03858000
*                                      TABLE                         */ 03859000
         L     @07,NP0SSTE                                         1324 03860000
         AL    @07,NP0PTEP                                         1324 03861000
         ST    @07,SGTSTE(,NP0STEP)                                1324 03862000
*   DO I=(16-NVTLSQNO) TO 1 BY-1;   /* LOOP THRU PAGE TABLE          */ 03863000
         LA    I,16                                                1325 03864000
         SH    I,NVTLSQNO                                          1325 03865000
         B     @DE01325                                            1325 03866000
@DL01325 DS    0H                                                  1326 03867000
*     PGTPTE=NP0SIPTE;              /* SET PAGE TABLE ENTRY INVALID  */ 03868000
         L     @07,NP0PTEP                                         1326 03869000
         MVC   PGTPTE(2,@07),NP0SIPTE                              1326 03870000
*     NP0PTEP=LENGTH(PGTPTE)        /* UPDATE PAGE TABLE ENTRY       */ 03871000
*         +NP0PTEP;                 /* PTR TO NEXT PAGE TABLE ENTRY  */ 03872000
         AL    @07,@CF00082                                        1327 03873000
         ST    @07,NP0PTEP                                         1327 03874000
*   END;                                                           1328 03875000
*                                                                  1328 03876000
         BCTR  I,0                                                 1328 03877000
@DE01325 LTR   I,I                                                 1328 03878000
         BP    @DL01325                                            1328 03879000
*   /*****************************************************************/ 03880000
*   /*                                                               */ 03881000
*   /* WHEN PAGE TABLE ENTRIES FOR NON-LSQA PAGES ARE PROCESSED THIS */ 03882000
*   /* RTN PROCESSES THE REMAINING PAGE TABLE ENTRIES                */ 03883000
*   /*                                                               */ 03884000
*   /*****************************************************************/ 03885000
*                                                                  1329 03886000
*   DO I=NVTLSQNO TO 1 BY-1;        /* LOOP THRU THE REMAINING       */ 03887000
         LH    I,NVTLSQNO                                          1329 03888000
         B     @DE01329                                            1329 03889000
@DL01329 DS    0H                                                  1330 03890000
*     PGTPTE=NP0SPTE                /* PAGE TABLE ENTRIES. SET THE   */ 03891000
*         +NP0FRMNO;                /* ENTRY VALID AND PUT IN THE  1330 03892000
*                                      CURR FRAME NUMBER             */ 03893000
         L     @07,NP0PTEP                                         1330 03894000
         SLR   @04,@04                                             1330 03895000
         ICM   @04,3,NP0FRMNO                                      1330 03896000
         SLR   @02,@02                                             1330 03897000
         ICM   @02,3,NP0SPTE                                       1330 03898000
         ALR   @02,@04                                             1330 03899000
         STH   @02,PGTPTE(,@07)                                    1330 03900000
*     NP0PTEP=LENGTH(PGTPTE)        /* UPDATE PAGE TABLE ENTRY PTR   */ 03901000
*         +NP0PTEP;                 /* TO NEXT PAGE TABLE ENTRY      */ 03902000
         AL    @07,@CF00082                                        1331 03903000
         ST    @07,NP0PTEP                                         1331 03904000
*     NP0FRMNO=16                   /* UPDATE FRAME NUMBER TO THE    */ 03905000
*         +NP0FRMNO;                /* NUMBER CORRES. TO THE NEXT  1332 03906000
*                                      HIGHER FRAME                  */ 03907000
         LA    @04,16(,@04)                                        1332 03908000
         STH   @04,NP0FRMNO                                        1332 03909000
*   END;                                                           1333 03910000
         BCTR  I,0                                                 1333 03911000
@DE01329 LTR   I,I                                                 1333 03912000
         BP    @DL01329                                            1333 03913000
*   NP0STEP=LENGTH(SGTSTE)          /* UPDATE SEG TABLE PTR TO       */ 03914000
*       +NP0STEP;                   /* NEXT SEG TABLE ENTRY          */ 03915000
         AH    NP0STEP,@CH00062                                    1334 03916000
*   NP0SEGAD=65536                  /* UPDATE SEG ADDR TO NEXT       */ 03917000
*       +NP0SEGAD;                  /* HIGHER SEG ADDR.              */ 03918000
*                                                                  1335 03919000
         L     @07,@CF05018                                        1335 03920000
         AL    @07,NP0SEGAD                                        1335 03921000
         ST    @07,NP0SEGAD                                        1335 03922000
*   /*****************************************************************/ 03923000
*   /*                                                               */ 03924000
*   /* THIS RTN PROCESSES THE SEG TABLE ENTRIES BETWEEN THE VIRTUAL  */ 03925000
*   /* LSQA SEG AND THE FIRST (LOW) VIRT SEGMENT CONTAINING SQA PAGES*/ 03926000
*   /*                                                               */ 03927000
*   /*****************************************************************/ 03928000
*                                                                  1336 03929000
*   NP0SQASG=16777216               /* GET VIRT ADDR OF FIRST (LOW)  */ 03930000
*       -(NVTNVSQA                  /* SEG CONTAINING SQA PAGES      */ 03931000
*       *65536);                                                   1336 03932000
         LH    NP0SQASG,NVTNVSQA                                   1336 03933000
         SLA   NP0SQASG,16                                         1336 03934000
         LCR   NP0SQASG,NP0SQASG                                   1336 03935000
         AL    NP0SQASG,@CF05001                                   1336 03936000
*NSTPTB03:                                                         1337 03937000
*   IF NP0SEGAD<NP0SQASG            /* IF CURR SEG IS BELOW THE LOW  */ 03938000
*     THEN                          /* SQA SEGMENT                   */ 03939000
NSTPTB03 L     @07,NP0SEGAD                                        1337 03940000
         CR    @07,NP0SQASG                                        1337 03941000
         BNL   @RF01337                                            1337 03942000
*     DO;                           /* THEN                          */ 03943000
*       SGTSTE=NP0SISTE;            /* SET SEG TABLE ENTRY INVALID   */ 03944000
         MVC   SGTSTE(4,NP0STEP),NP0SISTE                          1339 03945000
*       NP0STEP=LENGTH(SGTSTE)      /* UPDATE SEG TABLE ENTRY        */ 03946000
*           +NP0STEP;               /* POINTER TO NEXT SEG TABLE   1340 03947000
*                                      ENTRY                         */ 03948000
         AH    NP0STEP,@CH00062                                    1340 03949000
*       NP0SEGAD=65536              /* UPDATE SEG ADDR TO NEXT HIGHER*/ 03950000
*           +NP0SEGAD;              /* SEGMENT ADDR.                 */ 03951000
         AL    @07,@CF05018                                        1341 03952000
         ST    @07,NP0SEGAD                                        1341 03953000
*       GOTO NSTPTB03;              /* LOOP UNTIL ALL SEG'S ARE DONE */ 03954000
         B     NSTPTB03                                            1342 03955000
*     END;                                                         1343 03956000
*                                                                  1343 03957000
*   /*****************************************************************/ 03958000
*   /*                                                               */ 03959000
*   /* THIS RTN IS ENTERED WHEN THE FIRST (LOW) VIRT SQA SEG IS      */ 03960000
*   /* REACHED. IT CALCULATES THE SPACE REQ'D TO BUILD THE PAGE      */ 03961000
*   /* TABLES FOR THE SQA SEGMENTS AND ALLOCATES IT                  */ 03962000
*   /*                                                               */ 03963000
*   /*****************************************************************/ 03964000
*                                                                  1344 03965000
*   NP0SPLEN=NVTNVSQA               /* PUT AM'T OF SPACE REQ'D FOR 1344 03966000
*                                      PAGE                          */ 03967000
*       *32;                        /* TABLES FOR SQA SEGMENTS IN  1344 03968000
*                                      TABLE FOR SPACE ALLOC SUBRTN  */ 03969000
@RF01337 LH    @07,NVTNVSQA                                        1344 03970000
         SLA   @07,5                                               1344 03971000
         ST    @07,NP0SPLEN                                        1344 03972000
*   NP0SATBL=ADDR(NP0SPTBL);        /* PUT ADDR OF TABLE IN PARAM  1345 03973000
*                                      AREA                          */ 03974000
         LA    NP0SATBL,NP0SPTBL                                   1345 03975000
*   NP0SAHIR=NP0RSQAV;              /* PUT HI REAL ADDR TO BE USED BY   03976000
*                                      THE SUB RTN IN PARAM AREA     */ 03977000
         L     NP0SAHIR,NP0RSQAV                                   1346 03978000
*   NP0SAHIV=NP0VSQAV;              /* PUT HI VIRT ADDR TO BE USED BY   03979000
*                                      THE SUB-RTN IN PARAM AREA     */ 03980000
         L     NP0SAHIV,NP0VSQAV                                   1347 03981000
*   CALL NSPALLOC;                  /* CALL SPACE ALLOC. SUBROUTINE  */ 03982000
         BAL   @14,NSPALLOC                                        1348 03983000
*   NP0RSQAV=NP0SAHIR;              /* SAVE REAL ADDR OF NEXT LOWER     03984000
*                                      AVAIL BYTE IN SQA             */ 03985000
         ST    NP0SAHIR,NP0RSQAV                                   1349 03986000
*   NP0VSQAV=NP0SAHIV;              /* SAVE VIRT ADDR OF NEXT LOWER     03987000
*                                      AVAIL. BYTE IN SQA            */ 03988000
         ST    NP0SAHIV,NP0VSQAV                                   1350 03989000
*   NP0PTEP=NP0RSQAV;               /* SET PAGE TABLE ENTRY PTR TO 1351 03990000
*                                      FIRST (LOW) ENTRY IN FIRST  1351 03991000
*                                      (LOW) PAGE TABLE FOR SQA      */ 03992000
         L     @07,NP0RSQAV                                        1351 03993000
         ST    @07,NP0PTEP                                         1351 03994000
*   RFY                                                            1352 03995000
*    (SHFTREG) RSTD;                                               1352 03996000
*   SHFTREG=NP0PTEP;                /* PUT PAGE TABLE ADDR IN REG.   */ 03997000
         LR    SHFTREG,@07                                         1353 03998000
*   GEN(SLL     SHFTREG,8);         /* SHIFT OFF HI 8 BITS           */ 03999000
         SLL     SHFTREG,8                                              04000000
*   GEN(SRL     SHFTREG,8);         /* SHIFT IN 8 BITS OF ZERO       */ 04001000
         SRL     SHFTREG,8                                              04002000
*   NP0PTEP=SHFTREG;                /* REPLACE PAGE TABLE ADDR, HI 1356 04003000
*                                      BYTE IS ZERO                  */ 04004000
         ST    SHFTREG,NP0PTEP                                     1356 04005000
*   RFY                                                            1357 04006000
*    (SHFTREG) UNRSTD;                                             1357 04007000
*                                                                  1357 04008000
*   /*****************************************************************/ 04009000
*   /*                                                               */ 04010000
*   /* FOLLOWING RTN SETS SEG TAB ENTRIES FOR THE VIRT SQA SEGMENTS  */ 04011000
*   /* VALID AND SETS THE PAGE TABLE ENTRIES INVALID                 */ 04012000
*   /*                                                               */ 04013000
*   /*****************************************************************/ 04014000
*                                                                  1358 04015000
*   DO I=NVTNVSQA TO 1 BY-1;        /* PROCESS THE SEG AND PAGE TABLE   04016000
*                                      ENTRIES                       */ 04017000
         LH    I,NVTNVSQA                                          1358 04018000
         B     @DE01358                                            1358 04019000
@DL01358 DS    0H                                                  1359 04020000
*     SGTSTE=NP0SSTE                /* SET SEG TAB ENTRY VALID AND 1359 04021000
*                                      PUT                           */ 04022000
*         +NP0PTEP;                 /* IN ADDR. OF CURR. PAGE TABLE  */ 04023000
         L     @07,NP0SSTE                                         1359 04024000
         AL    @07,NP0PTEP                                         1359 04025000
         ST    @07,SGTSTE(,NP0STEP)                                1359 04026000
*     DO J=16 TO 1 BY-1;            /* LOOP THRU THE PAGE TABLE      */ 04027000
         LA    J,16                                                1360 04028000
@DL01360 DS    0H                                                  1361 04029000
*       PGTPTE=NP0SIPTE;            /* SET PAGE TABLE ENTRY INVALID  */ 04030000
         L     @07,NP0PTEP                                         1361 04031000
         MVC   PGTPTE(2,@07),NP0SIPTE                              1361 04032000
*       NP0PTEP=LENGTH(PGTPTE)      /* UPDATE PAGE TABLE ENTRY       */ 04033000
*           +NP0PTEP;               /* PTR TO NEXT PAGE TABLE        */ 04034000
         AL    @07,@CF00082                                        1362 04035000
         ST    @07,NP0PTEP                                         1362 04036000
*     END;                          /* ENTRY                         */ 04037000
         BCTR  J,0                                                 1363 04038000
         LTR   J,J                                                 1363 04039000
         BP    @DL01360                                            1363 04040000
*     NP0STEP=LENGTH(SGTSTE)        /* UPDATE SEG TABLE PTR TO       */ 04041000
*         +NP0STEP;                 /* NEXT HIGHER SEG TABLE ENTRY   */ 04042000
         AH    NP0STEP,@CH00062                                    1364 04043000
*     NP0SEGAD=65536                /* UPDATE SEG ADDR TO NEXT       */ 04044000
*         +NP0SEGAD;                /* HIGHER SEG ADDR.              */ 04045000
         L     @07,@CF05018                                        1365 04046000
         AL    @07,NP0SEGAD                                        1365 04047000
         ST    @07,NP0SEGAD                                        1365 04048000
*   END;                                                           1366 04049000
*                                                                  1366 04050000
         BCTR  I,0                                                 1366 04051000
@DE01358 LTR   I,I                                                 1366 04052000
         BP    @DL01358                                            1366 04053000
*   /*****************************************************************/ 04054000
*   /*                                                               */ 04055000
*   /* THE FOLLOWING RTN WORKS BACK DOWN THE JUST PROCESSED PAGE     */ 04056000
*   /* TABLES VALIDATING THE PAGE TABLE ENTRIES CORRES. TO SQA PAGES */ 04057000
*   /* BACKED UP IN REAL STORAGE                                     */ 04058000
*   /*                                                               */ 04059000
*   /*****************************************************************/ 04060000
*                                                                  1367 04061000
*   RFY                                                            1367 04062000
*     SHFTREG RSTD;                                                1367 04063000
*   SHFTREG=NP0EORM;                /* GET HI REAL ONLINE ADDR       */ 04064000
         L     SHFTREG,NP0EORM                                     1368 04065000
*   GEN(SRL   SHFTREG,12);          /* GENERATE THE FRAME NUMBER OF     04066000
*                                      THE                           */ 04067000
         SRL   SHFTREG,12                                               04068000
*   GEN(SLL   SHFTREG,4);           /* HIGHEST REAL FRAME, ADJUSTED  */ 04069000
         SLL   SHFTREG,4                                                04070000
*   NP0FRMNO=SHFTREG;               /* FOR USE WITH THE SKELETON PAGE   04071000
*                                      TABLE ENTRY                   */ 04072000
         STH   SHFTREG,NP0FRMNO                                    1371 04073000
*   RFY                                                            1372 04074000
*     SHFTREG UNRSTD;                                              1372 04075000
*   NP0PTEP=NP0PTEP                 /* ADJUST PAGE TABLE ENTRY PTR TO*/ 04076000
*       -LENGTH(PGTPTE);            /* LAST (TOP) PAGE TABLE ENTRY IN   04077000
*                                      THE PAGE TABLE FOR THE LAST 1373 04078000
*                                      (TOP) SEGMENT                 */ 04079000
         L     @02,NP0PTEP                                         1373 04080000
         BCTR  @02,0                                               1373 04081000
         BCTR  @02,0                                               1373 04082000
         ST    @02,NP0PTEP                                         1373 04083000
*   DO I=NVTSQANO TO 1 BY-1;        /* LOOP DOWN THRU PAGE TABLE   1374 04084000
*                                      ENTRIES                       */ 04085000
         LH    I,NVTSQANO                                          1374 04086000
         B     @DE01374                                            1374 04087000
@DL01374 DS    0H                                                  1375 04088000
*     PGTPTE=NP0SPTE                /* VALIDATE THE PAGE TABLE ENTRY */ 04089000
*         +NP0FRMNO;                /* AND PUT IN THE NUMBER OF THE     04090000
*                                      CURR FRAME                    */ 04091000
         L     @04,NP0PTEP                                         1375 04092000
         SLR   @02,@02                                             1375 04093000
         ICM   @02,3,NP0FRMNO                                      1375 04094000
         SLR   @15,@15                                             1375 04095000
         ICM   @15,3,NP0SPTE                                       1375 04096000
         ALR   @15,@02                                             1375 04097000
         STH   @15,PGTPTE(,@04)                                    1375 04098000
*     NP0PTEP=NP0PTEP               /* ADJUST PAGE TABLE ENTRY PTR TO*/ 04099000
*         -LENGTH(PGTPTE);          /* NEXT LOWER PAGE TABLE ENTRY   */ 04100000
         BCTR  @04,0                                               1376 04101000
         BCTR  @04,0                                               1376 04102000
         ST    @04,NP0PTEP                                         1376 04103000
*     NP0FRMNO=NP0FRMNO             /* UPDATE FRAME NUMBER TO NEXT   */ 04104000
*         -16;                      /* LOWER FRAME NUMBER            */ 04105000
*                                                                  1377 04106000
         SH    @02,@CH01253                                        1377 04107000
         STH   @02,NP0FRMNO                                        1377 04108000
*     /***************************************************************/ 04109000
*     /*                                                             */ 04110000
*     /* NOTE: THE ABOVE PROCESSING OF THE SEVERAL PAGE TABLES FOR   */ 04111000
*     /* SQA CAN BE DONE IN ONE LOOP BECAUSE THE PAGE TABLES ARE     */ 04112000
*     /* CONTIGUOUS. THEY WERE ALLOCATED THAT WAY BY THE SPACE ALLOC.*/ 04113000
*     /* RTN.                                                        */ 04114000
*     /*                                                             */ 04115000
*     /***************************************************************/ 04116000
*                                                                  1378 04117000
*   END;                                                           1378 04118000
         BCTR  I,0                                                 1378 04119000
@DE01374 LTR   I,I                                                 1378 04120000
         BP    @DL01374                                            1378 04121000
*   RFY                                                            1379 04122000
*    (SGTSTE) BASED(STEPTR);                                       1379 04123000
*   RFY                                                            1380 04124000
*    (PGTPTE) BASED(PTEPTR);                                       1380 04125000
*NP0CLNUP:                          /* CLEAN UP ROUTINE              */ 04126000
*   NP0SQAAV=NP0VSQAV-NP0VSQAP;     /* CALCULATE AMOUNT OF AVAILABLE    04127000
*                                      SQA SPACE (IN VIRTUAL)        */ 04128000
NP0CLNUP L     @15,NP0VSQAV                                        1381 04129000
         LR    NP0SQAAV,@15                                        1381 04130000
         SL    NP0SQAAV,NP0VSQAP                                   1381 04131000
*   NP0SPLEN=LENGTH(FQESECT);       /* PUT LENGTH OF AN FQE IN TABLE    04132000
*                                      FOR SPACE ALLOCATION SUB RTN  */ 04133000
         MVC   NP0SPLEN(4),@CF00068                                1382 04134000
*   NP0SATBL=ADDR(NP0SPTBL);        /* PUT ADDRESS OF TABLE INTO   1383 04135000
*                                      PARAMETER AREA                */ 04136000
         LA    NP0SATBL,NP0SPTBL                                   1383 04137000
*   NP0SAHIR=NP0RSQAV;              /* PUT HIGH REAL ADDRESS TO BE 1384 04138000
*                                      USED INTO PARM AREA           */ 04139000
         L     NP0SAHIR,NP0RSQAV                                   1384 04140000
*   NP0SAHIV=NP0VSQAV;              /* PUT HI VIRTUAL ADDRESS TO BE     04141000
*                                      USED IN PARM AREA             */ 04142000
         LR    NP0SAHIV,@15                                        1385 04143000
*   CALL NSPALLOC;                  /* CALL SPACE ALLOC. SUBROUTINE  */ 04144000
         BAL   @14,NSPALLOC                                        1386 04145000
*   NP0RSQAV=NP0SAHIR;              /* SAVE REAL ADDR. OF NEXT LOWER    04146000
*                                      BYTE IN SQA                   */ 04147000
         ST    NP0SAHIR,NP0RSQAV                                   1387 04148000
*   NP0VSQAV=NP0SAHIV;              /* SAVE VIRT. ADDR. OF NEXT LOWER   04149000
*                                      BYTE IN SQA                   */ 04150000
         ST    NP0SAHIV,NP0VSQAV                                   1388 04151000
*   RFY                                                            1389 04152000
*    (FQESECT) BASED(TBASE);        /* SET BASE REGISTER WITH ADDRESS*/ 04153000
*   TABPTR=ADDR(NP0SPTBL);          /* OF ALLOCATED FQE              */ 04154000
         LA    TABPTR,NP0SPTBL                                     1390 04155000
*   TBASE=NP0RADDR;                                                1391 04156000
         L     TBASE,NP0RADDR(,TABPTR)                             1391 04157000
*   FQELNTH=NP0SQAAV;               /* PUT SIZE OF AVAILABLE AREA  1392 04158000
*                                      (INCLUDING FQE) INTO FQE      */ 04159000
         ST    NP0SQAAV,FQELNTH(,TBASE)                            1392 04160000
*   NFQEPTR=NP0VADDR;               /* SAVE VIRT ADDR OF THE FQE     */ 04161000
         L     NFQEPTR,NP0VADDR(,TABPTR)                           1393 04162000
*   RFY                                                            1394 04163000
*    (FQESECT) BASED(FQESEPTR);                                    1394 04164000
*   RFY                                                            1395 04165000
*    (DQESECT) BASED(TBASE);                                       1395 04166000
*   TABPTR=ADDR(NSQADQE);           /* SET BASE TO TABLE ENTRY FOR 1396 04167000
*                                      DQE FOR SQA                   */ 04168000
         LA    TABPTR,NSQADQE                                      1396 04169000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF THE DQE IN 1397 04170000
*                                      BASE                          */ 04171000
         L     TBASE,NP0RADDR(,TABPTR)                             1397 04172000
*   DQFQEPTR=NFQEPTR;               /* PUT VIRT ADDR OF THE FQE IN 1398 04173000
*                                      DQE                           */ 04174000
         ST    NFQEPTR,DQFQEPTR(,TBASE)                            1398 04175000
*   RFY                                                            1399 04176000
*    (DQESECT) BASED(DQESEPTR);                                    1399 04177000
*   NP0SQAAV=(NP0SQAAV              /* ROUND AMOUNT OF AVAIL SQA   1400 04178000
*                                      SPACE                         */ 04179000
*       /4096)                      /* DOWN TO 4K MULTIPLE           */ 04180000
*       *4096;                                                     1400 04181000
         LR    @04,NP0SQAAV                                        1400 04182000
         SRL   @04,12                                              1400 04183000
         SLA   @04,12                                              1400 04184000
         LR    NP0SQAAV,@04                                        1400 04185000
*   RFY                                                            1401 04186000
*    (GDA) BASED(TBASE);                                           1401 04187000
*   TABPTR=ADDR(NGDA);              /* SET BASE TO TABLE ENTRY FOR 1402 04188000
*                                      GDA                           */ 04189000
         LA    TABPTR,NGDA                                         1402 04190000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF GDA IN BASE  */ 04191000
         L     TBASE,NP0RADDR(,TABPTR)                             1403 04192000
*   SQASPLFT=((NVTNVSQA*16)*4096)-(NVTSQANO*4096);/* PUT AMOUNT OF 1404 04193000
*                                      UN-GETMAINED SPACE IN SQA IN     04194000
*                                      THE GDA. GETMAIN/FREEMAIN NEED   04195000
*                                      THIS                  @YM08114*/ 04196000
         LH    @06,NVTNVSQA                                        1404 04197000
         SLA   @06,16                                              1404 04198000
         LH    @04,NVTSQANO                                        1404 04199000
         SLA   @04,12                                              1404 04200000
         SLR   @06,@04                                             1404 04201000
         ST    @06,SQASPLFT(,TBASE)                                1404 04202000
*                                                                  1405 04203000
*/********************************************************************/ 04204000
*/* CHANNEL AVAILABILITY TABLE (CAT) INITIALIZATION ROUTINE          */ 04205000
*/* THIS ROUTINE WORKS THROUGH THE CAT, IN THE PCCA, AND DETERMINES  */ 04206000
*/* WHICH CHANNELS ARE SYS GEN'D AND, OF THE SYS GEN'D CHANNELS,     */ 04207000
*/* WHICH ARE OPERATIVE.  A 'STIDC' INSTRUCTION IS EXECUTED TO EACH  */ 04208000
*/* OPERATIVE CHANNEL TO TRY TO GET ITS CHANNEL ID WHICH IS PUT IN   */ 04209000
*/* THE CAT ENTRY CORRESPONDING TO THE CHANNEL IF THE INSTRUCTION IS */ 04210000
*/* SUCCESSFUL.                                                      */ 04211000
*/********************************************************************/ 04212000
*                                                                  1405 04213000
*   RFY                                                            1405 04214000
*    (PCCA) BASED(TBASE);                                          1405 04215000
*   TABPTR=ADDR(NPCCA);             /* PUT ADDR. OF TABLE ENTRY FOR     04216000
*                                      THE PCCA IN BASE OF MAP OF A     04217000
*                                      TABLE ENTRY.                  */ 04218000
         LA    TABPTR,NPCCA                                        1406 04219000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR. OF PCCA FOR IPL   04220000
*                                      CPU IN TEMP. BASE FOR MAP OF     04221000
*                                      THE PCCA.                     */ 04222000
         L     TBASE,NP0RADDR(,TABPTR)                             1407 04223000
*   NPCURCHA=NPCURCHA               /* SET CURR. CHAN. ADDR. FIELD TO*/ 04224000
*       &&NPCURCHA;                 /* ZERO                          */ 04225000
         L     @04,NPCURCHA                                        1408 04226000
         LR    @15,@04                                             1408 04227000
         XR    @15,@04                                             1408 04228000
         ST    @15,NPCURCHA                                        1408 04229000
*   CATPTR=ADDR(PCCACAT);           /* PUT REAL ADDR. OF CAT IN BASE    04230000
*                                      FOR MAP OF A CAT ENTRY.       */ 04231000
         LA    CATPTR,PCCACAT(,TBASE)                              1409 04232000
*   IONSAVE=FLCINPSW;               /* SAVE I/O NEW PSW TO RESTORE 1410 04233000
*                                      AFTER CAT TABLE INIT ROUTINE     04234000
*                                      HAS COMPLETED PROCESSING.   1410 04235000
*                                                            @YM03538*/ 04236000
         L     @04,NPSAPTR                                         1410 04237000
         MVC   IONSAVE(8),FLCINPSW(@04)                            1410 04238000
*   PCCAIO=NOIO;                    /* THE CPU HAS NO        @G47AN2O   04239000
*                                      CHANNELS VARIED       @G47AN2O   04240000
*                                      ONLINE, YET           @G47AN2O*/ 04241000
         NI    PCCAIO(TBASE),B'10111111'                           1411 04242000
*NPCHCHK1:                                                         1412 04243000
*   IF NPCURCHA>15 THEN             /* CHECK IF ALL CHANNELS HAVE  1412 04244000
*                                      BEEN PROCESSED        @YM03538*/ 04245000
NPCHCHK1 L     @04,NPCURCHA                                        1412 04246000
         CH    @04,@CH00123                                        1412 04247000
         BNH   @RF01412                                            1412 04248000
*     DO;                           /* IF THEY HAVE          @YM03538*/ 04249000
*       FLCINPSW=IONSAVE;           /* RESTORE I/O NEW PSW.  @YM03538*/ 04250000
         L     @02,NPSAPTR                                         1414 04251000
         MVC   FLCINPSW(8,@02),IONSAVE                             1414 04252000
*       GOTO NP0RELOC;              /* GO TO NEXT ROUTINE            */ 04253000
         B     NP0RELOC                                            1415 04254000
*     END;                          /*                       @YM03538*/ 04255000
*   RFY                                                            1417 04256000
*    (IOCOM) BASED(CVTIXAVL);                                      1417 04257000
@RF01412 DS    0H                                                  1418 04258000
*   RFY                                                            1418 04259000
*    (IOCX) BASED(IOCOMEX);                                        1418 04260000
*   IF NPCURCHA>IOXHICH             /* IF NOT, CHECK IF CURR. CHAN 1419 04261000
*                                      ADDR. IS GREATER THAN HI SYS     04262000
*                                      GEN'D CHAN. ADDR.             */ 04263000
*     THEN                          /* IF SO, THEN                   */ 04264000
         L     @04,CVTIXAVL(,RCVT)                                 1419 04265000
         L     @04,IOCOMEX(,@04)                                   1419 04266000
         L     @15,NPCURCHA                                        1419 04267000
         SLR   @14,@14                                             1419 04268000
         IC    @14,IOXHICH(,@04)                                   1419 04269000
         CR    @15,@14                                             1419 04270000
         BNH   @RF01419                                            1419 04271000
*     DO;                                                          1420 04272000
*       CATNGEN='1'B;               /* TURN ON 'NOT SYS GEN'D' FLAG     04273000
*                                      IN CAT ENTRY CORRES. TO CURR     04274000
*                                      CHAN                          */ 04275000
*       CATNOP='1'B;                /* MARK CHAN INOPERATIVE @YM03538*/ 04276000
*       CATNID='1'B;                /* MARK CHAN ID INVALID  @YM03538*/ 04277000
         OI    CATNGEN(CATPTR),B'01101000'                         1423 04278000
*       GOTO NPUPDAT1;              /* GO TO ROUTINE TO UPDATE     1424 04279000
*                                      POINTERS TO NEXT CHANNEL      */ 04280000
         B     NPUPDAT1                                            1424 04281000
*     END;                                                         1425 04282000
*   RFY                                                            1426 04283000
*    (IOCOM) BASED(IOCOMPTR);                                      1426 04284000
@RF01419 DS    0H                                                  1427 04285000
*   RFY                                                            1427 04286000
*    (IOCX) BASED(IOCXPTR);                                        1427 04287000
*   TCHADR=NPCURCHA;                /* IF CURR. CHAN. ADDR. IS NOT 1428 04288000
*                                      GREATER THAN HI SYS GEN'D   1428 04289000
*                                      CHAN. ADDR., THEN PUT CURR  1428 04290000
*                                      CHAN. ADDR. IN WORKAREA       */ 04291000
         L     @07,NPCURCHA                                        1428 04292000
         ST    @07,TCHADR                                          1428 04293000
*   TCHTARG=(TCHADR*256);           /* MOVE CURR. CHAN. ADDR. INTO 1429 04294000
*                                      ANOTHER WORKAREA SO CHAN ADDR.   04295000
*                                      IS IN BITS 16-23 OF OPERAND OF   04296000
*                                      'TCH' INSTRUCTION.    @YM03538*/ 04297000
         SLA   @07,8                                               1429 04298000
         LR    TCHTARG,@07                                         1429 04299000
*   NTCHLPCT=50;                    /* SET UP A LOOP COUNTER IN CASE    04300000
*                                      COND. CODE IS 2 (BUSY)        */ 04301000
         LA    NTCHLPCT,50                                         1430 04302000
*NPTCHAN1:                                                         1431 04303000
*   TCH(TCHTARG);                   /* EXEC. 'TCH' INSTR. TO CURR  1431 04304000
*                                      CHAN TO SEE IF IT IS OPERATIVE*/ 04305000
NPTCHAN1 TCH   0(TCHTARG)                                          1431 04306000
*   BC(2,NTCHLCK1);                 /* IF COND. CODE IS 2 (BUSY), GO    04307000
*                                      TO RTN. TO TRY AGAIN          */ 04308000
         BC    2,NTCHLCK1                                          1432 04309000
*   BC(1,NPCHNIO1);                 /* IF COND. CODE IS THREE, GO TO    04310000
*                                      RTN. TO MARK CHAN. INOPERATIVE*/ 04311000
         BC    1,NPCHNIO1                                          1433 04312000
*   RFY                                                            1434 04313000
*    (CHANREG) RSTD;                                               1434 04314000
*                                                                  1434 04315000
*   /*****************************************************************/ 04316000
*   /*                                                               */ 04317000
*   /* THE I/O NEW WILL BE SET TO POINT HERE IN THE EVENT THERE ARE  */ 04318000
*   /* ANY INTERRUPTS PENDING TO BE FLUSHED.                 @YM03538*/ 04319000
*   /*                                                               */ 04320000
*   /*****************************************************************/ 04321000
*                                                                  1435 04322000
*STCHANID:                          /*                       @YM03538*/ 04323000
*   CHANREG=TCHTARG;                /* PUT CHAN ADDR. IN REG         */ 04324000
STCHANID LR    CHANREG,TCHTARG                                     1435 04325000
*   GEN(STIDC     0(CHANREG));      /* IF COND. CODE AFTER 'TCH' IS     04326000
*                                      ZERO OR ONE, EXEC. 'STIDC'  1436 04327000
*                                      INSTR. TO THE SAME CHAN. TO 1436 04328000
*                                      TRY TO GET THE CHANNEL ID.    */ 04329000
         STIDC     0(CHANREG)                                           04330000
*   RFY                                                            1437 04331000
*    (CHANREG) UNRSTD;                                             1437 04332000
*   BC(1,NPIDINV1);                 /* IF COND. CODE IS THREE, GO TO    04333000
*                                      RTN. TO SET 'ID INVALID' FLAG    04334000
*                                      IN CAT ENTRY CORRES. TO CURR     04335000
*                                      CHANNEL.              @YM03538*/ 04336000
         BC    1,NPIDINV1                                          1438 04337000
*   BC(6,ENABLEIO);                 /* CONDITION CODE 1 OR 2, ENABLE    04338000
*                                      FOR ANY I/O INTERRUPTS THAT 1439 04339000
*                                      ARE PENDING.          @YM03538*/ 04340000
         BC    6,ENABLEIO                                          1439 04341000
*   CATCHID=FLCCHNID;               /* IF COND. CODE IS ZERO, MOVE 1440 04342000
*                                      CHAN. ID FROM PSA FIELD (LOC     04343000
*                                      168 DEC) TO CAT ENTRY.        */ 04344000
         L     @04,NPSAPTR                                         1440 04345000
         MVC   CATCHID(4,CATPTR),FLCCHNID(@04)                     1440 04346000
*   PCCAIO=HASIO;                   /* THIS CPU HAS          @G47AN2O   04347000
*                                      AT LEAST 1 CHANNEL    @G47AN2O   04348000
*                                      ONLINE                @G47AN2O*/ 04349000
         OI    PCCAIO(TBASE),B'01000000'                           1441 04350000
*NPUPDAT1:                                                         1442 04351000
*   NPCURCHA=NPCURCHA               /* UPDATE CHAN. ADDR. TO NEXT    */ 04352000
*       +1;                         /* CHANNEL                       */ 04353000
NPUPDAT1 LA    @04,1                                               1442 04354000
         AL    @04,NPCURCHA                                        1442 04355000
         ST    @04,NPCURCHA                                        1442 04356000
*   CATPTR=CATPTR                   /* UPDATE BASE FOR MAP OF CAT    */ 04357000
*       +LENGTH(CAT);               /* ENTRY TO ADDR. OF NEXT ENTRY  */ 04358000
         AL    CATPTR,@CF00068                                     1443 04359000
*   GOTO NPCHCHK1;                  /* GO TO RTN. TO PROCESS THIS  1444 04360000
*                                      CHANNEL                       */ 04361000
         B     NPCHCHK1                                            1444 04362000
*NTCHLCK1:                          /* COME HERE IF COND. CODE AFTER    04363000
*                                      'TCH' INSTR. IS 2 (BUSY)      */ 04364000
*   NTCHLPCT=NTCHLPCT               /* DECREMENT 'TCH' LOOP COUNTER     04365000
*                                      BY                            */ 04366000
*       -1;                         /* ONE                           */ 04367000
NTCHLCK1 BCTR  NTCHLPCT,0                                          1445 04368000
*   IF NTCHLPCT>0                   /* CHECK IF COUNTER IS GREATER 1446 04369000
*                                      THAN ZERO                     */ 04370000
*     THEN                          /* IF SO,                        */ 04371000
         LTR   NTCHLPCT,NTCHLPCT                                   1446 04372000
         BP    @RT01446                                            1446 04373000
*     GOTO NPTCHAN1;                /* KEEP TRYING ON THIS CHANNEL   */ 04374000
*   ELSE                            /* IF COUNTER IS NOT GREATER THAN   04375000
*                                      ZERO                          */ 04376000
*     GOTO NPCHNIO1;                /* GO TO RTN. TO MARK THIS CHAN.    04377000
*                                      IN-OPERATIVE                  */ 04378000
         B     NPCHNIO1                                            1448 04379000
*NPCHNIO1:                          /* COME HERE TO MARK A CHAN. IN-    04380000
*                                      OPERATIVE                     */ 04381000
*   CATNOP='1'B;                    /* TURN ON 'IN-OPERATIVE' FLAG IN   04382000
*                                      CAT ENTRY CORRES. TO CURR CHAN*/ 04383000
NPCHNIO1 OI    CATNOP(CATPTR),B'01000000'                          1449 04384000
*   GOTO NPIDINV1;                  /* GO MARK CHAN ID INVALID     1450 04385000
*                                                            @YM03538*/ 04386000
*                                                                  1450 04387000
         B     NPIDINV1                                            1450 04388000
*   /*****************************************************************/ 04389000
*   /*                                                               */ 04390000
*   /* A CONDITION CODE 1 OR 2 WAS RECEIVED FROM STIDC INSTRUCTION.  */ 04391000
*   /* WE MUST ENABLE FOR I/O INTERRUPTIONS TO FLUSH OUT ANY PENDING */ 04392000
*   /* INTERRUPTS IN THE CHANNEL. THIS WILL THEN PERMIT THE STIDC TO */ 04393000
*   /* EXECUTE SUCCESSFULLY.                                 @YM03538*/ 04394000
*   /*                                                               */ 04395000
*   /*****************************************************************/ 04396000
*                                                                  1451 04397000
*ENABLEIO:                          /*                       @YM03538*/ 04398000
*   IOFLUSH=ADDR(STCHANID);         /* SET I/O NEW TO STIDC  @YM03538*/ 04399000
ENABLEIO L     @04,NPSAPTR                                         1451 04400000
         LA    @15,STCHANID                                        1451 04401000
         ST    @15,IOFLUSH(,@04)                                   1451 04402000
*   BCMODE=0;                       /* SET BC MODE FOR I/O INTERRUPT    04403000
*                                                            @YM03538*/ 04404000
         MVI   BCMODE(@04),X'00'                                   1452 04405000
*   RFY                                                            1453 04406000
*    (CHANREG) RSTD;                /* RESTRICT REG 4        @YM03538*/ 04407000
*   CHANREG=ADDR(FLCINPSW);         /* POINT TO I/O NEW MASK @YM03538*/ 04408000
*                                                                  1454 04409000
         L     @15,NPSAPTR                                         1454 04410000
         LA    CHANREG,FLCINPSW(,@15)                              1454 04411000
*   /*****************************************************************/ 04412000
*   /*                                                               */ 04413000
*   /* PLACE CURRENT MASK INTO I/O NEW AND ENABLE FOR I/O INTERRUPTS.*/ 04414000
*   /* BY STORING THE CURRENT MASK INTO THE I/O NEW PSW IF AN        */ 04415000
*   /* INTERRUPT IS TAKEN, WE WILL AGAIN BE DISABLED.        @YM03538*/ 04416000
*   /*                                                               */ 04417000
*   /*****************************************************************/ 04418000
*                                                                  1455 04419000
*   GEN(STOSM 0(CHANREG),X'FE');    /* ENABLE I/O AND SET THE I/O NEW   04420000
*                                      PSW DISABLED.         @YM03538*/ 04421000
*                                                                  1455 04422000
         STOSM 0(CHANREG),X'FE'                                         04423000
*   /*****************************************************************/ 04424000
*   /*                                                               */ 04425000
*   /* IF ANY I/O INTERRUPTS ARE PENDING THEN THEY WILL BE TAKEN HERE*/ 04426000
*   /* AND THE FOLLOWING INSTRUCTION WILL NOT BE EXECUTED. IF THE    */ 04427000
*   /* STIDC CONDITION CODE 1 OR 2 WAS NOT CAUSED BY A PENDING       */ 04428000
*   /* INTERRUPT THEN THE NEXT INSTRUCTION WILL DISABLE AGAIN AND THE*/ 04429000
*   /* CHANNEL ID MARKED INVALID IN THE CAT TABLE. IF AN INTERRUPT IS*/ 04430000
*   /* TAKEN, THE I/O NEW WILL CAUSE THE STIDC TO BE RETRIED, AND    */ 04431000
*   /* PROCESSING CONTINUED.                                 @YM03538*/ 04432000
*   /*                                                               */ 04433000
*   /*****************************************************************/ 04434000
*                                                                  1456 04435000
*   GEN(STNSM 0(CHANREG),X'00');    /* DISABLE I/O           @YM03538*/ 04436000
         STNSM 0(CHANREG),X'00'                                         04437000
*   RFY                                                            1457 04438000
*    (CHANREG) UNRSTD;              /* FREE R4 FOR USE       @YM03538*/ 04439000
*NPIDINV1:                          /* COME HERE TO MARK A CHANNEL'S    04440000
*                                      ID AS BEING INVALID           */ 04441000
*   CATNID='1'B;                    /* TURN ON 'ID INVALID' FLAG IN     04442000
*                                      CAT ENTRY CORRES. TO CURR CHAN*/ 04443000
NPIDINV1 OI    CATNID(CATPTR),B'00001000'                          1458 04444000
*   GOTO NPUPDAT1;                  /* GO TO RTN. TO UPDATE POINTERS    04445000
*                                      TO NEXT CHANNEL               */ 04446000
         B     NPUPDAT1                                            1459 04447000
*NP0RELOC:                          /* PREPARE FOR RELOCATE MODE     */ 04448000
*                                                                  1460 04449000
*   /*****************************************************************/ 04450000
*   /*                                                               */ 04451000
*   /* THIS RTN. PERFORMS THE FINAL PREPARATIONS NECESSARY BEFORE    */ 04452000
*   /* PUTTING THE SYSTEM IN RELOCATE MODE. DAT ON, ADDR XLATION NOW */ 04453000
*   /* POSSIBLE. FIRST, TRAP MALFUNCTION ALERTS. REPLACE THE ADDRESS */ 04454000
*   /* THAT THE EXTERNAL FIRST LEVEL INTERRUPT HANDLER (FLIH)        */ 04455000
*   /* BRANCHES TO WHEN IT DETECTS THAT AN EXTERNAL INTERRUPT IS A   */ 04456000
*   /* MFA.                                                          */ 04457000
*   /*                                                               */ 04458000
*   /*****************************************************************/ 04459000
*                                                                  1460 04460000
*   NVTMFASA=NP0SMFA;               /* MOVE ADDR. OF SYSTEM MAL-   1460 04461000
*                                      FUNCTION ALERT RTN TO SAVEAREA*/ 04462000
NP0RELOC L     @06,NP0SMFAP                                        1460 04463000
         MVC   NVTMFASA(4),NP0SMFA(@06)                            1460 04464000
*   NP0SMFA=ADDR(NIP0MFAT);         /* PUT ADDR OF NIP0 MFA TRAP IN     04465000
*                                      POINTER TO MFA RTN            */ 04466000
         L     @15,@CA05166                                        1461 04467000
         ST    @15,NP0SMFA(,@06)                                   1461 04468000
*/********************************************************************/ 04469000
*/* INITIALIZATION OF CONTROL REGISTERS  0, 1, AND 14                */ 04470000
*/* CONTROL REGISTERS 0, 1, AND 14 ARE SET TO THE FOLLOWING VALUES   */ 04471000
*/*                                                                  */ 04472000
*/*    REG     BITS    VALUE            MEANING                      */ 04473000
*/*     0       0        1        BLOCK MULTIPLEX - ENABLED          */ 04474000
*/*     0       1        1        SSM INTERRUPTS - ENABLED           */ 04475000
*/*     0       2        0        TOD CLOCK SYNCHRONIZATION          */ 04476000
*/*                               - DISABLED                         */ 04477000
*/*     0       8-9      10       PAGE SIZE - 4K                     */ 04478000
*/*     0       10       0        UN-DEFINED                         */ 04479000
*/*     0      11-12     00       SEGMENT SIZE - 64K                 */ 04480000
*/*     0       16       1        MAL-FUNCTION ALERT - ENABLED       */ 04481000
*/*     0       17       1        EMERGENCY SIGNAL - ENABLED         */ 04482000
*/*     0       18       1        EXTERNAL CALL - ENABLED            */ 04483000
*/*     0       19       0        TOD CLOCK SYNCHRONIZATION CHECKS   */ 04484000
*/*                               - DISABLED                         */ 04485000
*/*     0       20       1        CLOCK COMPARATOR - ENABLED         */ 04486000
*/*     0       21       1        CPU TIMER - ENABLED                */ 04487000
*/*     0       24       0        LOC'N 80 TIMER - DISABLED          */ 04488000
*/*     0       26       0        EXTERNAL SIGNAL - DISABLED         */ 04489000
*/*     1      0-7     '0F'X      SEGMENT TABLE LENGTH CODE          */ 04490000
*/*     1      8-25               REAL ADDRESS OF SEGMENT TABLE      */ 04491000
*/*                               (MUST BE ON 64-BYTE BOUNDARY)      */ 04492000
*/*     1     26-31      0        UN-DEFINED                         */ 04493000
*/*     14      6        1        EXTERNAL DAMAGE REPORTS - ENABLED  */ 04494000
*/*                                                                  */ 04495000
*/* NOTE: ANY BITS NOT SPECIFICALLY MENTIONED ABOVE ARE LEFT AS THEY */ 04496000
*/* WERE INITIALIZED BY THE HARDWARE WHEN THE 'LOAD' BUTTON WAS      */ 04497000
*/* PUSHED                                                           */ 04498000
*/*                                                                  */ 04499000
*/********************************************************************/ 04500000
*                                                                  1462 04501000
*   GEN(STCTL   0,1,NP0CTLRG);      /* STORE CREG'S 0,1 IN A WORKAREA*/ 04502000
         STCTL   0,1,NP0CTLRG                                           04503000
*   GEN(STCTL   14,14,NP0CRG14);    /* STORE CREG 14 IN A WORKAREA   */ 04504000
         STCTL   14,14,NP0CRG14                                         04505000
*   NP0CRG0=NP0CRG0                 /* SET BITS 0,1,8,16,17,18,20 AND*/ 04506000
*       |'C080EC00'X;               /* 21 TO 1 IN CREG 0             */ 04507000
         OC    NP0CRG0(4),@CB05167                                 1464 04508000
*   NP0CRG0=NP0CRG0                 /* SET BITS                    1465 04509000
*                                      2,9,10,11,12,19,24,AND        */ 04510000
*       &'DF87EF5F'X;               /* 26 TO 0 IN CREG 0             */ 04511000
         NC    NP0CRG0(4),@CB05168                                 1465 04512000
*   NPCR1LOB=NP0R1B3;               /* MOVE LOW ORDER BYTE OF CREG1     04513000
*                                      TO SAVE AREA                  */ 04514000
         MVC   NPCR1LOB(1),NP0R1B3                                 1466 04515000
*   TABPTR=ADDR(NSEGTAB);           /* SET BASE TO TABLE ENTRY FOR 1467 04516000
*                                      SEGMENT TABLE                 */ 04517000
         LA    TABPTR,NSEGTAB                                      1467 04518000
*   NP0CRG1=NP0RADDR                /* OR TOGETHER REAL ADDR. OF SEG.*/ 04519000
*       |NPCR1LOB;                  /* TABLE AND ORIGINAL LOW ORDER     04520000
*                                      BYTE                          */ 04521000
         SLR   @06,@06                                             1468 04522000
         IC    @06,NPCR1LOB                                        1468 04523000
         O     @06,NP0RADDR(,TABPTR)                               1468 04524000
         ST    @06,NP0CRG1                                         1468 04525000
*   NP0R1B0=15;                     /* PUT SEG. TABLE LENGTH CODE IN    04526000
*                                      HI ORDER BYTE OF CREG 1       */ 04527000
         MVI   NP0R1B0,X'0F'                                       1469 04528000
*   NP0CRG14=NP0CRG14               /* SET BIT 6 TO 1 IN CREG 14     */ 04529000
*       |'02000000'X;                                              1470 04530000
         OC    NP0CRG14(4),@CB05169                                1470 04531000
*   GEN(LCTL   0,1,NP0CTLRG);       /* LOAD CREG'S 0,1 FROM WORK AREA*/ 04532000
         LCTL   0,1,NP0CTLRG                                            04533000
*   GEN(LCTL   14,14,NP0CRG14);     /* LOAD CREG 14 FROM WORK AREA   */ 04534000
         LCTL   14,14,NP0CRG14                                          04535000
*   RFY                                                            1473 04536000
*    (ASCB) BASED(TBASE);                                          1473 04537000
*   TBASE=NVTMASCB;                 /* PICK UP ADDR. OF M.S. ASCB    */ 04538000
         L     TBASE,NVTMASCB                                      1474 04539000
*   ASCBSTOR=NP0CRG1;               /* PUT CREG 1 IN M.S. ASCB       */ 04540000
         L     @06,NP0CRG1                                         1475 04541000
         ST    @06,ASCBSTOR(,TBASE)                                1475 04542000
*   RFY                                                            1476 04543000
*    (ASCB) BASED(NP0WASCB);        /* BASE THE MAP OF ASCB ON ADDR.    04544000
*                                      OF SYS. WAIT STATE TASK       */ 04545000
*   ASCBSTOR=NP0CRG1;               /* PUT CREG1 IN THAT ASCB - THIS    04546000
*                                      IS NEEDED BY IOS 'TRANSFER  1477 04547000
*                                      ADDR. SPACE' FUNCTION.        */ 04548000
         L     @01,NP0WASCB                                        1477 04549000
         ST    @06,ASCBSTOR(,@01)                                  1477 04550000
*   RFY                                                            1478 04551000
*    (ASCB) BASED(ASCBPTR);                                        1478 04552000
*   TABPTR=ADDR(NLCCA);             /* SET BASE TO TABLE ENTRY FOR 1479 04553000
*                                      LCCA                          */ 04554000
         LA    TABPTR,NLCCA                                        1479 04555000
*   TBASE=NP0RADDR;                 /* PUT REAL ADDR OF LCCA IN BASE */ 04556000
         L     TBASE,NP0RADDR(,TABPTR)                             1480 04557000
*   RFY                                                            1481 04558000
*    (LCCA) BASED(TBASE);                                          1481 04559000
*   LCCAMCR1=NP0CRG1;               /* PUT CREG 1 IN LCCA FOR IPL CPU*/ 04560000
         ST    @06,LCCAMCR1(,TBASE)                                1482 04561000
*   RFY                                                            1483 04562000
*    (LCCA) BASED(LCCAPTR);                                        1483 04563000
*   PSASTOR=NP0CRG1;                /* PUT CREG 1 IN PSA FOR IPL CPU */ 04564000
*                                                                  1484 04565000
         L     @02,NPSAPTR                                         1484 04566000
         ST    @06,PSASTOR(,@02)                                   1484 04567000
*   /*****************************************************************/ 04568000
*   /*                                                               */ 04569000
*   /* TRAP MACHINE CHECKS ON THE IPL CPU. THIS IS DONE BECAUSE THE  */ 04570000
*   /* MACH. CHECK FLIH IS NOT INITIALIZED YET. UNTIL NOW IN THE NIP */ 04571000
*   /* PROCESS, MACH. CHECKS HAVE BEEN DISABLED, WITH THE LOADING OF */ 04572000
*   /* THE EC-MODE PSW, MACH. CHECKS WILL BE ENABLED. THUS IEAVNIP0  */ 04573000
*   /* MUST TRAP ANY MACH. CHECKS THAT MIGHT HAPPEN.                 */ 04574000
*   /*                                                               */ 04575000
*   /*****************************************************************/ 04576000
*                                                                  1485 04577000
*   RFY                                                            1485 04578000
*    (PSA) BASED(NPSAPTR);                                         1485 04579000
*   NVTMCPSW=FLCMNPSW;              /* SAVE SYS. GEN'D MACH. CHECK 1486 04580000
*                                      NEW PSW IN THE NVT.           */ 04581000
         MVC   NVTMCPSW(8),FLCMNPSW(@02)                           1486 04582000
*/* NOTE: IEAVNIP0 WILL NOT RESTORE THIS PSW, IEAVNIPM WILL          */ 04583000
*                                                                  1487 04584000
*   FLCMNPSW=NPMCNPSW;              /* REPLACE IT WITH A MACH. CHECK    04585000
*                                      NEW PSW POINTING TO IEAVNIP0'S   04586000
*                                      MACHINE CHECK TRAP.           */ 04587000
         MVC   FLCMNPSW(8,@02),NPMCNPSW                            1487 04588000
*NPRELOC1:                                                         1488 04589000
*   LPSW(NPDECPSW);                 /* LOAD DISABLED EC-MODE PSW   1488 04590000
*                                      MACH. CHECKS ENABLED, THOUGH  */ 04591000
*                                                                  1488 04592000
NPRELOC1 LPSW  NPDECPSW                                            1488 04593000
*   /*****************************************************************/ 04594000
*   /*                                                               */ 04595000
*   /* FORMAT CPU RELATED SAVE AREA IN SQA FOR THIS CPU              */ 04596000
*   /*                                                               */ 04597000
*   /*****************************************************************/ 04598000
*                                                                  1489 04599000
*   TABPTR=ADDR(NPCPUS);            /* POINT TO TABLE        @ZM30488*/ 04600000
         LA    TABPTR,NPCPUS                                       1489 04601000
*   REG1=-NP0VADDR;                 /* SET UP COMPLEMENT ADDR      1490 04602000
*                                                            @ZM30488*/ 04603000
         L     REG1,NP0VADDR(,TABPTR)                              1490 04604000
         LCR   REG1,REG1                                           1490 04605000
*   CALL IEAVSPSA;                  /* GO FORMAT TABLE       @ZM30488*/ 04606000
*                                                                  1491 04607000
         BAL   @14,IEAVSPSA                                        1491 04608000
*   /*****************************************************************/ 04609000
*   /*                                                               */ 04610000
*   /* PUT ADDR IN LCCA                                              */ 04611000
*   /*                                                               */ 04612000
*   /*****************************************************************/ 04613000
*                                                                  1492 04614000
*   PSALCCAV->LCCACPUS=NP0VADDR;    /* CHAIN OUT OF LCCA     @ZM30488*/ 04615000
*                                                                  1492 04616000
         L     @06,NPSAPTR                                         1492 04617000
         L     @01,PSALCCAV(,@06)                                  1492 04618000
         MVC   LCCACPUS(4,@01),NP0VADDR(TABPTR)                    1492 04619000
*   /*****************************************************************/ 04620000
*   /*                                                               */ 04621000
*   /* TRAP REQUESTS FOR SVC 13 BY REPLACING THE SVC 13 ENTRY IN SVC */ 04622000
*   /* TABLE WITH AN ENTRY POINTING TO A NIP0 ROUTINE                */ 04623000
*   /*                                                               */ 04624000
*   /*****************************************************************/ 04625000
*                                                                  1493 04626000
*   RFY                                                            1493 04627000
*    (SVCENTRY) BASED(NP0SVCBA);                                   1493 04628000
*   NP0SVCBA=NVTSVCTB               /* SET BASE TO ADDR OF SVC TABLE */ 04629000
*       +(13                        /* ENTRY FOR SVC 13              */ 04630000
*       *LENGTH(SVCENTRY));                                        1494 04631000
         LA    NP0SVCBA,104                                        1494 04632000
         AL    NP0SVCBA,NVTSVCTB                                   1494 04633000
*   NVTABSAV=SVCENTRY;              /* MOVE SVC 13 ENTRY TO SAVE AREA*/ 04634000
         MVC   NVTABSAV(8),SVCENTRY(NP0SVCBA)                      1495 04635000
*   SVCEP=ADDR(NIPABEND);           /* RE SET ROUTINE ADDR TO POINT     04636000
*                                      TO NIP ROUTINE                */ 04637000
         LA    @07,NIPABEND                                        1496 04638000
         ST    @07,SVCEP(,NP0SVCBA)                                1496 04639000
*   SVCATTR1=SVCATTR1               /* CLEAR FIRST ATTRIBUTES FIELD     04640000
*                                      TO                            */ 04641000
*       &&SVCATTR1;                 /* ZEROS. FIRST ATTRIBUTE FIELD     04642000
*                                      NOW DESCRIBES AN UNAUTHORIZED,   04643000
*                                      TYPE I SVC                    */ 04644000
         XC    SVCATTR1(2,NP0SVCBA),SVCATTR1(NP0SVCBA)             1497 04645000
*   SVCATTR2=SVCATTR2               /* CLEAR SECOND ATTRIBUTES FIELD */ 04646000
*       &&SVCATTR2;                 /* TO ZEROS                      */ 04647000
         XC    SVCATTR2(2,NP0SVCBA),SVCATTR2(NP0SVCBA)             1498 04648000
*   SVCLL='1'B;                     /* TURN ON LOCAL LOCK FLAG, THE     04649000
*                                      SVC ENTRY NOW DESCRIBES A TYPE   04650000
*                                      1 SVC, UNAUTHORIZED, AND    1499 04651000
*                                      REQUIRING ONLY THE LOCAL LOCK.*/ 04652000
         OI    SVCLL(NP0SVCBA),B'10000000'                         1499 04653000
*/* TURN OFF WAIT BIT IN SAVED, SYS GEN'D PROG. CHECK NEW PSW        */ 04654000
*/* AND RESTORE IT.  FROM HERE ON, IF AN UNEXPECTED PROG. CHECK      */ 04655000
*/* OCCURS, LET THE ABEND TRAP HANDLE IT                             */ 04656000
*                                                                  1500 04657000
*   RFY                                                            1500 04658000
*    (PSA) BASED(NPSAPTR);                                         1500 04659000
*   PCPSWWT='0'B;                   /* TURN OFF THE WAIT BIT         */ 04660000
         NI    PCPSWWT,B'11111101'                                 1501 04661000
*   FLCPNPSW=NP0SPCSA;              /* RESTORE THE SYS GEN'D PSW     */ 04662000
         MVC   FLCPNPSW(8,@06),NP0SPCSA                            1502 04663000
*   IF NVTMP='1'B                   /* CHECK IF THIS IS AN M.P.    1503 04664000
*                                      CONFIG.                       */ 04665000
*     THEN                          /* IF IT IS, THEN                */ 04666000
         TM    NVTMP,B'00100000'                                   1503 04667000
         BNO   @RF01503                                            1503 04668000
*/*                                                            Y02751*/ 04669000
*                                                                  1504 04670000
*     DO;                                                          1504 04671000
*                                                                  1504 04672000
*/*                                                            Y02751*/ 04673000
*                                                                  1505 04674000
*       RFY                                                        1505 04675000
*        (PSA) BASED(NP0PSASA);     /* BASE MAPPING OF PSA ON ADDR OF   04676000
*                                      'CLEAN' PSA IN SAVE AREA ABOVE   04677000
*                                      THE NUCLEUS.                  */ 04678000
*/*                                                            Y02751*/ 04679000
*                                                                  1506 04680000
*       FLCPNPSW=NP0SPCSA;          /* RESTORE THE PSW IN THIS     1506 04681000
*                                      'CLEAN' PSA ALSO              */ 04682000
         L     @02,NP0PSASA                                        1506 04683000
         MVC   FLCPNPSW(8,@02),NP0SPCSA                            1506 04684000
*       PSASTOR=NP0CRG1;            /* PUT STOR (CONT REG 1) INTO  1507 04685000
*                                      SYSGENNED PSA. INSURE THAT  1507 04686000
*                                      PSASTOR WILL ALWAYS GET     1507 04687000
*                                      REFRESHED WHEN SYSGENNED COPY    04688000
*                                      IS MOVED TO 0-4K.     @YM03234*/ 04689000
         MVC   PSASTOR(4,@02),NP0CRG1                              1507 04690000
*     END;                                                         1508 04691000
*   ELSE                                                           1509 04692000
*     ;                             /* IF IT IS A U.P CONFIG., DON'T */ 04693000
@RF01503 DS    0H                                                  1510 04694000
*   RFY                                                            1510 04695000
*    (PSA) BASED(NPSAPTR);                                         1510 04696000
*                                                                  1510 04697000
*/********************************************************************/ 04698000
*/*                                                                  */ 04699000
*/* SET UP TO INITIALIZE FRR STACKS                                  */ 04700000
*/*                                                                  */ 04701000
*/********************************************************************/ 04702000
*                                                                  1511 04703000
*   RFY                                                            1511 04704000
*    (PSA) BASED(NPSAPTR);                                         1511 04705000
*   TABPTR=ADDR(NFRRS);             /* PICK UP ADDR. OF FRR STACK  1512 04706000
*                                      ENTRY IN TABLE OF SQA CTL.  1512 04707000
*                                      BLOCKS                        */ 04708000
         LA    TABPTR,NFRRS                                        1512 04709000
*   PSACSTK=NP0VADDR;               /* PUT VIRT. ADDR. OF FRR STACKS    04710000
*                                      IN PSA FIELD, FOR FRR STACK 1513 04711000
*                                      INIT. ROUTINE 'IEAVTSIN'      */ 04712000
         L     @06,NPSAPTR                                         1513 04713000
         MVC   PSACSTK(4,@06),NP0VADDR(TABPTR)                     1513 04714000
*   RFY                                                            1514 04715000
*    (NTSINREG) RSTD;                                              1514 04716000
*   NTSINREG=NPSAPTR;               /* PUT ADDR. OF PSA IN REG. 1    */ 04717000
         LR    NTSINREG,@06                                        1515 04718000
*   CALL IEAVTSIN;                  /* CALL THE RTN. TO INIT THE   1516 04719000
*                                                              STACKS*/ 04720000
         BAL   @14,IEAVTSIN                                        1516 04721000
*   RFY                                                            1517 04722000
*    (NTSINREG) UNRSTD;                                            1517 04723000
*                                                                  1517 04724000
*/* IOS STORAGE MANAGER MUST BE INITIALIZED BEFORE ENABLING FOR      */ 04725000
*/* I/O INTERRUPTS.                                                  */ 04726000
*/* INVOKE IOS STORAGE INITIALIZATION ROUTINE TO OBTAIN AND INIT.    */ 04727000
*/* BUFFERS FOR IOS.  INTERFACE IS:                                  */ 04728000
*/*    REG 13 POINTS TO A 16 WORD SAVE AREA                          */ 04729000
*/*    REG 15 POINTS TO ENTRY POINT OF IOS STORAGE INIT. RTN.        */ 04730000
*/*    REG 14 POINTS TO RETURN POINT IN IEAVNIP0                     */ 04731000
*/*                                                                  */ 04732000
*                                                                  1518 04733000
*   CALL IECVCPRM;                  /* CALL IOS STORAGE INIT. RTN  1518 04734000
*                                                            @ZA02136*/ 04735000
*                                                                  1518 04736000
         L     @15,@CV04245                                        1518 04737000
         BALR  @14,@15                                             1518 04738000
*   /*****************************************************************/ 04739000
*   /*                                                               */ 04740000
*   /* ENABLE I/O AND EXT. INTERRUPTS                                */ 04741000
*   /*                                                               */ 04742000
*   /*****************************************************************/ 04743000
*                                                                  1519 04744000
*   GEN(STOSM     SYSMASK,X'07')                                   1519 04745000
*   REFS(SYSMASK);                                                 1519 04746000
         STOSM     SYSMASK,X'07'                                        04747000
*NPRELOC2:                          /* ISSUE BLDCPOOL MACROS TO    1520 04748000
*                                      CONSTRUCT PERMANENT CELL POOLS*/ 04749000
*/********************************************************************/ 04750000
*/*                                                                  */ 04751000
*/* IN THE FOLLOWING PROCESSING, THE CELLS OF THE CELLPOOLS ARE      */ 04752000
*/* FORCED TO DOUBLEWORD BOUNDARIES BY OPERAND BNDRY=DWORD   @YM05185*/ 04753000
*/*                                                                  */ 04754000
*/* THE FIRST CELL OF EACH POOL WILL AUTOMATICALLY BE ON A DOUBLEWORD*/ 04755000
*/* BOUND SINCE THE TOTAL AMOUNT OF SPACE IS OBTAINED BY BLDCPOOL    */ 04756000
*/* WITH A GETMAIN.  EACH CELL IS EXTENDED BY ONE WORD (USED AS A    */ 04757000
*/* CHAIN FIELD TO CONNECT FREE CELLS), THUS IF EACH CELL IS AN ODD  */ 04758000
*/* NUMBER OF WORDS, THE ADDITION OF THE CHAIN FIELD MAKES EACH      */ 04759000
*/* CELL A DOUBLEWORD MULTIPLE IN LENGTH.  THUS EACH CELL IN A POOL  */ 04760000
*/* WILL BE ALIGNED ON A DOUBLEWORD BOUNDARY.                        */ 04761000
*/*                                                                  */ 04762000
*/********************************************************************/ 04763000
*/*                                                                  */ 04764000
*/*   SVRB POOL FOR MASTER MEMORY WILL BE BUILT WHEN THE           1520 04765000
*      FIRST SVC IS ISSUED IN THAT MEMORY.     @Z40FPXA              */ 04766000
*                                                                  1520 04767000
*   IF NP0STSZ<1048576              /* CHECK IF ONLINE STORAGE IS  1520 04768000
*                                      LESS THAN ONE MEGABYTE        */ 04769000
*     THEN                          /* IF SO, THEN                   */ 04770000
NPRELOC2 CLC   NP0STSZ(4),@CF05184                                 1520 04771000
         BNL   @RF01520                                            1520 04772000
*     DO;                                                          1521 04773000
*       NSRBCPCN=NASRBCNO;          /* PUT ALT. CELL COUNT IN TABLE     04774000
*                                      ENTRY FOR SRB CELL POOL     1522 04775000
*                                                            @ZM02352*/ 04776000
*                                                                  1522 04777000
         MVC   NSRBCPCN(4),NASRBCNO                                1522 04778000
*       /*************************************************************/ 04779000
*       /*                                                           */ 04780000
*       /* LINE DELETED HERE FOR SRM RQST-DELETE RM1 BLDCPOOL.       */ 04781000
*       /*                                                   @Z40FPXM*/ 04782000
*       /*                                                           */ 04783000
*       /*************************************************************/ 04784000
*                                                                  1523 04785000
*       CVTPVTP->PVTRSUS=128;       /* DEFAULT STORAGE UNIT SIZE TO     04786000
*                                      512K                  @YD03005*/ 04787000
         L     @02,CVTPVTP(,RCVT)                                  1523 04788000
         MVC   PVTRSUS(2,@02),@CH02217                             1523 04789000
*     END;                                                         1524 04790000
*   NCPITPTR=ADDR(NCPLINFO);        /* PUT ADDR. OF TABLE OF CELL  1525 04791000
*                                      POOL INFORMATION IN BASE PTR.    04792000
*                                      OF MAP OF A TABLE ENTRY.      */ 04793000
@RF01520 LA    NCPITPTR,NCPLINFO                                   1525 04794000
*   RFY                                                            1526 04795000
*    (CPAB) BASED(RCPABADR);                                       1526 04796000
*   RFY                                                            1527 04797000
*    (RCPID,                                                       1527 04798000
*     RCLNO,                                                       1527 04799000
*     RCLSZ,                                                       1527 04800000
*     RSBPL) RSTD;                                                 1527 04801000
*   DO WHILE NPOOLID^=0;            /* SET UP LOOP TO EXEC.        1528 04802000
*                                      BLDCPOOL'S FOR ENTRIES IN THE    04803000
*                                      TABLE. END OF THE TABLE IS  1528 04804000
*                                      INDICATED BY A CELL POOL ID OF   04805000
*                                      ALL ZEROS.                    */ 04806000
         B     @DE01528                                            1528 04807000
@DL01528 DS    0H                                                  1529 04808000
*     RCPID=NPOOLID;                /* PICK UP CELL POOL ID          */ 04809000
         L     RCPID,NPOOLID(,NCPITPTR)                            1529 04810000
*     RCLNO=NCELLNO;                /* PICK UP CELL COUNT    @ZM02352*/ 04811000
         L     RCLNO,NCELLNO(,NCPITPTR)                            1530 04812000
*     RSBPL=NSUBPOOL;               /* PICK UP SUBPOOL NUMBER        */ 04813000
         L     RSBPL,NSUBPOOL(,NCPITPTR)                           1531 04814000
*     RCLSZ=NCELLSZ;                /* PUT CSIZE INTO REG 6  @YM05063*/ 04815000
*                                                                  1532 04816000
         L     RCLSZ,NCELLSZ(,NCPITPTR)                            1532 04817000
*     /***************************************************************/ 04818000
*     /*                                                             */ 04819000
*     /* EXECUTE THE BLDCPOOL                                @YM05063*/ 04820000
*     /*                                                             */ 04821000
*     /***************************************************************/ 04822000
*                                                                  1533 04823000
*     RFY                                                          1533 04824000
*      (RCPABADR,                                                  1533 04825000
*       NBLDCPRC) RSTD;                                            1533 04826000
*     GEN SETS(NBLDCPRC) REFS(CVTPTR,CVTBLDCP,CVTMAP);             1534 04827000
*                                                 /* @YM05063*/         04828000
         BLDCPOOL   CPID=(0),CELLCNT=(2),CSIZE=(6),BNDRY=DWORD,       XX04829000
               SP=(5),BRANCH=YES,                                     XX04830000
               RELATED=('PERMENENT SYSTEM CELLPOOLS - IDS, SIZES,     XX04831000
               AND SUBPOOL NUMBER OBTAINED FROM A TABLE IN IEAVNIP0,  XX04832000
               CELLPOOLS NOT FREED, EXIST FOR LIFE OF IPL')   ZM02352   04833000
*     IF NBLDCPRC^=0                /* CHECK IF RET. CODE IS NON-ZERO*/ 04834000
*       THEN                        /* IF RET. CODE IS NON-ZERO,   1535 04835000
*                                      BLDCPOOL HAS FAILED           */ 04836000
         LTR   NBLDCPRC,NBLDCPRC                                   1535 04837000
         BNZ   @RT01535                                            1535 04838000
*       GOTO NP0BLCPF;              /* GO TO ERROR RTN.              */ 04839000
*     ELSE                          /* OTHERWISE, CONTINUE           */ 04840000
*       DO;                                                        1537 04841000
*         NIPBLDCP='1'B;            /* TURN ON 'BUILT BY NIP' FLAG IN   04842000
*                                      CPAB FOR CURR. CELLPOOL     1538 04843000
*                                      (BLDCPOOL RETURNS THE ADDR. OF   04844000
*                                      THE CPAB IN REG. 1)           */ 04845000
         OI    NIPBLDCP(RCPABADR),B'10000000'                      1538 04846000
*         NCPITPTR=NCPITPTR         /* UPDATE PTR. BY LENGTH OF AN   */ 04847000
*             +LENGTH(NCPITABE);    /* ENTRY IN TABLE OF BLDCPOOL  1539 04848000
*                                      INFO                          */ 04849000
         AH    NCPITPTR,@CH01253                                   1539 04850000
*         RFY                                                      1540 04851000
*          (RCPABADR,                                              1540 04852000
*           NBLDCPRC) UNRSTD;                                      1540 04853000
*       END;                                                       1541 04854000
*   END;                                                           1542 04855000
@DE01528 ICM   @07,15,NPOOLID(NCPITPTR)                            1542 04856000
         BNZ   @DL01528                                            1542 04857000
*   RFY                                                            1543 04858000
*    (RCPID,                                                       1543 04859000
*     RCPABADR,                                                    1543 04860000
*     RCLNO,                                                       1543 04861000
*     RCLSZ,                                                       1543 04862000
*     RSBPL,                                                       1543 04863000
*     NBLDCPRC) UNRSTD;                                            1543 04864000
*   RFY                                                            1544 04865000
*    (PVT) BASED(CVTPVTP);                                         1544 04866000
*                                                                  1544 04867000
*   /*****************************************************************/ 04868000
*   /*                                                               */ 04869000
*   /* SET UP A 'PAGE SERVICES WORKAREA' FOR RSM                     */ 04870000
*   /*                                                               */ 04871000
*   /*****************************************************************/ 04872000
*                                                                  1545 04873000
*   TABPTR=ADDR(PGESRVCE);          /* SPACE ALLOC TABLE     @Z30ENXA*/ 04874000
         LA    TABPTR,PGESRVCE                                     1545 04875000
*   PVTPCIWA=NP0VADDR;              /* ADDRESS OF WORK AREA  @Z30ENXA*/ 04876000
*                                                                  1546 04877000
         L     @06,CVTPVTP(,RCVT)                                  1546 04878000
         MVC   PVTPCIWA(4,@06),NP0VADDR(TABPTR)                    1546 04879000
*   /*****************************************************************/ 04880000
*   /*                                                               */ 04881000
*   /* SET UP TO CALL RSM'S SPACE ALLOC ROUTINE 'IEAVPCB', WHOSE     */ 04882000
*   /* ADDRESS IS IN THE PVT.                                        */ 04883000
*   /*                                                               */ 04884000
*   /*****************************************************************/ 04885000
*                                                                  1547 04886000
*   RFY                                                            1547 04887000
*    (NPRSMR0,                                                     1547 04888000
*     NPRSMR1,                                                     1547 04889000
*     NPRSMR2,                                                     1547 04890000
*     NPRSMR3,                                                     1547 04891000
*     REXIT,                                                       1547 04892000
*     RENTRY) RSTD;                                                1547 04893000
*   NPRSMR0=NPRSMR0&&NPRSMR0;       /* SET REG. 0 TO ZERO            */ 04894000
         XR    NPRSMR0,NPRSMR0                                     1548 04895000
*   NPRSMR1=NPRSMR1&&NPRSMR1;       /* SET REG. 1 TO ZERO            */ 04896000
         XR    NPRSMR1,NPRSMR1                                     1549 04897000
*   RFY                                                            1550 04898000
*    (ASCB) BASED(NVTMASCB);                                       1550 04899000
*   NPRSMR2=ASCBRSM;                /* PICK UP VIRT. (AND REAL) ADDR.   04900000
*                                      OF MASTER SCHEDULER'S RSMHDR     04901000
*                                      IN REG. 2                     */ 04902000
         L     @07,NVTMASCB                                        1551 04903000
         L     NPRSMR2,ASCBRSM(,@07)                               1551 04904000
*   RFY                                                            1552 04905000
*    (ASCB) BASED(ASCBPTR);                                        1552 04906000
*   NPRSMR3=CVTPVTP;                /* PICK UP VIRT. (AND REAL) ADDR.   04907000
*                                      OF THE PVT IN REG. 3          */ 04908000
         LR    NPRSMR3,@06                                         1553 04909000
*   RFY                                                            1554 04910000
*    (PVT) BASED(NPRSMR3);          /* RESPECIFY BASE FOR MAP OF THE    04911000
*                                      PVT. THIS IS DONE BECAUSE THE    04912000
*                                      ADDR. OF RSM'S SPACE ALLOC. 1554 04913000
*                                      RTN. IS IN THE PVT            */ 04914000
*   CALL NPRSMSA;                   /* CALL THE SPACE ALLOC. RTN.  1555 04915000
*                                      'NPRSMSA' IS A MAP OF THE PVT    04916000
*                                      FIELD CONTAINING THE ADDR. OF    04917000
*                                      THE SPACE ALLOCATION ROUTINE  */ 04918000
         L     @15,PVTPCB(,NPRSMR3)                                1555 04919000
         BALR  @14,@15                                             1555 04920000
*   RCVT=CVTPTR;                    /* RE-SET REG. 3 TO ADDR. OF CVT */ 04921000
         L     RCVT,CVTPTR                                         1556 04922000
*   RFY                                                            1557 04923000
*    (PVT) BASED(PVTPTR);                                          1557 04924000
*   RFY                                                            1558 04925000
*    (NPRSMR0,                                                     1558 04926000
*     NPRSMR1,                                                     1558 04927000
*     NPRSMR2,                                                     1558 04928000
*     REXIT,                                                       1558 04929000
*     RENTRY) UNRSTD;                                              1558 04930000
*   RFY                                                            1559 04931000
*    (NPRSMRC) RSTD;                                               1559 04932000
*   IF NPRSMRC=4                    /* CHECK IF RET. CODE IS 4       */ 04933000
*     THEN                          /* IF RET. CODE IS 4, IEAVPCB  1560 04934000
*                                      COULD NOT GET THE REAL STORAGE   04935000
*                                      IN SQA IT NEEDED OR A BLDCPOOL   04936000
*                                      FAILED                        */ 04937000
         CH    NPRSMRC,@CH00062                                    1560 04938000
         BE    @RT01560                                            1560 04939000
*     GOTO NP0INSRS;                /* GO TO ERROR RTN.              */ 04940000
*   IF NPRSMRC^=0                   /* CHECK IF RET. CODE IS NON-ZERO*/ 04941000
*     THEN                          /* IF RET. CODE IS NON-ZERO,   1562 04942000
*                                      IEAVPCB HAS RETURNED AN UN- 1562 04943000
*                                      DEFINED RETURN CODE.          */ 04944000
         LTR   NPRSMRC,NPRSMRC                                     1562 04945000
         BNZ   @RT01562                                            1562 04946000
*     GOTO NP0RSME;                 /* GO TO ERROR RTN.              */ 04947000
*   ELSE                                                           1564 04948000
*     ;                             /* OTHERWISE, CONTINUE           */ 04949000
*   RFY                                                            1565 04950000
*    (NPRSMRC) UNRSTD;                                             1565 04951000
*   IF NVTMP='1'B                   /* CHECK IF CONFIGURATION IS   1566 04952000
*                                      MULTI-PROCESSOR               */ 04953000
*/*                                                            Y02751*/ 04954000
*                                                                  1566 04955000
*     THEN                          /* IF SO                         */ 04956000
         TM    NVTMP,B'00100000'                                   1566 04957000
         BNO   @RF01566                                            1566 04958000
*/*                                                            Y02751*/ 04959000
*                                                                  1567 04960000
*     DO;                           /* THEN MOVE THE PSA FROM ABS. 1567 04961000
*                                      0-4K TO A LOCATION IN SQA     */ 04962000
*                                                                  1567 04963000
*       /*************************************************************/ 04964000
*       /*                                                           */ 04965000
*       /* GET 4K BLOCK IN SQA FOR PSA FOR IPL CPU                   */ 04966000
*       /*                                                           */ 04967000
*       /*************************************************************/ 04968000
*                                                                  1568 04969000
*       RFY                                                        1568 04970000
*        (AREAAD) RSTD;                                            1568 04971000
*                                                                  1568 04972000
*/*                                                            Y02751*/ 04973000
*                                                                  1569 04974000
*       GEN;                                                       1569 04975000
*                                                                  1569 04976000
         GETMAIN    RU,LV=4096,SP=245,BNDRY=PAGE,                     XX04977000
               RELATED=('SPACE FOR PSA FOR IPL CPU - 4096 BYTES,      XX04978000
               SP 245.  THIS AREA IS NEVER FREED')                      04979000
*/*                                                            Y02751*/ 04980000
*                                                                  1570 04981000
*       NICPVPSA=AREAAD;            /* SAVE VIRT ADDR OF THE       1570 04982000
*                                      GETMAIN'D AREA                */ 04983000
         ST    AREAAD,NICPVPSA                                     1570 04984000
*/*                                                            Y02751*/ 04985000
*                                                                  1571 04986000
*       GEN(LRA  1,0(0,1));         /* GET CORRES. REAL ADDR OF THE     04987000
*                                      AREA                          */ 04988000
         LRA  1,0(0,1)                                                  04989000
*/*                                                            Y02751*/ 04990000
*                                                                  1572 04991000
*       NICPRPSA=AREAAD;            /* SAVE REAL ADDR OF THE       1572 04992000
*                                      GETMAIN'D AREA                */ 04993000
         ST    AREAAD,NICPRPSA                                     1572 04994000
*       RFY                                                        1573 04995000
*        (AREAAD) UNRESTRICTED;                                    1573 04996000
*       RFY                                                        1574 04997000
*        (REG4,                                                    1574 04998000
*         REG5,                                                    1574 04999000
*         REG6,                                                    1574 05000000
*         REG7) RSTD;               /*                       @Z30ENXA*/ 05001000
*       REG4=NICPVPSA;              /* SET ADDRESS OF GETMAINED AREA    05002000
*                                                            @Z30ENXA*/ 05003000
         L     REG4,NICPVPSA                                       1575 05004000
*       REG5=4096;                  /* LENGTH OF MOVE        @Z30ENXA*/ 05005000
         LH    @02,@CH04248                                        1576 05006000
         LR    REG5,@02                                            1576 05007000
*       REG6=0;                     /* MOVE CURRENT PSA      @Z30ENXA*/ 05008000
         SLR   REG6,REG6                                           1577 05009000
*       REG7=4096;                  /* LENGTH OF MOVE        @Z30ENXA*/ 05010000
         LR    REG7,@02                                            1578 05011000
*       GEN(MVCL REG4,REG6);        /* MOVE PSA              @Z30ENXA*/ 05012000
         MVCL REG4,REG6                                                 05013000
*       RFY                                                        1580 05014000
*        (REG4,                                                    1580 05015000
*         REG5,                                                    1580 05016000
*         REG6,                                                    1580 05017000
*         REG7) UNRSTD;             /*                       @Z30ENXA*/ 05018000
*                                                                  1580 05019000
*       /*************************************************************/ 05020000
*       /*                                                           */ 05021000
*       /* DISABLE I/0 AND EXT INTERRUPTS                            */ 05022000
*       /*                                                           */ 05023000
*       /*************************************************************/ 05024000
*                                                                  1581 05025000
*/*                                                            Y02751*/ 05026000
*                                                                  1581 05027000
*       GEN(STNSM     SYSMASK,X'FC')                               1581 05028000
*       REFS(SYSMASK);                                             1581 05029000
         STNSM     SYSMASK,X'FC'                                        05030000
*NPRELOC3:                                                         1582 05031000
*                                                                  1582 05032000
*/*                                                            Y02751*/ 05033000
*                                                                  1582 05034000
*       GEN(SPX   NICPRPSA);        /* SET PREFIX REG ON CPU TO REAL    05035000
*                                      ADDR OF PSA IN SQA            */ 05036000
NPRELOC3 SPX   NICPRPSA                                                 05037000
*       RFY                                                        1583 05038000
*        (PCCA) BASED(TBASE);                                      1583 05039000
*                                                                  1583 05040000
*/*                                                            Y02751*/ 05041000
*                                                                  1584 05042000
*       TABPTR=ADDR(NPCCA);         /* SET BASE TO TABLE ENTRY FOR 1584 05043000
*                                      PCCA                          */ 05044000
         LA    TABPTR,NPCCA                                        1584 05045000
*/*                                                            Y02751*/ 05046000
*                                                                  1585 05047000
*       TBASE=NP0VADDR;             /* PUT VIRT ADDR OF PCCA IN ITS     05048000
*                                      BASE                          */ 05049000
         L     TBASE,NP0VADDR(,TABPTR)                             1585 05050000
*/*                                                            Y02751*/ 05051000
*                                                                  1586 05052000
*       PCCAPSAV=NICPVPSA;          /* PUT VIRT ADDR OF PSA (IN SQA)    05053000
*                                      IN THE PCCA FOR IPL CPU       */ 05054000
         MVC   PCCAPSAV(4,TBASE),NICPVPSA                          1586 05055000
*/*                                                            Y02751*/ 05056000
*                                                                  1587 05057000
*       PCCAPSAR=NICPRPSA;          /* PUT REAL ADDR OF PSA (IN SQA)    05058000
*                                      IN THE PCCA FOR IPL CPU       */ 05059000
         MVC   PCCAPSAR(4,TBASE),NICPRPSA                          1587 05060000
*/* NOTE: THE ABOVE OPERATIONS DO NOT NEED TO BE DONE FOR A UNI-     */ 05061000
*/*       PORCESSOR CONFIGURATION SINCE ITS PSA REMAINS AT ABSOLUTE  */ 05062000
*/*       LOCATION ZERO AND THE PCCA POINTERS ARE ALREADY ZERO.      */ 05063000
*/* ENABLE I/O AND EXT. INTERRUPTS                                   */ 05064000
*/*                                                            Y02751*/ 05065000
*                                                                  1588 05066000
*       GEN(STOSM     SYSMASK,X'07')                               1588 05067000
*       REFS(SYSMASK);                                             1588 05068000
*                                                                  1588 05069000
         STOSM     SYSMASK,X'07'                                        05070000
*/*                                                            Y02751*/ 05071000
*                                                                  1589 05072000
*     END;                                                         1589 05073000
*                                                                  1589 05074000
*/********************************************************************/ 05075000
*/*                                                                  */ 05076000
*/* GET AND INITIALIZE GLOBAL SYSTEM DUPLEX AREA                     */ 05077000
*/*                                                                  */ 05078000
*/********************************************************************/ 05079000
*                                                                  1590 05080000
*   TABPTR=ADDR(NP0GSDA);           /* SPACE ALLOC TABLE ADDR      1590 05081000
*                                                            @Z30ENXA*/ 05082000
@RF01566 LA    TABPTR,NP0GSDA                                      1590 05083000
*   CVTGSDA=NP0VADDR;               /* ADDRESS OF GSDA       @Z30ENXA*/ 05084000
         MVC   CVTGSDA(4,RCVT),NP0VADDR(TABPTR)                    1591 05085000
*   CVTGSDAB='1'B;                  /* TURN ON VALIDITY BIT IN     1592 05086000
*                                      POINTER                       */ 05087000
         OI    CVTGSDAB(RCVT),B'10000000'                          1592 05088000
*/* INITIALIZE FIELDS IN THE GSDA                                    */ 05089000
*                                                                  1593 05090000
*   GSDAASVT=CVTASVT;               /* PUT ASVT ADDR. IN GSDA        */ 05091000
         L     @15,CVTGSDA(,RCVT)                                  1593 05092000
         MVC   GSDAASVT(4,@15),CVTASVT(RCVT)                       1593 05093000
*   GSDAASVB='1'B;                  /* TURN ON VALIDITY BIT IN     1594 05094000
*                                      POINTER                       */ 05095000
         OI    GSDAASVB(@15),B'10000000'                           1594 05096000
*   GSDAPCCT=CVTPCCAT;              /* PUT PCCAVT ADDR. IN GSDA      */ 05097000
         L     @14,CVTPCCAT(,RCVT)                                 1595 05098000
         ST    @14,GSDAPCCT(,@15)                                  1595 05099000
*   GSDAPCCB='1'B;                  /* TURN ON VALIDITY BIT IN     1596 05100000
*                                      POINTER                       */ 05101000
         OI    GSDAPCCB(@15),B'10000000'                           1596 05102000
*   GSDALCCT=CVTLCCAT;              /* PUT LCCAVT ADDR. IN GSDA      */ 05103000
         MVC   GSDALCCT(4,@15),CVTLCCAT(RCVT)                      1597 05104000
*   GSDALCCB='1'B;                  /* TURN ON VALIDITY BIT IN     1598 05105000
*                                      POINTER                       */ 05106000
         OI    GSDALCCB(@15),B'10000000'                           1598 05107000
*   GSDACSD=CVTCSD;                 /* PUT CSD ADDR. IN GSDA         */ 05108000
         L     @07,CVTCSD(,RCVT)                                   1599 05109000
         ST    @07,GSDACSD(,@15)                                   1599 05110000
*   GSDACSDB='1'B;                  /* TURN ON VALIDITY BIT IN     1600 05111000
*                                      POINTER                       */ 05112000
         OI    GSDACSDB(@15),B'10000000'                           1600 05113000
*   GSDAGDA=CVTGDA;                 /* PUT GDA ADDR. IN GSDA         */ 05114000
         MVC   GSDAGDA(4,@15),CVTGDA(RCVT)                         1601 05115000
*   GSDAGDAB='1'B;                  /* TURN ON VALIDITY BIT IN     1602 05116000
*                                      POINTER                       */ 05117000
         OI    GSDAGDAB(@15),B'10000000'                           1602 05118000
*                                                                  1603 05119000
*/********************************************************************/ 05120000
*/*                                                                  */ 05121000
*/* SET UP MASKS REPRESENTING THE IPL CPU IN ITS PCCA AND IN THE CSD */ 05122000
*/*                                                                  */ 05123000
*/********************************************************************/ 05124000
*                                                                  1603 05125000
*   RFY                                                            1603 05126000
*    (PCCAVT) BASED(CVTPCCAT);                                     1603 05127000
*   RFY                                                            1604 05128000
*    (PCCA) BASED(TBASE);                                          1604 05129000
*   TBASE=PCCAT00P(NICPADR+1);      /* PUT ADDR OF PCCA CORRES. TO 1605 05130000
*                                      IPL CPU IN BASE FOR PCCA    1605 05131000
*                                      MAPPING                       */ 05132000
         SLR   @15,@15                                             1605 05133000
         ICM   @15,3,NICPADR                                       1605 05134000
         LR    @06,@15                                             1605 05135000
         SLA   @06,2                                               1605 05136000
         L     TBASE,PCCAT00P(@06,@14)                             1605 05137000
*   NICPMSK=NCPMSKTB(NICPADR+1);    /* PUT MASK CORRES. TO IPL CPU IN   05138000
*                                      IPL CPU DATA BLOCK            */ 05139000
         ALR   @15,@15                                             1606 05140000
         LA    @14,NCPMSKTB(@15)                                   1606 05141000
         MVC   NICPMSK(2),0(@14)                                   1606 05142000
*/* NOTE: FIELD 'NICPADR' WAS INITIALIZED TO ZERO, THUS EVEN IF      */ 05143000
*/*       THIS IS A UNI-PROCESSOR CONFIGURATION, THIS INSTRUCTION    */ 05144000
*/*       WILL PUT THE MASK CORRESPONDING TO THE IPL CPU IN THE IPL  */ 05145000
*/*       CPU DATA BLOCK SINCE THE IPL CPU IS ASSUMED TO HAVE AN     */ 05146000
*/*       ADDRESS OF ZERO IN SUCH A CONFIGURATION.                   */ 05147000
*                                                                  1607 05148000
*   PCCACAFM=NICPMSK;               /* PUT MASK CORRES. TO IPL CPU IN   05149000
*                                      ITS PCCA                      */ 05150000
         SLR   @06,@06                                             1607 05151000
         ICM   @06,3,NICPMSK                                       1607 05152000
         STH   @06,PCCACAFM(,TBASE)                                1607 05153000
*   NCPOLMSK=NCPOLMSK               /* 'OR' THE IPL CPU'S MASK INTO  */ 05154000
*       |NICPMSK;                   /* CUMULATIVE MASK OF ONLINE   1608 05155000
*                                      CPU'S                         */ 05156000
         SLR   @02,@02                                             1608 05157000
         ICM   @02,3,NCPOLMSK                                      1608 05158000
         OR    @06,@02                                             1608 05159000
         STH   @06,NCPOLMSK                                        1608 05160000
*   RFY                                                            1609 05161000
*    (CSD) BASED(CVTCSD);                                          1609 05162000
*                                                                  1609 05163000
*/* PUT THIS 'CUMULATIVE' MASK OF ON-LINE CPU'S IN VARIOUS CSD       */ 05164000
*/* FIELDS.  THIS 'CUMULATIVE' MASK REFLECTS ONLY THE IPL CPU AT     */ 05165000
*/* THIS TIME AND IS PUT IN THE CSD IN THIS FORM SO THE MEMORY       */ 05166000
*/* SWITCH ROUTINE WILL NOT DISPATCH WORK ON ANY NON-IPL CPU.        */ 05167000
*/* THE CSD FIELDS WILL BE OVERLAYED WITH A MASK REPRESENTING ALL    */ 05168000
*/* ON-LINE CPU'S FOUND BY IEAVNIP0 AFTER ALL SUCH CPU'S ARE         */ 05169000
*/* INITIALIZED.                                                     */ 05170000
*                                                                  1610 05171000
*   CSDCPUJS=NCPOLMSK;              /* MASK OF CPU'S AVAILABLE FOR 1610 05172000
*                                      JOB SCHEDULING                */ 05173000
         STH   @06,CSDCPUJS(,@07)                                  1610 05174000
*   CSDCPUAL=NCPOLMSK;              /* MASK OF CPU'S CURRENTLY ALIVE */ 05175000
         STH   @06,CSDCPUAL(,@07)                                  1611 05176000
*   NCPUCNT=NCPUCNT+1;              /* INCREMENT COUNT OF ON-LINE  1612 05177000
*                                      CPU'S                         */ 05178000
         LA    @02,1                                               1612 05179000
         AH    @02,NCPUCNT                                         1612 05180000
         STH   @02,NCPUCNT                                         1612 05181000
*   CSDCPUOL=NCPUCNT;               /* PUT COUNT IN CSD              */ 05182000
         STH   @02,CSDCPUOL(,@07)                                  1613 05183000
*   IF NVTMP='0'B                   /* CHECK IF THIS IS A UNI-     1614 05184000
*                                      PROCESSOR CONFIGURATION       */ 05185000
*     THEN                                                         1614 05186000
         TM    NVTMP,B'00100000'                                   1614 05187000
         BZ    @RT01614                                            1614 05188000
*     GOTO NP0LEAVE;                /* IF SO, GOTO NIP0 EXIT ROUTINE */ 05189000
*                                                                  1616 05190000
*/********************************************************************/ 05191000
*/*                                                                  */ 05192000
*/* COME HERE IF CONFIGURATION IS MULTI-PROCESSOR.  THIS ROUTINE     */ 05193000
*/* LOCATES AND INITIALIZES ALL CPU'S ONLINE AT IPL/NIP TIME.        */ 05194000
*/*                                                                  */ 05195000
*/********************************************************************/ 05196000
*                                                                  1616 05197000
*   RFY                                                            1616 05198000
*    (NIPIDREG,                                                    1616 05199000
*     ZEROREG) RSTD;                                               1616 05200000
*                                                                  1616 05201000
*/*                                                            Y02751*/ 05202000
*                                                                  1617 05203000
*   NIPIDREG=NIPRSTID;              /* PICK UP NIP0'S ID FOR RESTART    05204000
*                                      RESOURCE                      */ 05205000
         L     NIPIDREG,NIPRSTID                                   1617 05206000
*/*                                                            Y02751*/ 05207000
*                                                                  1618 05208000
*   ZEROREG=''B;                    /* SET OTHER REGISTER TO ZERO    */ 05209000
         SLR   ZEROREG,ZEROREG                                     1618 05210000
*/*                                                            Y02751*/ 05211000
*                                                                  1619 05212000
*   CS(ZEROREG,NIPIDREG,CVTRSTWD);  /* ATTEMPT TO GET THE RESOURCE   */ 05213000
         CS    ZEROREG,@01,CVTRSTWD(RCVT)                          1619 05214000
*   RFY                                                            1620 05215000
*    (NIPIDREG,                                                    1620 05216000
*     ZEROREG) UNRSTD;                                             1620 05217000
*                                                                  1620 05218000
*/*                                                            Y02751*/ 05219000
*                                                                  1621 05220000
*   BC(8,NCPUINIT);                 /* IF SUCCESSFUL, CONTINUE       */ 05221000
         BC    8,NCPUINIT                                          1621 05222000
*/*                                                            Y02751*/ 05223000
*                                                                  1622 05224000
*   CALL NP0MSGI;                   /* IF NOT SUCCESSFUL, CALL RTN.     05225000
*                                      TO SET UP A MESSAGE ABOUT THIS*/ 05226000
         BAL   @14,NP0MSGI                                         1622 05227000
*/* THOUGH THIS IS AN ERROR SITUATION, THE ERROR SHOULD NEVER OCCUR, */ 05228000
*/* THUS, SET CVTRSTWD TO NIP0'S ID AND USE THE RESTART RESOURCE     */ 05229000
*/* ANYWAY.                                                          */ 05230000
*/*                                                            Y02751*/ 05231000
*                                                                  1623 05232000
*   CVTRSTWD=NIPRSTID;              /* SET CVTRSTWD TO NIP0'S ID     */ 05233000
         MVC   CVTRSTWD(4,RCVT),NIPRSTID                           1623 05234000
*NCPUINIT:                          /* AND CONTINUE                  */ 05235000
*/*                                                            Y02751*/ 05236000
*                                                                  1624 05237000
*   DPSWRD1=DPSWRD1                 /* DISABLE MACH. CHECKS IN       */ 05238000
*       &'FFFBFFFF'X;               /* DISABLED, EC MODE PSW THAT  1624 05239000
*                                      WILL BE LOADED BY OTHER CPU'S    05240000
*                                      TO PUT THEM IN RELOCATE MODE. */ 05241000
NCPUINIT NC    DPSWRD1(4),@CB04232                                 1624 05242000
*/* THE ABOVE ACTION IS TAKEN SO AS TO FORCE THOSE CPU'S TO GENERATE */ 05243000
*/* MAL-FUNCTION ALERTS IF A MACHINE CHECK CONDITION ARISES ON THEM  */ 05244000
*/* WHILE EXECUTING WITH THE ABOVE PSW                               */ 05245000
*                                                                  1625 05246000
*                                                                  1625 05247000
*/* DISABLE MACHINE CHECKS IN THE PSW LOADED WHEN SYSTEM WAIT TASK   */ 05248000
*/* IS DISPATCHED. THE 'CS' INSTR. IS USED TO PREVENT SETTING        */ 05249000
*/* OF THE MASK WHILE THE DISPATCHER IS LOADING THE PSW.             */ 05250000
*                                                                  1625 05251000
*   RFY                                                            1625 05252000
*    (CURPSWD1,                                                    1625 05253000
*     NEWPSWD1) RSTD;                                              1625 05254000
*                                                                  1625 05255000
*/*                                                            Y02751*/ 05256000
*                                                                  1626 05257000
*   CURPSWD1=NWTPSWD1;              /* PICK UP FIRST WORD OF THE PSW */ 05258000
         L     @02,NWPSWPTR                                        1626 05259000
         L     CURPSWD1,NWTPSWD1(,@02)                             1626 05260000
*NDISABLE:                                                         1627 05261000
*                                                                  1627 05262000
*/*                                                            Y02751*/ 05263000
*                                                                  1627 05264000
*   NEWPSWD1=CURPSWD1;              /* PRESERVE THIS IN ANOTHER REG  */ 05265000
NDISABLE LR    NEWPSWD1,CURPSWD1                                   1627 05266000
*/*                                                            Y02751*/ 05267000
*                                                                  1628 05268000
*   NEWPSWD1=NEWPSWD1&MASKOFF;      /* TURN OFF (DISABLE) MACH. CHECK   05269000
*                                      MASK IN THIS COPY OF THE FIRST   05270000
*                                      WORD OF THE PSW               */ 05271000
         N     NEWPSWD1,MASKOFF                                    1628 05272000
*/*                                                            Y02751*/ 05273000
*                                                                  1629 05274000
*   CS(CURPSWD1,NEWPSWD1,NWTPSWD1); /* ATTEMPT TO STORE THE ALTERED     05275000
*                                      FIRST WORD OF THE PSW BACK IN    05276000
*                                      THE WAIT PSW.                 */ 05277000
         L     @02,NWPSWPTR                                        1629 05278000
         CS    CURPSWD1,@05,NWTPSWD1(@02)                          1629 05279000
*/*                                                            Y02751*/ 05280000
*                                                                  1630 05281000
*   BC(7,NDISABLE);                 /* IF NOT SUCCESSFUL, TRY AGAIN  */ 05282000
         BC    7,NDISABLE                                          1630 05283000
*   RFY                                                            1631 05284000
*    (CURPSWD1,                                                    1631 05285000
*     NEWPSWD1) UNRSTD;                                            1631 05286000
*                                                                  1631 05287000
*/*                                                                  */ 05288000
*/* THIS PSW WILL BE LOADED ON NON-IPL CPU'S WHEN THEY ARE           */ 05289000
*/* INITIALIZED.  MACH. CHECKS ARE DISABLED SO AS TO FORCE A MFA     */ 05290000
*/* IF A MACH. CHECK CONDITION ARISES ON A NON-IPL CPU AFTER IT IS   */ 05291000
*/* INITIALIZED.                                                     */ 05292000
*/*                                                                  */ 05293000
*                                                                  1632 05294000
*   RFY                                                            1632 05295000
*    (PSA) BASED(NP0PSASA);                                        1632 05296000
*                                                                  1632 05297000
*/*                                                            Y02751*/ 05298000
*                                                                  1633 05299000
*   FLCMNPSW=NPMCNPSW;              /* SET MACH. CHECK NEW PSW IN THE   05300000
*                                      'CLEAN' PSA TO POINT TO NIP0'S   05301000
*                                      MACH. CHECK TRAP SUBROUTINE.  */ 05302000
         L     @02,NP0PSASA                                        1633 05303000
         MVC   FLCMNPSW(8,@02),NPMCNPSW                            1633 05304000
*   RFY                                                            1634 05305000
*    (PSA) BASED(NPSAPTR);                                         1634 05306000
*                                                                  1634 05307000
*/*                                                                  */ 05308000
*/* THIS IS DONE IN CASE A NON-IPL CPU IS INTERRUPTED AFTER IT IS    */ 05309000
*/* INITIALIZED AND THE SYS. WAIT TASK IS RE-DISPATCHED WITH MACH.   */ 05310000
*/* CHECKS ENABLED.  (MACH. CHECKS WILL BE ENABLED IN THAT TASK'S PSW*/ 05311000
*/* BEFORE IEAVNIP0 COMPLETES ITS PROCESSING).  IF A MACH. CHECK     */ 05312000
*/* OCCURS IN SUCH A CPU UNDER SUCH CONDITIONS, THE MACH. CHECK      */ 05313000
*/* WILL BE TREATED AS IF IT OCCURRED ON THE IPL CPU -               */ 05314000
*/* THAT IS, THE ENTIRE CONFIGURATION WILL BE STOPPED.               */ 05315000
*/*                                                                  */ 05316000
*                                                                  1635 05317000
*NCPUCHEK:                                                         1635 05318000
*                                                                  1635 05319000
*/*                                                            Y02751*/ 05320000
*                                                                  1635 05321000
*   NCURCPUA=NPCURCPU;              /* PUT PHYS. ADDR. OF CURR. CPU     05322000
*                                      IN CPU INITIALIZATION CONTROL    05323000
*                                      BLOCK. NOTE: NPCURCPU IS INIT.   05324000
*                                      TO ZERO.                      */ 05325000
NCPUCHEK LH    @02,NPCURCPU                                        1635 05326000
         STH   @02,NCURCPUA                                        1635 05327000
*/*                                                            Y02751*/ 05328000
*                                                                  1636 05329000
*   NCURCPUM=NCPMSKTB(NCURCPUA+1);  /* PUT MASK CORRES. TO CURRENT 1636 05330000
*                                      CPU IN CPU INITIALIZATION   1636 05331000
*                                      CONTROL BLOCK.                */ 05332000
         ALR   @02,@02                                             1636 05333000
         LA    @01,NCPMSKTB(@02)                                   1636 05334000
         MVC   NCURCPUM(2),0(@01)                                  1636 05335000
*/*                                                            Y02751*/ 05336000
*                                                                  1637 05337000
*   IF NCURCPUM=NICPMSK             /* CHECK IF CURR. CPU IS THE IPL */ 05338000
*     THEN                          /* CPU. IF SO, THEN              */ 05339000
         CLC   NCURCPUM(2),NICPMSK                                 1637 05340000
         BNE   @RF01637                                            1637 05341000
*NCPUSTEP:                                                         1638 05342000
*                                                                  1638 05343000
*/*                                                            Y02751*/ 05344000
*                                                                  1638 05345000
*     DO;                                                          1638 05346000
*                                                                  1638 05347000
NCPUSTEP DS    0H                                                  1639 05348000
*/*                                                            Y02751*/ 05349000
*                                                                  1639 05350000
*       NPCURCPU=NPCURCPU           /* INCREMENT CPU ADDR. IN CPU    */ 05351000
*           +1;                     /* INITIALIZATION CONTROL BLOCK  */ 05352000
         LA    @02,1                                               1639 05353000
         AH    @02,NPCURCPU                                        1639 05354000
         STH   @02,NPCURCPU                                        1639 05355000
*/*                                                            Y02751*/ 05356000
*                                                                  1640 05357000
*       IF NPCURCPU>15              /* CHECK IF ALL CPU'S HAVE BEEN     05358000
*                                      PROCESSED, IF SO,             */ 05359000
*         THEN                                                     1640 05360000
*                                                                  1640 05361000
         CH    @02,@CH00123                                        1640 05362000
         BNH   @RF01640                                            1640 05363000
*/*                                                            Y02751*/ 05364000
*                                                                  1641 05365000
*         DO;                                                      1641 05366000
*                                                                  1641 05367000
*/*                                                            Y02751*/ 05368000
*                                                                  1642 05369000
*           NALLINIT='1'B;          /* SET BIT TO INDICATE ALL ONLINE   05370000
*                                      PROCESSORS HAVE BEEN        1642 05371000
*                                      INITIALIZED           @Z30LQXA*/ 05372000
         LA    @14,NALLINIT                                        1642 05373000
         LR    @07,@14                                             1642 05374000
         LA    @02,3                                               1642 05375000
         NR    @07,@02                                             1642 05376000
         LCR   @07,@07                                             1642 05377000
         ALR   @14,@07                                             1642 05378000
         L     @02,0(,@14)                                         1642 05379000
@GL00004 LR    @15,@02                                             1642 05380000
         O     @15,@CB05602+3(@07)                                 1642 05381000
         CS    @02,@15,0(@14)                                      1642 05382000
         BNE   @GL00004                                            1642 05383000
*           CVTRSTWD=0;             /* RELEASE RESTART RESOURCE      */ 05384000
         SLR   @02,@02                                             1643 05385000
         ST    @02,CVTRSTWD(,RCVT)                                 1643 05386000
*/*                                                            Y02751*/ 05387000
*                                                                  1644 05388000
*           GOTO NP0LEAVE;          /* GOTO NIP0 EXIT ROUTINE        */ 05389000
         B     NP0LEAVE                                            1644 05390000
*/*                                                            Y02751*/ 05391000
*                                                                  1645 05392000
*         END;                                                     1645 05393000
*       ELSE                        /* OTHERWISE, LOOP TO CHECK THE  */ 05394000
*/*                                                            Y02751*/ 05395000
*                                                                  1646 05396000
*         GOTO NCPUCHEK;            /* NEXT CPU.                     */ 05397000
*/*                                                            Y02751*/ 05398000
*                                                                  1647 05399000
*     END;                                                         1647 05400000
*                                                                  1647 05401000
*/* FALL THROUGH INTO THIS CODE IF CURR. CPU IS NOT THE IPL CPU      */ 05402000
*/*                                                            Y02751*/ 05403000
*                                                                  1648 05404000
*   IF(NPMFMASK&NCURCPUM)^=0        /* CHECK IF CURR. CPU HAS MAL-   */ 05405000
*     THEN                          /* FUNCTIONED. IF IT HAS, THEN   */ 05406000
@RF01637 SLR   @02,@02                                             1648 05407000
         ICM   @02,3,NCURCPUM                                      1648 05408000
         SLR   @15,@15                                             1648 05409000
         ICM   @15,3,NPMFMASK                                      1648 05410000
         NR    @02,@15                                             1648 05411000
         LTR   @02,@02                                             1648 05412000
         BNZ   @RT01648                                            1648 05413000
*/*                                                            Y02751*/ 05414000
*                                                                  1649 05415000
*     GOTO NCPUSTEP;                /* LOOP TO CHECK THE NEXT CPU.   */ 05416000
*   RFY                                                            1650 05417000
*    (NP0GMLEN,                                                    1650 05418000
*     AREAAD) RSTD;                 /* OTHERWISE, SET UP TO GETMAIN A   05419000
*                                      PCCA FOR THE CURR. CPU        */ 05420000
*/*                                                            Y02751*/ 05421000
*                                                                  1651 05422000
*   NP0GMLEN=NPCCALEN;              /* LOAD REG. 0 WITH LENGTH OF  1651 05423000
*                                      PCCA                          */ 05424000
         LH    NP0GMLEN,NPCCALEN                                   1651 05425000
*/*                                                            Y02751*/ 05426000
*                                                                  1652 05427000
*NGTPCCA:                                                          1652 05428000
*   GEN;                                                           1652 05429000
*                                                                  1652 05430000
NGTPCCA  DS    0H                                                  1652 05431000
*                                 /* GETMAIN SPACE FOR PCCA         */  05432000
         GETMAIN   RU,LV=(0),SP=245,                                  XX05433000
               RELATED=('PCCA FOR CURRENT CPU, SP 245, FREED IN       XX05434000
               IEAVNIP0 AT LABEL: NFRPCCA1 OR NFRPCCA2')                05435000
*/*                                                            Y02751*/ 05436000
*                                                                  1653 05437000
*   NCURVPCC=AREAAD;                /* PUT VIRT. ADDR. OF NEW PCCA IN   05438000
*                                      CPU INITIALIZATION CONTROL  1653 05439000
*                                      BLOCK                         */ 05440000
         ST    AREAAD,NCURVPCC                                     1653 05441000
*/*                                                            Y02751*/ 05442000
*                                                                  1654 05443000
*   GEN(LRA   AREAAD,0(0,AREAAD));  /* GET REAL ADDR. OF NEW PCCA    */ 05444000
         LRA   AREAAD,0(0,AREAAD)                                       05445000
*/*                                                            Y02751*/ 05446000
*                                                                  1655 05447000
*   NCURRPCC=AREAAD;                /* PUT REAL ADDR. OF NEW PCCA IN    05448000
*                                      CPU INITIALIZATION CONTROL  1655 05449000
*                                      BLOCK                         */ 05450000
         ST    AREAAD,NCURRPCC                                     1655 05451000
*   RFY                                                            1656 05452000
*    (NP0GMLEN,                                                    1656 05453000
*     AREAAD) UNRSTD;                                              1656 05454000
*                                                                  1656 05455000
*/* SET UP PARAMETERS FOR CALL TO SUB RTN TO CLEAR AN AREA TO ZEROS  */ 05456000
*/*                                                            Y02751*/ 05457000
*                                                                  1657 05458000
*   NCLRBASE=NCURVPCC;              /* SET UP VIRT. ADDR. OF AREA TO    05459000
*                                      BE CLEARED.                   */ 05460000
         L     NCLRBASE,NCURVPCC                                   1657 05461000
*/*                                                            Y02751*/ 05462000
*                                                                  1658 05463000
*   NCLRLEN=NPCCALEN;               /* SET UP LENGTH OF AREA TO BE 1658 05464000
*                                      CLEARED.                      */ 05465000
         MVC   NCLRLEN(2),NPCCALEN                                 1658 05466000
*/*                                                            Y02751*/ 05467000
*                                                                  1659 05468000
*   CALL NIP0CLRZ;                  /* CALL THE SUB ROUTINE          */ 05469000
         BAL   @14,NIP0CLRZ                                        1659 05470000
*   RFY                                                            1660 05471000
*    (PCCA) BASED(NCURVPCC);                                       1660 05472000
*                                                                  1660 05473000
*/*                                                            Y02751*/ 05474000
*                                                                  1661 05475000
*   PCCACPUA=NCURCPUA;              /* PUT PHYS. ADDR. OF CURR. CPU     05476000
*                                      IN NEW PCCA                   */ 05477000
         LH    @15,NCURCPUA                                        1661 05478000
         L     @14,NCURVPCC                                        1661 05479000
         STH   @15,PCCACPUA(,@14)                                  1661 05480000
*/*                                                            Y02751*/ 05481000
*                                                                  1662 05482000
*   PCCVTPTR=CVTPCCAT               /* PUT VIRT. ADDR. OF PCCAVT     */ 05483000
*       +(LENGTH(PCCAT00P)          /* ENTRY CORRES. TO CURR. CPU    */ 05484000
*       *NCURCPUA);                 /* IN BASE FOR MAP OF PCCAVT   1662 05485000
*                                      ENTRY.                        */ 05486000
         SLA   @15,2                                               1662 05487000
         AL    @15,CVTPCCAT(,RCVT)                                 1662 05488000
         ST    @15,PCCVTPTR                                        1662 05489000
*/*                                                            Y02751*/ 05490000
*                                                                  1663 05491000
*   PCCVTENT=NCURVPCC;              /* PUT VIRT. ADDR. OF PCCA FOR 1663 05492000
*                                      CURR. CPU IN PCCAVT ENTRY   1663 05493000
*                                      CORRES. TO CURR. CPU.         */ 05494000
         ST    @14,PCCVTENT(,@15)                                  1663 05495000
*/* THE ABOVE INITIALIZATION OF THE PCCAVT AND NEW PCCA IS DONE      */ 05496000
*/* BECAUSE THE DSGNL MACRO USES THE CPU ADDRESS IN THE PCCA TO      */ 05497000
*/* CHECK THE VALIDITY OF THE PCCAVT ENTRY CORRESPONDING TO THAT CPU */ 05498000
*                                                                  1664 05499000
*                                                                  1664 05500000
*/* SET UP TO EXECUTE A SIGP TO THE CURRENT CPU TO DETERMINE IF THAT */ 05501000
*/* CPU IS ON LINE OR NOT.                                           */ 05502000
*/*                                                            Y02751*/ 05503000
*                                                                  1664 05504000
*   NIPCLOOP=4;                     /* SET A COUNTER TO CONTROL IPC     05505000
*                                      LOOP IF IPC RETURNS A CODE OF    05506000
*                                      4 (SIGP FUNCTION NOT        1664 05507000
*                                      COMPLETE). IPC WILL HAVE    1664 05508000
*                                      ALREADY TRIED THE FUNCTION A     05509000
*                                      NO. OF TIMES, THIS LOOP WILL     05510000
*                                      REPEAT THE IPC A NUMBER OF  1664 05511000
*                                      TIMES, HOPING TO GET THE SIGP    05512000
*                                      FUNCTION COMPLETED.           */ 05513000
         LA    NIPCLOOP,4                                          1664 05514000
*   RFY                                                            1665 05515000
*    (NDSGNLST,                                                    1665 05516000
*     NDSGNLRG,                                                    1665 05517000
*     NDSGNLRC) RSTD;                                              1665 05518000
*NIP0IPR:                                                          1666 05519000
*                                                                  1666 05520000
*/*                                                            Y02751*/ 05521000
*                                                                  1666 05522000
*   NDSGNLRG=NCURVPCC;              /* PUT VIRT. ADDR. OF PCCA FOR 1666 05523000
*                                      CURR. CPU IN REG. 1           */ 05524000
*                                                                  1666 05525000
NIP0IPR  L     NDSGNLRG,NCURVPCC                                   1666 05526000
*   /*****************************************************************/ 05527000
*   /*                                                               */ 05528000
*   /* INVOKE DSGNL MACRO (IPC) FOR INITIAL PROGRAM RESET (IPR)      */ 05529000
*   /*                                                               */ 05530000
*   /*****************************************************************/ 05531000
*                                                                  1667 05532000
*/*                                                            Y02751*/ 05533000
*                                                                  1667 05534000
*   GEN(DSGNL    IPR,CPU=(1))                                      1667 05535000
*   SETS(NDSGNLST,NDSGNLRC) REFS(CVTPTR,CVTIPCDS,CVT);             1667 05536000
         DSGNL    IPR,CPU=(1)                                           05537000
*   RFY                                                            1668 05538000
*    (NDSGNLRG) UNRSTD;                                            1668 05539000
*                                                                  1668 05540000
*/*                                                            Y02751*/ 05541000
*                                                                  1669 05542000
*   IF NDSGNLRC=12                  /* CHECK IF RET. CODE = 12       */ 05543000
*     THEN                          /* IF SO, THE SIGNALLED CPU IS 1669 05544000
*                                      NOT OPERATIONAL (OFFLINE)     */ 05545000
         CH    NDSGNLRC,@CH00724                                   1669 05546000
         BE    @RT01669                                            1669 05547000
*/*                                                            Y02751*/ 05548000
*                                                                  1670 05549000
*     GOTO NP0FRPCC;                /* GO TO ROUTINE TO FREE THE PCCA*/ 05550000
*/*                                                            Y02751*/ 05551000
*                                                                  1671 05552000
*   IF NDSGNLRC=8                   /* CHECK IF RET. CODE = 8        */ 05553000
*     THEN                          /* IF SO, THE SIGP FUNCTION WAS     05554000
*                                      UNSUCCESSFUL - TREAT THE CPU     05555000
*                                      AS OFFLINE                    */ 05556000
         CH    NDSGNLRC,@CH00068                                   1671 05557000
         BNE   @RF01671                                            1671 05558000
*/*                                                            Y02751*/ 05559000
*                                                                  1672 05560000
*     DO;                                                          1672 05561000
*                                                                  1672 05562000
*/*                                                            Y02751*/ 05563000
*                                                                  1673 05564000
*       CALL NP0MSGA;               /* CALL RTN. TO SET UP A MESSAGE    05565000
*                                      ABOUT THIS                    */ 05566000
         BAL   @14,NP0MSGA                                         1673 05567000
*/*                                                            Y02751*/ 05568000
*                                                                  1674 05569000
*       GOTO NP0FRPCC;              /* GO TO ROUTINE TO FREE THE PCCA*/ 05570000
         B     NP0FRPCC                                            1674 05571000
*/*                                                            Y02751*/ 05572000
*                                                                  1675 05573000
*     END;                                                         1675 05574000
*                                                                  1675 05575000
*/*                                                            Y02751*/ 05576000
*                                                                  1676 05577000
*   IF NDSGNLRC=4                   /* CHECK IF RET. CODE = 4        */ 05578000
*     THEN                          /* IF SO, THE SIGP FUNCTION WAS     05579000
*                                      NOT COMPLETED.                */ 05580000
@RF01671 CH    NDSGNLRC,@CH00062                                   1676 05581000
         BNE   @RF01676                                            1676 05582000
*/*                                                            Y02751*/ 05583000
*                                                                  1677 05584000
*     DO;                                                          1677 05585000
*                                                                  1677 05586000
*/*                                                            Y02751*/ 05587000
*                                                                  1678 05588000
*       NIPCLOOP=NIPCLOOP           /* DECREMENT IPC LOOP COUNTER BY    05589000
*                                      1                             */ 05590000
*           -1;                                                    1678 05591000
*                                                                  1678 05592000
         BCTR  NIPCLOOP,0                                          1678 05593000
*/*                                                            Y02751*/ 05594000
*                                                                  1679 05595000
*       IF NIPCLOOP>0               /* IF LOOP COUNTER NOT ZERO      */ 05596000
*         THEN                      /* TRY THE DSGNL AGAIN           */ 05597000
         LTR   NIPCLOOP,NIPCLOOP                                   1679 05598000
         BP    @RT01679                                            1679 05599000
*/*                                                            Y02751*/ 05600000
*                                                                  1680 05601000
*         GOTO NIP0IPR;                                            1680 05602000
*       ELSE                        /* IF LOOP COUNTER IS ZERO -     */ 05603000
*/*                                                            Y02751*/ 05604000
*                                                                  1681 05605000
*         DO;                       /* TREAT THE CPU AS OFFLINE      */ 05606000
*/*                                                            Y02751*/ 05607000
*                                                                  1682 05608000
*           CALL NP0MSGB;           /* CALL RTN. TO SET UP A MESSAGE    05609000
*                                      ABOUT THIS                    */ 05610000
         BAL   @14,NP0MSGB                                         1682 05611000
*/*                                                            Y02751*/ 05612000
*                                                                  1683 05613000
*           GOTO NP0FRPCC;          /* GO TO ROUTINE TO FREE THE PCCA*/ 05614000
         B     NP0FRPCC                                            1683 05615000
*/*                                                            Y02751*/ 05616000
*                                                                  1684 05617000
*         END;                                                     1684 05618000
*                                                                  1684 05619000
*/*                                                            Y02751*/ 05620000
*                                                                  1685 05621000
*     END;                                                         1685 05622000
*                                                                  1685 05623000
*/*                                                            Y02751*/ 05624000
*                                                                  1686 05625000
*   IF NDSGNLRC^=0                  /* CHECK IF RET. CODE IS NON-ZERO*/ 05626000
*     THEN                          /* IF SO, DSGNL (IPC ROUTINE) HAS   05627000
*                                      RETURNED AN UN-DEFINED RETURN    05628000
*                                      CODE.                         */ 05629000
@RF01676 LTR   NDSGNLRC,NDSGNLRC                                   1686 05630000
         BZ    @RF01686                                            1686 05631000
*/*                                                            Y02751*/ 05632000
*                                                                  1687 05633000
*     DO;                                                          1687 05634000
*                                                                  1687 05635000
*/*                                                            Y02751*/ 05636000
*                                                                  1688 05637000
*       CALL NP0MSGC;               /* CALL RTN. TO SET UP A MESSAGE    05638000
*                                      ABOUT THIS                    */ 05639000
         BAL   @14,NP0MSGC                                         1688 05640000
*/*                                                            Y02751*/ 05641000
*                                                                  1689 05642000
*       GOTO NP0FRPCC;              /* GO TO ROUTINE TO FREE THE PCCA*/ 05643000
         B     NP0FRPCC                                            1689 05644000
*/* NOTE: IN THE INTEREST IF KEEPING THE NIP PROCESS GOING, THE      */ 05645000
*/*       ABOVE SITUATION DOES NOT RESULT IN A WAIT STATE.           */ 05646000
*/*                                                            Y02751*/ 05647000
*                                                                  1690 05648000
*     END;                                                         1690 05649000
*                                                                  1690 05650000
*/* NOTE: THE ABOVE SEQUENCE DOES NOT CHECK FOR A RETURN CODE OF 16. */ 05651000
*/*       THIS RETURN CODE WOULD BE GENERATED BY DSGNL (IPC ROUTINE) */ 05652000
*/*       IF THE SIGP INSTRUCTION GENERATED A PROGRAM CHECK (I.E.    */ 05653000
*/*       THE CONFIGURATION IS NOT MULTI-PROCESSOR).  NIP0 CHECKS    */ 05654000
*/*       ITS M.P. FLAG AND IF IT INDICATES U.P., THE M.P. INIT-     */ 05655000
*/*       IALIZATION ROUTINE IS BYPASSED.  THUS IF A RETURN CODE OF  */ 05656000
*/*       16 IS RETURNED BY DSGNL, IT IS AN ERROR BY DSGNL OR A      */ 05657000
*/*       SPURIOUS PROGRAM CHECK.                                    */ 05658000
*/*                                                                  */ 05659000
*/* FALL THROUGH INTO THIS CODE IF DSGNL FOR IPR (INITIAL PROGRAM    */ 05660000
*/* RESET) SUCCEEDED                                                 */ 05661000
*                                                                  1691 05662000
*   /*****************************************************************/ 05663000
*   /*                                                               */ 05664000
*   /* WAIT FOR RESET TO COMPLETE                                    */ 05665000
*   /*                                                               */ 05666000
*   /*****************************************************************/ 05667000
*                                                                  1691 05668000
*CPUSNS:                                                           1691 05669000
*   NDSGNLRG=NCURVPCC;              /* ADDR OF PCCA FOR IPC  @Z30ENXA*/ 05670000
@RF01686 DS    0H                                                  1691 05671000
CPUSNS   L     NDSGNLRG,NCURVPCC                                   1691 05672000
*   GEN(DSGNL SENSE,CPU=(1));       /* SENSE SIGNALLED CPU   @Z30ENXA*/ 05673000
         DSGNL SENSE,CPU=(1)                                            05674000
*   IF NDSGNLRC=4 THEN              /* BUSY?                 @Z30ENXA*/ 05675000
         CH    NDSGNLRC,@CH00062                                   1693 05676000
         BE    @RT01693                                            1693 05677000
*     GOTO CPUSNS;                  /* LOOP TILL COMPLETE    @Z30ENXA*/ 05678000
*   IF NDSGNLRC=8 THEN              /* STATUS STORED         @Z30ENXA*/ 05679000
         CH    NDSGNLRC,@CH00068                                   1695 05680000
         BNE   @RF01695                                            1695 05681000
*     DO;                                                          1696 05682000
*                                                                  1696 05683000
*       /*************************************************************/ 05684000
*       /*                                                           */ 05685000
*       /* STORE SENSE INFOR AND INTERROGATE                         */ 05686000
*       /*                                                           */ 05687000
*       /*************************************************************/ 05688000
*                                                                  1697 05689000
*       TEMPWORK=NDSGNLST;          /* STORE STATUS          @Z30ENXA*/ 05690000
         ST    NDSGNLST,TEMPWORK                                   1697 05691000
*       IF CKSTOP='1'B|OPINT='1'B|RECCK='1'B|NTRDY='1'B THEN/* ERROR?*/ 05692000
         TM    CKSTOP,B'00111001'                                  1698 05693000
         BZ    @RF01698                                            1698 05694000
*         DO;                                                      1699 05695000
*           CALL NP0MSGB;           /* PUT OUT MESSAGE       @Z30ENXA*/ 05696000
         BAL   @14,NP0MSGB                                         1700 05697000
*           GOTO NP0FRPCC;          /* GREE STORAGE          @Z30ENXA*/ 05698000
         B     NP0FRPCC                                            1701 05699000
*         END;                                                     1702 05700000
*     END;                                                         1703 05701000
@RF01698 DS    0H                                                  1704 05702000
*   RFY                                                            1704 05703000
*    (NDSGNLST,                                                    1704 05704000
*     NDSGNLRC) UNRSTD;                                            1704 05705000
*                                                                  1704 05706000
@RF01695 DS    0H                                                  1705 05707000
*/* CONTINUE INITIALIZATION OF THE PCCA FOR THE CURRENT CPU          */ 05708000
*/*                                                            Y02751*/ 05709000
*                                                                  1705 05710000
*   PCCAPCCA='PCCA';                /* PUT ACRONYM 'PCCA' IN PCCA    */ 05711000
         L     @02,NCURVPCC                                        1705 05712000
         MVC   PCCAPCCA(4,@02),@CC05049                            1705 05713000
*   RFY                                                            1706 05714000
*    (NP0GMLEN,                                                    1706 05715000
*     AREAAD) RSTD;                                                1706 05716000
*                                                                  1706 05717000
*/*                                                            Y02751*/ 05718000
*                                                                  1707 05719000
*   NP0GMLEN=NLCCALEN;              /* LOAD REG. 0 WITH LENGTH OF  1707 05720000
*                                      LCCA                          */ 05721000
         LH    NP0GMLEN,NLCCALEN                                   1707 05722000
*/*                                                            Y02751*/ 05723000
*                                                                  1708 05724000
*NGTLCCA:                                                          1708 05725000
*   GEN;                                                           1708 05726000
*                                                                  1708 05727000
NGTLCCA  DS    0H                                                  1708 05728000
*                                 /* GETMAIN SPACE FOR AN LCCA      */  05729000
         GETMAIN   RU,LV=(0),SP=245,                                  XX05730000
               RELATED=('LCCA FOR CURRENT CPU, SP 245, FREED IN       XX05731000
               IEAVNIP0 AT LABEL: NFRLCCA1 OR NFRLCCA2')                05732000
*/*                                                            Y02751*/ 05733000
*                                                                  1709 05734000
*   NCURVLCC=AREAAD;                /* PUT VIRT. ADDR. OF NEW LCCA IN   05735000
*                                      CPU INITIALIZATION CONTROL  1709 05736000
*                                      BLOCK.                        */ 05737000
         ST    AREAAD,NCURVLCC                                     1709 05738000
*/*                                                            Y02751*/ 05739000
*                                                                  1710 05740000
*   GEN(LRA    AREAAD,0(0,AREAAD)); /* LOAD REAL ADDR. OF NEW LCCA   */ 05741000
         LRA    AREAAD,0(0,AREAAD)                                      05742000
*/*                                                            Y02751*/ 05743000
*                                                                  1711 05744000
*   NCURRLCC=AREAAD;                /* PUT REAL ADDR OF NEW LCCA IN     05745000
*                                      CPU INITIALIZATION CONTROL  1711 05746000
*                                      BLOCK.                        */ 05747000
         ST    AREAAD,NCURRLCC                                     1711 05748000
*   RFY                                                            1712 05749000
*    (NP0GMLEN,                                                    1712 05750000
*     AREAAD) UNRSTD;                                              1712 05751000
*                                                                  1712 05752000
*/* SET UP PARAMETERS FOR CALL TO SUBROUTINE TO CLEAR AREA TO ZEROS  */ 05753000
*/*                                                            Y02751*/ 05754000
*                                                                  1713 05755000
*   NCLRBASE=NCURVLCC;              /* SET UP VIRT. ADDR. OF AREA TO    05756000
*                                      BE CLEARED.                   */ 05757000
         L     NCLRBASE,NCURVLCC                                   1713 05758000
*/*                                                            Y02751*/ 05759000
*                                                                  1714 05760000
*   NCLRLEN=NLCCALEN;               /* SET UP LENGTH OF AREA TO BE 1714 05761000
*                                      CLEARED.                      */ 05762000
         MVC   NCLRLEN(2),NLCCALEN                                 1714 05763000
*/*                                                            Y02751*/ 05764000
*                                                                  1715 05765000
*   CALL NIP0CLRZ;                  /* CALL THE SUBROUTINE           */ 05766000
         BAL   @14,NIP0CLRZ                                        1715 05767000
*   RFY                                                            1716 05768000
*    (LCCA) BASED(NCURVLCC);                                       1716 05769000
*                                                                  1716 05770000
*/*                                                            Y02751*/ 05771000
*                                                                  1717 05772000
*   LCCVTPTR=CVTLCCAT               /* PUT VIRT. ADDR. OF LCCAVT   1717 05773000
*                                      ENTRY                         */ 05774000
*       +(LENGTH(LCCAT00P)          /* CORRES. TO CURR. CPU IN BASE  */ 05775000
*       *NCURCPUA);                 /* FOR MAPPING OF LCCAVT ENTRY   */ 05776000
         LH    @02,NCURCPUA                                        1717 05777000
         LR    @15,@02                                             1717 05778000
         SLA   @15,2                                               1717 05779000
         AL    @15,CVTLCCAT(,RCVT)                                 1717 05780000
         ST    @15,LCCVTPTR                                        1717 05781000
*/*                                                            Y02751*/ 05782000
*                                                                  1718 05783000
*   LCCVTENT=NCURVLCC;              /* PUT VIRT. ADDR. OF LCCA FOR 1718 05784000
*                                      CURR. CPU IN LCCAVT ENTRY   1718 05785000
*                                      CORRES. TO CURR. CPU          */ 05786000
         L     @14,NCURVLCC                                        1718 05787000
         ST    @14,LCCVTENT(,@15)                                  1718 05788000
*/*                                                            Y02751*/ 05789000
*                                                                  1719 05790000
*   LCCALCCA='LCCA';                /* PUT ACRONYM 'LCCA' IN CURR. 1719 05791000
*                                      LCCA                          */ 05792000
         MVC   LCCALCCA(4,@14),@CC05054                            1719 05793000
*/*                                                            Y02751*/ 05794000
*                                                                  1720 05795000
*   LCCACPUA=NCURCPUA               /* PUT LOGICAL ADDR. OF CURR. CPU*/ 05796000
*       +'40'X;                     /* IN CURR. LCCA                 */ 05797000
         AH    @02,@CH02302                                        1720 05798000
         STH   @02,LCCACPUA(,@14)                                  1720 05799000
*/*                                                            Y02751*/ 05800000
*                                                                  1721 05801000
*   LCCAMCR1=NP0CRG1;               /* PUT MASTER SCHEDULER'S STOR 1721 05802000
*                                      (CONTROL REGISTER 1) IN CURR.    05803000
*                                      LCCA.                         */ 05804000
*                                                                  1721 05805000
         MVC   LCCAMCR1(4,@14),NP0CRG1                             1721 05806000
*   /*****************************************************************/ 05807000
*   /*                                                               */ 05808000
*   /* SET UP TO CALL 'IEAVSPSA' ROUTINE TO ALLOCATE SUPERVISOR      */ 05809000
*   /* ROUTINE WORK/SAVE AREAS FOR CURRENT CPU.                      */ 05810000
*   /*                                                               */ 05811000
*   /*****************************************************************/ 05812000
*                                                                  1722 05813000
*   RFY                                                            1722 05814000
*    (NSPSAREG,                                                    1722 05815000
*     NSPSARCD) RSTD;                                              1722 05816000
*                                                                  1722 05817000
*/*                                                            Y02751*/ 05818000
*                                                                  1723 05819000
*   NSPSAREG=NSPSAREG               /* CLEAR PARM. REG. (REG. 1) TO  */ 05820000
*       &&NSPSAREG;                 /* ZERO TO INDICATE REQUEST TO 1723 05821000
*                                      GETMAIN THE WORK/SAVE AREAS   */ 05822000
         XR    NSPSAREG,NSPSAREG                                   1723 05823000
*/*                                                            Y02751*/ 05824000
*                                                                  1724 05825000
*   CALL IEAVSPSA;                  /* CALL THE SUBROUTINE           */ 05826000
         BAL   @14,IEAVSPSA                                        1724 05827000
*/*                                                            Y02751*/ 05828000
*                                                                  1725 05829000
*   IF NSPSARCD^=0                  /* CHECK IF 'IEAVSPSA' RETURNED A   05830000
*                                      NON-ZERO CODE                 */ 05831000
*/*                                                            Y02751*/ 05832000
*                                                                  1725 05833000
*     THEN                          /* IF SO, THERE WAS AN ERROR OF     05834000
*                                      SOME KIND                     */ 05835000
         LTR   NSPSARCD,NSPSARCD                                   1725 05836000
         BNZ   @RT01725                                            1725 05837000
*/*                                                            Y02751*/ 05838000
*                                                                  1726 05839000
*     GOTO NP0SPSAE;                /* GO TO ERROR ROUTINE           */ 05840000
*/*                                                            Y02751*/ 05841000
*                                                                  1727 05842000
*   ELSE                            /* IF THERE WAS NO ERROR         */ 05843000
*/*                                                            Y02751*/ 05844000
*                                                                  1727 05845000
*     LCCACPUS=NSPSAREG;            /* PUT VIRT. ADDR. OF WORK/SAVE     05846000
*                                      AREA VECTOR TABLE IN CURR.  1727 05847000
*                                      LCCA                          */ 05848000
         L     @14,NCURVLCC                                        1727 05849000
         ST    NSPSAREG,LCCACPUS(,@14)                             1727 05850000
*   RFY                                                            1728 05851000
*    (NSPSAREG,                                                    1728 05852000
*     NSPSARCD) UNRSTD;                                            1728 05853000
*                                                                  1728 05854000
*/* SET UP POINTERS TO MOVE 'CLEAN' PSA FROM SAVE AREA (ABOVE THE    */ 05855000
*/* NUCLEUS) TO ABSOLUTE 0-4K.  THIS REQUIRES 'REVERSE PREFIXING'    */ 05856000
*/* IN ORDER TO ACCESS ABS. 0-4K.                                    */ 05857000
*/*                                                                  */ 05858000
*/* NOTE: THIS PSA IS NOT PRISTINE, THE SYS GEN'D PROGRAM CHECK NEW  */ 05859000
*/*       PSW HAS BEEN RESTORED BUT THE WAIT BIT (SYS GEN'D ON) HAS  */ 05860000
*/*       BEEN SET OFF.  ALSO, THE MACHINE CHECK NEW PSW POINTS TO   */ 05861000
*/*       IEAVNIP0'S MACHINE CHECK TRAP.                             */ 05862000
*/*                                                                  */ 05863000
*/* NOTE: WHEN DAT IS ON, PREFEXING IS DONE ON THE TRANSLATED        */ 05864000
*/*       ADDRESS, NOT ON THE UN-TRANSLATED ADDRESS                  */ 05865000
*                                                                  1729 05866000
*   RFY                                                            1729 05867000
*    (REG4,                                                        1729 05868000
*     REG5,                                                        1729 05869000
*     REG6,                                                        1729 05870000
*     REG7) RSTD;                                                  1729 05871000
*   REG4=NICPVPSA;                  /* VIRT ADDR OF MY PSA FOR REVERS   05872000
*                                      PREFXING                      */ 05873000
         L     REG4,NICPVPSA                                       1730 05874000
*   REG5=4096;                      /* LENGTH OF PSA         @Z30ENXA*/ 05875000
         LH    @02,@CH04248                                        1731 05876000
         LR    REG5,@02                                            1731 05877000
*   REG6=NP0PSASA;                  /* ADDR OF CLEAN PSA     @Z30ENXA*/ 05878000
         L     REG6,NP0PSASA                                       1732 05879000
*   REG7=4096;                      /* LENGTH OF PSA         @Z30ENXA*/ 05880000
         LR    REG7,@02                                            1733 05881000
*   GEN(MVCL REG4,REG6);            /* MOVE PSA              @Z30ENXA*/ 05882000
         MVCL REG4,REG6                                                 05883000
*   RFY                                                            1735 05884000
*    (REG4,                                                        1735 05885000
*     REG5,                                                        1735 05886000
*     REG6,                                                        1735 05887000
*     REG7) UNRSTD;                 /*                       @Z30ENXA*/ 05888000
*   RFY                                                            1736 05889000
*    (PSA) BASED(NICPVPSA);         /* RESPECIFY PSA MAP TO BE BASED    05890000
*                                      ON VIRT. ADDR. OF PSA FOR THE    05891000
*                                      CPU THIS CODE IS EXECUTING ON.   05892000
*                                      THIS WILL CAUSE REVERSE PRE-     05893000
*                                      FIXING.                       */ 05894000
*/*                                                            Y02751*/ 05895000
*                                                                  1737 05896000
*   FLCRNPSW=NRSTRPSW;              /* PUT RESTART PSW, POINTING TO     05897000
*                                      NIP0 RTN. 'NIP0CPUI', IN PSA     05898000
*                                      IN ABS. 0-4K. THIS PSW WILL BE   05899000
*                                      LOADED BY THE SIGNALLED CPU 1737 05900000
*                                      WHEN A SIGP-RESTART IS      1737 05901000
*                                      EXECUTED TO THAT CPU.         */ 05902000
         L     @02,NICPVPSA                                        1737 05903000
         MVC   FLCRNPSW(8,@02),NRSTRPSW                            1737 05904000
*                                                                  1738 05905000
*   /*****************************************************************/ 05906000
*   /*                                                               */ 05907000
*   /* GETMAIN 4K IN SQA ON A PAGE BOUND FOR A PSA FOR THE NEW CPU   */ 05908000
*   /*                                                               */ 05909000
*   /*****************************************************************/ 05910000
*                                                                  1738 05911000
*   RFY                                                            1738 05912000
*    (AREAAD) RSTD;                                                1738 05913000
*                                                                  1738 05914000
*/*                                                            Y02751*/ 05915000
*                                                                  1739 05916000
*NGTPSA:                                                           1739 05917000
*   GEN;                                                           1739 05918000
*                                                                  1739 05919000
NGTPSA   DS    0H                                                  1739 05920000
         GETMAIN   RU,LV=4096,SP=245,BNDRY=PAGE,                      XX05921000
               RELATED=('PSA FOR CURRENT CPU, SP 245, FREED IN        XX05922000
               IEAVNIP0 AT LABEL: NFRPSA1 OR NFRPSA2')                  05923000
*/* NOTE: THE GETMAIN IS DONE ON THE MOTHER CPU. THE CODE TO MOVE    */ 05924000
*/*       THE PSA FROM ABS. 0-4K TO THIS AREA IN SQA WILL BE         */ 05925000
*/*       EXECUTED ON THE OTHER CPU.                                 */ 05926000
*/*                                                            Y02751*/ 05927000
*                                                                  1740 05928000
*   NCURVPSA=AREAAD;                /* PUT THAT ADDR. IN THE CPU   1740 05929000
*                                      INITIALIZATION CONTROL BLOCK  */ 05930000
         ST    AREAAD,NCURVPSA                                     1740 05931000
*/*                                                            Y02751*/ 05932000
*                                                                  1741 05933000
*   GEN(LRA   AREAAD,0(0,AREAAD));  /* LOAD REAL ADDR. OF THE SQA  1741 05934000
*                                      AREA                          */ 05935000
         LRA   AREAAD,0(0,AREAAD)                                       05936000
*/*                                                            Y02751*/ 05937000
*                                                                  1742 05938000
*   NCURRPSA=AREAAD;                /* PUT THAT ADDR. IN THE CPU   1742 05939000
*                                      INITIALIZATION CONTROL BLOCK  */ 05940000
         ST    AREAAD,NCURRPSA                                     1742 05941000
*   RFY                                                            1743 05942000
*    (AREAAD) UNRSTD;                                              1743 05943000
*                                                                  1743 05944000
*   /*****************************************************************/ 05945000
*   /*                                                               */ 05946000
*   /* SET UP FOR CALL TO THE SUBROUTINE TO CLEAR AN AREA TO ZEROS   */ 05947000
*   /*                                                               */ 05948000
*   /*****************************************************************/ 05949000
*                                                                  1744 05950000
*/*                                                            Y02751*/ 05951000
*                                                                  1744 05952000
*   NCLRBASE=NCURVPSA;              /* SET UP VIRT. ADDR. OF AREA TO    05953000
*                                      BE CLEARED                    */ 05954000
         L     NCLRBASE,NCURVPSA                                   1744 05955000
*/*                                                            Y02751*/ 05956000
*                                                                  1745 05957000
*   NCLRLEN=LENGTH(PSA);            /* SET UP LENGTH OF AREA TO BE 1745 05958000
*                                      CLEARED                       */ 05959000
         MVC   NCLRLEN(2),@CH04248                                 1745 05960000
*/*                                                            Y02751*/ 05961000
*                                                                  1746 05962000
*   CALL NIP0CLRZ;                  /* CALL THE SUBROUTINE           */ 05963000
         BAL   @14,NIP0CLRZ                                        1746 05964000
*   RFY                                                            1747 05965000
*    (NP0GMLEN,                                                    1747 05966000
*     AREAAD) RSTD;                                                1747 05967000
*                                                                  1747 05968000
*/*                                                            Y02751*/ 05969000
*                                                                  1748 05970000
*   NP0GMLEN=YSTAKLEN;              /* LOAD REG. 0 WITH LENGTH OF FRR   05971000
*                                      STACKS                        */ 05972000
         LH    NP0GMLEN,@CH03735                                   1748 05973000
*/* GETMAIN SPACE IN SQA FOR THE FRR STACKS FOR THE NEW CPU          */ 05974000
*/*                                                            Y02751*/ 05975000
*                                                                  1749 05976000
*NGTFRRS:                                                          1749 05977000
*   GEN;                                                           1749 05978000
*                                                                  1749 05979000
NGTFRRS  DS    0H                                                  1749 05980000
         GETMAIN  RU,LV=(0),SP=245,                                   XX05981000
               RELATED=('FRR STACKS FOR CURRENT CPU, SP 245, FREED IN XX05982000
               IEAVNIP0 AT LABEL: NFRFRRS1 OR NFRFRRS2')                05983000
*/* NOTE: THE GETMAIN IS DONE ON THE MOTHER CPU.  THE CODE TO        */ 05984000
*/*       INITIALIZE THE FRR STACKS (IEAVTSIN) WILL BE EXECUTED      */ 05985000
*/*       ON THE OTHER CPU.                                          */ 05986000
*/*                                                            Y02751*/ 05987000
*                                                                  1750 05988000
*   PSACSTK=AREAAD;                 /* PUT VIRT. ADDR. OF THE FRR  1750 05989000
*                                      STACKS IN PSA FOR THE NEW CPU.*/ 05990000
         L     @15,NICPVPSA                                        1750 05991000
         ST    AREAAD,PSACSTK(,@15)                                1750 05992000
*/* THE PSA FOR THE NEW CPU IS AT ABSOLUTE 0-4K                      */ 05993000
*/* THE STACK INITIALIZATION ROUTINE 'IEAVTSIN' PICK UP THE ADDRESS  */ 05994000
*/* OF THE STACKS FROM THIS FIELD IN THE PSA                         */ 05995000
*/*                                                                  */ 05996000
*/* NOTE: THE PSA IS STILL BASED ON THE VIRTUAL ADDRESS OF THE PSA   */ 05997000
*/* FOR THE MOTHER CPU, THUS CAUSING REVERSE PREFEXING.              */ 05998000
*/*                                                            Y02751*/ 05999000
*                                                                  1751 06000000
*   NCURVFRR=AREAAD;                /* PUT THE SAME VIRT. ADDR. IN 1751 06001000
*                                      CPU INITIALIZATION CONTROL  1751 06002000
*                                      BLOCK                         */ 06003000
         ST    AREAAD,NCURVFRR                                     1751 06004000
*   RFY                                                            1752 06005000
*    (NP0GMLEN,                                                    1752 06006000
*     AREAAD) UNRSTD;                                              1752 06007000
*                                                                  1752 06008000
*/* SET UP FOR A CALL TO THE SUBROUTINE TO CLEAR AN AREA TO ZEROS    */ 06009000
*/*                                                            Y02751*/ 06010000
*                                                                  1753 06011000
*   NCLRBASE=NCURVFRR;              /* SET UP VIRT. ADDR. OF AREA TO    06012000
*                                      BE CLEARED                    */ 06013000
         L     @15,NCURVFRR                                        1753 06014000
         LR    NCLRBASE,@15                                        1753 06015000
*/*                                                            Y02751*/ 06016000
*                                                                  1754 06017000
*   NCLRLEN=YSTAKLEN;               /* SET UP LENGTH OF AREA TO BE 1754 06018000
*                                      CLEARED                       */ 06019000
         MVC   NCLRLEN(2),@CH03735                                 1754 06020000
*/*                                                            Y02751*/ 06021000
*                                                                  1755 06022000
*   CALL NIP0CLRZ;                  /* CALL THE SUBROUTINE           */ 06023000
         BAL   @14,NIP0CLRZ                                        1755 06024000
*                                                                  1756 06025000
*   /*****************************************************************/ 06026000
*   /*                                                               */ 06027000
*   /* SET UP TO EXECUTE A SIGP RESTART TO CURRENT CPU       @YM03234*/ 06028000
*   /*                                                               */ 06029000
*   /*****************************************************************/ 06030000
*                                                                  1756 06031000
*   RFY                                                            1756 06032000
*    (NDSGNLST,                                                    1756 06033000
*     NDSGNLRG,                                                    1756 06034000
*     NDSGNLRC) RSTD;                                              1756 06035000
*NP0RSTRT:                                                         1757 06036000
*                                                                  1757 06037000
*/*                                                            Y02751*/ 06038000
*                                                                  1757 06039000
*   NDSGNLRG=NCURVPCC;              /* PUT VIRT. ADDR. OF PCCA FOR 1757 06040000
*                                      CURR. CPU IN REG. 1           */ 06041000
*                                                                  1757 06042000
NP0RSTRT L     NDSGNLRG,NCURVPCC                                   1757 06043000
*   /*****************************************************************/ 06044000
*   /*                                                               */ 06045000
*   /* INVOKE DSGNL MACRO (IPC) FOR RESTART FUNCTION         @YM03234*/ 06046000
*   /*                                                               */ 06047000
*   /*****************************************************************/ 06048000
*                                                                  1758 06049000
*   GEN(DSGNL   RESTART,CPU=(1))                                   1758 06050000
*   SETS(NDSGNLST,NDSGNLRC) REFS(CVTPTR,CVTIPCDS,CVT);             1758 06051000
         DSGNL   RESTART,CPU=(1)                                        06052000
*   RFY                                                            1759 06053000
*    (NDSGNLRG) UNRSTD;                                            1759 06054000
*                                                                  1759 06055000
*/*                                                            Y02751*/ 06056000
*                                                                  1760 06057000
*   /*****************************************************************/ 06058000
*   /*                                                               */ 06059000
*   /* DETERMINE IF THE SIGP RESTART WAS ACCEPTED. THE BELOW SEQUENCE*/ 06060000
*   /* DOES NOT CHECK FOR A RETURN CODE OF 16 OR 12 FROM IPC. RETURN */ 06061000
*   /* CODE 16 INDICATES A PROGRAM CHECK ON THE SIGP INSTRUCTION.    */ 06062000
*   /* THIS SHOULD NEVER OCCUR SINCE IEAVNIP0 BYPASSES THE M.P.      */ 06063000
*   /* INITIALIZATION SEQUENCE IF THE CONFIGURATION IS U.P. RETURN   */ 06064000
*   /* CODE 12 INDICATES THE SIGNALLED CPU IS OFFLINE. THIS SHOULD   */ 06065000
*   /* NEVER OCCUR ON THE IPC-RESTART SINCE THE SAME RETURN CODE FROM*/ 06066000
*   /* IPC-IPR WOULD HAVE CAUSED IEAVNIP0 TO BYPASS THE IPC-RESTART  */ 06067000
*   /* SEQUENCE. THUS, IF EITHER OF THESE CODES IS RETURNED BY       */ 06068000
*   /* IPC-RESTART, THEY SHOULD BE DUE TO ERRORS IN THE IPC ROUTINE  */ 06069000
*   /* OR SPURIOUS PROGRAM CHECKS.                           @YM03234*/ 06070000
*   /*                                                               */ 06071000
*   /*****************************************************************/ 06072000
*                                                                  1760 06073000
*   IF NDSGNLRC^=0                  /* CHECK IF RET. CODE = 0        */ 06074000
*     THEN                          /* IF NOT, THE SIGP FUNCTION WAS    06075000
*                                      UN-SUCCESSFUL         @YM03234*/ 06076000
         LTR   NDSGNLRC,NDSGNLRC                                   1760 06077000
         BNZ   @RT01760                                            1760 06078000
*     GOTO NP0STOP;                 /* GO RESET THE CPU      @YM03234*/ 06079000
*   RFY                                                            1762 06080000
*    (NDSGNLST,                                                    1762 06081000
*     NDSGNLRC) UNRSTD;                                            1762 06082000
*NMPSYNC1:                          /* FALL THROUGH INTO THIS CODE IF   06083000
*                                      THE IPC-RESTART RETURN CODE =    06084000
*                                      0.                    @YM03234*/ 06085000
*   NRNAWSYN='1'B;                  /* TURN ON RUN-AWAY SYNCHRON-  1763 06086000
*                                      IZATION FLAG. THIS INDICATES     06087000
*                                      TO THE SIGNALLED CPU THAT THE    06088000
*                                      RUN-AWAY FLAG CAN BE CHECKED     06089000
*                                      AND WILL BE VALID (I.E. THE 1763 06090000
*                                      RUN-AWAY FLAG HAS BEEN SET OR    06091000
*                                      DOES NOT NEED TO BE SET).     */ 06092000
NMPSYNC1 LA    @14,NRNAWSYN                                        1763 06093000
         LR    @07,@14                                             1763 06094000
         LA    @02,3                                               1763 06095000
         NR    @07,@02                                             1763 06096000
         LCR   @07,@07                                             1763 06097000
         ALR   @14,@07                                             1763 06098000
         L     @02,0(,@14)                                         1763 06099000
@GL00005 LR    @15,@02                                             1763 06100000
         O     @15,@CB05606+3(@07)                                 1763 06101000
         CS    @02,@15,0(@14)                                      1763 06102000
         BNE   @GL00005                                            1763 06103000
*/*                                                            Y02751*/ 06104000
*                                                                  1764 06105000
*   DO I=4000000 TO 0 BY-1;         /* SET UP A SPIN LOOP TO CHECK A    06106000
*                                      FLAG SET BY THE SIGNALLED CPU    06107000
*                                      TO INDICATE THAT IT HAS     1764 06108000
*                                      STARTED PROPERLY.             */ 06109000
         L     I,@CF05238                                          1764 06110000
@DL01764 DS    0H                                                  1765 06111000
*/*                                                            Y02751*/ 06112000
*                                                                  1765 06113000
*     IF NCPUSTRT='1'B              /* CHECK IF THE FLAG IS SET      */ 06114000
*       THEN                        /* IF SO, THE CPU HAS STARTED  1765 06115000
*                                      PROPERLY.                     */ 06116000
         TM    NCPUSTRT,B'00010000'                                1765 06117000
         BO    @RT01765                                            1765 06118000
*/*                                                            Y02751*/ 06119000
*                                                                  1766 06120000
*       GOTO NMPSYNC2;              /* GO TO SECOND SYNCHRONIZATION     06121000
*                                      ROUTINE.                      */ 06122000
*/*                                                            Y02751*/ 06123000
*                                                                  1767 06124000
*     ELSE                                                         1767 06125000
*       ;                           /* OTHERWISE, LOOP               */ 06126000
*/*                                                            Y02751*/ 06127000
*                                                                  1768 06128000
*   END;                                                           1768 06129000
*                                                                  1768 06130000
         BCTR  I,0                                                 1768 06131000
         LTR   I,I                                                 1768 06132000
         BNM   @DL01764                                            1768 06133000
*   /*****************************************************************/ 06134000
*   /*                                                               */ 06135000
*   /* IF LOOP SPINS OUT, FALL INTO NEXT RTN. TO RESET CPU AND FREE  */ 06136000
*   /* ANY MAIN STORAGE AREAS ALLOCATED TO IT                @YM03234*/ 06137000
*   /*                                                               */ 06138000
*   /*****************************************************************/ 06139000
*                                                                  1769 06140000
*                                                                  1769 06141000
*   /*****************************************************************/ 06142000
*   /*                                                               */ 06143000
*   /* COME HERE IF NON ZERO RETURN CODE FROM SIGP RESTART OR COME   */ 06144000
*   /* HERE IF THE LOOP(S) CHECKING THE 'CPU STARTED' OR THE 'CPU    */ 06145000
*   /* FINISHED' FLAG SPIN OUT, THAT IS THE FLAG(S) DID NOT GET SET  */ 06146000
*   /* IN THE TIME ALLOWED BY THE SPIN VALUE AND IT IS ASSUMED THAT  */ 06147000
*   /* THE CPU DID NOT GET STARTED PROPERLY OR DID NOT FINISH ITS    */ 06148000
*   /* INITIALIZATION. THE CPU IS TREATED AS OFFLINE.        @YM03234*/ 06149000
*   /*                                                               */ 06150000
*   /*****************************************************************/ 06151000
*                                                                  1769 06152000
*NP0STOP:                                                          1769 06153000
*   NPRNAWAY='1'B;                  /* TURN ON RUN AWAY FLAG. THIS 1769 06154000
*                                      FLAG WILL BE CHECKED BY THE 1769 06155000
*                                      SIGNALLED CPU (IF IT WAS    1769 06156000
*                                      STARTED) AND, IF ON, THAT CPU    06157000
*                                      WILL LOAD A WAIT STATE PSW. 1769 06158000
*                                                            @YM03234*/ 06159000
NP0STOP  DS    0H                                                  1770 06160000
*   NRNAWSYN='1'B;                  /* TURN ON RUN-AWAY SYNCHRON-  1770 06161000
*                                      IZATION FLAG. THIS INDICATES     06162000
*                                      TO THE SIGNALLED CPU THAT THE    06163000
*                                      RUN-AWAY FLAG CAN BE CHECKED     06164000
*                                      AND WILL BE VALID (I.E. THE 1770 06165000
*                                      RUN-AWAY FLAG HAS BEEN SET OR    06166000
*                                      DOES NOT NEED TO BE SET).   1770 06167000
*                                                            @YM03234*/ 06168000
         LA    @14,NPRNAWAY                                        1770 06169000
         LR    @07,@14                                             1770 06170000
         LA    @02,3                                               1770 06171000
         NR    @07,@02                                             1770 06172000
         LCR   @07,@07                                             1770 06173000
         ALR   @14,@07                                             1770 06174000
         L     @02,0(,@14)                                         1770 06175000
@GL00006 LR    @15,@02                                             1770 06176000
         O     @15,@CB05610+3(@07)                                 1770 06177000
         CS    @02,@15,0(@14)                                      1770 06178000
         BNE   @GL00006                                            1770 06179000
*   RFY                                                            1771 06180000
*    (NDSGNLRG,                                                    1771 06181000
*     NDSGNLRC) RSTD;               /* RESTRICT REGS 1 AND 15      1771 06182000
*                                                            @YM03234*/ 06183000
*   NDSGNLRG=NCURVPCC;              /* PUT VIRT. ADDR. OF THE CURR.     06184000
*                                      CPU'S PCCA IN REG. 1          */ 06185000
*                                                                  1772 06186000
         L     NDSGNLRG,NCURVPCC                                   1772 06187000
*   /*****************************************************************/ 06188000
*   /*                                                               */ 06189000
*   /* JUST TO BE SAFE, RESET THE CPU                        @YM03234*/ 06190000
*   /*                                                               */ 06191000
*   /*****************************************************************/ 06192000
*                                                                  1773 06193000
*   GEN(DSGNL    IPR,CPU=(1))                                      1773 06194000
*   SETS(NDSGNLST,NDSGNLRC) REFS(CVTPTR,CVTIPCDS,CVT);/*     @YM03234*/ 06195000
*                                                                  1773 06196000
         DSGNL    IPR,CPU=(1)                                           06197000
*   /*****************************************************************/ 06198000
*   /*                                                               */ 06199000
*   /* IF THE INITIAL PROG RESET WAS NOT ACCEPTED IT IS UNSAFE TO    */ 06200000
*   /* CONTINUE THE IPL AS THE STATE OF THE SIGNALLED CPU IS UNKNOWN */ 06201000
*   /* AND COULD BE A RUNAWAY. IN THE RUNAWAY CONDITION THE CPU COULD*/ 06202000
*   /* CAUSE ABNORMAL TERMINATION LATER IN THE INITIALIZATION        */ 06203000
*   /* PROCESS.                                              @YM03234*/ 06204000
*   /*                                                               */ 06205000
*   /*****************************************************************/ 06206000
*                                                                  1774 06207000
*   IF NDSGNLRC^=0 THEN                                            1774 06208000
         LTR   NDSGNLRC,NDSGNLRC                                   1774 06209000
         BZ    @RF01774                                            1774 06210000
*     DO;                           /* IF NOT ZERO PREPARE FOR WAIT     06211000
*                                      STATE                 @YM03234*/ 06212000
*       NDSGNLRG=NCURCPUA;          /* LOAD THE ADDRESS OF THE     1776 06213000
*                                      NON-RESPONDING CPU INTO REG 1    06214000
*                                      FOR OPERATOR DIAGNOSTIC     1776 06215000
*                                                            @YM03234*/ 06216000
*                                                                  1776 06217000
         LH    NDSGNLRG,NCURCPUA                                   1776 06218000
*       /*************************************************************/ 06219000
*       /*                                                           */ 06220000
*       /* BRANCH TO ROUTINE THAT WILL TERMINATE THE IPL WITH A 5B   */ 06221000
*       /* WAIT STATE                                        @YM03234*/ 06222000
*       /*                                                           */ 06223000
*       /*************************************************************/ 06224000
*                                                                  1777 06225000
*       GOTO NP0SRNAW;              /* GO LOAD WAIT 5B       @YM03234*/ 06226000
         B     NP0SRNAW                                            1777 06227000
*     END;                          /* END OF WAIT STATE PREP      1778 06228000
*                                                            @YM03234*/ 06229000
*   RFY                                                            1779 06230000
*    (NDSGNLRG,                                                    1779 06231000
*     NDSGNLRC) UNRSTD;             /* FREE REGS 1 AND 15    @YM03234*/ 06232000
@RF01774 DS    0H                                                  1780 06233000
*   CALL NP0MSGD;                   /* CALL RTN TO SET UP A MESSAGE     06234000
*                                      STATING THAT THIS CURRENT CPU    06235000
*                                      COULD NOT BE INITIALIZED    1780 06236000
*                                                            @YM03234*/ 06237000
         BAL   @14,NP0MSGD                                         1780 06238000
*/*                                                            Y02751*/ 06239000
*                                                                  1781 06240000
*NSIGPRCV:                          /* SIGP RECOVERY ROUTINE COME  1781 06241000
*                                      HERE TO FREE REAL STORAGE   1781 06242000
*                                      AREAS ALLOCATED TO A CPU THAT    06243000
*                                      COULD NOT BE INITIALIZED FOR     06244000
*                                      ONE REASON OR ANOTHER.        */ 06245000
*   RFY                                                            1781 06246000
*    (LCCA) BASED(NCURVLCC);                                       1781 06247000
NSIGPRCV DS    0H                                                  1782 06248000
*   RFY                                                            1782 06249000
*    (NSPSAREG,                                                    1782 06250000
*     NSPSARCD) RSTD;                                              1782 06251000
*                                                                  1782 06252000
*/*                                                            Y02751*/ 06253000
*                                                                  1783 06254000
*   NSPSAREG=LCCACPUS;              /* PICK UP VIRT. ADDR. OF      1783 06255000
*                                      SUPERVISOR RTN. WORK/SAVE AREA   06256000
*                                      VECTOR TABLE IN REG. 1        */ 06257000
         L     @14,NCURVLCC                                        1783 06258000
         L     NSPSAREG,LCCACPUS(,@14)                             1783 06259000
*/*                                                            Y02751*/ 06260000
*                                                                  1784 06261000
*   CALL IEAVSPSA;                  /* CALL IEAVSPSA TO FREE THE   1784 06262000
*                                      WORK/SAVE AREAS FOR THE CURR.    06263000
*                                      CPU.                          */ 06264000
         BAL   @14,IEAVSPSA                                        1784 06265000
*/*                                                            Y02751*/ 06266000
*                                                                  1785 06267000
*   IF NSPSARCD^=0                  /* CHECK IF 'IEAVSPSA' RETURNED A   06268000
*                                      NON-ZERO CODE                 */ 06269000
*     THEN                          /* IF SO, THERE WAS AN ERROR OF     06270000
*                                      SOME KIND                     */ 06271000
         LTR   NSPSARCD,NSPSARCD                                   1785 06272000
         BNZ   @RT01785                                            1785 06273000
*/*                                                            Y02751*/ 06274000
*                                                                  1786 06275000
*     GOTO NP0SPSAE;                /* GO TO ERROR ROUTINE           */ 06276000
*/*                                                            Y02751*/ 06277000
*                                                                  1787 06278000
*   ELSE                                                           1787 06279000
*     ;                             /* IF THERE WAS NO ERROR,      1787 06280000
*                                      CONTINUE                      */ 06281000
*   RFY                                                            1788 06282000
*    (NSPSAREG,                                                    1788 06283000
*     NSPSARCD) UNRSTD;                                            1788 06284000
*   RFY                                                            1789 06285000
*    (NP0FMLEN,                                                    1789 06286000
*     AREAAD) RSTD;                                                1789 06287000
*                                                                  1789 06288000
*/*                                                            Y02751*/ 06289000
*                                                                  1790 06290000
*   NP0FMLEN=NLCCALEN;              /* PICK UP LENGTH OF LCCA IN REG.   06291000
*                                      0                             */ 06292000
         LH    NP0FMLEN,NLCCALEN                                   1790 06293000
*/*                                                            Y02751*/ 06294000
*                                                                  1791 06295000
*   AREAAD=NCURVLCC;                /* PICK UP VIRT. ADDR. OF LCCA 1791 06296000
*                                      FOR CURR. CPU IN REG. 1       */ 06297000
         L     AREAAD,NCURVLCC                                     1791 06298000
*/*                                                            Y02751*/ 06299000
*                                                                  1792 06300000
*NFRLCCA1:                                                         1792 06301000
*   GEN;                                                           1792 06302000
*                                                                  1792 06303000
NFRLCCA1 DS    0H                                                  1792 06304000
*                                /* FREE THE LCCA FOR THE CURR CPU  */  06305000
         FREEMAIN   RU,LV=(0),A=(1),SP=245,                           XX06306000
               RELATED=('LCCA FOR CURRENT CPU, SP 245, GOTTEN IN      XX06307000
               IEAVNIP0 AT LABEL: NGTLCCA')                             06308000
*/*                                                            Y02751*/ 06309000
*                                                                  1793 06310000
*   LCCVTENT=''B;                   /* SET LCCVT ENTRY CORRES. TO  1793 06311000
*                                      CURR. CPU TO ZERO. NOTE:    1793 06312000
*                                      LCCVTENT IS A MAP OF A LCCAVT    06313000
*                                      ENTRY, IT IS BASED ON LCCVTPTR   06314000
*                                      WHICH WAS SET EARLIER TO THE     06315000
*                                      VIRT. ADDR. OF THE LCCAVT   1793 06316000
*                                      ENTRY CORRES. TO THE CURR. CPU*/ 06317000
*                                                                  1793 06318000
         L     @02,LCCVTPTR                                        1793 06319000
         XC    LCCVTENT(4,@02),LCCVTENT(@02)                       1793 06320000
*   /*****************************************************************/ 06321000
*   /*                                                               */ 06322000
*   /* FREE THE PSA FOR THE CURRENT CPU                              */ 06323000
*   /*                                                               */ 06324000
*   /*****************************************************************/ 06325000
*                                                                  1794 06326000
*/*                                                            Y02751*/ 06327000
*                                                                  1794 06328000
*   NP0FMLEN=NPSALEN;               /* PUT LENGTH OF PSA IN REG. 0   */ 06329000
         LH    NP0FMLEN,NPSALEN                                    1794 06330000
*/*                                                            Y02751*/ 06331000
*                                                                  1795 06332000
*   AREAAD=NCURVPSA;                /* PUT VIRT. ADDR. OF PSA IN   1795 06333000
*                                      REG.1                         */ 06334000
         L     AREAAD,NCURVPSA                                     1795 06335000
*/*                                                            Y02751*/ 06336000
*                                                                  1796 06337000
*NFRPSA1:                                                          1796 06338000
*   GEN;                                                           1796 06339000
*                                                                  1796 06340000
NFRPSA1  DS    0H                                                  1796 06341000
*                               /* FREE THE PSA FOR THE CURR. CPU   */  06342000
         FREEMAIN   RU,LV=(0),A=(1),SP=245,                           XX06343000
               RELATED=('PSA FOR CURRENT CPU, SP 245, GOTTEN IN       XX06344000
               IEAVNIP0 AT LABEL: NGTPSA')                              06345000
*/* FREE THE FRR STACKS FOR THE CURRENT CPU                          */ 06346000
*/*                                                            Y02751*/ 06347000
*                                                                  1797 06348000
*   NP0FMLEN=YSTAKLEN;              /* PUT LENGTH OF FRR STACKS IN 1797 06349000
*                                      REG. 0                        */ 06350000
         LH    NP0FMLEN,@CH03735                                   1797 06351000
*/*                                                            Y02751*/ 06352000
*                                                                  1798 06353000
*   AREAAD=NCURVFRR;                /* PUT VIRT. ADDR. OF FRR STACKS    06354000
*                                      IN REG. 1                     */ 06355000
         L     AREAAD,NCURVFRR                                     1798 06356000
*/*                                                            Y02751*/ 06357000
*                                                                  1799 06358000
*NFRFRRS1:                                                         1799 06359000
*   GEN;                                                           1799 06360000
*                                                                  1799 06361000
NFRFRRS1 DS    0H                                                  1799 06362000
*                               /* FREE THE FRR STACKS FOR CURR. CPU*/  06363000
         FREEMAIN  RU,LV=(0),A=(1),SP=245,                            XX06364000
               RELATED=('FRR STACKS FOR CURRENT CPU, SP 245, GOTTEN   XX06365000
               IN IEAVNIP0 AT LABEL: NGTFRRS')                          06366000
*/* FREE THE PCCA FOR THE CURRENT CPU                                */ 06367000
*                                                                  1800 06368000
*NP0FRPCC:                                                         1800 06369000
*                                                                  1800 06370000
*/*                                                            Y02751*/ 06371000
*                                                                  1800 06372000
*   NP0FMLEN=NPCCALEN;              /* PICK UP LENGTH OF PCCA IN REG.   06373000
*                                      0                             */ 06374000
NP0FRPCC LH    NP0FMLEN,NPCCALEN                                   1800 06375000
*/*                                                            Y02751*/ 06376000
*                                                                  1801 06377000
*   AREAAD=NCURVPCC;                /* PICK UP VIRT. ADDR. OF PCCA 1801 06378000
*                                      FOR CURR. CPU IN REG. 1       */ 06379000
         L     AREAAD,NCURVPCC                                     1801 06380000
*/*                                                            Y02751*/ 06381000
*                                                                  1802 06382000
*NFRPCCA1:                                                         1802 06383000
*   GEN;                                                           1802 06384000
NFRPCCA1 DS    0H                                                  1802 06385000
*                               /* FREE THE PCCA FOR CURR. CPU      */  06386000
         FREEMAIN   RU,LV=(0),A=(1),SP=245,                           XX06387000
               RELATED=('PCCA FOR CURRENT CPU, SP 245, GOTTEN IN      XX06388000
               IEAVNIP0 AT LABEL: NGTPCCA')                             06389000
*   RFY                                                            1803 06390000
*    (NP0FMLEN,                                                    1803 06391000
*     AREAAD) UNRSTD;                                              1803 06392000
*                                                                  1803 06393000
*/*                                                            Y02751*/ 06394000
*                                                                  1804 06395000
*   PCCVTENT=PCCVTENT               /* SET PCCAVT ENTRY CORRES. TO   */ 06396000
*       &&PCCVTENT;                 /* CURR. CPU TO ZERO NOTE:     1804 06397000
*                                      PCCVTENT IS A MAP OF A PCCAVT    06398000
*                                      ENTRY, IT IS BASED ON PCCVTPTR   06399000
*                                      WHICH WAS SET EARLIER TO THE     06400000
*                                      VIRT. ADDR. OF THE PCCAVT   1804 06401000
*                                      ENTRY CORRES. TO CURR. CPU    */ 06402000
         L     @02,PCCVTPTR                                        1804 06403000
         XC    PCCVTENT(4,@02),PCCVTENT(@02)                       1804 06404000
*/*                                                            Y02751*/ 06405000
*                                                                  1805 06406000
*   IF NRSTALL='1'B THEN            /* IF THIS PROCESSING IS IN    1805 06407000
*                                      SUPPORT OF RESTARTING A X4A 1805 06408000
*                                      WAIT STATE            @Z30LQXA*/ 06409000
         TM    NRSTALL,B'00000001'                                 1805 06410000
         BNO   @RF01805                                            1805 06411000
*     DO;                           /* MUST MARK THIS PROCESSOR    1806 06412000
*                                      OFFLINE IF IT HAD BEEN MARKED    06413000
*                                      ONLINE ALREADY        @Z30LQXA*/ 06414000
*       IF(NCPOLMSK&NCURCPUM)^=0 THEN/* WAS PROCESSOR MARKED ONLINE?    06415000
*                                                            @Z30LQXA*/ 06416000
         SLR   @02,@02                                             1807 06417000
         ICM   @02,3,NCPOLMSK                                      1807 06418000
         SLR   @15,@15                                             1807 06419000
         ICM   @15,3,NCURCPUM                                      1807 06420000
         LR    @14,@02                                             1807 06421000
         NR    @14,@15                                             1807 06422000
         LTR   @14,@14                                             1807 06423000
         BZ    @RF01807                                            1807 06424000
*         DO;                       /*                       @Z30LQXA*/ 06425000
*           NCPOLMSK=NCPOLMSK&&NCURCPUM;/* MARK IT OFFLINE   @Z30LQXA*/ 06426000
         XR    @02,@15                                             1809 06427000
         STH   @02,NCPOLMSK                                        1809 06428000
*           NCPUCNT=NCPUCNT-1;      /* DECREMENT COUNT OF ONLINE   1810 06429000
*                                      PROCESSORS            @Z30LQXA*/ 06430000
         LH    @02,NCPUCNT                                         1810 06431000
         BCTR  @02,0                                               1810 06432000
         STH   @02,NCPUCNT                                         1810 06433000
*         END;                      /*                       @Z30LQXA*/ 06434000
*       IF NCURVPCC^=PCCASAV THEN   /* IF THE RUNAWAY WAS NOT THE  1812 06435000
*                                      PROCESSOR WITH THE CLOCK    1812 06436000
*                                      ERROR, RETURN TO NXTRSTRT TO     06437000
*                                      CONTINUE RESTARTING ALL     1812 06438000
*                                      PROCESSORS            @Z30LQXA*/ 06439000
@RF01807 CLC   NCURVPCC(4),PCCASAV                                 1812 06440000
         BNE   @RT01812                                            1812 06441000
*         GOTO NXTRSTRT;            /*                       @Z30LQXA*/ 06442000
*     END;                          /*                       @Z30LQXA*/ 06443000
*   GOTO NPREINIT;                  /* GO TO ROUTINE TO RE-INITIALIZE   06444000
*                                      FLAGS AND WORK AREAS BEFORE 1815 06445000
*                                      INITIALIZING THE NEXT CPU.    */ 06446000
         B     NPREINIT                                            1815 06447000
*NMPSYNC2:                          /* SECOND M.P. SYNCHRONIZATION 1816 06448000
*                                      ROUTINE. COME HERE WHEN (IF) A   06449000
*                                      SIGNALLED CPU INDICATES THAT     06450000
*                                      IT IS STARTED PROPERLY.       */ 06451000
*/*                                                            Y02751*/ 06452000
*                                                                  1816 06453000
*   DO I=40000000 TO 0 BY-1;        /* SET UP A SPIN LOOP TO CHECK A    06454000
*                                      FLAG SET BY THE SIGNALLED CPU    06455000
*                                      TO INDICATE IT IS FINISHED  1816 06456000
*                                      INITIALIZING ITSELF AND IS  1816 06457000
*                                      ABOUT TO WAIT.                */ 06458000
NMPSYNC2 L     I,@CF05257                                          1816 06459000
@DL01816 DS    0H                                                  1817 06460000
*/*                                                            Y02751*/ 06461000
*                                                                  1817 06462000
*     IF NCPUWAIT='1'B              /* CHECK IF FLAG IS ON           */ 06463000
*       THEN                        /* IF SO, THE CPU IS INITIALIZED    06464000
*                                      AND IS ABOUT TO ENTER THE WAIT   06465000
*                                      STATE (OR ALREADY HAS).       */ 06466000
         TM    NCPUWAIT,B'00001000'                                1817 06467000
         BO    @RT01817                                            1817 06468000
*/*                                                            Y02751*/ 06469000
*                                                                  1818 06470000
*       GOTO NP0ONLIN;              /* GO TO ROUTINE TO MARK THIS CPU   06471000
*                                      ONLINE (HALLELUJAH)           */ 06472000
*/*                                                            Y02751*/ 06473000
*                                                                  1819 06474000
*     IF NCLOKERR='1'B THEN         /* IF A CLOCK ERROR DISCOVERED 1819 06475000
*                                                            @Z30LQXA*/ 06476000
         TM    NCLOKERR,B'00000100'                                1819 06477000
         BNO   @RF01819                                            1819 06478000
*       DO;                         /*                       @Z30LQXA*/ 06479000
*         PCCASAV=NCURVPCC;         /* SAVE PCCA ADDRESS     @Z30LQXA*/ 06480000
         MVC   PCCASAV(4),NCURVPCC                                 1821 06481000
*         PSASAVE=NCURVPSA;         /* SAVE PSA ADDRESS      @Z30LQXA*/ 06482000
         MVC   PSASAVE(4),NCURVPSA                                 1822 06483000
*         FRRSAVE=NCURVFRR;         /* SAVE FRR STACK ADDRESS      1823 06484000
*                                                            @Z30LQXA*/ 06485000
         MVC   FRRSAVE(4),NCURVFRR                                 1823 06486000
*         RFY                                                      1824 06487000
*          (PSA) BASED(NPSAPTR);    /*                       @Z30LQXA*/ 06488000
*         FLCRNPSW=ERRESTRT;        /* PUT RESTART PSW IN PSA OF THIS   06489000
*                                      CPU                   @Z30LQXA*/ 06490000
         L     @04,NPSAPTR                                         1825 06491000
         MVC   FLCRNPSW(8,@04),ERRESTRT                            1825 06492000
*         NVTFLWSC=NVTWCN05;        /* WAIT STATE 4A         @Z30LQXA*/ 06493000
         MVI   NVTFLWSC,X'4A'                                      1826 06494000
*         LPSW(NVTWTPSW);           /* LOAD 4A WAIT STATE    @Z30LQXA*/ 06495000
         LPSW  NVTWTPSW                                            1827 06496000
*       END;                        /*                       @Z30LQXA*/ 06497000
*     ELSE                                                         1829 06498000
*       ;                           /* OTHERWISE, LOOP               */ 06499000
@RF01819 DS    0H                                                  1830 06500000
*/*                                                            Y02751*/ 06501000
*                                                                  1830 06502000
*   END;                                                           1830 06503000
*                                                                  1830 06504000
         BCTR  I,0                                                 1830 06505000
         LTR   I,I                                                 1830 06506000
         BNM   @DL01816                                            1830 06507000
*/*                                                            Y02751*/ 06508000
*                                                                  1831 06509000
*   GOTO NP0STOP;                   /* IF LOOP SPINS OUT, GO TO RTN.    06510000
*                                      TO STOP THE CPU AND TO      1831 06511000
*                                      FREEMAIN STORAGE AREAS      1831 06512000
*                                      ALLOCATED TO IT               */ 06513000
*                                                                  1831 06514000
         B     NP0STOP                                             1831 06515000
*   /*****************************************************************/ 06516000
*   /*                                                               */ 06517000
*   /* ROUTINE ON IPL CPU TO RESTART ALL ALREADY INITIALIZED         */ 06518000
*   /* PROCESSORS AND THE PROCESSOR WITH THE BAD CLOCK       @Z30LQXA*/ 06519000
*   /*                                                               */ 06520000
*   /*****************************************************************/ 06521000
*                                                                  1832 06522000
*RSTRTALL:                                                         1832 06523000
*   ;                               /*                       @Z30LQXA*/ 06524000
RSTRTALL DS    0H                                                  1833 06525000
*   FLCRNPSW=NP0SRSSA;              /* RESTORE SYSGENED PSW IN IPL 1833 06526000
*                                      CPUS PSA              @Z30LQXA*/ 06527000
         L     @02,NPSAPTR                                         1833 06528000
         MVC   FLCRNPSW(8,@02),NP0SRSSA                            1833 06529000
*   NPCURCPU=0;                     /*                       @Z30LQXA*/ 06530000
         SLR   @02,@02                                             1834 06531000
         STH   @02,NPCURCPU                                        1834 06532000
*CPUCHEK2:                                                         1835 06533000
*   NSYNCFLG=NSYNCFLG&&NSYNCFLG;    /* ZERO SYNCHRONIZATION FLAGS  1835 06534000
*                                      INCLUDING CLOCK ERROR FLAG  1835 06535000
*                                                            @Z30LQXA*/ 06536000
CPUCHEK2 XC    NSYNCFLG(1),NSYNCFLG                                1835 06537000
*   NCURCPUA=NPCURCPU;              /* CURRENT CPU ID        @Z30LQXA*/ 06538000
         LH    @02,NPCURCPU                                        1836 06539000
         STH   @02,NCURCPUA                                        1836 06540000
*   NCURCPUM=NCPMSKTB(NCURCPUA+1);  /*                       @Z30LQXA*/ 06541000
         LR    @15,@02                                             1837 06542000
         ALR   @15,@15                                             1837 06543000
         LA    @14,NCPMSKTB(@15)                                   1837 06544000
         MVC   NCURCPUM(2),0(@14)                                  1837 06545000
*   IF NCURCPUM=NICPMSK THEN        /* IS THIS CPU THE IPL CPU     1838 06546000
*                                                            @Z30LQXA*/ 06547000
         CLC   NCURCPUM(2),NICPMSK                                 1838 06548000
         BNE   @RF01838                                            1838 06549000
*     DO;                           /*                       @Z30LQXA*/ 06550000
*       NPCURCPU=NPCURCPU+1;        /* GO ON TO NEXT CPU     @Z30LQXA*/ 06551000
         LA    @02,1(,@02)                                         1840 06552000
         STH   @02,NPCURCPU                                        1840 06553000
*       GOTO CPUCHEK2;              /* CHECK NEXT PROCESSOR  @Z30LQXA*/ 06554000
         B     CPUCHEK2                                            1841 06555000
*     END;                          /*                       @Z30LQXA*/ 06556000
*                                                                  1842 06557000
*   /*****************************************************************/ 06558000
*   /*                                                               */ 06559000
*   /* IF THIS PROCESSOR IS ALREADY INITIALIZED AND MARKED ONLINE,   */ 06560000
*   /* SIGP RESTART IT SO THAT IT CAN RESUME SPINNING ON ALL INIT AND*/ 06561000
*   /* CLOCK ERROR BITS                                      @Z30LQXA*/ 06562000
*   /*                                                               */ 06563000
*   /*****************************************************************/ 06564000
*                                                                  1843 06565000
*   NANDWORD=NCPOLMSK&NCURCPUM;                                    1843 06566000
@RF01838 SLR   NANDWORD,NANDWORD                                   1843 06567000
         ICM   NANDWORD,3,NCURCPUM                                 1843 06568000
         SLR   @15,@15                                             1843 06569000
         ICM   @15,3,NCPOLMSK                                      1843 06570000
         NR    NANDWORD,@15                                        1843 06571000
*   IF NANDWORD^=0|NPCURCPU=PCCASAV->PCCACPUA THEN/* IF PROCESSOR  1844 06572000
*                                      ALREADY MARKED ONLINE, OR IF     06573000
*                                      THIS IS PROCESSOR WITH CLOCK     06574000
*                                      ERROR, MUST RESTART THIS    1844 06575000
*                                      PROCESSOR             @Z30LQXA*/ 06576000
         LTR   NANDWORD,NANDWORD                                   1844 06577000
         BNZ   @RT01844                                            1844 06578000
         L     @01,PCCASAV                                         1844 06579000
         CLC   NPCURCPU(2),PCCACPUA(@01)                           1844 06580000
         BNE   @RF01844                                            1844 06581000
@RT01844 DS    0H                                                  1845 06582000
*     DO;                           /*                       @Z30LQXA*/ 06583000
*       PCCVTPTR=CVTPCCAT+(LENGTH(PCCAT00P)*NCURCPUA);/*     @Z30LQXA*/ 06584000
         LH    @02,NCURCPUA                                        1846 06585000
         SLA   @02,2                                               1846 06586000
         L     @15,CVTPCCAT(,RCVT)                                 1846 06587000
         ALR   @15,@02                                             1846 06588000
         ST    @15,PCCVTPTR                                        1846 06589000
*       LCCVTPTR=CVTLCCAT+(LENGTH(LCCAT00P)*NCURCPUA);/*     @Z30LQXA*/ 06590000
         AL    @02,CVTLCCAT(,RCVT)                                 1847 06591000
         ST    @02,LCCVTPTR                                        1847 06592000
*       RFY                                                        1848 06593000
*        (NDSGNLST,                                                1848 06594000
*         NDSGNLRG,                                                1848 06595000
*         NDSGNLRC) RSTD;                                          1848 06596000
*                                                                  1848 06597000
*       /*************************************************************/ 06598000
*       /*                                                           */ 06599000
*       /* RESET VALUES IN NCURCPUD TO REPRESENT THIS PROCESSOR      */ 06600000
*       /*                                                   @Z30LQXA*/ 06601000
*       /*                                                           */ 06602000
*       /*************************************************************/ 06603000
*                                                                  1849 06604000
*       NCURVPCC=PCCVTENT;          /*                       @Z30LQXA*/ 06605000
         L     @14,PCCVTPTR                                        1849 06606000
         MVC   NCURVPCC(4),PCCVTENT(@14)                           1849 06607000
*       NCURVLCC=LCCVTENT;          /*                       @Z30LQXA*/ 06608000
         MVC   NCURVLCC(4),LCCVTENT(@02)                           1850 06609000
*       IF NPCURCPU=PCCASAV->PCCACPUA THEN/* IF THIS IS THE PROCESSOR   06610000
*                                      WITH THE CLOCK ERROR, IT HAS     06611000
*                                      NOT BEEN INITIALIZED YET AND     06612000
*                                      THE PSA ADDRESS MUST BE     1851 06613000
*                                      RETRIEVED FROM PSASAVE      1851 06614000
*                                                            @Z30LQXA*/ 06615000
         L     @14,PCCASAV                                         1851 06616000
         CLC   NPCURCPU(2),PCCACPUA(@14)                           1851 06617000
         BNE   @RF01851                                            1851 06618000
*         DO;                       /*                       @Z30LQXA*/ 06619000
*           NCURVPSA=PSASAVE;       /*                       @Z30LQXA*/ 06620000
         MVC   NCURVPSA(4),PSASAVE                                 1853 06621000
*           NCURVFRR=FRRSAVE;       /* LIKEWISE FOR THE FRR STACK  1854 06622000
*                                      ADDRESS               @Z30LQXA*/ 06623000
         MVC   NCURVFRR(4),FRRSAVE                                 1854 06624000
*         END;                      /*                       @Z30LQXA*/ 06625000
*       ELSE                        /* THIS PROCESSOR WAS FULLY    1856 06626000
*                                      INITIALIZED, AND ITS PSA    1856 06627000
*                                      ADDRESS WAS PUT IN ITS PCCA 1856 06628000
*                                                            @Z30LQXA*/ 06629000
*         DO;                       /*                       @Z30LQXA*/ 06630000
         B     @RC01851                                            1856 06631000
@RF01851 DS    0H                                                  1857 06632000
*           NCURVPSA=NCURVPCC->PCCAPSAV;/*                   @Z30LQXA*/ 06633000
         L     @14,NCURVPCC                                        1857 06634000
         L     @14,PCCAPSAV(,@14)                                  1857 06635000
         ST    @14,NCURVPSA                                        1857 06636000
*           NCURVFRR=NCURVPSA->PSACSTK;/*                    @Z30LQXA*/ 06637000
         MVC   NCURVFRR(4),PSACSTK(@14)                            1858 06638000
*         END;                      /*                       @Z30LQXA*/ 06639000
*       NDSGNLRG=PCCVTENT;          /* VIRTUAL ADDRESS OF PCCA FOR 1860 06640000
*                                      THIS CPU IN REG 1     @Z30LQXA*/ 06641000
@RC01851 L     @14,PCCVTPTR                                        1860 06642000
         L     NDSGNLRG,PCCVTENT(,@14)                             1860 06643000
*       GEN(DSGNL RESTART,CPU=(1))                                 1861 06644000
*       SETS(NDSGNLST,NDSGNLRC) REFS(CVTPTR,CVTIPCDS,CVT);/* INVOKE     06645000
*                                      IPC FOR RESTART FUNCTION    1861 06646000
*                                                            @Z30LQXA*/ 06647000
         DSGNL RESTART,CPU=(1)                                          06648000
*       RFY                                                        1862 06649000
*        (NDSGNLRG) UNRSTD;                                        1862 06650000
*                                                                  1862 06651000
*       /*************************************************************/ 06652000
*       /*                                                           */ 06653000
*       /* DETERMINE IF THE SIGP RESTART WAS ACCEPTED. THE BELOW     */ 06654000
*       /* SEQUENCE DOES NOT CHECK FOR A RETURN CODE OF 16 OR 12 FROM*/ 06655000
*       /* IPC. RETURN CODE 16 INDICATES A PROGRAM CHECK ON THE SIGP */ 06656000
*       /* INSTRUCTION. THIS SHOULD NEVER OCCUR SINCE NIP0 BRANCHES  */ 06657000
*       /* AROUND THE MP INITIALIZATION SEQUENCE IF THE CONFIGURATION*/ 06658000
*       /* IS UP. RETURN CODE 12 INDICATES THE SIGNALLED PROCESSOR IS*/ 06659000
*       /* OFFLINE. THIS SHOULD NEVER OCCUR SINCE A CHECK WAS MADE OF*/ 06660000
*       /* NIPS ONLINE CPU MASK BEFORE THE SIGP RESTART WAS ISSUED.  */ 06661000
*       /*                                                   @Z30LQXA*/ 06662000
*       /*                                                           */ 06663000
*       /*************************************************************/ 06664000
*                                                                  1863 06665000
*       IF NDSGNLRC>0 THEN          /* BAD RETURN?           @Z30LQXA*/ 06666000
         LTR   NDSGNLRC,NDSGNLRC                                   1863 06667000
         BP    @RT01863                                            1863 06668000
*         GOTO STOPCPU;             /* ERROR--STOP THIS PROCESSOR  1864 06669000
*                                                            @Z30LQXA*/ 06670000
*       RFY                                                        1865 06671000
*        (NDSGNLST,                                                1865 06672000
*         NDSGNLRC) UNRSTD;                                        1865 06673000
*       NRNAWSYN='1'B;              /* SET RUNAWAY SYNCHRONIZATION 1866 06674000
*                                      FLAG                  @Z30LQXA*/ 06675000
         LA    @14,NRNAWSYN                                        1866 06676000
         LR    @07,@14                                             1866 06677000
         LA    @02,3                                               1866 06678000
         NR    @07,@02                                             1866 06679000
         LCR   @07,@07                                             1866 06680000
         ALR   @14,@07                                             1866 06681000
         L     @02,0(,@14)                                         1866 06682000
@GL00008 LR    @15,@02                                             1866 06683000
         O     @15,@CB05606+3(@07)                                 1866 06684000
         CS    @02,@15,0(@14)                                      1866 06685000
         BNE   @GL00008                                            1866 06686000
*       DO I=40000000 TO 0 BY-1;    /* LOOP UNTIL SIGNALLED CPU    1867 06687000
*                                      STARTS OK             @Z30LQXA*/ 06688000
         L     I,@CF05257                                          1867 06689000
@DL01867 DS    0H                                                  1868 06690000
*         IF NCPUSTRT='1'B THEN     /* IF SIGNALLED PROCESSOR      1868 06691000
*                                      RESTARTED OK, MOVE ON TO NEXT    06692000
*                                      ONLINE PROCESSOR AND ISSUE  1868 06693000
*                                      RESTART TO IT         @Z30LQXA*/ 06694000
         TM    NCPUSTRT,B'00010000'                                1868 06695000
         BO    @RT01868                                            1868 06696000
*           GOTO NXTRSTRT;          /*                       @Z30LQXA*/ 06697000
*         ELSE                                                     1870 06698000
*           ;                       /* CONTINUE SPIN         @Z30LQXA*/ 06699000
*       END;                        /* END OF SPIN LOOP      @Z30LQXA*/ 06700000
         BCTR  I,0                                                 1871 06701000
         LTR   I,I                                                 1871 06702000
         BNM   @DL01867                                            1871 06703000
*STOPCPU:                                                          1872 06704000
*       NRSTALL='1'B;               /* IF LOOP SPINS OUT, MUST STOP     06705000
*                                      THIS PROCESSOR SINCE IT IS NOW   06706000
*                                      A RUNAWAY. SET BIT CHECKED BY    06707000
*                                      NP0STOP               @Z30LQXA*/ 06708000
STOPCPU  DS    0H                                                  1873 06709000
*       NRNAWSYN='0'B;              /* TURN OFF SYNCHRONIZATION BIT     06710000
*                                                            @Z30LQXA*/ 06711000
         LA    @14,NRSTALL                                         1873 06712000
         LR    @07,@14                                             1873 06713000
         LA    @02,3                                               1873 06714000
         NR    @07,@02                                             1873 06715000
         LCR   @07,@07                                             1873 06716000
         ALR   @14,@07                                             1873 06717000
         L     @02,0(,@14)                                         1873 06718000
@GL00009 LR    @15,@02                                             1873 06719000
         N     @15,@CB05614+3(@07)                                 1873 06720000
         O     @15,@CB05614+10(@07)                                1873 06721000
         CS    @02,@15,0(@14)                                      1873 06722000
         BNE   @GL00009                                            1873 06723000
*       GOTO NP0STOP;               /*                       @Z30LQXA*/ 06724000
         B     NP0STOP                                             1874 06725000
*     END;                                                         1875 06726000
*NXTRSTRT:                                                         1876 06727000
*   NPCURCPU=NPCURCPU+1;            /* RESTART NEXT PROCESSOR      1876 06728000
*                                                            @Z30LQXA*/ 06729000
@RF01844 DS    0H                                                  1876 06730000
NXTRSTRT LA    @02,1                                               1876 06731000
         AH    @02,NPCURCPU                                        1876 06732000
         STH   @02,NPCURCPU                                        1876 06733000
*   IF NPCURCPU<=PCCASAV->PCCACPUA THEN/* IF THIS IS NOT PAST THE  1877 06734000
*                                      POINT OF THE CLOCK ERROR    1877 06735000
*                                                            @Z30LQXA*/ 06736000
         L     @01,PCCASAV                                         1877 06737000
         CH    @02,PCCACPUA(,@01)                                  1877 06738000
         BNH   @RT01877                                            1877 06739000
*     GOTO CPUCHEK2;                /* CONTINUE WITH THE RESTART   1878 06740000
*                                      LOGIC                 @Z30LQXA*/ 06741000
*   ELSE                                                           1879 06742000
*     DO;                           /* IF HAVE NOW RESTARTED ALL   1879 06743000
*                                      PROCESSORS ALREADY ONLINE AND    06744000
*                                      ALSO THE PROCESSOR WITH THE 1879 06745000
*                                      CLOCK ERROR           @Z30LQXA*/ 06746000
*       NPCURCPU=NPCURCPU-1;        /* DECREMENT COUNT AND RESUME  1880 06747000
*                                      SPIN WAITING FOR CURRENT    1880 06748000
*                                      PROCESSOR             @Z30LQXA*/ 06749000
         BCTR  @02,0                                               1880 06750000
         STH   @02,NPCURCPU                                        1880 06751000
*       NRSTALL='0'B;               /* RESET RESTART INDICATOR FOR 1881 06752000
*                                      NP0STOP               @Z30LQXA*/ 06753000
         LA    @14,NRSTALL                                         1881 06754000
         LR    @07,@14                                             1881 06755000
         LA    @02,3                                               1881 06756000
         NR    @07,@02                                             1881 06757000
         LCR   @07,@07                                             1881 06758000
         ALR   @14,@07                                             1881 06759000
         L     @02,0(,@14)                                         1881 06760000
@GL00010 LR    @15,@02                                             1881 06761000
         N     @15,@CB05622+3(@07)                                 1881 06762000
         CS    @02,@15,0(@14)                                      1881 06763000
         BNE   @GL00010                                            1881 06764000
*       GOTO NMPSYNC2;              /* RESUME SPIN WAITING FOR INIT     06765000
*                                      OF PROCESSOR WITH BAD CLOCK 1882 06766000
*                                                            @Z30LQXA*/ 06767000
         B     NMPSYNC2                                            1882 06768000
*     END;                          /*                       @Z30LQXA*/ 06769000
*NP0ONLIN:                          /* THIS ROUTINE MARKS A CPU AS 1884 06770000
*                                      BEING ONLINE. IT IS ENTERED 1884 06771000
*                                      AFTER A SIGNALLED CPU HAS   1884 06772000
*                                      INDICATED IT HAS SUCCESSFULLY    06773000
*                                      INITIALIZED ITSELF.           */ 06774000
*/*                                                            Y02751*/ 06775000
*                                                                  1884 06776000
*   PCCACAFM=NCURCPUM;              /* PUT MASK REPRESENTING CURR. 1884 06777000
*                                      CPU IN ITS PCCA.              */ 06778000
NP0ONLIN SLR   @02,@02                                             1884 06779000
         ICM   @02,3,NCURCPUM                                      1884 06780000
         L     @01,NCURVPCC                                        1884 06781000
         STH   @02,PCCACAFM(,@01)                                  1884 06782000
*/*                                                            Y02751*/ 06783000
*                                                                  1885 06784000
*   NCPOLMSK=NCPOLMSK               /* 'OR' THE MASK REPRESENTING  1885 06785000
*                                      THIS                          */ 06786000
*       |NCURCPUM;                  /* CPU WITH IEAVNIP0'S CUMULATIVE   06787000
*                                      MASK OF ONLINE CPU'S. NOTE: 1885 06788000
*                                      THIS CUMULATIVE MASK IS NOT 1885 06789000
*                                      PUT IN THE CSD UNTIL ALL CPU'S   06790000
*                                      ARE INITIALIZED. THIS IS TO 1885 06791000
*                                      PREVENT THE 'TASK SWITCH'   1885 06792000
*                                      ROUTINE FROM DISPATCHING WORK    06793000
*                                      ON ANY NON- IPL CPU'S UNTIL 1885 06794000
*                                      ALL NON-IPL CPU'S ARE       1885 06795000
*                                      INITIALIZED OR MARKED OFFLINE */ 06796000
         SLR   @15,@15                                             1885 06797000
         ICM   @15,3,NCPOLMSK                                      1885 06798000
         OR    @02,@15                                             1885 06799000
         STH   @02,NCPOLMSK                                        1885 06800000
*/*                                                            Y02751*/ 06801000
*                                                                  1886 06802000
*   NCPUCNT=NCPUCNT                 /* INCREMENT COUNT OF ONLINE   1886 06803000
*                                      CPU'S                         */ 06804000
*       +1;                         /* BY ONE                        */ 06805000
         LH    @02,NCPUCNT                                         1886 06806000
         LA    @02,1(,@02)                                         1886 06807000
         STH   @02,NCPUCNT                                         1886 06808000
*/* CLEAR FLAGS, WORK AREAS, ETC. BEFORE TRYING TO INITIALIZE THE    */ 06809000
*/* NEXT CPU.                                                        */ 06810000
*                                                                  1887 06811000
*NPREINIT:                                                         1887 06812000
*                                                                  1887 06813000
*/*                                                            Y02751*/ 06814000
*                                                                  1887 06815000
*   NSYNCFLG=NSYNCFLG               /* CLEAR SYNCHRONIZATION FLAGS TO*/ 06816000
*       &&NSYNCFLG;                 /* ZEROS.                        */ 06817000
NPREINIT XC    NSYNCFLG(1),NSYNCFLG                                1887 06818000
*/*                                                            Y02751*/ 06819000
*                                                                  1888 06820000
*   NCURCPUD=NCURCPUD               /* CLEAR CPU INITIALIZATION    1888 06821000
*                                      CONTROL                       */ 06822000
*       &&NCURCPUD;                 /* BLOCK TO ZEROS.               */ 06823000
         XC    NCURCPUD(40),NCURCPUD                               1888 06824000
*/*                                                            Y02751*/ 06825000
*                                                                  1889 06826000
*   GOTO NCPUSTEP;                  /* RETURN TO RTN. LOCATING AND 1889 06827000
*                                      INITIALIZING ON LINE CPU'S    */ 06828000
         B     NCPUSTEP                                            1889 06829000
*                                                                  1890 06830000
*/********************************************************************/ 06831000
*/*                                                                  */ 06832000
*/* IEAVNIP0 EXIT ROUTINE                                            */ 06833000
*/*                                                                  */ 06834000
*/********************************************************************/ 06835000
*                                                                  1890 06836000
*NP0LEAVE:                          /* IEAVNIP0 MAL FUNCTION RECOVERY   06837000
*                                      AND EXIT ROUTINE              */ 06838000
*   RSPSWWT='0'B;                   /* TURN OFF WAIT BIT IN SAVED  1890 06839000
*                                      COPY OF SYS. GEN'D RESTART PSW*/ 06840000
NP0LEAVE NI    RSPSWWT,B'11111101'                                 1890 06841000
*   RFY                                                            1891 06842000
*    (PSA) BASED(NPSAPTR);                                         1891 06843000
*   FLCRNPSW=NP0SRSSA;              /* RESTORE SYS. GEN'D RESTART PSW   06844000
*                                      IN THE IPL CPU'S PSA          */ 06845000
         L     @02,NPSAPTR                                         1892 06846000
         MVC   FLCRNPSW(8,@02),NP0SRSSA                            1892 06847000
*   IF NVTMP='1'B                   /* CHECK IF THIS IS AN M.P.    1893 06848000
*                                      CONFIGURATION                 */ 06849000
*     THEN                          /* IF IT IS, THEN                */ 06850000
         TM    NVTMP,B'00100000'                                   1893 06851000
         BNO   @RF01893                                            1893 06852000
*/*                                                            Y02751*/ 06853000
*                                                                  1894 06854000
*     DO;                                                          1894 06855000
*       RFY                                                        1895 06856000
*        (PSA) BASED(NICPVPSA);     /* RESPECIFY PSA MAP TO BE BASED    06857000
*                                      ON VIRT. ADDR. OF PSA FOR THIS   06858000
*                                      CPU. THIS CAUSES REVERSE PRE-    06859000
*                                      FIXING                        */ 06860000
*/*                                                            Y02751*/ 06861000
*                                                                  1896 06862000
*       FLCRNPSW=NP0SRSSA;          /* RESTORE SYS. GEN'D RESTART PSW   06863000
*                                      TO PSA IN ABS. 0-4K. THIS IS     06864000
*                                      DONE JUST TO RESTORE THE PSA     06865000
*                                      IN ABS. 0-4K TO ITS ORIGINAL     06866000
*                                      STATE.                        */ 06867000
         L     @15,NICPVPSA                                        1896 06868000
         MVC   FLCRNPSW(8,@15),NP0SRSSA                            1896 06869000
*/********************************************************************/ 06870000
*/* TURN ON THE WAIT BITS IN THE SIX 'NEW' PSW'S IN THE PSA IN ABS.  */ 06871000
*/* 0-4K.  THIS IS DONE ONLY ON MULTI-PROCESSOR CONFIGURATIONS       */ 06872000
*/* AND IS DONE TO PREVENT AN OFFLINE CPU FROM BEING POWERED UP      */ 06873000
*/* AND TAKING AN INTERRUPT (SUCH A CPU WOULD USE THE PSA IN ABS.    */ 06874000
*/* 0-4K SINCE ITS PREFIX REGISTER WOULD PROBABLY BE SET TO ZERO)    */ 06875000
*/* AND EXECUTING CODE IT SHOULD NOT BE EXECUTING.                   */ 06876000
*/********************************************************************/ 06877000
*/*                                                            Y02751*/ 06878000
*                                                                  1897 06879000
*       NPSWPTR=ADDR(FLCRNPSW);     /* PICK UP ADDR OF RESTART NEW 1897 06880000
*                                      PSW                           */ 06881000
         LR    NPSWPTR,@15                                         1897 06882000
*/*                                                            Y02751*/ 06883000
*                                                                  1898 06884000
*       NPSWAIT='1'B;               /* TURN ON WAIT BIT IN THIS PSW  */ 06885000
         OI    NPSWAIT(NPSWPTR),B'00000010'                        1898 06886000
*/*                                                            Y02751*/ 06887000
*                                                                  1899 06888000
*       NPSWPTR=ADDR(FLCENPSW);     /* PICK UP ADDR. OF EXTERNAL NEW    06889000
*                                      PSW                           */ 06890000
         LA    NPSWPTR,FLCENPSW(,@15)                              1899 06891000
*/*                                                            Y02751*/ 06892000
*                                                                  1900 06893000
*       NPSWAIT='1'B;               /* TURN ON WAIT BIT IN THIS PSW  */ 06894000
         OI    NPSWAIT(NPSWPTR),B'00000010'                        1900 06895000
*/*                                                            Y02751*/ 06896000
*                                                                  1901 06897000
*       NPSWPTR=ADDR(FLCSNPSW);     /* PICK UP ADDR. OF SUPERVISOR 1901 06898000
*                                      NEW PSW                       */ 06899000
         LA    NPSWPTR,FLCSNPSW(,@15)                              1901 06900000
*/*                                                            Y02751*/ 06901000
*                                                                  1902 06902000
*       NPSWAIT='1'B;               /* TURN ON WAIT BIT IN THIS PSW  */ 06903000
         OI    NPSWAIT(NPSWPTR),B'00000010'                        1902 06904000
*/*                                                            Y02751*/ 06905000
*                                                                  1903 06906000
*       NPSWPTR=ADDR(FLCPNPSW);     /* PICK UP ADDR OF PROG. CHECK 1903 06907000
*                                      NEW PSW                       */ 06908000
         LA    NPSWPTR,FLCPNPSW(,@15)                              1903 06909000
*/*                                                            Y02751*/ 06910000
*                                                                  1904 06911000
*       NPSWAIT='1'B;               /* TURN ON WAIT BIT IN THIS PSW  */ 06912000
         OI    NPSWAIT(NPSWPTR),B'00000010'                        1904 06913000
*/*                                                            Y02751*/ 06914000
*                                                                  1905 06915000
*       NPSWPTR=ADDR(FLCMNPSW);     /* PICK UP ADDR OF MACH. CHECK 1905 06916000
*                                      NEW PSW                       */ 06917000
         LA    NPSWPTR,FLCMNPSW(,@15)                              1905 06918000
*/*                                                            Y02751*/ 06919000
*                                                                  1906 06920000
*       NPSWAIT='1'B;               /* TURN ON WAIT BIT IN THIS PSW  */ 06921000
         OI    NPSWAIT(NPSWPTR),B'00000010'                        1906 06922000
*/*                                                            Y02751*/ 06923000
*                                                                  1907 06924000
*       NPSWPTR=ADDR(FLCINPSW);     /* PICK UP ADDR. OF I/O NEW PSW  */ 06925000
         LA    NPSWPTR,FLCINPSW(,@15)                              1907 06926000
*/*                                                            Y02751*/ 06927000
*                                                                  1908 06928000
*       NPSWAIT='1'B;               /* TURN ON WAIT BIT IN THIS PSW  */ 06929000
         OI    NPSWAIT(NPSWPTR),B'00000010'                        1908 06930000
*       RFY                                                        1909 06931000
*        (PSA) BASED(NPSAPTR);                                     1909 06932000
*     END;                                                         1910 06933000
*                                                                  1910 06934000
*/* ENABLE MACH. CHECKS IN THE PSW LOADED WHEN THE SYS. WAIT TASK    */ 06935000
*/* IS DISPATCHED.  THE 'CS' INSTR. IS USED TO PREVENT SETTING       */ 06936000
*/* OF THE MASK WHILE THE DISPATCHER IS LOADING THE PSW.             */ 06937000
*                                                                  1911 06938000
*   RFY                                                            1911 06939000
*    (CURPSWD1,                                                    1911 06940000
*     NEWPSWD1) RSTD;                                              1911 06941000
*                                                                  1911 06942000
@RF01893 DS    0H                                                  1912 06943000
*/*                                                            Y02751*/ 06944000
*                                                                  1912 06945000
*   CURPSWD1=NWTPSWD1;              /* PICK UP FIRST WORD OF THE PSW */ 06946000
         L     @02,NWPSWPTR                                        1912 06947000
         L     CURPSWD1,NWTPSWD1(,@02)                             1912 06948000
*NENABLE:                                                          1913 06949000
*                                                                  1913 06950000
*/*                                                            Y02751*/ 06951000
*                                                                  1913 06952000
*   NEWPSWD1=CURPSWD1;              /* PRESERVE THIS IN ANOTHER REG. */ 06953000
NENABLE  LR    NEWPSWD1,CURPSWD1                                   1913 06954000
*/*                                                            Y02751*/ 06955000
*                                                                  1914 06956000
*   NEWPSWD1=NEWPSWD1|MASKON;       /* TURN ON (ENABLE) THE MACH.  1914 06957000
*                                      CHECK MASK IN THIS COPY OF THE   06958000
*                                      FIRST WORD OF THE PSW.        */ 06959000
         O     NEWPSWD1,MASKON                                     1914 06960000
*/*                                                            Y02751*/ 06961000
*                                                                  1915 06962000
*   CS(CURPSWD1,NEWPSWD1,NWTPSWD1); /* ATTEMPT TO STORE THE ALTERED     06963000
*                                      FIRST WORD OF THE PSW BACK IN    06964000
*                                      THE WAIT PSW.                 */ 06965000
         L     @02,NWPSWPTR                                        1915 06966000
         CS    CURPSWD1,@05,NWTPSWD1(@02)                          1915 06967000
*/*                                                            Y02751*/ 06968000
*                                                                  1916 06969000
*   BC(7,NENABLE);                  /* IF NOT SUCCESSFUL, TRY AGAIN  */ 06970000
         BC    7,NENABLE                                           1916 06971000
*   RFY                                                            1917 06972000
*    (CURPSWD1,                                                    1917 06973000
*     NEWPSWD1);                                                   1917 06974000
*                                                                  1917 06975000
*/********************************************************************/ 06976000
*/*                                                                  */ 06977000
*/* IF THIS MASK IN THIS PSW WERE RE-SET (TO ENABLE MACH. CHECKS)    */ 06978000
*/* EARLIER THAN THIS POINT IN IEAVNIP0, THE FOLLOWING MIGHT OCCUR:  */ 06979000
*/*   - A NON-IPL CPU IS IDLE, WITH A WAIT STATE PSW, ENABLED        */ 06980000
*/*     EXCEPT FOR MACH. CHECKS                                      */ 06981000
*/*   - THE CPU TAKES AN INTERRUPT (A DEVICE COMES READY, THE        */ 06982000
*/*     OPERATOR FLIPS A SWITCH OR PRESSES A BUTTON, ETC.)           */ 06983000
*/*   - THE INTERRUPT IS HANDLED AND THE SYSTEM WAIT TASK IS         */ 06984000
*/*     RE-DISPATHCED WITH A WAIT PSW, BUT ENABLED FOR MACH. CHECKS. */ 06985000
*/*   - A MCH CK OCCURS ON THE SAME CPU, IEAVNIP0'S MACH. CHECK      */ 06986000
*/*     TRAP IS ENTERED AND STOPS THE ENTIRE CONFIGURATION (REMEMBER */ 06987000
*/*     EACH NON-IPL CPU'S PSA HAS A MACH. CHECK NEW PSW POINTING    */ 06988000
*/*     TO IEAVNIP0'S MACH. CHECK TRAP)                              */ 06989000
*/*                                                                  */ 06990000
*/* THIS SITUATION IS UNDESIRABLE BECAUSE IF A MACH. CHECK OCCURS    */ 06991000
*/* ON A NON-IPL CPU AT THIS POINT IN IEAVNIP0, THAT CPU CAN STILL   */ 06992000
*/* BE 'BACKED OUT' (I.E. MARKED OFFLINE, REAL STORAGE FREED, ETC.)  */ 06993000
*/*                                                                  */ 06994000
*/* HOWEVER THE MACH. CHECK MASK IN THE PSW LOADED BY THE DISPATCHER */ 06995000
*/* WHEN DISPATCHING THE SYS. WAIT TASK MUST BE ENABLED AT THIS TIME */ 06996000
*/* BECAUSE THE EXECUTION OF THE 'BLDL' AND 'LOAD' FOR IEAVNIPM      */ 06997000
*/* MIGHT CAUSE THE SYS. WAIT TASK TO BE DISPATCHED ON THE IPL CPU   */ 06998000
*/*                                                                  */ 06999000
*/* IF A MACH. CHECK OCCURED ON THE IPL CPU WHILE THE SYS. WAIT      */ 07000000
*/* TASK PSW (WITH MACH. CHECKS DISABLED) WAS IN CONTROL, IEAVNIP0'S */ 07001000
*/* MACH. CHECK TRAP WOULD NOT RECEIVE CONTROL TO LOAD A WAIT STATE  */ 07002000
*/* PSW WITH AN INDICATIVE WAIT CODE BUT INSTEAD THE CPU WOULD BE    */ 07003000
*/* PUT IN A 'CHECK STOP' STATE (A RED LIGHT CONDITION) WITH NO      */ 07004000
*/* INDICATION OF WHAT HAPPENED.                                     */ 07005000
*/*                                                                  */ 07006000
*/********************************************************************/ 07007000
*                                                                  1918 07008000
*   RFY                                                            1918 07009000
*    (NBLDLRC) RSTD;                                               1918 07010000
*                                                                  1918 07011000
*   /*****************************************************************/ 07012000
*   /*                                                               */ 07013000
*   /* ISSUE BLDL FOR IEAVNIPM                                       */ 07014000
*   /*                                                               */ 07015000
*   /*****************************************************************/ 07016000
*                                                                  1919 07017000
*   GEN(BLDL   NIPDCBSN,NP0BLDL)                                   1919 07018000
*   SETS(NBLDLRC) REFS(NIPDCBSN,NP0BLDL);                          1919 07019000
         BLDL   NIPDCBSN,NP0BLDL                                        07020000
*   IF NBLDLRC=8                    /* CHECK IF RET. CODE = 8        */ 07021000
*     THEN                          /* IF SO, BLDL HAD AN I/O ERROR  */ 07022000
         CH    NBLDLRC,@CH00068                                    1920 07023000
         BE    @RT01920                                            1920 07024000
*     GOTO NP0BLIOE;                /* GO TO ERROR RTN.              */ 07025000
*   IF NBLDLRC=4                    /* CHECK IF RET. CODE = 4        */ 07026000
*     THEN                          /* IF SO, BLDL COULDN'T FIND   1922 07027000
*                                      IEAVNIPM                      */ 07028000
         CH    NBLDLRC,@CH00062                                    1922 07029000
         BE    @RT01922                                            1922 07030000
*     GOTO NP0NNIPM;                /* GO TO ERROR RTN.              */ 07031000
*   IF NBLDLRC^=0                   /* CHECK IF RET. CODE IS NON-ZERO*/ 07032000
*     THEN                          /* IF SO, IT IS AN UN-DEFINED  1924 07033000
*                                      RET. CODE                     */ 07034000
         LTR   NBLDLRC,NBLDLRC                                     1924 07035000
         BNZ   @RT01924                                            1924 07036000
*     GOTO NP0BLDLE;                /* GO TO ERROR RTN.              */ 07037000
*   RFY                                                            1926 07038000
*    (NBLDLRC) UNRSTD;                                             1926 07039000
*   NP0BLATR=NP0BLATR               /* OTHERWISE, SET IEAVNIPM'S     */ 07040000
*       |'C000'X;                   /* ATTRIBUTES FIELD TO         1927 07041000
*                                      'REENTRANT' SO IEAVNIPM WILL     07042000
*                                      BE LOAD'D INTO SUBPOOL 252  1927 07043000
*                                      (NIP TRANSIENT AREA)          */ 07044000
         OC    NP0BLATR(2),@CB05277                                1927 07045000
*   RFY                                                            1928 07046000
*    (NPLOADEP) RSTD;                                              1928 07047000
*                                                                  1928 07048000
*/* LOAD IEAVNIPM                                                    */ 07049000
*                                                                  1929 07050000
*   GEN SETS(NPLOADEP) REFS(NP0NAME,NIPDCBSN);                     1929 07051000
         LOAD    DE=NP0NAME,DCB=NIPDCBSN,                             XX07052000
               RELATED=('LOAD OF IEAVNIPM, THIS MODULE IS DELETED     XX07053000
               BY IEAVNIPX')                                            07054000
*   NNIPMEP=NPLOADEP;               /* SAVE VIRT. ENTRY POINT OF   1930 07055000
*                                      IEAVNIPM                      */ 07056000
         LR    NNIPMEP,NPLOADEP                                    1930 07057000
*   RFY                                                            1931 07058000
*    (NPLOADEP) UNRSTD;                                            1931 07059000
*                                                                  1932 07060000
*/* CHECK MAL FUNCTION MASK FOR CPU'S THAT HAVE MAL FUNCTIONED       */ 07061000
*/* AND FREE ANY REAL STORAGE AREAS ALLOCATED TO SUCH CPU'S AND      */ 07062000
*/* INSURE THAT THEY ARE NOT MARKED ON-LINE.                         */ 07063000
*/*                                                                  */ 07064000
*/*                                                            Y02751*/ 07065000
*                                                                  1932 07066000
*   NPWMFMSK=NPMFMASK;              /* PICK UP A COPY OF THE MAL   1932 07067000
*                                      FUNCTION MASK. THIS COPY IS 1932 07068000
*                                      USED INSTEAD OF THE MASK    1932 07069000
*                                      ITSELF TO AVOID PROBLEMS    1932 07070000
*                                      SHOULD ANOTHER CPU MAL      1932 07071000
*                                      FUNCTION AND ITS MASK BIT BE     07072000
*                                      SET WHILE THIS RTN. IS USING     07073000
*                                      THE MASK.                     */ 07074000
         SLR   NPWMFMSK,NPWMFMSK                                   1932 07075000
         ICM   NPWMFMSK,3,NPMFMASK                                 1932 07076000
*/*                                                            Y02751*/ 07077000
*                                                                  1933 07078000
*   NWMFMSK2=NPWMFMSK;              /* KEEP A SECOND COPY OF THIS  1933 07079000
*                                      MASK FOR LATER USE.           */ 07080000
         LR    NWMFMSK2,NPWMFMSK                                   1933 07081000
*/*                                                            Y02751*/ 07082000
*                                                                  1934 07083000
*   IF NPWMFMSK^=0                  /* CHECK IF ANY CPU'S HAVE MAL 1934 07084000
*                                      FUNCTIONED (I.E. IF ANY MASK     07085000
*                                      BITS ARE 1).                  */ 07086000
*     THEN                          /* IF SO, THEN                   */ 07087000
         LTR   NPWMFMSK,NPWMFMSK                                   1934 07088000
         BNZ   @RT01934                                            1934 07089000
*/*                                                            Y02751*/ 07090000
*                                                                  1935 07091000
*     GOTO NMFRCVY;                 /* GO TO MAL FUNCTION RECOVERY 1935 07092000
*                                      RTN                           */ 07093000
*NPWRAPUP:                          /* COME HERE IF NO CPU'S HAVE MAL   07094000
*                                      FUNCTIONED OR WHEN THEY HAVE     07095000
*                                      ALL BEEN PROCESSED.           */ 07096000
*   NP0SMFA=ADDR(NIP0MCHT);         /* RE-SET IEAVNIP0'S MAL FUNCTION   07097000
*                                      ALERT TRAP TO POINT TO THE  1936 07098000
*                                      MACH. CHECK TRAP              */ 07099000
NPWRAPUP L     @05,@CA04827                                        1936 07100000
         L     @02,NP0SMFAP                                        1936 07101000
         ST    @05,NP0SMFA(,@02)                                   1936 07102000
*/*                                                                  */ 07103000
*/* THIS IS DONE BECAUSE THE NEXT FEW INSTR'S. IN THIS RTN. WILL SET */ 07104000
*/* UP THE CSD MASKS AND COUNT TO REPRESENT ALL ONLINE CPU'S.  AFTER */ 07105000
*/* THIS IS DONE IF ANY CPU GENERATES A MAL FUNCTION ALERT THIS      */ 07106000
*/* RTN. HAS NO PROVISIONS TO 'BACK OUT' THE OFFENDING CPU           */ 07107000
*/* (I.E. MARK IT OFFLINE, FREE ITS STORAGE AREAS, ETC.).  THUS, A   */ 07108000
*/* MAL FUNCTION ALERT FROM A NON-IPL CPU IS TREATED AS A MACH.      */ 07109000
*/* CHECK OCCURING ON THE IPL CPU - THAT IS, THE ENTIRE              */ 07110000
*/* CONFIGURATION WILL BE STOPPED.                                   */ 07111000
*/*                                                                  */ 07112000
*                                                                  1937 07113000
*   RFY                                                            1937 07114000
*    (CSD) BASED(CVTCSD);                                          1937 07115000
*   CSDCPUJS=NCPOLMSK;              /* PUT FINAL, CUMULATIVE MASK OF */ 07116000
         L     @05,CVTCSD(,RCVT)                                   1938 07117000
         MVC   CSDCPUJS(2,@05),NCPOLMSK                            1938 07118000
*   CSDCPUAL=NCPOLMSK;              /* ON LINE CPU'S IN VARIOUS CSD  */ 07119000
         MVC   CSDCPUAL(2,@05),NCPOLMSK                            1939 07120000
*   CSDSAFF=NCPOLMSK;               /* FIELDS.                       */ 07121000
         MVC   CSDSAFF(2,@05),NCPOLMSK                             1940 07122000
*   CSDCPUOL=NCPUCNT;               /* PUT FINAL COUNT OF ON LINE  1941 07123000
*                                      CPU'S IN CSD FIELD.           */ 07124000
         MVC   CSDCPUOL(2,@05),NCPUCNT                             1941 07125000
*   NVTFLWSC=NVTFLWSC               /* SET WAIT STATE CODE IN INITIAL*/ 07126000
*       &&NVTFLWSC;                 /* NVT TO ZERO. IEAVNIPM ASSUMES    07127000
*                                      THIS FIELD TO BE ZERO.        */ 07128000
         XC    NVTFLWSC(1),NVTFLWSC                                1942 07129000
*/* PUT ADDR. OF IEAVNIP0 MESSAGE PARAMETER LIST IN THE NVT.         */ 07130000
*/* IEAVNIPM WILL PRINT ANY MESSAGES INDICATED IN THE PARAM. LIST.   */ 07131000
*                                                                  1943 07132000
*   NVTN0MSG=ADDR(NP0MSGPL);        /* PUT ADDR. OF MESSAGE PARAM. 1943 07133000
*                                      LIST IN THE NVT.              */ 07134000
         LA    @05,NP0MSGPL                                        1943 07135000
         ST    @05,NVTN0MSG                                        1943 07136000
*   RFY                                                            1944 07137000
*    (R1,                                                          1944 07138000
*     RNVT,                                                        1944 07139000
*     RENTRY) RSTD;                                                1944 07140000
*   R1=ADDR(NIPDCBSN);              /* PUT ADDR. OF DCB FOR SYS1.  1945 07141000
*                                      NUCLEUS DATA SET IN REG. 1    */ 07142000
         LA    R1,NIPDCBSN                                         1945 07143000
*   RNVT=ADDR(NVT);                 /* PUT ADDR. OF NVT IN REG. 2  1946 07144000
*                                      NOTE: REG. 3 ALREADY CONTAINS    07145000
*                                      ADDR. OF CVT.                 */ 07146000
         LA    RNVT,NVT                                            1946 07147000
*   RENTRY=NNIPMEP;                 /* PICK UP ENTRY POINT OF      1947 07148000
*                                      IEAVNIPM IN REG. 15           */ 07149000
         LR    RENTRY,NNIPMEP                                      1947 07150000
*   REG5=ADDR(NP0FTCHT);            /* POINT TO FETCH TABLE  @ZM00857*/ 07151000
         LA    REG5,NP0FTCHT                                       1948 07152000
*   GEN(BR     RENTRY);             /* BRANCH TO IEAVNIPM.           */ 07153000
         BR     RENTRY                                                  07154000
*   RFY                                                            1950 07155000
*    (R1,                                                          1950 07156000
*     RNVT,                                                        1950 07157000
*     RENTRY) UNRSTD;                                              1950 07158000
*NMFRCVY:                           /* MAL FUNCTION RECOVERY ROUTINE */ 07159000
*/* THIS ROUTINE USES A COPY OF THE MAL FUNCTION MASK TO DETERMINE   */ 07160000
*/* WHICH CPU'S HAVE MAL FUNCTIONED AND FREES ANY REAL STORAGE AREAS */ 07161000
*/* STILL ALLOCATED TO THEM AND INSURES THAT THOSE CPU'S ARE NOT     */ 07162000
*/* MARKED AS ON LINE.                                               */ 07163000
*/*                                                            Y02751*/ 07164000
*                                                                  1951 07165000
*   NPCURCPU=15;                    /* PICK UP HI PHYS. CPU ADDR.    */ 07166000
NMFRCVY  MVC   NPCURCPU(2),@CH00123                                1951 07167000
*/*                                                            Y02751*/ 07168000
*                                                                  1952 07169000
*   DO WHILE NPCURCPU>=0;                                          1952 07170000
*                                                                  1952 07171000
         B     @DE01952                                            1952 07172000
@DL01952 DS    0H                                                  1953 07173000
*/*                                                            Y02751*/ 07174000
*                                                                  1953 07175000
*     IF(NCPMSKTB(NPCURCPU+1)       /* CHECK IF CURR. CPU IS OKAY    */ 07176000
*         &NPWMFMSK)=0 THEN         /* IF IT IS OKAY                 */ 07177000
         LH    @05,NPCURCPU                                        1953 07178000
         ALR   @05,@05                                             1953 07179000
         LR    @02,NPWMFMSK                                        1953 07180000
         LA    @01,NCPMSKTB(@05)                                   1953 07181000
         SLR   @05,@05                                             1953 07182000
         ICM   @05,3,0(@01)                                        1953 07183000
         NR    @02,@05                                             1953 07184000
         LTR   @02,@02                                             1953 07185000
         BNZ   @RF01953                                            1953 07186000
*NMFSTEP:                                                          1954 07187000
*                                                                  1954 07188000
*/*                                                            Y02751*/ 07189000
*                                                                  1954 07190000
*       NPCURCPU=NPCURCPU           /* DECREMENT PHYS. CPU ADDR. BY  */ 07191000
*           -1;                     /* ONE, AND CHECK IT             */ 07192000
NMFSTEP  LH    @05,NPCURCPU                                        1954 07193000
         BCTR  @05,0                                               1954 07194000
         STH   @05,NPCURCPU                                        1954 07195000
*     ELSE                          /* IF IT IS NOT OKAY,            */ 07196000
*/*                                                            Y02751*/ 07197000
*                                                                  1955 07198000
*       DO;                                                        1955 07199000
*                                                                  1955 07200000
         B     @RC01953                                            1955 07201000
@RF01953 DS    0H                                                  1956 07202000
*/*                                                            Y02751*/ 07203000
*                                                                  1956 07204000
*         CALL NP0MSGE;             /* CALL RTN. TO SET UP A MESSAGE    07205000
*                                      ABOUT THIS CPU                */ 07206000
         BAL   @14,NP0MSGE                                         1956 07207000
*/*                                                            Y02751*/ 07208000
*                                                                  1957 07209000
*         GOTO NONLNCHK;            /* THEN GO TO RTN. TO CHECK IF IT   07210000
*                                      IS MARKED ONLINE              */ 07211000
         B     NONLNCHK                                            1957 07212000
*/*                                                            Y02751*/ 07213000
*                                                                  1958 07214000
*       END;                                                       1958 07215000
*                                                                  1958 07216000
*/*                                                            Y02751*/ 07217000
*                                                                  1959 07218000
*   END;                                                           1959 07219000
@RC01953 DS    0H                                                  1959 07220000
@DE01952 ICM   @05,3,NPCURCPU                                      1959 07221000
         BNM   @DL01952                                            1959 07222000
*                                                                  1960 07223000
*/* FALL INTO THIS RTN. WHEN ALL CPU'S HAVE BEEN CHECKED AGAINST     */ 07224000
*/* MAL FUNCTION MASK                                                */ 07225000
*/*                                                            Y02751*/ 07226000
*                                                                  1960 07227000
*   NPWMFMSK=NPMFMASK;              /* PICK UP A COPY OF THE MAL   1960 07228000
*                                      FUNCTION MASK AGAIN           */ 07229000
         SLR   NPWMFMSK,NPWMFMSK                                   1960 07230000
         ICM   NPWMFMSK,3,NPMFMASK                                 1960 07231000
*/*                                                            Y02751*/ 07232000
*                                                                  1961 07233000
*   IF NPWMFMSK=NWMFMSK2            /* CHECK IF THE TWO COPIES OF THE   07234000
*                                      MAL FUNCTION MASK (NEW AND  1961 07235000
*                                      OLD) ARE EQUAL                */ 07236000
*     THEN                          /* IF SO, NO CPU'S HAVE MAL    1961 07237000
*                                      FUNCTIONED WHILE PROCESSING 1961 07238000
*                                      THE PREVIOUS COPY OF THE MASK */ 07239000
         CLR   NPWMFMSK,NWMFMSK2                                   1961 07240000
         BE    @RT01961                                            1961 07241000
*     GOTO NPWRAPUP;                /* SO GO TO WRAP UP ROUTINE      */ 07242000
*/*                                                            Y02751*/ 07243000
*                                                                  1963 07244000
*   ELSE                            /* IF THE TWO COPIES OF THE MASK    07245000
*                                      ARE NOT EQUAL, AT LEAST ONE 1963 07246000
*                                      CPU HAS MAL FUNCTIONED WHILE     07247000
*                                      PROCESSING THE PREVIOUS COPY     07248000
*                                      OF THE MASK.                  */ 07249000
*/*                                                            Y02751*/ 07250000
*                                                                  1963 07251000
*     DO;                                                          1963 07252000
*                                                                  1963 07253000
*/*                                                            Y02751*/ 07254000
*                                                                  1964 07255000
*       NPWMFMSK=NPWMFMSK           /* 'EXCLUSIVE OR' THE TWO MASKS -*/ 07256000
*           &&NWMFMSK2;             /* THIS PRODUCES A MASK SHOWING     07257000
*                                      ONLY THE CPU'S THAT MAVE MAL     07258000
*                                      FUNCTIONED WHILE PROCESSING 1964 07259000
*                                      THE PREVIOUS VERSION OF THE 1964 07260000
*                                      MAL FUNCTION MASK.            */ 07261000
         XR    NPWMFMSK,NWMFMSK2                                   1964 07262000
*/*                                                            Y02751*/ 07263000
*                                                                  1965 07264000
*       NWMFMSK2=NWMFMSK2           /* 'OR' THE OLD MASK WITH RESULT */ 07265000
*           |NPWMFMSK;              /* OF 'EXCLUSIVE OR', THIS     1965 07266000
*                                      PRODUCES A CUMULATIVE MASK OF    07267000
*                                      MAL FUNCTIONED CPU'S AS OF THE   07268000
*                                      TIME THE LATEST COPY OF THE 1965 07269000
*                                      MAL FUNCTION MASK WAS       1965 07270000
*                                      OBTAINED.                     */ 07271000
         OR    NWMFMSK2,NPWMFMSK                                   1965 07272000
*/*                                                            Y02751*/ 07273000
*                                                                  1966 07274000
*       GOTO NMFRCVY;               /* GO TO MAL FUNCTION RECOVERY 1966 07275000
*                                      RTN. TO PROCESS CPU'S THAT  1966 07276000
*                                      HAVE MAL FUNCTIONED WHILE   1966 07277000
*                                      PROCESSING PREVIOUS COPY OF 1966 07278000
*                                      THE MASK.                     */ 07279000
         B     NMFRCVY                                             1966 07280000
*/*                                                            Y02751*/ 07281000
*                                                                  1967 07282000
*     END;                                                         1967 07283000
*NONLNCHK:                          /* CPU ON LINE CHECK             */ 07284000
*/* COME HERE TO PROCESS A CPU THAT IS INDICATED IN THE MAL          */ 07285000
*/* FUNCTION MASK AS HAVING MAL FUNCTIONED.                          */ 07286000
*/*                                                            Y02751*/ 07287000
*                                                                  1968 07288000
*   IF(NCPMSKTB(NPCURCPU+1)         /* CHECK IF MAL FUNCTIONING CPU  */ 07289000
*       &NCPOLMSK)^=0               /* IS MARKED AS ON LINE          */ 07290000
*     THEN                          /* IF IT IS MARKED ON LINE, THEN */ 07291000
NONLNCHK SLR   @05,@05                                             1968 07292000
         ICM   @05,3,NCPOLMSK                                      1968 07293000
         LH    @02,NPCURCPU                                        1968 07294000
         ALR   @02,@02                                             1968 07295000
         LA    @01,NCPMSKTB(@02)                                   1968 07296000
         SLR   @02,@02                                             1968 07297000
         ICM   @02,3,0(@01)                                        1968 07298000
         LR    @15,@02                                             1968 07299000
         NR    @15,@05                                             1968 07300000
         LTR   @15,@15                                             1968 07301000
         BZ    @RF01968                                            1968 07302000
*/*                                                            Y02751*/ 07303000
*                                                                  1969 07304000
*     DO;                                                          1969 07305000
*                                                                  1969 07306000
*/*                                                            Y02751*/ 07307000
*                                                                  1970 07308000
*       NCPOLMSK=NCPOLMSK           /* MARK IT OFF LINE              */ 07309000
*           &&NCPMSKTB(NPCURCPU+1);                                1970 07310000
*                                                                  1970 07311000
         XR    @05,@02                                             1970 07312000
         STH   @05,NCPOLMSK                                        1970 07313000
*/*                                                            Y02751*/ 07314000
*                                                                  1971 07315000
*       NCPUCNT=NCPUCNT             /* DECREMENT COUNT OF ON LINE    */ 07316000
*           -1;                     /* CPU'S BY ONE.                 */ 07317000
         LH    @05,NCPUCNT                                         1971 07318000
         BCTR  @05,0                                               1971 07319000
         STH   @05,NCPUCNT                                         1971 07320000
*/*                                                            Y02751*/ 07321000
*                                                                  1972 07322000
*       GOTO NMFRCFMS;              /* GO TO MAL FUNCTION RECOVERY 1972 07323000
*                                      SUB ROUTINE TO FREE MAIN    1972 07324000
*                                      STORAGE AREAS ALLOCATED TO  1972 07325000
*                                      THIS CPU.                     */ 07326000
         B     NMFRCFMS                                            1972 07327000
*/*                                                            Y02751*/ 07328000
*                                                                  1973 07329000
*     END;                                                         1973 07330000
*                                                                  1973 07331000
*/* NOTE: THIS ASSUMES THAT IF A CPU IS MARKED ONLINE, THERE ARE     */ 07332000
*/*       MAIN STORAGE AREAS ALLOCATED TO IT.                        */ 07333000
*                                                                  1974 07334000
*   ELSE                            /* IF CPU IS NOT MARKED ON LINE  */ 07335000
*/*                                                            Y02751*/ 07336000
*                                                                  1974 07337000
*     GOTO NMFSTEP;                 /* GO TO RTN. TO CHECK NEXT CPU  */ 07338000
*/* NOTE: THIS ASSUMES THAT IF A CPU IS NOT MARKED ONLINE, THERE ARE */ 07339000
*/*       NO MAIN STORAGE AREAS ALLOCATED TO IT.                     */ 07340000
*                                                                  1975 07341000
*NMFRCFMS:                                                         1975 07342000
*                                                                  1975 07343000
*/* ROUTINE TO FREE STORAGE AREAS ALLOCATED TO CPU'S THAT HAVE       */ 07344000
*/* MAL FUNCTIONED.                                                  */ 07345000
*/*                                                                  */ 07346000
*/* GET ADDRESS OF LCCA CORRESPONDING TO OFFENDING CPU               */ 07347000
*/*                                                            Y02751*/ 07348000
*                                                                  1975 07349000
*   LCCVTPTR=CVTLCCAT               /* PUT VIRT. ADDR. OF LCCAVT   1975 07350000
*                                      ENTRY                         */ 07351000
*       +(LENGTH(LCCAT00P)          /* CORRES. TO OFFENDING CPU IN   */ 07352000
*       *NPCURCPU);                 /* BASE FOR MAP OF LCCAVT ENTRY  */ 07353000
NMFRCFMS LH    @05,NPCURCPU                                        1975 07354000
         SLA   @05,2                                               1975 07355000
         AL    @05,CVTLCCAT(,RCVT)                                 1975 07356000
         ST    @05,LCCVTPTR                                        1975 07357000
*/*                                                            Y02751*/ 07358000
*                                                                  1976 07359000
*   NCURVLCC=LCCVTENT;              /* PICK UP VIRT. ADDR. OF LCCA 1976 07360000
*                                      CORRES. TO OFFENDING CPU      */ 07361000
         L     @05,LCCVTENT(,@05)                                  1976 07362000
         ST    @05,NCURVLCC                                        1976 07363000
*   RFY                                                            1977 07364000
*    (LCCA) BASED(NCURVLCC);                                       1977 07365000
*                                                                  1977 07366000
*/* FREE SUPERVISOR ROUTINE WORK/SAVE AREAS FOR THE OFFENDING CPU    */ 07367000
*                                                                  1978 07368000
*   RFY                                                            1978 07369000
*    (NSPSAREG,                                                    1978 07370000
*     NSPSARCD) RSTD;                                              1978 07371000
*                                                                  1978 07372000
*/*                                                            Y02751*/ 07373000
*                                                                  1979 07374000
*   NSPSAREG=LCCACPUS;              /* PICK UP VIRT. ADDR. OF      1979 07375000
*                                      SUPERVISOR RTN. WORK/SAVE AREA   07376000
*                                      VECTOR TABLE IN REG. 1        */ 07377000
         L     NSPSAREG,LCCACPUS(,@05)                             1979 07378000
*/*                                                            Y02751*/ 07379000
*                                                                  1980 07380000
*   CALL IEAVSPSA;                  /* CALL IEAVSPSA TO FREE THE   1980 07381000
*                                      WORK/SAVE AREAS FOR THE CURR.    07382000
*                                      CPU.                          */ 07383000
         BAL   @14,IEAVSPSA                                        1980 07384000
*/*                                                            Y02751*/ 07385000
*                                                                  1981 07386000
*   IF NSPSARCD^=0                  /* CHECK IF 'IEAVSPSA' RETURNED A   07387000
*                                      NON-ZERO CODE                 */ 07388000
*     THEN                          /* IF SO, THERE WAS AN ERROR OF     07389000
*                                      SOME KIND                     */ 07390000
         LTR   NSPSARCD,NSPSARCD                                   1981 07391000
         BNZ   @RT01981                                            1981 07392000
*/*                                                            Y02751*/ 07393000
*                                                                  1982 07394000
*     GOTO NP0SPSAE;                /* GO TO ERROR ROUTINE           */ 07395000
*/*                                                            Y02751*/ 07396000
*                                                                  1983 07397000
*   ELSE                                                           1983 07398000
*     ;                             /* IF THERE WAS NO ERROR,      1983 07399000
*                                      CONTINUE                      */ 07400000
*   RFY                                                            1984 07401000
*    (NSPSAREG,                                                    1984 07402000
*     NSPSARCD) UNRSTD;                                            1984 07403000
*   RFY                                                            1985 07404000
*    (NP0FMLEN,                                                    1985 07405000
*     AREAAD) RSTD;                                                1985 07406000
*                                                                  1985 07407000
*   /*****************************************************************/ 07408000
*   /*                                                               */ 07409000
*   /* FREE THE LCCA FOR THE OFFENDING CPU                           */ 07410000
*   /*                                                               */ 07411000
*   /*****************************************************************/ 07412000
*                                                                  1986 07413000
*/*                                                            Y02751*/ 07414000
*                                                                  1986 07415000
*   NP0FMLEN=NLCCALEN;              /* PICK UP LENGTH OF LCCA IN REG.   07416000
*                                      0                             */ 07417000
         LH    NP0FMLEN,NLCCALEN                                   1986 07418000
*/*                                                            Y02751*/ 07419000
*                                                                  1987 07420000
*   AREAAD=NCURVLCC;                /* PICK UP VIRT. ADDR. OF LCCA 1987 07421000
*                                      FOR CURR. CPU IN REG. 1       */ 07422000
         L     AREAAD,NCURVLCC                                     1987 07423000
*/*                                                            Y02751*/ 07424000
*                                                                  1988 07425000
*NFRLCCA2:                                                         1988 07426000
*   GEN;                                                           1988 07427000
*                                                                  1988 07428000
NFRLCCA2 DS    0H                                                  1988 07429000
*                                /* FREE THE LCCA FOR THE CURR CPU  */  07430000
         FREEMAIN   RU,LV=(0),A=(1),SP=245,                           XX07431000
               RELATED=('LCCA FOR OFFENDING CPU, SP 245, GOTTEN IN    XX07432000
               IEAVNIP0 AT LABEL: NGTLCCA')                             07433000
*/*                                                            Y02751*/ 07434000
*                                                                  1989 07435000
*   LCCVTENT=LCCVTENT               /* SET LCCVT ENTRY CORRES. TO  1989 07436000
*                                      CURR.                         */ 07437000
*       &&LCCVTENT;                 /* CPU TO ZERO. NOTE: LCCVTENT IS   07438000
*                                      A MAP OF A LCCAVT ENTRY, IT IS   07439000
*                                      BASED ON LCCVTPTR WHICH WAS 1989 07440000
*                                      SET EARLIER TO THE VIRT. ADDR.   07441000
*                                      OF THE LCCAVT ENTRY CORRES. TO   07442000
*                                      THE CURR. CPU                 */ 07443000
         L     @05,LCCVTPTR                                        1989 07444000
         XC    LCCVTENT(4,@05),LCCVTENT(@05)                       1989 07445000
*/* GET ADDRESS OF PCCA CORRESPONDING TO OFFENDING CPU               */ 07446000
*/*                                                            Y02751*/ 07447000
*                                                                  1990 07448000
*   PCCVTPTR=CVTPCCAT               /* PUT VIRT. ADDR. OF PCCAVT     */ 07449000
*       +(LENGTH(PCCAT00P)          /* ENTRY CORRES. TO OFFENDING CPU*/ 07450000
*       *NPCURCPU);                 /* IN BASE FOR MAP OF PCCAVT   1990 07451000
*                                      ENTRY.                        */ 07452000
         LH    @05,NPCURCPU                                        1990 07453000
         SLA   @05,2                                               1990 07454000
         AL    @05,CVTPCCAT(,RCVT)                                 1990 07455000
         ST    @05,PCCVTPTR                                        1990 07456000
*/*                                                            Y02751*/ 07457000
*                                                                  1991 07458000
*   NCURVPCC=PCCVTENT;              /* PICK UP VIRT. ADDR. OF PCCA 1991 07459000
*                                      CORRES. TO OFFENDING CPU      */ 07460000
         L     @05,PCCVTENT(,@05)                                  1991 07461000
         ST    @05,NCURVPCC                                        1991 07462000
*   RFY                                                            1992 07463000
*    (PCCA) BASED(NCURVPCC);                                       1992 07464000
*                                                                  1992 07465000
*   /*****************************************************************/ 07466000
*   /*                                                               */ 07467000
*   /* FREE THE FRR STACKS FOR THE OFFENDING CPU                     */ 07468000
*   /*                                                               */ 07469000
*   /*****************************************************************/ 07470000
*                                                                  1993 07471000
*   RFY                                                            1993 07472000
*    (PSA) BASED(PCCAPSAV);                                        1993 07473000
*                                                                  1993 07474000
*/*                                                            Y02751*/ 07475000
*                                                                  1994 07476000
*   NP0FMLEN=YSTAKLEN;              /* PUT LENGTH OF FRR STACKS IN 1994 07477000
*                                      REG. 0                        */ 07478000
         LH    NP0FMLEN,@CH03735                                   1994 07479000
*/*                                                            Y02751*/ 07480000
*                                                                  1995 07481000
*   AREAAD=PSACSTK;                 /* PUT VIRT. ADDR. OF FRR STACKS    07482000
*                                      IN REG. 1                     */ 07483000
         L     @05,PCCAPSAV(,@05)                                  1995 07484000
         L     AREAAD,PSACSTK(,@05)                                1995 07485000
*/*                                                            Y02751*/ 07486000
*                                                                  1996 07487000
*NFRFRRS2:                                                         1996 07488000
*   GEN;                                                           1996 07489000
*                                                                  1996 07490000
NFRFRRS2 DS    0H                                                  1996 07491000
*                               /* FREE FRR STACKS FOR OFFENDING CPU*/  07492000
         FREEMAIN  RU,LV=(0),A=(1),SP=245,                            XX07493000
               RELATED=('FRR STACKS FOR OFFENDING CPU, SP 245,        XX07494000
               GOTTEN IN IEAVNIP0 AT LABEL: NGTFRRS')                   07495000
*   /*****************************************************************/ 07496000
*   /*                                                               */ 07497000
*   /* FREE THE PSA FOR THE OFFENDING CPU                            */ 07498000
*   /*                                                               */ 07499000
*   /*****************************************************************/ 07500000
*                                                                  1997 07501000
*/*                                                            Y02751*/ 07502000
*                                                                  1997 07503000
*   NP0FMLEN=NPSALEN;               /* PUT LENGTH OF PSA IN REG. 0   */ 07504000
         LH    NP0FMLEN,NPSALEN                                    1997 07505000
*/*                                                            Y02751*/ 07506000
*                                                                  1998 07507000
*   AREAAD=PCCAPSAV;                /* PUT VIRT. ADDR. OF PSA IN   1998 07508000
*                                      REG.1                         */ 07509000
         L     @05,NCURVPCC                                        1998 07510000
         L     AREAAD,PCCAPSAV(,@05)                               1998 07511000
*/*                                                            Y02751*/ 07512000
*                                                                  1999 07513000
*NFRPSA2:                                                          1999 07514000
*   GEN;                                                           1999 07515000
*                                                                  1999 07516000
NFRPSA2  DS    0H                                                  1999 07517000
*                               /* FREE THE PSA FOR OFFENDING CPU   */  07518000
         FREEMAIN   RU,LV=(0),A=(1),SP=245,                           XX07519000
               RELATED=('PSA FOR OFFENDING CPU, SP 245, GOTTEN IN     XX07520000
               IEAVNIP0 AT LABEL: NGTPSA')                              07521000
*   /*****************************************************************/ 07522000
*   /*                                                               */ 07523000
*   /* FREE THE PCCA FOR THE OFFENDING CPU                           */ 07524000
*   /*                                                               */ 07525000
*   /*****************************************************************/ 07526000
*                                                                  2000 07527000
*/*                                                            Y02751*/ 07528000
*                                                                  2000 07529000
*   NP0FMLEN=NPCCALEN;              /* PICK UP LENGTH OF PCCA IN REG.   07530000
*                                      0                             */ 07531000
         LH    NP0FMLEN,NPCCALEN                                   2000 07532000
*/*                                                            Y02751*/ 07533000
*                                                                  2001 07534000
*   AREAAD=NCURVPCC;                /* PICK UP VIRT. ADDR. OF PCCA 2001 07535000
*                                      FOR CURR. CPU IN REG. 1       */ 07536000
         L     AREAAD,NCURVPCC                                     2001 07537000
*/*                                                            Y02751*/ 07538000
*                                                                  2002 07539000
*NFRPCCA2:                                                         2002 07540000
*   GEN;                                                           2002 07541000
NFRPCCA2 DS    0H                                                  2002 07542000
*                               /* FREE THE PCCA FOR OFFENDING CPU  */  07543000
         FREEMAIN   RU,LV=(0),A=(1),SP=245,                           XX07544000
               RELATED=('PCCA FOR OFFENDING CPU, SP 245, GOTTEN IN    XX07545000
               IEAVNIP0 AT LABEL: NGTPCCA')                             07546000
*   RFY                                                            2003 07547000
*    (NP0FMLEN,                                                    2003 07548000
*     AREAAD) UNRSTD;                                              2003 07549000
*                                                                  2003 07550000
*/*                                                            Y02751*/ 07551000
*                                                                  2004 07552000
*   PCCVTENT=PCCVTENT               /* SET PCCAVT ENTRY CORRES. TO   */ 07553000
*       &&PCCVTENT;                 /* CURR. CPU TO ZERO NOTE:     2004 07554000
*                                      PCCVTENT IS A MAP OF A PCCAVT    07555000
*                                      ENTRY, IT IS BASED ON PCCVTPTR   07556000
*                                      WHICH WAS SET EARLIER TO THE     07557000
*                                      VIRT. ADDR. OF THE PCCAVT   2004 07558000
*                                      ENTRY CORRES. TO CURR. CPU    */ 07559000
         L     @05,PCCVTPTR                                        2004 07560000
         XC    PCCVTENT(4,@05),PCCVTENT(@05)                       2004 07561000
*/*                                                            Y02751*/ 07562000
*                                                                  2005 07563000
*   GOTO NMFSTEP;                   /* GO TO RTN. TO CHECK NEXT CPU  */ 07564000
         B     NMFSTEP                                             2005 07565000
*                                                                  2006 07566000
*/********************************************************************/ 07567000
*/*                                                                  */ 07568000
*/*  ROUTINE EXECUTED ON SIGNALLED CPU'S TO INITIALIZE THEM          */ 07569000
*/*                                                                  */ 07570000
*/********************************************************************/ 07571000
*/*                                                            Y02751*/ 07572000
*                                                                  2006 07573000
*NIP0CPUI:                                                         2006 07574000
*   ENTRY;                                                         2006 07575000
*                                                                  2006 07576000
@EP02006 DS    0H                                                  2007 07577000
*/*  CLEAR ALL UNUSED REGISTERS TO ZERO                              */ 07578000
*                                                                  2007 07579000
*   RFY                                                            2007 07580000
*    (REG0,                                                        2007 07581000
*     REG1,                                                        2007 07582000
*     REG2,                                                        2007 07583000
*     REG3,                                                        2007 07584000
*     REG4,                                                        2007 07585000
*     REG5,                                                        2007 07586000
*     REG6,                                                        2007 07587000
*     REG7,                                                        2007 07588000
*     REG10) RSTD;                                                 2007 07589000
*                                                                  2007 07590000
*/*                                                            Y02751*/ 07591000
*                                                                  2008 07592000
*   REG0=REG0&&REG0;                                               2008 07593000
*                                                                  2008 07594000
         XR    REG0,REG0                                           2008 07595000
*/*                                                            Y02751*/ 07596000
*                                                                  2009 07597000
*   REG1=REG1&&REG1;                                               2009 07598000
*                                                                  2009 07599000
         XR    REG1,REG1                                           2009 07600000
*/*                                                            Y02751*/ 07601000
*                                                                  2010 07602000
*   REG2=REG2&&REG2;                                               2010 07603000
*                                                                  2010 07604000
         XR    REG2,REG2                                           2010 07605000
*/*                                                            Y02751*/ 07606000
*                                                                  2011 07607000
*   REG3=REG3&&REG3;                                               2011 07608000
*                                                                  2011 07609000
         XR    REG3,REG3                                           2011 07610000
*/*                                                            Y02751*/ 07611000
*                                                                  2012 07612000
*   REG4=REG4&&REG4;                                               2012 07613000
*                                                                  2012 07614000
         XR    REG4,REG4                                           2012 07615000
*/*                                                            Y02751*/ 07616000
*                                                                  2013 07617000
*   REG5=REG5&&REG5;                                               2013 07618000
*                                                                  2013 07619000
         XR    REG5,REG5                                           2013 07620000
*/*                                                            Y02751*/ 07621000
*                                                                  2014 07622000
*   REG6=REG6&&REG6;                                               2014 07623000
*                                                                  2014 07624000
         XR    REG6,REG6                                           2014 07625000
*/*                                                            Y02751*/ 07626000
*                                                                  2015 07627000
*   REG7=REG7&&REG7;                                               2015 07628000
*                                                                  2015 07629000
         XR    REG7,REG7                                           2015 07630000
*/*                                                            Y02751*/ 07631000
*                                                                  2016 07632000
*   REG10=REG10&&REG10;                                            2016 07633000
         XR    REG10,REG10                                         2016 07634000
*   RFY                                                            2017 07635000
*    (REG0,                                                        2017 07636000
*     REG1,                                                        2017 07637000
*     REG2,                                                        2017 07638000
*     REG4,                                                        2017 07639000
*     REG5,                                                        2017 07640000
*     REG6,                                                        2017 07641000
*     REG7,                                                        2017 07642000
*     REG10) UNRSTD;                                               2017 07643000
*   RFY                                                            2018 07644000
*    (RCVT) RSTD;                                                  2018 07645000
*                                                                  2018 07646000
*/*                                                            Y02751*/ 07647000
*                                                                  2019 07648000
*   RCVT=CVTPTR;                    /* PUT ADDR. OF CVT IN REG. 3, A    07649000
*                                      NIP STANDARD                  */ 07650000
         L     RCVT,CVTPTR                                         2019 07651000
*/*                                                            Y02751*/ 07652000
*                                                                  2020 07653000
*   NCPUSTRT='1'B;                  /* SET FLAG TO INDICATE THIS CPU    07654000
*                                      IS STARTED. THIS IS         2020 07655000
*                                      DELIBERATELY DONE AFTER     2020 07656000
*                                      SEVERAL INSTRUCTIONS HAVE BEEN   07657000
*                                      EXECUTED ON THIS CPU JUST IN     07658000
*                                      CASE THIS CPU IS IN SINGLE  2020 07659000
*                                      CYCLE MODE, IN WHICH CASE ONLY   07660000
*                                      THE FIRST INSTR. WOULD BE   2020 07661000
*                                      EXECUTED AND THE CPU WOULD  2020 07662000
*                                      STOP                          */ 07663000
         LA    @14,NCPUSTRT                                        2020 07664000
         LR    @07,@14                                             2020 07665000
         LA    @02,3                                               2020 07666000
         NR    @07,@02                                             2020 07667000
         LCR   @07,@07                                             2020 07668000
         ALR   @14,@07                                             2020 07669000
         L     @02,0(,@14)                                         2020 07670000
@GL00011 LR    @15,@02                                             2020 07671000
         O     @15,@CB05626+3(@07)                                 2020 07672000
         CS    @02,@15,0(@14)                                      2020 07673000
         BNE   @GL00011                                            2020 07674000
*/*                                                            Y02751*/ 07675000
*                                                                  2021 07676000
*   DO I=40000000 TO 0 BY-1;        /* SET UP A SPIN LOOP TO CHECK 2021 07677000
*                                      THE 'SYNCHRONIZATION' FLAG. 2021 07678000
*                                      THIS FLAG MUST BE SET BY THE     07679000
*                                      SIGNAL- LING CPU BEFORE THIS     07680000
*                                      CPU CAN SAFELY CHECK THE 'RUN    07681000
*                                      AWAY' FLAG                    */ 07682000
         L     I,@CF05257                                          2021 07683000
@DL02021 DS    0H                                                  2022 07684000
*/*                                                            Y02751*/ 07685000
*                                                                  2022 07686000
*     IF NRNAWSYN='1'B              /* CHECK IF THE FLAG IS ON       */ 07687000
*       THEN                        /* IF SO, THE 'RUN AWAY' FLAG CAN   07688000
*                                      BE SAFELY CHECKED.            */ 07689000
         TM    NRNAWSYN,B'00100000'                                2022 07690000
         BO    @RT02022                                            2022 07691000
*/*                                                            Y02751*/ 07692000
*                                                                  2023 07693000
*       GOTO NRNAWCHK;              /* GO CHECK IT                   */ 07694000
*/*                                                            Y02751*/ 07695000
*                                                                  2024 07696000
*     ELSE                                                         2024 07697000
*       ;                           /* OTHERWISE, LOOP               */ 07698000
*/*                                                            Y02751*/ 07699000
*                                                                  2025 07700000
*   END;                                                           2025 07701000
*                                                                  2025 07702000
         BCTR  I,0                                                 2025 07703000
         LTR   I,I                                                 2025 07704000
         BNM   @DL02021                                            2025 07705000
*/*                                                            Y02751*/ 07706000
*                                                                  2026 07707000
*   GOTO NP0NSYNC;                  /* IF LOOP SPINS OUT, GOTO ERROR    07708000
*                                      ROUTINE.                      */ 07709000
         B     NP0NSYNC                                            2026 07710000
*NRNAWCHK:                                                         2027 07711000
*                                                                  2027 07712000
*/* COME HERE WHEN (IF) SYNCHRONIZATION FLAG IS SET, CHECK 'RUN      */ 07713000
*/* AWAY' FLAG.                                                      */ 07714000
*/*                                                            Y02751*/ 07715000
*                                                                  2027 07716000
*   IF NPRNAWAY='1'B                /* CHECK IF RUN AWAY FLAG IS ON  */ 07717000
*     THEN                          /* IF SO, THIS CPU IS A RUN AWAY    07718000
*                                      AND MUST BE STOPPED.          */ 07719000
NRNAWCHK TM    NPRNAWAY,B'01000000'                                2027 07720000
         BO    @RT02027                                            2027 07721000
*/*                                                            Y02751*/ 07722000
*                                                                  2028 07723000
*     GOTO NP0SRNAW;                /* GO TO ROUTINE TO LOAD DISABLED   07724000
*                                      WAIT STATE PSW. NOTE: SINCE 2028 07725000
*                                      THIS CPU WILL NOT SET ITS   2028 07726000
*                                      'INITIALIZATION COMPLETE'   2028 07727000
*                                      FLAG, THE IPL CPU'S LOOP    2028 07728000
*                                      CHECKING THAT FLAG WILL SPIN     07729000
*                                      OUT AND WILL SIGP-RESET THIS     07730000
*                                      CPU, JUST TO BE SURE.         */ 07731000
*/*                                                            Y02751*/ 07732000
*                                                                  2029 07733000
*   ELSE                                                           2029 07734000
*     ;                             /* IF 'RUN AWAY' FLAG NOT ON,  2029 07735000
*                                      CONTINUE.                     */ 07736000
*/* BEGIN INITIALIZING HARDWARE AND SOFTWARE (CONTROL BLOCKS, ETC.)  */ 07737000
*/* ON THIS CPU.                                                     */ 07738000
*/*                                                            Y02751*/ 07739000
*                                                                  2030 07740000
*   /*****************************************************************/ 07741000
*   /*                                                               */ 07742000
*   /* THE FOLLOWING CODE WILL DETERMINE IF THE TOD CLOCK IS IN THE  */ 07743000
*   /* ERROR STATE AND IF SO, WILL PROVIDE LOGIC TO CLEAR THE ERROR  */ 07744000
*   /* STATE VIA A SET CLOCK INSTRUCTION. IF THE CLOCK REMAINED IN   */ 07745000
*   /* THE ERROR STATE A SET CPU TIMER INSTRUCTION WOULD CAUSE A     */ 07746000
*   /* MACHINE CHECK TO BECOME PENDING. WHEN THIS MODULE WOULD THEN  */ 07747000
*   /* REACH THE POINT IN PROCESSING TO ENABLE FOR MACHINE CHECKS, IT*/ 07748000
*   /* WOULD TERMINATE IN A X'44' WAIT STATE BECAUSE OF THE PENDING  */ 07749000
*   /* MACHINE CHECK                                         @Z30LQXA*/ 07750000
*   /*                                                               */ 07751000
*   /*****************************************************************/ 07752000
*                                                                  2030 07753000
*   RFY                                                            2030 07754000
*    (WORKREG6) RSTD;                                              2030 07755000
*   WORKREG6=ADDR(CLOKWORK);        /* AREA FOR STORE CLOCK  @Z30LQXA*/ 07756000
         LA    WORKREG6,CLOKWORK                                   2031 07757000
*   GEN(STCK 0(WORKREG6));          /* CHECK FOR CLOCK ERROR @Z30LQXA*/ 07758000
         STCK 0(WORKREG6)                                               07759000
*   BC(13,SETTIMER);                /* OK--NO ERROR          @Z30LQXA*/ 07760000
         BC    13,SETTIMER                                         2033 07761000
*   CLOKWORK=''B;                   /*                       @Z30LQXA*/ 07762000
         XC    CLOKWORK(8),CLOKWORK                                2034 07763000
*   GEN(SCK 0(WORKREG6));           /* ATTEMPT A SETCLOCK HERE     2035 07764000
*                                      BECAUSE THE CLOCK SECURITY  2035 07765000
*                                      SWITCH MAY STILL BE ENABLED 2035 07766000
*                                      FROM A PREVIOUS CLOCK ERROR.     07767000
*                                      IF IT IS, THIS WILL PREVENT 2035 07768000
*                                      ANOTHER X'4A' WAIT STATE.   2035 07769000
*                                                            @Z30LQXA*/ 07770000
         SCK 0(WORKREG6)                                                07771000
*   BC(8,SETTIMER);                 /* ERROR CLEARED OK      @Z30LQXA*/ 07772000
         BC    8,SETTIMER                                          2036 07773000
*   CLOKWORK=''B;                   /*                       @Z30LQXA*/ 07774000
         XC    CLOKWORK(8),CLOKWORK                                2037 07775000
*   RFY                                                            2038 07776000
*    (PSA) BASED(NPSAPTR);                                         2038 07777000
*   FLCRNPSW=CLOKPSW1;              /* SET RESTART ADDRESS TO POINT     07778000
*                                      TO THE RESTART ROUTINE TO   2039 07779000
*                                      CLEAR THE CLOCK ERROR @Z30LQXA*/ 07780000
         L     @07,NPSAPTR                                         2039 07781000
         MVC   FLCRNPSW(8,@07),CLOKPSW1                            2039 07782000
*   NVTFLWSC=NVTWCN05;              /* SET 4A WAIT STATE     @Z30LQXA*/ 07783000
         MVI   NVTFLWSC,X'4A'                                      2040 07784000
*   NCLOKERR='1'B;                  /* SET BIT THAT ALL ALREADY    2041 07785000
*                                      INITIALIZED PROCESSORS ARE  2041 07786000
*                                      SPINNING ON TO INDICATE TO  2041 07787000
*                                      THEM TO LOAD 4A WAIT STATE  2041 07788000
*                                                            @Z30LQXA*/ 07789000
         LA    @15,NCLOKERR                                        2041 07790000
         LR    @14,@15                                             2041 07791000
         LA    @07,3                                               2041 07792000
         NR    @14,@07                                             2041 07793000
         LCR   @14,@14                                             2041 07794000
         ALR   @15,@14                                             2041 07795000
         L     @07,0(,@15)                                         2041 07796000
@GL00012 LR    @02,@07                                             2041 07797000
         O     @02,@CB05630+3(@14)                                 2041 07798000
         CS    @07,@02,0(@15)                                      2041 07799000
         BNE   @GL00012                                            2041 07800000
*   LPSW(NVTWTPSW);                 /* LOAD X'4A' WAIT STATE @Z30LQXA*/ 07801000
         LPSW  NVTWTPSW                                            2042 07802000
*SETCLOCK:                                                         2043 07803000
*   DO I=40000000 TO 0 BY-1;        /* SPIN WAITING FOR THE        2043 07804000
*                                      SIGNALLING PROCESSOR TO SET 2043 07805000
*                                      THE SYNCHRONIZATION FLAG    2043 07806000
*                                                            @Z30LQXA*/ 07807000
SETCLOCK L     I,@CF05257                                          2043 07808000
@DL02043 DS    0H                                                  2044 07809000
*     IF NRNAWSYN='1'B THEN         /* OK TO CHECK RUNAWAY FLAG?   2044 07810000
*                                                            @Z30LQXA*/ 07811000
         TM    NRNAWSYN,B'00100000'                                2044 07812000
         BNO   @RF02044                                            2044 07813000
*       IF NPRNAWAY='0'B THEN       /* THIS PROCESSOR IS NOT A     2045 07814000
*                                      RUNAWAY               @Z30LQXA*/ 07815000
         TM    NPRNAWAY,B'01000000'                                2045 07816000
         BNZ   @RF02045                                            2045 07817000
*         DO;                       /*                       @Z30LQXA*/ 07818000
*           NCPUSTRT='1'B;          /* INDICATE TO SIGNALLING      2047 07819000
*                                      PROCESSOR THAT THOS PROCESSOR    07820000
*                                      RESTARTED OK          @Z30LQXA*/ 07821000
         LA    @15,NCPUSTRT                                        2047 07822000
         LR    @14,@15                                             2047 07823000
         LA    @07,3                                               2047 07824000
         NR    @14,@07                                             2047 07825000
         LCR   @14,@14                                             2047 07826000
         ALR   @15,@14                                             2047 07827000
         L     @07,0(,@15)                                         2047 07828000
@GL00013 LR    @02,@07                                             2047 07829000
         O     @02,@CB05626+3(@14)                                 2047 07830000
         CS    @07,@02,0(@15)                                      2047 07831000
         BNE   @GL00013                                            2047 07832000
*           GOTO SET2;              /* CONTINUE              @Z30LQXA*/ 07833000
         B     SET2                                                2048 07834000
*         END;                      /*                       @Z30LQXA*/ 07835000
*       ELSE                        /* IF A RUNAWAY          @Z30LQXA*/ 07836000
*         GOTO NP0SRNAW;            /* THIS PROCESSOR MUST BE STOPPED   07837000
*                                                            @Z30LQXA*/ 07838000
*     ELSE                                                         2051 07839000
*       ;                           /* LOOP UNTIL BIT HAS BEEN SET 2051 07840000
*                                                            @Z30LQXA*/ 07841000
@RF02044 DS    0H                                                  2052 07842000
*   END;                            /* END OF DO LOOP        @Z30LQXA*/ 07843000
         BCTR  I,0                                                 2052 07844000
         LTR   I,I                                                 2052 07845000
         BNM   @DL02043                                            2052 07846000
*   GOTO NP0NSYNC;                  /* IF LOOP SPINS OUT, THIS     2053 07847000
*                                      PROCESSOR MUST BE STOPPED   2053 07848000
*                                                            @Z30LQXA*/ 07849000
         B     NP0NSYNC                                            2053 07850000
*SET2:                                                             2054 07851000
*   GEN(SCK   0(WORKREG6));         /* CLEAR CLOCK ERROR     @Z30LQXA*/ 07852000
SET2     SCK   0(WORKREG6)                                              07853000
*   BC(7,SET2);                     /* LOOP BACK TO REISSUE IF     2055 07854000
*                                      OPERATOR HAS NOT YET DEPRESSED   07855000
*                                      THE CLOCK SECURITY SWITCH   2055 07856000
*                                                            @Z30LQXA*/ 07857000
         BC    7,SET2                                              2055 07858000
*   FLCRNPSW=NP0SRSSA;              /* RESET RESTART ADDRESS TO    2056 07859000
*                                      SYSGENED VALUE        @Z30LQXA*/ 07860000
         L     @07,NPSAPTR                                         2056 07861000
         MVC   FLCRNPSW(8,@07),NP0SRSSA                            2056 07862000
*   RFY                                                            2057 07863000
*    (WORKREG6) UNRSTD;                                            2057 07864000
*SETTIMER:                                                         2058 07865000
*   GEN(SPT   NP0CTVAL);            /* SET CPU TIMER TO MAX. VALUE   */ 07866000
SETTIMER SPT   NP0CTVAL                                                 07867000
*/*                                                            Y02751*/ 07868000
*                                                                  2059 07869000
*   GEN(SCKC  NP0CKVAL);            /* SET CLOCK COMPARATOR TO MAX.     07870000
*                                      VALUE                         */ 07871000
         SCKC  NP0CKVAL                                                 07872000
*/*                                                            Y02751*/ 07873000
*                                                                  2060 07874000
*   GEN(PTLB  );                    /* PURGE TLB, JUST TO BE SURE ITS   07875000
*                                      CLEAR.                        */ 07876000
         PTLB                                                           07877000
*/*                                                            Y02751*/ 07878000
*                                                                  2061 07879000
*   GEN(STIDP   NP0CPUID);          /* GET ID OF THIS CPU            */ 07880000
         STIDP   NP0CPUID                                               07881000
*   RFY                                                            2062 07882000
*    (PCCA) BASED(NCURRPCC);                                       2062 07883000
*                                                                  2062 07884000
*/*                                                            Y02751*/ 07885000
*                                                                  2063 07886000
*   UNPK(NP0CONVT,NP07);            /* UNPACK FIRST 7 BYTES OF CPUID    07887000
*                                      INTO 13 BYTE FIELD.           */ 07888000
         UNPK  NP0CONVT(13),NP07(7)                                2063 07889000
*/*                                                            Y02751*/ 07890000
*                                                                  2064 07891000
*   TR(NP012,NP0BATAB);             /* TRANSLATE THE UN-PACKED BYTES    07892000
*                                      INTO THEIR EBCDIC EQUIVALENTS */ 07893000
         LA    @04,NP0TRTAB                                        2064 07894000
         AL    @04,@CF05595                                        2064 07895000
         TR    NP012(12),NP0BATAB(@04)                             2064 07896000
*/*                                                            Y02751*/ 07897000
*                                                                  2065 07898000
*   PCCACPID=NP012;                 /* MOVE THE 12 BYTE FIELD      2065 07899000
*                                      CONTAINING THE EBCDIC CHAR'S     07900000
*                                      INTO THE PCCA.                */ 07901000
         L     @04,NCURRPCC                                        2065 07902000
         MVC   PCCACPID(12,@04),NP012                              2065 07903000
*                                                                  2066 07904000
*/********************************************************************/ 07905000
*/* CHANNEL AVAILABILITY TABLE (CAT) INITIALIZATION ROUTINE          */ 07906000
*/* THIS ROUTINE WORKS THROUGH THE CAT, IN THE PCCA, AND DETERMINES  */ 07907000
*/* WHICH CHANNELS ARE SYS GEN'D AND, OF THE SYS GEN'D CHANNELS,     */ 07908000
*/* WHICH ARE OPERATIVE.  A 'STIDC' INSTRUCTION IS EXECUTED TO EACH  */ 07909000
*/* OPERATIVE CHANNEL TO TRY TO GET ITS CHANNEL ID WHICH IS PUT IN   */ 07910000
*/* THE CAT ENTRY CORRESPONDING TO THE CHANNEL IF THE INSTRUCTION IS */ 07911000
*/* SUCCESSFUL.                                                      */ 07912000
*/*  NOTE: THE MAPPING FOR THE PCCA IS BASED ON 'NCURRPCC', THE REAL */ 07913000
*/*        ADDR. OF THE PCCA ALLOCATED FOR THE CPU CURRENTLY BEING   */ 07914000
*/*        INITIALIZED.  THE REAL ADDR. MUST BE USED BECAUSE THIS    */ 07915000
*/*        CPU IS NOT IN RELOCATE MODE YET.                          */ 07916000
*/********************************************************************/ 07917000
*/*                                                            Y02751*/ 07918000
*                                                                  2066 07919000
*   NPCURCHA=NPCURCHA               /* SET CURR. CHAN. ADDR. FIELD TO*/ 07920000
*       &&NPCURCHA;                 /* ZERO                          */ 07921000
         L     @02,NPCURCHA                                        2066 07922000
         LR    @15,@02                                             2066 07923000
         XR    @15,@02                                             2066 07924000
         ST    @15,NPCURCHA                                        2066 07925000
*/*                                                            Y02751*/ 07926000
*                                                                  2067 07927000
*   CATPTR=ADDR(PCCACAT);           /* PUT REAL ADDR. OF CAT IN BASE    07928000
*                                      FOR MAP OF A CAT ENTRY.       */ 07929000
         LA    CATPTR,PCCACAT(,@04)                                2067 07930000
*   IONSAVE=FLCINPSW;               /* SAVE I/O NEW PSW TO RESTORE 2068 07931000
*                                      AFTER CAT TABLE INIT ROUTINE     07932000
*                                      HAS COMPLETED PROCESSING.   2068 07933000
*                                                            @YM03538*/ 07934000
         L     @02,NPSAPTR                                         2068 07935000
         MVC   IONSAVE(8),FLCINPSW(@02)                            2068 07936000
*   PCCAIO=NOIO;                    /* THE CPU HAS NO        @G47AN2O   07937000
*                                      CHANNELS VARIED       @G47AN2O   07938000
*                                      ONLINE, YET           @G47AN2O*/ 07939000
         NI    PCCAIO(@04),B'10111111'                             2069 07940000
*NPCHCHK2:                                                         2070 07941000
*                                                                  2070 07942000
*/*                                                            Y02751*/ 07943000
*                                                                  2070 07944000
*   IF NPCURCHA>15 THEN             /* CHECK IF ALL CHANNELS HAVE  2070 07945000
*                                      BEEN PROCESSED        @YM03538*/ 07946000
NPCHCHK2 L     @04,NPCURCHA                                        2070 07947000
         CH    @04,@CH00123                                        2070 07948000
         BNH   @RF02070                                            2070 07949000
*     DO;                           /* IF THEY HAVE DO       @YM03538*/ 07950000
*       FLCINPSW=IONSAVE;           /* RESTORE I/O NEW PSW.  @YM03538*/ 07951000
         L     @02,NPSAPTR                                         2072 07952000
         MVC   FLCINPSW(8,@02),IONSAVE                             2072 07953000
*       GOTO NP0PSAI;               /* GO TO NEXT ROUTINE            */ 07954000
         B     NP0PSAI                                             2073 07955000
*     END;                          /* END DO GROUP          @YM03538*/ 07956000
*   RFY                                                            2075 07957000
*    (IOCOM) BASED(CVTIXAVL);                                      2075 07958000
@RF02070 DS    0H                                                  2076 07959000
*   RFY                                                            2076 07960000
*    (IOCX) BASED(IOCOMEX);                                        2076 07961000
*                                                                  2076 07962000
*/*                                                            Y02751*/ 07963000
*                                                                  2077 07964000
*   IF NPCURCHA>IOXHICH             /* IF NOT, CHECK IF CURR. CHAN 2077 07965000
*                                      ADDR. IS GREATER THAN HI SYS     07966000
*                                      GEN'D CHAN. ADDR.             */ 07967000
*     THEN                          /* IF SO, THEN                   */ 07968000
         L     @04,CVTIXAVL(,RCVT)                                 2077 07969000
         L     @04,IOCOMEX(,@04)                                   2077 07970000
         L     @02,NPCURCHA                                        2077 07971000
         SLR   @15,@15                                             2077 07972000
         IC    @15,IOXHICH(,@04)                                   2077 07973000
         CR    @02,@15                                             2077 07974000
         BNH   @RF02077                                            2077 07975000
*/*                                                            Y02751*/ 07976000
*                                                                  2078 07977000
*     DO;                                                          2078 07978000
*                                                                  2078 07979000
*/*                                                            Y02751*/ 07980000
*                                                                  2079 07981000
*       CATNGEN='1'B;               /* TURN ON 'NOT SYS GEN'D' FLAG     07982000
*                                      IN CAT ENTRY CORRES. TO CURR     07983000
*                                      CHAN                          */ 07984000
*       CATNOP='1'B;                /* MARK CHAN INOPERATIVE @YM03538*/ 07985000
*       CATNID='1'B;                /* MARK CHAN ID INVALID  @YM03538*/ 07986000
         OI    CATNGEN(CATPTR),B'01101000'                         2081 07987000
*/*                                                            Y02751*/ 07988000
*                                                                  2082 07989000
*       GOTO NPUPDAT2;              /* GO TO ROUTINE TO UPDATE     2082 07990000
*                                      POINTERS TO NEXT CHANNEL      */ 07991000
         B     NPUPDAT2                                            2082 07992000
*/*                                                            Y02751*/ 07993000
*                                                                  2083 07994000
*     END;                                                         2083 07995000
*   RFY                                                            2084 07996000
*    (IOCOM) BASED(IOCOMPTR);                                      2084 07997000
@RF02077 DS    0H                                                  2085 07998000
*   RFY                                                            2085 07999000
*    (IOCX) BASED(IOCXPTR);                                        2085 08000000
*                                                                  2085 08001000
*/*                                                            Y02751*/ 08002000
*                                                                  2086 08003000
*   TCHADR=NPCURCHA;                /* IF CURR. CHAN. ADDR. IS NOT 2086 08004000
*                                      GREATER THAN HI SYS GEN'D   2086 08005000
*                                      CHAN. ADDR., THEN PUT CURR  2086 08006000
*                                      CHAN. ADDR. IN WORKAREA       */ 08007000
         L     @07,NPCURCHA                                        2086 08008000
         ST    @07,TCHADR                                          2086 08009000
*/*                                                            Y02751*/ 08010000
*                                                                  2087 08011000
*   TCHTARG=(TCHADR*256);           /* MOVE CURR. CHAN. ADDR. INTO 2087 08012000
*                                      ANOTHER WORKAREA FOR 'TCH'  2087 08013000
*                                      INSTRUCTION, SO THE CHAN.   2087 08014000
*                                      ADDR. IS IN BITS 16-23 OF THE    08015000
*                                      OPERAND               @YM03538*/ 08016000
         SLA   @07,8                                               2087 08017000
         LR    TCHTARG,@07                                         2087 08018000
*/*                                                            Y02751*/ 08019000
*                                                                  2088 08020000
*   NTCHLPCT=50;                    /* SET UP A LOOP COUNTER IN CASE    08021000
*                                      COND. CODE IS 2 (BUSY)        */ 08022000
         LA    NTCHLPCT,50                                         2088 08023000
*NPTCHAN2:                                                         2089 08024000
*                                                                  2089 08025000
*/*                                                            Y02751*/ 08026000
*                                                                  2089 08027000
*   TCH(TCHTARG);                   /* EXEC. 'TCH' INSTR. TO CURR  2089 08028000
*                                      CHAN TO SEE IF IT IS        2089 08029000
*                                      OPERATIVE. YOU MUST BE ON THE    08030000
*                                      CPU WITH CHANNEL TO EXECUTE A    08031000
*                                      TCH.                          */ 08032000
NPTCHAN2 TCH   0(TCHTARG)                                          2089 08033000
*/*                                                            Y02751*/ 08034000
*                                                                  2090 08035000
*   BC(2,NTCHLCK2);                 /* IF COND. CODE IS 2 (BUSY), GO    08036000
*                                      TO RTN. TO TRY AGAIN          */ 08037000
         BC    2,NTCHLCK2                                          2090 08038000
*/*                                                            Y02751*/ 08039000
*                                                                  2091 08040000
*   BC(1,NPCHNIO2);                 /* IF COND. CODE IS THREE, GO TO    08041000
*                                      RTN. TO MARK CHAN. INOPERATIVE*/ 08042000
         BC    1,NPCHNIO2                                          2091 08043000
*   RFY                                                            2092 08044000
*    (CHANREG) RSTD;                                               2092 08045000
*                                                                  2092 08046000
*   /*****************************************************************/ 08047000
*   /*                                                               */ 08048000
*   /* THE I/O NEW WILL BE SET TO POINT HERE IN THE EVENT THERE ARE  */ 08049000
*   /* ANY INTERRUPTS PENDING TO BE FLUSHED.                 @YM03538*/ 08050000
*   /*                                                               */ 08051000
*   /*****************************************************************/ 08052000
*                                                                  2093 08053000
*/*                                                            Y02751*/ 08054000
*                                                                  2093 08055000
*STCHIDMP:                          /*                       @YM03538*/ 08056000
*   CHANREG=TCHTARG;                /* PUT CHAN. ADDR. IN REG.       */ 08057000
STCHIDMP LR    CHANREG,TCHTARG                                     2093 08058000
*/*                                                            Y02751*/ 08059000
*                                                                  2094 08060000
*   GEN(STIDC     0(CHANREG));      /* IF COND. CODE AFTER 'TCH' IS     08061000
*                                      ZERO OR ONE, EXEC. 'STIDC'  2094 08062000
*                                      INSTR. TO THE SAME CHAN. TO 2094 08063000
*                                      TRY TO GET THE CHANNEL ID.    */ 08064000
         STIDC     0(CHANREG)                                           08065000
*   RFY                                                            2095 08066000
*    (CHANREG) UNRSTD;                                             2095 08067000
*                                                                  2095 08068000
*/*                                                            Y02751*/ 08069000
*                                                                  2096 08070000
*   BC(1,NPIDINV2);                 /* IF COND. CODE IS THREE, GO TO    08071000
*                                      RTN. TO SET 'ID INVALID' FLAG    08072000
*                                      IN CAT ENTRY CORRES. TO CURR     08073000
*                                      CHANNEL               @YM03538*/ 08074000
         BC    1,NPIDINV2                                          2096 08075000
*/*                                                            Y02751*/ 08076000
*                                                                  2097 08077000
*   BC(6,ENABIOMP);                 /* CONDITION CODE 1 OR 2, ENABLE    08078000
*                                      FOR ANY I/O INTERRUPTS THAT 2097 08079000
*                                      ARE PENDING.          @YM03538*/ 08080000
         BC    6,ENABIOMP                                          2097 08081000
*   CATCHID=FLCCHNID;               /* IF COND. CODE IS ZERO, MOVE 2098 08082000
*                                      CHAN. ID FROM PSA FIELD (LOC     08083000
*                                      168 DEC) TO CAT ENTRY.        */ 08084000
         L     @04,NPSAPTR                                         2098 08085000
         MVC   CATCHID(4,CATPTR),FLCCHNID(@04)                     2098 08086000
*   PCCAIO=HASIO;                   /* THIS CPU HAS          @G47AN2O   08087000
*                                      AT LEAST 1 CHANNEL    @G47AN2O   08088000
*                                      ONLINE                @G47AN2O*/ 08089000
         L     @04,NCURRPCC                                        2099 08090000
         OI    PCCAIO(@04),B'01000000'                             2099 08091000
*NPUPDAT2:                                                         2100 08092000
*                                                                  2100 08093000
*/*                                                            Y02751*/ 08094000
*                                                                  2100 08095000
*   NPCURCHA=NPCURCHA               /* UPDATE CHAN. ADDR. TO NEXT    */ 08096000
*       +1;                         /* CHANNEL                       */ 08097000
NPUPDAT2 LA    @04,1                                               2100 08098000
         AL    @04,NPCURCHA                                        2100 08099000
         ST    @04,NPCURCHA                                        2100 08100000
*/*                                                            Y02751*/ 08101000
*                                                                  2101 08102000
*   CATPTR=CATPTR                   /* UPDATE BASE FOR MAP OF CAT    */ 08103000
*       +LENGTH(CAT);               /* ENTRY TO ADDR. OF NEXT ENTRY  */ 08104000
         AL    CATPTR,@CF00068                                     2101 08105000
*/*                                                            Y02751*/ 08106000
*                                                                  2102 08107000
*   GOTO NPCHCHK2;                  /* GO TO RTN. TO PROCESS THIS  2102 08108000
*                                      CHANNEL                       */ 08109000
         B     NPCHCHK2                                            2102 08110000
*NTCHLCK2:                          /* COME HERE IF COND. CODE AFTER    08111000
*                                      'TCH' INSTR. IS 2 (BUSY)      */ 08112000
*/*                                                            Y02751*/ 08113000
*                                                                  2103 08114000
*   NTCHLPCT=NTCHLPCT               /* DECREMENT 'TCH' LOOP COUNTER     08115000
*                                      BY                            */ 08116000
*       -1;                         /* ONE                           */ 08117000
NTCHLCK2 BCTR  NTCHLPCT,0                                          2103 08118000
*/*                                                            Y02751*/ 08119000
*                                                                  2104 08120000
*   IF NTCHLPCT>0                   /* CHECK IF COUNTER IS GREATER 2104 08121000
*                                      THAN ZERO                     */ 08122000
*     THEN                          /* IF SO,                        */ 08123000
         LTR   NTCHLPCT,NTCHLPCT                                   2104 08124000
         BP    @RT02104                                            2104 08125000
*/*                                                            Y02751*/ 08126000
*                                                                  2105 08127000
*     GOTO NPTCHAN2;                /* KEEP TRYING ON THIS CHANNEL   */ 08128000
*   ELSE                            /* IF COUNTER IS NOT GREATER THAN   08129000
*                                      ZERO                          */ 08130000
*/*                                                            Y02751*/ 08131000
*                                                                  2106 08132000
*     GOTO NPCHNIO2;                /* GO TO RTN. TO MARK THIS CHAN.    08133000
*                                      IN-OPERATIVE                  */ 08134000
         B     NPCHNIO2                                            2106 08135000
*NPCHNIO2:                          /* COME HERE TO MARK A CHAN. IN-    08136000
*                                      OPERATIVE                     */ 08137000
*/*                                                            Y02751*/ 08138000
*                                                                  2107 08139000
*   CATNOP='1'B;                    /* TURN ON 'IN-OPERATIVE' FLAG IN   08140000
*                                      CAT ENTRY CORRES. TO CURR CHAN*/ 08141000
NPCHNIO2 OI    CATNOP(CATPTR),B'01000000'                          2107 08142000
*/*                                                            Y02751*/ 08143000
*                                                                  2108 08144000
*   GOTO NPIDINV2;                  /* GO TO RTN. TO MARK CHANNELS ID   08145000
*                                      INVALID.              @YM03538*/ 08146000
*                                                                  2108 08147000
         B     NPIDINV2                                            2108 08148000
*   /*****************************************************************/ 08149000
*   /*                                                               */ 08150000
*   /* A CONDITION CODE 1 OR 2 WAS RECEIVED FROM STIDC INSTRUCTION.  */ 08151000
*   /* WE MUST ENABLE FOR I/O INTERRUPTIONS TO FLUSH OUT ANY PENDING */ 08152000
*   /* INTERRUPTS IN THE CHANNEL. THIS WILL THEN PERMIT THE STIDC TO */ 08153000
*   /* EXECUTE SUCCESSFULLY.                                 @YM03538*/ 08154000
*   /*                                                               */ 08155000
*   /*****************************************************************/ 08156000
*                                                                  2109 08157000
*ENABIOMP:                          /*                       @YM03538*/ 08158000
*   IOFLUSH=ADDR(STCHIDMP);         /* SET I/O NEW TO STIDC  @YM03538*/ 08159000
ENABIOMP L     @04,NPSAPTR                                         2109 08160000
         LA    @02,STCHIDMP                                        2109 08161000
         ST    @02,IOFLUSH(,@04)                                   2109 08162000
*   BCMODE=0;                       /* SET BC MODE FOR I/O INTERRUPT    08163000
*                                                            @YM03538*/ 08164000
         MVI   BCMODE(@04),X'00'                                   2110 08165000
*   RFY                                                            2111 08166000
*    (CHANREG) RSTD;                /* RESTRICT REG 4        @YM03538*/ 08167000
*   CHANREG=ADDR(FLCINPSW);         /* POINT TO I/O NEW MASK @YM03538*/ 08168000
*                                                                  2112 08169000
         L     @02,NPSAPTR                                         2112 08170000
         LA    CHANREG,FLCINPSW(,@02)                              2112 08171000
*   /*****************************************************************/ 08172000
*   /*                                                               */ 08173000
*   /* PLACE CURRENT MASK INTO I/O NEW AND ENABLE FOR I/O INTERRUPTS.*/ 08174000
*   /* BY STORING THE CURRENT MASK INTO THE I/O NEW PSW IF AN        */ 08175000
*   /* INTERRUPT IS TAKEN, WE WILL AGAIN BE DISABLED.        @YM03538*/ 08176000
*   /*                                                               */ 08177000
*   /*****************************************************************/ 08178000
*                                                                  2113 08179000
*   GEN(STOSM 0(CHANREG),X'FE');    /* ENABLE I/O AND SET THE I/O NEW   08180000
*                                      PSW DISABLED.         @YM03538*/ 08181000
*                                                                  2113 08182000
         STOSM 0(CHANREG),X'FE'                                         08183000
*   /*****************************************************************/ 08184000
*   /*                                                               */ 08185000
*   /* IF ANY I/O INTERRUPTS ARE PENDING THEN THEY WILL BE TAKEN HERE*/ 08186000
*   /* AND THE FOLLOWING INSTRUCTION WILL NOT BE EXECUTED. IF THE    */ 08187000
*   /* STIDC CONDITION CODE 1 OR 2 WAS NOT CAUSED BY A PENDING       */ 08188000
*   /* INTERRUPT THEN THE NEXT INSTRUCTION WILL DISABLE AGAIN AND THE*/ 08189000
*   /* CHANNEL ID MARKED INVALID IN THE CAT TABLE. IF AN INTERRUPT IS*/ 08190000
*   /* TAKEN, THE I/O NEW WILL CAUSE THE STIDC TO BE RETRIED, AND    */ 08191000
*   /* PROCESSING CONTINUED.                                 @YM03538*/ 08192000
*   /*                                                               */ 08193000
*   /*****************************************************************/ 08194000
*                                                                  2114 08195000
*   GEN(STNSM 0(CHANREG),X'00');    /* DISABLE I/O           @YM03538*/ 08196000
         STNSM 0(CHANREG),X'00'                                         08197000
*   RFY                                                            2115 08198000
*    (CHANREG) UNRSTD;              /* FREE REG 4 FOR USE    @YM03538*/ 08199000
*NPIDINV2:                          /* COME HERE TO MARK A CHANNEL'S    08200000
*                                      ID AS BEING INVALID           */ 08201000
*/*                                                            Y02751*/ 08202000
*                                                                  2116 08203000
*   CATNID='1'B;                    /* TURN ON 'ID INVALID' FLAG IN     08204000
*                                      CAT ENTRY CORRES. TO CURR CHAN*/ 08205000
NPIDINV2 OI    CATNID(CATPTR),B'00001000'                          2116 08206000
*/*                                                            Y02751*/ 08207000
*                                                                  2117 08208000
*   GOTO NPUPDAT2;                  /* GO TO RTN. TO UPDATE POINTERS    08209000
*                                      TO NEXT CHANNEL               */ 08210000
         B     NPUPDAT2                                            2117 08211000
*NP0PSAI:                                                          2118 08212000
*                                                                  2118 08213000
*/*  INITIALIZE THE PSA (IN ABS. 0-4K) FOR THIS CPU                  */ 08214000
*                                                                  2118 08215000
*   RFY                                                            2118 08216000
*    (PSA) BASED(NPSAPTR);          /* RESPECIFY PSA MAP TO BE BASED    08217000
*                                      ON 'NPSAPTR', WHICH IS INIT.     08218000
*                                      TO ZERO. ON THIS CPU, THE   2118 08219000
*                                      PREFIX REG. IS SET TO ZERO AND   08220000
*                                      ITS PSA IS AT ABS. 0-4K, THUS    08221000
*                                      THE BASE POINTER FOR THE PSA     08222000
*                                      MAPPING SHOULD BE ZERO.       */ 08223000
NP0PSAI  DS    0H                                                  2119 08224000
*/*                                                            Y02751*/ 08225000
*                                                                  2119 08226000
*   PSAPSA='PSA ';                  /* PUT ACRONYM 'PSA' IN PSA      */ 08227000
         L     @02,NPSAPTR                                         2119 08228000
         MVC   PSAPSA(4,@02),@CC05058                              2119 08229000
*   RFY                                                            2120 08230000
*    (SCVTSECT) BASED(CVTABEND);                                   2120 08231000
*                                                                  2120 08232000
*/*                                                            Y02751*/ 08233000
*                                                                  2121 08234000
*   FLCTRACE=SCVTRPTR;              /* PUT ADDR. OF TRACE TABLE    2121 08235000
*                                      HEADER IN PSA (LOC'N 84 (DEC))*/ 08236000
         L     @01,CVTABEND(,RCVT)                                 2121 08237000
         MVC   FLCTRACE(4,@02),SCVTRPTR(@01)                       2121 08238000
*   RFY                                                            2122 08239000
*    (SCVTSECT) BASED(SCVTSPTR);                                   2122 08240000
*                                                                  2122 08241000
*/*                                                            Y02751*/ 08242000
*                                                                  2123 08243000
*   PSACPUPA=NCURCPUA;              /* PUT PHYS. ADDR. OF THIS CPU IN   08244000
*                                      ITS PSA. MAY CHANGE DURING ACR   08245000
*                                      PROCESSING            @YM03489*/ 08246000
         LH    @15,NCURCPUA                                        2123 08247000
         STH   @15,PSACPUPA(,@02)                                  2123 08248000
*   PSACPUSA=NCURCPUA;              /* PUT STATIC PHYSICAL ADDR OF 2124 08249000
*                                      THIS CPU IN PSA. WILL NOT   2124 08250000
*                                      CHANGE DURING ACR PROCESSING     08251000
*                                                            @YM03489*/ 08252000
         STH   @15,PSACPUSA(,@02)                                  2124 08253000
*/*                                                            Y02751*/ 08254000
*                                                                  2125 08255000
*   PSACDAL=ADDR(CDAL(NCURCPUA+1)); /* PUT ADDR OF CDAL ENTRY FOR  2125 08256000
*                                      THIS CPU IN ITS PSA   @Z40FPXA*/ 08257000
         LR    @14,@15                                             2125 08258000
         SLA   @14,2                                               2125 08259000
         L     @01,CVTCDAL(,RCVT)                                  2125 08260000
         LA    @14,CDAL(@14,@01)                                   2125 08261000
         ST    @14,PSACDAL(,@02)                                   2125 08262000
*   PSACPULA=NCURCPUA               /* PUT LOG. ADDR. OF THIS CPU IN */ 08263000
*       +'40'X;                     /* ITS PSA.                      */ 08264000
         AH    @15,@CH02302                                        2126 08265000
         STH   @15,PSACPULA(,@02)                                  2126 08266000
*/*                                                            Y02751*/ 08267000
*                                                                  2127 08268000
*   PSAPCCAV=NCURVPCC;              /* PUT VIRT. ADDR. OF PCCA FOR 2127 08269000
*                                      THIS CPU IN ITS PSA           */ 08270000
         MVC   PSAPCCAV(4,@02),NCURVPCC                            2127 08271000
*/*                                                            Y02751*/ 08272000
*                                                                  2128 08273000
*   PSAPCCAR=NCURRPCC;              /* PUT REAL ADDR. OF PCCA FOR  2128 08274000
*                                      THIS CPU IN ITS PSA.          */ 08275000
         MVC   PSAPCCAR(4,@02),NCURRPCC                            2128 08276000
*/*                                                            Y02751*/ 08277000
*                                                                  2129 08278000
*   PSALCCAV=NCURVLCC;              /* PUT VIRT. ADDR. OF LCCA FOR 2129 08279000
*                                      THIS CPU IN ITS PSA.          */ 08280000
         MVC   PSALCCAV(4,@02),NCURVLCC                            2129 08281000
*/*                                                            Y02751*/ 08282000
*                                                                  2130 08283000
*   PSALCCAR=NCURRLCC;              /* PUT REAL ADDR. OF LCCA FOR  2130 08284000
*                                      THIS CPU IN ITS PSA.          */ 08285000
         MVC   PSALCCAR(4,@02),NCURRLCC                            2130 08286000
*/*                                                            Y02751*/ 08287000
*                                                                  2131 08288000
*   PSASTOR=NP0CRG1;                /* PUT MASTER SHCEDULER'S STOR 2131 08289000
*                                      (CONTROL REG. 1) IN PSA FOR 2131 08290000
*                                      THIS CPU.                     */ 08291000
         MVC   PSASTOR(4,@02),NP0CRG1                              2131 08292000
*/* PREPARE TO PUT THIS CPU IN RELOCATE MODE                         */ 08293000
*/*                                                            Y02751*/ 08294000
*                                                                  2132 08295000
*   GEN(LCTL    0,1,NP0CTLRG);      /* LOAD CTL. REG'S. 0 AND 1 FROM    08296000
*                                      WORK AREA.                    */ 08297000
         LCTL    0,1,NP0CTLRG                                           08298000
*/*                                                            Y02751*/ 08299000
*                                                                  2133 08300000
*   GEN(LCTL    14,14,NP0CRG14);    /* LOAD CTL. REG. 14 FROM WORK 2133 08301000
*                                      AREA.                         */ 08302000
         LCTL    14,14,NP0CRG14                                         08303000
*/*                                                            Y02751*/ 08304000
*                                                                  2134 08305000
*   DPSWRD2=ADDR(NIP0ECMD)          /* SET INSTRUCTION ADDRESS IN EC */ 08306000
*       +4;                         /* MODE PSW TO POINT TO THE    2134 08307000
*                                      INSTRUCTION IN THIS ROUTINE.     08308000
*                                      FOLLOWING THE 'LPSW' INSTR.   */ 08309000
         LA    @02,NIP0ECMD                                        2134 08310000
         AH    @02,@CH00062                                        2134 08311000
         ST    @02,DPSWRD2                                         2134 08312000
*NIP0ECMD:                                                         2135 08313000
*                                                                  2135 08314000
*/*                                                            Y02751*/ 08315000
*                                                                  2135 08316000
*   GEN(LPSW   NPDECPSW);           /* LOAD THE PSW, IT IS EC MODE,     08317000
*                                      DAT IS ON, AND IT IS DISABLED    08318000
*                                      FOR ALL INTERRUPTS, INCLUDING    08319000
*                                      MACHINE CHECKS                */ 08320000
NIP0ECMD LPSW   NPDECPSW                                                08321000
*/********************************************************************/ 08322000
*/*                                                                  */ 08323000
*/* INITIALIZE FRR STACKS FOR THIS CPU                               */ 08324000
*/*                                                                  */ 08325000
*/* NOTE: SINCE THIS CPU'S PSA IS STILL AT ABSOLUTE 0-4K AND THIS    */ 08326000
*/*       CPU IS NOT PREFIXING YET, USING ADDRESS OF ABSOLUTE 0      */ 08327000
*/*       FOR THE PSA IS VALID.                                      */ 08328000
*/********************************************************************/ 08329000
*                                                                  2136 08330000
*   RFY                                                            2136 08331000
*    (NTSINREG) RSTD;                                              2136 08332000
*                                                                  2136 08333000
*/*                                                            Y02751*/ 08334000
*                                                                  2137 08335000
*   NTSINREG=NPSAPTR;               /* PUT ADDR. OF PSA FOR THIS CPU    08336000
*                                      IN REG. 1                     */ 08337000
         L     NTSINREG,NPSAPTR                                    2137 08338000
*/*                                                            Y02751*/ 08339000
*                                                                  2138 08340000
*   CALL IEAVTSIN;                  /* CALL ROUTINE TO INIT. FRR   2138 08341000
*                                                              STACKS*/ 08342000
*                                                                  2138 08343000
         BAL   @14,IEAVTSIN                                        2138 08344000
*   /*****************************************************************/ 08345000
*   /*                                                               */ 08346000
*   /* NOTE: SPACE HAS ALREADY BEEN ALLOCATED (ON THE IPL CPU) IN SQA*/ 08347000
*   /* FOR THE STACKS, AND ITS VIRT. ADDR. PUT IN 'PSACSTK'          */ 08348000
*   /*                                                               */ 08349000
*   /*****************************************************************/ 08350000
*                                                                  2139 08351000
*   RFY                                                            2139 08352000
*    (NTSINREG) UNRSTD;                                            2139 08353000
*   RFY                                                            2140 08354000
*    (PCCA) BASED(NCURVPCC);                                       2140 08355000
*                                                                  2140 08356000
*   /*****************************************************************/ 08357000
*   /*                                                               */ 08358000
*   /* SET UP TO MOVE THIS CPU'S PSA FROM ABS. 0-4K TO GETMAIN'D AREA*/ 08359000
*   /* IN SQA                                                        */ 08360000
*   /*                                                               */ 08361000
*   /*****************************************************************/ 08362000
*                                                                  2141 08363000
*/* NOTE: SPACE HAS ALREADY BEEN ALLOCATED (ON THE IPL CPU) IN SQA   */ 08364000
*/*       FOR THIS AREA, AND ITS VIRT. ADDR. PUT IN 'NCURVPSA'       */ 08365000
*                                                                  2141 08366000
*   RFY                                                            2141 08367000
*    (REG4,                                                        2141 08368000
*     REG5,                                                        2141 08369000
*     REG6,                                                        2141 08370000
*     REG7) RSTD;                   /*                       @Z30ENXA*/ 08371000
*   REG4=NCURVPSA;                  /* ADDRESS OF SQA AREA   @Z30ENXA*/ 08372000
         L     REG4,NCURVPSA                                       2142 08373000
*   REG5=4096;                      /* LENGTH OF PSA         @Z30ENXA*/ 08374000
         LH    @02,@CH04248                                        2143 08375000
         LR    REG5,@02                                            2143 08376000
*   REG6=0;                         /* MOVE MY CURRENT PSA   @Z30ENXA*/ 08377000
         SLR   REG6,REG6                                           2144 08378000
*   REG7=4096;                      /* LENGTH OF PSA         @Z30ENXA*/ 08379000
         LR    REG7,@02                                            2145 08380000
*   GEN(MVCL REG4,REG6);            /* MOVE PSA              @Z30ENXA*/ 08381000
         MVCL REG4,REG6                                                 08382000
*   RFY                                                            2147 08383000
*    (REG4,                                                        2147 08384000
*     REG5,                                                        2147 08385000
*     REG6,                                                        2147 08386000
*     REG7) UNRSTD;                                                2147 08387000
*   RFY                                                            2148 08388000
*    (PCCA) BASED(NCURVPCC);                                       2148 08389000
*                                                                  2148 08390000
*/*                                                            Y02751*/ 08391000
*                                                                  2149 08392000
*   PCCAPSAV=NCURVPSA;              /* PUT VIRT. ADDR. OF PSA (IN  2149 08393000
*                                      SQA) IN PCCA                  */ 08394000
         L     @02,NCURVPCC                                        2149 08395000
         MVC   PCCAPSAV(4,@02),NCURVPSA                            2149 08396000
*/*                                                            Y02751*/ 08397000
*                                                                  2150 08398000
*   PCCAPSAR=NCURRPSA;              /* PUT REAL ADDR. OF PSA (IN SQA)   08399000
*                                      IN PCCA                       */ 08400000
         MVC   PCCAPSAR(4,@02),NCURRPSA                            2150 08401000
*/*                                                            Y02751*/ 08402000
*                                                                  2151 08403000
*   GEN(SPX    NCURRPSA);           /* SET THIS CPU'S PREFIX REG. TO    08404000
*                                      REAL ADDR. OF PSA IN SQA.     */ 08405000
         SPX    NCURRPSA                                                08406000
*/*                                                            Y02751*/ 08407000
*                                                                  2152 08408000
*   RSPSWWT='0'B;                   /* TURN OFF WAIT BIT IN SYS GEN'D   08409000
*                                      RESTART PSW.                  */ 08410000
         NI    RSPSWWT,B'11111101'                                 2152 08411000
*/*                                                            Y02751*/ 08412000
*                                                                  2153 08413000
*   FLCRNPSW=NP0SRSSA;              /* RESTORE THE SYS. GEN'D RESTART   08414000
*                                      TO THIS CPU'S PSA.            */ 08415000
         L     @02,NPSAPTR                                         2153 08416000
         MVC   FLCRNPSW(8,@02),NP0SRSSA                            2153 08417000
*/* CLEAN UP ROUTINE                                                 */ 08418000
*/* SET UP PSA PTRS. SO DISPATCHER WILL DISPATCH SYSTEM WAIT TASK    */ 08419000
*/*                                                            Y02751*/ 08420000
*                                                                  2154 08421000
*   PSATNEW=''B;                    /* SET PSATNEW FIELD IN PSA TO 2154 08422000
*                                      ZERO                          */ 08423000
         SLR   @15,@15                                             2154 08424000
         ST    @15,PSATNEW(,@02)                                   2154 08425000
*   PSATOLD=''B;                    /* SET PSATOLD FIELD IN PSA TO 2155 08426000
*                                      ZERO                          */ 08427000
         ST    @15,PSATOLD(,@02)                                   2155 08428000
*   PSAANEW=''B;                    /* SET PSAANEW FIELD IN PSA TO 2156 08429000
*                                      ZERO                          */ 08430000
         ST    @15,PSAANEW(,@02)                                   2156 08431000
*   PSAAOLD=NVTMASCB;               /* SET PSAAOLD FIELD TO ADDR. OF    08432000
*                                      MASTER SCHEDULER'S ASCB.      */ 08433000
         MVC   PSAAOLD(4,@02),NVTMASCB                             2157 08434000
*/*                                                            Y02751*/ 08435000
*                                                                  2158 08436000
*   NCPUWAIT='1'B;                  /* TURN ON FLAG INDICATING TO IPL   08437000
*                                      CPU THAT THIS CPU IS        2158 08438000
*                                      INITIALIZED AND IS ABOUT TO 2158 08439000
*                                      WAIT.                         */ 08440000
         LA    @14,NCPUWAIT                                        2158 08441000
         LR    @07,@14                                             2158 08442000
         LA    @02,3                                               2158 08443000
         NR    @07,@02                                             2158 08444000
         LCR   @07,@07                                             2158 08445000
         ALR   @14,@07                                             2158 08446000
         L     @02,0(,@14)                                         2158 08447000
@GL00014 LR    @15,@02                                             2158 08448000
         O     @15,@CB05634+3(@07)                                 2158 08449000
         CS    @02,@15,0(@14)                                      2158 08450000
         BNE   @GL00014                                            2158 08451000
*/*                                                            Y02751*/ 08452000
*                                                                  2159 08453000
*   /*****************************************************************/ 08454000
*   /*                                                               */ 08455000
*   /* NOW THAT THIS PROCESSOR IS INITIALIZED OK, IT MUST SPIN ON THE*/ 08456000
*   /* BITS NCLOKERR AND NALLINIT SO THAT IT CAN SET UP TO LOAD A    */ 08457000
*   /* X'4A' WAIT STATE (RESTARTABLE) IF ANOTHER PROCESSOR FINDS ITS */ 08458000
*   /* CLOCK IN THE ERROR STATE.                             @Z30LQXA*/ 08459000
*   /*                                                               */ 08460000
*   /*****************************************************************/ 08461000
*                                                                  2159 08462000
*SPIN:                                                             2159 08463000
*   DO I=40000000 TO 0 BY-1;        /*                       @Z30LQXA*/ 08464000
SPIN     L     I,@CF05257                                          2159 08465000
@DL02159 DS    0H                                                  2160 08466000
*     IF NALLINIT='1'B THEN         /* ALL PROCESSORS HAVE BEEN INIT.   08467000
*                                      OK                    @Z30LQXA*/ 08468000
         TM    NALLINIT,B'00000010'                                2160 08469000
         BO    @RT02160                                            2160 08470000
*       GOTO NP0DSSHK;              /* OK TO GO TO DISPATCHER NOW  2161 08471000
*                                                            @Z30LQXA*/ 08472000
*     ELSE                                                         2162 08473000
*       IF NCLOKERR='1'B THEN       /* ANOTHER PROCESSOR FOUND A   2162 08474000
*                                      CLOCK ERROR--MUST SETUP TO  2162 08475000
*                                      LOAD A X'4A' WAIT     @Z30LQXA*/ 08476000
         TM    NCLOKERR,B'00000100'                                2162 08477000
         BNO   @RF02162                                            2162 08478000
*         DO;                       /*                       @Z30LQXA*/ 08479000
*           FLCRNPSW=CLOKPSW2;      /* RESTART ADDRESS IS ADDRESS OF    08480000
*                                      ROUTINE TO RESUME SPINNING ON    08481000
*                                      THIS PROCESSOR        @Z30LQXA*/ 08482000
         L     @04,NPSAPTR                                         2164 08483000
         MVC   FLCRNPSW(8,@04),CLOKPSW2                            2164 08484000
*           NVTFLWSC=NVTWCN05;      /* 4A WAIT STATE CODE    @Z30LQXA*/ 08485000
         MVI   NVTFLWSC,X'4A'                                      2165 08486000
*           LPSW(NVTWTPSW);                                        2166 08487000
         LPSW  NVTWTPSW                                            2166 08488000
*         END;                                                     2167 08489000
*       ELSE                                                       2168 08490000
*         ;                         /* OTHERWISE, RESUME SPIN      2168 08491000
*                                                            @Z30LQXA*/ 08492000
@RF02162 DS    0H                                                  2169 08493000
*   END;                            /* END OF SPIN LOOP      @Z30LQXA*/ 08494000
         BCTR  I,0                                                 2169 08495000
         LTR   I,I                                                 2169 08496000
         BNM   @DL02159                                            2169 08497000
*   GOTO SPIN;                      /* IF NEITHER BIT WAS SET RESUME    08498000
*                                      SPIN-- A LONGER SPIN WAS    2170 08499000
*                                      NEEDED. THE IPL CPU WILL    2170 08500000
*                                      EVENTUALLY SET NALLINIT EVEN     08501000
*                                      IF IT MUST RESET SOME       2170 08502000
*                                      PROCESSORS            @Z30LQXA*/ 08503000
         B     SPIN                                                2170 08504000
*SETCLK:                                                           2171 08505000
*   FLCRNPSW=NP0SRSSA;              /* RESTORE SYSGENED RESTART PSW     08506000
*                                                            @Z30LQXA*/ 08507000
SETCLK   L     @02,NPSAPTR                                         2171 08508000
         MVC   FLCRNPSW(8,@02),NP0SRSSA                            2171 08509000
*   DO I=40000000 TO 0 BY-1;        /* LOOP WAITING FOR IPL CPU TO 2172 08510000
*                                      INDICATE THAT IT IS OK TO   2172 08511000
*                                      CHECK RUNAWAY FLAG    @Z30LQXA*/ 08512000
         L     I,@CF05257                                          2172 08513000
@DL02172 DS    0H                                                  2173 08514000
*     IF NRNAWSYN='1'B THEN         /* IF OK TO CHECK RUNAWAY FLAG 2173 08515000
*                                                            @Z30LQXA*/ 08516000
         TM    NRNAWSYN,B'00100000'                                2173 08517000
         BNO   @RF02173                                            2173 08518000
*       IF NPRNAWAY='0'B THEN       /* IF THIS CPU IS NOT A RUNAWAY     08519000
*                                                            @Z30LQXA*/ 08520000
         TM    NPRNAWAY,B'01000000'                                2174 08521000
         BNZ   @RF02174                                            2174 08522000
*         DO;                                                      2175 08523000
*           NCPUSTRT='1'B;          /* INDICATE RESTART WENT OK    2176 08524000
*                                                            @Z30LQXA*/ 08525000
         LA    @14,NCPUSTRT                                        2176 08526000
         LR    @07,@14                                             2176 08527000
         LA    @02,3                                               2176 08528000
         NR    @07,@02                                             2176 08529000
         LCR   @07,@07                                             2176 08530000
         ALR   @14,@07                                             2176 08531000
         L     @02,0(,@14)                                         2176 08532000
@GL00015 LR    @15,@02                                             2176 08533000
         O     @15,@CB05626+3(@07)                                 2176 08534000
         CS    @02,@15,0(@14)                                      2176 08535000
         BNE   @GL00015                                            2176 08536000
*           GOTO SPIN;              /* RESUME SPIN           @Z30LQXA*/ 08537000
         B     SPIN                                                2177 08538000
*         END;                                                     2178 08539000
*       ELSE                        /* THIS PROCESSOR IS A 'RUNAWAY'    08540000
*                                      AND MUST BE STOPPED. GO TO  2179 08541000
*                                      ROUTINE TO LOAD DISABLED PSW.    08542000
*                                      NOTE:SINCE THIS PROCESSOR WILL   08543000
*                                      NOT SET ITS 'STARTED OK' FLAG,   08544000
*                                      THE IPL CPUS LOOP CHECKING  2179 08545000
*                                      THAT FLAG WILL SPIN OUT AND 2179 08546000
*                                      WILL SIGP RESET THIS PROCESSOR   08547000
*                                                            @Z30LQXA*/ 08548000
*         GOTO NP0SRNAW;            /* STOP THIS PROCESSOR   @Z30LQXA*/ 08549000
*     ELSE                                                         2180 08550000
*       ;                           /* KEEP SPINNING         @Z30LQXA*/ 08551000
@RF02173 DS    0H                                                  2181 08552000
*   END;                            /* END OF SPIN LOOP      @Z30LQXA*/ 08553000
         BCTR  I,0                                                 2181 08554000
         LTR   I,I                                                 2181 08555000
         BNM   @DL02172                                            2181 08556000
*   GOTO NP0NSYNC;                  /* IF LOOP SPINS OUT--ERROR    2182 08557000
*                                                            @Z30LQXA*/ 08558000
         B     NP0NSYNC                                            2182 08559000
*NP0DSSHK:                                                         2183 08560000
*   GEN(NOPR 0);                    /* DSS HOOK                      */ 08561000
NP0DSSHK NOPR 0                                                         08562000
*   CALL NP0DISP;                   /* CALL THE DISPATCHER TO      2184 08563000
*                                      DISPATCH SYSTEM WAIT TASK.    */ 08564000
         L     @15,CVT0DS(,RCVT)                                   2184 08565000
         BALR  @14,@15                                             2184 08566000
*/* NOTE: THE IPL CPU HAS DISABLED MACHINE CHECKS IN THE PSW LOADED  */ 08567000
*/*       BY THE DISPATCHER WHEN IT DISPATCHES THE SYSTEM WAIT TASK. */ 08568000
*/*       THIS IS DONE TO FORCE NON-IPL CPU'S TO GENERATE MFA'S      */ 08569000
*/*       SHOULD A MACHINE CHECK CONDITION ARISE ON SUCH A CPU.      */ 08570000
*                                                                  2185 08571000
*NIP0CLRZ:                                                         2185 08572000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2185 08573000
*                                                                  2185 08574000
         B     @PB00002                                            2185 08575000
NIP0CLRZ STM   @14,@12,12(@13)                                     2185 08576000
*/*                                                                2186 08577000
*   FUNCTION= - SETS THE AREA PASSED TO IT TO ZEROS                2186 08578000
*                                                                  2186 08579000
*   NOTES                                                          2186 08580000
*      CHARACTER CODE DEPENDENCIES=                                2186 08581000
*      DEPENDENCIES= - ON ENTRY TO THIS ROUTINE, 'NCLRBASE' MUST   2186 08582000
*                      CONTAIN THE VIRTUAL ADDRESS OF THE AREA TO  2186 08583000
*                      BE CLEARED, AND 'NCLRLEN' MUST CONTAIN THE  2186 08584000
*                      LENGTH OF THE AREA.                         2186 08585000
*      RESTRICTIONS= - CAN ONLY BE USED TO CLEAR AREAS OF STORAGE  2186 08586000
*                      TO ZEROS                                    2186 08587000
*      REGISTER CONVENTIONS= - THIS ROUTINE SAVES ALL REGISTERS ON 2186 08588000
*                              ENTRY AND RESTORES THEM ON EXIT     2186 08589000
*                                                                    */ 08590000
*                                                                  2186 08591000
*   RFY                                                            2186 08592000
*    (REG4,                                                        2186 08593000
*     REG5,                                                        2186 08594000
*     REG6,                                                        2186 08595000
*     REG7) RSTD;                   /* RESTRICT REGS                 */ 08596000
*   REG4=NCLRBASE;                  /* ADDRESS TO ZERO       @YA00093*/ 08597000
         LR    REG4,NCLRBASE                                       2187 08598000
*   REG5=NCLRLEN;                   /* LENGTH TO ZERO        @YA00093*/ 08599000
         LH    REG5,NCLRLEN                                        2188 08600000
*   REG6=0;                         /* ZERO PAD CHARACTER    @YA00093*/ 08601000
         SLR   REG6,REG6                                           2189 08602000
*   REG7=0;                         /* ZERO FROM ADDRESS     @YA00093*/ 08603000
         SLR   REG7,REG7                                           2190 08604000
*   GEN(MVCL  REG4,REG6);           /* ZERO STORAGE          @YA00093*/ 08605000
         MVCL  REG4,REG6                                                08606000
*   RFY                                                            2192 08607000
*    (REG4,                                                        2192 08608000
*     REG5,                                                        2192 08609000
*     REG6,                                                        2192 08610000
*     REG7) UNRSTD;                 /* RELEASE REGS                  */ 08611000
*   END;                                                           2193 08612000
@EL00002 DS    0H                                                  2193 08613000
@EF00002 DS    0H                                                  2193 08614000
@ER00002 LM    @14,@12,12(@13)                                     2193 08615000
         BR    @14                                                 2193 08616000
*NSPALLOC:                                                         2194 08617000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2194 08618000
*                                                                  2194 08619000
NSPALLOC STM   @14,@01,12(@13)                                     2194 08620000
         ST    @03,32(,@13)                                        2194 08621000
         STM   @05,@12,40(@13)                                     2194 08622000
*/*                                                                2195 08623000
*   FUNCTION= - ALLOCATES SPACE FROM A SPECIFIED REAL AND          2195 08624000
*               VIRTUAL ADDRESS, FROM HIGH ADDRESS DOWN.  THE      2195 08625000
*               AMOUNTS OF SPACE REQUIRED ARE IN A TABLE, AS       2195 08626000
*               SPACE IS ALLOCATED, THE REAL AND VIRTUAL ADDRESSES 2195 08627000
*               OF EACH AREA ARE PUT IN THE TABLE.                 2195 08628000
*                                                                  2195 08629000
*      OPERATION= - ROUNDS THE STARTING (HIGH) REAL AND VIRTUAL    2195 08630000
*                   ADDRESSES DOWN TO 8-BYTE MULTIPLES.            2195 08631000
*                 - PICKS UP NEXT TABLE ENTRY                      2195 08632000
*                 - ROUNDS LENGTH SPECIFIED IN THAT ENTRY UP TO AN 2195 08633000
*                   8-BYTE MULTIPLE                                2195 08634000
*                 - SUBTRACTS THIS LENGTH FROM CURRENT REAL ADDRESS     08635000
*                 - PUTS REAL ADDRESS OF THIS AREA IN TABLE ENTRY  2195 08636000
*                 - SUBTRACTS LENGTH FROM CURRENT VIRTUAL ADDRESS  2195 08637000
*                 - PUT VIRTUAL ADDRESS OF THIS AREA IN TABLE ENTRY     08638000
*                 - UPDATES POINTER TO NEXT TABLE ENTRY            2195 08639000
*                 - CHECKS IF THIS IS THE LAST ENTRY IN THE TABLE  2195 08640000
*                 - IF NOT, PROCESSES THIS ENTRY                   2195 08641000
*                 - IF SO, RETURNS TO CALLER                       2195 08642000
*                                                                  2195 08643000
*   NOTES                                                          2195 08644000
*      CHARACTER CODE DEPENDENCIES=                                2195 08645000
*      DEPENDENCIES= - WHEN ENTERED, 'NP0SATBL' MUST CONTAIN THE   2195 08646000
*                      REAL ADDRESS OF THE TABLE OF AREAS TO BE    2195 08647000
*                      ALLOCATED.  'NP0SAHIR' MUST CONTAIN THE     2195 08648000
*                      HIGH REAL ADDRESS TO BE USED BY THIS        2195 08649000
*                      SUBROUTINE.  'NP0SAHIV' MUST CONTAIN THE    2195 08650000
*                      HIGH VIRTUAL ADDRESS TO BE USED BY THIS     2195 08651000
*                      SUBROUTINE.                                 2195 08652000
*                                                                  2195 08653000
*      RESTRICTIONS= - CAN ONLY BE USED TO ALLOCATE AREAS OF STORAGE    08654000
*                      BEFORE THE GET/FREEMAIN FACIITY IS AVAILABLE     08655000
*      REGISTER CONVENTIONS= - THIS ROUTINE SAVES ALL REGISTERS ON 2195 08656000
*                              ENTRY AND RESTORES THEM ON EXIT     2195 08657000
*                                                                  2195 08658000
*      PURPOSE= - TO ALLOCATE STORAGE AREAS DESCRIBED IN A TABLE   2195 08659000
*      LINKAGE= - CALL                                             2195 08660000
*      INPUT DATA= - 'NP0SATBL' - REAL ADDRESS OF TABLE OF AREAS   2195 08661000
*                    TO BE ALLOCATED.  EACH TABLE ENTRY IS 3 WORDS:     08662000
*                    THE SIZE OF THE AREA TO BE ALLOCATED, THE REAL     08663000
*                    ADDRESS OF THAT AREA (WHEN ALLOCATED), AND THE     08664000
*                    VIRTUAL ADDRESS OF THAT AREA (WHEN ALLOCATED).     08665000
*                  - 'NP0SAHIR' - HIGH REAL ADDRESS TO BE USED     2195 08666000
*                    BY THIS SUBROUTINE                            2195 08667000
*                  - 'NP0SAHIR' - HIGH VIRTUAL ADDRESS TO BE USED  2195 08668000
*                    BY THIS SUBROUTINE                            2195 08669000
*      OUTPUT DATA= - COMPLETED TABLE OF AREAS ALLOCATED,          2195 08670000
*                     CONTAINING THE REAL AND VIRTUAL ADDRESSES    2195 08671000
*                     OF EACH AREA                                 2195 08672000
*                   - 'NP0SAHIR' - REAL ADDRESS OF NEXT LOWER      2195 08673000
*                     AVAILABLE BYTE                               2195 08674000
*                   - 'NP0SAHIV' - VIRTUAL ADDRESS OF NEXT LOWER   2195 08675000
*                     AVAILABLE BYTE                               2195 08676000
*                                                                    */ 08677000
*                                                                  2195 08678000
*   NP0SAHIR=(NP0SAHIR              /* ROUND START REAL ADDR DOWN TO    08679000
*                                      AN                            */ 08680000
*       /8)                         /* 8-BYTE MULTIPLE               */ 08681000
*       *8;                                                        2195 08682000
         LR    @06,NP0SAHIR                                        2195 08683000
         SRL   @06,3                                               2195 08684000
         SLA   @06,3                                               2195 08685000
         LR    NP0SAHIR,@06                                        2195 08686000
*   NP0SAHIV=(NP0SAHIV              /* ROUND START VIRT ADDR DOWN TO    08687000
*                                      AN                            */ 08688000
*       /8)                         /* 8-BYTE MULTIPLE               */ 08689000
*       *8;                                                        2196 08690000
         LR    @06,NP0SAHIV                                        2196 08691000
         SRL   @06,3                                               2196 08692000
         SLA   @06,3                                               2196 08693000
         LR    NP0SAHIV,@06                                        2196 08694000
*   TABPTR=NP0SATBL;                /* SET BASE TO REAL ADDR OF FIRST   08695000
*                                      TABLE ENTRY SUBTRACT LENGTH 2197 08696000
*                                      FROM CURR. REAL ADDR AND PUT     08697000
*                                      RESULTING ADDR. IN CORRES   2197 08698000
*                                      TABLE ENTRY AND PRESERVE      */ 08699000
         LR    TABPTR,NP0SATBL                                     2197 08700000
*NSPAL01:                                                          2198 08701000
*   NALLOCLN=((NP0LNGTH             /* ROUND LENGTH FROM TABLE ENTRY */ 08702000
*       +7)                         /* UP TO AN 8-BYTE MULTIPLE      */ 08703000
*       |7)&&7;                                                    2198 08704000
NSPAL01  LA    @06,7                                               2198 08705000
         L     NALLOCLN,NP0LNGTH(,TABPTR)                          2198 08706000
         ALR   NALLOCLN,@06                                        2198 08707000
         OR    NALLOCLN,@06                                        2198 08708000
         XR    NALLOCLN,@06                                        2198 08709000
*   NP0RADDR=NP0SAHIR-NALLOCLN;                                    2199 08710000
         LR    @06,NP0SAHIR                                        2199 08711000
         SLR   @06,NALLOCLN                                        2199 08712000
         ST    @06,NP0RADDR(,TABPTR)                               2199 08713000
*   NP0SAHIR=NP0RADDR;              /* SAVE REAL ADDR IN SAVE AREA   */ 08714000
         LR    NP0SAHIR,@06                                        2200 08715000
*   NP0VADDR=NP0SAHIV               /* SUBTRACT LENGTH FROM CURR.    */ 08716000
*       -NALLOCLN;                  /* VIRT ADDR.AND PUT RESULT IN 2201 08717000
*                                      CORRES TABLE ENTRY            */ 08718000
         LR    @06,NP0SAHIV                                        2201 08719000
         SLR   @06,NALLOCLN                                        2201 08720000
         ST    @06,NP0VADDR(,TABPTR)                               2201 08721000
*   NP0SAHIV=NP0VADDR;              /* AND PRESERVE SAME VIRT ADDR.     08722000
*                                      IN SAVEAREA                   */ 08723000
         LR    NP0SAHIV,@06                                        2202 08724000
*   TABPTR=LENGTH(NP0TABE)          /* UPDATE BASE TO NEXT TABLE     */ 08725000
*       +TABPTR;                    /* ENTRY                         */ 08726000
         AH    TABPTR,@CH00724                                     2203 08727000
*   IF NP0LNGTH^=0                  /* CHECK IF THIS ENTRY IS LAST 2204 08728000
*                                      ONE                           */ 08729000
*     THEN                                                         2204 08730000
         ICM   @06,15,NP0LNGTH(TABPTR)                             2204 08731000
         BNZ   @RT02204                                            2204 08732000
*     GOTO NSPAL01;                 /* (ALL ZEROS), IF NOT-LOOP      */ 08733000
*   END NSPALLOC;                   /* RETURN TO CALLER              */ 08734000
@EL00003 DS    0H                                                  2206 08735000
@EF00003 DS    0H                                                  2206 08736000
@ER00003 LM    @14,@01,12(@13)                                     2206 08737000
         L     @03,32(,@13)                                        2206 08738000
         LM    @05,@12,40(@13)                                     2206 08739000
         BR    @14                                                 2206 08740000
*/********************************************************************/ 08741000
*/*                                                                  */ 08742000
*/* MACHINE CHECK TRAP                                               */ 08743000
*/*                                                                  */ 08744000
*/********************************************************************/ 08745000
*                                                                  2207 08746000
*NIP0MCHT:                                                         2207 08747000
*   ENTRY;                                                         2207 08748000
*                                                                  2207 08749000
@EP02207 DS    0H                                                  2207 08750000
@EC02207 DS    0H                                                  2208 08751000
*/*                                                                2208 08752000
*   FUNCTION= - INTERCEPTS MACHINE CHECK INTERRUPTS FROM ANY CPU   2208 08753000
*               IN THE CONFIGURATION THAT IS ENABLED FOR SUCH      2208 08754000
*               INTERRUPTS                                         2208 08755000
*             - STOPS THE ENTIRE CONFIGURATION                     2208 08756000
*             - LOADS A WAIT STATE PSW                             2208 08757000
*      OPERATION= - CHECKS IF THE CONFIGURATION IS MULTI-PROCESSOR 2208 08758000
*                 - IF IT IS UNI-PROCESSOR, LOADS A WAIT STATE PSW 2208 08759000
*                 - IF IT IS MULTI-PROCESSOR, CONTINUES            2208 08760000
*                 - DETERMINES THE PHYSICAL ADDRESS OF THE CPU     2208 08761000
*                   THIS TRAP IS EXECUTING ON                      2208 08762000
*                 - EXECUTES A SIGP INSTRUCTION TO STOP EVERY      2208 08763000
*                   OTHER POSSIBLE CPU IN THE CONFIGURATION        2208 08764000
*                 - PUTS THE LOGICAL CPU ADDRESS OF THE CPU THIS   2208 08765000
*                   TRAP IS EXECUTING ON IN A WAIT STATE PSW       2208 08766000
*                 - PUTS WAIT STATE CODE X'44' IN THE WAIT         2208 08767000
*                   STATE PSW                                      2208 08768000
*                 - LOADS THAT PSW                                 2208 08769000
**********************************************************************  08770000
*                                                                    */ 08771000
*                                                                  2208 08772000
*   IF NVTMP='0'B                   /* CHECK IF CONFIG. IS U.P.      */ 08773000
*     THEN                          /* IF IT IS, THEN                */ 08774000
         TM    NVTMP,B'00100000'                                   2208 08775000
         BZ    @RT02208                                            2208 08776000
*     GOTO NMCHTWT;                 /* BYPASS THE 'SIGP' SEQUENCE    */ 08777000
*/*                                                            Y02751*/ 08778000
*                                                                  2210 08779000
*   STAP(NPMCHCPU);                 /* GET PHYS. ADDR. OF THE CPU  2210 08780000
*                                      THIS CODE IS EXECUTING ON     */ 08781000
         STAP  NPMCHCPU                                            2210 08782000
*   RFY                                                            2211 08783000
*    (NSIGPOC,                                                     2211 08784000
*     NSIGPADR,                                                    2211 08785000
*     NSIGPSTA) RSTD;                                              2211 08786000
*                                                                  2211 08787000
*/*                                                            Y02751*/ 08788000
*                                                                  2212 08789000
*   NSIGPOC=NSIGPORC;               /* PICK UP ORDER CODE FOR SIGP 2212 08790000
*                                      STOP FUNCTION                 */ 08791000
         L     NSIGPOC,NSIGPORC                                    2212 08792000
*/*                                                            Y02751*/ 08793000
*                                                                  2213 08794000
*   DO I=15 TO 0 BY-1;              /* SET UP A LOOP TO EXECUTE SIGP    08795000
*                                      STOP INSTRUCTION TO ALL OTHER    08796000
*                                      CPU'S OTHER THAN THE ONE THIS    08797000
*                                      CODE IS EXECUTING ON          */ 08798000
         LA    I,15                                                2213 08799000
@DL02213 DS    0H                                                  2214 08800000
*/*                                                            Y02751*/ 08801000
*                                                                  2214 08802000
*     IF I^=NPMCHCPU                /* CHECK IF CURR. CPU DIFFERENT     08803000
*                                      THAN THE CPU THIS CODE IS   2214 08804000
*                                      EXECUTING ON                  */ 08805000
*       THEN                        /* IF IT IS A DIFFERENT CPU      */ 08806000
         SLR   @15,@15                                             2214 08807000
         ICM   @15,3,NPMCHCPU                                      2214 08808000
         CR    I,@15                                               2214 08809000
         BE    @RF02214                                            2214 08810000
*/*                                                            Y02751*/ 08811000
*                                                                  2215 08812000
*       DO;                                                        2215 08813000
*                                                                  2215 08814000
*/*                                                            Y02751*/ 08815000
*                                                                  2216 08816000
*         NSIGPADR=I;               /* PICK UP CURR. CPU ADDR.       */ 08817000
         LR    NSIGPADR,I                                          2216 08818000
*/*                                                            Y02751*/ 08819000
*                                                                  2217 08820000
*         GEN(SIGP   2,3,0(4));     /* EXEC. SIGP-STOP TO CURR. CPU  */ 08821000
         SIGP   2,3,0(4)                                                08822000
*/*                                                            Y02751*/ 08823000
*                                                                  2218 08824000
*       END;                                                       2218 08825000
*                                                                  2218 08826000
*/*                                                            Y02751*/ 08827000
*                                                                  2219 08828000
*   END;                                                           2219 08829000
@RF02214 BCTR  I,0                                                 2219 08830000
         LTR   I,I                                                 2219 08831000
         BNM   @DL02213                                            2219 08832000
*   RFY                                                            2220 08833000
*    (NSIGPOC,                                                     2220 08834000
*     NSIGPADR,                                                    2220 08835000
*     NSIGPSTA) UNRSTD;                                            2220 08836000
*NMCHTWT:                                                          2221 08837000
*                                                                  2221 08838000
*   /*****************************************************************/ 08839000
*   /*                                                               */ 08840000
*   /* FALL INTO THIS CODE WHEN ALL CPU'S OTHER THAN THE CPU THIS    */ 08841000
*   /* CODE IS EXECUTING ON HAVE BEEN STOPPED                        */ 08842000
*   /*                                                               */ 08843000
*   /*****************************************************************/ 08844000
*                                                                  2221 08845000
*   NVTIDPSW=NPMCHCPU+'40'X;        /* PUT LOGICAL CPU ADDRESS OF THE   08846000
*                                      CPU EXECUTING THIS CODE IN THE   08847000
*                                      WAIT STATE PSW                */ 08848000
NMCHTWT  LA    @02,64                                              2221 08849000
         SLR   @15,@15                                             2221 08850000
         ICM   @15,3,NPMCHCPU                                      2221 08851000
         ALR   @02,@15                                             2221 08852000
         STH   @02,NVTIDPSW                                        2221 08853000
*   NVTFLWSC=NVTWCN14;              /* PUT WAIT STATE CODE IN WAIT 2222 08854000
*                                      STATE PSW                     */ 08855000
         MVI   NVTFLWSC,X'44'                                      2222 08856000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 08857000
         LPSW  NVTWTPSW                                            2223 08858000
*/********************************************************************/ 08859000
*/*                                                                  */ 08860000
*/* MAL FUNCTION ALERT TRAP                                          */ 08861000
*/*                                                                  */ 08862000
*/********************************************************************/ 08863000
*/*                                                            Y02751*/ 08864000
*                                                                  2224 08865000
*NIP0MFAT:                                                         2224 08866000
*   ENTRY;                                                         2224 08867000
*                                                                  2224 08868000
@EP02224 DS    0H                                                  2225 08869000
*/*                                                                2225 08870000
**********************************************************************  08871000
*   FUNCTION= - INTERCEPTS MALFUNCTION ALERT SIGNALS               2225 08872000
*               GENERATED BY NON-IPL CPU'S IN A MULTI-PROCESSOR    2225 08873000
*               CONFIGURATION.                                     2225 08874000
*             - SETS A FLAG INDICATING THE CPU THAT GENERATED THE  2225 08875000
*               MALFUNCTION ALERT                                  2225 08876000
*             - RETURNS TO THE ADDRESS IN REGISTER 2               2225 08877000
*      OPERATION= - PICK UP MASK CORRESPONDING TO THE CPU THAT     2225 08878000
*                   GENERATED THE MALFUNCTION ALERT                2225 08879000
*                 - PICK UP CURRENT MALFUNCTION MASK (REPRESENTING 2225 08880000
*                   ALL CPU'S THAT HAVE GENERATED MALFUNCTION ALERTS    08881000
*                   SO FAR)                                        2225 08882000
*                 - 'OR' CURRENT CPU MASK WITH MALFUNCTION MASK    2225 08883000
*                 - RE-STORE THE NEW, CUMULATIVE MALFUNCTION MASK  2225 08884000
*                 - RETURN TO THE ADDRESS IN REGISTER 2            2225 08885000
*                                                                  2225 08886000
**********************************************************************  08887000
*                                                                    */ 08888000
*                                                                  2225 08889000
*   RFY                                                            2225 08890000
*    (NMFATEP,                                                     2225 08891000
*     NMFATRET,                                                    2225 08892000
*     CURMFMSK,                                                    2225 08893000
*     NEWMFMSK,                                                    2225 08894000
*     CURCPMSK) RSTD;                                              2225 08895000
*   RFY                                                            2226 08896000
*    (PSA) BASED(NPSAPTR);          /* FOR THIS RTN., MAKE SURE THE     08897000
*                                      PSA MAPPING IS BASED ON     2226 08898000
*                                      'NPSAPTR' (WHICH IS SET TO  2226 08899000
*                                      ZERO) SO REFERENCES TO PSA  2226 08900000
*                                      FIELDS BY CPU WILL ACCESS THIS   08901000
*                                      CPU'S PSA                     */ 08902000
*/*                                                            Y02751*/ 08903000
*                                                                  2227 08904000
*   CURCPMSK=NCPMSKTB(PSASPAD+1);   /* PICK UP MASK CORRES. TO AILING   08905000
*                                      CPU                           */ 08906000
         L     @01,NPSAPTR                                         2227 08907000
         LH    @15,PSASPAD(,@01)                                   2227 08908000
         ALR   @15,@15                                             2227 08909000
         LA    @14,NCPMSKTB(@15)                                   2227 08910000
         SLR   CURCPMSK,CURCPMSK                                   2227 08911000
         ICM   CURCPMSK,3,0(@14)                                   2227 08912000
*/* NOTE: THE FIELD 'PSASPAD' IN THE PSA OF THE CPU  RECEIVING THE   */ 08913000
*/*       MFA INTERRUPT IS SET BY THE HARDWARE TO THE PHYS. ADDR.    */ 08914000
*/*       OF THE CPU GENERATING THE INTERRUPT.                       */ 08915000
*/*                                                                  */ 08916000
*/*                                                            Y02751*/ 08917000
*                                                                  2228 08918000
*   CURMFMSK=NMFMSKWD;              /* PICK UP CURR. MAL FUNCTION  2228 08919000
*                                      MASK                          */ 08920000
         L     CURMFMSK,NMFMSKWD                                   2228 08921000
*NPSETMSK:                                                         2229 08922000
*                                                                  2229 08923000
*/*                                                            Y02751*/ 08924000
*                                                                  2229 08925000
*   NEWMFMSK=CURMFMSK;              /* PUT CURR. MAL FUNCT. MASK IN     08926000
*                                      ANOTHER REGISTER              */ 08927000
NPSETMSK LR    NEWMFMSK,CURMFMSK                                   2229 08928000
*/*                                                            Y02751*/ 08929000
*                                                                  2230 08930000
*   NEWMFMSK=NEWMFMSK               /* 'OR' CURR. MAL FUNCT. MASK  2230 08931000
*                                      WITH                          */ 08932000
*       |CURCPMSK;                  /* CURR. CPU MASK TO CREATE NEW     08933000
*                                      MAL FUNCTION MASK.            */ 08934000
         OR    NEWMFMSK,CURCPMSK                                   2230 08935000
*/*                                                            Y02751*/ 08936000
*                                                                  2231 08937000
*   CS(CURMFMSK,NEWMFMSK,NMFMSKWD); /* TRY TO SET MAL FUNCT. MASK TO    08938000
*                                      NEW VALUE.                    */ 08939000
         CS    CURMFMSK,@05,NMFMSKWD                               2231 08940000
*/*                                                            Y02751*/ 08941000
*                                                                  2232 08942000
*   BC(7,NPSETMSK);                 /* IF IT DID NOT WORK, TRY AGAIN.   08943000
*                                      NOTE: THE 'CS' INSTR. HAS   2232 08944000
*                                      ALREADY SET 'CURMFMSK' TO THE    08945000
*                                      CURR. VALUE OF 'NMFMSKWD'     */ 08946000
         BC    7,NPSETMSK                                          2232 08947000
*/*                                                            Y02751*/ 08948000
*                                                                  2233 08949000
*   GEN(BR   2);                    /* OTHERWISE RETURN TO THE     2233 08950000
*                                      EXTERNAL FLIH                 */ 08951000
         BR   2                                                         08952000
*   RFY                                                            2234 08953000
*    (NMFATEP,                                                     2234 08954000
*     NMFATRET,                                                    2234 08955000
*     CURMFMSK,                                                    2234 08956000
*     NEWMFMSK,                                                    2234 08957000
*     CURCPMSK) UNRSTD;                                            2234 08958000
*                                                                  2235 08959000
*/*                                                            Y02751*/ 08960000
*                                                                  2235 08961000
*NP0MSGA:                                                          2235 08962000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2235 08963000
*                                                                  2235 08964000
         B     @PB00004                                            2235 08965000
NP0MSGA  STM   @14,@12,12(@13)                                     2235 08966000
*/*                                                                2236 08967000
**********************************************************************  08968000
*                                                                  2236 08969000
*   FUNCTION= - SETS UP 'MESSAGE A' WHENEVER THE IPC ROUTINE RETURNS    08970000
*               A CODE OF 8 (SIGP FUNCTION UNSUCCESSFUL)           2236 08971000
*                                                                  2236 08972000
*             - SINCE THE IPC ROUTINE RETURNS STATUS INFORMATION   2236 08973000
*               WITH A RETURN CODE OF 8, THE MESSAGE WILL CONTAIN THAT  08974000
*               STATUS INFORMATION.  THUS A COPY OF THIS           2236 08975000
*               MESSAGE IS REQUIRED FOR EACH CPU THAT CAUSES THE IPC    08976000
*               ROUTINE TO RETURN A CODE OF 8.  THIS IS ACCOMPLISHED    08977000
*               BY MOVING A COPY OF THE MESSAGE TO THE NUCLEUS     2236 08978000
*               BUFFER AND INITIALIZING THAT COPY WITH THE CPU     2236 08979000
*               ADDRESS AND ITS STATUS INFORMATION.                2236 08980000
*                                                                  2236 08981000
*                                                                  2236 08982000
*      OPERATION= - SAVES STATUS INFORMATION RETURNED BY IPC ROUTINE    08983000
*                 - MOVES A COPY OF 'MESSAGE A' INTO               2236 08984000
*                   NUCLEUS BUFFER                                 2236 08985000
*                 - PUTS VIRTUAL ADDRESS OF THAT MESSAGE IN THE    2236 08986000
*                   MESSAGE PARAMETER LIST                         2236 08987000
*                 - UPDATES A POINTER TO NEXT AVAILABLE BYTE IN    2236 08988000
*                   NUCLEUS BUFFER                                 2236 08989000
*                 - UPDATES A POINTER USED AS BASE FOR MAP OF AN ENTRY  08990000
*                   IN THE MESSAGE PARAMETER LIST TO THE NEXT SLOT 2236 08991000
*                 - UNPACKS THE ADDRESS OF THE CPU THAT CAUSED THE 2236 08992000
*                   RETURN CODE OF 8                               2236 08993000
*                 - TRANSLATES THIS CPU ADDRESS TO EBCDIC          2236 08994000
*                 - PUTS THE EBCDIC CPU ADDRESS IN THE COPY OF THE 2236 08995000
*                   MESSAGE THAT IS IN THE NUCLEUS BUFFER          2236 08996000
*                 - UNPACKS THE STATUS REGISTER RETURNED BY THE IPC     08997000
*                   ROUTINE                                        2236 08998000
*                 - TRANSLATES THE STATUS REGISTER TO EBCDIC       2236 08999000
*                 - PUTS THE EBCDIC STATUS REGISTER IN THE COPY OF THE  09000000
*                   MESSAGE THAT IS IN THE NUCLEUS BUFFER          2236 09001000
*                 - RETURNS TO CALLER                              2236 09002000
*                                                                  2236 09003000
*   NOTES                                                          2236 09004000
*      CHARACTER CODE DEPENDENCIES=                                2236 09005000
*      DEPENDENCIES= - UPON ENTRY TO THIS ROUTINE, REGISTER 0 MUST 2236 09006000
*                      CONTAIN THE STATUS INFORMATION RETURNED BY  2236 09007000
*                      THE IPC ROUTINE.                            2236 09008000
*                    - THE PHYSICAL ADDRESS OF THE OFFENDING CPU MUST   09009000
*                      BE IN FIELD 'NCURCPUA' IN THE CPU           2236 09010000
*                      INITIALIZATION CONTROL BLOCK                2236 09011000
*                    - FIELD 'NVTNUCND' MUST CONTAIN THE ADDRESS OF THE 09012000
*                      NEXT AVAILABLE BYTE (FROM THE BOTTOM, UP) IN THE 09013000
*                      NUCLEUS BUFFER                              2236 09014000
*                                                                  2236 09015000
**********************************************************************  09016000
*                                                                    */ 09017000
*                                                                  2236 09018000
*   RFY                                                            2236 09019000
*    (NDSGNLST) RSTD;                                              2236 09020000
*                                                                  2236 09021000
*/*                                                            Y02751*/ 09022000
*                                                                  2237 09023000
*   NSTAREG=NDSGNLST;               /* SAVE STATUS REG. (REG. 0) AS     09024000
*                                      RETURNED BY IPC ROUTINE       */ 09025000
         ST    NDSGNLST,NSTAREG                                    2237 09026000
*   RFY                                                            2238 09027000
*    (NDSGNLST) UNRSTD;                                            2238 09028000
*                                                                  2238 09029000
*/*                                                            Y02751*/ 09030000
*                                                                  2239 09031000
*   NMSGABAS=NP0NBAVL;              /* PUT ADDR. OF NEXT AVAIL. BYTE    09032000
*                                      IN NUC. BUFF. IN BASE FOR MAP    09033000
*                                      OF THIS MESSAGE.              */ 09034000
         L     @05,NP0NBAVL                                        2239 09035000
         LR    NMSGABAS,@05                                        2239 09036000
*/*                                                            Y02751*/ 09037000
*                                                                  2240 09038000
*   MSGAMAP=MSGA(1:LENGTH(MSGAMAP));/* MOVE A COPY OF THIS MESSAGE TO   09039000
*                                      THE NUC. BUFF.                */ 09040000
         MVC   MSGAMAP(51,NMSGABAS),MSGA                           2240 09041000
*/*                                                            Y02751*/ 09042000
*                                                                  2241 09043000
*   NPMSGPTR=NP0NBAVL;              /* PUT VIRT. ADDR. OF THIS COPY     09044000
*                                      OF THE MESSAGE IN MESSAGE   2241 09045000
*                                      PARAM. LIST.                  */ 09046000
         L     @15,NMSGPLBA                                        2241 09047000
         ST    @05,NPMSGPTR(,@15)                                  2241 09048000
*/*                                                            Y02751*/ 09049000
*                                                                  2242 09050000
*   N0MSGPTR=NP0NBAVL;              /* PUT ADDR. OF THIS COPY OF THIS   09051000
*                                      MESSAGE IN BASE FOR MAPPING OF   09052000
*                                      MESSAGE HEADER                */ 09053000
         LR    N0MSGPTR,@05                                        2242 09054000
*/*                                                            Y02751*/ 09055000
*                                                                  2243 09056000
*   NP0NBAVL=NP0NBAVL               /* UPDATE POINTER TO NEXT AVAIL. */ 09057000
*       +NWTOLNG;                   /* BYTE IN NUC. BUFF.            */ 09058000
         AH    @05,NWTOLNG(,N0MSGPTR)                              2243 09059000
         ST    @05,NP0NBAVL                                        2243 09060000
*/*                                                            Y02751*/ 09061000
*                                                                  2244 09062000
*   NMSGPLBA=NMSGPLBA               /* UPDATE BASE POINTER FOR MAP OF*/ 09063000
*       +LENGTH(NPMSGPTR);          /* AN ENTRY IN MESSAGE PARAM.  2244 09064000
*                                      LIST TO NEXT ENTRY IN THE   2244 09065000
*                                      LIST.                         */ 09066000
         AH    @15,@CH00062                                        2244 09067000
         ST    @15,NMSGPLBA                                        2244 09068000
*/*                                                            Y02751*/ 09069000
*                                                                  2245 09070000
*   NCPACPUA=NCURCPUA;              /* PUT CURR. CPU ADDR. IN WORK 2245 09071000
*                                      AREA                          */ 09072000
         MVC   NCPACPUA(2),NCURCPUA                                2245 09073000
*/*                                                            Y02751*/ 09074000
*                                                                  2246 09075000
*   UNPK(NCPATRAN,NCPACONV);        /* UNPACK 2 BYTE CPU ADDR. (PLUS    09076000
*                                      A LOW ORDER PAD BYTE) INTO  2246 09077000
*                                      ANOTHER WORK AREA.            */ 09078000
         UNPK  NCPATRAN(5),NCPACONV(3)                             2246 09079000
*/*                                                            Y02751*/ 09080000
*                                                                  2247 09081000
*   TR(NCPATRCP,NP0BATAB);          /* TRANSLATE THE LOW ORDER 2   2247 09082000
*                                      BYTES OF THE CPU ADDR. TO   2247 09083000
*                                      EBCDIC.                       */ 09084000
         LA    @15,NP0TRTAB                                        2247 09085000
         SH    @15,@CH04294                                        2247 09086000
         TR    NCPATRCP(2),NP0BATAB(@15)                           2247 09087000
*/*                                                            Y02751*/ 09088000
*                                                                  2248 09089000
*   MSGACPAD=NCPATRCP;              /* MOVE 2 BYTE CPU ADDR. INTO  2248 09090000
*                                      COPY OF MESSAGE IN NUC. BUFF. */ 09091000
         MVC   MSGACPAD(2,NMSGABAS),NCPATRCP                       2248 09092000
*/*                                                            Y02751*/ 09093000
*                                                                  2249 09094000
*   UNPK(NSTATRAN,NSTACONV);        /* UNPACK 4 BYTE STATUS REG.   2249 09095000
*                                      (PLUS A LOW ORDER PAD BYTE) 2249 09096000
*                                      INTO ANOTHER WORK AREA.       */ 09097000
         UNPK  NSTATRAN(9),NSTACONV(5)                             2249 09098000
*/*                                                            Y02751*/ 09099000
*                                                                  2250 09100000
*   TR(NSTATRST,NP0BATAB);          /* TRANSLATE THE HI ORDER 8 BYTES   09101000
*                                      OF THE STATUS REG. TO EBCDIC. */ 09102000
         TR    NSTATRST(8),NP0BATAB(@15)                           2250 09103000
*/*                                                            Y02751*/ 09104000
*                                                                  2251 09105000
*   MSGASTAR=NSTATRST;              /* MOVE THESE 8 BYTES INTO THE 2251 09106000
*                                      COPY OF THE MESSAGE IN NUC. 2251 09107000
*                                      BUFF.                         */ 09108000
         MVC   MSGASTAR(8,NMSGABAS),NSTATRST                       2251 09109000
*/*                                                            Y02751*/ 09110000
*                                                                  2252 09111000
*   END NP0MSGA;                                                   2252 09112000
@EL00004 DS    0H                                                  2252 09113000
@EF00004 DS    0H                                                  2252 09114000
@ER00004 LM    @14,@12,12(@13)                                     2252 09115000
         BR    @14                                                 2252 09116000
*NP0MSGB:                                                          2253 09117000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2253 09118000
*                                                                  2253 09119000
NP0MSGB  STM   @14,@12,12(@13)                                     2253 09120000
*/*                                                                2254 09121000
**********************************************************************  09122000
*                                                                  2254 09123000
*   FUNCTION= - SETS UP OR EXTENDS 'MESSAGE B' WHENEVER THE        2254 09124000
*               IPC ROUTINE RETURNS A CODE OF 4                    2254 09125000
*               (SIGP FUNCTION NOT COMPLETED)                      2254 09126000
*             - MESSAGE B CONTAINS SPACE FOR ALL POSSIBLE CPU ADDRESSES 09127000
*               (0 - F).  IF A CPU CAUSES THE IPC ROUTINE TO RETURN A   09128000
*               CODE OF 4, THAT CPU'S ADDRESS IS PLACED IN THE MESSAGE  09129000
*               FOLLOWING THE PREVIOUS CPU ADDRESS (IF ANY).       2254 09130000
*                                                                  2254 09131000
*      OPERATION= - CHECKS IF 'MESSAGE B' HAS ALREADY BEEN INITIALIZED  09132000
*                 - IF NOT, TURNS ON A FLAG INDICATING IT IS       2254 09133000
*                   INITIALIZED                                    2254 09134000
*                 - PUTS VIRTUAL ADDRESS OF 'MESSAGE B' IN NEXT    2254 09135000
*                   SLOT OF MESSAGE PARAMETER LIST.                2254 09136000
*                 - UPDATES BASE POINTER FOR THE MAP OF AN ENTRY   2254 09137000
*                   IN THE MESSAGE PARAMETER LIST TO THE NEXT SLOT 2254 09138000
*                 - IF THE MESSAGE ALREADY IS INITIALIZED, MOVES A 2254 09139000
*                   COMMA INTO THE MESSAGE TO SEPARATE THE PREVIOUS     09140000
*                   CPU ADDRESS FROM THE NEW ONE.                  2254 09141000
*                 - IN EITHER CASE, UNPACKS THE ADDRESS OF THE CPU 2254 09142000
*                   THAT CAUSED THE IPC ROUTINE TO RETURN A CODE OF 4   09143000
*                 - CONVERTS THAT CPU ADDRESS TO EBCDIC            2254 09144000
*                 - MOVES THE EBCDIC CPU ADDRESS INTO THE MESSAGE  2254 09145000
*                 - UPDATES A POINTER TO THE NEXT 'CPU ADDRESS' FIELD   09146000
*                   IN THE MESSAGE.                                2254 09147000
*                 - RETURNS TO CALLER                              2254 09148000
*                                                                  2254 09149000
*   NOTES                                                          2254 09150000
*      CHARACTER CODE DEPENDENCIES=                                2254 09151000
*      DEPENDENCIES= - THE PHYSICAL ADDRESS OF THE OFFENDING CPU MUST   09152000
*                      BE IN FIELD 'NCURCPUA' IN THE CPU INITIALIZATION 09153000
*                      CONTROL BLOCK                               2254 09154000
*                                                                  2254 09155000
*                                                                    */ 09156000
*                                                                  2254 09157000
*   RFY                                                            2254 09158000
*    (NMSGCPAD) BASED(NCPUAFMB);    /* RESPECIFY MAP OF A 'CPU ADDR.'   09159000
*                                      FIELD TO BE BASED ON ADDR. OF    09160000
*                                      NEXT AVAIL. BYTE IN 'CPU    2254 09161000
*                                      ADDRESS(ES)' FIELD IN THIS  2254 09162000
*                                      MESSAGE.                      */ 09163000
*/*                                                            Y02751*/ 09164000
*                                                                  2255 09165000
*   IF NMSGBFLG='0'B                /* CHECK IF THIS MESSAGE IS NOT     09166000
*                                      INITIALIZED                   */ 09167000
*     THEN                          /* IF IT IS NOT INITIALIZED      */ 09168000
         TM    NMSGBFLG,B'10000000'                                2255 09169000
         BNZ   @RF02255                                            2255 09170000
*/*                                                            Y02751*/ 09171000
*                                                                  2256 09172000
*     DO;                           /* INITIALIZE IT                 */ 09173000
*/*                                                            Y02751*/ 09174000
*                                                                  2257 09175000
*       NMSGBFLG='1'B;              /* TURN ON FLAG INDICATING THIS     09176000
*                                      MESSAGE IS INITIALIZED.       */ 09177000
         OI    NMSGBFLG,B'10000000'                                2257 09178000
*/*                                                            Y02751*/ 09179000
*                                                                  2258 09180000
*       NPMSGPTR=ADDR(MSGB);        /* PUT VIRT. ADDR. OF THIS     2258 09181000
*                                      MESSAGE IN NEXT SLOT OF     2258 09182000
*                                      MESSAGE PARAM. LIST           */ 09183000
         L     @02,NMSGPLBA                                        2258 09184000
         LA    @15,MSGB                                            2258 09185000
         ST    @15,NPMSGPTR(,@02)                                  2258 09186000
*/*                                                            Y02751*/ 09187000
*                                                                  2259 09188000
*       NMSGPLBA=NMSGPLBA           /* UPDATE BASE POINTER FOR MAP OF*/ 09189000
*           +LENGTH(NPMSGPTR);      /* AN ENTRY IN MESSAGE PARAM.  2259 09190000
*                                      LIST TO NEXT ENTRY IN THE   2259 09191000
*                                      LIST.                         */ 09192000
         AH    @02,@CH00062                                        2259 09193000
         ST    @02,NMSGPLBA                                        2259 09194000
*/*                                                            Y02751*/ 09195000
*                                                                  2260 09196000
*     END;                                                         2260 09197000
*   ELSE                            /* IF THIS MESSAGE IS INITIALIZED*/ 09198000
*/*                                                            Y02751*/ 09199000
*                                                                  2261 09200000
*     NMSGCOMA=NP0COMMA;            /* MOVE IN A COMMA TO SEPARATE 2261 09201000
*                                      THIS CPU ADDR. FROM THE PREV.    09202000
*                                      ONE                           */ 09203000
         B     @RC02255                                            2261 09204000
@RF02255 L     @02,NCPUAFMB                                        2261 09205000
         MVC   NMSGCOMA(1,@02),NP0COMMA                            2261 09206000
*/*                                                            Y02751*/ 09207000
*                                                                  2262 09208000
*   NCPACPUA=NCURCPUA;              /* MOVE CURR. CPU ADDR. INTO WORK   09209000
*                                      AREA.                         */ 09210000
@RC02255 MVC   NCPACPUA(2),NCURCPUA                                2262 09211000
*/*                                                            Y02751*/ 09212000
*                                                                  2263 09213000
*   UNPK(NCPATRAN,NCPACONV);        /* UNPACK 2 BYTE CPU ADDR. (PLUS    09214000
*                                      A LOW ORDER PAD BYTE) INTO  2263 09215000
*                                      ANOTHER WORK AREA.            */ 09216000
         UNPK  NCPATRAN(5),NCPACONV(3)                             2263 09217000
*/*                                                            Y02751*/ 09218000
*                                                                  2264 09219000
*   TR(NCPATRCP,NP0BATAB);          /* TRANSLATE THE LOW ORDER 2   2264 09220000
*                                      BYTES OF THE CPU ADDR. TO   2264 09221000
*                                      EBCDIC.                       */ 09222000
         LA    @02,NP0TRTAB                                        2264 09223000
         AL    @02,@CF05595                                        2264 09224000
         TR    NCPATRCP(2),NP0BATAB(@02)                           2264 09225000
*/*                                                            Y02751*/ 09226000
*                                                                  2265 09227000
*   NMSGCPUA=NCPATRCP;              /* MOVE 2 BYTE CPU ADDR. INTO THE   09228000
*                                      MESSAGE.                      */ 09229000
         L     @02,NCPUAFMB                                        2265 09230000
         MVC   NMSGCPUA(2,@02),NCPATRCP                            2265 09231000
*/*                                                            Y02751*/ 09232000
*                                                                  2266 09233000
*   NCPUAFMB=NCPUAFMB               /* UPDATE POINTER TO NEXT 'CPU   */ 09234000
*       +LENGTH(NMSGCPAD);          /* ADDR.' FIELD IN THIS MESSAGE. */ 09235000
         AH    @02,@CH00301                                        2266 09236000
         ST    @02,NCPUAFMB                                        2266 09237000
*/*                                                            Y02751*/ 09238000
*                                                                  2267 09239000
*   END NP0MSGB;                                                   2267 09240000
@EL00005 DS    0H                                                  2267 09241000
@EF00005 DS    0H                                                  2267 09242000
@ER00005 LM    @14,@12,12(@13)                                     2267 09243000
         BR    @14                                                 2267 09244000
*NP0MSGC:                                                          2268 09245000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2268 09246000
*                                                                  2268 09247000
NP0MSGC  STM   @14,@12,12(@13)                                     2268 09248000
*/*                                                                2269 09249000
**********************************************************************  09250000
*                                                                  2269 09251000
*   FUNCTION= - SETS UP 'MESSAGE C' WHENEVER THE IPC ROUTINE RETURNS    09252000
*               AN UNDEFINED RETURN CODE                           2269 09253000
*             - THE UNDEFINED RETURN CODE IS PUT IN THE MESSAGE.  THUS  09254000
*               A DISTINCT COPY OF THIS MESSAGE IS REQUIRED FOR EACH    09255000
*               OCCURANCE OF AN UNDEFINED RETURN CODE FROM THE IPC 2269 09256000
*               ROUTINE.  THIS IS ACCOMPLISHED BY MOVING A COPY OF 2269 09257000
*               THE MESSAGE TO THE NUCLEUS BUFFER AND INITIALIZING 2269 09258000
*               THAT COPY WITH THE CPU ADDRESS AND THE RETURN CODE 2269 09259000
*                                                                  2269 09260000
*      OPERATION= - SAVES CODE RETURNED BY THE IPC ROUTINE         2269 09261000
*                 - MOVES A COPY OF THE MESSAGE TO THE NUCLEUS BUFFER   09262000
*                 - PUTS VIRTUAL ADDRESS OF THE COPY OF THE MESSAGE     09263000
*                   IN NUCLEUS BUFFER IN MESSAGE PARAMETER LIST    2269 09264000
*                 - UPDATES POINTER TO NEXT AVAILABLE BYTE IN NUCLEUS   09265000
*                   BUFFER                                         2269 09266000
*                 - UNPACKS THE CODE RETURNED BY THE IPC ROUTINE   2269 09267000
*                 - TRANSLATES THE CODE TO EBCDIC                  2269 09268000
*                 - PUTS THE EBCDIC CODE IN THE COPY OF THE MESSAGE     09269000
*                   THAT IS IN THE NUCLEUS BUFFER                  2269 09270000
*                 - RETURNS TO CALLER                              2269 09271000
*                                                                  2269 09272000
*   NOTES                                                          2269 09273000
*      CHARACTER CODE DEPENDENCIES=                                2269 09274000
*      DEPENDENCIES= - ON ENTRY TO THIS ROUTINE, REGISTER 15 MUST  2269 09275000
*                      CONTAIN THE CODE RETURNED BY THE IPC ROUTINE     09276000
*                    - THE PHYSICAL CPU ADDRESS OF THE OFFINGING CPU    09277000
*                      MUST BE IN FIELD 'NCURCPUA' IN THE CPU      2269 09278000
*                      INITIALIZATION CONTROL BLOCK                2269 09279000
*                    - FIELD 'NVTNUCND' MUST CONTAIN THE ADDRESS OF     09280000
*                      THE NEXT AVAILABLE BYTE (FROM THE BOTTOM, UP)    09281000
*                      IN THE NUCLEUS BUFFER                       2269 09282000
*                                                                  2269 09283000
**********************************************************************  09284000
*                                                                    */ 09285000
*                                                                  2269 09286000
*   RFY                                                            2269 09287000
*    (NDSGNLRC) RSTD;                                              2269 09288000
*                                                                  2269 09289000
*/*                                                            Y02751*/ 09290000
*                                                                  2270 09291000
*   NRETCODE=NDSGNLRC;              /* SAVE CODE RETURNED BY IPC RTN.*/ 09292000
         ST    NDSGNLRC,NRETCODE                                   2270 09293000
*   RFY                                                            2271 09294000
*    (NDSGNLRC) UNRSTD;                                            2271 09295000
*                                                                  2271 09296000
*/*                                                            Y02751*/ 09297000
*                                                                  2272 09298000
*   NMSGCBAS=NP0NBAVL;              /* PUT ADDR. OF NEXT AVAIL. BYTE    09299000
*                                      IN NUC. BUFF. IN BASE FOR MAP    09300000
*                                      OF THIS MESSAGE.              */ 09301000
         L     @05,NP0NBAVL                                        2272 09302000
         LR    NMSGCBAS,@05                                        2272 09303000
*/*                                                            Y02751*/ 09304000
*                                                                  2273 09305000
*   MSGCMAP=MSGC(1:LENGTH(MSGCMAP));/* MOVE A COPY OF THIS MESSAGE TO   09306000
*                                      THE NUC. BUFF.                */ 09307000
         MVC   MSGCMAP(49,NMSGCBAS),MSGC                           2273 09308000
*/*                                                            Y02751*/ 09309000
*                                                                  2274 09310000
*   NPMSGPTR=NP0NBAVL;              /* PUT VIRT. ADDR. OF COPY OF  2274 09311000
*                                      THIS MESSAGE IN MESSAGE PARAM.   09312000
*                                      LIST                          */ 09313000
         L     @15,NMSGPLBA                                        2274 09314000
         ST    @05,NPMSGPTR(,@15)                                  2274 09315000
*/*                                                            Y02751*/ 09316000
*                                                                  2275 09317000
*   N0MSGPTR=NP0NBAVL;              /* PUT ADDR. OF THIS COPY OF THIS   09318000
*                                      MESSAGE IN BASE FOR MAPPING OF   09319000
*                                      MESSAGE HEADER                */ 09320000
         LR    N0MSGPTR,@05                                        2275 09321000
*/*                                                            Y02751*/ 09322000
*                                                                  2276 09323000
*   NP0NBAVL=NP0NBAVL               /* UPDATE POINTER TO NEXT AVAIL. */ 09324000
*       +NWTOLNG;                   /* BYTE IN NUC. BUFF.            */ 09325000
         AH    @05,NWTOLNG(,N0MSGPTR)                              2276 09326000
         ST    @05,NP0NBAVL                                        2276 09327000
*/*                                                            Y02751*/ 09328000
*                                                                  2277 09329000
*   NMSGPLBA=NMSGPLBA               /* UPDATE BASE POINTER FOR MAP OF*/ 09330000
*       +LENGTH(NPMSGPTR);          /* AN ENTRY IN MESSAGE PARAM.  2277 09331000
*                                      LIST TO NEXT ENTRY IN THE   2277 09332000
*                                      LIST.                         */ 09333000
         AH    @15,@CH00062                                        2277 09334000
         ST    @15,NMSGPLBA                                        2277 09335000
*/*                                                            Y02751*/ 09336000
*                                                                  2278 09337000
*   NCPACPUA=NCURCPUA;              /* MOVE CURR. CPU ADDR. TO A WORK   09338000
*                                      AREA.                         */ 09339000
         MVC   NCPACPUA(2),NCURCPUA                                2278 09340000
*/*                                                            Y02751*/ 09341000
*                                                                  2279 09342000
*   UNPK(NCPATRAN,NCPACONV);        /* UNPACK 2 BYTE CPU ADDR. (PLUS    09343000
*                                      A LOW ORDER PAD BYTE) INTO  2279 09344000
*                                      ANOTHER WORK AREA.            */ 09345000
         UNPK  NCPATRAN(5),NCPACONV(3)                             2279 09346000
*/*                                                            Y02751*/ 09347000
*                                                                  2280 09348000
*   TR(NCPATRCP,NP0BATAB);          /* TRANSLATE THE LOW ORDER 2   2280 09349000
*                                      BYTES OF THE CPU ADDR. TO   2280 09350000
*                                      EBCDIC.                       */ 09351000
         LA    @15,NP0TRTAB                                        2280 09352000
         SH    @15,@CH04294                                        2280 09353000
         TR    NCPATRCP(2),NP0BATAB(@15)                           2280 09354000
*/*                                                            Y02751*/ 09355000
*                                                                  2281 09356000
*   MSGCCPAD=NCPATRCP;              /* MOVE 2 BYTE CPU ADDR. INTO  2281 09357000
*                                      COPY OF MESSAGE IN NUC. BUFF. */ 09358000
         MVC   MSGCCPAD(2,NMSGCBAS),NCPATRCP                       2281 09359000
*/*                                                            Y02751*/ 09360000
*                                                                  2282 09361000
*   UNPK(NRTCTRAN,NRETCDSA);        /* UNPACK THE RETURN CODE (PLUS A   09362000
*                                      LOW ORDER PAD BYTE) INTO    2282 09363000
*                                      ANOTHER WORK AREA.            */ 09364000
         UNPK  NRTCTRAN(9),NRETCDSA(5)                             2282 09365000
*/*                                                            Y02751*/ 09366000
*                                                                  2283 09367000
*   TR(NRTCRTCD,NP0BATAB);          /* TRANSLATE THE UNPACKED RETURN    09368000
*                                      CODE TO EBCDIC.               */ 09369000
         TR    NRTCRTCD(8),NP0BATAB(@15)                           2283 09370000
*/*                                                            Y02751*/ 09371000
*                                                                  2284 09372000
*   MSGCRETC=NRTCRTCD;              /* MOVE THE EBCDIC RETURN CODE 2284 09373000
*                                      INTO THE COPY OF THE MESSAGE     09374000
*                                      IN THE NUC. BUFF.             */ 09375000
         MVC   MSGCRETC(8,NMSGCBAS),NRTCRTCD                       2284 09376000
*/*                                                            Y02751*/ 09377000
*                                                                  2285 09378000
*   END NP0MSGC;                                                   2285 09379000
@EL00006 DS    0H                                                  2285 09380000
@EF00006 DS    0H                                                  2285 09381000
@ER00006 LM    @14,@12,12(@13)                                     2285 09382000
         BR    @14                                                 2285 09383000
*NP0MSGD:                                                          2286 09384000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2286 09385000
*                                                                  2286 09386000
NP0MSGD  STM   @14,@12,12(@13)                                     2286 09387000
*/*                                                                2287 09388000
**********************************************************************  09389000
*   FUNCTION= - SETS UP 'MESSAGE D' WHENEVER IEAVNIP0 FAILS TO     2287 09390000
*               INITIALIZE A CPU (IN A MULTI-PROCESSING CONFIGURATION). 09391000
*             - MESSAGE D CONTAINS SPACE FOR ALL POSSIBLE CPU ADDRESSES 09392000
*               (0 - F).  IF A CPU CANNOT BE INITIALIZED, ITS ADDRESS   09393000
*               IS PLACED IN THE MESSAGE FOLLOWING THE PREVIOUS CPU     09394000
*               ADDRESSES (IF ANY).                                2287 09395000
*                                                                  2287 09396000
*      OPERATION= - CHECKS IF 'MESSAGE D' HAS ALREADY BEEN INITIALIZED. 09397000
*                 - IF NOT, TURNS ON A FLAG INDICATING IT IS       2287 09398000
*                   INITIALIZED.                                   2287 09399000
*                 - PUTS THE VIRTUAL ADDRESS OF 'MESSAGE D' IN THE NEXT 09400000
*                   SLOT OF THE MESSAGE PARAMETER LIST.            2287 09401000
*                 - UPDATES THE BASE POINTER FOR THE MAP OF AN ENTRY    09402000
*                   IN THE MESSAGE PARAMETER LIST TO THE NEXT SLOT.     09403000
*                 - IF THE MESSAGE ALREADY IS INITIALIZED, MOVES A 2287 09404000
*                   COMMA INTO THE MESSAGE TO SEPARATE THE PREVIOUS     09405000
*                   CPU ADDRESS FROM THE NEW ONE.                  2287 09406000
*                 - IN EITHER CASE, UNPACKS THE ADDRESS OF THE CPU 2287 09407000
*                   THAT COULD NOT BE INITIALIZED.                 2287 09408000
*                 - CONVERTS THAT CPU ADDRESS TO EBCDIC.           2287 09409000
*                 - MOVES THE EBCDIC CPU ADDRESS INTO THE MESSAGE  2287 09410000
*                 - UPDATES A POINTER TO THE NEXT 'CPU ADDRESS' FIELD   09411000
*                   IN THE MESSAGE.                                2287 09412000
*                 - RETURNS TO CALLER.                             2287 09413000
**********************************************************************  09414000
*                                                                    */ 09415000
*                                                                  2287 09416000
*   RFY                                                            2287 09417000
*    (NMSGCPAD) BASED(NCPUAFMD);    /* RESPECIFY MAP OF 'CPU ADDR' 2287 09418000
*                                      FIELD TO BE BASED ON ADDR. OF    09419000
*                                      NEXT AVAIL. BYTE IN 'CPU    2287 09420000
*                                      ADDRESS(ES)' FIELD IN THIS  2287 09421000
*                                      MESSAGE.                      */ 09422000
*/*                                                            Y02751*/ 09423000
*                                                                  2288 09424000
*   IF NMSGDFLG='0'B                /* CHECK IF THIS MESSAGE IS NOT     09425000
*                                      INITIALIZED.                  */ 09426000
*     THEN                          /* IF IT IS NOT INITIALIZED THEN,*/ 09427000
         TM    NMSGDFLG,B'01000000'                                2288 09428000
         BNZ   @RF02288                                            2288 09429000
*/*                                                            Y02751*/ 09430000
*                                                                  2289 09431000
*     DO;                           /* INITIALIZE IT                 */ 09432000
*/*                                                            Y02751*/ 09433000
*                                                                  2290 09434000
*       NMSGDFLG='1'B;              /* TURN ON SWITCH INDICATING THIS   09435000
*                                      IS INITIALIZED.               */ 09436000
         OI    NMSGDFLG,B'01000000'                                2290 09437000
*/*                                                            Y02751*/ 09438000
*                                                                  2291 09439000
*       NPMSGPTR=ADDR(MSGD);        /* PUT VIRT. ADDR. OF THIS     2291 09440000
*                                      MESSAGE IN NEXT SLOT OF     2291 09441000
*                                      MESSAGE PARAM. LIST.          */ 09442000
         L     @02,NMSGPLBA                                        2291 09443000
         LA    @15,MSGD                                            2291 09444000
         ST    @15,NPMSGPTR(,@02)                                  2291 09445000
*/*                                                            Y02751*/ 09446000
*                                                                  2292 09447000
*       NMSGPLBA=NMSGPLBA           /* UPDATE BASE POINTER FOR MAP OF*/ 09448000
*           +LENGTH(NPMSGPTR);      /* AN ENTRY IN MESSAGE PARAM.  2292 09449000
*                                      LIST TO NEXT ENTRY IN THE   2292 09450000
*                                      LIST.                         */ 09451000
         AH    @02,@CH00062                                        2292 09452000
         ST    @02,NMSGPLBA                                        2292 09453000
*/*                                                            Y02751*/ 09454000
*                                                                  2293 09455000
*     END;                                                         2293 09456000
*   ELSE                            /* IF THE MESSAGE IS INITIALIZED */ 09457000
*/*                                                            Y02751*/ 09458000
*                                                                  2294 09459000
*     NMSGCOMA=NP0COMMA;            /* MOVE IN A COMMA TO SEPARATE 2294 09460000
*                                      THIS CPU ADDR. FROM THE PREV.    09461000
*                                      ONE                           */ 09462000
         B     @RC02288                                            2294 09463000
@RF02288 L     @02,NCPUAFMD                                        2294 09464000
         MVC   NMSGCOMA(1,@02),NP0COMMA                            2294 09465000
*/*                                                            Y02751*/ 09466000
*                                                                  2295 09467000
*   NCPACPUA=NCURCPUA;              /* MOVE CURR. CPU ADDR. INTO A 2295 09468000
*                                      WORK AREA.                    */ 09469000
@RC02288 MVC   NCPACPUA(2),NCURCPUA                                2295 09470000
*/*                                                            Y02751*/ 09471000
*                                                                  2296 09472000
*   UNPK(NCPATRAN,NCPACONV);        /* UNPACK THE 2 BYTE CPU ADDR. 2296 09473000
*                                      (PLUS A LOW ORDER PAD BYTE) 2296 09474000
*                                      INTO ANOTHER WORK AREA.       */ 09475000
         UNPK  NCPATRAN(5),NCPACONV(3)                             2296 09476000
*/*                                                            Y02751*/ 09477000
*                                                                  2297 09478000
*   TR(NCPATRCP,NP0BATAB);          /* TRANSLATE THE LOW ORDER 2   2297 09479000
*                                      BYTES OF THE CPU ADDR. INTO 2297 09480000
*                                      EBCDIC.                       */ 09481000
         LA    @02,NP0TRTAB                                        2297 09482000
         AL    @02,@CF05595                                        2297 09483000
         TR    NCPATRCP(2),NP0BATAB(@02)                           2297 09484000
*/*                                                            Y02751*/ 09485000
*                                                                  2298 09486000
*   NMSGCPUA=NCPATRCP;              /* MOVE THOSE 2 BYTES INTO THE 2298 09487000
*                                      MESSAGE.                      */ 09488000
         L     @02,NCPUAFMD                                        2298 09489000
         MVC   NMSGCPUA(2,@02),NCPATRCP                            2298 09490000
*/*                                                            Y02751*/ 09491000
*                                                                  2299 09492000
*   NCPUAFMD=NCPUAFMD               /* UPDATE POINTER TO NEXT 'CPU   */ 09493000
*       +LENGTH(NMSGCPAD);          /* ADDR' FIELD IN THIS MESSAGE.  */ 09494000
         AH    @02,@CH00301                                        2299 09495000
         ST    @02,NCPUAFMD                                        2299 09496000
*/*                                                            Y02751*/ 09497000
*                                                                  2300 09498000
*   END NP0MSGD;                                                   2300 09499000
@EL00007 DS    0H                                                  2300 09500000
@EF00007 DS    0H                                                  2300 09501000
@ER00007 LM    @14,@12,12(@13)                                     2300 09502000
         BR    @14                                                 2300 09503000
*NP0MSGE:                                                          2301 09504000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2301 09505000
*                                                                  2301 09506000
NP0MSGE  STM   @14,@12,12(@13)                                     2301 09507000
*/*                                                                2302 09508000
**********************************************************************  09509000
*                                                                  2302 09510000
*   FUNCTION= - SETS UP 'MESSAGE E' WHENEVER A NON-IPL CPU         2302 09511000
*               GENERATES A MAL-FUNCTION ALERT.                    2302 09512000
*             - MESSAGE E CONTAINS SPACE FOR ALL POSSIBLE CPU      2302 09513000
*               ADDRESSES (0 - F).  IF A CPU GENERATES A MAL-      2302 09514000
*               FUNCTION ALERT, ITS ADDRESS IS PLACED IN THE       2302 09515000
*               MESSAGE FOLLOWING THE PREVIOUS CPU ADDRESSES       2302 09516000
*               (IF ANY).                                          2302 09517000
*                                                                  2302 09518000
*      OPERATION= - CHECKS IF 'MESSAGE E' HAS ALREADY BEEN INITIALIZED  09519000
*                 - IF NOT, TURNS ON A FLAG INDICATING IT IS       2302 09520000
*                   INITIALIZED                                    2302 09521000
*                 - PUTS THE VIRTUAL ADDRESS OF 'MESSAGE E' IN THE 2302 09522000
*                   NEXT SLOT OF THE MESSAGE PARAMETER LIST        2302 09523000
*                 - UPDATES THE BASE POINTER FOR THE MAP OF AN     2302 09524000
*                   ENTRY IN THE MESSAGE PARAMETER LIST TO THE     2302 09525000
*                   NEXT SLOT                                      2302 09526000
*                 - IF THE MESSAGE ALREADY IS INITIALIZED, MOVES   2302 09527000
*                   A COMMA INTO THE MESSAGE TO SEPARATE THE       2302 09528000
*                   PREVIOUS CPU ADDRESS FROM THE NEW ONE.         2302 09529000
*                 - IN EITHER CASE, UNPACKS THE ADDRESS OF THE     2302 09530000
*                   CPU GENERATING THE MAL-FUNCTION ALERT          2302 09531000
*                 - CONVERTS THAT CPU ADDRESS TO EBCDIC            2302 09532000
*                 - MOVES THE EBCDIC CPU ADDRESS INTO THE          2302 09533000
*                   MESSAGE                                        2302 09534000
*                 - UPDATES A POINTER TO THE NEXT 'CPU             2302 09535000
*                   ADDRESS' FIELD IN THE MESSAGE                  2302 09536000
*                 - RETURNS TO CALLER                              2302 09537000
*                                                                  2302 09538000
**********************************************************************  09539000
*                                                                    */ 09540000
*                                                                  2302 09541000
*   RFY                                                            2302 09542000
*    (NMSGCPAD) BASED(NCPUAFME);    /* RESPECIFY MAP OF 'CPU ADDR.'     09543000
*                                      FIELD TO BE BASED ON ADDR. OF    09544000
*                                      NEXT AVAIL. BYTE IN 'CPU    2302 09545000
*                                      ADDRESS(ES)' FIELD IN THIS  2302 09546000
*                                      MESSAGE.                      */ 09547000
*/*                                                            Y02751*/ 09548000
*                                                                  2303 09549000
*   IF NMSGEFLG='0'B                /* CHECK IF THIS MESSAGE IS NOT     09550000
*                                      INITIALIZED                   */ 09551000
*     THEN                          /* IF IT IS NOT INITIALIZED THEN,*/ 09552000
         TM    NMSGEFLG,B'00100000'                                2303 09553000
         BNZ   @RF02303                                            2303 09554000
*/*                                                            Y02751*/ 09555000
*                                                                  2304 09556000
*     DO;                           /* INITIALIZE IT                 */ 09557000
*/*                                                            Y02751*/ 09558000
*                                                                  2305 09559000
*       NMSGEFLG='1'B;              /* TURN ON SWITCH TO INDICATE  2305 09560000
*                                      THIS MESSAGE IS INITIALIZED   */ 09561000
         OI    NMSGEFLG,B'00100000'                                2305 09562000
*/*                                                            Y02751*/ 09563000
*                                                                  2306 09564000
*       NPMSGPTR=ADDR(MSGE);        /* PUT VIRT. ADDR. OF THIS     2306 09565000
*                                      MESSAGE IN NEXT SLOT OF     2306 09566000
*                                      MESSAGE PARAM. LIST.          */ 09567000
         L     @02,NMSGPLBA                                        2306 09568000
         LA    @15,MSGE                                            2306 09569000
         ST    @15,NPMSGPTR(,@02)                                  2306 09570000
*/*                                                            Y02751*/ 09571000
*                                                                  2307 09572000
*       NMSGPLBA=NMSGPLBA           /* UPDATE BASE POINTER FOR MAP OF*/ 09573000
*           +LENGTH(NPMSGPTR);      /* AN ENTRY IN MESSAGE PARAM.  2307 09574000
*                                      LIST TO NEXT ENTRY IN THE   2307 09575000
*                                      LIST.                         */ 09576000
         AH    @02,@CH00062                                        2307 09577000
         ST    @02,NMSGPLBA                                        2307 09578000
*/*                                                            Y02751*/ 09579000
*                                                                  2308 09580000
*     END;                                                         2308 09581000
*   ELSE                            /* IF THIS MESSAGE IS INITIALIZED*/ 09582000
*/*                                                            Y02751*/ 09583000
*                                                                  2309 09584000
*     NMSGCOMA=NP0COMMA;            /* MOVE IN A COMMA TO SEPARATE 2309 09585000
*                                      THIS CPU ADDR. FROM THE PREV.    09586000
*                                      ONE                           */ 09587000
         B     @RC02303                                            2309 09588000
@RF02303 L     @02,NCPUAFME                                        2309 09589000
         MVC   NMSGCOMA(1,@02),NP0COMMA                            2309 09590000
*/*                                                            Y02751*/ 09591000
*                                                                  2310 09592000
*   NCPACPUA=NPCURCPU;              /* MOVE CURR. CPU ADDR. INTO WORK   09593000
*                                      AREA.                         */ 09594000
@RC02303 MVC   NCPACPUA(2),NPCURCPU                                2310 09595000
*/*                                                            Y02751*/ 09596000
*                                                                  2311 09597000
*   UNPK(NCPATRAN,NCPACONV);        /* UNPACK THE 2 BYTE CPU ADDR. 2311 09598000
*                                      (PLUS A LOW ORDER PAD BYTE) 2311 09599000
*                                      INTO ANOTHER WORK AREA.       */ 09600000
         UNPK  NCPATRAN(5),NCPACONV(3)                             2311 09601000
*/*                                                            Y02751*/ 09602000
*                                                                  2312 09603000
*   TR(NCPATRCP,NP0BATAB);          /* TRANSLATE THE LOW ORDER 2   2312 09604000
*                                      BYTES OF THE CPU ADDR. INTO 2312 09605000
*                                      EBCDIC                        */ 09606000
         LA    @02,NP0TRTAB                                        2312 09607000
         AL    @02,@CF05595                                        2312 09608000
         TR    NCPATRCP(2),NP0BATAB(@02)                           2312 09609000
*/*                                                            Y02751*/ 09610000
*                                                                  2313 09611000
*   NMSGCPUA=NCPATRCP;              /* MOVE THOSE 2 BYTES INTO THE 2313 09612000
*                                      MESSAGE.                      */ 09613000
         L     @02,NCPUAFME                                        2313 09614000
         MVC   NMSGCPUA(2,@02),NCPATRCP                            2313 09615000
*/*                                                            Y02751*/ 09616000
*                                                                  2314 09617000
*   NCPUAFME=NCPUAFME               /* UPDATE POINTER TO NEXT 'CPU   */ 09618000
*       +LENGTH(NMSGCPAD);          /* ADDR.' FIELD IN THIS MESSAGE  */ 09619000
         AH    @02,@CH00301                                        2314 09620000
         ST    @02,NCPUAFME                                        2314 09621000
*/*                                                            Y02751*/ 09622000
*                                                                  2315 09623000
*   END NP0MSGE;                                                   2315 09624000
@EL00008 DS    0H                                                  2315 09625000
@EF00008 DS    0H                                                  2315 09626000
@ER00008 LM    @14,@12,12(@13)                                     2315 09627000
         BR    @14                                                 2315 09628000
*NP0MSGF:                                                          2316 09629000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2316 09630000
*                                                                  2316 09631000
NP0MSGF  STM   @14,@12,12(@13)                                     2316 09632000
*/*                                                                2317 09633000
**********************************************************************  09634000
*                                                                  2317 09635000
*   FUNCTION= - SETS UP MESSAGE F IF THERE IS LESS THAT 768K OF    2317 09636000
*               ONLINE REAL STORAGE.                               2317 09637000
*             - THIS SITUATION IS DETERMINED BY CHECKING THE HIGH  2317 09638000
*               STORAGE VALUE PASSED TO IEAVNIP0 BY IEAIPL00 (IF   2317 09639000
*               IT IS A UNI-PROCESSOR CONFIGURATION) OR BY         2317 09640000
*               CHECKING THE HIGH STORAGE VALUE FOUND BY IEAVNIP0'S     09641000
*               STORAGE SCAN ROUTINE (IF IT IS A MULTI-PROCESSOR   2317 09642000
*               CONFIGURATION                                      2317 09643000
*                                                                  2317 09644000
*      OPERATION= - PUTS THE VIRTUAL ADDRESS OF 'MESSAGE F' IN THE NEXT 09645000
*                   SLOT OF THE MESSAGE PARAMETER LIST             2317 09646000
*                 - UPDATES THE BASE POINTER FOR A MAP OF AN ENTRY IN   09647000
*                   THE MESSAGE PARAMETER LIST TO THE NEXT SLOT    2317 09648000
*                 - CONVERTS THE REAL STORAGE SIZE FROM BYTES TO 'K'    09649000
*                 - UNPACKS THE SIZE (IN 'K')                      2317 09650000
*                 - CONVERTS THE SIZE TO EBCDIC                    2317 09651000
*                 - MOVES THE EBCDIC SIZE INTO THE MESSAGE         2317 09652000
*                 - RETURNS TO CALLER                              2317 09653000
**********************************************************************  09654000
*                                                                    */ 09655000
*                                                                  2317 09656000
*   NPMSGPTR=ADDR(MSGF);            /* PUT VIRT. ADDR. OF THIS     2317 09657000
*                                      MESSAGE IN MESSAGE PARAM. LIST*/ 09658000
         L     @02,NMSGPLBA                                        2317 09659000
         LA    @15,MSGF                                            2317 09660000
         ST    @15,NPMSGPTR(,@02)                                  2317 09661000
*   NMSGPLBA=NMSGPLBA               /* UPDATE BASE POINTER FOR MAP OF*/ 09662000
*       +LENGTH(NPMSGPTR);          /* AN ENTRY IN MESSAGE PARAM.  2318 09663000
*                                      LIST TO NEXT ENTRY IN THE   2318 09664000
*                                      LIST.                         */ 09665000
         AH    @02,@CH00062                                        2318 09666000
         ST    @02,NMSGPLBA                                        2318 09667000
*   RFY                                                            2319 09668000
*    (CVDREG) RSTD;                                                2319 09669000
*   CVDREG=NP0STSZ/1024;            /* CONVERT REAL STORAGE SIZE TO     09670000
*                                      'K' AND PUT IN A REG.         */ 09671000
         L     CVDREG,NP0STSZ                                      2320 09672000
         SRL   CVDREG,10                                           2320 09673000
*   CVD(CVDREG,NOLSCONV);           /* CONVERT SIZE, IN HEX, TO    2321 09674000
*                                      PACKED DECIMAL                */ 09675000
         CVD   CVDREG,NOLSCONV                                     2321 09676000
*   UNPK(NOLSUNPK,NOLSSTOR);        /* UNPACK LOW TWO BYTES (3 PACKED   09677000
*                                      DIGITS PLUS SIGN)             */ 09678000
         UNPK  NOLSUNPK(3),NOLSSTOR(2)                             2322 09679000
*   NOLSLOB=NOLSLOB|SIGNMASK;       /* CONVERT SIGN TO ZONE IN THE 2323 09680000
*                                      UNPACKED NUMBER               */ 09681000
         OC    NOLSLOB(1),SIGNMASK                                 2323 09682000
*   MSGFSIZE=NOLSUNPK;              /* PUT SIZE, IN DECIMAL (AND IN     09683000
*                                      EBCDIC) IN THE MESSAGE        */ 09684000
         MVC   MSGFSIZE(3),NOLSUNPK                                2324 09685000
*   RFY                                                            2325 09686000
*    (CVDREG) UNRSTD;                                              2325 09687000
*   END NP0MSGF;                                                   2326 09688000
@EL00009 DS    0H                                                  2326 09689000
@EF00009 DS    0H                                                  2326 09690000
@ER00009 LM    @14,@12,12(@13)                                     2326 09691000
         BR    @14                                                 2326 09692000
*NP0MSGG:                                                          2327 09693000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2327 09694000
*                                                                  2327 09695000
NP0MSGG  STM   @14,@12,12(@13)                                     2327 09696000
*/*                                                                2328 09697000
**********************************************************************  09698000
*                                                                  2328 09699000
*   FUNCTION= - SETS UP 'MESSAGE G' IF THE INSTALLATION SPECIFIED  2328 09700000
*               VALUE FOR THE TOP OF NIP'S V=R REGION IS TOO HIGH, 2328 09701000
*               I.E.,                                              2328 09702000
*               -- IT WILL NOW ALLOW THE REGION TO FIT BELOW THE LOW    09703000
*                  END OF THE MASTER SCHEDULER'S LSQA IN VIRTUAL   2328 09704000
*               -- IT WILL NOT ALLOW THE REGION TO FIT BELOW THE LOW    09705000
*                  UNAVAILABLE ADDRESS IN REAL                     2328 09706000
*               -- IT DOES NOT ALLOW SUFFICIENT REAL STORAGE FOR THE    09707000
*                  MINIMUM NUMBER OF RESERVED (FOR PAGING) FRAMES  2328 09708000
*             - THE MESSAGE NEED ONLY BE SET UP ONCE, HOWEVER SEPARATE  09709000
*               CHECKS ARE MADE FOR EACH OF THE ABOVE SITUATIONS, THUS  09710000
*               A SWITCH IS USED TO AVOID DUPLICATION OF THIS      2328 09711000
*               MESSAGE.                                           2328 09712000
*                                                                  2328 09713000
*      OPERATION= - CHECKS IF THIS MESSAGE IS NOT SET UP           2328 09714000
*                 - IT IT IS SET UP, EXITS                         2328 09715000
*                 - IF IT IS NOT SET UP,                           2328 09716000
*                 - TURNS ON A FLAG INDICATING IT IS SET UP        2328 09717000
*                 - PUTS THE VIRTUAL ADDRESS OF 'MESSAGE G' IN THE NEXT 09718000
*                   SLOT IN THE MESSAGE PARAMETER LIST             2328 09719000
*                 - UPDATES THE BASE POINTER FOR A MAP OF AN ENTRY IN   09720000
*                   THE MESSAGE PARAMETER LIST TO THE NEXT SLOT    2328 09721000
*                 - RETURNS TO CALLER                              2328 09722000
*                                                                  2328 09723000
**********************************************************************  09724000
*                                                                    */ 09725000
*                                                                  2328 09726000
*   IF NMSGGFLG='0'B                /* CHECK IF THIS MESSAGE IS NOT     09727000
*                                      SET UP                        */ 09728000
*     THEN                          /* IF IT IS NOT SET UP, THEN,    */ 09729000
         TM    NMSGGFLG,B'00010000'                                2328 09730000
         BNZ   @RF02328                                            2328 09731000
*     DO;                           /* SET IT UP                     */ 09732000
*       NMSGGFLG='1'B;              /* TURN ON SWITCH INDICATING THIS   09733000
*                                      MESSAGE IS SET UP.            */ 09734000
         OI    NMSGGFLG,B'00010000'                                2330 09735000
*       NPMSGPTR=ADDR(MSGG);        /* PUT VIRT. ADDR. OF THIS     2331 09736000
*                                      MESSAGE IN MESSAGE PARAM.   2331 09737000
*                                      LIST.                         */ 09738000
         L     @02,NMSGPLBA                                        2331 09739000
         LA    @15,MSGG                                            2331 09740000
         ST    @15,NPMSGPTR(,@02)                                  2331 09741000
*       NMSGPLBA=NMSGPLBA           /* UPDATE BASE POINTER FOR MAP OF*/ 09742000
*           +LENGTH(NPMSGPTR);      /* AN ENTRY IN MESSAGE PARAM.  2332 09743000
*                                      LIST TO NEXT ENTRY IN THE   2332 09744000
*                                      LIST.                         */ 09745000
         AH    @02,@CH00062                                        2332 09746000
         ST    @02,NMSGPLBA                                        2332 09747000
*     END;                                                         2333 09748000
*   ELSE                                                           2334 09749000
*     ;                             /* IF MESSAGE IS SET UP, EXIT    */ 09750000
@RF02328 DS    0H                                                  2335 09751000
*   END NP0MSGG;                                                   2335 09752000
@EL00010 DS    0H                                                  2335 09753000
@EF00010 DS    0H                                                  2335 09754000
@ER00010 LM    @14,@12,12(@13)                                     2335 09755000
         BR    @14                                                 2335 09756000
*NP0MSGH:                                                          2336 09757000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2336 09758000
*                                                                  2336 09759000
NP0MSGH  STM   @14,@12,12(@13)                                     2336 09760000
*/*                                                                2337 09761000
**********************************************************************  09762000
*                                                                  2337 09763000
*   FUNCTION= - SETS UP 'MESSAGE H' IF THE INSTALLATION SPECIFIED  2337 09764000
*               VALUE FOR THE TOP OF NIP'S V=R REGION IS TOO LOW,  2337 09765000
*               I.E., IT DOES NOT ALLOW SUFFICIENT REAL STORAGE    2337 09766000
*               FOR THE MINIMUM NIP V=R REGION.                    2337 09767000
*                                                                  2337 09768000
*      OPERATION= - PUTS THE VIRTUAL ADDRESS OF 'MESSAGE H' IN THE 2337 09769000
*                   NEXT SLOT IN THE MESSAGE PARAMETER LIST        2337 09770000
*                 - UPDATES THE BASE POINTER FOR A MAP OF AN ENTRY IN   09771000
*                   THE MESSAGE PARAMETER LIST TO THE NEXT SLOT    2337 09772000
*                 - RETURNS TO CALLER                              2337 09773000
**********************************************************************  09774000
*                                                                    */ 09775000
*                                                                  2337 09776000
*   NPMSGPTR=ADDR(MSGH);            /* PUT VIRT. ADDR. OF THIS     2337 09777000
*                                      MESSAGE IN MESSAGE PARAM.   2337 09778000
*                                      LIST.                         */ 09779000
         L     @02,NMSGPLBA                                        2337 09780000
         LA    @15,MSGH                                            2337 09781000
         ST    @15,NPMSGPTR(,@02)                                  2337 09782000
*   NMSGPLBA=NMSGPLBA               /* UPDATE BASE POINTER FOR MAP OF*/ 09783000
*       +LENGTH(NPMSGPTR);          /* AN ENTRY IN MESSAGE PARAM.  2338 09784000
*                                      LIST TO NEXT ENTRY IN THE   2338 09785000
*                                      LIST.                         */ 09786000
         AH    @02,@CH00062                                        2338 09787000
         ST    @02,NMSGPLBA                                        2338 09788000
*   END NP0MSGH;                                                   2339 09789000
@EL00011 DS    0H                                                  2339 09790000
@EF00011 DS    0H                                                  2339 09791000
@ER00011 LM    @14,@12,12(@13)                                     2339 09792000
         BR    @14                                                 2339 09793000
*NP0MSGI:                                                          2340 09794000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2340 09795000
*                                                                  2340 09796000
NP0MSGI  STM   @14,@12,12(@13)                                     2340 09797000
*/*                                                                2341 09798000
**********************************************************************  09799000
*                                                                  2341 09800000
*   FUNCTION= - SETS UP 'MESSAGE I' IF 'CVTRSTWD' IS NOT ZERO WHEN 2341 09801000
*               IEAVNIP0 REQUIRES THE RESTART RESOURCE WHICH       2341 09802000
*               IS SERIALIZED BY THAT WORD.                        2341 09803000
*                                                                  2341 09804000
*      OPERATION= - SAVES THE CURRENT CONTENTS OF 'CVTRSTWD'       2341 09805000
*                 - PUTS THE VIRTUAL ADDRESS OF 'MESSAGE I' IN THE 2341 09806000
*                   NEXT SLOT IN THE MESSAGE PARAMETER LIST        2341 09807000
*                 - UPDATES THE BASE POINTER FOR A MAP OF AN ENTRY 2341 09808000
*                   IN THE MESSAGE PARAMETER LIST TO THE NEXT SLOT 2341 09809000
*                 - UNPACKS THE CONTENTS OF 'CVTRSTWD'             2341 09810000
*                 - TRANSLATES THE UNPACKED CONTENTS TO EBCDIC     2341 09811000
*                 - PUTS THE EBCDIC CONTENTS OF 'CVTRSTWD' IN      2341 09812000
*                   MESSAGE I                                      2341 09813000
*                 - RETURNS TO CALLER                              2341 09814000
*                                                                  2341 09815000
**********************************************************************  09816000
*                                                                    */ 09817000
*                                                                  2341 09818000
*   RFY                                                            2341 09819000
*    (ZEROREG) RSTD;                                               2341 09820000
*   NRSTWD=ZEROREG;                 /* SAVE CONTENTS OF 'CVTRSTWD' 2342 09821000
*                                      FIELD. 'CS' INSTR. PUT IT IN     09822000
*                                      THIS REG.                     */ 09823000
         ST    ZEROREG,NRSTWD                                      2342 09824000
*   RFY                                                            2343 09825000
*    (ZEROREG) UNRSTD;                                             2343 09826000
*   NPMSGPTR=ADDR(MSGI);            /* PUT VIRT. ADDR. OF THIS     2344 09827000
*                                      MESSAGE IN NEXT SLOT OF     2344 09828000
*                                      MESSAGE PARAM. LIST           */ 09829000
         L     @02,NMSGPLBA                                        2344 09830000
         LA    @15,MSGI                                            2344 09831000
         ST    @15,NPMSGPTR(,@02)                                  2344 09832000
*   NMSGPLBA=NMSGPLBA               /* UPDATE BASE PTR. FOR MAP OF AN*/ 09833000
*       +LENGTH(NPMSGPTR);          /* ENTRY IN MESSAGE PARAM. LIST     09834000
*                                      TO NEXT ENTRY IN THE LIST     */ 09835000
         AH    @02,@CH00062                                        2345 09836000
         ST    @02,NMSGPLBA                                        2345 09837000
*   UNPK(NRSTTRAN,NRSTCONV);        /* UNPACK 4 BYTE 'CVTRSTWD' (PLUS   09838000
*                                      A LOW ORDER PAD BYTE) INTO  2346 09839000
*                                      ANOTHER WORK AREA             */ 09840000
         UNPK  NRSTTRAN(9),NRSTCONV(5)                             2346 09841000
*   TR(NRSTTRWD,NP0BATAB);          /* TRANSLATE HI 8 BYTES OF     2347 09842000
*                                      UNPACKED DATA TO EBCDIC       */ 09843000
         LA    @02,NP0TRTAB                                        2347 09844000
         AL    @02,@CF05595                                        2347 09845000
         TR    NRSTTRWD(8),NP0BATAB(@02)                           2347 09846000
*   MSGIRSWD=NRSTTRWD;              /* MOVE EBCDIC DATA INTO MSGI    */ 09847000
         MVC   MSGIRSWD(8),NRSTTRWD                                2348 09848000
*   END NP0MSGI;                                                   2349 09849000
*                                                                  2349 09850000
@EL00012 DS    0H                                                  2349 09851000
@EF00012 DS    0H                                                  2349 09852000
@ER00012 LM    @14,@12,12(@13)                                     2349 09853000
         BR    @14                                                 2349 09854000
@PB00012 DS    0H                                                  2350 09855000
*/* *************************ERROR ROUTINES***************************/ 09856000
*/*                                                                  */ 09857000
*/*   NP0NIPLU-WAIT STATE CODE X'31'-THE UCB FOR THE IPL UNIT        */ 09858000
*/*            WAS NOT FOUND.                                        */ 09859000
*/*   NP0NNIPM-WAIT STATE CODE X'32'-MODULE IEAVNIPM WAS NOT         */ 09860000
*/*            FOUND ON A BLDL SEARCH.                               */ 09861000
*/*   NP0BLIOE-WAIT STATE CODE X'33'-I/O ERROR ON BLDL FOR           */ 09862000
*/*            MODULE IEAVNIPM.                                      */ 09863000
*/*   NP0INSRS-WAIT STATE CODE X'38'-INSUFFICIENT REAL STORAGE       */ 09864000
*/*            FOR NIP TO CONTINUE                                   */ 09865000
*/*   NP0BLCPF-WAIT STATE CODE X'45'- A BLDCPOOL SVC HAS RETURNED    */ 09866000
*/*            A CODE INDICATING IT FAILED TO BUILD THE REQUESTED    */ 09867000
*/*            QUICKCELL POOL                                        */ 09868000
*/*   NIPABEND-WAIT STATE CODE X'30'-AN UNEXPECTED TASK ABEND        */ 09869000
*/*            (SVC 13) HAS OCCURRED.                                */ 09870000
*/*   NP0UXPC -WAIT STATE CODE X'46'-AN UNEXPECTED PROGRAM CHECK     */ 09871000
*/*            HAS OCCURRED.                                         */ 09872000
*/*   NP0N370 -WAIT STATE CODE X'34'-THE IPL CPU IS NOT A 370 MODEL. */ 09873000
*/*   NP0NREL -WAIT STATE CODE X'34'-THE IPL CPU DOES NOT HAVE THE   */ 09874000
*/*            RELOCATE FEATURE INSTALLED.                           */ 09875000
*/*   NP0NIPK -WAIT STATE CODE X'34'-THE IPL CPU DOES NOT HAVE THE   */ 09876000
*/*            IPK OR SPKA INSTRUCTIONS INSTALLED                    */ 09877000
*/*   NP0NCS  -WAIT STATE CODE X'34'-THE IPL CPU DOES NOT HAVE THE   */ 09878000
*/*            CS OR CDS INSTRUCTIONS INSTALLED                      */ 09879000
*/*   NP0RSME -WAIT STATE CODE X'48'-THE IEAVPCB SUBROUTINE          */ 09880000
*/*            RETURNED AN UN-DEFINED RETURN CODE.                   */ 09881000
*/*   NP0NSYNC-WAIT STATE CODE X'5A'-THE SYNCHRONIZATION FLAG WAS    */ 09882000
*/*            NOT SET BY THE SIGNALLING CPU (THE IPL CPU)           */ 09883000
*/*   NP0SRNAW-WAIT STATE CODE X'5B'-THE SIGNALLED CPU (A NON-IPL    */ 09884000
*/*            CPU) IS A RUN AAWAY                                   */ 09885000
*/*   NP0BLDLE-WAIT STATE CODE X'59'-THE BLDL SVC RETURNED AN        */ 09886000
*/*            UNDEFINED RETURN CODE                                 */ 09887000
*/*   NP0SPSAE-WAIT STATE CODE X'58'-THE IEAVSPSA SUBROUTINE         */ 09888000
*/*            RETURNED A N0N-ZERO RETURN CODE                       */ 09889000
*/*   NP0RTP01                                                       */ 09890000
*/*     THRU                                                         */ 09891000
*/*   NP0RTP15-WAIT STATE CODE X'64'-A CALL HAS BEEN MADE TO AN      */ 09892000
*/*            RTM ROUTINE BEFORE THEY WERE INITIALIZED              */ 09893000
*/*                                                                  */ 09894000
*/*                                                                  */ 09895000
*/* ******************************************************************/ 09896000
*                                                                  2350 09897000
*   /*****************************************************************/ 09898000
*   /*                                                               */ 09899000
*   /* NO IPL UNIT UCB                                               */ 09900000
*   /*                                                               */ 09901000
*   /*****************************************************************/ 09902000
*                                                                  2350 09903000
*NP0NIPLU:                          /* ERROR-NO IPL UNIT UCB         */ 09904000
*   NVTFLWSC=NVTFLWNU;              /* INDICATE NO IPL UNIT UCB      */ 09905000
NP0NIPLU MVI   NVTFLWSC,X'31'                                      2350 09906000
*   LPSW(NVTWTPSW);                                                2351 09907000
*                                                                  2351 09908000
         LPSW  NVTWTPSW                                            2351 09909000
*   /*****************************************************************/ 09910000
*   /*                                                               */ 09911000
*   /* ERROR- NO IEAVNIPM FOUND BY BLDL                              */ 09912000
*   /*                                                               */ 09913000
*   /*****************************************************************/ 09914000
*                                                                  2352 09915000
*NP0NNIPM:                          /* ERROR-NO NIPM ON BLDL         */ 09916000
*   NVTIDPSW=NP0NPMID;              /* INDICATE NIPM NOT FOUND       */ 09917000
NP0NNIPM MVC   NVTIDPSW(2),NP0NPMID                                2352 09918000
*   NVTFLWSC=NVTFLWNN;              /* UNSUCCESSFUL SEARCH CODE      */ 09919000
         MVI   NVTFLWSC,X'32'                                      2353 09920000
*   LPSW(NVTWTPSW);                                                2354 09921000
*                                                                  2354 09922000
         LPSW  NVTWTPSW                                            2354 09923000
*   /*****************************************************************/ 09924000
*   /*                                                               */ 09925000
*   /* ERROR- I/O ERROR ON BLDL                                      */ 09926000
*   /*                                                               */ 09927000
*   /*****************************************************************/ 09928000
*                                                                  2355 09929000
*NP0BLIOE:                          /* ERROR-BLDL I/O ERROR          */ 09930000
*   NVTIDPSW=NP0NPMID;              /* INDICATE NIPM NOT FOUND       */ 09931000
NP0BLIOE MVC   NVTIDPSW(2),NP0NPMID                                2355 09932000
*   NVTFLWSC=NVTFLWBN;              /* BLDL I/O ERROR CODE           */ 09933000
         MVI   NVTFLWSC,X'33'                                      2356 09934000
*   LPSW(NVTWTPSW);                                                2357 09935000
*                                                                  2357 09936000
         LPSW  NVTWTPSW                                            2357 09937000
*   /*****************************************************************/ 09938000
*   /*                                                               */ 09939000
*   /* ERROR- INSUFFICIENT SPACE                                     */ 09940000
*   /*                                                               */ 09941000
*   /*****************************************************************/ 09942000
*                                                                  2358 09943000
*NP0INSRS:                          /* ERROR-INSUFFICIENT SPACE      */ 09944000
*   NVTFLWSC=NVTFLWRS;              /* NOT ENOUGH SPACE FOR SQA      */ 09945000
NP0INSRS MVI   NVTFLWSC,X'38'                                      2358 09946000
*   LPSW(NVTWTPSW);                 /* REQUIREMENTS.                 */ 09947000
*                                                                  2359 09948000
         LPSW  NVTWTPSW                                            2359 09949000
*   /*****************************************************************/ 09950000
*   /*                                                               */ 09951000
*   /* ERROR- BLDLCPOOL FAILURE                                      */ 09952000
*   /*                                                               */ 09953000
*   /*****************************************************************/ 09954000
*                                                                  2360 09955000
*NP0BLCPF:                          /* ERROR-BLDCPOOL FAILURE        */ 09956000
*   NVTFLWSC=NVTF0BCP;              /* BLDCPOOL FAILED.              */ 09957000
NP0BLCPF MVI   NVTFLWSC,X'45'                                      2360 09958000
*   LPSW(NVTWTPSW);                                                2361 09959000
*                                                                  2361 09960000
         LPSW  NVTWTPSW                                            2361 09961000
*   /*****************************************************************/ 09962000
*   /*                                                               */ 09963000
*   /* ERROR- NON SYSTEM 370 CPU                                     */ 09964000
*   /*                                                               */ 09965000
*   /*****************************************************************/ 09966000
*                                                                  2362 09967000
*NP0N370:                                                          2362 09968000
*   NVTFLWSC=NVTFLWCP;              /* CPU IS NOT 370 MODEL.         */ 09969000
NP0N370  MVI   NVTFLWSC,X'34'                                      2362 09970000
*   LPSW(NVTWTPSW);                                                2363 09971000
*                                                                  2363 09972000
         LPSW  NVTWTPSW                                            2363 09973000
*   /*****************************************************************/ 09974000
*   /*                                                               */ 09975000
*   /* ERROR- DYNAMIC ADDRESS TRANSLATION FEATURE NOT AVAILABLE      */ 09976000
*   /*                                                               */ 09977000
*   /*****************************************************************/ 09978000
*                                                                  2364 09979000
*NP0NREL:                                                          2364 09980000
*   NVTFLWSC=NVTFLWCP;              /* CPU DOES NOT HAVE RELOCATE THE   09981000
*                                      FEATURE INSTALLED. .          */ 09982000
NP0NREL  MVI   NVTFLWSC,X'34'                                      2364 09983000
*   LPSW(NVTWTPSW);                                                2365 09984000
*                                                                  2365 09985000
         LPSW  NVTWTPSW                                            2365 09986000
*   /*****************************************************************/ 09987000
*   /*                                                               */ 09988000
*   /* ERROR- IPK/SPKA FEATURE NOT INSTALLED                         */ 09989000
*   /*                                                               */ 09990000
*   /*****************************************************************/ 09991000
*                                                                  2366 09992000
*NP0NIPK:                                                          2366 09993000
*   NVTFLWSC=NVTFLWCP;              /* CPU DOES NOT HAVE THE       2366 09994000
*                                      'IPK'/'SPKA' INSTRUCTIONS     */ 09995000
NP0NIPK  MVI   NVTFLWSC,X'34'                                      2366 09996000
*   LPSW(NVTWTPSW);                 /* LOAD WAIT STATE PSW           */ 09997000
*                                                                  2367 09998000
         LPSW  NVTWTPSW                                            2367 09999000
*   /*****************************************************************/ 10000000
*   /*                                                               */ 10001000
*   /* ERROR- CONDITIONAL SWAPPING INSTRUCTIONS NOT INSTALLED        */ 10002000
*   /*                                                               */ 10003000
*   /*****************************************************************/ 10004000
*                                                                  2368 10005000
*NP0NCS:                                                           2368 10006000
*   NVTFLWSC=NVTFLWCP;              /* CPU DOES NOT HAVE THE       2368 10007000
*                                      'CS'/'CDS' INSTRUCTIONS       */ 10008000
NP0NCS   MVI   NVTFLWSC,X'34'                                      2368 10009000
*   LPSW(NVTWTPSW);                 /* LOAD WAIT STATE PSW           */ 10010000
*                                                                  2369 10011000
         LPSW  NVTWTPSW                                            2369 10012000
*   /*****************************************************************/ 10013000
*   /*                                                               */ 10014000
*   /* ERROR- UNDEFINED RETURN CODE FROM RSM SPACE ALLOCATION        */ 10015000
*   /*                                                               */ 10016000
*   /*****************************************************************/ 10017000
*                                                                  2370 10018000
*NP0RSME:                           /* COME HERE IF RSM'S SPACE    2370 10019000
*                                      ALLOCATION ROUTINE 'IEAVPCB'     10020000
*                                      RETURNS AN UN-DEFINED RETURN     10021000
*                                      CODE.                         */ 10022000
*   NVTFLWSC=NVTWCN18;              /* PUT WAIT STATE CODE IN WAIT 2370 10023000
*                                      STATE PSW. X'48'              */ 10024000
NP0RSME  MVI   NVTFLWSC,X'48'                                      2370 10025000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW.                */ 10026000
*                                                                  2371 10027000
         LPSW  NVTWTPSW                                            2371 10028000
*   /*****************************************************************/ 10029000
*   /*                                                               */ 10030000
*   /* ERROR- CPU ACTIVATION FAILURE                                 */ 10031000
*   /*                                                               */ 10032000
*   /*****************************************************************/ 10033000
*                                                                  2372 10034000
*NP0NSYNC:                          /* COME HERE IF SYNCHRONIZATION     10035000
*                                      BIT IS NOT SET BY IPL CPU     */ 10036000
*/*                                                            Y02751*/ 10037000
*                                                                  2372 10038000
*   NVTFLWSC=NVTWCN16;              /* PUT WAIT STATE CODE IN WAIT 2372 10039000
*                                      STATE PSW                     */ 10040000
NP0NSYNC MVI   NVTFLWSC,X'5A'                                      2372 10041000
*/*                                                            Y02751*/ 10042000
*                                                                  2373 10043000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10044000
*                                                                  2373 10045000
         LPSW  NVTWTPSW                                            2373 10046000
*   /*****************************************************************/ 10047000
*   /*                                                               */ 10048000
*   /* ERROR- RUNAWAY CPU ERROR TRAP                                 */ 10049000
*   /*                                                               */ 10050000
*   /*****************************************************************/ 10051000
*                                                                  2374 10052000
*NP0SRNAW:                          /* COME HERE TO STOP A RUN AWAY     10053000
*                                      CPU                           */ 10054000
*/*                                                            Y02751*/ 10055000
*                                                                  2374 10056000
*   NVTFLWSC=NVTWCN15;              /* PUT WAIT STATE CODE IN WAIT 2374 10057000
*                                      STATE PSW.                    */ 10058000
NP0SRNAW MVI   NVTFLWSC,X'5B'                                      2374 10059000
*/*                                                            Y02751*/ 10060000
*                                                                  2375 10061000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW.                */ 10062000
*                                                                  2375 10063000
         LPSW  NVTWTPSW                                            2375 10064000
*   /*****************************************************************/ 10065000
*   /*                                                               */ 10066000
*   /* ERROR- INVALID RETURN CODE FROM BLDL                          */ 10067000
*   /*                                                               */ 10068000
*   /*****************************************************************/ 10069000
*                                                                  2376 10070000
*NP0BLDLE:                          /* COME HERE IF BLDL RETURNS AN     10071000
*                                      INVALID RETURN CODE           */ 10072000
*   NVTFLWSC=NVTWCN17;              /* PUT WAIT STATE CODE IN WAIT 2376 10073000
*                                      STATE PSW                     */ 10074000
NP0BLDLE MVI   NVTFLWSC,X'59'                                      2376 10075000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10076000
         LPSW  NVTWTPSW                                            2377 10077000
*/* ******************************************************************/ 10078000
*/*                  ABEND TRAP ROUTINE                              */ 10079000
*/* ******************************************************************/ 10080000
*                                                                  2378 10081000
*   RFY                                                            2378 10082000
*    (ABBASE,                                                      2378 10083000
*     R1) RSTD;                                                    2378 10084000
*   GEN(USING NIPABEND,ABBASE);     /* ENTERED WITH BASE REG OF 6, 2379 10085000
*                                      THAT IS, REG 6 POINTS TO    2379 10086000
*                                      NIPABEND                      */ 10087000
         USING NIPABEND,ABBASE                                          10088000
*   GEN(DROP    RDATA);             /* FORCE ASSEMBLER TO USE REG. 2380 10089000
*                                      ABBASE FOR CODE IN THIS     2380 10090000
*                                      SUBRTN.                       */ 10091000
         DROP    RDATA                                                  10092000
*NIPABEND:                          /* ABEND TRAP ROUTINE ENTRY      */ 10093000
*/* ******************************************************************/ 10094000
*/*  TEST TCBABTRM FLAG. IF ON COMPLETION CODE IS IN TCBCMP.         */ 10095000
*/*  IF OFF, COMPLETION CODE IS IN REGISTER 1.                       */ 10096000
*/* ******************************************************************/ 10097000
*                                                                  2381 10098000
*   IF TCBABTRM='1'B                /* IS TCB ABTERM FLAG ON ?       */ 10099000
*     THEN                          /* IF SO, COMPL. CODE IN TCB     */ 10100000
NIPABEND L     @07,TCBPTR                                          2381 10101000
         TM    TCBABTRM(@07),B'00100000'                           2381 10102000
         BNO   @RF02381                                            2381 10103000
*     R1=TCBCMP;                    /* LOAD COMPL. CODE FROM TCB     */ 10104000
         L     R1,TCBCMP(,@07)                                     2382 10105000
*   GEN(SLL R1,8);                  /* SHIFT TO HIGH END OF R1       */ 10106000
@RF02381 DS    0H                                                  2383 10107000
         SLL R1,8                                                       10108000
*   GEN(SRL R1,4);                  /* SHIFT BACK 4 BITS             */ 10109000
         SRL R1,4                                                       10110000
*   NVTWPSW2=R1;                    /* STORE COMPL. CODE IN NVT      */ 10111000
         ST    R1,NVTWPSW2                                         2385 10112000
*   NVTFLWSC=NVTFLWAB;              /* INDICATE TASK ABEND           */ 10113000
         MVI   NVTFLWSC,X'30'                                      2386 10114000
*   LPSW(NVTWTPSW);                 /* LOAD DISABLED WAIT STATE PSW  */ 10115000
         LPSW  NVTWTPSW                                            2387 10116000
*   RFY                                                            2388 10117000
*    (R1,                                                          2388 10118000
*     ABBASE) UNRSTD;                                              2388 10119000
*   GEN(USING     @DATA,RDATA);     /* REINSTATE BASE REG 11         */ 10120000
         USING     @DATA,RDATA                                          10121000
*   GEN(DROP    ABBASE);                                           2390 10122000
*                                                                  2390 10123000
         DROP    ABBASE                                                 10124000
*   /*****************************************************************/ 10125000
*   /*                                                               */ 10126000
*   /* STORAGE SCAN PROGRAM CHECK TRAP. CHECK FOR ADDRESSING         */ 10127000
*   /*                                                               */ 10128000
*   /*****************************************************************/ 10129000
*                                                                  2391 10130000
*NP0SSRCV:                          /* STORAGE SCAN RECOVERY RTN     */ 10131000
*   IF NP0INTCD='05'X               /* IF P/C WAS FOR AN ADDR      2391 10132000
*                                      EXCEPTION                     */ 10133000
*     THEN                          /* CONTINUE                      */ 10134000
NP0SSRCV L     @02,NPSAPTR                                         2391 10135000
         CLI   NP0INTCD+40(@02),X'05'                              2391 10136000
         BE    @RT02391                                            2391 10137000
*     GOTO NP0TPCHK;                                               2392 10138000
*   ELSE                            /* FOR ANY OTHER P/C - GO TO   2393 10139000
*                                      RTNFOR                        */ 10140000
*     GOTO NP0UXPC;                 /* UNEXPECTED P/C'S              */ 10141000
*                                                                  2393 10142000
         B     NP0UXPC                                             2393 10143000
*   /*****************************************************************/ 10144000
*   /*                                                               */ 10145000
*   /* ERROR- M.P. INSTRUCTION TRAP                                  */ 10146000
*   /*                                                               */ 10147000
*   /*****************************************************************/ 10148000
*                                                                  2394 10149000
*NP0NMP:                            /* NON-M.P. ROUTINE - COME HERE     10150000
*                                      IF STAP INSTR GENERATES A P/C */ 10151000
*   PCBR10=ADDR(NP0UXPC);           /* RESET P/C TRAP TO UNEXPECTED     10152000
*                                      P/C RTN                       */ 10153000
NP0NMP   LA    PCBR10,NP0UXPC                                      2394 10154000
*   CVTEORM=NP0STSZ                 /* PUT HI VALID REAL ADDR IN CVT */ 10155000
*       -1;                                                        2395 10156000
         L     @02,NP0STSZ                                         2395 10157000
         BCTR  @02,0                                               2395 10158000
         ST    @02,CVTEORM(,RCVT)                                  2395 10159000
*   NP0EORM=CVTEORM;                /* SAVE SAME ADDR IN NIP0 S/A    */ 10160000
         ST    @02,NP0EORM                                         2396 10161000
*   GOTO NP0SS1;                                                   2397 10162000
*                                                                  2397 10163000
         B     NP0SS1                                              2397 10164000
*   /*****************************************************************/ 10165000
*   /*                                                               */ 10166000
*   /* ERROR- UNEXPECTED PROGRAM CHECK TRAP                          */ 10167000
*   /*                                                               */ 10168000
*   /*****************************************************************/ 10169000
*                                                                  2398 10170000
*NP0UXPC:                                                          2398 10171000
*   NVTFLWSC=NVTF0UPC;              /* UN EXPECTED PROG. CHECK       */ 10172000
NP0UXPC  MVI   NVTFLWSC,X'46'                                      2398 10173000
*   LPSW(NVTWTPSW);                                                2399 10174000
*                                                                  2399 10175000
         LPSW  NVTWTPSW                                            2399 10176000
*   /*****************************************************************/ 10177000
*   /*                                                               */ 10178000
*   /* BR 10 INSTRUCTION                                             */ 10179000
*   /*                                                               */ 10180000
*   /*****************************************************************/ 10181000
*                                                                  2400 10182000
*NP0BR10:                           /* A 'BR 10' INSTR               */ 10183000
*   BC(15,PCBR10);                                                 2400 10184000
*                                                                  2400 10185000
NP0BR10  BCR   15,PCBR10                                           2400 10186000
*/********************************************************************/ 10187000
*/*  THIS ROUTINE IS A TRAP FOR 'SVC 60' REQUESTS MADE BEFORE THAT   */ 10188000
*/*  SVC ROUTINE IS LOADED INTO THE LINK PACK AREA AND ITS TRUE      */ 10189000
*/*  ADDRESS PUT IN THE CVT FIELD 'CVTSV60'                          */ 10190000
*/********************************************************************/ 10191000
*                                                                  2401 10192000
*NSVC60TP:                                                         2401 10193000
*   GEN(SR     15,15);              /* CLEAR REG. 15 TO ZEROS        */ 10194000
NSVC60TP SR     15,15                                                   10195000
*   GEN(BR     14);                 /* RETURN TO CALLER              */ 10196000
*                                                                  2402 10197000
         BR     14                                                      10198000
*   /*****************************************************************/ 10199000
*   /*                                                               */ 10200000
*   /* ERROR- BAD RETURN CODE FROM IEAVSPSA RTN                      */ 10201000
*   /*                                                               */ 10202000
*   /*****************************************************************/ 10203000
*                                                                  2403 10204000
*NP0SPSAE:                          /* COME TO THIS ROUTINE IF     2403 10205000
*                                      'IEAVSPSA' ROUTINE RETURNS A     10206000
*                                      NON-ZERO RETURN CODE          */ 10207000
*   NVTFLWSC=NVTWCN19;              /* ERROR IN 'IEAVSPSA'           */ 10208000
NP0SPSAE MVI   NVTFLWSC,X'58'                                      2403 10209000
*   LPSW(NVTWTPSW);                 /* LOAD A WAIT STATE PSW         */ 10210000
*                                                                  2404 10211000
         LPSW  NVTWTPSW                                            2404 10212000
*   /*****************************************************************/ 10213000
*   /*                                                               */ 10214000
*   /* TRAP ROUTINES FOR RTM CALLS                                   */ 10215000
*   /*                                                               */ 10216000
*   /*****************************************************************/ 10217000
*                                                                  2405 10218000
*NP0RTP01:                                                         2405 10219000
*   ENTRY;                                                         2405 10220000
@EP02405 DS    0H                                                  2406 10221000
*   NVTIDPSW=1;                     /* PUT INDEX INDICATING TABLE  2406 10222000
*                                      ENTRY IN WAIT STATE PSW       */ 10223000
         MVC   NVTIDPSW(2),@CH00070                                2406 10224000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2407 10225000
*                                      STATE PSW                     */ 10226000
         MVI   NVTFLWSC,X'64'                                      2407 10227000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10228000
         LPSW  NVTWTPSW                                            2408 10229000
*NP0RTP02:                                                         2409 10230000
*   ENTRY;                                                         2409 10231000
@EP02409 DS    0H                                                  2410 10232000
*   NVTIDPSW=2;                     /* PUT INDEX INDICATING TABLE  2410 10233000
*                                      ENTRY IN WAIT STATE PSW       */ 10234000
         MVC   NVTIDPSW(2),@CH00082                                2410 10235000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2411 10236000
*                                      STATE PSW                     */ 10237000
         MVI   NVTFLWSC,X'64'                                      2411 10238000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10239000
         LPSW  NVTWTPSW                                            2412 10240000
*NP0RTP03:                                                         2413 10241000
*   ENTRY;                                                         2413 10242000
@EP02413 DS    0H                                                  2414 10243000
*   NVTIDPSW=3;                     /* PUT INDEX INDICATING TABLE  2414 10244000
*                                      ENTRY IN WAIT STATE PSW       */ 10245000
         MVC   NVTIDPSW(2),@CH00301                                2414 10246000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2415 10247000
*                                      STATE PSW                     */ 10248000
         MVI   NVTFLWSC,X'64'                                      2415 10249000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10250000
         LPSW  NVTWTPSW                                            2416 10251000
*NP0RTP04:                                                         2417 10252000
*   ENTRY;                                                         2417 10253000
@EP02417 DS    0H                                                  2418 10254000
*   NVTIDPSW=4;                     /* PUT INDEX INDICATING TABLE  2418 10255000
*                                      ENTRY IN WAIT STATE PSW       */ 10256000
         MVC   NVTIDPSW(2),@CH00062                                2418 10257000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2419 10258000
*                                      STATE PSW                     */ 10259000
         MVI   NVTFLWSC,X'64'                                      2419 10260000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10261000
         LPSW  NVTWTPSW                                            2420 10262000
*NP0RTP05:                                                         2421 10263000
*   ENTRY;                                                         2421 10264000
@EP02421 DS    0H                                                  2422 10265000
*   NVTIDPSW=5;                     /* PUT INDEX INDICATING TABLE  2422 10266000
*                                      ENTRY IN WAIT STATE PSW       */ 10267000
         MVC   NVTIDPSW(2),@CH00843                                2422 10268000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2423 10269000
*                                      STATE PSW                     */ 10270000
         MVI   NVTFLWSC,X'64'                                      2423 10271000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10272000
         LPSW  NVTWTPSW                                            2424 10273000
*NP0RTP06:                                                         2425 10274000
*   ENTRY;                                                         2425 10275000
@EP02425 DS    0H                                                  2426 10276000
*   NVTIDPSW=6;                     /* PUT INDEX INDICATING TABLE  2426 10277000
*                                      ENTRY IN WAIT STATE PSW       */ 10278000
         MVC   NVTIDPSW(2),@CH00727                                2426 10279000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2427 10280000
*                                      STATE PSW                     */ 10281000
         MVI   NVTFLWSC,X'64'                                      2427 10282000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10283000
         LPSW  NVTWTPSW                                            2428 10284000
*NP0RTP07:                                                         2429 10285000
*   ENTRY;                                                         2429 10286000
@EP02429 DS    0H                                                  2430 10287000
*   NVTIDPSW=7;                     /* PUT INDEX INDICATING TABLE  2430 10288000
*                                      ENTRY IN WAIT STATE PSW       */ 10289000
         MVC   NVTIDPSW(2),@CH00797                                2430 10290000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2431 10291000
*                                      STATE PSW                     */ 10292000
         MVI   NVTFLWSC,X'64'                                      2431 10293000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10294000
         LPSW  NVTWTPSW                                            2432 10295000
*NP0RTP08:                                                         2433 10296000
*   ENTRY;                                                         2433 10297000
@EP02433 DS    0H                                                  2434 10298000
*   NVTIDPSW=8;                     /* PUT INDEX INDICATING TABLE  2434 10299000
*                                      ENTRY IN WAIT STATE PSW       */ 10300000
         MVC   NVTIDPSW(2),@CH00068                                2434 10301000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2435 10302000
*                                      STATE PSW                     */ 10303000
         MVI   NVTFLWSC,X'64'                                      2435 10304000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10305000
         LPSW  NVTWTPSW                                            2436 10306000
*NP0RTP09:                                                         2437 10307000
*   ENTRY;                                                         2437 10308000
@EP02437 DS    0H                                                  2438 10309000
*   NVTIDPSW=9;                     /* PUT INDEX INDICATING TABLE  2438 10310000
*                                      ENTRY IN WAIT STATE PSW       */ 10311000
         MVC   NVTIDPSW(2),@CH03699                                2438 10312000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2439 10313000
*                                      STATE PSW                     */ 10314000
         MVI   NVTFLWSC,X'64'                                      2439 10315000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10316000
         LPSW  NVTWTPSW                                            2440 10317000
*NP0RTP10:                                                         2441 10318000
*   ENTRY;                                                         2441 10319000
@EP02441 DS    0H                                                  2442 10320000
*   NVTIDPSW=10;                    /* PUT INDEX INDICATING TABLE  2442 10321000
*                                      ENTRY IN WAIT STATE PSW       */ 10322000
         MVC   NVTIDPSW(2),@CH01918                                2442 10323000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2443 10324000
*                                      STATE PSW                     */ 10325000
         MVI   NVTFLWSC,X'64'                                      2443 10326000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10327000
         LPSW  NVTWTPSW                                            2444 10328000
*NP0RTP11:                                                         2445 10329000
*   ENTRY;                                                         2445 10330000
@EP02445 DS    0H                                                  2446 10331000
*   NVTIDPSW=11;                    /* PUT INDEX INDICATING TABLE  2446 10332000
*                                      ENTRY IN WAIT STATE PSW       */ 10333000
         MVC   NVTIDPSW(2),@CH03707                                2446 10334000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2447 10335000
*                                      STATE PSW                     */ 10336000
         MVI   NVTFLWSC,X'64'                                      2447 10337000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10338000
         LPSW  NVTWTPSW                                            2448 10339000
*NP0RTP12:                                                         2449 10340000
*   ENTRY;                                                         2449 10341000
@EP02449 DS    0H                                                  2450 10342000
*   NVTIDPSW=12;                    /* PUT INDEX INDICATING TABLE  2450 10343000
*                                      ENTRY IN WAIT STATE PSW       */ 10344000
         MVC   NVTIDPSW(2),@CH00724                                2450 10345000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2451 10346000
*                                      STATE PSW                     */ 10347000
         MVI   NVTFLWSC,X'64'                                      2451 10348000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10349000
         LPSW  NVTWTPSW                                            2452 10350000
*NP0RTP13:                                                         2453 10351000
*   ENTRY;                                                         2453 10352000
@EP02453 DS    0H                                                  2454 10353000
*   NVTIDPSW=13;                    /* PUT INDEX INDICATING TABLE  2454 10354000
*                                      ENTRY IN WAIT STATE PSW       */ 10355000
         MVC   NVTIDPSW(2),@CH04725                                2454 10356000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2455 10357000
*                                      STATE PSW                     */ 10358000
         MVI   NVTFLWSC,X'64'                                      2455 10359000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10360000
         LPSW  NVTWTPSW                                            2456 10361000
*NP0RTP14:                                                         2457 10362000
*   ENTRY;                                                         2457 10363000
@EP02457 DS    0H                                                  2458 10364000
*   NVTIDPSW=14;                    /* PUT INDEX INDICATING TABLE  2458 10365000
*                                      ENTRY IN WAIT STATE PSW       */ 10366000
         MVC   NVTIDPSW(2),@CH00707                                2458 10367000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2459 10368000
*                                      STATE PSW                     */ 10369000
         MVI   NVTFLWSC,X'64'                                      2459 10370000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10371000
         LPSW  NVTWTPSW                                            2460 10372000
*NP0RTP15:                                                         2461 10373000
*   ENTRY;                                                         2461 10374000
@EP02461 DS    0H                                                  2462 10375000
*   NVTIDPSW=15;                    /* PUT INDEX INDICATING TABLE  2462 10376000
*                                      ENTRY IN WAIT STATE PSW       */ 10377000
         MVC   NVTIDPSW(2),@CH00123                                2462 10378000
*   NVTFLWSC=NVTWCN11;              /* PUT WAIT STATE CODE IN WAIT 2463 10379000
*                                      STATE PSW                     */ 10380000
         MVI   NVTFLWSC,X'64'                                      2463 10381000
*   LPSW(NVTWTPSW);                 /* LOAD THAT PSW                 */ 10382000
*                                                                  2464 10383000
         LPSW  NVTWTPSW                                            2464 10384000
*   /*****************************************************************/ 10385000
*   /*                                                               */ 10386000
*   /* INCLUDE FETCH CSECT FROM LIBRARY                      @ZM00857*/ 10387000
*   /*                                                               */ 10388000
*   /*****************************************************************/ 10389000
*                                                                  2465 10390000
*   GENERATE DEFS(NP0FTCHB,NP0FTCHE,MINAPNDG,MINAPEND) REFS(CDXLMJP);   10391000
*                                                                  2465 10392000
*/* INCLUDE THE ROUTINE TO ALLOCATE SUPERVISOR ROUTINE WORK/SAVE     */ 10393000
*/* AREAS FOR A CPU.                                                 */ 10394000
*                                                                  2466 10395000
*IEAVSPSA:                                                         2466 10396000
*   PROC(FREEPTR) OPTIONS(NOSAVE(1,15),NOSAVEAREA);                2466 10397000
*                                                                  2466 10398000
         B     @PB00013                                            2466 10399000
IEAVSPSA ST    @14,12(,@13)                                        2466 10400000
         ST    @00,20(,@13)                                        2466 10401000
         STM   @02,@12,28(@13)                                     2466 10402000
         MVC   @PC00013(4),0(@01)                                  2466 10403000
*/********************************************************************/ 10404000
*/*                                                                  */ 10405000
*/*                                                                  */ 10406000
*/********************************************************************/ 10407000
*/*                                                                  */ 10408000
*/* STATUS:   CHANGE LEVEL=001  12/12/74                             */ 10409000
*/*                                                                  */ 10410000
*/* FUNCTION:  1) FOR GETMAIN REQUESTS, TO GET A SA/WA AND VECTOR    */ 10411000
*/*               TABLE AND INITIALIZE IT                            */ 10412000
*/*            2) FOR FREEMAIN REQUESTS, TO FREE A SA/WA AND VECTOR  */ 10413000
*/*               TABLE                                              */ 10414000
*/*            3) FOR FORMAT REQUESTS, TO FORMAT THE SA/WA VECTOR    */ 10415000
*/*               TABLE                                              */ 10416000
*/*                                                                  */ 10417000
*/* ENTRY POINT: IEAVSPSA                                            */ 10418000
*/*                                                                  */ 10419000
*/* INPUT:    REGISTER 1  CONTAINS: 1)ADDRESS TO FREEMAIN, OR        */ 10420000
*/*                                 2)ZERO IF REQUEST FOR GETMAIN    */ 10421000
*/*                                 3)COMPLEMENT FOR FORMAT          */ 10422000
*/*           REGISTER 13 POINTS TO A REGISTER SAVEAREA              */ 10423000
*/*           REGISTER 14 CONTAINS THE RETURN ADDRESS                */ 10424000
*/*           REGISTER 15 CONTAINS THE ENTRY POINT ADDRESS           */ 10425000
*/*                                                                  */ 10426000
*/* OUTPUT:   REGISTER 1  CONTAINS 1)ADDRESS OF VECTOR TABLE         */ 10427000
*/*                                2)ZERO - ON RETURN FROM FREEMAIN  */ 10428000
*/*                                         REQUEST                  */ 10429000
*/*           REGISTER 15 CONTAINS 1)A RETURN CODE OF ZERO, IF NO    */ 10430000
*/*                                  ERROR                           */ 10431000
*/*                                2)A RETURN CODE OF FOUR FOR ERRORS*/ 10432000
*/*                                   FROM AT LEAST ONE OF THESE     */ 10433000
*/*                                   SOURCES:                       */ 10434000
*/*                                  - ISSUING A GETMAIN             */ 10435000
*/*                                  - ISSUING A FREEMAIN            */ 10436000
*/*                                  - ISSUING A SETLOCK TO OBTAIN OR*/ 10437000
*/*                                    FREE SALLOC                   */ 10438000
*/*           REGISTER 14 CONTAINS THE RETURN ADDRESS                */ 10439000
*/*           REGISTER 13 POINTS TO A REGISTER SAVEAREA              */ 10440000
*/*                                                                  */ 10441000
*/* EXTERNAL REFERENCES: NONE.                                       */ 10442000
*/*                                                                  */ 10443000
*/* EXITS:    RETURN TO CALLER VIA A BR 14                           */ 10444000
*/*                                                                  */ 10445000
*/* ERROR CODES:                                                     */ 10446000
*/*           REGISTER 15 CONTAINS THE RETURN CODE                   */ 10447000
*/*                                                                  */ 10448000
*/* TABLES/WORK AREAS: IHAWSAVT                                      */ 10449000
*/* NOTE: THE ROUTINE THAT INCLUDES THIS ROUTINE MUST CONTAIN        */ 10450000
*/*       MAPPING MACROS FOR THE CVT (MARCO: CVT) AND THE PSA        */ 10451000
*/*       (MACRO: IHAPSA).                                           */ 10452000
*/*                                                                  */ 10453000
*/* ATTRIBUTES: SERIALLY REUSABLE                                    */ 10454000
*/*                                                                  */ 10455000
*/* RESOURCES:                                                       */ 10456000
*/*           NONE.                                                  */ 10457000
*/*                                                                  */ 10458000
*/* SVCS:     NONE.  BRANCH ENTRIES TO GETMAIN,FREEMAIN              */ 10459000
*/*                                                                  */ 10460000
*/* MESSAGES: NONE.                                                  */ 10461000
*/*                                                                  */ 10462000
*/* NOTES:                                                           */ 10463000
*/*    THIS ROUTINE INCLUDES THE MAPPING MACRO 'IHAWSAVT' AND        */ 10464000
*/*    SPECIFIES THE MAPPING OF THE GLOBAL WORK/SAVE AREAS, EVEN     */ 10465000
*/*    THOUGH THIS ROUTINE BUILDS THE WORK/SAVE AREAS FOR A CPU.     */ 10466000
*/*    THIS IS BECAUSE THIS ROUTINE USES 'GETMAIN' TO OBTAIN THE     */ 10467000
*/*    SPACE FOR THE WORK/SAVE AREA IT IS BUILDING BUT 'GETMAIN'     */ 10468000
*/*    ITSELF USES THE GLOBAL WORK/SAVE AREAS.                       */ 10469000
*/*    THE MAPPING MACRO FOR THE CPU RELATED WORK/SAVE AREA IS NOT   */ 10470000
*/*    USED IN BUILDING OR INITIALIZING THAT WORK/SAVE AREA BY THIS  */ 10471000
*/*    THIS ROUTINE, THUS THE MAPPING OF THE CPU RELATED WORK/SAVE   */ 10472000
*/*    AREA IS NOT NEEDED BY THIS ROUTINE BUT THE MAPPING OF THE     */ 10473000
*/*    GLOBAL WORK/SAVE AREA IS NEEDED.                              */ 10474000
*/*                                                                  */ 10475000
*/********************************************************************/ 10476000
*                                                                  2467 10477000
*                                                                  2467 10478000
*/* **************************************************************** */ 10479000
*/*                                                                  */ 10480000
*/*            WORK/SAVE AREA VECTOR TABLES (WSAVT)                  */ 10481000
*/*                                                                  */ 10482000
*/*  OS/VS2 RELEASE 4, 07/22/75, LEVEL=2                             */ 10483000
*/*                                                                  */ 10484000
*/*  METHOD OF ACCESS                                                */ 10485000
*/*      PL/S - INCLUDE IHAASXB TO DEFINE ASXBSPSA FOR LOCAL WSAVT.  */ 10486000
*/*             INCLUDE CVT TO DEFINE CVTSPSA FOR GLOBAL WSAVT.      */ 10487000
*/*             INCLUDE IHALCCA TO DEFINE LCCACPUS FOR CPU WSAVT.    */ 10488000
*/*                                                                  */ 10489000
*/*             ALL 3 WSAVT'S ARE MAPPED UNLESS MACRO VARIABLE(S)    */ 10490000
*/*             ARE SET TO NO.  CODING %WSALOCAL='NO' BEFORE INCLUDE */ 10491000
*/*             MEANS THAT A MAPPING OF LOCAL WSAVT WILL NOT BE      */ 10492000
*/*             PRODUCED.  %WSAGLOBL='NO' SUPPRESSES GLOBAL WSAVT    */ 10493000
*/*             MAPPING.  %WSACPU='NO' SUPPRESSES CPU WSAVT MAPPING. */ 10494000
*/*                                                                  */ 10495000
*/*      BAL -  THERE ARE 4 KEYWORD PARAMETERS AS FOLLOWS -          */ 10496000
*/*                                                                  */ 10497000
*/*             1. CLASS=LOCAL/GLOBAL/CPU WITH A DEFAULT OF LOCAL.   */ 10498000
*/*                THIS PARAMETER DETERMINES WHICH WSAVT MAPPING IS  */ 10499000
*/*                PRODUCED.                                         */ 10500000
*/*                                                                  */ 10501000
*/*             2. DSECT=YES/NO WITH A DEFAULT OF YES.  IF YES, A    */ 10502000
*/*                DSECT IS PRODUCED FOR MAPPING REQUESTED BY CLASS  */ 10503000
*/*                PARAMETER.  THE DSECT NAMES ARE -                 */ 10504000
*/*                     WSAL - LOCAL WSAVT                           */ 10505000
*/*                     WSAG - GLOBAL WSAVT                          */ 10506000
*/*                     WSAC - CPU WSAVT                             */ 10507000
*/*                                                                  */ 10508000
*/*             3. FUNC=INIT.  IF THIS PARAMETER IS SPECIFIED, AN    */ 10509000
*/*                INITIALIZED TABLE OF HALF-WORD LENGTH VALUES      */ 10510000
*/*                DESCRIBING THE NUMBER OF ENTRIES AND LENGTH OF    */ 10511000
*/*                EACH ENTRY IN WSAVT SPECIFIED BY CLASS PARAMETER  */ 10512000
*/*                IS PRODUCED.                                      */ 10513000
*/*                                                                  */ 10514000
*/*             4. ACR=YES/NO WITH A DEFAULT OF YES.  IF CLASS=CPU   */ 10515000
*/*                AND DSECT=NO, ACR=YES CREATES A WORK/SAVE AREA    */ 10516000
*/*                FOR ACR, AND ACR=NO CREATES A RESERVED 8-BYTE     */ 10517000
*/*                AREA BECAUSE ACR IS NOT IN THE SYSTEM.            */ 10518000
*/*                                                                  */ 10519000
*/*             DSECT=NO MUST BE SPECIFIED IF FUNC=INIT IS SPECIFIED.*/ 10520000
*/*                                                                  */ 10521000
*/*             IF DSECT=NO IS SPECIFIED AND FUNC=INIT IS NOT        */ 10522000
*/*             SPECIFIED, THE MAPPING OF WSAVT WILL BE FOLLOWED BY  */ 10523000
*/*             MAPPING OF ACTUAL WORK/SAVE AREAS.                   */ 10524000
*/*                                                                  */ 10525000
*/* **************************************************************** */ 10526000
*                                                                  2467 10527000
*   DECLARE                                                        2467 10528000
*     1 WSAG BASED(CVTSPSA) BDY(DWORD),/* GLOBAL WORK/SAVE AREA    2467 10529000
*                                      VECTOR TABLE                  */ 10530000
*      2 WSAGPGIO PTR(31),          /* ADDRESS OF PAGE I/O ERROR SAVE   10531000
*                                      AREA (80 BYTES)               */ 10532000
*      2 WSAGGMFM PTR(31),          /* ADDRESS OF GETMAIN/ FREEMAIN     10533000
*                                      SAVE AREA (1168 BYTES)      2467 10534000
*                                      (MDC301)              @Z30EN9A*/ 10535000
*      2 WSAGRSM PTR(31),           /* ADDRESS OF REAL STORAGE     2467 10536000
*                                      MANAGEMENT (RSM) SAVE AREA  2467 10537000
*                                      (1024 BYTES)                  */ 10538000
*      2 WSAGSSRS PTR(31),          /* ADDRESS OF SUSPEND/RESET FOR     10539000
*                                      RSM SAVE AREA (80 BYTES)      */ 10540000
*      2 WSAGEMS0 PTR(31),          /* ADDRESS OF MEMORY SWITCH SAVE    10541000
*                                      AREA (56 BYTES)               */ 10542000
*      2 WSAGSTAT PTR(31),          /* ADDRESS OF STATUS SAVE AREA 2467 10543000
*                                      (72 BYTES)                    */ 10544000
*      2 WSAGOPTM PTR(31),          /* ADDRESS OF SYSTEM RESOURCES 2467 10545000
*                                      MANAGER (SRM) SAVE AREA (400     10546000
*                                      BYTES) MDC017                 */ 10547000
*      2 WSAGMEMT PTR(31),          /* ADDRESS OF MEMORY TERMINATION    10548000
*                                      SAVE AREA (80 BYTES)          */ 10549000
*      2 WSAGNQDQ PTR(31),          /* ADDRESS OF ENQ/DEQ SAVE AREA     10550000
*                                      (296 BYTES) MDC011            */ 10551000
*      2 WSAGREST PTR(31),          /* ADDRESS OF WORK/SAVE AREA FOR    10552000
*                                      STATUS SAVING BY STOP AND   2467 10553000
*                                      RESTART SUBROUTINE (168 BYTES)   10554000
*                                      MDC018                        */ 10555000
*      2 WSAGSCHE PTR(31);          /* ADDRESS OF SCHEDULE ROUTINE 2467 10556000
*                                      (IEAVESC0) SAVE AREA FOR    2467 10557000
*                                      SYSEVENT BRANCH ENTRY       2467 10558000
*                                      INTERFACE (72 BYTES) MDC014   */ 10559000
*   DCL                                                            2468 10560000
*     REGSAPTR PTR(31) REG(13);     /* PTR. TO REGISTER SAVE AREAS   */ 10561000
*   DCL                                                            2469 10562000
*     PARMX FIXED(31) REG(1);       /* INPUT PARM            @ZM30488*/ 10563000
*   DCL                                                            2470 10564000
*     PARM POINTER(31) REG(1);      /* INPUT AND OUTPUT PARM         */ 10565000
*   DCL                                                            2471 10566000
*     RTCODE FIXED(31) REG(15);     /* RETURN CODE                   */ 10567000
*   DCL                                                            2472 10568000
*     TBLPTR PTR(31) REG(1);        /* PTR TO VECTOR TABLE           */ 10569000
*   DCL                                                            2473 10570000
*     LNGREG FIXED(31) REG(0);      /* LENGTH TO GET OR FREE         */ 10571000
*   DCL                                                            2474 10572000
*     LOCKRC FIXED(31) REG(15);     /* RETURN CODE FROM SETLOCK      */ 10573000
*   DCL                                                            2475 10574000
*     GMREG FIXED(31) REG(3);       /* PARMS FOR GETMAIN             */ 10575000
*   DCL                                                            2476 10576000
*     1 LGTHTBL BASED(CVTWSAC),     /* CPU SA/WA SIZES               */ 10577000
*     (2 NUM,                       /* NUMBER OF ENTRIES             */ 10578000
*      2 LGTH,                      /* VECTOR TBL + SAVEAREAS        */ 10579000
*      2 FSIZE) FIXED(15);          /* SIZE OF FIRST SA/WA           */ 10580000
*   DCL                                                            2477 10581000
*     SVPTR BASED(P) PTR(31);       /* VECTOR TABLE                  */ 10582000
*   DCL                                                            2478 10583000
*     P PTR(31);                    /* POINT TO VECTOR ENTRIES       */ 10584000
*   DCL                                                            2479 10585000
*     SAPTR PTR(31);                /* PTR TO SAVEAREAS              */ 10586000
*   DCL                                                            2480 10587000
*     NSIZEPTR PTR(31);             /* POINTER TO SIZE ENTRIES       */ 10588000
*   DCL                                                            2481 10589000
*     1 GMTBL FIXED(31),            /* GET/FREEMAIN PARMS            */ 10590000
*     (2 RSVD,                      /* RESERVED BYTE                 */ 10591000
*      2 STKEY,                     /* STORAGE PROTECT KEY           */ 10592000
*      2 SBPOOL,                    /* SUBPOOL REQUESTED             */ 10593000
*      2 FLAGS) FIXED(8);           /* TYPE OF GET/FREEMAIN          */ 10594000
*   DCL                                                            2482 10595000
*     HOLDRC FIXED(31);             /* RETAINER OF RETURN CODE       */ 10596000
*   DCL                                                            2483 10597000
*     CDGM FIXED(8) CONSTANT(0);    /* X'00' INDICATOR OF CONDITIONAL   10598000
*                                      GETMAIN                       */ 10599000
*   DCL                                                            2484 10600000
*     CDFM FIXED(8) CONSTANT(1);    /* X'01' INDICATOR OF CONDITIONAL   10601000
*                                      FREEMAIN                      */ 10602000
*   DCL                                                            2485 10603000
*     LUPONE FIXED(8) CONSTANT(1);  /* LOOP CONTROL CONSTANT         */ 10604000
*   DCL                                                            2486 10605000
*     ZZERO FIXED(8) CONSTANT(0);   /* ZERO RETURN CODE              */ 10606000
*   DCL                                                            2487 10607000
*     FFOUR FIXED(8) CONSTANT(4);   /* RETURN CODE FOUR              */ 10608000
*   DCL                                                            2488 10609000
*     SQAPOOL FIXED(8) CONSTANT(245);/* SUBPOOL 245                  */ 10610000
*   DCL                                                            2489 10611000
*     KEYZERO FIXED(8) CONSTANT(0); /* KEY                           */ 10612000
*   DCL                                                            2490 10613000
*     INCSIZE FIXED(8) CONSTANT(2); /* INCREMENT VALUE               */ 10614000
*   DCL                                                            2491 10615000
*     GETID FIXED(8) CONSTANT(0);   /* R1=0 ON GETMAIN REQUEST       */ 10616000
*   DCL                                                            2492 10617000
*     LOOP FIXED(31);               /* LOOP INDEX                    */ 10618000
*   DCL                                                            2493 10619000
*     R3SAVAR PTR(31);              /* SAVE AREA FOR REG. 3 ACROSS 2493 10620000
*                                      GET/FREEMAIN'S                */ 10621000
*   DCL                                                            2494 10622000
*     SAVAREA PTR(31);              /* SAVE AREA FOR POINTER TO    2494 10623000
*                                      REGISTER SAVE AREAS           */ 10624000
*   DCL                                                            2495 10625000
*     1 SETLOKSA BDY(WORD),         /* SETLOCK REG. SAVE AREA        */ 10626000
*      2 * FIXED(31),               /* SAVE AREA FOR REG. 11         */ 10627000
*      2 * FIXED(31),               /* SAVE AREA FOR REG. 12         */ 10628000
*      2 * FIXED(31),               /* SAVE AREA FOR REG. 13         */ 10629000
*      2 * FIXED(31),               /* SAVE AREA FOR REG. 14         */ 10630000
*      2 * FIXED(31);               /* FIFTH WORD OF SAVE AREA       */ 10631000
*   DCL                                                            2496 10632000
*     NWSASIZE FIXED(15) BASED(NSIZEPTR);                          2496 10633000
*   DCL                                                            2497 10634000
*     1 NP0FMTWS FIXED(15),         /* FLAGS USED BY IEAVSPSA      2497 10635000
*                                                            @OZ05329*/ 10636000
*      2 FRMTONLY BIT(1);           /* FORMAT ONLY - NO GETMAIN    2497 10637000
*                                                            @OZ05329*/ 10638000
*   RFY                                                            2498 10639000
*    (PARM,                                                        2498 10640000
*     RTCODE) RSTD;                 /* THESE REG'S ARE RSTD THRUOUT     10641000
*                                      THIS MODULE                   */ 10642000
*                                                                  2498 10643000
*   /*****************************************************************/ 10644000
*   /*                                                               */ 10645000
*   /* CHECK FOR FORMAT REQUEST                              @OZ05329*/ 10646000
*   /*                                                               */ 10647000
*   /*****************************************************************/ 10648000
*                                                                  2499 10649000
*   IF PARMX<0 THEN                 /* REGISTER NEGATIVE     @ZM30488*/ 10650000
         LTR   PARMX,PARMX                                         2499 10651000
         BNM   @RF02499                                            2499 10652000
*     DO;                                                          2500 10653000
*       TBLPTR=-PARMX;              /* CORRECT ADDRESS       @ZM30488*/ 10654000
         LCR   @14,PARMX                                           2501 10655000
         LR    TBLPTR,@14                                          2501 10656000
*       FRMTONLY='1'B;              /* INDICATE FORMAT REQUEST     2502 10657000
*                                                            @OZ05329*/ 10658000
         OI    FRMTONLY,B'10000000'                                2502 10659000
*       GOTO WSTFORMT;              /* GO FORMAT TABLE       @ZM30488*/ 10660000
         B     WSTFORMT                                            2503 10661000
*     END;                                                         2504 10662000
*   RFY                                                            2505 10663000
*    (REGSAPTR,                                                    2505 10664000
*     LOCKRC) RSTD;                                                2505 10665000
@RF02499 DS    0H                                                  2506 10666000
*   SAVAREA=REGSAPTR;               /* PRESERVE REG. 13              */ 10667000
         LR    SAVAREA,REGSAPTR                                    2506 10668000
*   REGSAPTR=ADDR(SETLOKSA);        /* PUT ADDR. OF 5 WORD SAVE AREA    10669000
*                                      FOR SETLOCK IN REG. 13        */ 10670000
         LA    REGSAPTR,SETLOKSA                                   2507 10671000
*/* TRY TO GET SALLOC LOCK, MAKE SETLOCK SAVE REG'S 11-14 IN SAVE    */ 10672000
*/* AREA POINTED TO BY REG. 13,  RETURN CODE WILL BE IN REG. 15      */ 10673000
*                                                                  2508 10674000
*GLOCK:                                                            2508 10675000
*   GEN REFS(FLC,PSALITA);                                         2508 10676000
GLOCK    DS    0H                                                  2508 10677000
         SETLOCK   OBTAIN,TYPE=SALLOC,MODE=UNCOND,REGS=SAVE,          XX10678000
               RELATED=('SALLOC LOCK, THIS SETLOCK IS ISSUED IN THIS  XX10679000
               MACRO WHICH IS INCLUDED IN VARIOUS MODULES, THE LOCK   XX10680000
               IS RELEASED AT THE LABEL: FLOCK, IN THIS MACRO')         10681000
*   REGSAPTR=SAVAREA;               /* RESTORE REGISTER 13           */ 10682000
         LR    REGSAPTR,SAVAREA                                    2509 10683000
*   RFY                                                            2510 10684000
*    (REGSAPTR) UNRSTD;                                            2510 10685000
*   RFY                                                            2511 10686000
*    (LNGREG) RSTD;                                                2511 10687000
*   IF LOCKRC=ZZERO|LOCKRC=FFOUR THEN/* WAS LOCK SET?                */ 10688000
         LTR   LOCKRC,LOCKRC                                       2512 10689000
         BZ    @RT02512                                            2512 10690000
         CH    LOCKRC,@CH00062                                     2512 10691000
         BNE   @RF02512                                            2512 10692000
@RT02512 DS    0H                                                  2513 10693000
*LOCKSET:                                                          2513 10694000
*     DO;                           /* YES PROCEED FOR GM/FM         */ 10695000
LOCKSET  DS    0H                                                  2514 10696000
*       RFY                                                        2514 10697000
*        (LOCKRC) UNRSTD;                                          2514 10698000
*       LNGREG=LGTH                 /* LENGTH IN REGISTER 0          */ 10699000
*           *8;                     /* LENGTH IN TABLE IS NUMBER OF     10700000
*                                      DOUBLE WORDS                  */ 10701000
         L     @14,CVTWSAC(,RCVT)                                  2515 10702000
         LH    LNGREG,LGTH(,@14)                                   2515 10703000
         SLA   LNGREG,3                                            2515 10704000
*       SBPOOL=SQAPOOL;             /* PUT SUBPOOL IN TABLE          */ 10705000
         MVI   SBPOOL,X'F5'                                        2516 10706000
*       STKEY=KEYZERO;              /* PROTECT KEY REQUESTED         */ 10707000
         MVI   STKEY,X'00'                                         2517 10708000
*       IF PARM=GETID THEN          /* GETMAIN OR FREEMAIN           */ 10709000
         LTR   PARM,PARM                                           2518 10710000
         BNZ   @RF02518                                            2518 10711000
*/********************************************************************/ 10712000
*/*                                                                  */ 10713000
*/*                   GETMAIN PATH                                   */ 10714000
*/*  REGISTER ONE CONTAINS ZERO ON INPUT FOR A GETMAIN REQUEST.      */ 10715000
*/*  IF R1 IS ZERO, THEN SPACE IS OBTAINED FOR A SA/WA AND VECTOR    */ 10716000
*/*  TABLE.  AFTER A SUCCESSFUL RETURN FROM GETMAIN, THE TABLE       */ 10717000
*/*  IS INITIALIZED.                                                 */ 10718000
*/*                                                                  */ 10719000
*/********************************************************************/ 10720000
*                                                                  2519 10721000
*GMAIN:                                                            2519 10722000
*         DO;                       /* GETMAIN PATH                  */ 10723000
GMAIN    DS    0H                                                  2520 10724000
*           FLAGS=CDGM;             /* CONDITIONAL GETMAIN           */ 10725000
         MVI   FLAGS,X'00'                                         2520 10726000
*           RFY                                                    2521 10727000
*            (GMREG,                                               2521 10728000
*             TBLPTR) RSTD;                                        2521 10729000
*           R3SAVAR=GMREG;          /* SAVE CONTENTS OF REG. 3       */ 10730000
         LR    R3SAVAR,GMREG                                       2522 10731000
*           GMREG=GMTBL;            /* PARMS IN REG. 3               */ 10732000
         L     GMREG,GMTBL                                         2523 10733000
*/* GETMAIN VECTOR TABLE AND SAVEAREAS FROM SUBPOOL 245              */ 10734000
*                                                                  2524 10735000
*SGTWSA:                                                           2524 10736000
*           GEN REFS(CVTSPSA,CVTGLMN,CVTPTR,CVTMAP,WSAGGMFM,WSAG); 2524 10737000
SGTWSA   DS    0H                                                  2524 10738000
         GETMAIN RC,LV=(0),BRANCH=(YES,GLOBAL),KEY=(3),SP=(3),        XX10739000
               RELATED=('SUPERVISOR ROUTINE WORK/SAVE AREAS FOR A CPU.XX10740000
               THIS GETMAIN IS ISSUED IN THIS MACRO WHICH IS INCLUDED XX10741000
               IN VARIOUS MODULES.  THE CORRESPONDING FREEMAIN IS AT  XX10742000
               LABEL: SFRWSA, IN THIS MACRO')                           10743000
*           GMREG=R3SAVAR;          /* RESTORE REG. 3, BRANCH ENTRY     10744000
*                                      TO GETMAIN DESTROYS REG. 3    */ 10745000
         LR    GMREG,R3SAVAR                                       2525 10746000
*           IF RTCODE^=ZZERO        /* ERROR IN GETMAIN              */ 10747000
*             THEN                  /* YES                           */ 10748000
         LTR   RTCODE,RTCODE                                       2526 10749000
         BZ    @RF02526                                            2526 10750000
*             HOLDRC=FFOUR;         /* RETAIN RETURN CODE            */ 10751000
         LA    HOLDRC,4                                            2527 10752000
*           ELSE                                                   2528 10753000
*WSTFORMT:                                                         2528 10754000
*             DO;                   /* INITIALIZE VECTOR TABLE     2528 10755000
*                                                            @ZM30488*/ 10756000
         B     @RC02526                                            2528 10757000
@RF02526 DS    0H                                                  2528 10758000
WSTFORMT DS    0H                                                  2529 10759000
*               HOLDRC=ZZERO;       /* RETAIN RETURN CODE            */ 10760000
         SLR   HOLDRC,HOLDRC                                       2529 10761000
*               P=TBLPTR;           /* POINT TO START OF TABLE       */ 10762000
         LR    P,TBLPTR                                            2530 10763000
*               SAPTR=TBLPTR+(NUM*FFOUR);/* GET PTR TO SAVEAREAS     */ 10764000
         L     @14,CVTWSAC(,RCVT)                                  2531 10765000
         LH    SAPTR,NUM(,@14)                                     2531 10766000
         SLA   SAPTR,2                                             2531 10767000
         ALR   SAPTR,TBLPTR                                        2531 10768000
*/* ROUND ADDR. OF FIRST WORK/SAVE AREA UP TO AN 8-BYTE MULT.  ALL   */ 10769000
*/* WORK/SAVE AREAS MUST BEGIN ON DOUBLE WORD BOUNDARIES.  ALL WORK/ */ 10770000
*/* SAVE AREAS ARE MULTIPLES OF 8 BYTES IN SIZE.  THUS IF THE FIRST  */ 10771000
*/* WORK/SAVE AREA IS ON A DOUBLE WORD BOUNDARY, THEY ALL WILL BE.   */ 10772000
*                                                                  2532 10773000
*               SAPTR=((SAPTR+7)|7)&&7;                            2532 10774000
         LA    @07,7                                               2532 10775000
         LR    @14,SAPTR                                           2532 10776000
         ALR   @14,@07                                             2532 10777000
         OR    @14,@07                                             2532 10778000
         XR    @14,@07                                             2532 10779000
         LR    SAPTR,@14                                           2532 10780000
*               RFY                                                2533 10781000
*                (TBLPTR) UNRSTD;                                  2533 10782000
*               NSIZEPTR=ADDR(FSIZE);/* PICK UP ADDR. OF FIELD     2534 10783000
*                                      CONTAINING FIRST WORK/SAVE  2534 10784000
*                                      AREA SIZE                     */ 10785000
         L     @14,CVTWSAC(,RCVT)                                  2534 10786000
         LA    NSIZEPTR,FSIZE(,@14)                                2534 10787000
*INTZE:                                                            2535 10788000
*               DO LOOP=LUPONE TO NUM;/* DO FOR EACH ENTRY IN VECTOR    10789000
*                                      TABLE                         */ 10790000
INTZE    LA    LOOP,1                                              2535 10791000
         B     @DE02535                                            2535 10792000
@DL02535 DS    0H                                                  2536 10793000
*                 SVPTR=SAPTR;      /* SET PTR TO SAVEAREA           */ 10794000
         ST    SAPTR,SVPTR(,P)                                     2536 10795000
*                 SAPTR=SAPTR+NWSASIZE;/* INCREMENT PTR BY SIZE OF 2537 10796000
*                                      SAVEAREA                      */ 10797000
         AH    SAPTR,NWSASIZE(,NSIZEPTR)                           2537 10798000
*                 P=P+LENGTH(SVPTR);/* POINT TO NEXT VECTOR TABLE  2538 10799000
*                                      ENTRY                         */ 10800000
         AH    P,@CH00062                                          2538 10801000
*                 NSIZEPTR=NSIZEPTR /* POINT TO NEXT SIZE            */ 10802000
*                     +LENGTH(NWSASIZE);                           2539 10803000
         AL    NSIZEPTR,@CF00082                                   2539 10804000
*               END INTZE;                                         2540 10805000
         AH    LOOP,@CH00070                                       2540 10806000
@DE02535 L     @14,CVTWSAC(,RCVT)                                  2540 10807000
         CH    LOOP,NUM(,@14)                                      2540 10808000
         BNH   @DL02535                                            2540 10809000
*             END;                  /* END PROCESSING FROM SUCCESSFUL   10810000
*                                      GETMAIN                       */ 10811000
*         END GMAIN;                                               2542 10812000
*       ELSE                                                       2543 10813000
*                                                                  2543 10814000
*/********************************************************************/ 10815000
*/*                                                                  */ 10816000
*/*                  FREEMAIN PATH                                   */ 10817000
*/*  REGISTER ONE CONTAINS THE ADDRESS OF THE AREA TO BE FREE'D.     */ 10818000
*/*  THIS REQUEST IS ONLY FROM VARY CPU OFFLINE, OR IEAVNIP0         */ 10819000
*/*                                                                  */ 10820000
*/********************************************************************/ 10821000
*                                                                  2543 10822000
*FMAIN:                                                            2543 10823000
*         DO;                       /* FREEMAIN PATH                 */ 10824000
         B     @RC02518                                            2543 10825000
@RF02518 DS    0H                                                  2543 10826000
FMAIN    DS    0H                                                  2544 10827000
*           RFY                                                    2544 10828000
*            (GMREG,                                               2544 10829000
*             LNGREG) RSTD;                                        2544 10830000
*           FLAGS=CDFM;             /* CONDITIONAL FREEMAIN          */ 10831000
         MVI   FLAGS,X'01'                                         2545 10832000
*           R3SAVAR=GMREG;          /* PRESERVE CONTENTS OF REG. 3   */ 10833000
         LR    R3SAVAR,GMREG                                       2546 10834000
*           GMREG=GMTBL;            /* PARMS IN REG. 3               */ 10835000
*                                                                  2547 10836000
         L     GMREG,GMTBL                                         2547 10837000
*           /*********************************************************/ 10838000
*           /*                                                       */ 10839000
*           /* FREEMAIN AREA PROVIDED BY CALLER (VARY CPU OFFLINE OR */ 10840000
*           /* NIP)                                                  */ 10841000
*           /*                                                       */ 10842000
*           /*********************************************************/ 10843000
*                                                                  2548 10844000
*SFRWSA:                                                           2548 10845000
*           GEN REFS(CVTSPSA,CVTGLMN,CVTPTR,CVTMAP,WSAGGMFM,WSAG); 2548 10846000
SFRWSA   DS    0H                                                  2548 10847000
         FREEMAIN      RC,LV=(0),BRANCH=(YES,GLOBAL),                 XX10848000
               KEY=(3),A=(1),SP=(3),                                  XX10849000
               RELATED=('SUPERVISOR ROUTINE WORK/SAVE AREAS FOR A CPU.XX10850000
               THIS FREEMAIN IS ISSUED IN THIS MACRO WHICH IS INCLUDEDXX10851000
               IN VARIOUS MODULES.  THE CORRESPONDING GETMAIN IS AT   XX10852000
               LABEL: SGTWSA, IN THIS MACRO')                           10853000
*           GMREG=R3SAVAR;          /* RESTORE REG. 3, BRANCH ENTRY     10854000
*                                      TO FREEMAIN DESTROYS REG. 3   */ 10855000
         LR    GMREG,R3SAVAR                                       2549 10856000
*           IF RTCODE^=ZZERO        /* ERROR                         */ 10857000
*             THEN                  /* YES                           */ 10858000
         LTR   RTCODE,RTCODE                                       2550 10859000
         BZ    @RF02550                                            2550 10860000
*             HOLDRC=FFOUR;         /* SET RETURN CODE               */ 10861000
         LA    HOLDRC,4                                            2551 10862000
*           ELSE                                                   2552 10863000
*             HOLDRC=ZZERO;         /* SAVE 0 RETURN CODE            */ 10864000
         B     @RC02550                                            2552 10865000
@RF02550 SLR   HOLDRC,HOLDRC                                       2552 10866000
*           RFY                                                    2553 10867000
*            (LNGREG,                                              2553 10868000
*             TBLPTR) UNRSTD;                                      2553 10869000
@RC02550 DS    0H                                                  2554 10870000
*           PARM=ZZERO;             /* INDICATOR FOR FREEMAIN        */ 10871000
         SLR   PARM,PARM                                           2554 10872000
*         END FMAIN;                                               2555 10873000
*       IF FRMTONLY='0'B THEN       /* RELEASE LOCK IF NECESSARY   2556 10874000
*                                                            @OZ05329*/ 10875000
@RC02518 TM    FRMTONLY,B'10000000'                                2556 10876000
         BNZ   @RF02556                                            2556 10877000
*         DO;                                                      2557 10878000
*           RFY                                                    2558 10879000
*            (LOCKRC,                                              2558 10880000
*             REGSAPTR) RSTD;                                      2558 10881000
*           SAVAREA=REGSAPTR;       /* PRESERVE REGISTER 13          */ 10882000
         LR    SAVAREA,REGSAPTR                                    2559 10883000
*           REGSAPTR=ADDR(SETLOKSA);/* PUT ADDR. OF 5 WORD SAVE AREA    10884000
*                                      FOR SETLOCK IN REG. 13        */ 10885000
         LA    REGSAPTR,SETLOKSA                                   2560 10886000
*/* RELEASE SALLOC LOCK, MAKE SETLOCK SAVE REG'S 11-14 IN SAVE AREA  */ 10887000
*/* POINTED TO BY REG. 13, RETURN CODE WILL BE IN REG. 15            */ 10888000
*                                                                  2561 10889000
*FLOCK:                                                            2561 10890000
*           GEN REFS(FLC,PSALITA);                                 2561 10891000
FLOCK    DS    0H                                                  2561 10892000
         SETLOCK RELEASE,TYPE=SALLOC,REGS=SAVE,                       **10893000
               RELATED=('SALLOC LOCK, THIS SETLOCK IS ISSUED IN THIS  XX10894000
               MACRO WHICH IS INCLUDED IN VARIOUS MODULES, THE LOCK   XX10895000
               IS OBTAINED AT THE LABEL: GLOCK, IN THIS MACRO')         10896000
*           REGSAPTR=SAVAREA;       /* RESTORE REGISTER 13           */ 10897000
         LR    REGSAPTR,SAVAREA                                    2562 10898000
*           RFY                                                    2563 10899000
*            (REGSAPTR) UNRSTD;                                    2563 10900000
*           IF(LOCKRC=ZZERO)|(LOCKRC=FFOUR)/* LOCK NOT RELEASED?     */ 10901000
*             THEN                                                 2564 10902000
         LTR   LOCKRC,LOCKRC                                       2564 10903000
         BZ    @RT02564                                            2564 10904000
         CH    LOCKRC,@CH00062                                     2564 10905000
         BNE   @RF02564                                            2564 10906000
@RT02564 DS    0H                                                  2565 10907000
*             RTCODE=HOLDRC;        /* RETURN CODE INDICATOR         */ 10908000
         LR    RTCODE,HOLDRC                                       2565 10909000
*           ELSE                                                   2566 10910000
*             RTCODE=FFOUR;         /* 0 RETURN FROM SETLOCK SET   2566 10911000
*                                      RETURN CODE TO THAT FROM    2566 10912000
*                                      GET/FREEMAIN                  */ 10913000
         B     @RC02564                                            2566 10914000
@RF02564 LA    RTCODE,4                                            2566 10915000
*           RFY                                                    2567 10916000
*            (LOCKRC) UNRSTD;                                      2567 10917000
@RC02564 DS    0H                                                  2568 10918000
*         END;                                                     2568 10919000
*       ELSE                        /* TURN FORMAT INDICATOR OFF     */ 10920000
*         FRMTONLY='0'B;            /* CLEAR INDICATOR               */ 10921000
         B     @RC02556                                            2569 10922000
@RF02556 NI    FRMTONLY,B'01111111'                                2569 10923000
*     END LOCKSET;                                                 2570 10924000
*   ELSE                            /* SETLOCK ERROR                 */ 10925000
*     RTCODE=FFOUR;                 /* RETURN CODE INDICATOR         */ 10926000
         B     @RC02512                                            2571 10927000
@RF02512 LA    RTCODE,4                                            2571 10928000
*   RFY                                                            2572 10929000
*    (PARM,                                                        2572 10930000
*     RTCODE) UNRSTD;                                              2572 10931000
*                                                                  2573 10932000
*/*IEAVSPSA: CHART (AMODE,SEQ,IBM68,AREF)                            */ 10933000
*/*IEAVSPSA: E ENTER                                                 */ 10934000
*/* N ON ENTRY IF REG. 1 IS ZERO, THE REQUEST IS TO ALLOCATE         */ 10935000
*/* N A CPU RELATED WORK/SAVE AREA.  IF REG. 1 IS NON-ZERO,          */ 10936000
*/* N THE REQUEST IS TO FREE A CPU RELATED WORK/SAVE AREA AND THE    */ 10937000
*/* N VIRT. ADDRESS OF THE AREA TO BE FREED IS IN REG. 1             */ 10938000
*/* P SAVE REGS EXCEPT REG. 1 AND REG. 15                            */ 10939000
*/* P SAVE REGISTER 13                                               */ 10940000
*/* P PUT ADDR. OF 5 WORD SAVEAREA FOR SETLOCK IN REG. 13            */ 10941000
*/* L SETLOCK TO OBTAIN 'SALLOC' LOCK                                */ 10942000
*/* P RESTORE REG. 13                                                */ 10943000
*/* D (YES,,NO,P2A1) WAS LOCK OBTAINED ?                             */ 10944000
*/* P PUT SIZE OF AREA TO BE GOTTEN/FREED IN REG. 0                  */ 10945000
*/* P INDICATE SUBPOOL 245 AND KEY 0 IN GET/FREEMAIN WORKAREA        */ 10946000
*/* D (YES,,NO,FMAIN) IS THIS A GETMAIN REQUEST ?                    */ 10947000
*/*GMAIN: P SET FLAGS IN GETMAIN WORKAREA FOR CONDITIONAL GETMAIN    */ 10948000
*/* P SAVE CONTENTS OF REGISTER 3                                    */ 10949000
*/* N BRANCH ENTRY TO GET/FREEMAIN DESTROYS REG. 3                   */ 10950000
*/* P PUT GETMAIN PARAMETERS IN REG. 3                               */ 10951000
*/*SGTWSA: L BRANCH TO GETMAIN TO ALLOC. WORK/SAVE AREA              */ 10952000
*/* N VIRT. ADDR. OF GOTTEN AREA IS IN REG. 1                        */ 10953000
*/* P RESTORE CONTENTS OF REGISTER 3                                 */ 10954000
*/* D (YES,,NO,P2A2) GETMAIN SUCCESSFUL ?                            */ 10955000
*/* P SET UP A CODE OF ZERO, TO BE RETURNED BY THIS MODULE           */ 10956000
*/* P CALC. VIRT. ADDR. OF FIRST SAVEAREA IN THE GOTTEN SPACE        */ 10957000
*/* P ROUND THIS ADDR. UP TO A DOUBLE WORD BOUNDARY                  */ 10958000
*/* P PICK UP ADDR. OF FIELD CONTAINING FIRST WORK/SAVE AREA SIZE    */ 10959000
*/* P PICK UP NUMBER OF SAVE AREAS TO BE BUILT                       */ 10960000
*/* P INITIALIZE A COUNTER OF SAVE AREAS BUILT TO 1                  */ 10961000
*/*INTZE: D (YES,P2B1,NO,) ALL SAVE AREAS BUILT ?                    */ 10962000
*/* P SET CURR. VECTOR TABLE ENTRY TO POINT TO CURR. SAVE AREA       */ 10963000
*/* P UPDATE POINTER TO NEXT SAVE AREA                               */ 10964000
*/* P UPDATE POINTER TO NEXT VECTOR TABLE ENTRY                      */ 10965000
*/* P (,INTZE) INCREMENT COUNTER BY 1                                */ 10966000
*/*P2A1: P SET UP A CODE OF 4, TO BE RETURNED BY THIS MODULE         */ 10967000
*/* P (,P2J5) PUT RETURN CODE FOR THIS MODULE IN REG. 15             */ 10968000
*/*P2A2: P (,P2B1) SET UP A CODE OF 4, TO BE RETURNED BY THIS MODULE */ 10969000
*/*FMAIN: P SET FLAGS IN FREEMAIN WORKAREA FOR CONDITIONAL FREEMAIN  */ 10970000
*/* P SAVE CONTENTS OF REGISTER 3                                    */ 10971000
*/* N BRANCH ENTRY TO GET/FREEMAIN DESTROYS REG. 3                   */ 10972000
*/* P PUT FREEMAIN PARAMETERS IN REG. 3                              */ 10973000
*/* N REG. 1 ALREADY CONTAINS THE VIRT. ADDR. OF AREA TO BE FREED    */ 10974000
*/*SFRWSA: L BRANCH TO FREEMAIN TO FREE WORK/SAVE AREA               */ 10975000
*/* P RESTORE CONTENTS OF REGISTER 3                                 */ 10976000
*/* D (YES,,NO,P2A3) FREEMAIN SUCCESSFUL ?                           */ 10977000
*/* P SET UP A CODE OF 0, TO BE RETURNED BY THIS MODULE              */ 10978000
*/*P2B1: P SAVE REG. 13                                              */ 10979000
*/* P PUT ADDR. OF 5 WORD SAVEAREA FOR SETLOCK IN REG. 13            */ 10980000
*/*FLOCK: L SETLOCK TO RELEASE 'SALLOC' LOCK                         */ 10981000
*/* P RESTORE REG. 13                                                */ 10982000
*/* D (YES,,NO,P2A4) WAS LOCK RELEASED ?                             */ 10983000
*/* P PUT RETURN CODE FOR THIS MODULE IN REG. 15                     */ 10984000
*/*P2J5: P RESTORE REGS EXCEPT REG. 1 AND REG. 15                    */ 10985000
*/* R RETURN TO CALLER                                               */ 10986000
*/*P2A3: P (,P2B1) SET UP A CODE OF 4, TO BE RETURNED BY THIS MODULE */ 10987000
*/*P2A4: P (,P2J5) SET RETURN CODE FOR THIS MODULE (REG. 15) TO 4    */ 10988000
*/*IEAVSPSA: END                                                     */ 10989000
*                                                                  2573 10990000
*   END IEAVSPSA;                                                  2573 10991000
*                                                                  2573 10992000
@EL00013 DS    0H                                                  2573 10993000
@EF00013 DS    0H                                                  2573 10994000
@ER00013 L     @14,12(,@13)                                        2573 10995000
         L     @00,20(,@13)                                        2573 10996000
         LM    @02,@12,28(@13)                                     2573 10997000
         BR    @14                                                 2573 10998000
*/* INCLUDE THE FRR STACK INITIALIZATION PROCEDURE 'IEAVTSIN'        */ 10999000
*/* ******************************************************************/ 11000000
*/*             IEAVTSIN-------PROLOGUE                              */ 11001000
*/*                                                                  */ 11002000
*/*  MODULE NAME-IEAVTSIN                                            */ 11003000
*/*  DESCRIPTIVE NAME-FRR STACK INITIALIZATION INTERNAL PROCEDURE    */ 11004000
*/*  LOAD MODULE NAME - IEAVNIP0                                     */ 11005000
*/*  COPYRIGHT - N/A                                                 */ 11006000
*/*  STATUS - NEW FOR OS/VS2 RELEASE 2                               */ 11007000
*/*                                                                  */ 11008000
*/*  FUNCTION - INITIALIZES THE FRR                                  */ 11009000
*/*             STACKS DURING SYSTEM INITIALIZATION(NIP) AND FOR     */ 11010000
*/*             VARY CPU(ONLINE), SO THAT SETFRR RECOVERY CAN BE     */ 11011000
*/*             DEFINED.  THE FRR STACK INITIALIZATION IS IN TWO     */ 11012000
*/*             PARTS:                                               */ 11013000
*/*             1. INSURING THAT THE FRR STACKS ARE ADDRESSABLE OUT  */ 11014000
*/*                OF THE PSA.                                       */ 11015000
*/*             2. INITIALIZING EACH FRR STACK SO THAT THE SETFRR    */ 11016000
*/*                MACRO WILL OPERATE PROPERLY.                      */ 11017000
*/*                                                                  */ 11018000
*/*       I. THE RECOVERY STACK VECTOR TABLE(RSVT) IN THE PSA        */ 11019000
*/*          IS  INITIALIZED TO POINT TO THE RESPECTIVE FRR STACKS   */ 11020000
*/*          PSACSTK - POINTS TO THE CURRENT FRR STACK AND IS        */ 11021000
*/*                    INITIALIZED TO POINT TO THE NORMAL            */ 11022000
*/*                    FRR STACK                                     */ 11023000
*/*          PSASSTK - INITIALIZED TO POINT TO THE SVC-I/O-DISPATCHER*/ 11024000
*/*                    FRR STACK                                     */ 11025000
*/*          PSANSTK - INITIALIZED TO POINT TO THE NORMAL FRR STACK  */ 11026000
*/*                                                                  */ 11027000
*/*          PSAMSTK - INITIALIZED TO POINT TO THE MACHINE           */ 11028000
*/*                     CHECK FRR STACK                              */ 11029000
*/*          PSAPSTK - INITIALIZED TO POINT TO THE PROGRAM  CHECK    */ 11030000
*/*                     FRR STACK                                    */ 11031000
*/*          PSAESTK1 - INITIALIZED TO POINT TO THE EXTERNAL FLIH    */ 11032000
*/*                     FRR STACK(NON-RECURSIVE ENTRIES)             */ 11033000
*/*          PSAESTK2 - INITIALIZED TO POINT TO THE EXTERNAL FLIH    */ 11034000
*/*                     FRR STACK(FIRST LEVEL RECURSIONS)            */ 11035000
*/*          PSAESTK3 - INITIALIZED TO POINT TO THE EXTERNAL FLIH    */ 11036000
*/*                     FRR STACK(SECOND LEVEL RECURSIONS)           */ 11037000
*/*          PSARSTK - INITIALIZED TO POINT TO THE RESTART FLIH      */ 11038000
*/*                    FRR STACK                                     */ 11039000
*/*       II. THE SUPERVISOR CONTROL FRR STACK(S) INITIALIZATION     */ 11040000
*/*           IS PERFORMED AS FOLLOWS:                               */ 11041000
*/*           A. THE ENTIRE STACK IS ZEROED                          */ 11042000
*/*           B. THE STACK HEADER(4 WORDS) IS INITIALIZED TO APPEAR  */ 11043000
*/*              AS FOLLOWS:                                         */ 11044000
*/*              1ST WORD -POINTS TO THE FIRST FRR ENTRY IN THE STACK*/ 11045000
*/*              2ND WORD-POINTS TO THE LAST FRR ENTRY IN THE STACK  */ 11046000
*/*              3RD WORD-CONTAINS THE LENGTH OF EACH FRR ENTRY      */ 11047000
*/*              4TH WORD-CONTAINS THE SAME POINTER AS THE 1ST WORD  */ 11048000
*/*           C. THE FIRST STACK ENTRY IS INITALIZED TO POINT TO THE */ 11049000
*/*              SUPERVISOR CONTROL FRR(IEAVSCRU)                    */ 11050000
*/*              CVTSPFRR FIELD OF THE CVT CONTAINS THE ADDRESS OF   */ 11051000
*/*              THE SUPER FRR                                       */ 11052000
*/*                                                                  */ 11053000
*/*       III. THE NORMAL FRR STACK INITIALIZATION IS PERFORMED AS   */ 11054000
*/*            FOLLOWS:                                              */ 11055000
*/*           A. THE ENTIRE FRR STACK IS ZEROED                      */ 11056000
*/*           B. THE STACK HEADER(4 WORDS) IS INITIALIZED AS FOLLOWS */ 11057000
*/*              1ST WORD-CONTAINS THE ADDRESS OF THE FIRST FRR ENTRY*/ 11058000
*/*                       MINUS 32 BYTES                             */ 11059000
*/*              2ND WORD-CONTAINS THE ADDRESS OF THE LAST FRR ENTRY */ 11060000
*/*                       IN THE STACK                               */ 11061000
*/*              3RD WORD-CONTAINS THE LENGTH VALUE OF AN FRR ENTRY  */ 11062000
*/*              4TH WORD-CONTAINS THE SAME POINTER AS THE 1ST WORD  */ 11063000
*/*                                                                  */ 11064000
*/*  NOTES                                                           */ 11065000
*/*    CHARACTER CODE DEPENDENCIES - N/A                             */ 11066000
*/*    RESTRICTIONS -1.CALLER MUST INCLUDE THE PSA,CVT,FRR STACK     */ 11067000
*/*                (IHAFRRS) MAPPINGS AND INCLUDE THE IHAYSTAK MACRO */ 11068000
*/*                      PRIOR TO CALLING IEAVTSIN                   */ 11069000
*/*                     PRIOR TO INCLUDING IHAYSTAK SET THE MACRO    */ 11070000
*/*                     TIME VARIABLE %STKLENS='YES'                 */ 11071000
*/*                     THE PSA MAPPING MUST BE BASED ON PSAPTR      */ 11072000
*/*                  2. IEAVTSIN IS AN INTERNAL PROCEDURE IN IEAVNIP0*/ 11073000
*/*                      AND VARY CPU(ONLINE)                        */ 11074000
*/*                    AS SUCH IEAVTSIN ASSUMES ITS CALLERS          */ 11075000
*/*                     ATTRIBUTES AND DECLARATIONS                  */ 11076000
*/*                  3. ON EXIT FROM IEAVTSIN THE PSA IS RESTORED TO */ 11077000
*/*                    BASING THAT EXISTED WHEN THE PSA WAS DECLARED */ 11078000
*/*                    IN THE CALLERS PROCEDURE                      */ 11079000
*/*                                                                  */ 11080000
*/*  MODULE TYPE                                                     */ 11081000
*/*    PROCESSOR   - PLS2                                            */ 11082000
*/*    MODULE SIZE   - 300 BYTES                                     */ 11083000
*/*    ATTRIBUTES -     REENTRANT,DISABLED WITH DAT ACTIVE,KEY0      */ 11084000
*/*                                                                  */ 11085000
*/*  ENTRY POINT - IEAVTSIN                                          */ 11086000
*/*    PURPOSE - ENTRY BY NIP0 AND VARY CPU(ONLINE) SO THAT THE FRR  */ 11087000
*/*              STACKS CAN BE INITIALIZED                           */ 11088000
*/*    LINKAGE - STANDARD REGISTER LINKAGE                           */ 11089000
*/*              CALLERS REGISTERS ARE SAVED ON ENTRY AND RESTORED   */ 11090000
*/*              ON EXIT FROM IEAVTSIN                               */ 11091000
*/*    INPUT DATA - REGISTER 1 POINTS TO THE PSA TO BE INITIALIZED   */ 11092000
*/*                 REGISTER 13 POINTS TO A 72 BYTE REGISTER SAVE    */ 11093000
*/*                 AREA                                             */ 11094000
*/*                 IT IS ASSUMED BY IEAVTSIN THAT PSACSTK IS        */ 11095000
*/*                 INITIALIZED TO POINT TO A PREVIOUSLY ALLOCATED   */ 11096000
*/*                 AREA                                             */ 11097000
*/*                 8300 BYTES IN LENGTH TO CONTAIN THE FRR          */ 11098000
*/*                 STACKS AND RTCAS                                 */ 11099000
*/*    ENQ/LOCK CONDITIONS - ASSUMES THAT OF CALLING ROUTINE         */ 11100000
*/*    REGISTERS SAVED - ALL                                         */ 11101000
*/*    STATIC REGS - REGISTER 1 WILL ALWAYS POINT TO THE PSA TO BE   */ 11102000
*/*                  INITIALIZED                                     */ 11103000
*/*    REGISTERS RESTORED - ALL                                      */ 11104000
*/*                                                                  */ 11105000
*/*  EXIT - NORMAL                                                   */ 11106000
*/*    CONDITIONS - STANDARD RETURN LINKAGE                          */ 11107000
*/*    OUTPUT DATA - RSVT,FRR STACKS AND GLOBAL RTCAS ARE INITIALIZED*/ 11108000
*/*    ENQ/LOCK CONDITIONS - SAME AS ON ENTRY                        */ 11109000
*/*    RETURN CODES - NONE                                           */ 11110000
*/*                                                                  */ 11111000
*/*  EXIT ERROR - NONE                                               */ 11112000
*/*                                                                  */ 11113000
*/*  EXTERNAL REFERENCES                                             */ 11114000
*/*    ROUTINES - NONE                                               */ 11115000
*/*    DATASETS - NONE                                               */ 11116000
*/*    DATA AREAS -PSA,CVT,FRR STACKS,VECTOR TABLE OF LENGTHS OF     */ 11117000
*/*               FRR STACKS(MAPPED BY IHAYSTAK)                     */ 11118000
*/*    CONTROL BLOCKS - NONE                                         */ 11119000
*/*    TABLES - NONE                                                 */ 11120000
*/*    MACROS - NONE                                                 */ 11121000
*/*                                                                  */ 11122000
*/*  MAPPING MACROS USED - NONE                                      */ 11123000
*/*                                                                  */ 11124000
*/*  MESSAGES - NONE                                                 */ 11125000
*/*                                                                  */ 11126000
*/* ******************************************************************/ 11127000
*/*                                                                  */ 11128000
*/*                                                                  */ 11129000
*                                                                  2574 11130000
*IEAVTSIN:                                                         2574 11131000
*   PROC OPTIONS(SAVE,NOSAVEAREA);                                 2574 11132000
*                                                                  2574 11133000
IEAVTSIN STM   @14,@12,12(@13)                                     2574 11134000
*/*                                                                  */ 11135000
*                                                                  2575 11136000
*   DECLARE                                                        2575 11137000
*     1 STKADDR CHAR(4) BDY(WORD) DEF(PSACSTK),/* THE ADDRESS OF THE    11138000
*                                      STACK TO BE INITIALIZED       */ 11139000
*      2 * BIT(29),                 /* RESERVED                      */ 11140000
*      2 STKLW3BT BIT(3);           /* LOW ORDER 3 BITS OF THE FRR 2575 11141000
*                                      ADDRESS                       */ 11142000
*   DECLARE                                                        2576 11143000
*     WORDLEN FIXED(31) CONSTANT(4);/* NUMBER OF BYTES IN A FULLWORD */ 11144000
*   DECLARE                                                        2577 11145000
*     LOW3BITS BIT(3) CONSTANT('000'B);/* LOW ORDER 3 BITS OF A    2577 11146000
*                                      DOUBLE WORD ADDRESS           */ 11147000
*   DECLARE                                                        2578 11148000
*     FRRWALEN PTR(8) CONSTANT(200);/* LENGTH OF FRR WORK AREA     2578 11149000
*                                      ASSOCIATED WITH EACH RTCA     */ 11150000
*/*                                                                  */ 11151000
*/*                                                                  */ 11152000
*/* ******************************************************************/ 11153000
*/*                                                                  */ 11154000
*/*       DEFINE THE RTCA PORTION OF THE RECOVERY STACK              */ 11155000
*/*       AREA                                                       */ 11156000
*/*                                                                  */ 11157000
*/* ******************************************************************/ 11158000
*/*                                                                  */ 11159000
*                                                                  2579 11160000
*   DCL                                                            2579 11161000
*     NGRTCA CHAR(584) BDY(DWORD)   /* THE GLOBAL RTCA               */ 11162000
*         BASED(PSARSTK+FRRSFENT+(YSTAK(RSVTINDX)/* ASSOCIATED       */ 11163000
*         *FRRSESZE)+LENGTH(GRTCA)+FRRWALEN);/* WITH THE NORMAL STACK*/ 11164000
*   DCL                                                            2580 11165000
*     GRTCA CHAR(584) BDY(DWORD) BASED(PSACSTK+FRRSFENT+(YSTAK(RSVTINDX 11166000
*         )*FRRSESZE));             /* THE RTCA PORTION OF THE     2580 11167000
*                                      RECOVERY FRR STACK AREA       */ 11168000
*/*                                                                  */ 11169000
*/*                                                                  */ 11170000
*                                                                  2581 11171000
*   DECLARE                                                        2581 11172000
*     RSVTINDX PTR(31) REG(2) RESTRICTED,/* INDEX USED WITH THE RSVT */ 11173000
*     FRREINDX PTR(31) REG(3) RESTRICTED,/* INDEX USED WITH THE FRR     11174000
*                                      ENTRY                         */ 11175000
*     PSAREG PTR(31) REG(1);        /* POINTER TO PSA TO BE        2581 11176000
*                                      INITIALIZED                   */ 11177000
*/*                                                                  */ 11178000
*/*                                                                  */ 11179000
*/* ******************************************************************/ 11180000
*/*                                                                  */ 11181000
*/*   HOOK UP CONTROL BLOCKS                                         */ 11182000
*/*                                                                  */ 11183000
*/* ******************************************************************/ 11184000
*/*                                                                  */ 11185000
*                                                                  2582 11186000
*   RESPECIFY                                                      2582 11187000
*    (PSAREG) RESTRICTED;           /* RESTRICT REGISTER 1           */ 11188000
*   RESPECIFY                                                      2583 11189000
*    (PSA) BASED(PSAREG);           /* PSA ORIGIN-REGISTER 1         */ 11190000
*   RESPECIFY                                                      2584 11191000
*    (CVTMAP) BASED(FLCCVT);        /* CVT ORIGIN IN PSA             */ 11192000
*   RESPECIFY                                                      2585 11193000
*    (FRRS) BASED(PSACSTK);         /* ORIGIN OF FRR STACKS IN PSA   */ 11194000
*   RESPECIFY                                                      2586 11195000
*    (FRRSENTR) BASED(PSACSTK+((FRREINDX-YSTAKBEG)*FRRSESZE)+FRRSFENT); 11196000
*                                   /* ORIGIN OF RESPECTIVE FRR    2587 11197000
*                                      STACKS IN PSA                 */ 11198000
*/*                                                                  */ 11199000
*/* ******************************************************************/ 11200000
*/*                                                                  */ 11201000
*/*     FRR STACK HEADER AND RSVT INITIALIZATION                     */ 11202000
*/*                                                                  */ 11203000
*/* ******************************************************************/ 11204000
*/*                                                                  */ 11205000
*                                                                  2587 11206000
*   DO RSVTINDX=YSTAKBEG TO DIM(YSTAK);/* BEGIN INITIALIZATION       */ 11207000
         LA    RSVTINDX,1                                          2587 11208000
@DL02587 DS    0H                                                  2588 11209000
*     IF RSVTINDX=DIM(YSTAK) THEN   /* CHECK FOR THE NORMAL STACK  2588 11210000
*                                      POINTS TO A NON DOUBLEWORD  2588 11211000
*                                      THEN LEAVE IT ALONE           */ 11212000
         CH    RSVTINDX,@CH00068                                   2588 11213000
         BNE   @RF02588                                            2588 11214000
*       DO;                                                        2589 11215000
*         PSANSTK=ADDR(PSASTAK);    /* POINT TO NORMAL STACK OUT OF     11216000
*                                      THE PSA RSVT                  */ 11217000
         LA    @00,PSASTAK(,PSAREG)                                2590 11218000
         ST    @00,PSANSTK(,PSAREG)                                2590 11219000
*         PSACSTK=PSANSTK;          /* MAKE NORMAL STAK CURRENT      */ 11220000
         ST    @00,PSACSTK(,PSAREG)                                2591 11221000
*         FRRSEMP=(PSACSTK+FRRSFENT)-FRRSESZE;/* INITIALIZE EMPTY  2592 11222000
*                                      POINTER IN HEADER             */ 11223000
         LR    @15,@00                                             2592 11224000
         SH    @15,@CH05576                                        2592 11225000
         LR    @14,@00                                             2592 11226000
         ST    @15,FRRSEMP(,@14)                                   2592 11227000
*       END;                                                       2593 11228000
*     ELSE                          /* OTHERWISE DO THE FOLLOWING    */ 11229000
*       DO;                         /* FOR SUPER FRR STACKS          */ 11230000
         B     @RC02588                                            2594 11231000
@RF02588 DS    0H                                                  2595 11232000
*         IF STKLW3BT=LOW3BITS THEN /* IF THE FRR STACK ADDRESS    2595 11233000
*                                      POINTS TO A DOUBLE WORD THEN     11234000
*                                      IT MUST BE ALLIGNED TO A    2595 11235000
*                                      DOUBLE WORD                   */ 11236000
         TM    STKLW3BT(PSAREG),B'00000111'                        2595 11237000
         BNZ   @RF02595                                            2595 11238000
*           PSACSTK=PSACSTK+WORDLEN;/* THE FRR STACK ADDRESS TO A NON   11239000
*                                      DOUBLEWORD                    */ 11240000
         LA    @00,4                                               2596 11241000
         AL    @00,PSACSTK(,PSAREG)                                2596 11242000
         ST    @00,PSACSTK(,PSAREG)                                2596 11243000
*         ELSE                                                     2597 11244000
*           ;                       /* IF THE FRR STACK ADDRESS    2597 11245000
*                                      POINTS TO A NON DOUBLEWORD  2597 11246000
*                                      THEN LEAVE IT ALONE           */ 11247000
@RF02595 DS    0H                                                  2598 11248000
*         PSARSVT(2*RSVTINDX+1)=PSACSTK;/* SET POINTER TO SUPER STACK   11249000
*                                      IN PSA RSVT                   */ 11250000
         LR    @15,RSVTINDX                                        2598 11251000
         SLA   @15,3                                               2598 11252000
         L     @00,PSACSTK(,PSAREG)                                2598 11253000
         ST    @00,PSARSVT(@15,PSAREG)                             2598 11254000
*         PSARSVT(2*RSVTINDX+YSTAKTWO)=YSTAKZRO;/* ZERO THE POINTER     11255000
*                                      TO THE SAVED STACK IN PSA RSVT*/ 11256000
         SLR   @00,@00                                             2599 11257000
         ST    @00,PSARSVT+4(@15,PSAREG)                           2599 11258000
*         FRRSEMP=PSACSTK+FRRSFENT; /* SET EMPTY STACK POINTER IN  2600 11259000
*                                      HEADER OF STACK               */ 11260000
         L     @15,PSACSTK(,PSAREG)                                2600 11261000
         LA    @00,84                                              2600 11262000
         ALR   @00,@15                                             2600 11263000
         ST    @00,FRRSEMP(,@15)                                   2600 11264000
*       END;                                                       2601 11265000
*     FRRSCURR=FRRSEMP;             /* SET CURRENT STACK POINTER IN     11266000
*                                      STACK HEADER                  */ 11267000
@RC02588 L     @15,PSACSTK(,PSAREG)                                2602 11268000
         MVC   FRRSCURR(4,@15),FRRSEMP(@15)                        2602 11269000
*     FRRSLAST=PSACSTK+FRRSFENT+((YSTAK(RSVTINDX)*FRRSESZE)-FRRSESZE);  11270000
         LA    @00,84                                              2603 11271000
         ALR   @00,@15                                             2603 11272000
         LA    @14,32                                              2603 11273000
         LR    @07,RSVTINDX                                        2603 11274000
         SLA   @07,2                                               2603 11275000
         L     @07,YSTAK-4(@07)                                    2603 11276000
         SLA   @07,5                                               2603 11277000
         SLR   @07,@14                                             2603 11278000
         ALR   @00,@07                                             2603 11279000
         ST    @00,FRRSLAST(,@15)                                  2603 11280000
*                                   /* SET POINTER TO LAST ENTRY IN     11281000
*                                      STACK                         */ 11282000
*     FRRSELEN=FRRSESZE;            /* SET ENTRY LENGTH IN STACK   2604 11283000
*                                      HEADER                        */ 11284000
         ST    @14,FRRSELEN(,@15)                                  2604 11285000
*     FRRSRTMW=''B;                 /* ZERO RTM1WA                   */ 11286000
         XC    FRRSRTMW(68,@15),FRRSRTMW(@15)                      2605 11287000
*/*                                                                  */ 11288000
*/* ******************************************************************/ 11289000
*/*                                                                  */ 11290000
*/*       INDIVIDUAL ENTRY INITIALIZATION FOR THE FRR STACK          */ 11291000
*/*                                                                  */ 11292000
*/* ******************************************************************/ 11293000
*/*                                                                  */ 11294000
*                                                                  2606 11295000
*     DO FRREINDX=YSTAKBEG TO YSTAK(RSVTINDX);/* INITIALIZE FRR    2606 11296000
*                                      ENTRIES                       */ 11297000
         LA    FRREINDX,1                                          2606 11298000
         B     @DE02606                                            2606 11299000
@DL02606 DS    0H                                                  2607 11300000
*       FRRSENTR=''B;               /* ZERO THE ENTRY                */ 11301000
         LR    @15,FRREINDX                                        2607 11302000
         BCTR  @15,0                                               2607 11303000
         SLA   @15,5                                               2607 11304000
         AL    @15,PSACSTK(,PSAREG)                                2607 11305000
         AH    @15,@CH01972                                        2607 11306000
         XC    FRRSENTR(32,@15),FRRSENTR(@15)                      2607 11307000
*       IF(RSVTINDX<DIM(YSTAK))&(FRREINDX=YSTAKBEG) THEN/* IF THIS IS   11308000
*                                      THE FIRST ENTRY IN A SUPER  2608 11309000
*                                      STACK DO FOLLOWING            */ 11310000
         CH    RSVTINDX,@CH00068                                   2608 11311000
         BNL   @RF02608                                            2608 11312000
         CH    FRREINDX,@CH00070                                   2608 11313000
         BNE   @RF02608                                            2608 11314000
*         DO;                                                      2609 11315000
*           FRRSFRRA=CVTSPFRR;      /* INITIALIZE THE SUPER FRR    2610 11316000
*                                      ADDRESS                       */ 11317000
         L     @14,FLCCVT(,PSAREG)                                 2610 11318000
         MVC   FRRSFRRA(4,@15),CVTSPFRR(@14)                       2610 11319000
*         END;                                                     2611 11320000
*       ELSE                                                       2612 11321000
*         ;                         /* OTHERWISE CONTINUE            */ 11322000
@RF02608 DS    0H                                                  2613 11323000
*     END;                          /* CONTINUE IF MORE FRR ENTRIES     11324000
*                                      TO INITIALIZE                 */ 11325000
*                                                                  2613 11326000
         AH    FRREINDX,@CH00070                                   2613 11327000
@DE02606 LR    @15,RSVTINDX                                        2613 11328000
         SLA   @15,2                                               2613 11329000
         C     FRREINDX,YSTAK-4(@15)                               2613 11330000
         BNH   @DL02606                                            2613 11331000
*     /***************************************************************/ 11332000
*     /*                                                             */ 11333000
*     /* ZERO RTCA ASSOCIATED WITH FRR STACK                         */ 11334000
*     /*                                                             */ 11335000
*     /***************************************************************/ 11336000
*                                                                  2614 11337000
*     IF RSVTINDX<DIM(YSTAK) THEN   /* IF A SUPER STACK IS BEING   2614 11338000
*                                      INITIALIZED ZERO RTCA         */ 11339000
         CH    RSVTINDX,@CH00068                                   2614 11340000
         BNL   @RF02614                                            2614 11341000
*       DO;                                                        2615 11342000
*         GRTCA(1:256)=''B;                                        2616 11343000
         LA    @15,84                                              2616 11344000
         AL    @15,PSACSTK(,PSAREG)                                2616 11345000
         LR    @14,RSVTINDX                                        2616 11346000
         SLA   @14,2                                               2616 11347000
         L     @14,YSTAK-4(@14)                                    2616 11348000
         SLA   @14,5                                               2616 11349000
         ALR   @15,@14                                             2616 11350000
         XC    GRTCA(256,@15),GRTCA(@15)                           2616 11351000
*         GRTCA((256+1):(256+256))=''B;                            2617 11352000
         XC    GRTCA+256(256,@15),GRTCA+256(@15)                   2617 11353000
*         GRTCA((256+256+1):LENGTH(GRTCA))=''B;                    2618 11354000
         XC    GRTCA+512(72,@15),GRTCA+512(@15)                    2618 11355000
*       END;                                                       2619 11356000
*     ELSE                          /* IF THE NORMAL STACK IS BEING     11357000
*                                      INITIALIZED ZERO ITS RTCA     */ 11358000
*       DO;                                                        2620 11359000
         B     @RC02614                                            2620 11360000
@RF02614 DS    0H                                                  2621 11361000
*         NGRTCA(1:256)=''B;                                       2621 11362000
         LA    @15,84                                              2621 11363000
         AL    @15,PSARSTK(,PSAREG)                                2621 11364000
         LR    @14,RSVTINDX                                        2621 11365000
         SLA   @14,2                                               2621 11366000
         L     @14,YSTAK-4(@14)                                    2621 11367000
         SLA   @14,5                                               2621 11368000
         ALR   @15,@14                                             2621 11369000
         AH    @15,@CH05579                                        2621 11370000
         XC    NGRTCA(256,@15),NGRTCA(@15)                         2621 11371000
*         NGRTCA((256+1):(256+256))=''B;                           2622 11372000
         XC    NGRTCA+256(256,@15),NGRTCA+256(@15)                 2622 11373000
*         NGRTCA((256+256+1):LENGTH(GRTCA))=''B;                   2623 11374000
         XC    NGRTCA+512(72,@15),NGRTCA+512(@15)                  2623 11375000
*       END;                                                       2624 11376000
*                                                                  2624 11377000
*     /***************************************************************/ 11378000
*     /*                                                             */ 11379000
*     /*                                                             */ 11380000
*     /***************************************************************/ 11381000
*                                                                  2625 11382000
*     PSACSTK=ADDR(GRTCA)+LENGTH(GRTCA)+FRRWALEN;/* UPDATE FOR NEXT     11383000
*                                      STACK                         */ 11384000
@RC02614 LA    @00,84                                              2625 11385000
         AL    @00,PSACSTK(,PSAREG)                                2625 11386000
         LR    @15,RSVTINDX                                        2625 11387000
         SLA   @15,2                                               2625 11388000
         L     @15,YSTAK-4(@15)                                    2625 11389000
         SLA   @15,5                                               2625 11390000
         ALR   @00,@15                                             2625 11391000
         AH    @00,@CH05579                                        2625 11392000
         ST    @00,PSACSTK(,PSAREG)                                2625 11393000
*   END;                            /* CONTINUE IF MORE STACKS TO  2626 11394000
*                                      INITIALIZE                    */ 11395000
         AH    RSVTINDX,@CH00070                                   2626 11396000
         CH    RSVTINDX,@CH00068                                   2626 11397000
         BNH   @DL02587                                            2626 11398000
*   PSACSTK=PSANSTK;                /* SET CURRENT TO NORMAL         */ 11399000
         L     @00,PSANSTK(,PSAREG)                                2627 11400000
         ST    @00,PSACSTK(,PSAREG)                                2627 11401000
*   FRRSEMP=FRRSEMP-ADDR(PSA);      /*                       @YM02619*/ 11402000
         LR    @15,@00                                             2628 11403000
         L     @15,FRRSEMP(,@15)                                   2628 11404000
         SLR   @15,PSAREG                                          2628 11405000
         LR    @14,@00                                             2628 11406000
         ST    @15,FRRSEMP(,@14)                                   2628 11407000
*   FRRSLAST=FRRSLAST-ADDR(PSA);    /*                       @YM02619*/ 11408000
         LR    @14,@00                                             2629 11409000
         L     @14,FRRSLAST(,@14)                                  2629 11410000
         SLR   @14,PSAREG                                          2629 11411000
         LR    @07,@00                                             2629 11412000
         ST    @14,FRRSLAST(,@07)                                  2629 11413000
*   FRRSCURR=FRRSEMP;               /*                       @YM02619*/ 11414000
         LR    @14,@00                                             2630 11415000
         ST    @15,FRRSCURR(,@14)                                  2630 11416000
*   PSACSTK=ADDR(PSASTAK)-ADDR(PSA);/*                       @YM02619*/ 11417000
         LA    @00,3072                                            2631 11418000
         ST    @00,PSACSTK(,PSAREG)                                2631 11419000
*   PSANSTK=PSACSTK;                /*                       @YM02619*/ 11420000
         ST    @00,PSANSTK(,PSAREG)                                2632 11421000
*   RESPECIFY                                                      2633 11422000
*    (PSAREG) UNRESTRICTED;         /* RELEASE REGISTER 1            */ 11423000
*   RESPECIFY                                                      2634 11424000
*     PSA;                          /* REESTABLISH ORIGINAL BASE FOR    11425000
*                                      THE PSA                       */ 11426000
*   END IEAVTSIN;                   /* END IEAVTSIN PROCEDURE        */ 11427000
@EL00014 DS    0H                                                  2635 11428000
@EF00014 DS    0H                                                  2635 11429000
@ER00014 LM    @14,@12,12(@13)                                     2635 11430000
         BR    @14                                                 2635 11431000
*   END IEAVNIP0                    /* END THE PROCEDURE             */ 11432000
*                                                                  2636 11433000
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.     */ 11434000
*/*%INCLUDE SYSLIB  (CVT     )                                       */ 11435000
*/*%INCLUDE SYSLIB  (IEAPMNIP)                                       */ 11436000
*/*%INCLUDE SYSLIB  (IHACDE  )                                       */ 11437000
*/*%INCLUDE SYSLIB  (IEAPNPB )                                       */ 11438000
*/*%INCLUDE SYSLIB  (IEAPXNIP)                                       */ 11439000
*/*%INCLUDE SYSLIB  (IECDCAT )                                       */ 11440000
*/*%INCLUDE SYSLIB  (IECDIOCM)                                       */ 11441000
*/*%INCLUDE SYSLIB  (IECDIOCX)                                       */ 11442000
*/*%INCLUDE SYSLIB  (IECDLCH )                                       */ 11443000
*/*%INCLUDE SYSLIB  (IEFUCBOB)                                       */ 11444000
*/*%INCLUDE SYSLIB  (IEZDEB  )                                       */ 11445000
*/*%INCLUDE SYSLIB  (IHAASCB )                                       */ 11446000
*/*%INCLUDE SYSLIB  (IHAASVT )                                       */ 11447000
*/*%INCLUDE SYSLIB  (IHAASXB )                                       */ 11448000
*/*%INCLUDE SYSLIB  (IHACPAB )                                       */ 11449000
*/*%INCLUDE SYSLIB  (IHACSD  )                                       */ 11450000
*/*%INCLUDE SYSLIB  (IHADQE  )                                       */ 11451000
*/*%INCLUDE SYSLIB  (IHAFBQE )                                       */ 11452000
*/*%INCLUDE SYSLIB  (IHAFQE  )                                       */ 11453000
*/*%INCLUDE SYSLIB  (IHAFRRS )                                       */ 11454000
*/*%INCLUDE SYSLIB  (IHAGDA  )                                       */ 11455000
*/*%INCLUDE SYSLIB  (IHAGSDA )                                       */ 11456000
*/*%INCLUDE SYSLIB  (IHALCCA )                                       */ 11457000
*/*%INCLUDE SYSLIB  (IHALCCAT)                                       */ 11458000
*/*%INCLUDE SYSLIB  (IHALDA  )                                       */ 11459000
*/*%INCLUDE SYSLIB  (IHANVT  )                                       */ 11460000
*/*%INCLUDE SYSLIB  (IHAPCCA )                                       */ 11461000
*/*%INCLUDE SYSLIB  (IHAPCCAT)                                       */ 11462000
*/*%INCLUDE SYSLIB  (IHAPFTE )                                       */ 11463000
*/*%INCLUDE SYSLIB  (IHAPGTE )                                       */ 11464000
*/*%INCLUDE SYSLIB  (IHAPQE  )                                       */ 11465000
*/*%INCLUDE SYSLIB  (IHAPSA  )                                       */ 11466000
*/*%INCLUDE SYSLIB  (IHAPVT  )                                       */ 11467000
*/*%INCLUDE SYSLIB  (IHARB   )                                       */ 11468000
*/*%INCLUDE SYSLIB  (IKJRB   )                                       */ 11469000
*/*%INCLUDE SYSLIB  (IHARSMHD)                                       */ 11470000
*/*%INCLUDE SYSLIB  (IHART1W )                                       */ 11471000
*/*%INCLUDE SYSLIB  (IHASCVT )                                       */ 11472000
*/*%INCLUDE SYSLIB  (IHASGTE )                                       */ 11473000
*/*%INCLUDE SYSLIB  (IHASPQE )                                       */ 11474000
*/*%INCLUDE SYSLIB  (IHASSRB )                                       */ 11475000
*/*%INCLUDE SYSLIB  (IHASRB  )                                       */ 11476000
*/*%INCLUDE SYSLIB  (IHASVC  )                                       */ 11477000
*/*%INCLUDE SYSLIB  (IHAXPTE )                                       */ 11478000
*/*%INCLUDE SYSLIB  (IHAYSTAK)                                       */ 11479000
*/*%INCLUDE SYSLIB  (IKJTCB  )                                       */ 11480000
*/*%INCLUDE SYSLIB  (IEAVSPSA)                                       */ 11481000
*/*%INCLUDE SYSLIB  (IHAWSAVT)                                       */ 11482000
*/*%INCLUDE SYSLIB  (IEAVTSIN)                                       */ 11483000
*                                                                  2636 11484000
*       ;                                                          2636 11485000
@EL00001 L     @13,4(,@13)                                         2636 11486000
@EF00001 DS    0H                                                  2636 11487000
@ER00001 BR    @14                                                 2636 11488000
@DATA    DS    0H                                                       11489000
@CH00070 DC    H'1'                                                     11490000
@CH00301 DC    H'3'                                                     11491000
@CH00062 DC    H'4'                                                     11492000
@CH00843 DC    H'5'                                                     11493000
@CH00727 DC    H'6'                                                     11494000
@CH00797 DC    H'7'                                                     11495000
@CH03699 DC    H'9'                                                     11496000
@CH01918 DC    H'10'                                                    11497000
@CH03707 DC    H'11'                                                    11498000
@CH00724 DC    H'12'                                                    11499000
@CH04725 DC    H'13'                                                    11500000
@CH00707 DC    H'14'                                                    11501000
@CH00123 DC    H'15'                                                    11502000
@CH01253 DC    H'16'                                                    11503000
@CH00079 DC    H'24'                                                    11504000
@CH00116 DC    H'32'                                                    11505000
@CH00810 DC    H'40'                                                    11506000
@CH01627 DC    H'64'                                                    11507000
@CH01972 DC    H'84'                                                    11508000
@CH02217 DC    H'128'                                                   11509000
@CH04660 DC    H'224'                                                   11510000
@CH04294 DC    H'240'                                                   11511000
@CH00693 DC    H'256'                                                   11512000
@CH05579 DC    H'784'                                                   11513000
@CH04619 DC    H'2048'                                                  11514000
@CH05570 DC    H'-4095'                                                 11515000
@CH05576 DC    H'-52'                                                   11516000
@CH05060 DC    H'-4'                                                    11517000
@CH00821 DC    XL2'FFFF'                                                11518000
@CH04202 DC    XL2'0001'                                                11519000
@CH02302 DC    XL2'40'                                                  11520000
         DS    0F                                                       11521000
@SA00001 DS    18F                                                      11522000
@PC00013 DS    1F                                                       11523000
         DS    0F                                                       11524000
@CF00082 DC    F'2'                                                     11525000
@CH00082 EQU   @CF00082+2                                               11526000
@CF00068 DC    F'8'                                                     11527000
@CH00068 EQU   @CF00068+2                                               11528000
@CF04248 DC    F'4096'                                                  11529000
@CH04248 EQU   @CF04248+2                                               11530000
@CF03735 DC    F'9324'                                                  11531000
@CH03735 EQU   @CF03735+2                                               11532000
@CF05123 DC    F'65535'                                                 11533000
@CF05018 DC    F'65536'                                                 11534000
@CF05014 DC    F'786432'                                                11535000
@CF05184 DC    F'1048576'                                               11536000
@CF05093 DC    F'2097152'                                               11537000
@CF05238 DC    F'4000000'                                               11538000
@CF05571 DC    F'16773120'                                              11539000
@CF05573 DC    F'16777215'                                              11540000
@CF05001 DC    F'16777216'                                              11541000
@CF05257 DC    F'40000000'                                              11542000
@CF05595 DC    F'-240'                                                  11543000
@CF05593 DC    F'-6'                                                    11544000
@CF05035 DC    XL4'00000001'                                            11545000
@CF05113 DC    XL4'8300012D'                                            11546000
@CA04827 DC    A(NIP0MCHT)                                              11547000
@CA05166 DC    A(NIP0MFAT)                                              11548000
@CV02363 DC    V(IEAMSTCB)                                              11549000
@CV02365 DC    V(IEECVTCB)                                              11550000
@CV02367 DC    V(IEAMASCB)                                              11551000
@CV02371 DC    V(SVCTABLE)                                              11552000
@CV02373 DC    V(IEARESBL)                                              11553000
@CV02375 DC    V(IGCERROR)                                              11554000
@CV02378 DC    V(IEAMSLNK)                                              11555000
@CV02381 DC    V(IEAVMFA)                                               11556000
@CV02386 DC    V(IGXERROR)                                              11557000
@CV04239 DC    V(DSWPSW)                                                11558000
@CV04244 DC    V(IEAWASCB)                                              11559000
@CV04245 DC    V(IECVCPRM)                                              11560000
@CV04282 DC    V(IEAVENQQ)                                              11561000
         DS    0D                                                       11562000
CDENTPTR DS    A                                                        11563000
IOCOMPTR DS    A                                                        11564000
IOCXPTR  DS    A                                                        11565000
ASCBPTR  DS    A                                                        11566000
FRRSPTR  DS    A                                                        11567000
FRREPTR  DS    A                                                        11568000
GDAPTR   DS    A                                                        11569000
LCCAPTR  DS    A                                                        11570000
NPSAPTR  DC    A(0)                                                     11571000
TCBPTR   DS    A                                                        11572000
NP0UMXST DC    F'0'                                                     11573000
NPCURCHA DS    F                                                        11574000
NASRBCNO DC    F'12'                                                    11575000
NARM1CNO DC    F'16'                                                    11576000
FROMPTR  DS    A                                                        11577000
TOPTR    DS    A                                                        11578000
NP0SMFAP DC    VL4(IEAVMFA)                                             11579000
PCCVTPTR DS    A                                                        11580000
LCCVTPTR DS    A                                                        11581000
ENQLIMIT DC    VL4(IEAVENQQ)                                            11582000
NWPSWPTR DC    VL4(DSWPSW)                                              11583000
NMSGPLBA DC    AL4(NP0MSGPL)                                            11584000
NP0ISTSZ DS    A                                                        11585000
LOOPCNT  DS    A                                                        11586000
NP0ENTRY DC    AL4(IEAVNIP0)                                            11587000
NP0STSZ  DS    A                                                        11588000
NP0EORM  DS    A                                                        11589000
NP0RSQAP DS    A                                                        11590000
NP0RSQAV DS    A                                                        11591000
NP0VSQAV DS    A                                                        11592000
NP0PSASA DC    A(0)                                                     11593000
NP0RLSQP DS    A                                                        11594000
NP0TPRGN DS    A                                                        11595000
NP0SSTE  DC    XL4'F0000000'                                            11596000
NP0SEGAD DC    A(0)                                                     11597000
NP0PTEP  DC    A(0)                                                     11598000
CHLAPTR  DS    A                                                        11599000
NP0SISTE DC    XL4'F0000001'                                            11600000
NP0NBAVL DS    A                                                        11601000
NP0VSQAP DS    A                                                        11602000
FRMAD    DS    A                                                        11603000
NP0WASCB DC    VL4(IEAWASCB)                                            11604000
NCPUAFMB DC    AL4(MSGBCPUA)                                            11605000
NCPUAFMD DC    AL4(MSGDCPUA)                                            11606000
NCPUAFME DC    AL4(MSGECPUA)                                            11607000
PCCASAV  DS    A                                                        11608000
PSASAVE  DS    A                                                        11609000
FRRSAVE  DS    A                                                        11610000
TEMPWORK DS    FL4                                                      11611000
         ORG   TEMPWORK                                                 11612000
ONEMGB   DS    BL1                                                      11613000
HALFMEG  EQU   TEMPWORK+0                                               11614000
@NM00296 EQU   TEMPWORK+0                                               11615000
         DS    CL2                                                      11616000
STOP     EQU   TEMPWORK+3                                               11617000
OPINT    EQU   TEMPWORK+3                                               11618000
CKSTOP   EQU   TEMPWORK+3                                               11619000
NTRDY    EQU   TEMPWORK+3                                               11620000
@NM00297 EQU   TEMPWORK+3                                               11621000
RECCK    EQU   TEMPWORK+3                                               11622000
         ORG   TEMPWORK+4                                               11623000
NMFMSKWD DC    A(0)                                                     11624000
         ORG   NMFMSKWD                                                 11625000
@NM00302 DS    FL2                                                      11626000
NPMFMASK DS    FL2                                                      11627000
         ORG   NMFMSKWD+4                                               11628000
GMTBL    DS    FL4                                                      11629000
         ORG   GMTBL                                                    11630000
RSVD     DS    FL1                                                      11631000
STKEY    DS    FL1                                                      11632000
SBPOOL   DS    FL1                                                      11633000
FLAGS    DS    FL1                                                      11634000
         ORG   GMTBL+4                                                  11635000
CHLALEN  DS    F                                                        11636000
NCPUCNT  DC    H'0'                                                     11637000
NPCCALEN DC    AL2(584)                                                 11638000
NLCCALEN DC    AL2(968)                                                 11639000
NPSALEN  DC    AL2(4096)                                                11640000
NPCURCPU DC    H'0'                                                     11641000
NCPOLMSK DC    AL2(0)                                                   11642000
NCLRLEN  DS    H                                                        11643000
NPMCHCPU DC    AL2(0)                                                   11644000
NP0QUOT  DS    H                                                        11645000
NP0RSRVD DS    H                                                        11646000
NP0PFTCT DS    H                                                        11647000
NP0SPTE  DC    XL2'0001'                                                11648000
NP0FRMNO DC    AL2(0)                                                   11649000
NP0SIPTE DC    XL2'0008'                                                11650000
NP0FMTWS DS    FL2                                                      11651000
         ORG   NP0FMTWS                                                 11652000
FRMTONLY DS    BL1                                                      11653000
         ORG   NP0FMTWS+2                                               11654000
@CC05034 DC    C'ASVT'                                                  11655000
@CC05042 DC    C'CSD '                                                  11656000
@CC05049 DC    C'PCCA'                                                  11657000
@CC05054 DC    C'LCCA'                                                  11658000
@CC05058 DC    C'PSA '                                                  11659000
@CC05111 DC    C'0158'                                                  11660000
@CC05112 DC    C'FF'                                                    11661000
@CB04232 DC    X'FFFBFFFF'                                              11662000
@CB05167 DC    X'C080EC00'                                              11663000
@CB05168 DC    X'DF87EF5F'                                              11664000
@CB05169 DC    X'02000000'                                              11665000
@CB05277 DC    X'C000'                                                  11666000
@CB05614 DC    B'111111111111111111111111110111111111111111111111111111C11667000
               11000000000000000000000000000000010000000000000000000000C11668000
               00'                                                      11669000
@CB05602 DC    B'000000000000000000000000000000100000000000000000000000C11670000
               00'                                                      11671000
@CB05606 DC    B'000000000000000000000000001000000000000000000000000000C11672000
               00'                                                      11673000
@CB05610 DC    B'000000000000000000000000011000000000000000000000000000C11674000
               00'                                                      11675000
@CB05622 DC    B'111111111111111111111111111111101111111111111111111111C11676000
               11'                                                      11677000
@CB05626 DC    B'000000000000000000000000000100000000000000000000000000C11678000
               00'                                                      11679000
@CB05630 DC    B'000000000000000000000000000001000000000000000000000000C11680000
               00'                                                      11681000
@CB05634 DC    B'000000000000000000000000000010000000000000000000000000C11682000
               00'                                                      11683000
         DS    CL3                                                      11684000
@NM00012 DS    CL64                                                     11685000
         ORG   @NM00012                                                 11686000
NPBNLNTH DC    X'06'                                                    11687000
NPBNRSVD DC    AL3(0)                                                   11688000
NIPDEBSN DS    CL60                                                     11689000
         ORG   NIPDEBSN                                                 11690000
NPBNDEB  DS    CL60                                                     11691000
         ORG   NPBNDEB                                                  11692000
NPBNDEB1 DC    A(0)                                                     11693000
NPBNAMLN DC    X'00'                                                    11694000
NPBNDEB2 DC    AL3(0)                                                   11695000
NPBNOFLG DC    X'00'                                                    11696000
NPBNDEB3 DC    X'00000000000000'                                        11697000
NPBNNMXT DC    X'01'                                                    11698000
NPBNDEB4 DC    AL3(0)                                                   11699000
NPBNPRTY DC    X'00'                                                    11700000
NPBNDEB5 DC    AL3(0)                                                   11701000
NPBNKYID DC    X'0F'                                                    11702000
NPBNDCBA DC    AL3(NPBNDCB1-40)                                         11703000
NPBNXSCL DC    X'00'                                                    11704000
NPBNAPAD DC    AL3(0)                                                   11705000
NPBNDVMD DC    X'18'                                                    11706000
NPBNUCBA DC    AL3(0)                                                   11707000
NPBNBINM DC    X'0000'                                                  11708000
NPBNSTCC DC    X'0000'                                                  11709000
NPBNSTHH DC    X'0000'                                                  11710000
NPBNNDCC DC    X'FFFF'                                                  11711000
NPBNNDHH DC    X'FFFF'                                                  11712000
NPBNNTRK DC    XL2'7FFF'                                                11713000
NPBNDCB1 DS    CL12                                                     11714000
         ORG   NPBNDCB1                                                 11715000
NPBNMACR DC    X'00008000'                                              11716000
NPBNIFGS DC    X'00'                                                    11717000
NPBNDEBA DC    AL3(NPBNDEB)                                             11718000
NPBNOFGS DC    X'12000000'                                              11719000
         ORG   @NM00012+64                                              11720000
         DS    CL4                                                      11721000
NVT      DS    CL232                                                    11722000
         ORG   NVT                                                      11723000
NVTNPSUF DS    CL52                                                     11724000
@NM00038 DS    CL1                                                      11725000
NVTNPSFX DC    XL1'00'                                                  11726000
NVTNPATR DC    X'C0'                                                    11727000
         ORG   NVTNPATR                                                 11728000
NVTNPREN DS    BL1                                                      11729000
         ORG   NVTNPREN                                                 11730000
@NM00039 DS    BL1                                                      11731000
NVTNPREU EQU   NVTNPREN+0                                               11732000
         ORG   NVTNPATR+0                                               11733000
@NM00040 EQU   NVTNPATR+0                                               11734000
         ORG   NVT+55                                                   11735000
NVTFLLB  DC    X'00'                                                    11736000
         ORG   NVTFLLB                                                  11737000
NVTFLSLB DS    BL1                                                      11738000
@NM00041 EQU   NVTFLLB+0                                                11739000
         ORG   NVT+56                                                   11740000
NVTMSTCB DC    VL4(IEAMSTCB)                                            11741000
NVTCMTCB DC    VL4(IEECVTCB)                                            11742000
NVTMASCB DC    VL4(IEAMASCB)                                            11743000
NVTRSV41 DS    AL4                                                      11744000
NVTRSV42 DS    AL4                                                      11745000
NVTSVCTB DC    VL4(SVCTABLE)                                            11746000
NVTVBLDL DC    VL4(IEARESBL)                                            11747000
NVTIGCER DC    VL4(IGCERROR)                                            11748000
NVTVVMDI DC    A(0)                                                     11749000
NVTMSLNK DC    VL4(IEAMSLNK)                                            11750000
NVTDSSNG DC    A(0)                                                     11751000
NVTMFA   DC    VL4(IEAVMFA)                                             11752000
NVTNVRSZ DC    A(0)                                                     11753000
NVTRSV49 DS    AL4                                                      11754000
@NM00042 DC    A(0)                                                     11755000
NVTIGXER DC    VL4(IGXERROR)                                            11756000
NVTLNGFX DC    XL4'00080000'                                            11757000
NVTLSQAS DC    XL4'00800000'                                            11758000
NVTSQANO DC    H'40'                                                    11759000
NVTLSQNO DC    H'2'                                                     11760000
NVTRGNAV DC    H'25'                                                    11761000
NVTNBMIN DC    H'8'                                                     11762000
NVTRSVMN DC    H'16'                                                    11763000
NVTNVSQA DC    H'3'                                                     11764000
NVTABSAV DC    X'0000000000000000'                                      11765000
         ORG   NVTABSAV                                                 11766000
NVTABFST DS    AL4                                                      11767000
NVTABSEC DS    CL4                                                      11768000
         ORG   NVT+148                                                  11769000
NVTSVC60 DC    X'0000000000000000'                                      11770000
NVTPQSAV DC    F'0'                                                     11771000
NVTALSQA DC    A(0)                                                     11772000
NVTLSPQE DC    A(0)                                                     11773000
NVTMFASA DC    A(0)                                                     11774000
NVTRTMSA DC    A(0)                                                     11775000
NVTSTMAP DC    A(0)                                                     11776000
NVTNUCND DC    A(0)                                                     11777000
NVTNBFND DC    A(0)                                                     11778000
NVTVVPG1 DC    A(0)                                                     11779000
NVTN0MSG DC    A(0)                                                     11780000
NVTSGPSA DC    A(0)                                                     11781000
@NM00043 DC    H'0'                                                     11782000
NVTNXSIZ DC    H'8'                                                     11783000
NVTNXPTR DC    A(0)                                                     11784000
NVTTRACE DC    H'400'                                                   11785000
NVTFLSG  DC    X'00'                                                    11786000
NVTFLCN  DC    X'00'                                                    11787000
         ORG   NVTFLCN                                                  11788000
NVTFLAC  DS    BL1                                                      11789000
NVTFLIOC EQU   NVTFLCN+0                                                11790000
NVTMP    EQU   NVTFLCN+0                                                11791000
NVTFLASM EQU   NVTFLCN+0                                                11792000
NVTFLNHC EQU   NVTFLCN+0                                                11793000
NVTFLNCK EQU   NVTFLCN+0                                                11794000
NVTFLRAC EQU   NVTFLCN+0                                                11795000
NVTCLKER EQU   NVTFLCN+0                                                11796000
         ORG   NVT+212                                                  11797000
@NM00044 DC    A(0)                                                     11798000
NVTMCPSW DS    CL8                                                      11799000
NVTWTPSW DS    CL8                                                      11800000
         ORG   NVTWTPSW                                                 11801000
NVTWPSW1 DC    X'000200FF'                                              11802000
NVTWPSW2 DC    F'0'                                                     11803000
         ORG   NVTWPSW2                                                 11804000
NVTIDPSW DS    CL2                                                      11805000
NVTFLWS1 DS    CL1                                                      11806000
NVTFLWSC DS    CL1                                                      11807000
         ORG   NVTFLWSC                                                 11808000
NVTIX    DS    CL1                                                      11809000
         ORG   NVT+232                                                  11810000
CHEKWORD DS    CL4                                                      11811000
         DS    CL4                                                      11812000
NP0CTVAL DC    X'7FFFFFFFFFFFFFFF'                                      11813000
NP0CKVAL DC    X'FFFFFFFFFFFFFFFF'                                      11814000
CLOKWORK DC    X'0000000000000000'                                      11815000
IONSAVE  DC    X'0000000000000000'                                      11816000
NP0TRINS DC    X'07FA'                                                  11817000
NPCR1LOB DS    CL1                                                      11818000
NP0NPMID DC    X'07D4'                                                  11819000
SYSMASK  DS    CL1                                                      11820000
         DS    CL2                                                      11821000
NSIGPORC DC    X'00000005'                                              11822000
NP0IPLU  DS    CL2                                                      11823000
NP0COMMA DC    CL1','                                                   11824000
         DS    CL1                                                      11825000
MASKOFF  DC    X'FFFBFFFF'                                              11826000
MASKON   DC    X'00040000'                                              11827000
SIGNMASK DC    X'F0'                                                    11828000
         DS    CL3                                                      11829000
QTAB     DS    CL24                                                     11830000
         ORG   QTAB                                                     11831000
@NM00154 DC    A(0)                                                     11832000
Q8       DC    A(0)                                                     11833000
Q16      DC    A(48)                                                    11834000
Q24      DC    A(98)                                                    11835000
Q32      DC    A(18)                                                    11836000
Q40      DC    A(10)                                                    11837000
         ORG   QTAB+24                                                  11838000
TCHWORK1 DS    CL5                                                      11839000
         ORG   TCHWORK1                                                 11840000
TCHADR   DS    FL4                                                      11841000
@NM00301 DC    X'00'                                                    11842000
         ORG   TCHWORK1+5                                               11843000
         DS    CL7                                                      11844000
NRETCDSA DS    CL5                                                      11845000
         ORG   NRETCDSA                                                 11846000
NRETCODE DS    CL4                                                      11847000
@NM00309 DS    CL1                                                      11848000
         ORG   NRETCDSA+5                                               11849000
         DS    CL3                                                      11850000
NP0PCPSW DS    CL8                                                      11851000
         ORG   NP0PCPSW                                                 11852000
@NM00172 DC    X'00000000'                                              11853000
@NM00173 DC    AL4(NP0BR10)                                             11854000
         ORG   NP0PCPSW+8                                               11855000
SETCKPSW DS    CL8                                                      11856000
         ORG   SETCKPSW                                                 11857000
@NM00174 DC    X'00000000'                                              11858000
@NM00175 DC    AL4(SETTODCK)                                            11859000
         ORG   SETCKPSW+8                                               11860000
CLOKPSW1 DS    CL8                                                      11861000
         ORG   CLOKPSW1                                                 11862000
@NM00176 DC    X'00000000'                                              11863000
@NM00177 DC    AL4(SETCLOCK)                                            11864000
         ORG   CLOKPSW1+8                                               11865000
CLOKPSW2 DS    CL8                                                      11866000
         ORG   CLOKPSW2                                                 11867000
@NM00178 DC    X'04080000'                                              11868000
@NM00179 DC    AL4(SETCLK)                                              11869000
         ORG   CLOKPSW2+8                                               11870000
ERRESTRT DS    CL8                                                      11871000
         ORG   ERRESTRT                                                 11872000
@NM00180 DC    X'070C0000'                                              11873000
@NM00181 DC    AL4(RSTRTALL)                                            11874000
         ORG   ERRESTRT+8                                               11875000
         DS    CL1                                                      11876000
NP0ACTAD DS    CL8                                                      11877000
         ORG   NP0ACTAD                                                 11878000
@NM00182 DC    X'000000'                                                11879000
NP0ACTA1 DC    X'0000000000'                                            11880000
         ORG   NP0ACTA1                                                 11881000
NP0ACTA2 DS    CL4                                                      11882000
NP0ACTA3 DS    CL1                                                      11883000
         ORG   NP0ACTAD+8                                               11884000
         DS    CL7                                                      11885000
NP0CPUID DS    CL8                                                      11886000
         ORG   NP0CPUID                                                 11887000
NP0CPID1 DS    CL4                                                      11888000
         ORG   NP0CPID1                                                 11889000
NP0VERCD DS    CL1                                                      11890000
         ORG   NP0VERCD                                                 11891000
NP0NOCRH DS    BL1                                                      11892000
@NM00183 EQU   NP0VERCD+0                                               11893000
         ORG   NP0CPID1+1                                               11894000
NP0SER   DS    CL3                                                      11895000
         ORG   NP0CPUID+4                                               11896000
NP0CPID2 DS    CL4                                                      11897000
         ORG   NP0CPID2                                                 11898000
NP0MODNO DS    CL2                                                      11899000
NP0MCEL  DS    CL2                                                      11900000
         ORG   NP0CPUID+8                                               11901000
MOD168   DC    X'0168'                                                  11902000
AU       DC    X'3062'                                                  11903000
NP0SQACB DS    CL388                                                    11904000
         ORG   NP0SQACB                                                 11905000
NGDA     DS    CL12                                                     11906000
         ORG   NGDA                                                     11907000
@NM00186 DC    AL4(64)                                                  11908000
@NM00187 DC    2A(0)                                                    11909000
         ORG   NP0SQACB+12                                              11910000
NVRPQE   DS    CL12                                                     11911000
         ORG   NVRPQE                                                   11912000
@NM00188 DC    AL4(32)                                                  11913000
@NM00189 DC    2A(0)                                                    11914000
         ORG   NP0SQACB+24                                              11915000
NVRFBQE  DS    CL12                                                     11916000
         ORG   NVRFBQE                                                  11917000
@NM00190 DC    AL4(16)                                                  11918000
@NM00191 DC    2A(0)                                                    11919000
         ORG   NP0SQACB+36                                              11920000
NSQASPQE DS    CL12                                                     11921000
         ORG   NSQASPQE                                                 11922000
@NM00192 DC    AL4(16)                                                  11923000
@NM00193 DC    2A(0)                                                    11924000
         ORG   NP0SQACB+48                                              11925000
NSQADQE  DS    CL12                                                     11926000
         ORG   NSQADQE                                                  11927000
@NM00194 DC    AL4(16)                                                  11928000
@NM00195 DC    2A(0)                                                    11929000
         ORG   NP0SQACB+60                                              11930000
NCSAPQE  DS    CL12                                                     11931000
         ORG   NCSAPQE                                                  11932000
@NM00196 DC    AL4(32)                                                  11933000
@NM00197 DC    2A(0)                                                    11934000
         ORG   NP0SQACB+72                                              11935000
NCSAFBQE DS    CL12                                                     11936000
         ORG   NCSAFBQE                                                 11937000
@NM00198 DC    AL4(16)                                                  11938000
@NM00199 DC    2A(0)                                                    11939000
         ORG   NP0SQACB+84                                              11940000
NMVRDPQE DS    CL12                                                     11941000
         ORG   NMVRDPQE                                                 11942000
@NM00200 DC    A(8)                                                     11943000
@NM00201 DC    2A(0)                                                    11944000
         ORG   NP0SQACB+96                                              11945000
NMVRPQE  DS    CL12                                                     11946000
         ORG   NMVRPQE                                                  11947000
@NM00202 DC    AL4(32)                                                  11948000
@NM00203 DC    2A(0)                                                    11949000
         ORG   NP0SQACB+108                                             11950000
NMVRFBQE DS    CL12                                                     11951000
         ORG   NMVRFBQE                                                 11952000
@NM00204 DC    AL4(16)                                                  11953000
@NM00205 DC    2A(0)                                                    11954000
         ORG   NP0SQACB+120                                             11955000
ENQCELL  DS    CL12                                                     11956000
         ORG   ENQCELL                                                  11957000
ENQLNG   DC    A(0)                                                     11958000
@NM00206 DC    2A(0)                                                    11959000
         ORG   NP0SQACB+132                                             11960000
NSPQE251 DS    CL12                                                     11961000
         ORG   NSPQE251                                                 11962000
@NM00207 DC    AL4(16)                                                  11963000
@NM00208 DC    2A(0)                                                    11964000
         ORG   NP0SQACB+144                                             11965000
NDQE251  DS    CL12                                                     11966000
         ORG   NDQE251                                                  11967000
@NM00209 DC    AL4(16)                                                  11968000
@NM00210 DC    2A(0)                                                    11969000
         ORG   NP0SQACB+156                                             11970000
NPCCAVT  DS    CL12                                                     11971000
         ORG   NPCCAVT                                                  11972000
@NM00211 DC    AL4(64)                                                  11973000
@NM00212 DC    2A(0)                                                    11974000
         ORG   NP0SQACB+168                                             11975000
NLCCAVT  DS    CL12                                                     11976000
         ORG   NLCCAVT                                                  11977000
@NM00213 DC    AL4(64)                                                  11978000
@NM00214 DC    2A(0)                                                    11979000
         ORG   NP0SQACB+180                                             11980000
NCSD     DS    CL12                                                     11981000
         ORG   NCSD                                                     11982000
@NM00215 DC    AL4(312)                                                 11983000
@NM00216 DC    2A(0)                                                    11984000
         ORG   NP0SQACB+192                                             11985000
NCPAB7   DS    CL12                                                     11986000
         ORG   NCPAB7                                                   11987000
@NM00217 DC    AL4(32)                                                  11988000
@NM00218 DC    2A(0)                                                    11989000
         ORG   NP0SQACB+204                                             11990000
NCPAB6   DS    CL12                                                     11991000
         ORG   NCPAB6                                                   11992000
@NM00219 DC    AL4(32)                                                  11993000
@NM00220 DC    2A(0)                                                    11994000
         ORG   NP0SQACB+216                                             11995000
NCPAB5   DS    CL12                                                     11996000
         ORG   NCPAB5                                                   11997000
@NM00221 DC    AL4(32)                                                  11998000
@NM00222 DC    2A(0)                                                    11999000
         ORG   NP0SQACB+228                                             12000000
NCPAB4   DS    CL12                                                     12001000
         ORG   NCPAB4                                                   12002000
@NM00223 DC    AL4(32)                                                  12003000
@NM00224 DC    2A(0)                                                    12004000
         ORG   NP0SQACB+240                                             12005000
NCPAB3   DS    CL12                                                     12006000
         ORG   NCPAB3                                                   12007000
@NM00225 DC    AL4(32)                                                  12008000
@NM00226 DC    2A(0)                                                    12009000
         ORG   NP0SQACB+252                                             12010000
NCPAB2   DS    CL12                                                     12011000
         ORG   NCPAB2                                                   12012000
@NM00227 DC    AL4(32)                                                  12013000
@NM00228 DC    2A(0)                                                    12014000
         ORG   NP0SQACB+264                                             12015000
NCPAB1   DS    CL12                                                     12016000
         ORG   NCPAB1                                                   12017000
@NM00229 DC    AL4(32)                                                  12018000
@NM00230 DC    2A(0)                                                    12019000
         ORG   NP0SQACB+276                                             12020000
GMSQCELL DS    CL12                                                     12021000
         ORG   GMSQCELL                                                 12022000
@NM00231 DC    A(2048)                                                  12023000
@NM00232 DC    2A(0)                                                    12024000
         ORG   NP0SQACB+288                                             12025000
NP0GSDA  DS    CL12                                                     12026000
         ORG   NP0GSDA                                                  12027000
@NM00233 DC    AL4(24)                                                  12028000
@NM00234 DC    2A(0)                                                    12029000
         ORG   NP0SQACB+300                                             12030000
NPCCA    DS    CL12                                                     12031000
         ORG   NPCCA                                                    12032000
@NM00235 DC    AL4(584)                                                 12033000
@NM00236 DC    2A(0)                                                    12034000
         ORG   NP0SQACB+312                                             12035000
NLCCA    DS    CL12                                                     12036000
         ORG   NLCCA                                                    12037000
@NM00237 DC    AL4(968)                                                 12038000
@NM00238 DC    2A(0)                                                    12039000
         ORG   NP0SQACB+324                                             12040000
NFRRS    DS    CL12                                                     12041000
         ORG   NFRRS                                                    12042000
NFRRSLEN DC    A(0)                                                     12043000
@NM00239 DC    2A(0)                                                    12044000
         ORG   NP0SQACB+336                                             12045000
NPCPUS   DS    CL12                                                     12046000
         ORG   NPCPUS                                                   12047000
NPCPUSA  DC    A(0)                                                     12048000
@NM00240 DC    2A(0)                                                    12049000
         ORG   NP0SQACB+348                                             12050000
PGESRVCE DS    CL12                                                     12051000
         ORG   PGESRVCE                                                 12052000
@NM00241 DC    A(72)                                                    12053000
@NM00242 DC    2A(0)                                                    12054000
         ORG   NP0SQACB+360                                             12055000
NTASVT   DS    CL12                                                     12056000
         ORG   NTASVT                                                   12057000
@NM00243 DC    A(24)                                                    12058000
@NM00244 DC    2A(0)                                                    12059000
         ORG   NP0SQACB+372                                             12060000
NPCDAL   DS    CL12                                                     12061000
         ORG   NPCDAL                                                   12062000
@NM00245 DC    A(64)                                                    12063000
@NM00246 DC    2A(0)                                                    12064000
         ORG   NP0SQACB+384                                             12065000
NSQASTP  DC    A(0)                                                     12066000
         ORG   NP0SQACB+388                                             12067000
NP0LSQCB DS    CL136                                                    12068000
         ORG   NP0LSQCB                                                 12069000
NSEGTAB  DS    CL12                                                     12070000
         ORG   NSEGTAB                                                  12071000
@NM00247 DC    A(1024)                                                  12072000
@NM00248 DC    2A(0)                                                    12073000
         ORG   NP0LSQCB+12                                              12074000
NXPT     DS    CL12                                                     12075000
         ORG   NXPT                                                     12076000
@NM00249 DC    A(192)                                                   12077000
@NM00250 DC    2A(0)                                                    12078000
         ORG   NP0LSQCB+24                                              12079000
NPT      DS    CL12                                                     12080000
         ORG   NPT                                                      12081000
@NM00251 DC    A(32)                                                    12082000
@NM00252 DC    2A(0)                                                    12083000
         ORG   NP0LSQCB+36                                              12084000
NRSVPT   DS    CL12                                                     12085000
         ORG   NRSVPT                                                   12086000
@NM00253 DC    A(224)                                                   12087000
@NM00254 DC    2A(0)                                                    12088000
         ORG   NP0LSQCB+48                                              12089000
GMLSCELL DS    CL12                                                     12090000
         ORG   GMLSCELL                                                 12091000
@NM00255 DC    A(2048)                                                  12092000
@NM00256 DC    2A(0)                                                    12093000
         ORG   NP0LSQCB+60                                              12094000
NLDA     DS    CL12                                                     12095000
         ORG   NLDA                                                     12096000
@NM00257 DC    AL4(1496)                                                12097000
@NM00258 DC    2A(0)                                                    12098000
         ORG   NP0LSQCB+72                                              12099000
NLSQSPQE DS    CL12                                                     12100000
         ORG   NLSQSPQE                                                 12101000
@NM00259 DC    AL4(16)                                                  12102000
@NM00260 DC    2A(0)                                                    12103000
         ORG   NP0LSQCB+84                                              12104000
NLSQADQE DS    CL12                                                     12105000
         ORG   NLSQADQE                                                 12106000
@NM00261 DC    AL4(16)                                                  12107000
@NM00262 DC    2A(0)                                                    12108000
         ORG   NP0LSQCB+96                                              12109000
NMSAPQE  DS    CL12                                                     12110000
         ORG   NMSAPQE                                                  12111000
@NM00263 DC    AL4(32)                                                  12112000
@NM00264 DC    2A(0)                                                    12113000
         ORG   NP0LSQCB+108                                             12114000
NMSAFBQE DS    CL12                                                     12115000
         ORG   NMSAFBQE                                                 12116000
@NM00265 DC    AL4(16)                                                  12117000
@NM00266 DC    2A(0)                                                    12118000
         ORG   NP0LSQCB+120                                             12119000
NLSQAFQE DS    CL12                                                     12120000
         ORG   NLSQAFQE                                                 12121000
@NM00267 DC    AL4(8)                                                   12122000
@NM00268 DC    2A(0)                                                    12123000
         ORG   NP0LSQCB+132                                             12124000
NLSQSTP  DC    A(0)                                                     12125000
         ORG   NP0LSQCB+136                                             12126000
NP0SWTCH DS    CL4                                                      12127000
         ORG   NP0SWTCH                                                 12128000
NP0SW1   DC    X'80'                                                    12129000
         ORG   NP0SW1                                                   12130000
NP0PFTSW DS    BL1                                                      12131000
@NM00269 EQU   NP0SW1+0                                                 12132000
         ORG   NP0SWTCH+1                                               12133000
@NM00270 DS    CL3                                                      12134000
         ORG   NP0SWTCH+4                                               12135000
NP0CTLRG DS    CL12                                                     12136000
         ORG   NP0CTLRG                                                 12137000
NP0CRG0  DS    CL4                                                      12138000
NP0CRG1  DS    CL4                                                      12139000
         ORG   NP0CRG1                                                  12140000
NP0R1B0  DS    CL1                                                      12141000
@NM00271 DS    CL2                                                      12142000
NP0R1B3  DS    CL1                                                      12143000
         ORG   NP0CTLRG+8                                               12144000
NP0CRG14 DS    CL4                                                      12145000
         ORG   NP0CTLRG+12                                              12146000
NPDECPSW DS    CL8                                                      12147000
         ORG   NPDECPSW                                                 12148000
DPSWRD1  DC    X'040C0000'                                              12149000
DPSWRD2  DC    AL4(NPRELOC1+4)                                          12150000
         ORG   NPDECPSW+8                                               12151000
NP0BLDL  DS    CL62                                                     12152000
         ORG   NP0BLDL                                                  12153000
@NM00272 DC    H'1'                                                     12154000
@NM00273 DC    H'58'                                                    12155000
NP0NAME  DC    CL8'IEAVNIPM'                                            12156000
@NM00274 DS    CL6                                                      12157000
NP0BLUSR DS    CL8                                                      12158000
NP0BLATR DS    CL2                                                      12159000
@NM00275 DS    CL34                                                     12160000
         ORG   NP0BLDL+62                                               12161000
         DS    CL2                                                      12162000
NP0SPTBL DS    CL16                                                     12163000
         ORG   NP0SPTBL                                                 12164000
NP0SPLEN DS    AL4                                                      12165000
NP0SPREL DS    AL4                                                      12166000
NP0SPVIR DS    AL4                                                      12167000
NSPSTP   DC    A(0)                                                     12168000
         ORG   NP0SPTBL+16                                              12169000
NP0CONVT DS    CL13                                                     12170000
         ORG   NP0CONVT                                                 12171000
NP012    DS    CL12                                                     12172000
@NM00277 DS    CL1                                                      12173000
         ORG   NP0CONVT+13                                              12174000
         DS    CL3                                                      12175000
NP0FTCHT DS    CL16                                                     12176000
         ORG   NP0FTCHT                                                 12177000
NPFTCHB  DC    AL4(NP0FTCHB)                                            12178000
NPFTCHE  DC    AL4(NP0FTCHE)                                            12179000
NPFTCHA  DC    AL4(MINAPNDG)                                            12180000
NPFTCHT  DC    AL4(MINAPEND)                                            12181000
         ORG   NP0FTCHT+16                                              12182000
NP0CPIDS DS    CL28                                                     12183000
         ORG   NP0CPIDS                                                 12184000
@NM00278 DC    CL3'SRB'                                                 12185000
@NM00279 DC    X'00'                                                    12186000
@NM00280 DC    CL3'RSM'                                                 12187000
@NM00281 DC    X'01'                                                    12188000
@NM00282 DC    CL3'RSM'                                                 12189000
@NM00283 DC    X'02'                                                    12190000
@NM00284 DC    CL3'RM1'                                                 12191000
@NM00285 DC    X'03'                                                    12192000
@NM00286 DC    CL3'RT1'                                                 12193000
@NM00287 DC    X'04'                                                    12194000
@NM00288 DC    CL3'JS3'                                                 12195000
@NM00289 DC    X'05'                                                    12196000
@NM00290 DC    CL3'JS3'                                                 12197000
@NM00291 DC    X'06'                                                    12198000
         ORG   NP0CPIDS+28                                              12199000
         DS    CL4                                                      12200000
NP0SPCSA DS    CL8                                                      12201000
         ORG   NP0SPCSA                                                 12202000
@NM00292 DS    BL2                                                      12203000
PCPSWWT  EQU   NP0SPCSA+1                                               12204000
@NM00293 EQU   NP0SPCSA+1                                               12205000
         ORG   NP0SPCSA+8                                               12206000
NP0SRSSA DS    CL8                                                      12207000
         ORG   NP0SRSSA                                                 12208000
@NM00294 DS    BL2                                                      12209000
RSPSWWT  EQU   NP0SRSSA+1                                               12210000
@NM00295 EQU   NP0SRSSA+1                                               12211000
         ORG   NP0SRSSA+8                                               12212000
NREGSAV  DS    CL20                                                     12213000
         ORG   NREGSAV                                                  12214000
NREG9    DS    AL4                                                      12215000
NREG10   DS    AL4                                                      12216000
NREG11   DS    AL4                                                      12217000
NREG12   DS    AL4                                                      12218000
NREG13   DS    AL4                                                      12219000
         ORG   NREGSAV+20                                               12220000
         DS    CL4                                                      12221000
DIAGMCW  DC    X'0D00D100'                                              12222000
NIPLCPUD DS    CL12                                                     12223000
         ORG   NIPLCPUD                                                 12224000
NICPADR  DC    AL2(0)                                                   12225000
NICPMSK  DS    FL2                                                      12226000
NICPVPSA DC    A(0)                                                     12227000
NICPRPSA DC    A(0)                                                     12228000
         ORG   NIPLCPUD+12                                              12229000
NCURCPUD DS    CL40                                                     12230000
         ORG   NCURCPUD                                                 12231000
NCURCPUA DC    H'0'                                                     12232000
NCURCPUM DC    AL2(0)                                                   12233000
NCURVPCC DC    A(0)                                                     12234000
NCURRPCC DC    A(0)                                                     12235000
NCURVLCC DC    A(0)                                                     12236000
NCURRLCC DC    A(0)                                                     12237000
NCURVPSA DC    A(0)                                                     12238000
NCURRPSA DC    A(0)                                                     12239000
NCURPCCV DC    A(0)                                                     12240000
NCURLCCV DC    A(0)                                                     12241000
NCURVFRR DC    A(0)                                                     12242000
         ORG   NCURCPUD+40                                              12243000
NRSTRPSW DS    CL8                                                      12244000
         ORG   NRSTRPSW                                                 12245000
NRPWD1   DC    X'00000000'                                              12246000
NRPWD2   DS    CL4                                                      12247000
         ORG   NRPWD2                                                   12248000
NRPS2B1  DC    X'00'                                                    12249000
NRPW2IAD DC    AL3(NIP0CPUI)                                            12250000
         ORG   NRSTRPSW+8                                               12251000
NPMCNPSW DS    CL8                                                      12252000
         ORG   NPMCNPSW                                                 12253000
NPMCNWD1 DC    X'00000000'                                              12254000
NPMCNWD2 DC    AL4(NIP0MCHT)                                            12255000
         ORG   NPMCNPSW+8                                               12256000
NSYNCFLG DC    X'00'                                                    12257000
         ORG   NSYNCFLG                                                 12258000
@NM00298 DS    BL1                                                      12259000
NPRNAWAY EQU   NSYNCFLG+0                                               12260000
NRNAWSYN EQU   NSYNCFLG+0                                               12261000
NCPUSTRT EQU   NSYNCFLG+0                                               12262000
NCPUWAIT EQU   NSYNCFLG+0                                               12263000
NCLOKERR EQU   NSYNCFLG+0                                               12264000
NALLINIT EQU   NSYNCFLG+0                                               12265000
NRSTALL  EQU   NSYNCFLG+0                                               12266000
         ORG   NSYNCFLG+1                                               12267000
         DS    CL3                                                      12268000
NCPLINFO DS    CL20                                                     12269000
         ORG   NCPLINFO                                                 12270000
NSRBCP   DS    CL16                                                     12271000
         ORG   NSRBCP                                                   12272000
NSRBCPID DS    CL4                                                      12273000
         ORG   NSRBCPID                                                 12274000
@NM00299 DC    CL3'SRB'                                                 12275000
@NM00300 DC    X'00'                                                    12276000
         ORG   NSRBCP+4                                                 12277000
NSRBCPCN DC    F'17'                                                    12278000
NSRBCPCS DC    AL4(753)                                                 12279000
NSRBCPSP DC    F'245'                                                   12280000
         ORG   NCPLINFO+16                                              12281000
NCPLSTOP DC    F'0'                                                     12282000
         ORG   NCPLINFO+20                                              12283000
NMSGFLGS DC    X'00'                                                    12284000
         ORG   NMSGFLGS                                                 12285000
NMSGBFLG DS    BL1                                                      12286000
NMSGDFLG EQU   NMSGFLGS+0                                               12287000
NMSGEFLG EQU   NMSGFLGS+0                                               12288000
NMSGGFLG EQU   NMSGFLGS+0                                               12289000
@NM00303 EQU   NMSGFLGS+0                                               12290000
         ORG   NMSGFLGS+1                                               12291000
NCPACONV DS    CL3                                                      12292000
         ORG   NCPACONV                                                 12293000
NCPACPUA DS    CL2                                                      12294000
@NM00304 DS    CL1                                                      12295000
         ORG   NCPACONV+3                                               12296000
NCPATRAN DS    CL5                                                      12297000
         ORG   NCPATRAN                                                 12298000
@NM00305 DS    CL2                                                      12299000
NCPATRCP DS    CL2                                                      12300000
@NM00306 DS    CL1                                                      12301000
         ORG   NCPATRAN+5                                               12302000
         DS    CL7                                                      12303000
NSTACONV DS    CL5                                                      12304000
         ORG   NSTACONV                                                 12305000
NSTAREG  DS    CL4                                                      12306000
@NM00307 DS    CL1                                                      12307000
         ORG   NSTACONV+5                                               12308000
NSTATRAN DS    CL9                                                      12309000
         ORG   NSTATRAN                                                 12310000
NSTATRST DS    CL8                                                      12311000
@NM00308 DS    CL1                                                      12312000
         ORG   NSTATRAN+9                                               12313000
NRTCTRAN DS    CL9                                                      12314000
         ORG   NRTCTRAN                                                 12315000
NRTCRTCD DS    CL8                                                      12316000
@NM00310 DS    CL1                                                      12317000
         ORG   NRTCTRAN+9                                               12318000
         DS    CL1                                                      12319000
NOLSCONV DS    CL8                                                      12320000
         ORG   NOLSCONV                                                 12321000
@NM00311 DS    CL6                                                      12322000
NOLSSTOR DS    CL2                                                      12323000
         ORG   NOLSCONV+8                                               12324000
NOLSUNPK DS    CL3                                                      12325000
         ORG   NOLSUNPK                                                 12326000
@NM00312 DS    CL2                                                      12327000
NOLSLOB  DS    CL1                                                      12328000
         ORG   NOLSUNPK+3                                               12329000
         DS    CL1                                                      12330000
NRSTCONV DS    CL5                                                      12331000
         ORG   NRSTCONV                                                 12332000
NRSTWD   DS    CL4                                                      12333000
@NM00313 DS    CL1                                                      12334000
         ORG   NRSTCONV+5                                               12335000
         DS    CL3                                                      12336000
NRSTTRAN DS    CL9                                                      12337000
         ORG   NRSTTRAN                                                 12338000
NRSTTRWD DS    CL8                                                      12339000
@NM00314 DS    CL1                                                      12340000
         ORG   NRSTTRAN+9                                               12341000
         DS    CL3                                                      12342000
NIPRSTID DS    CL4                                                      12343000
         ORG   NIPRSTID                                                 12344000
NRSTLCPU DS    CL2                                                      12345000
NRSTN0ID DC    CL2'NI'                                                  12346000
         ORG   NIPRSTID+4                                               12347000
SETLOKSA DS    CL20                                                     12348000
         ORG   SETLOKSA                                                 12349000
@NM00315 DS    FL4                                                      12350000
@NM00316 DS    FL4                                                      12351000
@NM00317 DS    FL4                                                      12352000
@NM00318 DS    FL4                                                      12353000
@NM00319 DS    FL4                                                      12354000
         ORG   SETLOKSA+20                                              12355000
YSTAK    DC    F'16'                                                    12356000
         DC    F'4'                                                     12357000
         DC    F'16'                                                    12358000
         DC    F'16'                                                    12359000
         DC    F'4'                                                     12360000
         DC    F'4'                                                     12361000
         DC    F'16'                                                    12362000
         DC    F'16'                                                    12363000
NCPMSKTB DC    XL2'8000'                                                12364000
         DC    XL2'4000'                                                12365000
         DC    XL2'2000'                                                12366000
         DC    XL2'1000'                                                12367000
         DC    XL2'0800'                                                12368000
         DC    XL2'0400'                                                12369000
         DC    XL2'0200'                                                12370000
         DC    XL2'0100'                                                12371000
         DC    XL2'0080'                                                12372000
         DC    XL2'0040'                                                12373000
         DC    XL2'0020'                                                12374000
         DC    XL2'0010'                                                12375000
         DC    XL2'0008'                                                12376000
         DC    XL2'0004'                                                12377000
         DC    XL2'0002'                                                12378000
         DC    XL2'0001'                                                12379000
NP0TRTAB DC    CL1'0'                                                   12380000
         DC    CL1'1'                                                   12381000
         DC    CL1'2'                                                   12382000
         DC    CL1'3'                                                   12383000
         DC    CL1'4'                                                   12384000
         DC    CL1'5'                                                   12385000
         DC    CL1'6'                                                   12386000
         DC    CL1'7'                                                   12387000
         DC    CL1'8'                                                   12388000
         DC    CL1'9'                                                   12389000
         DC    CL1'A'                                                   12390000
         DC    CL1'B'                                                   12391000
         DC    CL1'C'                                                   12392000
         DC    CL1'D'                                                   12393000
         DC    CL1'E'                                                   12394000
         DC    CL1'F'                                                   12395000
NP0MSGPL DC    38A(0)                                                   12396000
IEAVNIP0 CSECT                                                          12397000
MSGA     DS 0H                                                          12398000
         IEAPMNIP TYPE=HEADER,MSGST=MSGA,MSGEND=MSGAE                   12399000
IEA951I  DC    C'IEA951I '                                              12400000
MSGATXT1 DC    C'IPC FAILURE ON CPU '                                   12401000
MSGACPUA DC    C'  '             CPU ADDRESS (2 BYTES)                  12402000
MSGATXT2 DC    C', STATUS= '                                            12403000
MSGASTAT DC    C'        '       STATUS DATA (8 BYTES)                  12404000
MSGAE    EQU   *                                                        12405000
IEAVNIP0 CSECT                                                          12406000
MSGB     DS 0H                                                          12407000
         IEAPMNIP TYPE=HEADER,MSGST=MSGB,MSGEND=MSGBE                   12408000
IEA952I  DC     C'IEA952I '                                             12409000
         DC     C'IPC FAILURE ON CPU(S)'                                12410000
MSGBCPUA DC     CL49' '              CPU ADDRESS(ES)                    12411000
MSGBE    EQU    *                                                       12412000
IEAVNIP0 CSECT                                                          12413000
MSGC     DS 0H                                                          12414000
         IEAPMNIP TYPE=HEADER,MSGST=MSGC,MSGEND=MSGCE                   12415000
IEA951IA DC     C'IEA951I '          MESSAGE ID                         12416000
MSGCTXT1 DC     C'IPC FAILURE ON CPU '                                  12417000
MSGCCPUA DC     C'  '                CPU ADDRESS (2 BYTES)              12418000
MSGCTXT2 DC     C', CODE= '                                             12419000
MSGCRTCD DC     C'        '          RETURN CODE (8 BYTES)              12420000
MSGCE    EQU    *                                                       12421000
IEAVNIP0 CSECT                                                          12422000
MSGD     DS 0H                                                          12423000
         IEAPMNIP TYPE=HEADER,MSGST=MSGD,MSGEND=MSGDE                   12424000
IEA953I  DC     C'IEA953I '          MESSAGE ID                         12425000
         DC     C'UNABLE TO INITIALIZE CPU(S)'                          12426000
MSGDCPUA DC     CL49' '              CPU ADDRESS(ES)                    12427000
MSGDE    EQU    *                                                       12428000
IEAVNIP0 CSECT                                                          12429000
MSGE     DS 0H                                                          12430000
         IEAPMNIP TYPE=HEADER,MSGST=MSGE,MSGEND=MSGEE                   12431000
IEA954I  DC     C'IEA954I '       MESSAGE ID                @ZA11315    12432000
         DC     C'MALFUNCTION ALERT GENERATED BY CPU(S)'                12433000
MSGECPUA DC     CL49' '           CPU ADDRESS(ES)                       12434000
MSGEE    EQU    *                                                       12435000
IEAVNIP0 CSECT                                                          12436000
MSGF     DS 0H                                                          12437000
         IEAPMNIP TYPE=HEADER,MSGST=MSGF,MSGEND=MSGFE                   12438000
IEA955I  DC     C'IEA955I '       MESSAGE ID                            12439000
MSGFSIZE DC     C'   K OF ONLINE REAL STORAGE, '                        12440000
         DC     C'MAY BE INSUFFICIENT'                                  12441000
MSGFE    EQU    *                                                       12442000
IEAVNIP0 CSECT                                                          12443000
MSGG     DS 0H                                                          12444000
         IEAPMNIP TYPE=HEADER,MSGST=MSGG,MSGEND=MSGGE                   12445000
IEA956I  DC     C'IEA956I '    MESSAGE ID                               12446000
         DC     C'TOP OF NIP V=R REGION IS TOO HIGH'                    12447000
MSGGE    EQU    *                                                       12448000
IEAVNIP0 CSECT                                                          12449000
MSGH     DS 0H                                                          12450000
         IEAPMNIP TYPE=HEADER,MSGST=MSGH,MSGEND=MSGHE                   12451000
IEA956IA DC     C'IEA965I '     MESSAGE ID                              12452000
         DC     C'TOP OF NIP V=R REGION IS TOO LOW'                     12453000
MSGHE    EQU    *                                                       12454000
IEAVNIP0 CSECT                                                          12455000
MSGI     DS      0H                                                     12456000
         IEAPMNIP TYPE=HEADER,MSGST=MSGI,MSGEND=MSGIE                   12457000
IEA957I  DC      C'IEA957I '     MESSAGE ID                             12458000
         DC      C'RESTART RESOURCE WORD CONTAINED '                    12459000
MSGIRSWD DC      C'        '    CONTENTS OF CVTRSTWD, 8 BYTES           12460000
MSGIE    EQU     *                                                      12461000
IEAVNIP0 CSECT                                                          12462000
NP0RTTAB  DS     0F                                                     12463000
          BALR   15,0            ESTABLISH ADDRESSABILITY               12464000
          DC     XL2'58FF'       SET UP INSTR. TO PICK UP ADDR. OF      12465000
          DC     AL2((RT1ADCON-NP0RTTAB)-2)  FIRST TRAP RTN.            12466000
          BR     15              BRANCH TO FIRST TRAP RTN.              12467000
          DC     A(NP0RTP02)     ADDRESS OF SECOND TRAP RTN.            12468000
          DC     A(NP0RTP03)     ADDRESS OF THIRD TRAP RTN.             12469000
          DC     A(NP0RTP04)     ADDRESS OF FOURTH TRAP RTN.            12470000
          DC     A(NP0RTP05)     ADDRESS OF FIFTH TRAP RTN.             12471000
          DC     A(NP0RTP06)     ADDRESS OF SIXTH TRAP RTN.             12472000
          DC     A(NP0RTP07)     ADDRESS OF SEVENTH TRAP RTN.           12473000
          DC     A(NP0RTP08)     ADDRESS OF EIGHTH TRAP RTN.            12474000
          DC     A(NP0RTP09)     ADDRESS OF NINGH TRAP RTN.             12475000
          DC     A(NP0RTP10)     ADDRESS OF TENTH TRAP RTN.             12476000
          DC     A(NP0RTP11)     ADDRESS OF ELEVENTH TRAP RTN.          12477000
          DC     A(NP0RTP12)     ADDRESS OF TWELFTH TRAP RTN.           12478000
          DC     A(NP0RTP13)     ADDRESS OF THIRTEENTH TRAP RTN.        12479000
          DC     A(NP0RTP14)     ADDRESS OF FOURTEENTH TRAP RTN.        12480000
          DC     A(NP0RTP15)     ADDRESS OF FIFTEENTH TRAP RTN.         12481000
RT1ADCON  DC     A(NP0RTP01)     ADDRESS OF FIRST TRAP RTN.             12482000
PATCHLOC  DC     XL50'00'                                               12483000
IEAVNIP0 CSECT                                                          12484000
NP0FTCHB   DS    0H                                                     12485000
          COPY IEWFTNIP                                                 12486000
IEAVNIP0 CSECT  ,                                                       12487000
NP0FTCHE   DS   0H                                                      12488000
IEAVNIP0 CSECT                                                          12489000
@00      EQU   00                      EQUATES FOR REGISTERS 0-15       12490000
@01      EQU   01                                                       12491000
@02      EQU   02                                                       12492000
@03      EQU   03                                                       12493000
@04      EQU   04                                                       12494000
@05      EQU   05                                                       12495000
@06      EQU   06                                                       12496000
@07      EQU   07                                                       12497000
@08      EQU   08                                                       12498000
@09      EQU   09                                                       12499000
@10      EQU   10                                                       12500000
@11      EQU   11                                                       12501000
@12      EQU   12                                                       12502000
@13      EQU   13                                                       12503000
@14      EQU   14                                                       12504000
@15      EQU   15                                                       12505000
SAVAREA  EQU   @02                                                      12506000
R3SAVAR  EQU   @02                                                      12507000
LOOP     EQU   @07                                                      12508000
HOLDRC   EQU   @04                                                      12509000
NSIZEPTR EQU   @06                                                      12510000
SAPTR    EQU   @02                                                      12511000
P        EQU   @05                                                      12512000
NANDWORD EQU   @02                                                      12513000
TABPTR   EQU   @07                                                      12514000
INDXPTR  EQU   @02                                                      12515000
NCLRBASE EQU   @02                                                      12516000
NNIPMEP  EQU   @07                                                      12517000
NALLOCLN EQU   @05                                                      12518000
NP0NOFL  EQU   @02                                                      12519000
NFQEPTR  EQU   @04                                                      12520000
NP0SVCBA EQU   @02                                                      12521000
NP0SQAAV EQU   @06                                                      12522000
NP0SQASG EQU   @02                                                      12523000
NP0LSQSG EQU   @02                                                      12524000
NP0PTCT2 EQU   @02                                                      12525000
NP0TFRMS EQU   @02                                                      12526000
NP0HISEG EQU   @07                                                      12527000
NP0STEP  EQU   @06                                                      12528000
NP0TTADR EQU   @04                                                      12529000
NP0TTSZ  EQU   @02                                                      12530000
NP0PFTEP EQU   @02                                                      12531000
NP0VBN   EQU   @07                                                      12532000
NP0RBN   EQU   @06                                                      12533000
NP0MINRT EQU   @04                                                      12534000
NP0EX    EQU   @04                                                      12535000
NP0NUCND EQU   @06                                                      12536000
NP0TNCBF EQU   @04                                                      12537000
NP0NUCBF EQU   @05                                                      12538000
NP0DIFF  EQU   @04                                                      12539000
NP0LUNAV EQU   @02                                                      12540000
NP0AVAIL EQU   @07                                                      12541000
NP0TOF   EQU   @02                                                      12542000
NP0VLSQA EQU   @02                                                      12543000
NP0RLSQA EQU   @05                                                      12544000
NP0SAHIV EQU   @04                                                      12545000
NP0SAHIR EQU   @02                                                      12546000
NP0SATBL EQU   @05                                                      12547000
CHNADDR  EQU   @04                                                      12548000
NP0NCEND EQU   @05                                                      12549000
NMSGCBAS EQU   @02                                                      12550000
NMSGABAS EQU   @02                                                      12551000
NCPITPTR EQU   @04                                                      12552000
NPSWPTR  EQU   @02                                                      12553000
TBASE    EQU   @02                                                      12554000
CELLNGTH EQU   @04                                                      12555000
CURCPTR  EQU   @05                                                      12556000
CURCPTRR EQU   @06                                                      12557000
ENQCPTR  EQU   @02                                                      12558000
NCPFROM  EQU   @04                                                      12559000
TCHTARG  EQU   @06                                                      12560000
NTCHLPCT EQU   @04                                                      12561000
NWMFMSK2 EQU   @06                                                      12562000
NPWMFMSK EQU   @04                                                      12563000
NIPCLOOP EQU   @02                                                      12564000
NCPABS   EQU   @06                                                      12565000
J        EQU   @02                                                      12566000
I        EQU   @05                                                      12567000
NP0RELAD EQU   @05                                                      12568000
N0MSGPTR EQU   @04                                                      12569000
NP0TTHDR EQU   @02                                                      12570000
NP0IPLD  EQU   @04                                                      12571000
DEBPTR   EQU   @04                                                      12572000
CATPTR   EQU   @05                                                      12573000
RDATA    EQU   @12                                                      12574000
RCODE1   EQU   @08                                                      12575000
RCODE2   EQU   @09                                                      12576000
RCODE3   EQU   @11                                                      12577000
LCHPTR   EQU   @08                                                      12578000
UCBPTR   EQU   @08                                                      12579000
DEBDAPTR EQU   @08                                                      12580000
DEBEXPTR EQU   @08                                                      12581000
DEBSBPTR EQU   @08                                                      12582000
ASVTPTR  EQU   @08                                                      12583000
ASXBPTR  EQU   @08                                                      12584000
CPABPTR  EQU   @08                                                      12585000
DQESEPTR EQU   @08                                                      12586000
FBQESPTR EQU   @08                                                      12587000
FQESEPTR EQU   @08                                                      12588000
LDAPTR   EQU   @08                                                      12589000
RNVT     EQU   @02                                                      12590000
RCVT     EQU   @03                                                      12591000
REXIT    EQU   @14                                                      12592000
RENTRY   EQU   @15                                                      12593000
PCCAPTR  EQU   @08                                                      12594000
PFTEPTR  EQU   @08                                                      12595000
PTEPTR   EQU   @08                                                      12596000
PQESEPTR EQU   @08                                                      12597000
PVTPTR   EQU   @08                                                      12598000
RBSECPTR EQU   @08                                                      12599000
RSMHDPTR EQU   @08                                                      12600000
SCVTSPTR EQU   @08                                                      12601000
STEPTR   EQU   @08                                                      12602000
SPQESPTR EQU   @08                                                      12603000
SRBPTR   EQU   @08                                                      12604000
XPTEPTR  EQU   @08                                                      12605000
PCBR10   EQU   @10                                                      12606000
MAPINDX  EQU   @04                                                      12607000
RTTRN    EQU   @00                                                      12608000
NP0GMLEN EQU   @00                                                      12609000
NP0FMLEN EQU   @00                                                      12610000
NPLOADEP EQU   @00                                                      12611000
R1       EQU   @01                                                      12612000
DEBPNTR  EQU   @01                                                      12613000
AREAAD   EQU   @01                                                      12614000
NSPSAREG EQU   @01                                                      12615000
NTSINREG EQU   @01                                                      12616000
NIPIDREG EQU   @01                                                      12617000
WORKPTR  EQU   @02                                                      12618000
R2       EQU   @02                                                      12619000
NMFATRET EQU   @02                                                      12620000
ZEROREG  EQU   @02                                                      12621000
R3       EQU   @03                                                      12622000
OFLINDX  EQU   @04                                                      12623000
CHANREG  EQU   @04                                                      12624000
SHFTREG  EQU   @04                                                      12625000
CURMFMSK EQU   @04                                                      12626000
CURPSWD1 EQU   @04                                                      12627000
NP0KEY   EQU   @05                                                      12628000
NEWMFMSK EQU   @05                                                      12629000
NEWPSWD1 EQU   @05                                                      12630000
CVDREG   EQU   @05                                                      12631000
ABBASE   EQU   @06                                                      12632000
WORKREG6 EQU   @06                                                      12633000
R6       EQU   @06                                                      12634000
CURCPMSK EQU   @06                                                      12635000
R7       EQU   @07                                                      12636000
UCBADR   EQU   @07                                                      12637000
NP0BLK   EQU   @07                                                      12638000
R10      EQU   @10                                                      12639000
NMFATEP  EQU   @10                                                      12640000
NBLDLRC  EQU   @15                                                      12641000
NSPSARCD EQU   @15                                                      12642000
RCPID    EQU   @00                                                      12643000
RCPABADR EQU   @01                                                      12644000
RCLNO    EQU   @02                                                      12645000
RSBPL    EQU   @05                                                      12646000
RCLSZ    EQU   @06                                                      12647000
NBLDCPRC EQU   @15                                                      12648000
NDSGNLST EQU   @00                                                      12649000
NDSGNLRG EQU   @01                                                      12650000
NDSGNLRC EQU   @15                                                      12651000
NSIGPSTA EQU   @02                                                      12652000
NSIGPADR EQU   @03                                                      12653000
NSIGPOC  EQU   @04                                                      12654000
REG0     EQU   @00                                                      12655000
REG1     EQU   @01                                                      12656000
REG2     EQU   @02                                                      12657000
REG3     EQU   @03                                                      12658000
REG4     EQU   @04                                                      12659000
REG5     EQU   @05                                                      12660000
REG6     EQU   @06                                                      12661000
REG7     EQU   @07                                                      12662000
REG10    EQU   @10                                                      12663000
REG15    EQU   @15                                                      12664000
NPRSMR0  EQU   @00                                                      12665000
NPRSMR1  EQU   @01                                                      12666000
NPRSMR2  EQU   @02                                                      12667000
NPRSMR3  EQU   @03                                                      12668000
NPRSMRC  EQU   @15                                                      12669000
REGSAPTR EQU   @13                                                      12670000
PARMX    EQU   @01                                                      12671000
PARM     EQU   @01                                                      12672000
RTCODE   EQU   @15                                                      12673000
TBLPTR   EQU   @01                                                      12674000
LNGREG   EQU   @00                                                      12675000
LOCKRC   EQU   @15                                                      12676000
GMREG    EQU   @03                                                      12677000
RSVTINDX EQU   @02                                                      12678000
FRREINDX EQU   @03                                                      12679000
PSAREG   EQU   @01                                                      12680000
UCBDCPTR EQU   @08                                                      12681000
XPTPTR   EQU   @08                                                      12682000
         ENTRY NP0DSSHK                                                 12683000
CVTPTR   EQU   16                                                       12684000
CVTMAP   EQU   0                                                        12685000
CVT      EQU   CVTMAP                                                   12686000
CVTXAPG  EQU   CVTMAP+20                                                12687000
CVTPRLTV EQU   CVTMAP+32                                                12688000
CVTILK1  EQU   CVTMAP+36                                                12689000
CVTILK2  EQU   CVTMAP+40                                                12690000
CVTSYSAD EQU   CVTMAP+48                                                12691000
CVTBTERM EQU   CVTMAP+52                                                12692000
CVTDAR   EQU   CVTMAP+72                                                12693000
CVTFLGS1 EQU   CVTDAR                                                   12694000
CVTDCB   EQU   CVTMAP+116                                               12695000
CVTIOQET EQU   CVTMAP+120                                               12696000
CVTIXAVL EQU   CVTMAP+124                                               12697000
CVTNUCB  EQU   CVTMAP+128                                               12698000
CVT0DS   EQU   CVTMAP+136                                               12699000
CVTILCH  EQU   CVTMAP+140                                               12700000
CVTIERLC EQU   CVTMAP+144                                               12701000
CVTHEAD  EQU   CVTMAP+160                                               12702000
CVTSV76C EQU   CVTHEAD                                                  12703000
CVTOPTA  EQU   CVTMAP+182                                               12704000
CVTXPFP  EQU   CVTOPTA                                                  12705000
CVTOPTB  EQU   CVTMAP+183                                               12706000
CVTABEND EQU   CVTMAP+200                                               12707000
CVTGTF   EQU   CVTMAP+236                                               12708000
CVTGTFST EQU   CVTGTF                                                   12709000
CVTGTFS  EQU   CVTGTFST                                                 12710000
CVTSTATE EQU   CVTGTFST                                                 12711000
CVTTMODE EQU   CVTGTFST                                                 12712000
CVTFORM  EQU   CVTGTFST                                                 12713000
CVTAQAVT EQU   CVTMAP+240                                               12714000
CVTTCMFG EQU   CVTAQAVT                                                 12715000
CVTVOLM2 EQU   CVTMAP+244                                               12716000
CVTTATA  EQU   CVTVOLM2                                                 12717000
CVTTSKS  EQU   CVTTATA                                                  12718000
CVTVOLF2 EQU   CVTTSKS                                                  12719000
CVTTAT   EQU   CVTTATA+1                                                12720000
CVTATER  EQU   CVTMAP+248                                               12721000
CVTEXT1  EQU   CVTMAP+252                                               12722000
CVTPURG  EQU   CVTMAP+260                                               12723000
CVTQMSG  EQU   CVTMAP+268                                               12724000
CVTDMSR  EQU   CVTMAP+272                                               12725000
CVTRSV37 EQU   CVTDMSR                                                  12726000
CVTDMSRF EQU   CVTRSV37                                                 12727000
CVTREAL  EQU   CVTMAP+284                                               12728000
CVTEORM  EQU   CVTMAP+312                                               12729000
CVTERPV  EQU   CVTMAP+316                                               12730000
CVTINTLA EQU   CVTMAP+320                                               12731000
CVTAPF   EQU   CVTMAP+324                                               12732000
CVTEXT2  EQU   CVTMAP+328                                               12733000
CVTHJES  EQU   CVTMAP+332                                               12734000
CVTPGSIA EQU   CVTMAP+348                                               12735000
CVTA1F1  EQU   CVTMAP+356                                               12736000
CVTSYSK  EQU   CVTMAP+357                                               12737000
CVTVOLM1 EQU   CVTMAP+380                                               12738000
CVTVOLF1 EQU   CVTVOLM1                                                 12739000
CVTATMCT EQU   CVTMAP+388                                               12740000
CVTXTNT1 EQU   0                                                        12741000
CVTXTNT2 EQU   0                                                        12742000
CVTDSSV  EQU   CVTXTNT2                                                 12743000
CVTNUCLS EQU   CVTXTNT2+4                                               12744000
CVTFLGBT EQU   CVTXTNT2+5                                               12745000
CVTQID   EQU   CVTXTNT2+24                                              12746000
CVTRV400 EQU   CVTXTNT2+52                                              12747000
CVTRV409 EQU   CVTXTNT2+53                                              12748000
CVTATCVT EQU   CVTXTNT2+64                                              12749000
CVTRV429 EQU   CVTXTNT2+84                                              12750000
CVTRV438 EQU   CVTXTNT2+85                                              12751000
CVTRV457 EQU   CVTXTNT2+112                                             12752000
CVTRV466 EQU   CVTXTNT2+113                                             12753000
CVTFIX   EQU   0                                                        12754000
CVTMDL   EQU   CVTFIX+250                                               12755000
CVTRELNO EQU   CVTFIX+252                                               12756000
NWTOHDR  EQU   0                                                        12757000
NWTOLNG  EQU   NWTOHDR                                                  12758000
NWTOFL   EQU   NWTOHDR+2                                                12759000
NWTORLST EQU   0                                                        12760000
NWTORFL  EQU   NWTORLST+10                                              12761000
NIPSPE   EQU   0                                                        12762000
NIPMNTPL EQU   0                                                        12763000
NMNTDS   EQU   NIPMNTPL                                                 12764000
NMNTVS   EQU   NIPMNTPL+12                                              12765000
NMNTFL   EQU   NIPMNTPL+20                                              12766000
NIPOPNPL EQU   0                                                        12767000
NOPNDS   EQU   NIPOPNPL                                                 12768000
NOPNFL   EQU   NIPOPNPL+20                                              12769000
NIPSCHDL EQU   0                                                        12770000
CDENTRY  EQU   0                                                        12771000
CDXLMJP  EQU   CDENTRY+20                                               12772000
CDATTR   EQU   CDENTRY+28                                               12773000
CDATTR2  EQU   CDENTRY+29                                               12774000
TRHDR    EQU   0                                                        12775000
TRPTR    EQU   TRHDR                                                    12776000
TRBEG    EQU   TRHDR+4                                                  12777000
TREND    EQU   TRHDR+8                                                  12778000
TRSIZE   EQU   TRHDR+12                                                 12779000
IPLDATA  EQU   0                                                        12780000
IPLDVSER EQU   IPLDATA                                                  12781000
IPLDVTOC EQU   IPLDATA+6                                                12782000
IPLDNUCM EQU   IPLDATA+11                                               12783000
IPLDNUCS EQU   IPLDATA+12                                               12784000
IPLDNUCE EQU   IPLDATA+16                                               12785000
GENLIST  EQU   0                                                        12786000
CAT      EQU   0                                                        12787000
CATENTRY EQU   CAT                                                      12788000
CATFLG   EQU   CATENTRY                                                 12789000
CATNOP   EQU   CATFLG                                                   12790000
CATNGEN  EQU   CATFLG                                                   12791000
CATNID   EQU   CATFLG                                                   12792000
CATFLA   EQU   CAT+1                                                    12793000
CATCHID  EQU   CAT+4                                                    12794000
IOCOM    EQU   0                                                        12795000
IOCOMEX  EQU   IOCOM+64                                                 12796000
IOCUCBBM EQU   IOCOM+120                                                12797000
IOCX     EQU   0                                                        12798000
IOX      EQU   IOCX                                                     12799000
IOXHICH  EQU   IOCX+4                                                   12800000
IOXCRHA  EQU   IOCX+12                                                  12801000
LCH      EQU   0                                                        12802000
LCHENTRY EQU   LCH                                                      12803000
LCHTCH   EQU   LCH+16                                                   12804000
LCHFLA   EQU   LCH+21                                                   12805000
UCB      EQU   0                                                        12806000
UCBOB    EQU   0                                                        12807000
UCBJBNR  EQU   UCBOB                                                    12808000
UCBFL5   EQU   UCBOB+1                                                  12809000
UCBAF    EQU   UCBFL5                                                   12810000
UCBSTAT  EQU   UCBOB+3                                                  12811000
UCBPRES  EQU   UCBSTAT                                                  12812000
UCBSYSR  EQU   UCBSTAT                                                  12813000
UCBCHAN  EQU   UCBOB+4                                                  12814000
UCBSFLS  EQU   UCBOB+6                                                  12815000
UCBFLA   EQU   UCBSFLS                                                  12816000
UCBFL1   EQU   UCBFLA                                                   12817000
UCBBSY   EQU   UCBFL1                                                   12818000
UCBNRY   EQU   UCBFL1                                                   12819000
UCBPST   EQU   UCBFL1                                                   12820000
UCBCUB   EQU   UCBFL1                                                   12821000
UCBFLB   EQU   UCBSFLS+1                                                12822000
UCBCHM   EQU   UCBOB+8                                                  12823000
UCBCHM1  EQU   UCBCHM                                                   12824000
UCBPTH0  EQU   UCBCHM1                                                  12825000
UCBPTH1  EQU   UCBCHM1                                                  12826000
UCBLCI   EQU   UCBOB+10                                                 12827000
UCBWGT   EQU   UCBOB+12                                                 12828000
UCBTYP   EQU   UCBOB+16                                                 12829000
UCBTBYT1 EQU   UCBTYP                                                   12830000
UCB1FEA5 EQU   UCBTBYT1                                                 12831000
UCB1FEA6 EQU   UCBTBYT1                                                 12832000
UCBTBYT2 EQU   UCBTYP+1                                                 12833000
UCB2OPT2 EQU   UCBTBYT2                                                 12834000
UCBDUDN1 EQU   UCB2OPT2                                                 12835000
UCB2OPT3 EQU   UCBTBYT2                                                 12836000
UCBDUDN2 EQU   UCB2OPT3                                                 12837000
UCB2OPT4 EQU   UCBTBYT2                                                 12838000
UCBRWTAU EQU   UCB2OPT4                                                 12839000
UCB2OPT6 EQU   UCBTBYT2                                                 12840000
UCB2OPT7 EQU   UCBTBYT2                                                 12841000
UCBTBYT3 EQU   UCBTYP+2                                                 12842000
UCBDVCLS EQU   UCBTBYT3                                                 12843000
UCBTBYT4 EQU   UCBTYP+3                                                 12844000
UCBEXTPT EQU   UCBOB+20                                                 12845000
UCBFLC   EQU   UCBEXTPT                                                 12846000
UCBDEV   EQU   UCBOB+24                                                 12847000
UCBCMEXT EQU   0                                                        12848000
UCBATI   EQU   UCBCMEXT+3                                               12849000
@NM00019 EQU   UCBATI                                                   12850000
UCBFLP1  EQU   UCBCMEXT+5                                               12851000
UCBMT    EQU   0                                                        12852000
UCBOCR   EQU   0                                                        12853000
UCB3540X EQU   0                                                        12854000
UCBDKBYT EQU   UCB3540X+6                                               12855000
UCB3800X EQU   0                                                        12856000
UCBOPTNS EQU   UCB3800X                                                 12857000
UCBACTIV EQU   UCB3800X+3                                               12858000
UCBMDRBF EQU   UCB3800X+36                                              12859000
UCBUCS   EQU   0                                                        12860000
UCBUCSOP EQU   UCBUCS+4                                                 12861000
UCBFCBOP EQU   UCBUCS+5                                                 12862000
DEBBASIC EQU   0                                                        12863000
DEBTCBAD EQU   DEBBASIC                                                 12864000
DEBDEBAD EQU   DEBBASIC+4                                               12865000
DEBIRBAD EQU   DEBBASIC+8                                               12866000
DEBOFLGS EQU   DEBIRBAD                                                 12867000
DEBOPATB EQU   DEBBASIC+12                                              12868000
DEBFLGS1 EQU   DEBBASIC+14                                              12869000
DEBAPFIN EQU   DEBFLGS1                                                 12870000
DEBUSRPG EQU   DEBBASIC+16                                              12871000
DEBRRQ   EQU   DEBBASIC+20                                              12872000
DEBECBAD EQU   DEBRRQ                                                   12873000
DEBDCBAD EQU   DEBBASIC+24                                              12874000
DEBPROTG EQU   DEBDCBAD                                                 12875000
DEBAPPAD EQU   DEBBASIC+28                                              12876000
DEBBASND EQU   DEBBASIC+32                                              12877000
DEBDASD  EQU   0                                                        12878000
DEBUCBAD EQU   DEBDASD                                                  12879000
DEBACSMD EQU   0                                                        12880000
DEBVOLSQ EQU   DEBACSMD                                                 12881000
DEBVOLBT EQU   DEBVOLSQ                                                 12882000
DEBDSNM  EQU   DEBACSMD+4                                               12883000
DEBUTSAA EQU   DEBDSNM                                                  12884000
DEBACS01 EQU   0                                                        12885000
DEBDSNAM EQU   DEBACS01                                                 12886000
DEBACS02 EQU   0                                                        12887000
DEBDBLK  EQU   DEBACS02                                                 12888000
DEBACS03 EQU   0                                                        12889000
DEBACS04 EQU   0                                                        12890000
DEBTBFRA EQU   DEBACS04                                                 12891000
DEBTCCWA EQU   DEBACS04+4                                               12892000
DEBACS05 EQU   0                                                        12893000
DEBFUCBA EQU   DEBACS05                                                 12894000
DEBLUCBA EQU   DEBACS05+4                                               12895000
DEBACS06 EQU   0                                                        12896000
DEBACS07 EQU   0                                                        12897000
DEBACS08 EQU   0                                                        12898000
DEBSUBNM EQU   0                                                        12899000
DEB      EQU   0                                                        12900000
DEBAVT   EQU   DEB                                                      12901000
DEBEOEA  EQU   DEBAVT                                                   12902000
DEBEOEAB EQU   DEBEOEA                                                  12903000
DEBSIOA  EQU   DEBAVT+4                                                 12904000
DEBSIOAB EQU   DEBSIOA                                                  12905000
DEBPCIA  EQU   DEBAVT+8                                                 12906000
DEBPCIAB EQU   DEBPCIA                                                  12907000
DEBCEA   EQU   DEBAVT+12                                                12908000
DEBCEAB  EQU   DEBCEA                                                   12909000
DEBXCEA  EQU   DEBAVT+16                                                12910000
DEBXCEAB EQU   DEBXCEA                                                  12911000
DEBPREFX EQU   DEB+20                                                   12912000
DEBXTNP  EQU   DEBPREFX+8                                               12913000
DEBXTN   EQU   0                                                        12914000
DEBXFLG1 EQU   DEBXTN+2                                                 12915000
ASCB     EQU   0                                                        12916000
ASCBSUPC EQU   ASCB+16                                                  12917000
ASCBSTOR EQU   ASCB+44                                                  12918000
ASCBLDA  EQU   ASCB+48                                                  12919000
ASCBRSM  EQU   ASCB+52                                                  12920000
ASCBRSMF EQU   ASCBRSM                                                  12921000
ASCBFW1  EQU   ASCB+100                                                 12922000
ASCBRCTF EQU   ASCBFW1+2                                                12923000
ASCBFLG1 EQU   ASCBFW1+3                                                12924000
ASCBDSP1 EQU   ASCB+114                                                 12925000
ASCBFLG2 EQU   ASCB+115                                                 12926000
ASCBLKGP EQU   ASCB+128                                                 12927000
ASCBFMCT EQU   ASCB+152                                                 12928000
ASCBSRQ  EQU   ASCB+180                                                 12929000
ASCBSRQ1 EQU   ASCBSRQ                                                  12930000
ASCBSRQ2 EQU   ASCBSRQ+1                                                12931000
ASCBSRQ3 EQU   ASCBSRQ+2                                                12932000
ASCBSRQ4 EQU   ASCBSRQ+3                                                12933000
ASVT     EQU   0                                                        12934000
ASVTASVT EQU   ASVT+512                                                 12935000
ASVTMAXU EQU   ASVT+516                                                 12936000
ASVTFRST EQU   ASVT+524                                                 12937000
ASVTAVAI EQU   ASVTFRST                                                 12938000
ASVTENTY EQU   ASVT+528                                                 12939000
ASXB     EQU   0                                                        12940000
ASXBAEQ  EQU   ASXB+168                                                 12941000
ASXBSECR EQU   ASXB+199                                                 12942000
ASCBSFLG EQU   ASXBSECR                                                 12943000
ASXBCASW EQU   ASXB+216                                                 12944000
ASXBCRB1 EQU   ASXBCASW                                                 12945000
CPAB     EQU   0                                                        12946000
CPABCPID EQU   CPAB                                                     12947000
CPABFLGW EQU   CPAB+16                                                  12948000
CPABFLGS EQU   CPABFLGW+1                                               12949000
NIPBLDCP EQU   CPABFLGS                                                 12950000
CSD      EQU   0                                                        12951000
CSDCSD   EQU   CSD                                                      12952000
CSDCPUJS EQU   CSD+4                                                    12953000
CSDCHAD  EQU   CSD+6                                                    12954000
CSDCPUAL EQU   CSD+8                                                    12955000
CSDSAFF  EQU   CSDCPUAL                                                 12956000
CSDCPUOL EQU   CSD+10                                                   12957000
CSDSCWRD EQU   CSD+12                                                   12958000
CSDSCFL1 EQU   CSDSCWRD                                                 12959000
CSDSCFL2 EQU   CSDSCWRD+1                                               12960000
CSDSCFL3 EQU   CSDSCWRD+2                                               12961000
CSDSCFL4 EQU   CSDSCWRD+3                                               12962000
CSDFLAGS EQU   CSD+23                                                   12963000
CSDMP    EQU   CSDFLAGS                                                 12964000
CSDMASK  EQU   CSD+128                                                  12965000
DQESECT  EQU   0                                                        12966000
DQFQEPTR EQU   DQESECT                                                  12967000
DQEBLKAD EQU   DQESECT+8                                                12968000
DQELNTH  EQU   DQESECT+12                                               12969000
FBQESECT EQU   0                                                        12970000
FWDPTR   EQU   FBQESECT                                                 12971000
BCKPTR   EQU   FBQESECT+4                                               12972000
SIZE     EQU   FBQESECT+8                                               12973000
FBQAREA  EQU   FBQESECT+12                                              12974000
FQESECT  EQU   0                                                        12975000
FQEPTR   EQU   FQESECT                                                  12976000
FQTYPE   EQU   FQEPTR                                                   12977000
FQELNTH  EQU   FQESECT+4                                                12978000
FRRS     EQU   0                                                        12979000
FRRSHEAD EQU   FRRS                                                     12980000
FRRSEMP  EQU   FRRSHEAD                                                 12981000
FRRSLAST EQU   FRRSHEAD+4                                               12982000
FRRSELEN EQU   FRRSHEAD+8                                               12983000
FRRSCURR EQU   FRRSHEAD+12                                              12984000
FRRSRTMW EQU   FRRS+16                                                  12985000
FRRSENTR EQU   0                                                        12986000
FRRSFRRA EQU   FRRSENTR                                                 12987000
FRRSFLGS EQU   FRRSENTR+4                                               12988000
FRRSFLG1 EQU   FRRSFLGS                                                 12989000
GDA      EQU   0                                                        12990000
GVSMFLAG EQU   GDA                                                      12991000
GDAFLAGS EQU   GVSMFLAG                                                 12992000
NIPFOURK EQU   GDAFLAGS                                                 12993000
CSAPQEP  EQU   GDA+8                                                    12994000
VRPQEP   EQU   GDA+12                                                   12995000
PASTRT   EQU   GDA+16                                                   12996000
PASIZE   EQU   GDA+20                                                   12997000
SQASPQEP EQU   GDA+24                                                   12998000
SQASPLFT EQU   GDA+28                                                   12999000
VRPOSTQ  EQU   GDA+32                                                   13000000
VRWAITQ  EQU   GDA+40                                                   13001000
PFSTCPAB EQU   GDA+48                                                   13002000
GLBLCELL EQU   GDA+56                                                   13003000
GBLCELCT EQU   GDA+60                                                   13004000
GSDA     EQU   0                                                        13005000
GSDAASVT EQU   GSDA                                                     13006000
GSDAASVB EQU   GSDAASVT                                                 13007000
GSDAPCCT EQU   GSDA+4                                                   13008000
GSDAPCCB EQU   GSDAPCCT                                                 13009000
GSDAGDA  EQU   GSDA+8                                                   13010000
GSDAGDAB EQU   GSDAGDA                                                  13011000
GSDACSD  EQU   GSDA+12                                                  13012000
GSDACSDB EQU   GSDACSD                                                  13013000
GSDALCCT EQU   GSDA+16                                                  13014000
GSDALCCB EQU   GSDALCCT                                                 13015000
GSDAMAX  EQU   GSDA+20                                                  13016000
@NM00034 EQU   GSDAMAX                                                  13017000
LCCA     EQU   0                                                        13018000
LCCALCCA EQU   LCCA                                                     13019000
LCCACPUA EQU   LCCA+4                                                   13020000
LCCAMCR1 EQU   LCCA+152                                                 13021000
LCCAIHRC EQU   LCCA+520                                                 13022000
LCCAIHR1 EQU   LCCAIHRC                                                 13023000
LCCAIHR2 EQU   LCCAIHRC+1                                               13024000
LCCAIHR3 EQU   LCCAIHRC+2                                               13025000
LCCAIHR4 EQU   LCCAIHRC+3                                               13026000
LCCASPIN EQU   LCCA+524                                                 13027000
LCCASPN1 EQU   LCCASPIN                                                 13028000
LCCASPN2 EQU   LCCASPIN+1                                               13029000
LCCASPN3 EQU   LCCASPIN+2                                               13030000
LCCASPN4 EQU   LCCASPIN+3                                               13031000
LCCACPUS EQU   LCCA+536                                                 13032000
LCCADSF1 EQU   LCCA+540                                                 13033000
LCCADSF2 EQU   LCCA+541                                                 13034000
LCCASPSA EQU   LCCA+544                                                 13035000
LCCACRFL EQU   LCCA+692                                                 13036000
LCCACREX EQU   LCCA+693                                                 13037000
LCCALKFG EQU   LCCA+694                                                 13038000
LCCASRBF EQU   LCCA+720                                                 13039000
LCCAVT   EQU   0                                                        13040000
LCCAT00P EQU   LCCAVT                                                   13041000
LDA      EQU   0                                                        13042000
LVSMFLAG EQU   LDA                                                      13043000
PASCBSV  EQU   LDA+4                                                    13044000
ASDPQE   EQU   LDA+8                                                    13045000
CURRGNTP EQU   LDA+1472                                                 13046000
LDARSVPT EQU   LDA+1480                                                 13047000
LCLCELL  EQU   LDA+1488                                                 13048000
LCLCELCT EQU   LDA+1492                                                 13049000
PCCA     EQU   0                                                        13050000
PCCAPCCA EQU   PCCA                                                     13051000
PCCACPID EQU   PCCA+4                                                   13052000
PCCACPUA EQU   PCCA+16                                                  13053000
PCCACAFM EQU   PCCA+18                                                  13054000
PCCAPSAV EQU   PCCA+24                                                  13055000
PCCAPSAR EQU   PCCA+28                                                  13056000
PCCATMST EQU   PCCA+128                                                 13057000
PCCATMFL EQU   PCCATMST                                                 13058000
PCCATODE EQU   PCCATMST+1                                               13059000
PCCACCE  EQU   PCCATMST+2                                               13060000
PCCAINTE EQU   PCCATMST+3                                               13061000
PCCAEMSB EQU   PCCA+136                                                 13062000
PCCAEMSI EQU   PCCAEMSB                                                 13063000
PCCARISP EQU   PCCAEMSI                                                 13064000
PCCAEMS2 EQU   PCCAEMSI+1                                               13065000
PCCAEMS3 EQU   PCCAEMSI+2                                               13066000
PCCARMSB EQU   PCCAEMSI+3                                               13067000
PCCACHAN EQU   PCCA+224                                                 13068000
PCCAWERP EQU   PCCA+280                                                 13069000
PCCACHPF EQU   PCCAWERP+4                                               13070000
PCCACHBL EQU   PCCAWERP+5                                               13071000
PCCACHVA EQU   PCCAWERP+6                                               13072000
PCCACHTS EQU   PCCAWERP+7                                               13073000
PCCACHS1 EQU   PCCA+288                                                 13074000
PCCACHS2 EQU   PCCA+289                                                 13075000
PCCACHRB EQU   PCCA+290                                                 13076000
PCCACHF1 EQU   PCCA+308                                                 13077000
PCCACHF2 EQU   PCCA+309                                                 13078000
PCCACHF3 EQU   PCCA+310                                                 13079000
PCCACHF4 EQU   PCCA+311                                                 13080000
PCCAATTR EQU   PCCA+376                                                 13081000
PCCAIO   EQU   PCCAATTR                                                 13082000
PCCACAT  EQU   PCCA+384                                                 13083000
PCCAVT   EQU   0                                                        13084000
PCCAT00P EQU   PCCAVT                                                   13085000
PFTE     EQU   0                                                        13086000
PFTPGID  EQU   PFTE                                                     13087000
PFTASID  EQU   PFTPGID                                                  13088000
PFTVBN   EQU   PFTPGID+2                                                13089000
PFTQPTRS EQU   PFTE+4                                                   13090000
PFTFQPTR EQU   PFTQPTRS                                                 13091000
PFTBQPTR EQU   PFTQPTRS+2                                               13092000
PFTFLAG1 EQU   PFTE+12                                                  13093000
PFTLSQA  EQU   PFTFLAG1                                                 13094000
PFTFLAG2 EQU   PFTE+13                                                  13095000
PFTQNDX  EQU   PFTE+14                                                  13096000
PGTPTE   EQU   0                                                        13097000
PGTRSA   EQU   PGTPTE                                                   13098000
PGTBITS  EQU   PGTRSA+1                                                 13099000
PQESECT  EQU   0                                                        13100000
PQEFFBQE EQU   PQESECT                                                  13101000
PQEBFBQE EQU   PQESECT+4                                                13102000
PQEFPQE  EQU   PQESECT+8                                                13103000
PQEBPQE  EQU   PQESECT+12                                               13104000
PQETCB   EQU   PQESECT+16                                               13105000
PQESIZE  EQU   PQESECT+20                                               13106000
PQEREGN  EQU   PQESECT+24                                               13107000
VMMFLGS  EQU   PQESECT+30                                               13108000
VVVRFLG  EQU   VMMFLGS                                                  13109000
PSA      EQU   0                                                        13110000
FLCRNPSW EQU   PSA                                                      13111000
FLCROPSW EQU   PSA+8                                                    13112000
FLCICCW2 EQU   PSA+16                                                   13113000
FLCCVT   EQU   FLCICCW2                                                 13114000
FLCPOPSW EQU   PSA+40                                                   13115000
FLCTRACE EQU   PSA+84                                                   13116000
FLCENPSW EQU   PSA+88                                                   13117000
FLCSNPSW EQU   PSA+96                                                   13118000
FLCPNPSW EQU   PSA+104                                                  13119000
FLCMNPSW EQU   PSA+112                                                  13120000
FLCINPSW EQU   PSA+120                                                  13121000
PSAEEPSW EQU   PSA+132                                                  13122000
PSASPAD  EQU   PSAEEPSW                                                 13123000
PSAESPSW EQU   PSA+136                                                  13124000
FLCSVILC EQU   PSAESPSW+1                                               13125000
PSAEPPSW EQU   PSA+140                                                  13126000
FLCPIILC EQU   PSAEPPSW+1                                               13127000
FLCPICOD EQU   PSAEPPSW+2                                               13128000
PSAPICOD EQU   FLCPICOD+1                                               13129000
FLCTEA   EQU   PSAEPPSW+4                                               13130000
FLCPER   EQU   PSA+152                                                  13131000
FLCMCLA  EQU   PSA+168                                                  13132000
FLCCHNID EQU   FLCMCLA                                                  13133000
FLCCHTM  EQU   FLCCHNID                                                 13134000
FLCIOEL  EQU   FLCMCLA+4                                                13135000
FLCIOA   EQU   FLCMCLA+16                                               13136000
PSAMEDC  EQU   FLCMCLA+76                                               13137000
FLCFSA   EQU   FLCMCLA+80                                               13138000
PSAPSA   EQU   PSA+512                                                  13139000
PSACPUPA EQU   PSA+516                                                  13140000
PSACPULA EQU   PSA+518                                                  13141000
PSAPCCAV EQU   PSA+520                                                  13142000
PSAPCCAR EQU   PSA+524                                                  13143000
PSALCCAV EQU   PSA+528                                                  13144000
PSALCCAR EQU   PSA+532                                                  13145000
PSATNEW  EQU   PSA+536                                                  13146000
PSATOLD  EQU   PSA+540                                                  13147000
PSAANEW  EQU   PSA+544                                                  13148000
PSAAOLD  EQU   PSA+548                                                  13149000
PSASUPER EQU   PSA+552                                                  13150000
PSASUP1  EQU   PSASUPER                                                 13151000
PSASUP2  EQU   PSASUPER+1                                               13152000
PSASUP3  EQU   PSASUPER+2                                               13153000
PSASUP4  EQU   PSASUPER+3                                               13154000
PSACLHT  EQU   PSA+640                                                  13155000
PSALKSA  EQU   PSA+696                                                  13156000
PSAHLHI  EQU   PSA+760                                                  13157000
PSALITA  EQU   PSA+764                                                  13158000
PSACPUSA EQU   PSA+794                                                  13159000
PSASTOR  EQU   PSA+796                                                  13160000
PSADSSFL EQU   PSA+836                                                  13161000
PSADSSF1 EQU   PSADSSFL                                                 13162000
PSADSSF3 EQU   PSADSSFL+2                                               13163000
PSADSSF4 EQU   PSADSSFL+3                                               13164000
PSARSVT  EQU   PSA+896                                                  13165000
PSACDAL  EQU   PSA+1040                                                 13166000
PSASTAK  EQU   PSA+3072                                                 13167000
PVT      EQU   0                                                        13168000
PVTFLAG1 EQU   PVT                                                      13169000
PVTFLAG2 EQU   PVT+1                                                    13170000
PVTPFTP  EQU   PVT+12                                                   13171000
PVTFPFN  EQU   PVT+16                                                   13172000
PVTLPFN  EQU   PVT+18                                                   13173000
PVTLPRIV EQU   PVT+24                                                   13174000
PVTLCSA  EQU   PVT+26                                                   13175000
PVTRSUS  EQU   PVT+44                                                   13176000
PVTPCIWA EQU   PVT+64                                                   13177000
PVTPCB   EQU   PVT+104                                                  13178000
PVTQS    EQU   PVT+304                                                  13179000
PVTSQAQF EQU   PVTQS+12                                                 13180000
PVTSQAQL EQU   PVTQS+14                                                 13181000
PVTWSAX  EQU   PVT+344                                                  13182000
RBPRFX   EQU   0                                                        13183000
RBBASIC  EQU   0                                                        13184000
RBEXRTNM EQU   RBBASIC                                                  13185000
RBTMFLD  EQU   RBEXRTNM                                                 13186000
RBSTAB   EQU   RBBASIC+10                                               13187000
XSTAB    EQU   RBSTAB                                                   13188000
RBSTAB1  EQU   XSTAB                                                    13189000
XSTAB1   EQU   RBSTAB1                                                  13190000
RBFTCKPT EQU   XSTAB1                                                   13191000
RBSTAB2  EQU   XSTAB+1                                                  13192000
XSTAB2   EQU   RBSTAB2                                                  13193000
RBTCBNXT EQU   XSTAB2                                                   13194000
RBFACTV  EQU   XSTAB2                                                   13195000
RBFDYN   EQU   XSTAB2                                                   13196000
RBECBWT  EQU   XSTAB2                                                   13197000
RBOPSW   EQU   RBBASIC+16                                               13198000
XRBPSW   EQU   RBOPSW                                                   13199000
RBOPSWB2 EQU   XRBPSW+1                                                 13200000
RBLINK   EQU   RBBASIC+28                                               13201000
XRBLNK   EQU   RBLINK                                                   13202000
RBWCF    EQU   XRBLNK                                                   13203000
RBLINKB  EQU   XRBLNK+1                                                 13204000
RBGRSAVE EQU   RBBASIC+32                                               13205000
XRBREG   EQU   RBGRSAVE                                                 13206000
RBGRS0   EQU   XRBREG                                                   13207000
RBGRS1   EQU   XRBREG+4                                                 13208000
RBGRS2   EQU   XRBREG+8                                                 13209000
RBGRS3   EQU   XRBREG+12                                                13210000
RBGRS4   EQU   XRBREG+16                                                13211000
RBGRS5   EQU   XRBREG+20                                                13212000
RBGRS6   EQU   XRBREG+24                                                13213000
RBGRS7   EQU   XRBREG+28                                                13214000
RBGRS8   EQU   XRBREG+32                                                13215000
RBGRS9   EQU   XRBREG+36                                                13216000
RBGRS10  EQU   XRBREG+40                                                13217000
RBGRS11  EQU   XRBREG+44                                                13218000
RBGRS12  EQU   XRBREG+48                                                13219000
RBGRS13  EQU   XRBREG+52                                                13220000
RBGRS14  EQU   XRBREG+56                                                13221000
RBGRS15  EQU   XRBREG+60                                                13222000
XRBESA   EQU   RBBASIC+96                                               13223000
RBPREFIX EQU   0                                                        13224000
RBRSV019 EQU   RBPREFIX+14                                              13225000
RBRSV028 EQU   RBPREFIX+15                                              13226000
RBRSV041 EQU   RBPREFIX+27                                              13227000
RBRSV054 EQU   RBPREFIX+39                                              13228000
RBRTOPSW EQU   RBPREFIX+40                                              13229000
RBRTPSW2 EQU   RBRTOPSW+8                                               13230000
RBRTICIL EQU   RBRTPSW2                                                 13231000
RBFLAGS1 EQU   RBPREFIX+56                                              13232000
RBINTCDA EQU   RBPREFIX+61                                              13233000
RBSECT   EQU   0                                                        13234000
RBPPSAV  EQU   RBSECT                                                   13235000
@NM00093 EQU   RBSECT+10                                                13236000
@NM00094 EQU   @NM00093                                                 13237000
RBTRSVRB EQU   @NM00094                                                 13238000
@NM00096 EQU   @NM00093+1                                               13239000
RBETXR   EQU   @NM00096                                                 13240000
RBEP     EQU   RBSECT+12                                                13241000
RBPGMQ   EQU   RBSECT+24                                                13242000
@NM00103 EQU   RBSECT+28                                                13243000
@NM00104 EQU   @NM00103                                                 13244000
IRBEND   EQU   RBSECT+96                                                13245000
@NM00107 EQU   RBSECT+96                                                13246000
RBRSV138 EQU   @NM00107+7                                               13247000
RBSCBB   EQU   RBSECT+144                                               13248000
RBSPARM  EQU   RBSCBB+8                                                 13249000
RBSFLGS1 EQU   RBSPARM                                                  13250000
RBSIOPRC EQU   RBSFLGS1                                                 13251000
RBSOWNR  EQU   RBSCBB+12                                                13252000
RBSFLGS2 EQU   RBSOWNR                                                  13253000
RBSDATA  EQU   RBSCBB+16                                                13254000
RBSFLG3  EQU   RBSDATA                                                  13255000
RBRSV150 EQU   RBSECT+167                                               13256000
RSMHD    EQU   0                                                        13257000
RSMVSTO  EQU   RSMHD                                                    13258000
RSMFLG1  EQU   RSMHD+12                                                 13259000
RSMQS    EQU   RSMHD+20                                                 13260000
RSMLFQ   EQU   RSMQS                                                    13261000
RSMLSQA  EQU   RSMQS+4                                                  13262000
RSMLSQAF EQU   RSMLSQA                                                  13263000
RSMLSQAL EQU   RSMLSQA+2                                                13264000
RSMLIOQ  EQU   RSMQS+8                                                  13265000
RTMBRTAB EQU   0                                                        13266000
RTMBTERM EQU   RTMBRTAB                                                 13267000
SCVTSECT EQU   0                                                        13268000
SCVTRPTR EQU   SCVTSECT+64                                              13269000
SGTSTE   EQU   0                                                        13270000
SGTLK    EQU   SGTSTE                                                   13271000
SGTPTO   EQU   SGTSTE+1                                                 13272000
SGTBYTE  EQU   SGTPTO+2                                                 13273000
SPQESECT EQU   0                                                        13274000
SPQEAD   EQU   SPQESECT                                                 13275000
SPDQEPTR EQU   SPQESECT+4                                               13276000
SPDQEAD  EQU   SPDQEPTR                                                 13277000
SPQEFLGS EQU   SPQESECT+8                                               13278000
SPQEID   EQU   SPQESECT+10                                              13279000
SSRBSECT EQU   0                                                        13280000
SRBSECT  EQU   SSRBSECT                                                 13281000
SRB      EQU   SRBSECT                                                  13282000
SRBFLC   EQU   SRB+12                                                   13283000
SSRB     EQU   SSRBSECT+48                                              13284000
SSRBFPRS EQU   SSRB+8                                                   13285000
SSRBFLG1 EQU   SSRB+704                                                 13286000
SVCENTRY EQU   0                                                        13287000
SVCEP    EQU   SVCENTRY                                                 13288000
SVCATTR1 EQU   SVCENTRY+4                                               13289000
SVCATTR2 EQU   SVCENTRY+6                                               13290000
SVCLL    EQU   SVCATTR2                                                 13291000
XPTE     EQU   0                                                        13292000
XPTFLAGS EQU   XPTE+2                                                   13293000
XPTFLAG2 EQU   XPTE+3                                                   13294000
XPTLPID  EQU   XPTE+4                                                   13295000
XPTLGN   EQU   XPTLPID                                                  13296000
XPTLPN   EQU   XPTLPID+4                                                13297000
TCBFIX   EQU   0                                                        13298000
TCBFRS   EQU   TCBFIX                                                   13299000
TCB      EQU   0                                                        13300000
TCBPIE   EQU   TCB+4                                                    13301000
TCBPMASK EQU   TCBPIE                                                   13302000
TCBCMP   EQU   TCB+16                                                   13303000
TCBCMPF  EQU   TCBCMP                                                   13304000
TCBCPP   EQU   TCBCMPF                                                  13305000
TCBSTCC  EQU   TCBCMPF                                                  13306000
TCBCDBL  EQU   TCBCMPF                                                  13307000
TCBCWTO  EQU   TCBCMPF                                                  13308000
TCBCIND  EQU   TCBCMPF                                                  13309000
TCBCMSG  EQU   TCBCMPF                                                  13310000
TCBTRN   EQU   TCB+20                                                   13311000
TCBABF   EQU   TCBTRN                                                   13312000
TCBMSS   EQU   TCB+24                                                   13313000
TCBPKF   EQU   TCB+28                                                   13314000
TCBFLGS  EQU   TCB+29                                                   13315000
TCBFLGS1 EQU   TCBFLGS                                                  13316000
TCBFLGS2 EQU   TCBFLGS+1                                                13317000
TCBFLGS3 EQU   TCBFLGS+2                                                13318000
TCBABTRM EQU   TCBFLGS3                                                 13319000
TCBFLGS4 EQU   TCBFLGS+3                                                13320000
TCBFLGS5 EQU   TCBFLGS+4                                                13321000
TCBABWF  EQU   TCBFLGS5                                                 13322000
TCBJPQ   EQU   TCB+44                                                   13323000
TCBPURGE EQU   TCBJPQ                                                   13324000
TCBGRS   EQU   TCB+48                                                   13325000
TCBFSA   EQU   TCB+112                                                  13326000
TCBTME   EQU   TCB+120                                                  13327000
TCBJSTCB EQU   TCB+124                                                  13328000
TCBTSFLG EQU   TCB+148                                                  13329000
TCBTSTSK EQU   TCBTSFLG                                                 13330000
TCBPQE   EQU   TCB+152                                                  13331000
TCBSTAB  EQU   TCB+160                                                  13332000
TCBNSTAE EQU   TCBSTAB                                                  13333000
TCBTCT   EQU   TCB+164                                                  13334000
TCBTCTGF EQU   TCBTCT                                                   13335000
TCBSCNDY EQU   TCB+172                                                  13336000
TCBNDSP  EQU   TCBSCNDY                                                 13337000
TCBNDSP1 EQU   TCBNDSP+1                                                13338000
TCBNDSP2 EQU   TCBNDSP+2                                                13339000
TCBNDSP3 EQU   TCBNDSP+3                                                13340000
TCBJSCB  EQU   TCB+180                                                  13341000
TCBRECDE EQU   TCBJSCB                                                  13342000
TCBEXT1  EQU   TCB+196                                                  13343000
TCBBITS  EQU   TCB+200                                                  13344000
TCBNDSP4 EQU   TCBBITS                                                  13345000
TCBNDSP5 EQU   TCBBITS+1                                                13346000
TCBFLGS6 EQU   TCBBITS+2                                                13347000
TCBFLGS7 EQU   TCBBITS+3                                                13348000
TCBDAR   EQU   TCB+204                                                  13349000
TCBDARC  EQU   TCBDAR                                                   13350000
TCBEXT2  EQU   TCB+208                                                  13351000
TCBXSCT  EQU   TCB+240                                                  13352000
TCBXSCT1 EQU   TCBXSCT                                                  13353000
TCBFOE   EQU   TCB+244                                                  13354000
TCBESTAE EQU   TCB+264                                                  13355000
TCBESTRM EQU   TCBESTAE+1                                               13356000
TCBFBYT1 EQU   TCB+276                                                  13357000
TCBFBYT2 EQU   TCB+277                                                  13358000
TCBRV124 EQU   TCB+278                                                  13359000
TCBRV133 EQU   TCB+279                                                  13360000
TCBXTNT2 EQU   0                                                        13361000
TCBGTF   EQU   TCBXTNT2                                                 13362000
TCBTFLG  EQU   TCBGTF                                                   13363000
TCBRV146 EQU   TCBXTNT2+28                                              13364000
TCBRV155 EQU   TCBXTNT2+29                                              13365000
TCBRV164 EQU   TCBXTNT2+30                                              13366000
TCBRV173 EQU   TCBXTNT2+31                                              13367000
NPRSMSA  EQU   0                                                        13368000
NP0STMAP EQU   0                                                        13369000
NCPIDFM  EQU   0                                                        13370000
NP0SMFA  EQU   0                                                        13371000
PCCVTENT EQU   0                                                        13372000
LCCVTENT EQU   0                                                        13373000
NP0MPBYT EQU   0                                                        13374000
CDAL     EQU   0                                                        13375000
@NM00155 EQU   0                                                        13376000
GSCOUNT  EQU   @NM00155+128                                             13377000
GSCNT    EQU   GSCOUNT                                                  13378000
GSQUEUE  EQU   @NM00155+152                                             13379000
GSQUEPT  EQU   GSQUEUE                                                  13380000
GSBLOCKB EQU   @NM00155+176                                             13381000
GSBLOCKE EQU   @NM00155+180                                             13382000
CELLPTR  EQU   0                                                        13383000
ENQLIBTB EQU   0                                                        13384000
CHAINPTR EQU   0                                                        13385000
NP0BATAB EQU   0                                                        13386000
NP0WPSW  EQU   0                                                        13387000
NWTPSWD1 EQU   NP0WPSW                                                  13388000
NPSWMAP  EQU   0                                                        13389000
NPSWAIT  EQU   NPSWMAP+1                                                13390000
NP0DISP  EQU   0                                                        13391000
NCPITABE EQU   0                                                        13392000
NPOOLID  EQU   NCPITABE                                                 13393000
NCELLNO  EQU   NCPITABE+4                                               13394000
NCELLSZ  EQU   NCPITABE+8                                               13395000
NSUBPOOL EQU   NCPITABE+12                                              13396000
MSGAMAP  EQU   0                                                        13397000
MSGACPAD EQU   MSGAMAP+31                                               13398000
MSGASTAR EQU   MSGAMAP+43                                               13399000
MSGCMAP  EQU   0                                                        13400000
MSGCCPAD EQU   MSGCMAP+31                                               13401000
MSGCRETC EQU   MSGCMAP+41                                               13402000
NPMSGPTR EQU   0                                                        13403000
NMSGCPAD EQU   0                                                        13404000
NMSGCOMA EQU   NMSGCPAD                                                 13405000
NMSGCPUA EQU   NMSGCPAD+1                                               13406000
NP0BCPSW EQU   0                                                        13407000
NP0INTCD EQU   NP0BCPSW+3                                               13408000
NP0TABE  EQU   0                                                        13409000
NP0LNGTH EQU   NP0TABE                                                  13410000
NP0RADDR EQU   NP0TABE+4                                                13411000
NP0VADDR EQU   NP0TABE+8                                                13412000
WSAG     EQU   0                                                        13413000
WSAGGMFM EQU   WSAG+4                                                   13414000
WSAGNQDQ EQU   WSAG+32                                                  13415000
LGTHTBL  EQU   0                                                        13416000
NUM      EQU   LGTHTBL                                                  13417000
LGTH     EQU   LGTHTBL+2                                                13418000
FSIZE    EQU   LGTHTBL+4                                                13419000
SVPTR    EQU   0                                                        13420000
NWSASIZE EQU   0                                                        13421000
NGRTCA   EQU   0                                                        13422000
GRTCA    EQU   0                                                        13423000
CHLABYTE EQU   0                                                        13424000
NP0PSAFR EQU   0                                                        13425000
NP0PSATO EQU   0                                                        13426000
PGTEND   EQU   0                                                        13427000
SGTEND   EQU   0                                                        13428000
UCBBGN   EQU   0                                                        13429000
FREEPTR  EQU   0                                                        13430000
CVTS01   EQU   CVTPGSIA                                                 13431000
CVTPVTP  EQU   CVTS01+8                                                 13432000
CVTLPDIA EQU   CVTS01+12                                                13433000
CVTDIRST EQU   CVTLPDIA                                                 13434000
CVTSLIDA EQU   CVTS01+24                                                13435000
CVTCTLFG EQU   CVTS01+50                                                13436000
CVTNOMP  EQU   CVTCTLFG                                                 13437000
CVTTRACE EQU   CVTS01+52                                                13438000
CVTSHRVM EQU   CVTS01+68                                                13439000
CVTBLDCP EQU   CVTS01+140                                               13440000
CVTASVT  EQU   CVTS01+208                                               13441000
CVTGDA   EQU   CVTS01+212                                               13442000
CVTSV60  EQU   CVTS01+228                                               13443000
CVTCSD   EQU   CVTS01+312                                               13444000
CVTGLMN  EQU   CVTS01+332                                               13445000
CVTSPSA  EQU   CVTS01+336                                               13446000
CVTWSAC  EQU   CVTS01+348                                               13447000
CVTRSTWD EQU   CVTS01+368                                               13448000
CVTIPCDS EQU   CVTS01+404                                               13449000
CVTPCCAT EQU   CVTS01+416                                               13450000
CVTLCCAT EQU   CVTS01+420                                               13451000
CVTRV210 EQU   CVTS01+424                                               13452000
CVTRV219 EQU   CVTS01+425                                               13453000
CVTRV228 EQU   CVTS01+426                                               13454000
CVTRV237 EQU   CVTS01+427                                               13455000
CVTMFRTR EQU   CVTS01+452                                               13456000
CVTRV262 EQU   CVTS01+468                                               13457000
CVTRV271 EQU   CVTS01+469                                               13458000
CVTRV280 EQU   CVTS01+470                                               13459000
CVTRV289 EQU   CVTS01+471                                               13460000
CVTTRCA  EQU   CVTS01+472                                               13461000
CVTRLSTG EQU   CVTS01+508                                               13462000
CVTSPFRR EQU   CVTS01+512                                               13463000
CVTCSDRL EQU   CVTS01+576                                               13464000
CVTGSDA  EQU   CVTS01+600                                               13465000
CVTGSDAB EQU   CVTGSDA                                                  13466000
CVTCDAL  EQU   CVTS01+684                                               13467000
NIPDCBSN EQU   NPBNOFLG                                                 13468000
UCBOBS01 EQU   UCBDEV                                                   13469000
UCBVTOC  EQU   UCBOBS01                                                 13470000
UCBVOLI  EQU   UCBOBS01+4                                               13471000
UCBSTAB  EQU   UCBOBS01+10                                              13472000
UCBBSVL  EQU   UCBSTAB                                                  13473000
UCBPRSRS EQU   UCBSTAB                                                  13474000
UCBDMCT  EQU   UCBOBS01+11                                              13475000
UCBFL4   EQU   UCBOBS01+13                                              13476000
UCBOBS02 EQU   UCBDEV                                                   13477000
UCBTFL1  EQU   UCBOBS02+19                                              13478000
UCBXTN   EQU   UCBOBS02+20                                              13479000
UCBVOPT  EQU   UCBXTN                                                   13480000
UCBOBS03 EQU   UCBDEV                                                   13481000
UCBXTADR EQU   UCBOBS03                                                 13482000
UCBOBS04 EQU   UCBDEV                                                   13483000
UCBBTA   EQU   UCBOBS04+12                                              13484000
UCBOBS06 EQU   UCBDEV                                                   13485000
UCBAOF   EQU   UCBOBS06                                                 13486000
UCBAOF1  EQU   UCBAOF                                                   13487000
UCBAOF2  EQU   UCBAOF+1                                                 13488000
@NM00018 EQU   UCBOBS06+3                                               13489000
UCBIRB   EQU   UCBOBS06+4                                               13490000
UCBGRAF  EQU   UCBIRB                                                   13491000
UCBLDNCA EQU   UCBOBS06+8                                               13492000
UCBRDYQ  EQU   UCBLDNCA                                                 13493000
UCBIRLN  EQU   UCBRDYQ                                                  13494000
UCBLDNCB EQU   UCBRDYQ+1                                                13495000
UCBCTLNK EQU   UCBOBS06+12                                              13496000
UCBOBS07 EQU   UCBDEV                                                   13497000
UCBOBS08 EQU   UCBDEV                                                   13498000
UCBCTCAD EQU   UCBOBS08                                                 13499000
UCBCTCF1 EQU   UCBOBS08+4                                               13500000
UCBOBS09 EQU   UCBDEV                                                   13501000
DEBBAS02 EQU   DEBBASND                                                 13502000
DEBDDS1  EQU   DEBBAS02                                                 13503000
DEBSUCBA EQU   DEBDDS1                                                  13504000
DEBDEVED EQU   DEBDDS1+4                                                13505000
DEBRDCB  EQU   DEBDDS1+4                                                13506000
DEBPDCB  EQU   DEBDDS1+8                                                13507000
DEBWDCB  EQU   DEBDDS1+12                                               13508000
DEBACS09 EQU   DEBDEVED                                                 13509000
DEBASC09 EQU   DEBACS09                                                 13510000
DEBEAMFG EQU   DEBASC09+3                                               13511000
DEBDSID  EQU   DEBASC09+4                                               13512000
DEBEOD   EQU   DEBASC09+12                                              13513000
DEBBOE   EQU   DEBEOD                                                   13514000
DEBEODRV EQU   DEBBOE                                                   13515000
DEBEODTT EQU   DEBBOE+1                                                 13516000
DEBEOD0  EQU   DEBBOE+2                                                 13517000
DEBEODSS EQU   DEBBOE+3                                                 13518000
DEBBAS01 EQU   DEBBASND                                                 13519000
DEBISAM  EQU   DEBBAS01                                                 13520000
DEBFIEAD EQU   DEBISAM                                                  13521000
DEBFPEAD EQU   DEBISAM+4                                                13522000
DEBFOEAD EQU   DEBISAM+8                                                13523000
DEBEXPT  EQU   DEBISAM+12                                               13524000
DEBRPSID EQU   DEBEXPT                                                  13525000
FLC      EQU   PSA                                                      13526000
PSARSVTE EQU   PSARSVT                                                  13527000
PSACSTK  EQU   PSARSVTE                                                 13528000
PSANSTK  EQU   PSARSVTE+4                                               13529000
PSARSTK  EQU   PSARSVTE+56                                              13530000
RBSECS03 EQU   RBEP                                                     13531000
RBCDE    EQU   RBSECS03                                                 13532000
RBCDFLGS EQU   RBCDE                                                    13533000
RBSECS05 EQU   RBPGMQ                                                   13534000
RBSQE    EQU   RBSECS05                                                 13535000
RBSECS06 EQU   RBPGMQ                                                   13536000
RBIQE    EQU   RBSECS06                                                 13537000
RBSECS07 EQU   RBPGMQ                                                   13538000
RBIQE2   EQU   RBSECS07                                                 13539000
RBSECS08 EQU   IRBEND                                                   13540000
RBSECS09 EQU   IRBEND                                                   13541000
NP0NSTCH EQU   NPBNSTCC                                                 13542000
NP0NNDCH EQU   NPBNNDCC                                                 13543000
TCHWORK2 EQU   TCHWORK1                                                 13544000
@NM00161 EQU   FLCINPSW                                                 13545000
BCMODE   EQU   @NM00161+1                                               13546000
IOFLUSH  EQU   @NM00161+4                                               13547000
NRTCDMAP EQU   NRETCDSA                                                 13548000
NCPMSKMP EQU   NCPMSKTB                                                 13549000
CSDMSKMP EQU   CSDMASK                                                  13550000
NIPLNUCS EQU   IPLDNUCS                                                 13551000
NIPLNUCE EQU   IPLDNUCE                                                 13552000
NP0WORK  EQU   NP0CPUID                                                 13553000
NP07     EQU   NP0WORK                                                  13554000
STKADDR  EQU   PSACSTK                                                  13555000
STKLW3BT EQU   STKADDR+3                                                13556000
SVCLOCKS EQU   SVCATTR2                                                 13557000
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS    13558000
@NM00320 EQU   STKADDR                                                  13559000
@NM00276 EQU   NP0WORK+7                                                13560000
NRETCONV EQU   NRTCDMAP+3                                               13561000
@NM00171 EQU   NRTCDMAP                                                 13562000
@NM00162 EQU   @NM00161+2                                               13563000
SAVMSK   EQU   @NM00161                                                 13564000
TCHCHAD  EQU   TCHWORK2+1                                               13565000
@NM00160 EQU   TCHWORK2                                                 13566000
RBRSV161 EQU   RBSECS09+64                                              13567000
RBSIRBWA EQU   RBSECS09                                                 13568000
RBIQEWRK EQU   RBSECS08+4                                               13569000
RBNEXAV  EQU   RBSECS08                                                 13570000
RBIQEA   EQU   RBIQE2                                                   13571000
RBIQE1   EQU   RBIQE+1                                                  13572000
RBUSE    EQU   RBIQE                                                    13573000
RBSQEA   EQU   RBSQE+1                                                  13574000
@NM00108 EQU   RBSQE                                                    13575000
RBCDE1   EQU   RBCDE+1                                                  13576000
RBCDLOAD EQU   RBCDFLGS                                                 13577000
RBCDXCTL EQU   RBCDFLGS                                                 13578000
RBCDSYNC EQU   RBCDFLGS                                                 13579000
RBCDNODE EQU   RBCDFLGS                                                 13580000
RBRSV010 EQU   RBCDFLGS                                                 13581000
RBCDATCH EQU   RBCDFLGS                                                 13582000
RBRSV009 EQU   RBCDFLGS                                                 13583000
RBNOCELL EQU   RBCDFLGS                                                 13584000
PSARSAV  EQU   PSARSVTE+60                                              13585000
PSAESAV3 EQU   PSARSVTE+52                                              13586000
PSAESTK3 EQU   PSARSVTE+48                                              13587000
PSAESAV2 EQU   PSARSVTE+44                                              13588000
PSAESTK2 EQU   PSARSVTE+40                                              13589000
PSAESAV1 EQU   PSARSVTE+36                                              13590000
PSAESTK1 EQU   PSARSVTE+32                                              13591000
PSAPSAV  EQU   PSARSVTE+28                                              13592000
PSAPSTK  EQU   PSARSVTE+24                                              13593000
PSAMSAV  EQU   PSARSVTE+20                                              13594000
PSAMSTK  EQU   PSARSVTE+16                                              13595000
PSASSAV  EQU   PSARSVTE+12                                              13596000
PSASSTK  EQU   PSARSVTE+8                                               13597000
DEBEXPTA EQU   DEBEXPT+1                                                13598000
DEBRSV12 EQU   DEBRPSID                                                 13599000
DEBRSV11 EQU   DEBRPSID                                                 13600000
DEBRSV10 EQU   DEBRPSID                                                 13601000
DEBRSV09 EQU   DEBRPSID                                                 13602000
DEBRPSAP EQU   DEBRPSID                                                 13603000
DEBRPSO  EQU   DEBRPSID                                                 13604000
DEBRPSI  EQU   DEBRPSID                                                 13605000
DEBRPSP  EQU   DEBRPSID                                                 13606000
DEBFOEB  EQU   DEBFOEAD+1                                               13607000
DEBNOEE  EQU   DEBFOEAD                                                 13608000
DEBFPEB  EQU   DEBFPEAD+1                                               13609000
DEBNPEE  EQU   DEBFPEAD                                                 13610000
DEBFIEB  EQU   DEBFIEAD+1                                               13611000
DEBNIEE  EQU   DEBFIEAD                                                 13612000
DEBBOESS EQU   DEBEODSS                                                 13613000
DEBBOE0  EQU   DEBEOD0                                                  13614000
DEBBOETT EQU   DEBEODTT                                                 13615000
DEBBOERV EQU   DEBEODRV                                                 13616000
DEBRV008 EQU   DEBDSID+7                                                13617000
DEBWTPTI EQU   DEBDSID+6                                                13618000
DEBEXDTE EQU   DEBDSID                                                  13619000
DEBRV007 EQU   DEBEAMFG                                                 13620000
DEBRV006 EQU   DEBEAMFG                                                 13621000
DEBRV005 EQU   DEBEAMFG                                                 13622000
DEBRV004 EQU   DEBEAMFG                                                 13623000
DEBSECVL EQU   DEBEAMFG                                                 13624000
DEBVAMSG EQU   DEBEAMFG                                                 13625000
DEBDSOPN EQU   DEBEAMFG                                                 13626000
DEBMULTI EQU   DEBEAMFG                                                 13627000
DEBVSEQU EQU   DEBASC09+2                                               13628000
DEBDSSQL EQU   DEBASC09+1                                               13629000
DEBVOLAC EQU   DEBASC09                                                 13630000
DEBWDCBA EQU   DEBWDCB+1                                                13631000
DEBRSV08 EQU   DEBWDCB                                                  13632000
DEBPDCBA EQU   DEBPDCB+1                                                13633000
DEBRSV07 EQU   DEBPDCB                                                  13634000
DEBRDCBA EQU   DEBRDCB+1                                                13635000
DEBRSV06 EQU   DEBRDCB                                                  13636000
DEBSUCBB EQU   DEBSUCBA+1                                               13637000
DEBSDVM  EQU   DEBSUCBA                                                 13638000
UCBRV066 EQU   UCBOBS09+4                                               13639000
UCBIOSBA EQU   UCBOBS09                                                 13640000
UCBRV042 EQU   UCBOBS08+5                                               13641000
UCBRV082 EQU   UCBCTCF1                                                 13642000
UCBRV081 EQU   UCBCTCF1                                                 13643000
UCBRV080 EQU   UCBCTCF1                                                 13644000
UCBRV079 EQU   UCBCTCF1                                                 13645000
UCBRV078 EQU   UCBCTCF1                                                 13646000
UCBRV077 EQU   UCBCTCF1                                                 13647000
UCBRV076 EQU   UCBCTCF1                                                 13648000
UCBCTC80 EQU   UCBCTCF1                                                 13649000
UCBCTCAL EQU   UCBCTCAD                                                 13650000
UCBICNCB EQU   UCBOBS07+4                                               13651000
UCBRV040 EQU   UCBOBS07                                                 13652000
UCBCTLNA EQU   UCBCTLNK+1                                               13653000
UCBRLN   EQU   UCBCTLNK                                                 13654000
UCBRDYQA EQU   UCBLDNCB                                                 13655000
UCBINRLN EQU   UCBIRLN                                                  13656000
UCBIRBA  EQU   UCBIRB+1                                                 13657000
UCBRV039 EQU   UCBGRAF                                                  13658000
UCBDWNR  EQU   UCBGRAF                                                  13659000
UCBRPND  EQU   UCBGRAF                                                  13660000
UCBUPM   EQU   UCBGRAF                                                  13661000
UCBBTAM  EQU   UCBGRAF                                                  13662000
UCBDRNO  EQU   UCBGRAF                                                  13663000
UCBDRO   EQU   UCBGRAF                                                  13664000
UCBOIP   EQU   UCBGRAF                                                  13665000
UCBATRCD EQU   @NM00018                                                 13666000
UCBSKPFG EQU   @NM00018                                                 13667000
UCBRIPND EQU   @NM00018                                                 13668000
UCBRTIAC EQU   @NM00018                                                 13669000
UCBRSV79 EQU   @NM00018                                                 13670000
UCBRSV78 EQU   @NM00018                                                 13671000
UCBRSV77 EQU   @NM00018                                                 13672000
UCBOLTEP EQU   @NM00018                                                 13673000
UCBATNCT EQU   UCBOBS06+2                                               13674000
UCBRSV76 EQU   UCBAOF2                                                  13675000
UCBRSV75 EQU   UCBAOF2                                                  13676000
UCBRSV74 EQU   UCBAOF2                                                  13677000
UCBRSV73 EQU   UCBAOF2                                                  13678000
UCBRSV72 EQU   UCBAOF2                                                  13679000
UCBRSV71 EQU   UCBAOF2                                                  13680000
UCBRSV70 EQU   UCBAOF2                                                  13681000
UCBRSV69 EQU   UCBAOF2                                                  13682000
UCBRSV68 EQU   UCBAOF1                                                  13683000
UCBRSV67 EQU   UCBAOF1                                                  13684000
UCBRSV66 EQU   UCBAOF1                                                  13685000
UCBRSV65 EQU   UCBAOF1                                                  13686000
UCBRSV64 EQU   UCBAOF1                                                  13687000
UCBOFNL  EQU   UCBAOF1                                                  13688000
UCBOFSP  EQU   UCBAOF1                                                  13689000
UCBOFMCR EQU   UCBAOF1                                                  13690000
UCBBTB   EQU   UCBBTA+1                                                 13691000
UCBDI    EQU   UCBBTA                                                   13692000
UCBSNS   EQU   UCBOBS04+8                                               13693000
UCBTEB   EQU   UCBOBS04+4                                               13694000
UCBGCB   EQU   UCBOBS04+3                                               13695000
UCBOPEN  EQU   UCBOBS04+2                                               13696000
UCBSTART EQU   UCBOBS04                                                 13697000
UCBXTNB  EQU   UCBXTN+1                                                 13698000
UCBRSV22 EQU   UCBVOPT                                                  13699000
UCBRSV21 EQU   UCBVOPT                                                  13700000
UCBRSV20 EQU   UCBVOPT                                                  13701000
UCBESVE  EQU   UCBVOPT                                                  13702000
UCBERPC  EQU   UCBVOPT                                                  13703000
UCBESVC  EQU   UCBVOPT                                                  13704000
UCBEVA   EQU   UCBVOPT                                                  13705000
UCBESV   EQU   UCBVOPT                                                  13706000
UCBRV009 EQU   UCBTFL1                                                  13707000
UCBRV008 EQU   UCBTFL1                                                  13708000
UCBRV007 EQU   UCBTFL1                                                  13709000
UCBRV006 EQU   UCBTFL1                                                  13710000
UCBRV005 EQU   UCBTFL1                                                  13711000
UCBDQDSP EQU   UCBTFL1                                                  13712000
UCBNSLTP EQU   UCBTFL1                                                  13713000
UCBNLTP  EQU   UCBTFL1                                                  13714000
UCBRES1B EQU   UCBOBS02+18                                              13715000
UCBFSER  EQU   UCBOBS02+12                                              13716000
@NM00017 EQU   UCBOBS02+4                                               13717000
UCBFSEQ  EQU   UCBOBS02+2                                               13718000
UCBFSCT  EQU   UCBOBS02                                                 13719000
UCBNEXP  EQU   UCBOBS01+20                                              13720000
UCBBASE  EQU   UCBOBS01+16                                              13721000
UCBRES1A EQU   UCBOBS01+15                                              13722000
UCBUSER  EQU   UCBOBS01+14                                              13723000
UCBFL47  EQU   UCBFL4                                                   13724000
UCBMAT   EQU   UCBFL4                                                   13725000
UCBHOLD  EQU   UCBFL4                                                   13726000
UCBATTN  EQU   UCBFL4                                                   13727000
UCBDSS   EQU   UCBFL4                                                   13728000
UCBRESVP EQU   UCBFL4                                                   13729000
UCBWDAV  EQU   UCBFL4                                                   13730000
UCBDAVV  EQU   UCBFL4                                                   13731000
UCBSQC   EQU   UCBOBS01+12                                              13732000
UCBDATP  EQU   UCBOBS01+12                                              13733000
UCBDMC   EQU   UCBDMCT                                                  13734000
UCBMOUNT EQU   UCBDMCT                                                  13735000
UCBBNUL  EQU   UCBSTAB                                                  13736000
UCBSHAR  EQU   UCBSTAB                                                  13737000
UCBBSTR  EQU   UCBSTAB                                                  13738000
UCBBPUB  EQU   UCBSTAB                                                  13739000
UCBBPRV  EQU   UCBSTAB                                                  13740000
UCBBALB  EQU   UCBPRSRS                                                 13741000
UCBPGFL  EQU   UCBSTAB                                                  13742000
UCBDVSHR EQU   UCBBSVL                                                  13743000
NPBNDCB  EQU   NIPDCBSN                                                 13744000
CVTRV628 EQU   CVTS01+728                                               13745000
CVTRV627 EQU   CVTS01+724                                               13746000
CVTRV626 EQU   CVTS01+720                                               13747000
CVTRV625 EQU   CVTS01+716                                               13748000
CVTRV624 EQU   CVTS01+712                                               13749000
CVTRV623 EQU   CVTS01+708                                               13750000
CVTRV622 EQU   CVTS01+704                                               13751000
CVTRV621 EQU   CVTS01+700                                               13752000
CVTIHASU EQU   CVTS01+696                                               13753000
CVTSUSP  EQU   CVTS01+692                                               13754000
CVTT6SVC EQU   CVTS01+688                                               13755000
CVTTCTL  EQU   CVTS01+680                                               13756000
CVTRSUME EQU   CVTS01+676                                               13757000
CVTJTERM EQU   CVTS01+672                                               13758000
CVTASMRM EQU   CVTS01+668                                               13759000
CVTTCASP EQU   CVTS01+664                                               13760000
CVT0PT03 EQU   CVTS01+660                                               13761000
CVT0PT0E EQU   CVTS01+656                                               13762000
CVTRV609 EQU   CVTS01+652                                               13763000
CVTCGK   EQU   CVTS01+648                                               13764000
CVTRAC   EQU   CVTS01+644                                               13765000
CVTRV606 EQU   CVTS01+640                                               13766000
CVTRV605 EQU   CVTS01+636                                               13767000
CVTRV604 EQU   CVTS01+632                                               13768000
CVTEFF02 EQU   CVTS01+628                                               13769000
CVTCBBR  EQU   CVTS01+624                                               13770000
CVTSSCR  EQU   CVTS01+620                                               13771000
CVTEVENT EQU   CVTS01+616                                               13772000
CVTCRCA  EQU   CVTS01+612                                               13773000
CVTTPIO  EQU   CVTS01+608                                               13774000
CVTADV   EQU   CVTS01+604                                               13775000
CVTQV3   EQU   CVTS01+596                                               13776000
CVTQV2   EQU   CVTS01+592                                               13777000
CVTQV1   EQU   CVTS01+588                                               13778000
CVTRPT   EQU   CVTS01+584                                               13779000
CVTSSRB  EQU   CVTS01+580                                               13780000
CVTEXP1  EQU   CVTS01+572                                               13781000
CVTRMPMT EQU   CVTS01+568                                               13782000
CVTRMPTT EQU   CVTS01+564                                               13783000
CVTVPSA  EQU   CVTS01+560                                               13784000
CVTVSTOP EQU   CVTS01+556                                               13785000
CVTGTFR8 EQU   CVTS01+552                                               13786000
CVTQUIT  EQU   CVTS01+548                                               13787000
CVTVACR  EQU   CVTS01+544                                               13788000
CVTWTCB  EQU   CVTS01+540                                               13789000
CVTSTPRS EQU   CVTS01+536                                               13790000
CVT0PT02 EQU   CVTS01+532                                               13791000
CVTDARCM EQU   CVTS01+528                                               13792000
CVTIRECM EQU   CVTS01+524                                               13793000
CVTJRECM EQU   CVTS01+520                                               13794000
CVTVEMS0 EQU   CVTS01+516                                               13795000
CVT0TC0A EQU   CVTS01+504                                               13796000
CVTGMBR  EQU   CVTS01+500                                               13797000
CVTLFRM  EQU   CVTS01+496                                               13798000
CVTRMBR  EQU   CVTS01+492                                               13799000
CVTVIOP  EQU   CVTS01+488                                               13800000
CVTRV307 EQU   CVTS01+486                                               13801000
CVTRV306 EQU   CVTS01+484                                               13802000
CVTRV305 EQU   CVTS01+482                                               13803000
CVTRV304 EQU   CVTS01+480                                               13804000
CVTRV303 EQU   CVTS01+478                                               13805000
CVTRV302 EQU   CVTS01+476                                               13806000
CVTRV297 EQU   CVTRV289                                                 13807000
CVTRV296 EQU   CVTRV289                                                 13808000
CVTRV295 EQU   CVTRV289                                                 13809000
CVTRV294 EQU   CVTRV289                                                 13810000
CVTRV293 EQU   CVTRV289                                                 13811000
CVTRV292 EQU   CVTRV289                                                 13812000
CVTRV291 EQU   CVTRV289                                                 13813000
CVTRV290 EQU   CVTRV289                                                 13814000
CVTRV288 EQU   CVTRV280                                                 13815000
CVTRV287 EQU   CVTRV280                                                 13816000
CVTRV286 EQU   CVTRV280                                                 13817000
CVTRV285 EQU   CVTRV280                                                 13818000
CVTRV284 EQU   CVTRV280                                                 13819000
CVTRV283 EQU   CVTRV280                                                 13820000
CVTRV282 EQU   CVTRV280                                                 13821000
CVTRV281 EQU   CVTRV280                                                 13822000
CVTRV279 EQU   CVTRV271                                                 13823000
CVTRV278 EQU   CVTRV271                                                 13824000
CVTRV277 EQU   CVTRV271                                                 13825000
CVTRV276 EQU   CVTRV271                                                 13826000
CVTRV275 EQU   CVTRV271                                                 13827000
CVTRV274 EQU   CVTRV271                                                 13828000
CVTRV273 EQU   CVTRV271                                                 13829000
CVTRV272 EQU   CVTRV271                                                 13830000
CVTRV270 EQU   CVTRV262                                                 13831000
CVTRV269 EQU   CVTRV262                                                 13832000
CVTRV268 EQU   CVTRV262                                                 13833000
CVTRV267 EQU   CVTRV262                                                 13834000
CVTRV266 EQU   CVTRV262                                                 13835000
CVTRV265 EQU   CVTRV262                                                 13836000
CVTRV264 EQU   CVTRV262                                                 13837000
CVTRV263 EQU   CVTRV262                                                 13838000
CVTVFP   EQU   CVTS01+464                                               13839000
CVTVSI   EQU   CVTS01+460                                               13840000
CVTVPSIB EQU   CVTS01+456                                               13841000
CVTMFACT EQU   CVTMFRTR                                                 13842000
CVTMFCTL EQU   CVTS01+448                                               13843000
CVTPVBP  EQU   CVTS01+444                                               13844000
CVTPWI   EQU   CVTS01+440                                               13845000
CVTRV254 EQU   CVTS01+438                                               13846000
CVTRV253 EQU   CVTS01+436                                               13847000
CVTRV252 EQU   CVTS01+434                                               13848000
CVTRV251 EQU   CVTS01+433                                               13849000
CVTRV250 EQU   CVTS01+432                                               13850000
CVTRV249 EQU   CVTS01+431                                               13851000
CVTRV248 EQU   CVTS01+430                                               13852000
CVTRV247 EQU   CVTS01+429                                               13853000
CVTRV246 EQU   CVTS01+428                                               13854000
CVTRV245 EQU   CVTRV237                                                 13855000
CVTRV244 EQU   CVTRV237                                                 13856000
CVTRV243 EQU   CVTRV237                                                 13857000
CVTRV242 EQU   CVTRV237                                                 13858000
CVTRV241 EQU   CVTRV237                                                 13859000
CVTRV240 EQU   CVTRV237                                                 13860000
CVTRV239 EQU   CVTRV237                                                 13861000
CVTRV238 EQU   CVTRV237                                                 13862000
CVTRV236 EQU   CVTRV228                                                 13863000
CVTRV235 EQU   CVTRV228                                                 13864000
CVTRV234 EQU   CVTRV228                                                 13865000
CVTRV233 EQU   CVTRV228                                                 13866000
CVTRV232 EQU   CVTRV228                                                 13867000
CVTRV231 EQU   CVTRV228                                                 13868000
CVTRV230 EQU   CVTRV228                                                 13869000
CVTRV229 EQU   CVTRV228                                                 13870000
CVTRV227 EQU   CVTRV219                                                 13871000
CVTRV226 EQU   CVTRV219                                                 13872000
CVTRV225 EQU   CVTRV219                                                 13873000
CVTRV224 EQU   CVTRV219                                                 13874000
CVTRV223 EQU   CVTRV219                                                 13875000
CVTRV222 EQU   CVTRV219                                                 13876000
CVTRV221 EQU   CVTRV219                                                 13877000
CVTRV220 EQU   CVTRV219                                                 13878000
CVTRV218 EQU   CVTRV210                                                 13879000
CVTRV217 EQU   CVTRV210                                                 13880000
CVTRV216 EQU   CVTRV210                                                 13881000
CVTRV215 EQU   CVTRV210                                                 13882000
CVTRV214 EQU   CVTRV210                                                 13883000
CVTRV213 EQU   CVTRV210                                                 13884000
CVTRV212 EQU   CVTRV210                                                 13885000
CVTRV211 EQU   CVTRV210                                                 13886000
CVTIPCRP EQU   CVTS01+412                                               13887000
CVTIPCRI EQU   CVTS01+408                                               13888000
CVTAIDVT EQU   CVTS01+400                                               13889000
CVTSSAP  EQU   CVTS01+396                                               13890000
CVTEHCIR EQU   CVTS01+392                                               13891000
CVTEHDEF EQU   CVTS01+388                                               13892000
CVTDAIR  EQU   CVTS01+384                                               13893000
CVTPERFM EQU   CVTS01+380                                               13894000
CVT044R2 EQU   CVTS01+376                                               13895000
CVTFETCH EQU   CVTS01+372                                               13896000
CVTSPOST EQU   CVTS01+364                                               13897000
CVTIOBP  EQU   CVTS01+360                                               13898000
CVTASMVT EQU   CVTS01+356                                               13899000
CVTRECRQ EQU   CVTS01+352                                               13900000
CVTRV149 EQU   CVTS01+344                                               13901000
CVTWSAL  EQU   CVTS01+340                                               13902000
CVTVEAC0 EQU   CVTS01+328                                               13903000
CVT062R1 EQU   CVTS01+324                                               13904000
CVTRPOST EQU   CVTS01+320                                               13905000
CVTDQIQE EQU   CVTS01+316                                               13906000
CVTLKRMA EQU   CVTS01+308                                               13907000
CVTRSPIE EQU   CVTS01+304                                               13908000
CVTRENQ  EQU   CVTS01+300                                               13909000
CVTLQCB  EQU   CVTS01+296                                               13910000
CVTFQCB  EQU   CVTS01+292                                               13911000
CVTQCS01 EQU   CVTS01+288                                               13912000
CVTAPFT  EQU   CVTS01+284                                               13913000
CVTPARRL EQU   CVTS01+280                                               13914000
CVTVWAIT EQU   CVTS01+276                                               13915000
CVTGSPL  EQU   CVTS01+272                                               13916000
CVTLSMQ  EQU   CVTS01+268                                               13917000
CVTGSMQ  EQU   CVTS01+264                                               13918000
CVTEXPRO EQU   CVTS01+260                                               13919000
CVTOPCTP EQU   CVTS01+256                                               13920000
CVTSIC   EQU   CVTS01+252                                               13921000
CVTTPIOS EQU   CVTS01+248                                               13922000
CVTRTMS  EQU   CVTS01+244                                               13923000
CVTSDBF  EQU   CVTS01+240                                               13924000
CVTSCBP  EQU   CVTS01+236                                               13925000
CVTSDMP  EQU   CVTS01+232                                               13926000
CVTRTMCT EQU   CVTS01+224                                               13927000
CVTASCBL EQU   CVTS01+220                                               13928000
CVTASCBH EQU   CVTS01+216                                               13929000
CVTVVMDI EQU   CVTS01+204                                               13930000
CVTAQTOP EQU   CVTS01+200                                               13931000
CVTIOSCS EQU   CVTS01+196                                               13932000
CVTSDRM  EQU   CVTS01+192                                               13933000
CVTOPTE  EQU   CVTS01+188                                               13934000
CVTSTXU  EQU   CVTS01+184                                               13935000
CVTQUIS  EQU   CVTS01+180                                               13936000
CVTPARS  EQU   CVTS01+176                                               13937000
CVTS1EE  EQU   CVTS01+172                                               13938000
CVTFRAS  EQU   CVTS01+168                                               13939000
CVTQSAS  EQU   CVTS01+164                                               13940000
CVTCRAS  EQU   CVTS01+160                                               13941000
CVTCRMN  EQU   CVTS01+156                                               13942000
CVTDELCP EQU   CVTS01+152                                               13943000
CVTFRECL EQU   CVTS01+148                                               13944000
CVTGETCL EQU   CVTS01+144                                               13945000
CVTAUTHL EQU   CVTS01+136                                               13946000
CVTSCAN  EQU   CVTS01+132                                               13947000
CVTRV144 EQU   CVTS01+130                                               13948000
CVTMAXMP EQU   CVTS01+128                                               13949000
CVTSTCK  EQU   CVTS01+124                                               13950000
CVTRV139 EQU   CVTS01+123                                               13951000
CVTDSSAC EQU   CVTS01+122                                               13952000
CVTRV513 EQU   CVTS01+121                                               13953000
CVTIOSPL EQU   CVTS01+120                                               13954000
CVTPTGT  EQU   CVTS01+116                                               13955000
CVTCSPIE EQU   CVTS01+112                                               13956000
CVTSMFEX EQU   CVTS01+108                                               13957000
CVTOLT0A EQU   CVTS01+104                                               13958000
CVTSRBRT EQU   CVTS01+100                                               13959000
CVTPUTL  EQU   CVTS01+96                                                13960000
CVTASCRL EQU   CVTS01+92                                                13961000
CVTASCRF EQU   CVTS01+88                                                13962000
CVTRV326 EQU   CVTS01+84                                                13963000
CVTRV325 EQU   CVTS01+80                                                13964000
CVTRV324 EQU   CVTS01+76                                                13965000
CVT0VL01 EQU   CVTS01+72                                                13966000
CVTRV332 EQU   CVTS01+64                                                13967000
CVTTAS   EQU   CVTS01+60                                                13968000
CVTRSCN  EQU   CVTS01+56                                                13969000
CVTTRAC2 EQU   CVTS01+54                                                13970000
CVTAPG   EQU   CVTS01+51                                                13971000
CVTSDTRC EQU   CVTCTLFG                                                 13972000
CVTGTRCE EQU   CVTCTLFG                                                 13973000
CVTRSV79 EQU   CVTCTLFG                                                 13974000
CVTDSTAT EQU   CVTCTLFG                                                 13975000
CVTRSV78 EQU   CVTCTLFG                                                 13976000
CVTRV333 EQU   CVTCTLFG                                                 13977000
CVTRV323 EQU   CVTCTLFG                                                 13978000
CVTSPVLK EQU   CVTS01+49                                                13979000
CVTRSV77 EQU   CVTS01+48                                                13980000
CVTRV331 EQU   CVTS01+44                                                13981000
CVTRV330 EQU   CVTS01+40                                                13982000
CVTRV329 EQU   CVTS01+36                                                13983000
CVTRV328 EQU   CVTS01+32                                                13984000
CVTRV322 EQU   CVTS01+28                                                13985000
CVTSLID  EQU   CVTSLIDA+1                                               13986000
CVTSYLK  EQU   CVTSLIDA                                                 13987000
CVTRV321 EQU   CVTS01+20                                                13988000
CVTRV320 EQU   CVTS01+16                                                13989000
CVTLPDIR EQU   CVTLPDIA+1                                               13990000
CVTRSV69 EQU   CVTDIRST                                                 13991000
CVTRSV68 EQU   CVTDIRST                                                 13992000
CVTRSV67 EQU   CVTDIRST                                                 13993000
CVTRSV66 EQU   CVTDIRST                                                 13994000
CVTRSV65 EQU   CVTDIRST                                                 13995000
CVTRSV64 EQU   CVTDIRST                                                 13996000
CVTRSV63 EQU   CVTDIRST                                                 13997000
CVTDICOM EQU   CVTDIRST                                                 13998000
CVTLPDSR EQU   CVTS01+4                                                 13999000
CVTGETL  EQU   CVTS01                                                   14000000
WSAGSCHE EQU   WSAG+40                                                  14001000
WSAGREST EQU   WSAG+36                                                  14002000
WSAGMEMT EQU   WSAG+28                                                  14003000
WSAGOPTM EQU   WSAG+24                                                  14004000
WSAGSTAT EQU   WSAG+20                                                  14005000
WSAGEMS0 EQU   WSAG+16                                                  14006000
WSAGSSRS EQU   WSAG+12                                                  14007000
WSAGRSM  EQU   WSAG+8                                                   14008000
WSAGPGIO EQU   WSAG                                                     14009000
@NM00185 EQU   NP0BCPSW+4                                               14010000
@NM00184 EQU   NP0BCPSW                                                 14011000
@NM00170 EQU   MSGCMAP+33                                               14012000
@NM00169 EQU   MSGCMAP+12                                               14013000
@NM00168 EQU   MSGCMAP+4                                                14014000
@NM00167 EQU   MSGCMAP                                                  14015000
@NM00166 EQU   MSGAMAP+33                                               14016000
@NM00165 EQU   MSGAMAP+12                                               14017000
@NM00164 EQU   MSGAMAP+4                                                14018000
@NM00163 EQU   MSGAMAP                                                  14019000
@NM00159 EQU   NPSWMAP+1                                                14020000
@NM00158 EQU   NPSWMAP                                                  14021000
@NM00157 EQU   NP0WPSW+4                                                14022000
@NM00156 EQU   @NM00155                                                 14023000
@NM00153 EQU   TCBXTNT2+32                                              14024000
TCBRV181 EQU   TCBRV173                                                 14025000
TCBRV180 EQU   TCBRV173                                                 14026000
TCBRV179 EQU   TCBRV173                                                 14027000
TCBRV178 EQU   TCBRV173                                                 14028000
TCBRV177 EQU   TCBRV173                                                 14029000
TCBRV176 EQU   TCBRV173                                                 14030000
TCBRV175 EQU   TCBRV173                                                 14031000
TCBRV174 EQU   TCBRV173                                                 14032000
TCBRV172 EQU   TCBRV164                                                 14033000
TCBRV171 EQU   TCBRV164                                                 14034000
TCBRV170 EQU   TCBRV164                                                 14035000
TCBRV169 EQU   TCBRV164                                                 14036000
TCBRV168 EQU   TCBRV164                                                 14037000
TCBRV167 EQU   TCBRV164                                                 14038000
TCBRV166 EQU   TCBRV164                                                 14039000
TCBRV165 EQU   TCBRV164                                                 14040000
TCBRV163 EQU   TCBRV155                                                 14041000
TCBRV162 EQU   TCBRV155                                                 14042000
TCBRV161 EQU   TCBRV155                                                 14043000
TCBRV160 EQU   TCBRV155                                                 14044000
TCBRV159 EQU   TCBRV155                                                 14045000
TCBRV158 EQU   TCBRV155                                                 14046000
TCBRV157 EQU   TCBRV155                                                 14047000
TCBRV156 EQU   TCBRV155                                                 14048000
TCBRV154 EQU   TCBRV146                                                 14049000
TCBRV153 EQU   TCBRV146                                                 14050000
TCBRV152 EQU   TCBRV146                                                 14051000
TCBRV151 EQU   TCBRV146                                                 14052000
TCBRV150 EQU   TCBRV146                                                 14053000
TCBRV149 EQU   TCBRV146                                                 14054000
TCBRV148 EQU   TCBRV146                                                 14055000
TCBRV147 EQU   TCBRV146                                                 14056000
TCBRV145 EQU   TCBXTNT2+26                                              14057000
TCBRV144 EQU   TCBXTNT2+24                                              14058000
TCBRV143 EQU   TCBXTNT2+20                                              14059000
TCBRV142 EQU   TCBXTNT2+16                                              14060000
TCBRSV49 EQU   TCBXTNT2+12                                              14061000
TCBEVENT EQU   TCBXTNT2+8                                               14062000
TCBRCMP  EQU   TCBXTNT2+5                                               14063000
TCBRSVAB EQU   TCBXTNT2+4                                               14064000
TCBGTFA  EQU   TCBGTF+1                                                 14065000
TCBRSV47 EQU   TCBTFLG                                                  14066000
TCBRSV46 EQU   TCBTFLG                                                  14067000
TCBRSV45 EQU   TCBTFLG                                                  14068000
TCBRSV44 EQU   TCBTFLG                                                  14069000
TCBRSV43 EQU   TCBTFLG                                                  14070000
TCBDSPIT EQU   TCBTFLG                                                  14071000
TCBERRTN EQU   TCBTFLG                                                  14072000
TCBASYNC EQU   TCBTFLG                                                  14073000
@NM00152 EQU   TCB+296                                                  14074000
TCBSVCA2 EQU   TCB+292                                                  14075000
TCBSWASA EQU   TCB+288                                                  14076000
TCBDBTB  EQU   TCB+284                                                  14077000
TCBRPT   EQU   TCB+280                                                  14078000
TCBRV141 EQU   TCBRV133                                                 14079000
TCBRV140 EQU   TCBRV133                                                 14080000
TCBRV139 EQU   TCBRV133                                                 14081000
TCBRV138 EQU   TCBRV133                                                 14082000
TCBRV137 EQU   TCBRV133                                                 14083000
TCBRV136 EQU   TCBRV133                                                 14084000
TCBRV135 EQU   TCBRV133                                                 14085000
TCBRV134 EQU   TCBRV133                                                 14086000
TCBRV132 EQU   TCBRV124                                                 14087000
TCBRV131 EQU   TCBRV124                                                 14088000
TCBRV130 EQU   TCBRV124                                                 14089000
TCBRV129 EQU   TCBRV124                                                 14090000
TCBRV128 EQU   TCBRV124                                                 14091000
TCBRV127 EQU   TCBRV124                                                 14092000
TCBRV126 EQU   TCBRV124                                                 14093000
TCBRV125 EQU   TCBRV124                                                 14094000
TCBRV123 EQU   TCBFBYT2                                                 14095000
TCBRV122 EQU   TCBFBYT2                                                 14096000
TCBECBNV EQU   TCBFBYT2                                                 14097000
TCBSSSYN EQU   TCBFBYT2                                                 14098000
TCBFPRAP EQU   TCBFBYT2                                                 14099000
TCBFDW   EQU   TCBFBYT2                                                 14100000
TCBFMW   EQU   TCBFBYT2                                                 14101000
TCBCNCB  EQU   TCBFBYT2                                                 14102000
TCBLLH   EQU   TCBFBYT1                                                 14103000
TCBRV113 EQU   TCBFBYT1                                                 14104000
TCBEOT   EQU   TCBFBYT1                                                 14105000
TCBRTM2  EQU   TCBFBYT1                                                 14106000
TCBPGNLY EQU   TCBFBYT1                                                 14107000
TCBNDIOS EQU   TCBFBYT1                                                 14108000
TCBRV327 EQU   TCBFBYT1                                                 14109000
TCBEOTFM EQU   TCBFBYT1                                                 14110000
TCBAFFN  EQU   TCB+274                                                  14111000
TCBRV326 EQU   TCB+272                                                  14112000
TCBUKYSP EQU   TCB+268                                                  14113000
TCBMODE  EQU   TCBESTAE+3                                               14114000
TCBERTYP EQU   TCBESTAE+2                                               14115000
TCBRV314 EQU   TCBESTRM                                                 14116000
TCBRV313 EQU   TCBESTRM                                                 14117000
TCBRV312 EQU   TCBESTRM                                                 14118000
TCBRV311 EQU   TCBESTRM                                                 14119000
TCBRV310 EQU   TCBESTRM                                                 14120000
TCBRV309 EQU   TCBESTRM                                                 14121000
TCBRV308 EQU   TCBESTRM                                                 14122000
TCBETERM EQU   TCBESTRM                                                 14123000
TCBSCBKY EQU   TCBESTAE                                                 14124000
TCBRTM12 EQU   TCB+260                                                  14125000
TCBTCBID EQU   TCB+256                                                  14126000
TCBSTAWA EQU   TCB+252                                                  14127000
TCBSWA   EQU   TCB+248                                                  14128000
TCBFOEA  EQU   TCBFOE+1                                                 14129000
TCBRSV42 EQU   TCBFOE                                                   14130000
TCBCCPVI EQU   TCBXSCT+2                                                14131000
TCBRV325 EQU   TCBXSCT+1                                                14132000
TCBRV324 EQU   TCBXSCT1                                                 14133000
TCBRV323 EQU   TCBXSCT1                                                 14134000
TCBRV322 EQU   TCBXSCT1                                                 14135000
TCBRV321 EQU   TCBXSCT1                                                 14136000
TCBRV320 EQU   TCBXSCT1                                                 14137000
TCBRV319 EQU   TCBXSCT1                                                 14138000
TCBS3A   EQU   TCBXSCT1                                                 14139000
TCBACTIV EQU   TCBXSCT1                                                 14140000
TCBRSV41 EQU   TCB+239                                                  14141000
TCBTID   EQU   TCB+238                                                  14142000
TCBRSVAA EQU   TCB+237                                                  14143000
TCBABCUR EQU   TCB+236                                                  14144000
TCBTMSAV EQU   TCB+232                                                  14145000
TCBIOTIM EQU   TCB+228                                                  14146000
TCBRTWA  EQU   TCB+224                                                  14147000
TCBBACK  EQU   TCB+220                                                  14148000
TCBTIRB  EQU   TCB+216                                                  14149000
TCBAECB  EQU   TCB+212                                                  14150000
TCBEXT2A EQU   TCBEXT2+1                                                14151000
TCBRSV39 EQU   TCBEXT2                                                  14152000
TCBSTMCT EQU   TCB+207                                                  14153000
TCBSYSCT EQU   TCB+206                                                  14154000
TCBRSV37 EQU   TCB+205                                                  14155000
TCBEXSVC EQU   TCBDAR                                                   14156000
TCBDARMS EQU   TCBDAR                                                   14157000
TCBDARWT EQU   TCBDAR                                                   14158000
TCBDARO  EQU   TCBDAR                                                   14159000
TCBDARMC EQU   TCBDARC                                                  14160000
TCBDARD  EQU   TCBDAR                                                   14161000
TCBDARS  EQU   TCBDAR                                                   14162000
TCBDARP  EQU   TCBDAR                                                   14163000
TCBGTOFM EQU   TCBFLGS7                                                 14164000
TCBADMP  EQU   TCBFLGS7                                                 14165000
TCBRSTSK EQU   TCBFLGS7                                                 14166000
TCBSVCS  EQU   TCBFLGS7                                                 14167000
TCBSTACK EQU   TCBFLGS7                                                 14168000
TCBRSV34 EQU   TCBFLGS7                                                 14169000
TCBRSV33 EQU   TCBFLGS7                                                 14170000
TCBGPECB EQU   TCBFLGS7                                                 14171000
TCBNTJS  EQU   TCBFLGS6                                                 14172000
TCBAPG   EQU   TCBFLGS6                                                 14173000
TCBMIGR  EQU   TCBFLGS6                                                 14174000
TCBRV303 EQU   TCBFLGS6                                                 14175000
TCBSPVLK EQU   TCBFLGS6                                                 14176000
TCBCPU   EQU   TCBFLGS6                                                 14177000
TCBPIE17 EQU   TCBFLGS6                                                 14178000
TCBRV    EQU   TCBFLGS6                                                 14179000
TCBRSV79 EQU   TCBNDSP5                                                 14180000
TCBRSV78 EQU   TCBNDSP5                                                 14181000
TCBRSV77 EQU   TCBNDSP5                                                 14182000
TCBRSV76 EQU   TCBNDSP5                                                 14183000
TCBRSV75 EQU   TCBNDSP5                                                 14184000
TCBRSV74 EQU   TCBNDSP5                                                 14185000
TCBRSV95 EQU   TCBNDSP5                                                 14186000
TCBRSV94 EQU   TCBNDSP5                                                 14187000
TCBRSV93 EQU   TCBNDSP4                                                 14188000
TCBRSV92 EQU   TCBNDSP4                                                 14189000
TCBRSV91 EQU   TCBNDSP4                                                 14190000
TCBRSV90 EQU   TCBNDSP4                                                 14191000
TCBRSV89 EQU   TCBNDSP4                                                 14192000
TCBRSV88 EQU   TCBNDSP4                                                 14193000
TCBRSV87 EQU   TCBNDSP4                                                 14194000
TCBRSV86 EQU   TCBNDSP4                                                 14195000
TCBEXT1A EQU   TCBEXT1+1                                                14196000
TCBRSV32 EQU   TCBEXT1                                                  14197000
TCBEXCPD EQU   TCB+192                                                  14198000
TCBIOBRC EQU   TCB+188                                                  14199000
TCBDDWTC EQU   TCB+186                                                  14200000
TCBDDEXC EQU   TCB+184                                                  14201000
TCBJSCBB EQU   TCBJSCB+1                                                14202000
@NM00151 EQU   TCBRECDE                                                 14203000
TCBREC   EQU   TCBRECDE                                                 14204000
TCBMDIDS EQU   TCB+176                                                  14205000
TCBNDINT EQU   TCBNDSP3                                                 14206000
TCBRSV27 EQU   TCBNDSP3                                                 14207000
TCBRSV26 EQU   TCBNDSP3                                                 14208000
TCBRSV25 EQU   TCBNDSP3                                                 14209000
TCBRSV24 EQU   TCBNDSP3                                                 14210000
TCBSRBND EQU   TCBNDSP3                                                 14211000
TCBRV302 EQU   TCBNDSP3                                                 14212000
TCBLJSND EQU   TCBNDSP3                                                 14213000
TCBABE   EQU   TCBNDSP2                                                 14214000
TCBDSS   EQU   TCBNDSP2                                                 14215000
TCBOWAIT EQU   TCBNDSP2                                                 14216000
TCBIWAIT EQU   TCBNDSP2                                                 14217000
TCBNDTS  EQU   TCBNDSP2                                                 14218000
TCBNDSVC EQU   TCBNDSP2                                                 14219000
TCBSTPP  EQU   TCBNDSP2                                                 14220000
TCBABD   EQU   TCBNDSP2                                                 14221000
TCBRSV22 EQU   TCBNDSP1                                                 14222000
TCBPIEND EQU   TCBNDSP1                                                 14223000
TCBTPSP  EQU   TCBNDSP1                                                 14224000
TCBDDRND EQU   TCBNDSP1                                                 14225000
TCBRSPND EQU   TCBNDSP1                                                 14226000
TCBRSTND EQU   TCBNDSP1                                                 14227000
TCBDARPN EQU   TCBNDSP1                                                 14228000
TCBDARTN EQU   TCBNDSP1                                                 14229000
TCBNDSP0 EQU   TCBNDSP                                                  14230000
TCBUSER  EQU   TCB+168                                                  14231000
TCBTCTB  EQU   TCBTCT+1                                                 14232000
TCBRSV9C EQU   TCBTCTGF                                                 14233000
TCBRSV9B EQU   TCBTCTGF                                                 14234000
TCBRSV9A EQU   TCBTCTGF                                                 14235000
TCBRSV99 EQU   TCBTCTGF                                                 14236000
TCBRSV98 EQU   TCBTCTGF                                                 14237000
TCBRSV97 EQU   TCBTCTGF                                                 14238000
TCBRSV20 EQU   TCBTCTGF                                                 14239000
TCBSMFGF EQU   TCBTCTGF                                                 14240000
TCBSTABB EQU   TCBSTAB+1                                                14241000
TCBSTCUR EQU   TCBNSTAE                                                 14242000
TCBRV301 EQU   TCBNSTAE                                                 14243000
TCBSYNCH EQU   TCBNSTAE                                                 14244000
TCBHALT  EQU   TCBNSTAE                                                 14245000
TCBPPSUP EQU   TCBNSTAE                                                 14246000
TCB33E   EQU   TCBNSTAE                                                 14247000
TCBQUIES EQU   TCBNSTAE                                                 14248000
TCBSTABE EQU   TCBNSTAE                                                 14249000
TCBAQE   EQU   TCB+156                                                  14250000
TCBTSDP  EQU   TCB+151                                                  14251000
TCBTSLP  EQU   TCB+150                                                  14252000
TCBSTPCT EQU   TCB+149                                                  14253000
TCBCPUBN EQU   TCBTSFLG                                                 14254000
TCBDYDSP EQU   TCBTSFLG                                                 14255000
TCBRSV18 EQU   TCBTSFLG                                                 14256000
TCBRSV17 EQU   TCBTSFLG                                                 14257000
TCBTIOTG EQU   TCBTSFLG                                                 14258000
TCBATT   EQU   TCBTSFLG                                                 14259000
TCBSTPPR EQU   TCBTSFLG                                                 14260000
TCBRV300 EQU   TCBTSTSK                                                 14261000
TCBECB   EQU   TCB+144                                                  14262000
TCBIQE   EQU   TCB+140                                                  14263000
TCBLTC   EQU   TCB+136                                                  14264000
TCBOTC   EQU   TCB+132                                                  14265000
TCBNTC   EQU   TCB+128                                                  14266000
TCBJSTCA EQU   TCBJSTCB+1                                               14267000
TCBRSV16 EQU   TCBJSTCB                                                 14268000
TCBTQET  EQU   TCBTME                                                   14269000
TCBTCB   EQU   TCB+116                                                  14270000
TCBFSAB  EQU   TCBFSA+1                                                 14271000
TCBQEL   EQU   TCBFSA                                                   14272000
TCBGRS15 EQU   TCBGRS+60                                                14273000
TCBGRS14 EQU   TCBGRS+56                                                14274000
TCBGRS13 EQU   TCBGRS+52                                                14275000
TCBGRS12 EQU   TCBGRS+48                                                14276000
TCBGRS11 EQU   TCBGRS+44                                                14277000
TCBGRS10 EQU   TCBGRS+40                                                14278000
TCBGRS9  EQU   TCBGRS+36                                                14279000
TCBGRS8  EQU   TCBGRS+32                                                14280000
TCBGRS7  EQU   TCBGRS+28                                                14281000
TCBGRS6  EQU   TCBGRS+24                                                14282000
TCBGRS5  EQU   TCBGRS+20                                                14283000
TCBGRS4  EQU   TCBGRS+16                                                14284000
TCBGRS3  EQU   TCBGRS+12                                                14285000
TCBGRS2  EQU   TCBGRS+8                                                 14286000
TCBGRS1  EQU   TCBGRS+4                                                 14287000
TCBGRS0  EQU   TCBGRS                                                   14288000
TCBJPQB  EQU   TCBJPQ+1                                                 14289000
TCBRSV15 EQU   TCBPURGE                                                 14290000
TCBRSV14 EQU   TCBPURGE                                                 14291000
TCBRSV13 EQU   TCBPURGE                                                 14292000
TCBRSV12 EQU   TCBPURGE                                                 14293000
TCBRSV11 EQU   TCBPURGE                                                 14294000
TCBRSV10 EQU   TCBPURGE                                                 14295000
TCBRSV09 EQU   TCBPURGE                                                 14296000
TCBJPQF  EQU   TCBPURGE                                                 14297000
TCBJLB   EQU   TCB+40                                                   14298000
TCBLLS   EQU   TCB+36                                                   14299000
TCBDSP   EQU   TCB+35                                                   14300000
TCBLMP   EQU   TCB+34                                                   14301000
TCBPNDSP EQU   TCBFLGS5                                                 14302000
TCBFCD1  EQU   TCBFLGS5                                                 14303000
TCBSTP   EQU   TCBFLGS5                                                 14304000
TCBSYS   EQU   TCBFLGS5                                                 14305000
TCBANDSP EQU   TCBFLGS5                                                 14306000
TCBPAGE  EQU   TCBFLGS5                                                 14307000
TCBUXNDF EQU   TCBABWF                                                  14308000
TCBFC    EQU   TCBFLGS5                                                 14309000
TCBONDSP EQU   TCBFLGS4                                                 14310000
TCBMPCND EQU   TCBFLGS4                                                 14311000
TCBMPCVQ EQU   TCBFLGS4                                                 14312000
TCBUXNDV EQU   TCBFLGS4                                                 14313000
TCBHNDSP EQU   TCBFLGS4                                                 14314000
TCBRQENA EQU   TCBFLGS4                                                 14315000
TCBSER   EQU   TCBFLGS4                                                 14316000
TCBNDUMP EQU   TCBFLGS4                                                 14317000
TCBDWSTA EQU   TCBFLGS3                                                 14318000
TCBRSV08 EQU   TCBFLGS3                                                 14319000
TCBRSV07 EQU   TCBFLGS3                                                 14320000
TCBRSV06 EQU   TCBFLGS3                                                 14321000
TCBABGM  EQU   TCBFLGS3                                                 14322000
TCBADINP EQU   TCBFLGS3                                                 14323000
TCBFSM   EQU   TCBFLGS3                                                 14324000
TCBFTS   EQU   TCBFLGS2                                                 14325000
TCBFETXR EQU   TCBFLGS2                                                 14326000
TCBFDSOP EQU   TCBFLGS2                                                 14327000
TCBFJMC  EQU   TCBFLGS2                                                 14328000
TCBFSMC  EQU   TCBFLGS2                                                 14329000
TCBFABOP EQU   TCBFLGS2                                                 14330000
TCBFSTI  EQU   TCBFLGS2                                                 14331000
TCBFOINP EQU   TCBFLGS2                                                 14332000
TCBFX    EQU   TCBFLGS1                                                 14333000
TCBFS    EQU   TCBFLGS1                                                 14334000
TCBFT    EQU   TCBFLGS1                                                 14335000
TCBPDUMP EQU   TCBFLGS1                                                 14336000
TCBNONPR EQU   TCBFLGS1                                                 14337000
TCBFERA  EQU   TCBFLGS1                                                 14338000
TCBFE    EQU   TCBFLGS1                                                 14339000
TCBFA    EQU   TCBFLGS1                                                 14340000
TCBZERO  EQU   TCBPKF                                                   14341000
TCBFLAG  EQU   TCBPKF                                                   14342000
TCBMSSB  EQU   TCBMSS+1                                                 14343000
TCBRSV03 EQU   TCBMSS                                                   14344000
TCBTRNB  EQU   TCBTRN+1                                                 14345000
TCBRSV02 EQU   TCBABF                                                   14346000
TCBOLTEP EQU   TCBABF                                                   14347000
TCBTCP   EQU   TCBABF                                                   14348000
TCBTCPP  EQU   TCBABF                                                   14349000
TCBRSV01 EQU   TCBABF                                                   14350000
TCBGRPH  EQU   TCBABF                                                   14351000
TCBNOCHK EQU   TCBABF                                                   14352000
TCBMOD91 EQU   TCBABF                                                   14353000
TCBCMPC  EQU   TCBCMP+1                                                 14354000
TCBRV318 EQU   TCBCMSG                                                  14355000
TCBRV317 EQU   TCBCIND                                                  14356000
TCBRV316 EQU   TCBCWTO                                                  14357000
TCBCASID EQU   TCBCDBL                                                  14358000
TCBNOCC  EQU   TCBSTCC                                                  14359000
TCBDMPO  EQU   TCBCPP                                                   14360000
TCBCSTEP EQU   TCBCMPF                                                  14361000
TCBCREQ  EQU   TCBCMPF                                                  14362000
TCBTIO   EQU   TCB+12                                                   14363000
TCBDEB   EQU   TCB+8                                                    14364000
TCBPIEA  EQU   TCBPIE+1                                                 14365000
TCBPM    EQU   TCBPMASK                                                 14366000
@NM00150 EQU   TCBPMASK                                                 14367000
TCBRBP   EQU   TCB                                                      14368000
TCBFRS6  EQU   TCBFRS+24                                                14369000
TCBFRS4  EQU   TCBFRS+16                                                14370000
TCBFRS2  EQU   TCBFRS+8                                                 14371000
TCBFRS0  EQU   TCBFRS                                                   14372000
XPTLSID2 EQU   XPTLPN                                                   14373000
XPTLSID  EQU   XPTLGN                                                   14374000
@NM00149 EQU   XPTFLAG2                                                 14375000
XPTIOERR EQU   XPTFLAG2                                                 14376000
XPTPOINP EQU   XPTFLAG2                                                 14377000
XPTRES1  EQU   XPTFLAG2                                                 14378000
XPTVALID EQU   XPTFLAG2                                                 14379000
XPTRSV4  EQU   XPTFLAGS                                                 14380000
XPTDEFER EQU   XPTFLAGS                                                 14381000
XPTRES2  EQU   XPTFLAGS                                                 14382000
XPTVIO   EQU   XPTFLAGS                                                 14383000
@NM00148 EQU   XPTFLAGS                                                 14384000
XPTCKF   EQU   XPTFLAGS                                                 14385000
XPTXAV   EQU   XPTFLAGS                                                 14386000
XPTVIOLP EQU   XPTFLAGS                                                 14387000
XPTRSV1  EQU   XPTE+1                                                   14388000
XPTPROT  EQU   XPTE                                                     14389000
@NM00147 EQU   SVCATTR2                                                 14390000
SVCDISP  EQU   SVCATTR2                                                 14391000
SVCALLOC EQU   SVCATTR2                                                 14392000
SVCOPT   EQU   SVCATTR2                                                 14393000
SVCCMS   EQU   SVCATTR2                                                 14394000
@NM00146 EQU   SVCATTR1                                                 14395000
SVCNP    EQU   SVCATTR1                                                 14396000
SVCESR   EQU   SVCATTR1                                                 14397000
SVCAPF   EQU   SVCATTR1                                                 14398000
@NM00145 EQU   SVCATTR1                                                 14399000
@NM00144 EQU   SSRBFLG1                                                 14400000
SSRBMAIN EQU   SSRBFLG1                                                 14401000
SSRBLLH  EQU   SSRBFLG1                                                 14402000
SSRBFRRS EQU   SSRB+108                                                 14403000
SSRBTRAN EQU   SSRB+104                                                 14404000
SSRBGPRS EQU   SSRB+40                                                  14405000
SSRBFPR6 EQU   SSRBFPRS+24                                              14406000
SSRBFPR4 EQU   SSRBFPRS+16                                              14407000
SSRBFPR2 EQU   SSRBFPRS+8                                               14408000
SSRBFPR0 EQU   SSRBFPRS                                                 14409000
SSRBCPSW EQU   SSRB                                                     14410000
@NM00143 EQU   SRB+40                                                   14411000
@NM00142 EQU   SRB+38                                                   14412000
SRBPRIOR EQU   SRB+37                                                   14413000
SRBPKF   EQU   SRB+36                                                   14414000
SRBSAVE  EQU   SRB+32                                                   14415000
SRBPARM  EQU   SRB+28                                                   14416000
SRBRMTR  EQU   SRB+24                                                   14417000
SRBEP    EQU   SRB+20                                                   14418000
SRBPTCB  EQU   SRBFLC+4                                                 14419000
SRBPASID EQU   SRBFLC+2                                                 14420000
SRBCPAFF EQU   SRBFLC                                                   14421000
SRBASCB  EQU   SRB+8                                                    14422000
SRBFLNK  EQU   SRB+4                                                    14423000
SRBID    EQU   SRB                                                      14424000
SPQERES2 EQU   SPQESECT+12                                              14425000
SPQEKEY  EQU   SPQESECT+11                                              14426000
SPQERES1 EQU   SPQESECT+9                                               14427000
SPQEOWN  EQU   SPQEFLGS                                                 14428000
LASTSPQE EQU   SPQEFLGS                                                 14429000
SPSHARE  EQU   SPQEFLGS                                                 14430000
SPQEPTR  EQU   SPQEAD                                                   14431000
SGTPAM   EQU   SGTBYTE                                                  14432000
SGTEAC   EQU   SGTBYTE                                                  14433000
@NM00141 EQU   SGTBYTE                                                  14434000
@NM00140 EQU   SGTBYTE                                                  14435000
@NM00139 EQU   SGTBYTE                                                  14436000
@NM00138 EQU   SGTBYTE                                                  14437000
@NM00137 EQU   SGTBYTE                                                  14438000
SGTORG   EQU   SGTPTO                                                   14439000
SGTKEY   EQU   SGTLK                                                    14440000
SGTPTL   EQU   SGTLK                                                    14441000
@NM00136 EQU   SCVTSECT+180                                             14442000
@NM00135 EQU   SCVTSECT+176                                             14443000
SCVTPIQE EQU   SCVTSECT+172                                             14444000
@NM00134 EQU   SCVTSECT+168                                             14445000
SCVTPTRM EQU   SCVTSECT+164                                             14446000
@NM00133 EQU   SCVTSECT+160                                             14447000
@NM00132 EQU   SCVTSECT+156                                             14448000
SCVTQCBR EQU   SCVTSECT+152                                             14449000
SCVTSTAT EQU   SCVTSECT+148                                             14450000
@NM00131 EQU   SCVTSECT+144                                             14451000
SCVTTQE  EQU   SCVTSECT+140                                             14452000
@NM00130 EQU   SCVTSECT+136                                             14453000
SCVTSVCT EQU   SCVTSECT+132                                             14454000
@NM00129 EQU   SCVTSECT+128                                             14455000
@NM00128 EQU   SCVTSECT+124                                             14456000
SCVTRXLQ EQU   SCVTSECT+120                                             14457000
@NM00127 EQU   SCVTSECT+116                                             14458000
SCVTCTCB EQU   SCVTSECT+112                                             14459000
@NM00126 EQU   SCVTSECT+108                                             14460000
@NM00125 EQU   SCVTSECT+104                                             14461000
@NM00124 EQU   SCVTSECT+100                                             14462000
@NM00123 EQU   SCVTSECT+96                                              14463000
SCVTCOMM EQU   SCVTSECT+92                                              14464000
@NM00122 EQU   SCVTSECT+88                                              14465000
@NM00121 EQU   SCVTSECT+84                                              14466000
@NM00120 EQU   SCVTSECT+80                                              14467000
@NM00119 EQU   SCVTSECT+76                                              14468000
@NM00118 EQU   SCVTSECT+72                                              14469000
SCVTGMBR EQU   SCVTSECT+68                                              14470000
SCVTHSKP EQU   SCVTSECT+60                                              14471000
@NM00117 EQU   SCVTSECT+56                                              14472000
@NM00116 EQU   SCVTSECT+52                                              14473000
SCVTLFRM EQU   SCVTSECT+48                                              14474000
SCVTCDCL EQU   SCVTSECT+44                                              14475000
@NM00115 EQU   SCVTSECT+40                                              14476000
SCVTRACE EQU   SCVTSECT+36                                              14477000
@NM00114 EQU   SCVTSECT+32                                              14478000
SCVTRMBR EQU   SCVTSECT+28                                              14479000
@NM00113 EQU   SCVTSECT+24                                              14480000
@NM00112 EQU   SCVTSECT+20                                              14481000
@NM00111 EQU   SCVTSECT+16                                              14482000
@NM00110 EQU   SCVTSECT+14                                              14483000
SCVTBR14 EQU   SCVTSECT+12                                              14484000
SCVTSPET EQU   SCVTSECT+8                                               14485000
SCVTPGWR EQU   SCVTSECT+4                                               14486000
SCVTPGTM EQU   SCVTSECT                                                 14487000
RTMBSLIP EQU   RTMBRTAB+48                                              14488000
RTMBXABT EQU   RTMBRTAB+44                                              14489000
RTMBACR  EQU   RTMBRTAB+40                                              14490000
RTMBPROG EQU   RTMBRTAB+36                                              14491000
RTMBMEMT EQU   RTMBRTAB+32                                              14492000
RTMBCABT EQU   RTMBRTAB+28                                              14493000
RTMBPGIO EQU   RTMBRTAB+24                                              14494000
RTMBSVC  EQU   RTMBRTAB+20                                              14495000
RTMBMACH EQU   RTMBRTAB+16                                              14496000
RTMBREST EQU   RTMBRTAB+12                                              14497000
RTMBDAT  EQU   RTMBRTAB+8                                               14498000
RTMBPAD2 EQU   RTMBTERM+6                                               14499000
RTMBBRAN EQU   RTMBTERM+2                                               14500000
RTMBBALR EQU   RTMBTERM                                                 14501000
RSMASMHD EQU   RSMHD+40                                                 14502000
RSMFOEQ  EQU   RSMHD+36                                                 14503000
RSMLIOQL EQU   RSMLIOQ+4                                                14504000
RSMLIOQF EQU   RSMLIOQ                                                  14505000
RSMLFQL  EQU   RSMLFQ+2                                                 14506000
RSMLFQF  EQU   RSMLFQ                                                   14507000
RSMRSV2  EQU   RSMHD+16                                                 14508000
RSMCNTFX EQU   RSMHD+14                                                 14509000
RSMRSV1  EQU   RSMHD+13                                                 14510000
@NM00109 EQU   RSMFLG1                                                  14511000
RSMFAIL  EQU   RSMFLG1                                                  14512000
RSMGFADD EQU   RSMFLG1                                                  14513000
RSMCPNC  EQU   RSMFLG1                                                  14514000
RSMCPNU  EQU   RSMFLG1                                                  14515000
RSMGFAD  EQU   RSMFLG1                                                  14516000
RSMIOCPC EQU   RSMFLG1                                                  14517000
RSMIOCPU EQU   RSMFLG1                                                  14518000
RSMASCB  EQU   RSMHD+8                                                  14519000
RSMSPCT  EQU   RSMHD+4                                                  14520000
SVRBEND  EQU   RBSECT+192                                               14521000
RBFEPARM EQU   RBSECT+168                                               14522000
SIRBEND  EQU   RBSECT+168                                               14523000
RBRSV158 EQU   RBRSV150                                                 14524000
RBRSV157 EQU   RBRSV150                                                 14525000
RBRSV156 EQU   RBRSV150                                                 14526000
RBRSV155 EQU   RBRSV150                                                 14527000
RBRSV154 EQU   RBRSV150                                                 14528000
RBRSV153 EQU   RBRSV150                                                 14529000
RBRSV152 EQU   RBRSV150                                                 14530000
RBRSV151 EQU   RBRSV150                                                 14531000
RBRSV149 EQU   RBSECT+166                                               14532000
RBRSV148 EQU   RBSECT+164                                               14533000
RBRSV169 EQU   RBSDATA+3                                                14534000
RBSID    EQU   RBSDATA+2                                                14535000
RBSPKEY  EQU   RBSDATA+1                                                14536000
RBRSV168 EQU   RBSFLG3                                                  14537000
RBSTERMO EQU   RBSFLG3                                                  14538000
RBSBRNTR EQU   RBSFLG3                                                  14539000
RBSPRNTR EQU   RBSFLG3                                                  14540000
RBSCNCEL EQU   RBSFLG3                                                  14541000
RBSRECRD EQU   RBSFLG3                                                  14542000
RBSTERMI EQU   RBSFLG3                                                  14543000
RBRSV167 EQU   RBSFLG3                                                  14544000
RBSOWNRA EQU   RBSOWNR+1                                                14545000
RBSSUPER EQU   RBSFLGS2                                                 14546000
RBSKEY0  EQU   RBSFLGS2                                                 14547000
RBRSV166 EQU   RBSFLGS2                                                 14548000
RBRSV165 EQU   RBSFLGS2                                                 14549000
RBSINUSE EQU   RBSFLGS2                                                 14550000
RBRSV164 EQU   RBSFLGS2                                                 14551000
RBSXCTL2 EQU   RBSFLGS2                                                 14552000
RBRSV163 EQU   RBSFLGS2                                                 14553000
RBSPARMA EQU   RBSPARM+1                                                14554000
RBSHALT  EQU   RBSIOPRC                                                 14555000
RBSNOIOP EQU   RBSIOPRC                                                 14556000
RBSASYNC EQU   RBSFLGS1                                                 14557000
RBRSV162 EQU   RBSFLGS1                                                 14558000
RBSESTAE EQU   RBSFLGS1                                                 14559000
RBSDUMMY EQU   RBSFLGS1                                                 14560000
RBSSTAR  EQU   RBSFLGS1                                                 14561000
RBSSTAI  EQU   RBSFLGS1                                                 14562000
RBSEXIT  EQU   RBSCBB+4                                                 14563000
RBSCHAIN EQU   RBSCBB                                                   14564000
TIRBEND  EQU   @NM00107+8                                               14565000
PRBEND   EQU   @NM00107+8                                               14566000
RBRSV146 EQU   RBRSV138                                                 14567000
RBRSV145 EQU   RBRSV138                                                 14568000
RBRSV144 EQU   RBRSV138                                                 14569000
RBRSV143 EQU   RBRSV138                                                 14570000
RBRSV142 EQU   RBRSV138                                                 14571000
RBRSV141 EQU   RBRSV138                                                 14572000
RBRSV140 EQU   RBRSV138                                                 14573000
RBRSV139 EQU   RBRSV138                                                 14574000
RBRSV137 EQU   @NM00107+6                                               14575000
RBRSV136 EQU   @NM00107+4                                               14576000
RBRSV135 EQU   @NM00107                                                 14577000
@NM00106 EQU   RBSECT+32                                                14578000
@NM00105 EQU   @NM00103+1                                               14579000
RBSCF    EQU   @NM00104                                                 14580000
RBPGMQ1  EQU   RBPGMQ+1                                                 14581000
@NM00102 EQU   RBPGMQ                                                   14582000
@NM00101 EQU   RBSECT+16                                                14583000
@NM00100 EQU   @NM00096                                                 14584000
@NM00099 EQU   @NM00096                                                 14585000
RBIQETP  EQU   @NM00096                                                 14586000
RBUSIQE  EQU   RBETXR                                                   14587000
RBATTN   EQU   @NM00096                                                 14588000
@NM00098 EQU   @NM00096                                                 14589000
@NM00097 EQU   @NM00096                                                 14590000
RBPMSVRB EQU   @NM00094                                                 14591000
RBATNXIT EQU   @NM00094                                                 14592000
@NM00095 EQU   @NM00094                                                 14593000
RBWAITP  EQU   @NM00094                                                 14594000
RBFNSVRB EQU   RBTRSVRB                                                 14595000
RBFTP    EQU   @NM00094                                                 14596000
RBSIZE   EQU   RBSECT+8                                                 14597000
RBABOPSW EQU   RBSECT+4                                                 14598000
RBPPSAV1 EQU   RBPPSAV+1                                                14599000
@NM00092 EQU   RBPPSAV                                                  14600000
RBPRFXND EQU   RBPREFIX+64                                              14601000
RBINTCOD EQU   RBINTCDA+1                                               14602000
RBINLNTH EQU   RBINTCDA                                                 14603000
RBWCSA   EQU   RBPREFIX+60                                              14604000
RBRSV004 EQU   RBPREFIX+57                                              14605000
RBSSSYN  EQU   RBFLAGS1                                                 14606000
RBSCB    EQU   RBFLAGS1                                                 14607000
RBLONGWT EQU   RBFLAGS1                                                 14608000
RBASIR   EQU   RBFLAGS1                                                 14609000
RBRSV159 EQU   RBFLAGS1                                                 14610000
RBABEND  EQU   RBFLAGS1                                                 14611000
RBXWAIT  EQU   RBFLAGS1                                                 14612000
RBSLOCK  EQU   RBFLAGS1                                                 14613000
RBRTRAN  EQU   RBRTPSW2+4                                               14614000
RBRTINCD EQU   RBRTICIL+2                                               14615000
RBRTILC  EQU   RBRTICIL+1                                               14616000
RBRSV160 EQU   RBRTICIL                                                 14617000
RBRTPSW1 EQU   RBRTOPSW                                                 14618000
RBRSV062 EQU   RBRSV054                                                 14619000
RBRSV061 EQU   RBRSV054                                                 14620000
RBRSV060 EQU   RBRSV054                                                 14621000
RBRSV059 EQU   RBRSV054                                                 14622000
RBRSV058 EQU   RBRSV054                                                 14623000
RBRSV057 EQU   RBRSV054                                                 14624000
RBRSV056 EQU   RBRSV054                                                 14625000
RBRSV055 EQU   RBRSV054                                                 14626000
RBRSV053 EQU   RBPREFIX+38                                              14627000
RBRSV052 EQU   RBPREFIX+36                                              14628000
RBRSV051 EQU   RBPREFIX+32                                              14629000
RBPRFXST EQU   RBPREFIX+32                                              14630000
RBRSV050 EQU   RBPREFIX+28                                              14631000
RBRSV049 EQU   RBRSV041                                                 14632000
RBRSV048 EQU   RBRSV041                                                 14633000
RBRSV047 EQU   RBRSV041                                                 14634000
RBRSV046 EQU   RBRSV041                                                 14635000
RBRSV045 EQU   RBRSV041                                                 14636000
RBRSV044 EQU   RBRSV041                                                 14637000
RBRSV043 EQU   RBRSV041                                                 14638000
RBRSV042 EQU   RBRSV041                                                 14639000
RBRSV040 EQU   RBPREFIX+26                                              14640000
RBRSV039 EQU   RBPREFIX+24                                              14641000
RBRSV038 EQU   RBPREFIX+20                                              14642000
RBRSV037 EQU   RBPREFIX+16                                              14643000
RBRSV036 EQU   RBRSV028                                                 14644000
RBRSV035 EQU   RBRSV028                                                 14645000
RBRSV034 EQU   RBRSV028                                                 14646000
RBRSV033 EQU   RBRSV028                                                 14647000
RBRSV032 EQU   RBRSV028                                                 14648000
RBRSV031 EQU   RBRSV028                                                 14649000
RBRSV030 EQU   RBRSV028                                                 14650000
RBRSV029 EQU   RBRSV028                                                 14651000
RBRSV027 EQU   RBRSV019                                                 14652000
RBRSV026 EQU   RBRSV019                                                 14653000
RBRSV025 EQU   RBRSV019                                                 14654000
RBRSV024 EQU   RBRSV019                                                 14655000
RBRSV023 EQU   RBRSV019                                                 14656000
RBRSV022 EQU   RBRSV019                                                 14657000
RBRSV021 EQU   RBRSV019                                                 14658000
RBRSV020 EQU   RBRSV019                                                 14659000
RBRSV018 EQU   RBPREFIX+13                                              14660000
RBRSV017 EQU   RBPREFIX+12                                              14661000
RBSRV016 EQU   RBPREFIX+11                                              14662000
RBRSV015 EQU   RBPREFIX+10                                              14663000
RBRSV014 EQU   RBPREFIX+8                                               14664000
RBRSV013 EQU   RBPREFIX+4                                               14665000
RBRSV012 EQU   RBPREFIX                                                 14666000
RBEXSAVE EQU   XRBESA                                                   14667000
XRBREG15 EQU   RBGRS15                                                  14668000
XRBREG14 EQU   RBGRS14                                                  14669000
XRBREG13 EQU   RBGRS13                                                  14670000
XRBREG12 EQU   RBGRS12                                                  14671000
XRBREG11 EQU   RBGRS11                                                  14672000
XRBREG10 EQU   RBGRS10                                                  14673000
XRBREG9  EQU   RBGRS9                                                   14674000
XRBREG8  EQU   RBGRS8                                                   14675000
XRBREG7  EQU   RBGRS7                                                   14676000
XRBREG6  EQU   RBGRS6                                                   14677000
XRBREG5  EQU   RBGRS5                                                   14678000
XRBREG4  EQU   RBGRS4                                                   14679000
XRBREG3  EQU   RBGRS3                                                   14680000
XRBREG2  EQU   RBGRS2                                                   14681000
XRBREG1  EQU   RBGRS1                                                   14682000
XRBREG0  EQU   RBGRS0                                                   14683000
XRBLNKA  EQU   RBLINKB                                                  14684000
XRBWT    EQU   RBWCF                                                    14685000
@NM00091 EQU   RBBASIC+24                                               14686000
RBOPSWPS EQU   RBOPSWB2                                                 14687000
@NM00090 EQU   RBOPSWB2                                                 14688000
@NM00089 EQU   XRBPSW                                                   14689000
@NM00088 EQU   RBBASIC+12                                               14690000
XRBWAIT  EQU   RBECBWT                                                  14691000
XRBFRRB  EQU   RBFDYN                                                   14692000
@NM00087 EQU   XSTAB2                                                   14693000
XRBACTV  EQU   RBFACTV                                                  14694000
XRBTCBP  EQU   RBTCBNXT                                                 14695000
@NM00086 EQU   XSTAB1                                                   14696000
XRBCKPT  EQU   RBFTCKPT                                                 14697000
@NM00085 EQU   XSTAB1                                                   14698000
@NM00084 EQU   RBBASIC+8                                                14699000
@NM00083 EQU   RBEXRTNM+1                                               14700000
RBTMIND3 EQU   RBTMFLD                                                  14701000
RBTMIND2 EQU   RBTMFLD                                                  14702000
RBTMCMP  EQU   RBTMFLD                                                  14703000
RBWLIM   EQU   RBTMFLD                                                  14704000
RBRSV005 EQU   RBTMFLD                                                  14705000
RBTMTOD  EQU   RBTMFLD                                                  14706000
RBTMQUE  EQU   RBTMFLD                                                  14707000
@NM00082 EQU   RBPRFX                                                   14708000
PVTEND   EQU   PVT+1848                                                 14709000
PVTTASID EQU   PVT+1846                                                 14710000
PVTXXXXX EQU   PVT+1844                                                 14711000
PVTMVCLC EQU   PVT+1840                                                 14712000
PVTSPARE EQU   PVT+1838                                                 14713000
PVTCHUIC EQU   PVT+1836                                                 14714000
PVTCOMFX EQU   PVT+1834                                                 14715000
PVTSQAFX EQU   PVT+1832                                                 14716000
PVTCNTFX EQU   PVT+1830                                                 14717000
PVTDEFFX EQU   PVT+1828                                                 14718000
PVTFIXOK EQU   PVT+1826                                                 14719000
PVTPEROK EQU   PVT+1824                                                 14720000
PVTMAXFX EQU   PVT+1822                                                 14721000
PVTPERFX EQU   PVT+1820                                                 14722000
PVTRSRB  EQU   PVT+1776                                                 14723000
PVTRESV5 EQU   PVT+1773                                                 14724000
PVTSRBS  EQU   PVT+1772                                                 14725000
PVTSSRB  EQU   PVT+1768                                                 14726000
PVTACA   EQU   PVTWSAX+1400                                             14727000
PVTSAVE  EQU   PVTWSAX+1328                                             14728000
PVTWSA18 EQU   PVTWSAX+1256                                             14729000
PVTWSA17 EQU   PVTWSAX+1184                                             14730000
PVTWSA16 EQU   PVTWSAX+1112                                             14731000
PVTWSA15 EQU   PVTWSAX+1040                                             14732000
PVTWSA14 EQU   PVTWSAX+968                                              14733000
PVTWSA13 EQU   PVTWSAX+896                                              14734000
PVTWSA12 EQU   PVTWSAX+824                                              14735000
PVTWSA11 EQU   PVTWSAX+752                                              14736000
PVTWSA10 EQU   PVTWSAX+672                                              14737000
PVTWSA9  EQU   PVTWSAX+592                                              14738000
PVTWSA8  EQU   PVTWSAX+504                                              14739000
PVTWSA7  EQU   PVTWSAX+432                                              14740000
PVTWSA6  EQU   PVTWSAX+360                                              14741000
PVTWSA5  EQU   PVTWSAX+288                                              14742000
PVTWSA4  EQU   PVTWSAX+216                                              14743000
PVTWSA3  EQU   PVTWSAX+144                                              14744000
PVTWSA2  EQU   PVTWSAX+72                                               14745000
PVTWSA1  EQU   PVTWSAX                                                  14746000
PVTCIOQL EQU   PVTQS+36                                                 14747000
PVTCIOQF EQU   PVTQS+32                                                 14748000
PVTGFADL EQU   PVTQS+28                                                 14749000
PVTGFADF EQU   PVTQS+24                                                 14750000
PVTFPCBL EQU   PVTQS+20                                                 14751000
PVTFPCBF EQU   PVTQS+16                                                 14752000
PVTCFQL  EQU   PVTQS+10                                                 14753000
PVTCFQF  EQU   PVTQS+8                                                  14754000
PVTRSRVL EQU   PVTQS+6                                                  14755000
PVTRSRVF EQU   PVTQS+4                                                  14756000
PVTAFQL  EQU   PVTQS+2                                                  14757000
PVTAFQF  EQU   PVTQS                                                    14758000
PVTSPFR  EQU   PVT+302                                                  14759000
PVTCFMCT EQU   PVT+300                                                  14760000
PVTSPREC EQU   PVT+296                                                  14761000
PVTCAREC EQU   PVT+292                                                  14762000
PVTCAOUT EQU   PVT+288                                                  14763000
PVTCAIN  EQU   PVT+284                                                  14764000
PVTNSWPS EQU   PVT+280                                                  14765000
PVTNPREC EQU   PVT+276                                                  14766000
PVTSPOUT EQU   PVT+272                                                  14767000
PVTSPIN  EQU   PVT+268                                                  14768000
PVTVAMR  EQU   PVT+264                                                  14769000
PVTVAMO  EQU   PVT+260                                                  14770000
PVTVAMI  EQU   PVT+256                                                  14771000
PVTNPOUT EQU   PVT+252                                                  14772000
PVTNPIN  EQU   PVT+248                                                  14773000
PVTPRSET EQU   PVT+244                                                  14774000
PVTFRSLT EQU   PVT+240                                                  14775000
PVTPAGIO EQU   PVT+236                                                  14776000
PVTSWPIO EQU   PVT+232                                                  14777000
PVTPSWPP EQU   PVT+228                                                  14778000
PVTPPREF EQU   PVT+224                                                  14779000
PVTPOPBR EQU   PVT+220                                                  14780000
PVTPRELF EQU   PVT+216                                                  14781000
PVTPRELV EQU   PVT+212                                                  14782000
PVTPFREE EQU   PVT+208                                                  14783000
PVTPRELS EQU   PVT+204                                                  14784000
PVTPOUT  EQU   PVT+200                                                  14785000
PVTPFXLD EQU   PVT+196                                                  14786000
PVTPITAS EQU   PVT+192                                                  14787000
PVTPSRBP EQU   PVT+188                                                  14788000
PVTPDSEG EQU   PVT+184                                                  14789000
PVTPCSGB EQU   PVT+180                                                  14790000
PVTPCSEG EQU   PVT+176                                                  14791000
PVTPINV  EQU   PVT+172                                                  14792000
PVTPSWPC EQU   PVT+168                                                  14793000
PVTPSOUT EQU   PVT+164                                                  14794000
PVTPSWIN EQU   PVT+160                                                  14795000
PVTPRCV  EQU   PVT+156                                                  14796000
PVTPRCFI EQU   PVT+152                                                  14797000
PVTPRCF  EQU   PVT+148                                                  14798000
PVTPVRC  EQU   PVT+144                                                  14799000
PVTPVRIN EQU   PVT+140                                                  14800000
PVTPVRLS EQU   PVT+136                                                  14801000
PVTPVEQR EQU   PVT+132                                                  14802000
PVTPPIOI EQU   PVT+128                                                  14803000
PVTPVRPO EQU   PVT+124                                                  14804000
PVTPRFR  EQU   PVT+120                                                  14805000
PVTPFP2  EQU   PVT+116                                                  14806000
PVTPFP   EQU   PVT+112                                                  14807000
PVTPFTE  EQU   PVT+108                                                  14808000
PVTREP2  EQU   PVT+100                                                  14809000
PVTPIOCP EQU   PVT+96                                                   14810000
PVTPIOP  EQU   PVT+92                                                   14811000
PVTPGFAD EQU   PVT+88                                                   14812000
PVTPGFA  EQU   PVT+84                                                   14813000
PVTPSQA  EQU   PVT+80                                                   14814000
PVTPSINT EQU   PVT+76                                                   14815000
PVTPSIB  EQU   PVT+72                                                   14816000
PVTSRBID EQU   PVT+68                                                   14817000
PVTHQSA  EQU   PVT+62                                                   14818000
PVTLQSA  EQU   PVT+60                                                   14819000
PVTOROOT EQU   PVT+56                                                   14820000
PVTPRCA  EQU   PVT+52                                                   14821000
PVTREUS  EQU   PVT+48                                                   14822000
PVTSQNPC EQU   PVT+47                                                   14823000
PVTSQVRC EQU   PVT+46                                                   14824000
PVTVROOT EQU   PVT+40                                                   14825000
PVTPCBLO EQU   PVT+38                                                   14826000
PVTPCBCT EQU   PVT+36                                                   14827000
PVTDFRS  EQU   PVT+34                                                   14828000
PVTRSQA  EQU   PVT+32                                                   14829000
PVTPTLB  EQU   PVT+31                                                   14830000
PVTPCBNO EQU   PVT+30                                                   14831000
PVTSRBNO EQU   PVT+29                                                   14832000
PVTSQDC  EQU   PVT+28                                                   14833000
PVTLVR   EQU   PVT+22                                                   14834000
PVTFVR   EQU   PVT+20                                                   14835000
PVTSSPIN EQU   PVT+11                                                   14836000
PVTPCBS  EQU   PVT+10                                                   14837000
PVTPOOL  EQU   PVT+8                                                    14838000
PVTAFCOK EQU   PVT+6                                                    14839000
PVTAFCLO EQU   PVT+4                                                    14840000
PVTAFC   EQU   PVT+2                                                    14841000
@NM00081 EQU   PVTFLAG2                                                 14842000
PVTRSMGM EQU   PVTFLAG2                                                 14843000
PVTDUMP  EQU   PVTFLAG1                                                 14844000
PVTSIT   EQU   PVTFLAG1                                                 14845000
PVTLSI   EQU   PVTFLAG1                                                 14846000
PVTAPREF EQU   PVTFLAG1                                                 14847000
PVTPCBLT EQU   PVTFLAG1                                                 14848000
PVTSRBIU EQU   PVTFLAG1                                                 14849000
PVTBGMS  EQU   PVTFLAG1                                                 14850000
PVTPMSG  EQU   PVTFLAG1                                                 14851000
@NM00080 EQU   PSA+3668                                                 14852000
@NM00079 EQU   PSA+1048                                                 14853000
PSAUSEND EQU   PSA+1048                                                 14854000
PSARV062 EQU   PSA+1044                                                 14855000
PSAWTCOD EQU   PSA+1036                                                 14856000
PSAATCVT EQU   PSA+1032                                                 14857000
PSAPCPSW EQU   PSA+1024                                                 14858000
PSAPIR2  EQU   PSA+1020                                                 14859000
PSARV059 EQU   PSA+1018                                                 14860000
PSASVC13 EQU   PSA+1016                                                 14861000
PSALSFCC EQU   PSA+1012                                                 14862000
PSASFACC EQU   PSA+1008                                                 14863000
PSASTOP  EQU   PSA+992                                                  14864000
PSASTART EQU   PSA+976                                                  14865000
PSARSPSW EQU   PSA+968                                                  14866000
PSASRPSW EQU   PSA+960                                                  14867000
PSARV045 EQU   PSA+892                                                  14868000
PSARV044 EQU   PSA+888                                                  14869000
PSARV043 EQU   PSA+884                                                  14870000
PSARV042 EQU   PSA+880                                                  14871000
PSARV041 EQU   PSA+876                                                  14872000
PSARV040 EQU   PSA+872                                                  14873000
PSARV025 EQU   PSA+868                                                  14874000
PSADSSED EQU   PSA+868                                                  14875000
PSADSSPR EQU   PSA+864                                                  14876000
PSADSSFW EQU   PSA+860                                                  14877000
PSADSS14 EQU   PSA+856                                                  14878000
PSADSSPP EQU   PSA+848                                                  14879000
PSADSSRP EQU   PSA+840                                                  14880000
PSADSS05 EQU   PSADSSF4                                                 14881000
PSADSS10 EQU   PSADSSF4                                                 14882000
PSADSSVE EQU   PSADSSF4                                                 14883000
PSADSSDE EQU   PSADSSF4                                                 14884000
PSADSSC0 EQU   PSADSSF4                                                 14885000
PSADSSIE EQU   PSADSSF4                                                 14886000
PSADSS12 EQU   PSADSSF4                                                 14887000
PSADSSRC EQU   PSADSSF4                                                 14888000
PSARV057 EQU   PSADSSF3                                                 14889000
PSARV056 EQU   PSADSSF3                                                 14890000
PSARV055 EQU   PSADSSF3                                                 14891000
PSADSSMC EQU   PSADSSF3                                                 14892000
PSADSSRW EQU   PSADSSF3                                                 14893000
PSADSSNM EQU   PSADSSF3                                                 14894000
PSADSSES EQU   PSADSSF3                                                 14895000
PSADSSGP EQU   PSADSSF3                                                 14896000
PSADSSF2 EQU   PSADSSFL+1                                               14897000
PSADSSPI EQU   PSADSSF1                                                 14898000
PSADSSOI EQU   PSADSSF1                                                 14899000
PSADSSSP EQU   PSADSSF1                                                 14900000
PSADSSTP EQU   PSADSSF1                                                 14901000
PSADSSDW EQU   PSADSSF1                                                 14902000
PSADSSDD EQU   PSADSSF1                                                 14903000
PSADSSDM EQU   PSADSSF1                                                 14904000
PSADSSMV EQU   PSADSSF1                                                 14905000
PSADSSTS EQU   PSA+816                                                  14906000
PSADSSWK EQU   PSA+812                                                  14907000
PSADSSR3 EQU   PSA+808                                                  14908000
PSADSSR2 EQU   PSA+804                                                  14909000
PSADSSRS EQU   PSA+800                                                  14910000
PSAVSTAP EQU   PSA+792                                                  14911000
PSAWKVAP EQU   PSA+788                                                  14912000
PSAWKRAP EQU   PSA+784                                                  14913000
PSAMCHIC EQU   PSA+783                                                  14914000
PSAACTCD EQU   PSA+782                                                  14915000
PSASYMSK EQU   PSA+781                                                  14916000
PSAMCHFL EQU   PSA+780                                                  14917000
PSACR0   EQU   PSA+776                                                  14918000
PSAPSWSV EQU   PSA+768                                                  14919000
PSACLHS  EQU   PSAHLHI                                                  14920000
PSALKR15 EQU   PSALKSA+60                                               14921000
PSALKR14 EQU   PSALKSA+56                                               14922000
PSALKR13 EQU   PSALKSA+52                                               14923000
PSALKR12 EQU   PSALKSA+48                                               14924000
PSALKR11 EQU   PSALKSA+44                                               14925000
PSALKR10 EQU   PSALKSA+40                                               14926000
PSALKR9  EQU   PSALKSA+36                                               14927000
PSALKR8  EQU   PSALKSA+32                                               14928000
PSALKR7  EQU   PSALKSA+28                                               14929000
PSALKR6  EQU   PSALKSA+24                                               14930000
PSALKR5  EQU   PSALKSA+20                                               14931000
PSALKR4  EQU   PSALKSA+16                                               14932000
PSALKR3  EQU   PSALKSA+12                                               14933000
PSALKR2  EQU   PSALKSA+8                                                14934000
PSALKR1  EQU   PSALKSA+4                                                14935000
PSALKR0  EQU   PSALKSA                                                  14936000
PSARV023 EQU   PSACLHT+52                                               14937000
PSALOCAL EQU   PSACLHT+48                                               14938000
PSACMSL  EQU   PSACLHT+44                                               14939000
PSAOPTL  EQU   PSACLHT+40                                               14940000
PSATPACL EQU   PSACLHT+36                                               14941000
PSATPDNL EQU   PSACLHT+32                                               14942000
PSATPNCL EQU   PSACLHT+28                                               14943000
PSAIOSLL EQU   PSACLHT+24                                               14944000
PSAIOSUL EQU   PSACLHT+20                                               14945000
PSAIOSCL EQU   PSACLHT+16                                               14946000
PSAIOSSL EQU   PSACLHT+12                                               14947000
PSASALCL EQU   PSACLHT+8                                                14948000
PSAASML  EQU   PSACLHT+4                                                14949000
PSADISPL EQU   PSACLHT                                                  14950000
PSASRSA  EQU   PSA+636                                                  14951000
PSARV050 EQU   PSA+634                                                  14952000
PSADSSGO EQU   PSA+633                                                  14953000
PSARECUR EQU   PSA+632                                                  14954000
PSAHLHIS EQU   PSA+628                                                  14955000
PSAIPCSA EQU   PSA+624                                                  14956000
@NM00078 EQU   PSA+621                                                  14957000
PSAIPCDM EQU   PSA+620                                                  14958000
PSAIPCD  EQU   PSA+616                                                  14959000
@NM00077 EQU   PSA+613                                                  14960000
PSAIPCRM EQU   PSA+612                                                  14961000
PSAIPCR  EQU   PSA+608                                                  14962000
PSAMCHEX EQU   PSA+600                                                  14963000
PSAMPSW  EQU   PSA+592                                                  14964000
PSAEXPS2 EQU   PSA+584                                                  14965000
PSAEXPS1 EQU   PSA+576                                                  14966000
PSAPIREG EQU   PSA+572                                                  14967000
PSARSREG EQU   PSA+568                                                  14968000
PSAGPREG EQU   PSA+556                                                  14969000
PSARV022 EQU   PSASUP4                                                  14970000
PSARV021 EQU   PSASUP4                                                  14971000
PSARV020 EQU   PSASUP4                                                  14972000
PSARV019 EQU   PSASUP4                                                  14973000
PSARV018 EQU   PSASUP4                                                  14974000
PSARV017 EQU   PSASUP4                                                  14975000
PSARV016 EQU   PSASUP4                                                  14976000
PSARV015 EQU   PSASUP4                                                  14977000
PSARV014 EQU   PSASUP3                                                  14978000
PSARV013 EQU   PSASUP3                                                  14979000
PSARV012 EQU   PSASUP3                                                  14980000
PSAESTA  EQU   PSASUP3                                                  14981000
PSASPR   EQU   PSASUP3                                                  14982000
PSAPSREG EQU   PSASUP3                                                  14983000
PSAPI2   EQU   PSASUP3                                                  14984000
PSAIOSUP EQU   PSASUP3                                                  14985000
PSALCR   EQU   PSASUP2                                                  14986000
PSARTM   EQU   PSASUP2                                                  14987000
PSAACR   EQU   PSASUP2                                                  14988000
PSAIPCE2 EQU   PSASUP2                                                  14989000
PSAIPCES EQU   PSASUP2                                                  14990000
PSAIPCEC EQU   PSASUP2                                                  14991000
PSAGTF   EQU   PSASUP2                                                  14992000
PSAIPCRI EQU   PSASUP2                                                  14993000
PSATYPE6 EQU   PSASUP1                                                  14994000
PSATCTL  EQU   PSASUP1                                                  14995000
PSADISP  EQU   PSASUP1                                                  14996000
PSALOCK  EQU   PSASUP1                                                  14997000
PSAPI    EQU   PSASUP1                                                  14998000
PSAEXT   EQU   PSASUP1                                                  14999000
PSASVC   EQU   PSASUP1                                                  15000000
PSAIO    EQU   PSASUP1                                                  15001000
FLCHDEND EQU   PSA+512                                                  15002000
FLCCRSAV EQU   FLCMCLA+280                                              15003000
FLCGRSAV EQU   FLCMCLA+216                                              15004000
FLCFPSAV EQU   FLCMCLA+184                                              15005000
FLCFLA   EQU   FLCMCLA+88                                               15006000
FLCRGNCD EQU   FLCMCLA+84                                               15007000
FLCFSAA  EQU   FLCFSA+1                                                 15008000
@NM00076 EQU   FLCFSA                                                   15009000
@NM00075 EQU   FLCMCLA+77                                               15010000
PSAMDISC EQU   PSAMEDC                                                  15011000
PSAMINTR EQU   PSAMEDC                                                  15012000
PSAMINST EQU   PSAMEDC                                                  15013000
PSAMCCF  EQU   PSAMEDC                                                  15014000
PSAMCNOP EQU   PSAMEDC                                                  15015000
PSAMEXSR EQU   PSAMEDC                                                  15016000
PSAMCOPR EQU   PSAMEDC                                                  15017000
@NM00074 EQU   PSAMEDC                                                  15018000
@NM00073 EQU   FLCMCLA+72                                               15019000
FLCMCIC  EQU   FLCMCLA+64                                               15020000
@NM00072 EQU   FLCMCLA+20                                               15021000
FLCIOAA  EQU   FLCIOA+1                                                 15022000
@NM00071 EQU   FLCIOA                                                   15023000
@NM00070 EQU   FLCMCLA+15                                               15024000
@NM00069 EQU   FLCMCLA+14                                               15025000
@NM00068 EQU   FLCMCLA+12                                               15026000
FLCLCL   EQU   FLCMCLA+8                                                15027000
FLCIOELA EQU   FLCIOEL+1                                                15028000
@NM00067 EQU   FLCIOEL                                                  15029000
FLCCHIL  EQU   FLCCHNID+2                                               15030000
FLCCHMOD EQU   FLCCHTM                                                  15031000
FLCCHTYP EQU   FLCCHTM                                                  15032000
@NM00066 EQU   PSA+160                                                  15033000
FLCMTRCD EQU   PSA+157                                                  15034000
@NM00065 EQU   PSA+156                                                  15035000
FLCPERA  EQU   FLCPER+1                                                 15036000
@NM00064 EQU   FLCPER                                                   15037000
@NM00063 EQU   PSA+151                                                  15038000
FLCPERCD EQU   PSA+150                                                  15039000
FLCMCNUM EQU   PSA+149                                                  15040000
@NM00062 EQU   PSA+148                                                  15041000
FLCTEAA  EQU   FLCTEA+1                                                 15042000
@NM00061 EQU   FLCTEA                                                   15043000
PSAPIPC  EQU   PSAPICOD                                                 15044000
PSAPIMC  EQU   PSAPICOD                                                 15045000
PSAPIPER EQU   PSAPICOD                                                 15046000
PSARV049 EQU   FLCPICOD                                                 15047000
FLCPILCB EQU   FLCPIILC                                                 15048000
@NM00060 EQU   FLCPIILC                                                 15049000
@NM00059 EQU   PSAEPPSW                                                 15050000
FLCSVCN  EQU   PSAESPSW+2                                               15051000
FLCSILCB EQU   FLCSVILC                                                 15052000
@NM00058 EQU   FLCSVILC                                                 15053000
@NM00057 EQU   PSAESPSW                                                 15054000
FLCEICOD EQU   PSAEEPSW+2                                               15055000
@NM00056 EQU   PSA+128                                                  15056000
FLCTIMER EQU   PSA+80                                                   15057000
FLCCVT2  EQU   PSA+76                                                   15058000
FLCCAW   EQU   PSA+72                                                   15059000
FLCCSW   EQU   PSA+64                                                   15060000
FLCIOPSW EQU   PSA+56                                                   15061000
FLCMOPSW EQU   PSA+48                                                   15062000
FLCSOPSW EQU   PSA+32                                                   15063000
FLCEOPSW EQU   PSA+24                                                   15064000
@NM00055 EQU   FLCICCW2+4                                               15065000
FLCICCW1 EQU   FLCROPSW                                                 15066000
FLCIPPSW EQU   FLCRNPSW                                                 15067000
PQERSVD  EQU   PQESECT+31                                               15068000
@NM00054 EQU   VMMFLGS                                                  15069000
PQEHRID  EQU   PQESECT+29                                               15070000
PQERFLGS EQU   PQESECT+28                                               15071000
PGTPAM   EQU   PGTBITS                                                  15072000
@NM00053 EQU   PGTBITS                                                  15073000
@NM00052 EQU   PGTBITS                                                  15074000
PGTPVM   EQU   PGTBITS                                                  15075000
@NM00051 EQU   PGTBITS                                                  15076000
@NM00050 EQU   PGTBITS                                                  15077000
@NM00049 EQU   PGTBITS                                                  15078000
@NM00048 EQU   PGTBITS                                                  15079000
PGTREAL  EQU   PGTRSA                                                   15080000
PFTUIC   EQU   PFTE+15                                                  15081000
@NM00047 EQU   PFTFLAG2                                                 15082000
@NM00046 EQU   PFTFLAG2                                                 15083000
PFTPREF  EQU   PFTFLAG2                                                 15084000
PFTSTEAL EQU   PFTFLAG2                                                 15085000
PFTIRRG  EQU   PFTFLAG2                                                 15086000
PFTVR    EQU   PFTFLAG2                                                 15087000
PFTOFFLN EQU   PFTFLAG2                                                 15088000
PFTDFRLS EQU   PFTFLAG2                                                 15089000
PFTOFINT EQU   PFTFLAG1                                                 15090000
PFTVRALC EQU   PFTFLAG1                                                 15091000
PFTBADPG EQU   PFTFLAG1                                                 15092000
PFTPCBSI EQU   PFTFLAG1                                                 15093000
PFTLNGFX EQU   PFTFLAG1                                                 15094000
PFTVRINT EQU   PFTFLAG1                                                 15095000
PFTONAVQ EQU   PFTFLAG1                                                 15096000
PFTRSV1  EQU   PFTE+10                                                  15097000
PFTFXCT  EQU   PFTE+8                                                   15098000
@NM00045 EQU   PCCA+512                                                 15099000
PCCARV36 EQU   PCCA+380                                                 15100000
PCCARV35 EQU   PCCA+378                                                 15101000
PCCARV01 EQU   PCCA+377                                                 15102000
PCCAR105 EQU   PCCAATTR                                                 15103000
PCCAR104 EQU   PCCAATTR                                                 15104000
PCCAR103 EQU   PCCAATTR                                                 15105000
PCCAR102 EQU   PCCAATTR                                                 15106000
PCCAR101 EQU   PCCAATTR                                                 15107000
PCCAR100 EQU   PCCAATTR                                                 15108000
PCCACPUM EQU   PCCAATTR                                                 15109000
PCCARV63 EQU   PCCA+372                                                 15110000
PCCARV62 EQU   PCCA+368                                                 15111000
PCCARV61 EQU   PCCA+364                                                 15112000
PCCARV60 EQU   PCCA+360                                                 15113000
PCCARV59 EQU   PCCA+356                                                 15114000
PCCARV58 EQU   PCCA+352                                                 15115000
PCCARV57 EQU   PCCA+348                                                 15116000
PCCARV56 EQU   PCCA+344                                                 15117000
PCCARV55 EQU   PCCA+340                                                 15118000
PCCARV54 EQU   PCCA+336                                                 15119000
PCCALOGA EQU   PCCA+332                                                 15120000
PCCACHID EQU   PCCA+324                                                 15121000
PCCACHSV EQU   PCCA+312                                                 15122000
PCCARV79 EQU   PCCACHF4                                                 15123000
PCCARV78 EQU   PCCACHF4                                                 15124000
PCCARV77 EQU   PCCACHF4                                                 15125000
PCCARV76 EQU   PCCACHF4                                                 15126000
PCCARV75 EQU   PCCACHF4                                                 15127000
PCCARV74 EQU   PCCACHF4                                                 15128000
PCCARV73 EQU   PCCACHF4                                                 15129000
PCCARV72 EQU   PCCACHF4                                                 15130000
PCCARV71 EQU   PCCACHF3                                                 15131000
PCCARV70 EQU   PCCACHF3                                                 15132000
PCCARV69 EQU   PCCACHF3                                                 15133000
PCCARV68 EQU   PCCACHF3                                                 15134000
PCCARV67 EQU   PCCACHF3                                                 15135000
PCCARV66 EQU   PCCACHF3                                                 15136000
PCCASLCK EQU   PCCACHF3                                                 15137000
PCCAISRB EQU   PCCACHF3                                                 15138000
PCCACF28 EQU   PCCACHF2                                                 15139000
PCCACF27 EQU   PCCACHF2                                                 15140000
PCCACF26 EQU   PCCACHF2                                                 15141000
PCCACF25 EQU   PCCACHF2                                                 15142000
PCCACF24 EQU   PCCACHF2                                                 15143000
PCCACF23 EQU   PCCACHF2                                                 15144000
PCCACF22 EQU   PCCACHF2                                                 15145000
PCCACF21 EQU   PCCACHF2                                                 15146000
PCCACF18 EQU   PCCACHF1                                                 15147000
PCCACF17 EQU   PCCACHF1                                                 15148000
PCCACF16 EQU   PCCACHF1                                                 15149000
PCCACF15 EQU   PCCACHF1                                                 15150000
PCCACF14 EQU   PCCACHF1                                                 15151000
PCCACF13 EQU   PCCACHF1                                                 15152000
PCCACF12 EQU   PCCACHF1                                                 15153000
PCCACF11 EQU   PCCACHF1                                                 15154000
PCCARV05 EQU   PCCA+307                                                 15155000
PCCACHPB EQU   PCCA+306                                                 15156000
PCCALGP2 EQU   PCCA+305                                                 15157000
PCCALGP1 EQU   PCCA+304                                                 15158000
PCCACELL EQU   PCCA+302                                                 15159000
PCCALOGL EQU   PCCA+300                                                 15160000
PCCACHW2 EQU   PCCA+296                                                 15161000
PCCACHW1 EQU   PCCA+292                                                 15162000
PCCAIOSI EQU   PCCA+291                                                 15163000
PCCACNRB EQU   PCCACHRB                                                 15164000
PCCACCVB EQU   PCCACHRB                                                 15165000
PCCACSNB EQU   PCCACHRB                                                 15166000
PCCARV52 EQU   PCCACHRB                                                 15167000
PCCACHIB EQU   PCCACHRB                                                 15168000
PCCACTIB EQU   PCCACHRB                                                 15169000
PCCACINB EQU   PCCACHRB                                                 15170000
PCCACSIB EQU   PCCACHRB                                                 15171000
PCCARV51 EQU   PCCACHS2                                                 15172000
PCCARV50 EQU   PCCACHS2                                                 15173000
PCCACCRA EQU   PCCACHS2                                                 15174000
PCCACURC EQU   PCCACHS2                                                 15175000
PCCACNLG EQU   PCCACHS2                                                 15176000
PCCACMOD EQU   PCCACHS2                                                 15177000
PCCACALT EQU   PCCACHS2                                                 15178000
PCCACIOR EQU   PCCACHS2                                                 15179000
PCCARV47 EQU   PCCACHS1                                                 15180000
PCCACUCB EQU   PCCACHS1                                                 15181000
PCCACIBC EQU   PCCACHS1                                                 15182000
PCCACAND EQU   PCCACHS1                                                 15183000
PCCACNLS EQU   PCCACHS1                                                 15184000
PCCACFRR EQU   PCCACHS1                                                 15185000
PCCACNRE EQU   PCCACHS1                                                 15186000
PCCACCMP EQU   PCCACHS1                                                 15187000
PCCACSEQ EQU   PCCACHTS                                                 15188000
PCCACDIN EQU   PCCACHTS                                                 15189000
PCCARV44 EQU   PCCACHTS                                                 15190000
PCCARV43 EQU   PCCACHTS                                                 15191000
PCCACTEC EQU   PCCACHTS                                                 15192000
PCCACDAV EQU   PCCACHVA                                                 15193000
PCCACCHV EQU   PCCACHVA                                                 15194000
PCCACCMD EQU   PCCACHVA                                                 15195000
PCCACUNS EQU   PCCACHVA                                                 15196000
PCCACSQV EQU   PCCACHVA                                                 15197000
PCCARV42 EQU   PCCACHVA                                                 15198000
PCCARV41 EQU   PCCACHVA                                                 15199000
PCCACITF EQU   PCCACHVA                                                 15200000
PCCARV40 EQU   PCCACHBL                                                 15201000
PCCARV39 EQU   PCCACHBL                                                 15202000
PCCARV38 EQU   PCCACHBL                                                 15203000
PCCACCUE EQU   PCCACHBL                                                 15204000
PCCACSTG EQU   PCCACHBL                                                 15205000
PCCACSCU EQU   PCCACHBL                                                 15206000
PCCACCHA EQU   PCCACHBL                                                 15207000
PCCACCPU EQU   PCCACHBL                                                 15208000
PCCACNOR EQU   PCCACHPF                                                 15209000
PCCACCNT EQU   PCCACHPF                                                 15210000
PCCACSNS EQU   PCCACHPF                                                 15211000
PCCARV37 EQU   PCCACHPF                                                 15212000
PCCACHIO EQU   PCCACHPF                                                 15213000
PCCACTIO EQU   PCCACHPF                                                 15214000
PCCACINT EQU   PCCACHPF                                                 15215000
PCCACSIO EQU   PCCACHPF                                                 15216000
PCCACHUB EQU   PCCAWERP                                                 15217000
PCCAR106 EQU   PCCA+228                                                 15218000
PCCAR113 EQU   PCCA+226                                                 15219000
PCCASRBL EQU   PCCA+225                                                 15220000
PCCAR112 EQU   PCCACHAN                                                 15221000
PCCAR111 EQU   PCCACHAN                                                 15222000
PCCAR110 EQU   PCCACHAN                                                 15223000
PCCAR109 EQU   PCCACHAN                                                 15224000
PCCAR108 EQU   PCCACHAN                                                 15225000
PCCAR107 EQU   PCCACHAN                                                 15226000
PCCAEXDM EQU   PCCACHAN                                                 15227000
PCCAIRST EQU   PCCACHAN                                                 15228000
PCCASRB  EQU   PCCA+180                                                 15229000
PCCACCHM EQU   PCCA+176                                                 15230000
PCCAELBA EQU   PCCA+172                                                 15231000
PCCAELAD EQU   PCCA+168                                                 15232000
PCCALRBR EQU   PCCA+164                                                 15233000
PCCALRBV EQU   PCCA+160                                                 15234000
PCCAPWAR EQU   PCCA+156                                                 15235000
PCCAPWAV EQU   PCCA+152                                                 15236000
PCCAEMSA EQU   PCCAEMSB+12                                              15237000
PCCAEMSE EQU   PCCAEMSB+8                                               15238000
PCCAEMSP EQU   PCCAEMSB+4                                               15239000
PCCARMS  EQU   PCCARMSB                                                 15240000
PCCARV34 EQU   PCCARMSB                                                 15241000
PCCARV33 EQU   PCCARMSB                                                 15242000
PCCARV32 EQU   PCCARMSB                                                 15243000
PCCARV31 EQU   PCCARMSB                                                 15244000
PCCARV30 EQU   PCCARMSB                                                 15245000
PCCARV29 EQU   PCCARMSB                                                 15246000
PCCARV28 EQU   PCCARMSB                                                 15247000
PCCARV27 EQU   PCCAEMS3                                                 15248000
PCCARV26 EQU   PCCAEMS3                                                 15249000
PCCARV25 EQU   PCCAEMS3                                                 15250000
PCCARV24 EQU   PCCAEMS3                                                 15251000
PCCARV23 EQU   PCCAEMS3                                                 15252000
PCCARV22 EQU   PCCAEMS3                                                 15253000
PCCARV21 EQU   PCCAEMS3                                                 15254000
PCCARV20 EQU   PCCAEMS3                                                 15255000
PCCARV19 EQU   PCCAEMS2                                                 15256000
PCCARV18 EQU   PCCAEMS2                                                 15257000
PCCARV17 EQU   PCCAEMS2                                                 15258000
PCCARV16 EQU   PCCAEMS2                                                 15259000
PCCARV15 EQU   PCCAEMS2                                                 15260000
PCCARV14 EQU   PCCAEMS2                                                 15261000
PCCARV13 EQU   PCCAEMS2                                                 15262000
PCCARV12 EQU   PCCAEMS2                                                 15263000
PCCARV11 EQU   PCCARISP                                                 15264000
PCCARV10 EQU   PCCARISP                                                 15265000
PCCARV09 EQU   PCCARISP                                                 15266000
PCCARV08 EQU   PCCARISP                                                 15267000
PCCARV07 EQU   PCCARISP                                                 15268000
PCCARV06 EQU   PCCARISP                                                 15269000
PCCASERL EQU   PCCARISP                                                 15270000
PCCAPARL EQU   PCCARISP                                                 15271000
PCCARPB  EQU   PCCA+132                                                 15272000
PCCACTIN EQU   PCCAINTE                                                 15273000
PCCANFIN EQU   PCCAINTE                                                 15274000
PCCANUIN EQU   PCCAINTE                                                 15275000
PCCACTCC EQU   PCCACCE                                                  15276000
PCCANFCC EQU   PCCACCE                                                  15277000
PCCANUCC EQU   PCCACCE                                                  15278000
PCCACTTD EQU   PCCATODE                                                 15279000
PCCANFTD EQU   PCCATODE                                                 15280000
PCCANUTD EQU   PCCATODE                                                 15281000
PCCARV04 EQU   PCCATMFL                                                 15282000
PCCARV03 EQU   PCCATMFL                                                 15283000
PCCARV02 EQU   PCCATMFL                                                 15284000
PCCAMINT EQU   PCCATMFL                                                 15285000
PCCAMCC  EQU   PCCATMFL                                                 15286000
PCCAVKIL EQU   PCCATMFL                                                 15287000
PCCASYNC EQU   PCCATMFL                                                 15288000
PCCAINIT EQU   PCCATMFL                                                 15289000
PCCARV9E EQU   PCCA+124                                                 15290000
PCCARV9D EQU   PCCA+120                                                 15291000
PCCARV9C EQU   PCCA+116                                                 15292000
PCCARV9B EQU   PCCA+112                                                 15293000
PCCARV9A EQU   PCCA+108                                                 15294000
PCCARV99 EQU   PCCA+104                                                 15295000
PCCARV98 EQU   PCCA+100                                                 15296000
PCCARV97 EQU   PCCA+96                                                  15297000
PCCARV96 EQU   PCCA+92                                                  15298000
PCCARV95 EQU   PCCA+88                                                  15299000
PCCARV94 EQU   PCCA+84                                                  15300000
PCCARV93 EQU   PCCA+80                                                  15301000
PCCARV92 EQU   PCCA+76                                                  15302000
PCCARV91 EQU   PCCA+72                                                  15303000
PCCARV90 EQU   PCCA+68                                                  15304000
PCCARV89 EQU   PCCA+64                                                  15305000
PCCARV88 EQU   PCCA+60                                                  15306000
PCCARV87 EQU   PCCA+56                                                  15307000
PCCARV86 EQU   PCCA+52                                                  15308000
PCCARV85 EQU   PCCA+48                                                  15309000
PCCARV84 EQU   PCCA+44                                                  15310000
PCCARV83 EQU   PCCA+40                                                  15311000
PCCARV82 EQU   PCCA+36                                                  15312000
PCCARV81 EQU   PCCA+32                                                  15313000
PCCATQEP EQU   PCCA+20                                                  15314000
LDAEND   EQU   LDA+1496                                                 15315000
LDALIMIT EQU   LDA+1484                                                 15316000
LDASRPQE EQU   LDA+1476                                                 15317000
VVREGSZ  EQU   LDA+1468                                                 15318000
LSQAPTR  EQU   LDA+1464                                                 15319000
CFAPWKAR EQU   LDA+1164                                                 15320000
CSAVE    EQU   LDA+1100                                                 15321000
OBFRSAVE EQU   LDA+1036                                                 15322000
GFRESAVE EQU   LDA+972                                                  15323000
GMREPSAV EQU   LDA+908                                                  15324000
FBQSAVE  EQU   LDA+844                                                  15325000
G4KSAVE  EQU   LDA+780                                                  15326000
FSAVE    EQU   LDA+716                                                  15327000
BSAVE    EQU   LDA+652                                                  15328000
SAVEREG2 EQU   LDA+588                                                  15329000
BRANCHSV EQU   LDA+524                                                  15330000
GMFMWKAR EQU   LDA+24                                                   15331000
LDARES2  EQU   LDA+21                                                   15332000
LDACBSP  EQU   LDA+20                                                   15333000
LDARQSTA EQU   LDA+16                                                   15334000
LDATCB   EQU   LDA+12                                                   15335000
@NM00037 EQU   LVSMFLAG+1                                               15336000
LDABRSW  EQU   LVSMFLAG                                                 15337000
LDAFPFM  EQU   LVSMFLAG                                                 15338000
LDAFLAGS EQU   LVSMFLAG                                                 15339000
LDASTART EQU   LDA                                                      15340000
LCCAR125 EQU   LCCA+964                                                 15341000
LCCAR124 EQU   LCCA+960                                                 15342000
LCCASGPR EQU   LCCA+896                                                 15343000
LCCADRT2 EQU   LCCA+888                                                 15344000
LCCADRT1 EQU   LCCA+880                                                 15345000
LCCAR103 EQU   LCCA+876                                                 15346000
LCCAESS2 EQU   LCCA+872                                                 15347000
LCCASPLJ EQU   LCCA+868                                                 15348000
LCCASMQJ EQU   LCCA+864                                                 15349000
LCCAIRT  EQU   LCCA+736                                                 15350000
LCCAASID EQU   LCCA+732                                                 15351000
LCCARV89 EQU   LCCA+728                                                 15352000
LCCAPGTA EQU   LCCASRBF+2                                               15353000
LCCASAFN EQU   LCCASRBF                                                 15354000
LCCAECSA EQU   LCCA+716                                                 15355000
LCCAICR0 EQU   LCCA+712                                                 15356000
LCCALWTM EQU   LCCA+704                                                 15357000
LCCARV78 EQU   LCCA+700                                                 15358000
LCCAPINV EQU   LCCA+696                                                 15359000
LCCARV88 EQU   LCCA+695                                                 15360000
LCCARV87 EQU   LCCALKFG                                                 15361000
LCCARV86 EQU   LCCALKFG                                                 15362000
LCCARV85 EQU   LCCALKFG                                                 15363000
LCCARV84 EQU   LCCALKFG                                                 15364000
LCCALKRD EQU   LCCALKFG                                                 15365000
LCCALKAQ EQU   LCCALKFG                                                 15366000
LCCALKSA EQU   LCCALKFG                                                 15367000
LCCALKDP EQU   LCCALKFG                                                 15368000
LCCACRST EQU   LCCACREX                                                 15369000
LCCACRDP EQU   LCCACREX                                                 15370000
LCCACRLM EQU   LCCACREX                                                 15371000
LCCACRIN EQU   LCCACREX                                                 15372000
LCCACRRT EQU   LCCACREX                                                 15373000
LCCACRLE EQU   LCCACREX                                                 15374000
LCCACRRM EQU   LCCACREX                                                 15375000
LCCACREF EQU   LCCACREX                                                 15376000
LCCAVARY EQU   LCCACRFL                                                 15377000
LCCARV73 EQU   LCCACRFL                                                 15378000
LCCARV72 EQU   LCCACRFL                                                 15379000
LCCARV71 EQU   LCCACRFL                                                 15380000
LCCARV70 EQU   LCCACRFL                                                 15381000
LCCARV69 EQU   LCCACRFL                                                 15382000
LCCACLMS EQU   LCCACRFL                                                 15383000
LCCACRTM EQU   LCCACRFL                                                 15384000
LCCALCR0 EQU   LCCA+688                                                 15385000
LCCACRLC EQU   LCCA+684                                                 15386000
LCCARCPU EQU   LCCA+680                                                 15387000
LCCADCPU EQU   LCCA+676                                                 15388000
LCCASRBJ EQU   LCCA+672                                                 15389000
LCCADSSR EQU   LCCA+668                                                 15390000
LCCADSSC EQU   LCCA+660                                                 15391000
LCCADSS3 EQU   LCCA+648                                                 15392000
LCCADSS2 EQU   LCCA+636                                                 15393000
LCCADSS1 EQU   LCCA+624                                                 15394000
LCCAWTIM EQU   LCCA+616                                                 15395000
LCCAITOD EQU   LCCA+608                                                 15396000
LCCADTOD EQU   LCCA+600                                                 15397000
LCCASTOD EQU   LCCA+592                                                 15398000
LCCARIR5 EQU   LCCASPSA+44                                              15399000
LCCARIR4 EQU   LCCASPSA+40                                              15400000
LCCARIR3 EQU   LCCASPSA+36                                              15401000
LCCARIR2 EQU   LCCASPSA+32                                              15402000
LCCARPR5 EQU   LCCASPSA+28                                              15403000
LCCARPR4 EQU   LCCASPSA+24                                              15404000
LCCARPR3 EQU   LCCASPSA+20                                              15405000
LCCARPR2 EQU   LCCASPSA+16                                              15406000
LCCADSR5 EQU   LCCASPSA+12                                              15407000
LCCADSR4 EQU   LCCASPSA+8                                               15408000
LCCADSR3 EQU   LCCASPSA+4                                               15409000
LCCADSR2 EQU   LCCASPSA                                                 15410000
LCCARV68 EQU   LCCA+543                                                 15411000
LCCAPSMK EQU   LCCA+542                                                 15412000
LCCARV67 EQU   LCCADSF2                                                 15413000
LCCARV66 EQU   LCCADSF2                                                 15414000
LCCARV65 EQU   LCCADSF2                                                 15415000
LCCARV64 EQU   LCCADSF2                                                 15416000
LCCADSRW EQU   LCCADSF2                                                 15417000
LCCADSPL EQU   LCCADSF2                                                 15418000
LCCAGSRB EQU   LCCADSF2                                                 15419000
LCCASRBM EQU   LCCADSF2                                                 15420000
LCCARV61 EQU   LCCADSF1                                                 15421000
LCCARV60 EQU   LCCADSF1                                                 15422000
LCCARV59 EQU   LCCADSF1                                                 15423000
LCCARV58 EQU   LCCADSF1                                                 15424000
LCCATIMR EQU   LCCADSF1                                                 15425000
LCCADSS  EQU   LCCADSF1                                                 15426000
LCCAVCPU EQU   LCCADSF1                                                 15427000
LCCAACR  EQU   LCCADSF1                                                 15428000
LCCAASCP EQU   LCCA+532                                                 15429000
LCCAESSA EQU   LCCA+528                                                 15430000
LCCARV55 EQU   LCCASPN4                                                 15431000
LCCARV54 EQU   LCCASPN4                                                 15432000
LCCARV53 EQU   LCCASPN4                                                 15433000
LCCARV52 EQU   LCCASPN4                                                 15434000
LCCARV51 EQU   LCCASPN4                                                 15435000
LCCARV50 EQU   LCCASPN4                                                 15436000
LCCARV49 EQU   LCCASPN4                                                 15437000
LCCARV48 EQU   LCCASPN4                                                 15438000
LCCARV47 EQU   LCCASPN3                                                 15439000
LCCARV46 EQU   LCCASPN3                                                 15440000
LCCARV45 EQU   LCCASPN3                                                 15441000
LCCARV44 EQU   LCCASPN3                                                 15442000
LCCARV43 EQU   LCCASPN3                                                 15443000
LCCARV42 EQU   LCCASPN3                                                 15444000
LCCARV41 EQU   LCCASPN3                                                 15445000
LCCARV40 EQU   LCCASPN3                                                 15446000
LCCARV39 EQU   LCCASPN2                                                 15447000
LCCARV38 EQU   LCCASPN2                                                 15448000
LCCARV37 EQU   LCCASPN2                                                 15449000
LCCARV36 EQU   LCCASPN2                                                 15450000
LCCARV35 EQU   LCCASPN2                                                 15451000
LCCARV34 EQU   LCCASPN2                                                 15452000
LCCARV33 EQU   LCCASPN2                                                 15453000
LCCARV32 EQU   LCCASPN2                                                 15454000
LCCARV31 EQU   LCCASPN1                                                 15455000
LCCARV30 EQU   LCCASPN1                                                 15456000
LCCAMFIO EQU   LCCASPN1                                                 15457000
LCCARSTR EQU   LCCASPN1                                                 15458000
LCCATSPN EQU   LCCASPN1                                                 15459000
LCCALOCK EQU   LCCASPN1                                                 15460000
LCCASIGP EQU   LCCASPN1                                                 15461000
LCCAPTLB EQU   LCCASPN1                                                 15462000
LCCARV27 EQU   LCCAIHR4                                                 15463000
LCCARV26 EQU   LCCAIHR4                                                 15464000
LCCARV25 EQU   LCCAIHR4                                                 15465000
LCCARV24 EQU   LCCAIHR4                                                 15466000
LCCARV23 EQU   LCCAIHR4                                                 15467000
LCCARV22 EQU   LCCAIHR4                                                 15468000
LCCARV21 EQU   LCCAIHR4                                                 15469000
LCCARV20 EQU   LCCAIHR4                                                 15470000
LCCARV19 EQU   LCCAIHR3                                                 15471000
LCCARV18 EQU   LCCAIHR3                                                 15472000
LCCARV17 EQU   LCCAIHR3                                                 15473000
LCCARV16 EQU   LCCAIHR3                                                 15474000
LCCARV15 EQU   LCCAIHR3                                                 15475000
LCCARV14 EQU   LCCAIHR3                                                 15476000
LCCARV13 EQU   LCCAIHR3                                                 15477000
LCCARV12 EQU   LCCAIHR3                                                 15478000
LCCARV11 EQU   LCCAIHR2                                                 15479000
LCCARV10 EQU   LCCAIHR2                                                 15480000
LCCARV09 EQU   LCCAIHR2                                                 15481000
LCCARV08 EQU   LCCAIHR2                                                 15482000
LCCARV07 EQU   LCCAIHR2                                                 15483000
LCCARV06 EQU   LCCAIHR2                                                 15484000
LCCARV05 EQU   LCCAIHR2                                                 15485000
LCCARV04 EQU   LCCAIHR2                                                 15486000
LCCARV03 EQU   LCCAIHR1                                                 15487000
LCCARV02 EQU   LCCAIHR1                                                 15488000
LCCARV01 EQU   LCCAIHR1                                                 15489000
LCCAPPIE EQU   LCCAIHR1                                                 15490000
LCCAPSG1 EQU   LCCAIHR1                                                 15491000
LCCAPDAT EQU   LCCAIHR1                                                 15492000
LCCAXRC2 EQU   LCCAIHR1                                                 15493000
LCCAXRC1 EQU   LCCAIHR1                                                 15494000
LCCAIOPS EQU   LCCA+512                                                 15495000
LCCAGPGR EQU   LCCA+448                                                 15496000
LCCAR133 EQU   LCCA+444                                                 15497000
LCCAR132 EQU   LCCA+440                                                 15498000
LCCAR131 EQU   LCCA+436                                                 15499000
LCCAR130 EQU   LCCA+432                                                 15500000
LCCAR129 EQU   LCCA+428                                                 15501000
LCCAR128 EQU   LCCA+424                                                 15502000
LCCAR127 EQU   LCCA+420                                                 15503000
LCCAR126 EQU   LCCA+416                                                 15504000
LCCARSGR EQU   LCCA+352                                                 15505000
LCCAXGR3 EQU   LCCA+288                                                 15506000
LCCAXGR2 EQU   LCCA+224                                                 15507000
LCCAXGR1 EQU   LCCA+160                                                 15508000
LCCACR0  EQU   LCCA+156                                                 15509000
LCCAPVAD EQU   LCCA+148                                                 15510000
LCCAPINT EQU   LCCA+144                                                 15511000
LCCAPPSW EQU   LCCA+136                                                 15512000
LCCAPGR2 EQU   LCCA+72                                                  15513000
LCCAPGR1 EQU   LCCA+8                                                   15514000
LCCARV77 EQU   LCCA+6                                                   15515000
@NM00036 EQU   GSDA+24                                                  15516000
GSDAMAXU EQU   GSDAMAX+2                                                15517000
@NM00035 EQU   @NM00034                                                 15518000
GSDAMAXB EQU   @NM00034                                                 15519000
@NM00033 EQU   GSDALCCT                                                 15520000
@NM00032 EQU   GSDACSD                                                  15521000
@NM00031 EQU   GSDAGDA                                                  15522000
@NM00030 EQU   GSDAPCCT                                                 15523000
@NM00029 EQU   GSDAASVT                                                 15524000
CSASPQEP EQU   GDA+52                                                   15525000
VRWLEL   EQU   VRWAITQ+4                                                15526000
VRWFEL   EQU   VRWAITQ                                                  15527000
VRPLEL   EQU   VRPOSTQ+4                                                15528000
VRPFEL   EQU   VRPOSTQ                                                  15529000
VRDREG   EQU   GDA+4                                                    15530000
RESV     EQU   GVSMFLAG+1                                               15531000
@NM00028 EQU   GDAFLAGS                                                 15532000
WAITQUE  EQU   GDAFLAGS                                                 15533000
SQATHRS2 EQU   GDAFLAGS                                                 15534000
SQATHRS1 EQU   GDAFLAGS                                                 15535000
GDAFLAG2 EQU   GDAFLAGS                                                 15536000
GDAFLAG1 EQU   GDAFLAGS                                                 15537000
FRRSPARM EQU   FRRSENTR+8                                               15538000
@NM00027 EQU   FRRSFLGS+1                                               15539000
@NM00026 EQU   FRRSFLG1                                                 15540000
FRRSNEST EQU   FRRSFLG1                                                 15541000
FRRSRCUR EQU   FRRSFLG1                                                 15542000
FRRSENTS EQU   FRRS+84                                                  15543000
FQEPTRA  EQU   FQEPTR+1                                                 15544000
FQECPB   EQU   FQTYPE                                                   15545000
FQERGNFL EQU   FQTYPE                                                   15546000
DQEHRID  EQU   DQEBLKAD                                                 15547000
DQEPTR   EQU   DQESECT+4                                                15548000
@NM00025 EQU   CSD+160                                                  15549000
CSDUCNT  EQU   CSD+124                                                  15550000
CSDTCNT  EQU   CSD+120                                                  15551000
CSDGDTOD EQU   CSD+116                                                  15552000
CSDGDINT EQU   CSD+112                                                  15553000
CSDGDCC  EQU   CSD+108                                                  15554000
CSDDDRCT EQU   CSD+106                                                  15555000
CSDRV044 EQU   CSD+104                                                  15556000
CSDMAFF  EQU   CSD+24                                                   15557000
CSDRV038 EQU   CSDFLAGS                                                 15558000
CSDRV037 EQU   CSDFLAGS                                                 15559000
CSDRV036 EQU   CSDFLAGS                                                 15560000
CSDRV035 EQU   CSDFLAGS                                                 15561000
CSDRV034 EQU   CSDFLAGS                                                 15562000
CSDRV033 EQU   CSDFLAGS                                                 15563000
CSDRV032 EQU   CSDFLAGS                                                 15564000
CSDACR   EQU   CSD+22                                                   15565000
CSDMF1CP EQU   CSD+20                                                   15566000
CSDRV043 EQU   CSD+16                                                   15567000
CSDRV030 EQU   CSDSCFL4                                                 15568000
CSDRV029 EQU   CSDSCFL4                                                 15569000
CSDRV028 EQU   CSDSCFL4                                                 15570000
CSDRV027 EQU   CSDSCFL4                                                 15571000
CSDRV026 EQU   CSDSCFL4                                                 15572000
CSDRV025 EQU   CSDSCFL4                                                 15573000
CSDRV024 EQU   CSDSCFL4                                                 15574000
CSDRV023 EQU   CSDSCFL4                                                 15575000
CSDRV022 EQU   CSDSCFL3                                                 15576000
CSDRV021 EQU   CSDSCFL3                                                 15577000
CSDRV020 EQU   CSDSCFL3                                                 15578000
CSDRV019 EQU   CSDSCFL3                                                 15579000
CSDRV018 EQU   CSDSCFL3                                                 15580000
CSDRV017 EQU   CSDSCFL3                                                 15581000
CSDRV016 EQU   CSDSCFL3                                                 15582000
CSDRV015 EQU   CSDSCFL3                                                 15583000
CSDRV014 EQU   CSDSCFL2                                                 15584000
CSDRV013 EQU   CSDSCFL2                                                 15585000
CSDRV012 EQU   CSDSCFL2                                                 15586000
CSDRV011 EQU   CSDSCFL2                                                 15587000
CSDRV010 EQU   CSDSCFL2                                                 15588000
CSDRV009 EQU   CSDSCFL2                                                 15589000
CSDRV008 EQU   CSDSCFL2                                                 15590000
CSDRV007 EQU   CSDSCFL2                                                 15591000
CSDRV006 EQU   CSDSCFL1                                                 15592000
CSDRV005 EQU   CSDSCFL1                                                 15593000
CSDRV004 EQU   CSDSCFL1                                                 15594000
CSDRV003 EQU   CSDSCFL1                                                 15595000
CSDRV002 EQU   CSDSCFL1                                                 15596000
CSDRV001 EQU   CSDSCFL1                                                 15597000
CSDSYSND EQU   CSDSCFL1                                                 15598000
CSDRV042 EQU   CSDSCFL1                                                 15599000
CPABNXTP EQU   CPAB+28                                                  15600000
CPABENAD EQU   CPAB+24                                                  15601000
CPABSTAD EQU   CPAB+20                                                  15602000
CPABUSE# EQU   CPABFLGW+2                                               15603000
DELETELK EQU   CPABFLGS                                                 15604000
CPABEXTN EQU   CPABFLGS                                                 15605000
ADELCAND EQU   CPABFLGS                                                 15606000
BLDDWORD EQU   CPABFLGS                                                 15607000
CPABSPID EQU   CPABFLGW                                                 15608000
CPABFACP EQU   CPAB+12                                                  15609000
CPABDEQC EQU   CPAB+8                                                   15610000
CPABCSZE EQU   CPAB+4                                                   15611000
ASXBEND  EQU   ASXB+232                                                 15612000
ASXBRV25 EQU   ASXB+228                                                 15613000
ASXBRV24 EQU   ASXB+224                                                 15614000
ASXBPT0E EQU   ASXB+220                                                 15615000
ASXBCRB4 EQU   ASXBCASW+3                                               15616000
ASXBCRB3 EQU   ASXBCASW+2                                               15617000
ASXBCRB2 EQU   ASXBCASW+1                                               15618000
ASXBCR06 EQU   ASXBCRB1                                                 15619000
ASXBCR05 EQU   ASXBCRB1                                                 15620000
ASXBCR04 EQU   ASXBCRB1                                                 15621000
ASXBCR03 EQU   ASXBCRB1                                                 15622000
ASXBCR02 EQU   ASXBCRB1                                                 15623000
ASXBCR01 EQU   ASXBCRB1                                                 15624000
ASXBTFD  EQU   ASXBCRB1                                                 15625000
ASXBPIP  EQU   ASXBCRB1                                                 15626000
ASXBCTDC EQU   ASXB+212                                                 15627000
ASXBTDCB EQU   ASXB+208                                                 15628000
ASXBRV19 EQU   ASXB+204                                                 15629000
ASXBSENV EQU   ASXBSECR+1                                               15630000
ASXBRV34 EQU   ASCBSFLG                                                 15631000
ASXBRV33 EQU   ASCBSFLG                                                 15632000
ASXBRV32 EQU   ASCBSFLG                                                 15633000
ASXBRV31 EQU   ASCBSFLG                                                 15634000
ASXBRV30 EQU   ASCBSFLG                                                 15635000
ASXBRV29 EQU   ASCBSFLG                                                 15636000
ASXBRV28 EQU   ASCBSFLG                                                 15637000
ASXBRV27 EQU   ASCBSFLG                                                 15638000
ASXBUSER EQU   ASXB+192                                                 15639000
ASXBLSRB EQU   ASXBAEQ+20                                               15640000
ASXBFSRB EQU   ASXBAEQ+16                                               15641000
ASXBLRQE EQU   ASXBAEQ+12                                               15642000
ASXBFRQE EQU   ASXBAEQ+8                                                15643000
ASXBLIQE EQU   ASXBAEQ+4                                                15644000
ASXBFIQE EQU   ASXBAEQ                                                  15645000
ASXBETSK EQU   ASXB+164                                                 15646000
ASXBSIRB EQU   ASXB+160                                                 15647000
ASXBPSWD EQU   ASXB+152                                                 15648000
ASXBPRG  EQU   ASXB+136                                                 15649000
ASXBRV26 EQU   ASXB+132                                                 15650000
ASXBOUSB EQU   ASXB+128                                                 15651000
ASXBDDR  EQU   ASXB+124                                                 15652000
ASXBRCTD EQU   ASXB+120                                                 15653000
ASXBRSMD EQU   ASXB+116                                                 15654000
ASXBSPSA EQU   ASXB+112                                                 15655000
ASXBFRWA EQU   ASXB+108                                                 15656000
ASXBFLSA EQU   ASXB+36                                                  15657000
ASXBIHSA EQU   ASXB+32                                                  15658000
ASXBRV15 EQU   ASXB+28                                                  15659000
ASXBRV14 EQU   ASXB+24                                                  15660000
ASXBLWA  EQU   ASXB+20                                                  15661000
ASXBMPST EQU   ASXB+16                                                  15662000
ASXBRS00 EQU   ASXB+14                                                  15663000
ASXBTCBS EQU   ASXB+12                                                  15664000
ASXBLTCB EQU   ASXB+8                                                   15665000
ASXBFTCB EQU   ASXB+4                                                   15666000
ASXBASXB EQU   ASXB                                                     15667000
ASXBEGIN EQU   ASXB                                                     15668000
ASVTEND  EQU   ASVT+528                                                 15669000
ASVTAVAL EQU   ASVTENTY                                                 15670000
ASVTRS00 EQU   ASVT+520                                                 15671000
ASVTBEGN EQU   ASVT+512                                                 15672000
@NM00024 EQU   ASVT                                                     15673000
ASCBEND  EQU   ASCB+208                                                 15674000
ASCBSRBT EQU   ASCB+200                                                 15675000
ASCBSWTL EQU   ASCB+196                                                 15676000
ASCBRS14 EQU   ASCB+195                                                 15677000
ASCBSMCT EQU   ASCB+194                                                 15678000
ASCBRS12 EQU   ASCB+192                                                 15679000
ASCBPCTT EQU   ASCB+188                                                 15680000
ASCBVGTT EQU   ASCB+184                                                 15681000
ASCBRV43 EQU   ASCBSRQ4                                                 15682000
ASCBRV42 EQU   ASCBSRQ4                                                 15683000
ASCBRV41 EQU   ASCBSRQ4                                                 15684000
ASCBRV40 EQU   ASCBSRQ4                                                 15685000
ASCBRV39 EQU   ASCBSRQ4                                                 15686000
ASCBRV38 EQU   ASCBSRQ4                                                 15687000
ASCBRV37 EQU   ASCBSRQ4                                                 15688000
ASCBRV36 EQU   ASCBSRQ4                                                 15689000
ASCBRV35 EQU   ASCBSRQ3                                                 15690000
ASCBRV34 EQU   ASCBSRQ3                                                 15691000
ASCBRV33 EQU   ASCBSRQ3                                                 15692000
ASCBRV32 EQU   ASCBSRQ3                                                 15693000
ASCBRV31 EQU   ASCBSRQ3                                                 15694000
ASCBRV30 EQU   ASCBSRQ3                                                 15695000
ASCBRV29 EQU   ASCBSRQ3                                                 15696000
ASCBRV28 EQU   ASCBSRQ3                                                 15697000
ASCBRV27 EQU   ASCBSRQ2                                                 15698000
ASCBRV26 EQU   ASCBSRQ2                                                 15699000
ASCBRV25 EQU   ASCBSRQ2                                                 15700000
ASCBRV24 EQU   ASCBSRQ2                                                 15701000
ASCBRV23 EQU   ASCBSRQ2                                                 15702000
ASCBRV22 EQU   ASCBSRQ2                                                 15703000
ASCBRV21 EQU   ASCBSRQ2                                                 15704000
ASCBRV20 EQU   ASCBSRQ2                                                 15705000
ASCBRV19 EQU   ASCBSRQ1                                                 15706000
ASCBRV18 EQU   ASCBSRQ1                                                 15707000
ASCBRV17 EQU   ASCBSRQ1                                                 15708000
ASCBRV16 EQU   ASCBSRQ1                                                 15709000
ASCBRV15 EQU   ASCBSRQ1                                                 15710000
ASCBRV14 EQU   ASCBSRQ1                                                 15711000
ASCBRV13 EQU   ASCBSRQ1                                                 15712000
ASCBSTA  EQU   ASCBSRQ1                                                 15713000
ASCBJBNS EQU   ASCB+176                                                 15714000
ASCBJBNI EQU   ASCB+172                                                 15715000
ASCBMCC  EQU   ASCB+168                                                 15716000
ASCBRTWA EQU   ASCB+164                                                 15717000
ASCBIQEA EQU   ASCB+160                                                 15718000
ASCBXMPQ EQU   ASCB+156                                                 15719000
ASCBRS01 EQU   ASCB+154                                                 15720000
ASCBOUXB EQU   ASCB+148                                                 15721000
ASCBOUCB EQU   ASCB+144                                                 15722000
ASCBMECB EQU   ASCB+140                                                 15723000
ASCBQECB EQU   ASCB+136                                                 15724000
ASCBLSQH EQU   ASCBLKGP+4                                               15725000
ASCBLOCK EQU   ASCBLKGP                                                 15726000
ASCBTCBS EQU   ASCB+124                                                 15727000
ASCBNVSC EQU   ASCB+122                                                 15728000
ASCBVSC  EQU   ASCB+120                                                 15729000
ASCBSRBS EQU   ASCB+118                                                 15730000
ASCBSSRB EQU   ASCB+116                                                 15731000
ASCBRV06 EQU   ASCBFLG2                                                 15732000
ASCBRV05 EQU   ASCBFLG2                                                 15733000
ASCBRV04 EQU   ASCBFLG2                                                 15734000
ASCBSNQS EQU   ASCBFLG2                                                 15735000
ASCBS2S  EQU   ASCBFLG2                                                 15736000
ASCBCEXT EQU   ASCBFLG2                                                 15737000
ASCBPXMT EQU   ASCBFLG2                                                 15738000
ASCBXMPT EQU   ASCBFLG2                                                 15739000
ASCBRF07 EQU   ASCBDSP1                                                 15740000
ASCBRF06 EQU   ASCBDSP1                                                 15741000
ASCBRF05 EQU   ASCBDSP1                                                 15742000
ASCBRF04 EQU   ASCBDSP1                                                 15743000
ASCBRF03 EQU   ASCBDSP1                                                 15744000
ASCBRF02 EQU   ASCBDSP1                                                 15745000
ASCBFAIL EQU   ASCBDSP1                                                 15746000
ASCBNOQ  EQU   ASCBDSP1                                                 15747000
ASCBSWCT EQU   ASCB+112                                                 15748000
ASCBASXB EQU   ASCB+108                                                 15749000
ASCBTMCH EQU   ASCB+104                                                 15750000
ASCBNSWP EQU   ASCBFLG1                                                 15751000
ASCBTYP1 EQU   ASCBFLG1                                                 15752000
ASCBSTND EQU   ASCBFLG1                                                 15753000
ASCBABNT EQU   ASCBFLG1                                                 15754000
ASCBTERM EQU   ASCBFLG1                                                 15755000
ASCBS3S  EQU   ASCBFLG1                                                 15756000
ASCBCMSH EQU   ASCBFLG1                                                 15757000
ASCBTOFF EQU   ASCBFLG1                                                 15758000
ASCBRF01 EQU   ASCBRCTF                                                 15759000
ASCBTMLW EQU   ASCBRCTF                                                 15760000
ASCBOUT  EQU   ASCBRCTF                                                 15761000
ASCBWAIT EQU   ASCBRCTF                                                 15762000
ASCBRV08 EQU   ASCBRCTF                                                 15763000
ASCBFQU  EQU   ASCBRCTF                                                 15764000
ASCBFRS  EQU   ASCBRCTF                                                 15765000
ASCBTMNO EQU   ASCBRCTF                                                 15766000
ASCBAFFN EQU   ASCBFW1                                                  15767000
ASCBDUMP EQU   ASCB+96                                                  15768000
ASCBRV44 EQU   ASCB+92                                                  15769000
ASCBUBET EQU   ASCB+88                                                  15770000
ASCBECB  EQU   ASCB+84                                                  15771000
ASCBJSTL EQU   ASCB+80                                                  15772000
ASCBEWST EQU   ASCB+72                                                  15773000
ASCBEJST EQU   ASCB+64                                                  15774000
ASCBTSB  EQU   ASCB+60                                                  15775000
ASCBCSCB EQU   ASCB+56                                                  15776000
ASCBRSMA EQU   ASCBRSM+1                                                15777000
ASCBRV54 EQU   ASCBRSMF                                                 15778000
ASCBRV53 EQU   ASCBRSMF                                                 15779000
ASCBRV52 EQU   ASCBRSMF                                                 15780000
ASCBRV51 EQU   ASCBRSMF                                                 15781000
ASCBVEQR EQU   ASCBRSMF                                                 15782000
ASCBN2LP EQU   ASCBRSMF                                                 15783000
ASCB1LPU EQU   ASCBRSMF                                                 15784000
ASCB2LPU EQU   ASCBRSMF                                                 15785000
ASCBDP   EQU   ASCB+43                                                  15786000
ASCBRV07 EQU   ASCB+42                                                  15787000
ASCBIOSM EQU   ASCB+40                                                  15788000
ASCBSEQN EQU   ASCB+38                                                  15789000
ASCBASID EQU   ASCB+36                                                  15790000
ASCBCPUS EQU   ASCB+32                                                  15791000
ASCBSPL  EQU   ASCB+28                                                  15792000
ASCBIOSP EQU   ASCB+24                                                  15793000
ASCBSYNC EQU   ASCBSUPC+4                                               15794000
ASCBSVRB EQU   ASCBSUPC                                                 15795000
ASCBCMSF EQU   ASCB+12                                                  15796000
ASCBBWDP EQU   ASCB+8                                                   15797000
ASCBFWDP EQU   ASCB+4                                                   15798000
ASCBASCB EQU   ASCB                                                     15799000
ASCBEGIN EQU   ASCB                                                     15800000
DEBXSAMB EQU   DEBXTN+28                                                15801000
DEBXOPNJ EQU   DEBXTN+24                                                15802000
DEBXXARG EQU   DEBXTN+20                                                15803000
DEBXMCF2 EQU   DEBXTN+19                                                15804000
DEBXMCF1 EQU   DEBXTN+18                                                15805000
DEBXDSO2 EQU   DEBXTN+17                                                15806000
DEBXDSO1 EQU   DEBXTN+16                                                15807000
DEBXDBPR EQU   DEBXTN+12                                                15808000
DEBXDCBM EQU   DEBXTN+8                                                 15809000
DEBXDSAB EQU   DEBXTN+4                                                 15810000
DEBXRV48 EQU   DEBXTN+3                                                 15811000
DEBXRV47 EQU   DEBXFLG1                                                 15812000
DEBXRV46 EQU   DEBXFLG1                                                 15813000
DEBXRV45 EQU   DEBXFLG1                                                 15814000
DEBXRV44 EQU   DEBXFLG1                                                 15815000
DEBXRV43 EQU   DEBXFLG1                                                 15816000
DEBXDSSI EQU   DEBXFLG1                                                 15817000
DEBXTSKC EQU   DEBXFLG1                                                 15818000
DEBXCDCB EQU   DEBXFLG1                                                 15819000
DEBXLNGH EQU   DEBXTN                                                   15820000
DEBTBLOF EQU   DEBPREFX+14                                              15821000
DEBAMTYP EQU   DEBPREFX+13                                              15822000
DEBLNGTH EQU   DEBPREFX+12                                              15823000
DEBDCBMK EQU   DEBXTNP                                                  15824000
DEBDSCBA EQU   DEBPREFX+1                                               15825000
DEBWKARA EQU   DEBPREFX                                                 15826000
DEBXCEAD EQU   DEBXCEA+1                                                15827000
DEBXCENP EQU   DEBXCEAB                                                 15828000
DEBRSV35 EQU   DEBXCEAB                                                 15829000
DEBRSV34 EQU   DEBXCEAB                                                 15830000
DEBRSV33 EQU   DEBXCEAB                                                 15831000
DEBRSV32 EQU   DEBXCEAB                                                 15832000
DEBCEAD  EQU   DEBCEA+1                                                 15833000
DEBCENP  EQU   DEBCEAB                                                  15834000
DEBRSV31 EQU   DEBCEAB                                                  15835000
DEBRSV30 EQU   DEBCEAB                                                  15836000
DEBRSV29 EQU   DEBCEAB                                                  15837000
DEBRSV28 EQU   DEBCEAB                                                  15838000
DEBPCIAD EQU   DEBPCIA+1                                                15839000
DEBPCINP EQU   DEBPCIAB                                                 15840000
DEBRSV27 EQU   DEBPCIAB                                                 15841000
DEBRSV26 EQU   DEBPCIAB                                                 15842000
DEBRSV25 EQU   DEBPCIAB                                                 15843000
DEBRSV24 EQU   DEBPCIAB                                                 15844000
DEBSIOAD EQU   DEBSIOA+1                                                15845000
DEBSIONP EQU   DEBSIOAB                                                 15846000
DEBFIX   EQU   DEBSIOAB                                                 15847000
DEBIOVR  EQU   DEBSIOAB                                                 15848000
DEBSIOX  EQU   DEBSIOAB                                                 15849000
DEBPGFX  EQU   DEBSIOAB                                                 15850000
DEBEOEAD EQU   DEBEOEA+1                                                15851000
DEBEOENP EQU   DEBEOEAB                                                 15852000
DEBRSV22 EQU   DEBEOEAB                                                 15853000
DEBRSV21 EQU   DEBEOEAB                                                 15854000
DEBRSV20 EQU   DEBEOEAB                                                 15855000
DEBESMVR EQU   DEBEOEAB                                                 15856000
DEBSUBID EQU   DEBSUBNM                                                 15857000
DEBSIOA2 EQU   DEBACS08+24                                              15858000
DEBRPSIO EQU   DEBACS08+20                                              15859000
DEBFREED EQU   DEBACS08+16                                              15860000
@NM00023 EQU   DEBACS08+12                                              15861000
@NM00022 EQU   DEBACS08+8                                               15862000
DEBDISAD EQU   DEBACS08+4                                               15863000
@NM00021 EQU   DEBACS08                                                 15864000
DEBRPSST EQU   DEBACS07+64                                              15865000
DEBARECK EQU   DEBACS07+60                                              15866000
DEBAREWT EQU   DEBACS07+56                                              15867000
DEBACHK  EQU   DEBACS07+52                                              15868000
DEBAWRIT EQU   DEBACS07+48                                              15869000
DEBASETL EQU   DEBACS07+44                                              15870000
DEBAREAD EQU   DEBACS07+40                                              15871000
DEBCRECK EQU   DEBACS07+36                                              15872000
DEBCREWT EQU   DEBACS07+32                                              15873000
DEBCCHK  EQU   DEBACS07+28                                              15874000
DEBCWRIT EQU   DEBACS07+24                                              15875000
DEBCSETL EQU   DEBACS07+20                                              15876000
DEBCREAD EQU   DEBACS07+16                                              15877000
DEBWKPT5 EQU   DEBACS07+12                                              15878000
DEBWKPT4 EQU   DEBACS07+8                                               15879000
DEBGET   EQU   DEBACS07+4                                               15880000
@NM00020 EQU   DEBACS07                                                 15881000
DEBPUT   EQU   DEBACS06+4                                               15882000
DEBDCBFA EQU   DEBACS06                                                 15883000
DEBLUCBB EQU   DEBLUCBA+1                                               15884000
DEBRSV18 EQU   DEBLUCBA                                                 15885000
DEBFUCBB EQU   DEBFUCBA+1                                               15886000
DEBRSV17 EQU   DEBFUCBA                                                 15887000
DEBTCCWB EQU   DEBTCCWA+1                                               15888000
DEBRSV16 EQU   DEBTCCWA                                                 15889000
DEBTBFRB EQU   DEBTBFRA+1                                               15890000
DEBRSV15 EQU   DEBTBFRA                                                 15891000
DEBDBPEF EQU   DEBACS03+8                                               15892000
DEBDBPP  EQU   DEBACS03+4                                               15893000
DEBDTPP  EQU   DEBACS03                                                 15894000
DEBDBPE  EQU   DEBDBLK+1                                                15895000
DEBDBPT  EQU   DEBDBLK                                                  15896000
DEBEXTNM EQU   DEBDSNAM                                                 15897000
DEBLRECL EQU   DEBACSMD+14                                              15898000
DEBBLKSI EQU   DEBACSMD+12                                              15899000
DEBRSV14 EQU   DEBDSNM+4                                                15900000
DEBUTSAB EQU   DEBUTSAA+1                                               15901000
DEBRSV13 EQU   DEBUTSAA                                                 15902000
DEBVOLNM EQU   DEBACSMD+2                                               15903000
DEBVLSEQ EQU   DEBVOLSQ+1                                               15904000
DEBRSV42 EQU   DEBVOLBT                                                 15905000
DEBRSV41 EQU   DEBVOLBT                                                 15906000
DEBRSV40 EQU   DEBVOLBT                                                 15907000
DEBRSV39 EQU   DEBVOLBT                                                 15908000
DEBRSV38 EQU   DEBVOLBT                                                 15909000
DEBRSV37 EQU   DEBVOLBT                                                 15910000
DEBRSV36 EQU   DEBVOLBT                                                 15911000
DEBEXFUL EQU   DEBVOLBT                                                 15912000
DEBNMTRK EQU   DEBDASD+14                                               15913000
DEBENDHH EQU   DEBDASD+12                                               15914000
DEBENDCC EQU   DEBDASD+10                                               15915000
DEBSTRHH EQU   DEBDASD+8                                                15916000
DEBSTRCC EQU   DEBDASD+6                                                15917000
DEBBINUM EQU   DEBDASD+4                                                15918000
DEBUCBA  EQU   DEBUCBAD+1                                               15919000
DEBDVMOD EQU   DEBUCBAD                                                 15920000
DEBAPPB  EQU   DEBAPPAD+1                                               15921000
DEBEXSCL EQU   DEBAPPAD                                                 15922000
DEBDCBB  EQU   DEBDCBAD+1                                               15923000
DEBDEBID EQU   DEBPROTG                                                 15924000
DEBECBB  EQU   DEBECBAD+1                                               15925000
DEBPRIOR EQU   DEBECBAD                                                 15926000
DEBUSRPB EQU   DEBUSRPG+1                                               15927000
DEBNMEXT EQU   DEBUSRPG                                                 15928000
DEBRSV05 EQU   DEBBASIC+15                                              15929000
DEBXTNIN EQU   DEBFLGS1                                                 15930000
DEBF1CEV EQU   DEBFLGS1                                                 15931000
DEBCINDI EQU   DEBFLGS1                                                 15932000
DEBRSV02 EQU   DEBFLGS1                                                 15933000
DEBRSIOA EQU   DEBFLGS1                                                 15934000
DEBEOFDF EQU   DEBFLGS1                                                 15935000
DEBPWCKD EQU   DEBFLGS1                                                 15936000
DEBQSCNT EQU   DEBBASIC+13                                              15937000
DEBACCS  EQU   DEBOPATB                                                 15938000
DEBPOSIT EQU   DEBOPATB                                                 15939000
DEBZERO  EQU   DEBOPATB                                                 15940000
DEBABEND EQU   DEBOPATB                                                 15941000
DEBIRBB  EQU   DEBIRBAD+1                                               15942000
DEBRERR  EQU   DEBOFLGS                                                 15943000
DEBLABEL EQU   DEBOFLGS                                                 15944000
DEBSPLIT EQU   DEBOFLGS                                                 15945000
DEBDCB   EQU   DEBOFLGS                                                 15946000
DEBRLSE  EQU   DEBOFLGS                                                 15947000
DEBEOF   EQU   DEBOFLGS                                                 15948000
DEBDISP  EQU   DEBOFLGS                                                 15949000
DEBDEBB  EQU   DEBDEBAD+1                                               15950000
DEBAMLNG EQU   DEBDEBAD                                                 15951000
DEBTCBB  EQU   DEBTCBAD+1                                               15952000
DEBNMSUB EQU   DEBTCBAD                                                 15953000
UCBERADR EQU   UCBUCS+12                                                15954000
UCBFCBID EQU   UCBUCS+8                                                 15955000
UCBERCNT EQU   UCBUCS+7                                                 15956000
UCBRSV51 EQU   UCBUCS+6                                                 15957000
UCBRSV50 EQU   UCBFCBOP                                                 15958000
UCBRSV49 EQU   UCBFCBOP                                                 15959000
UCBRSV48 EQU   UCBFCBOP                                                 15960000
UCBRSV47 EQU   UCBFCBOP                                                 15961000
UCBRSV46 EQU   UCBFCBOP                                                 15962000
UCBRSV45 EQU   UCBFCBOP                                                 15963000
UCBRSV44 EQU   UCBFCBOP                                                 15964000
UCBFCBO1 EQU   UCBFCBOP                                                 15965000
UCBUCSPE EQU   UCBUCSOP                                                 15966000
UCBRSV43 EQU   UCBUCSOP                                                 15967000
UCBRSV42 EQU   UCBUCSOP                                                 15968000
UCBRSV41 EQU   UCBUCSOP                                                 15969000
UCBRSV40 EQU   UCBUCSOP                                                 15970000
UCBRSV39 EQU   UCBUCSOP                                                 15971000
UCBUCSO2 EQU   UCBUCSOP                                                 15972000
UCBUCSO1 EQU   UCBUCSOP                                                 15973000
UCBUCSID EQU   UCBUCS                                                   15974000
UCBMDRBA EQU   UCBMDRBF+1                                               15975000
UCBRV075 EQU   UCBMDRBF                                                 15976000
UCBRV074 EQU   UCB3800X+32                                              15977000
UCBIMAGE EQU   UCB3800X+28                                              15978000
UCBFCBNM EQU   UCB3800X+24                                              15979000
UCBCHAR4 EQU   UCB3800X+20                                              15980000
UCBCHAR3 EQU   UCB3800X+16                                              15981000
UCBCHAR2 EQU   UCB3800X+12                                              15982000
UCBCHAR1 EQU   UCB3800X+8                                               15983000
UCBCGMID EQU   UCB3800X+4                                               15984000
UCBBRSTA EQU   UCBACTIV                                                 15985000
UCBRV063 EQU   UCBACTIV                                                 15986000
UCBRV062 EQU   UCBACTIV                                                 15987000
UCBRV061 EQU   UCBACTIV                                                 15988000
UCBRV060 EQU   UCBACTIV                                                 15989000
UCBRV059 EQU   UCBACTIV                                                 15990000
UCBRV058 EQU   UCBACTIV                                                 15991000
UCBRV057 EQU   UCBACTIV                                                 15992000
UCBRV050 EQU   UCB3800X+2                                               15993000
UCBCGMNO EQU   UCB3800X+1                                               15994000
UCBRV083 EQU   UCBOPTNS                                                 15995000
UCBBRSTR EQU   UCBOPTNS                                                 15996000
UCBRV056 EQU   UCBOPTNS                                                 15997000
UCBRV055 EQU   UCBOPTNS                                                 15998000
UCBRV054 EQU   UCBOPTNS                                                 15999000
UCBRV053 EQU   UCBOPTNS                                                 16000000
UCBRV052 EQU   UCBOPTNS                                                 16001000
UCBRV051 EQU   UCBOPTNS                                                 16002000
UCBRV073 EQU   UCB3540X+7                                               16003000
UCBRV072 EQU   UCBDKBYT                                                 16004000
UCBRV071 EQU   UCBDKBYT                                                 16005000
UCBRV070 EQU   UCBDKBYT                                                 16006000
UCBRV069 EQU   UCBDKBYT                                                 16007000
UCBRV068 EQU   UCBDKBYT                                                 16008000
UCBRV067 EQU   UCBDKBYT                                                 16009000
UCBVLVER EQU   UCBDKBYT                                                 16010000
UCBDKAMX EQU   UCBDKBYT                                                 16011000
UCBVLSER EQU   UCB3540X                                                 16012000
UCBRDATA EQU   UCBOCR+4                                                 16013000
UCBFRID  EQU   UCBOCR                                                   16014000
UCBCLN   EQU   UCBMT+14                                                 16015000
UCBERG   EQU   UCBMT+12                                                 16016000
UCBMS    EQU   UCBMT+11                                                 16017000
UCBNB    EQU   UCBMT+10                                                 16018000
UCBPW    EQU   UCBMT+9                                                  16019000
UCBPR    EQU   UCBMT+8                                                  16020000
UCBSIO   EQU   UCBMT+6                                                  16021000
UCBTW    EQU   UCBMT+5                                                  16022000
UCBTR    EQU   UCBMT+4                                                  16023000
UCBTWT   EQU   UCBMT+3                                                  16024000
UCBTRT   EQU   UCBMT+2                                                  16025000
UCBCTD   EQU   UCBMT                                                    16026000
UCBWTOID EQU   UCBCMEXT+17                                              16027000
UCBMIHTI EQU   UCBCMEXT+16                                              16028000
UCBASID  EQU   UCBCMEXT+14                                              16029000
UCBMFCNT EQU   UCBCMEXT+12                                              16030000
UCBPMSK  EQU   UCBCMEXT+10                                              16031000
UCBCCWOF EQU   UCBCMEXT+8                                               16032000
UCBRV041 EQU   UCBCMEXT+6                                               16033000
UCBRV036 EQU   UCBFLP1                                                  16034000
UCBRV035 EQU   UCBFLP1                                                  16035000
UCBERLOG EQU   UCBFLP1                                                  16036000
UCBRV033 EQU   UCBFLP1                                                  16037000
UCBINHIO EQU   UCBFLP1                                                  16038000
UCBNSWAP EQU   UCBFLP1                                                  16039000
UCBSHRUP EQU   UCBFLP1                                                  16040000
UCBNSRCH EQU   UCBFLP1                                                  16041000
UCBSNSCT EQU   UCBCMEXT+4                                               16042000
UCBHPDV  EQU   @NM00019                                                 16043000
UCBHALI  EQU   @NM00019                                                 16044000
UCBRSV09 EQU   @NM00019                                                 16045000
UCBRSV08 EQU   @NM00019                                                 16046000
UCBRSV07 EQU   @NM00019                                                 16047000
UCBRSV06 EQU   @NM00019                                                 16048000
UCBRSV05 EQU   @NM00019                                                 16049000
UCBRSV04 EQU   @NM00019                                                 16050000
UCBDTI   EQU   UCBCMEXT+2                                               16051000
UCBSTI   EQU   UCBCMEXT+1                                               16052000
UCBETI   EQU   UCBCMEXT                                                 16053000
UCBEXTP  EQU   UCBEXTPT+1                                               16054000
UCBDDRSW EQU   UCBFLC                                                   16055000
UCBTICBT EQU   UCBFLC                                                   16056000
UCBIVRR  EQU   UCBFLC                                                   16057000
UCBIVRS  EQU   UCBFLC                                                   16058000
UCBITF   EQU   UCBFLC                                                   16059000
UCBUDE   EQU   UCBFLC                                                   16060000
UCBWAA   EQU   UCBFLC                                                   16061000
UCBATTP  EQU   UCBFLC                                                   16062000
UCBUNTYP EQU   UCBTBYT4                                                 16063000
UCBRSV11 EQU   UCBDVCLS                                                 16064000
UCBRSV10 EQU   UCBDVCLS                                                 16065000
UCB3CHAR EQU   UCBDVCLS                                                 16066000
UCB3UREC EQU   UCBDVCLS                                                 16067000
UCB3DISP EQU   UCBDVCLS                                                 16068000
UCB3DACC EQU   UCBDVCLS                                                 16069000
UCB3COMM EQU   UCBDVCLS                                                 16070000
UCB3TAPE EQU   UCBDVCLS                                                 16071000
UCBDVPWR EQU   UCB2OPT7                                                 16072000
UCBVLPWR EQU   UCB2OPT6                                                 16073000
UCB2OPT5 EQU   UCBTBYT2                                                 16074000
UCBRVDEV EQU   UCBRWTAU                                                 16075000
UCBRPS   EQU   UCBDUDN2                                                 16076000
UCBRR    EQU   UCBDUDN1                                                 16077000
UCB2OPT1 EQU   UCBTBYT2                                                 16078000
UCB2OPT0 EQU   UCBTBYT2                                                 16079000
UCB1FEA7 EQU   UCBTBYT1                                                 16080000
UCBD6250 EQU   UCB1FEA6                                                 16081000
UCBD1600 EQU   UCB1FEA5                                                 16082000
UCB1FEA4 EQU   UCBTBYT1                                                 16083000
UCB1FEA3 EQU   UCBTBYT1                                                 16084000
UCB1FEA2 EQU   UCBTBYT1                                                 16085000
UCB1FEA1 EQU   UCBTBYT1                                                 16086000
UCB1FEA0 EQU   UCBTBYT1                                                 16087000
UCBNAME  EQU   UCBOB+13                                                 16088000
UCBRV029 EQU   UCBWGT                                                   16089000
UCBVHRSN EQU   UCBWGT                                                   16090000
UCBVORSN EQU   UCBWGT                                                   16091000
UCBMTPXP EQU   UCBWGT                                                   16092000
UCBREW   EQU   UCBWGT                                                   16093000
UCBPUB   EQU   UCBWGT                                                   16094000
UCBOUT   EQU   UCBWGT                                                   16095000
UCBIN    EQU   UCBWGT                                                   16096000
UCBCPU   EQU   UCBOB+11                                                 16097000
UCBCNT   EQU   UCBOB+9                                                  16098000
UCBRV017 EQU   UCBCHM1                                                  16099000
UCBRV016 EQU   UCBCHM1                                                  16100000
UCBRV015 EQU   UCBCHM1                                                  16101000
UCBRV014 EQU   UCBCHM1                                                  16102000
UCBSPB   EQU   UCBPTH1                                                  16103000
UCBPPB   EQU   UCBPTH1                                                  16104000
UCBSPA   EQU   UCBPTH0                                                  16105000
UCBPPA   EQU   UCBPTH0                                                  16106000
UCBSIGP  EQU   UCBFLB                                                   16107000
UCBVALPH EQU   UCBFLB                                                   16108000
UCBCRHSN EQU   UCBFLB                                                   16109000
UCBCRHRV EQU   UCBFLB                                                   16110000
UCBRESVH EQU   UCBFLB                                                   16111000
UCBSPST  EQU   UCBFLB                                                   16112000
UCBASNS  EQU   UCBFLB                                                   16113000
UCBIORST EQU   UCBFLB                                                   16114000
UCBQISCE EQU   UCBFL1                                                   16115000
UCBACTV  EQU   UCBFL1                                                   16116000
UCBSAP   EQU   UCBFL1                                                   16117000
UCBNOTRC EQU   UCBCUB                                                   16118000
UCBPSNS  EQU   UCBFL1                                                   16119000
UCBUSING EQU   UCBPST                                                   16120000
UCBNOTRD EQU   UCBNRY                                                   16121000
UCBBUSYD EQU   UCBBSY                                                   16122000
UCBUA    EQU   UCBCHAN+1                                                16123000
UCBCHA   EQU   UCBCHAN                                                  16124000
UCBDADI  EQU   UCBSTAT                                                  16125000
UCBALOC  EQU   UCBSTAT                                                  16126000
UCBUNLD  EQU   UCBSTAT                                                  16127000
UCBRESV  EQU   UCBSTAT                                                  16128000
UCBCHGS  EQU   UCBSTAT                                                  16129000
UCBONLI  EQU   UCBSTAT                                                  16130000
UCBID    EQU   UCBOB+2                                                  16131000
UCBALTPH EQU   UCBFL5                                                   16132000
UCBALTCU EQU   UCBFL5                                                   16133000
UCBNALOC EQU   UCBFL5                                                   16134000
UCBENVRD EQU   UCBFL5                                                   16135000
UCBVSDR  EQU   UCBFL5                                                   16136000
UCBSASK  EQU   UCBFL5                                                   16137000
UCBAMV   EQU   UCBAF                                                    16138000
UCBDCC   EQU   UCBFL5                                                   16139000
UCBMONT  EQU   UCBJBNR                                                  16140000
UCBRV011 EQU   UCBJBNR                                                  16141000
UCBMMSGP EQU   UCBJBNR                                                  16142000
UCBOLDSM EQU   UCBJBNR                                                  16143000
UCBRV003 EQU   UCBJBNR                                                  16144000
UCBDUC   EQU   UCBJBNR                                                  16145000
UCBJES3  EQU   UCBJBNR                                                  16146000
UCBVRDEV EQU   UCBJBNR                                                  16147000
UCBCMSEG EQU   UCBOB                                                    16148000
UCBPFXND EQU   UCB+512                                                  16149000
UCBIOQ   EQU   UCB+508                                                  16150000
UCBLOCK  EQU   UCB+504                                                  16151000
UCBPXST  EQU   UCB+504                                                  16152000
@NM00016 EQU   UCB                                                      16153000
LCHEND   EQU   LCH+32                                                   16154000
LCHPYBSY EQU   LCH+30                                                   16155000
LCHLGBSY EQU   LCH+28                                                   16156000
LCHRSV03 EQU   LCH+26                                                   16157000
LCHTOTAL EQU   LCH+24                                                   16158000
LCHRSV02 EQU   LCH+22                                                   16159000
@NM00015 EQU   LCHFLA                                                   16160000
LCHLKHLD EQU   LCHFLA                                                   16161000
LCHCHCNT EQU   LCH+20                                                   16162000
LCHRSV01 EQU   LCH+12                                                   16163000
LCHLOCK  EQU   LCH+8                                                    16164000
LCHLST   EQU   LCH+4                                                    16165000
LCHFST   EQU   LCHENTRY                                                 16166000
IOXEND   EQU   IOCX+32                                                  16167000
IOXPSIF  EQU   IOCX+28                                                  16168000
IOXPSIX  EQU   IOCX+24                                                  16169000
IOXSTIDC EQU   IOCX+20                                                  16170000
IOXCRHD  EQU   IOCX+16                                                  16171000
IOXTCQSC EQU   IOCX+8                                                   16172000
@NM00014 EQU   IOCX+6                                                   16173000
IOXLCHCT EQU   IOCX+5                                                   16174000
IOXCHMSK EQU   IOCX+2                                                   16175000
IOXOFSET EQU   IOX                                                      16176000
IOCOEND  EQU   IOCOM+128                                                16177000
IOCPATCH EQU   IOCOM+124                                                16178000
IOCQCNT  EQU   IOCOM+116                                                16179000
IOCIOSDQ EQU   IOCOM+112                                                16180000
IOCIOSEQ EQU   IOCOM+108                                                16181000
IOCSVCF  EQU   IOCOM+104                                                16182000
IOCTCCW  EQU   IOCOM+100                                                16183000
IOCRSVTB EQU   IOCOM+96                                                 16184000
IOCMFCNT EQU   IOCOM+92                                                 16185000
IOCMFHK  EQU   IOCOM+88                                                 16186000
IOCGENA  EQU   IOCOM+84                                                 16187000
IOCCCH   EQU   IOCOM+80                                                 16188000
IOCASYNQ EQU   IOCOM+76                                                 16189000
IOCLCHTB EQU   IOCOM+72                                                 16190000
IOCATTBL EQU   IOCOM+68                                                 16191000
IOCSYNCH EQU   IOCOM+56                                                 16192000
IOCCATLK EQU   IOCOM+48                                                 16193000
IOCPRGID EQU   IOCOM+44                                                 16194000
IOCIOSCP EQU   IOCOM+40                                                 16195000
IOCORMGT EQU   IOCOM+36                                                 16196000
IOCVOID  EQU   IOCOM+32                                                 16197000
IOCSTIO  EQU   IOCOM+28                                                 16198000
IOCSCOMP EQU   IOCOM+24                                                 16199000
IOCHD160 EQU   IOCOM+20                                                 16200000
IOCINT   EQU   IOCOM+16                                                 16201000
IOCCTBL  EQU   IOCOM+12                                                 16202000
IOCHIO   EQU   IOCOM+8                                                  16203000
IOCPST   EQU   IOCOM+4                                                  16204000
IOCPGCT  EQU   IOCOM+2                                                  16205000
IOCVOICT EQU   IOCOM                                                    16206000
CATEND   EQU   CAT+8                                                    16207000
CATSIOCT EQU   CAT+2                                                    16208000
CATFLARS EQU   CATFLA                                                   16209000
CATMCRST EQU   CATFLA                                                   16210000
CATCCRST EQU   CATFLA                                                   16211000
CATIORST EQU   CATFLA                                                   16212000
CATBSY   EQU   CATFLA                                                   16213000
CATFLG7  EQU   CATFLG                                                   16214000
CATFLG6  EQU   CATFLG                                                   16215000
CATFLG5  EQU   CATFLG                                                   16216000
CATNCPU  EQU   CATFLG                                                   16217000
CATRES1  EQU   CATFLG                                                   16218000
NIPTRACE EQU   GENLIST+2                                                16219000
@NM00013 EQU   GENLIST                                                  16220000
TRLEN    EQU   TRSIZE+1                                                 16221000
TRSBPOOL EQU   TRSIZE                                                   16222000
CDATTR3  EQU   CDENTRY+30                                               16223000
CDAUTH   EQU   CDATTR2                                                  16224000
CDSYSLIB EQU   CDATTR2                                                  16225000
CDOLY    EQU   CDATTR2                                                  16226000
@NM00011 EQU   CDATTR2                                                  16227000
CDRLC    EQU   CDATTR2                                                  16228000
CDXLE    EQU   CDATTR2                                                  16229000
CDREL    EQU   CDATTR2                                                  16230000
CDSPZ    EQU   CDATTR2                                                  16231000
CDNLR    EQU   CDATTR                                                   16232000
CDJPA    EQU   CDATTR                                                   16233000
CDMIN    EQU   CDATTR                                                   16234000
CDNFN    EQU   CDATTR                                                   16235000
CDSER    EQU   CDATTR                                                   16236000
CDREN    EQU   CDATTR                                                   16237000
CDNIC    EQU   CDATTR                                                   16238000
CDNIP    EQU   CDATTR                                                   16239000
@NM00010 EQU   CDENTRY+26                                               16240000
CDUSE    EQU   CDENTRY+24                                               16241000
CDENTPT  EQU   CDENTRY+16                                               16242000
CDNAME   EQU   CDENTRY+8                                                16243000
CDRRBP   EQU   CDENTRY+4                                                16244000
CDCHAIN  EQU   CDENTRY                                                  16245000
NSCHDCPU EQU   NIPSCHDL+8                                               16246000
NSCHDPRM EQU   NIPSCHDL+4                                               16247000
NSCHDPTR EQU   NIPSCHDL                                                 16248000
@NM00009 EQU   NIPOPNPL+22                                              16249000
NOPNRC   EQU   NIPOPNPL+21                                              16250000
NOPNFLSX EQU   NOPNFL                                                   16251000
NOPNFLLC EQU   NOPNFL                                                   16252000
NOPNFLLB EQU   NOPNFL                                                   16253000
NOPNFLNB EQU   NOPNFL                                                   16254000
NOPNFLI  EQU   NOPNFL                                                   16255000
NOPNFLM  EQU   NOPNFL                                                   16256000
NOPNFAU  EQU   NOPNFL                                                   16257000
NOPNFRS  EQU   NOPNFL                                                   16258000
NOPNUCB  EQU   NIPOPNPL+16                                              16259000
NOPNDCB  EQU   NIPOPNPL+12                                              16260000
NOPNDSA  EQU   NOPNDS                                                   16261000
@NM00008 EQU   NIPMNTPL+21                                              16262000
NMNTFLB  EQU   NMNTFL                                                   16263000
NMNTFLC  EQU   NMNTFL                                                   16264000
NMNTFLI  EQU   NMNTFL                                                   16265000
NMNTFUS  EQU   NMNTFL                                                   16266000
@NM00007 EQU   NMNTFL                                                   16267000
NMNTDT   EQU   NIPMNTPL+18                                              16268000
NMNTUCB  EQU   NMNTVS                                                   16269000
NMNTDSA  EQU   NMNTDS                                                   16270000
NIPSPEA  EQU   NIPSPE+4                                                 16271000
NIPSPEQ  EQU   NIPSPE                                                   16272000
NWTORMSG EQU   NWTORLST+12                                              16273000
@NM00006 EQU   NWTORLST+11                                              16274000
@NM00005 EQU   NWTORFL                                                  16275000
NWTORFLB EQU   NWTORFL                                                  16276000
@NM00004 EQU   NWTORFL                                                  16277000
NWTORFLA EQU   NWTORFL                                                  16278000
NMTORRDL EQU   NWTORLST+8                                               16279000
NWTORECB EQU   NWTORLST+4                                               16280000
NWTORRPA EQU   NWTORLST                                                 16281000
@NM00003 EQU   NWTOFL                                                   16282000
NWTOFLNC EQU   NWTOFL                                                   16283000
NWTOFLNH EQU   NWTOFL                                                   16284000
CVTLEVL  EQU   CVTRELNO+2                                               16285000
CVTNUMB  EQU   CVTRELNO                                                 16286000
@NM00002 EQU   CVTFIX+248                                               16287000
@NM00001 EQU   CVTFIX                                                   16288000
CVTRV482 EQU   CVTXTNT2+128                                             16289000
CVTRV481 EQU   CVTXTNT2+124                                             16290000
CVTRV480 EQU   CVTXTNT2+120                                             16291000
CVTRV479 EQU   CVTXTNT2+118                                             16292000
CVTRV478 EQU   CVTXTNT2+117                                             16293000
CVTRV477 EQU   CVTXTNT2+116                                             16294000
CVTRV476 EQU   CVTXTNT2+115                                             16295000
CVTRV475 EQU   CVTXTNT2+114                                             16296000
CVTRV474 EQU   CVTRV466                                                 16297000
CVTRV473 EQU   CVTRV466                                                 16298000
CVTRV472 EQU   CVTRV466                                                 16299000
CVTRV471 EQU   CVTRV466                                                 16300000
CVTRV470 EQU   CVTRV466                                                 16301000
CVTRV469 EQU   CVTRV466                                                 16302000
CVTRV468 EQU   CVTRV466                                                 16303000
CVTRV467 EQU   CVTRV466                                                 16304000
CVTRV465 EQU   CVTRV457                                                 16305000
CVTRV464 EQU   CVTRV457                                                 16306000
CVTRV463 EQU   CVTRV457                                                 16307000
CVTRV462 EQU   CVTRV457                                                 16308000
CVTRV461 EQU   CVTRV457                                                 16309000
CVTRV460 EQU   CVTRV457                                                 16310000
CVTRV459 EQU   CVTRV457                                                 16311000
CVTRV458 EQU   CVTRV457                                                 16312000
CVTRV456 EQU   CVTXTNT2+108                                             16313000
CVTRV455 EQU   CVTXTNT2+104                                             16314000
CVTRV454 EQU   CVTXTNT2+100                                             16315000
CVTRV453 EQU   CVTXTNT2+96                                              16316000
CVTRV452 EQU   CVTXTNT2+94                                              16317000
CVTRV451 EQU   CVTXTNT2+92                                              16318000
CVTRV450 EQU   CVTXTNT2+90                                              16319000
CVTRV449 EQU   CVTXTNT2+88                                              16320000
CVTRV448 EQU   CVTXTNT2+87                                              16321000
CVTRV447 EQU   CVTXTNT2+86                                              16322000
CVTRV446 EQU   CVTRV438                                                 16323000
CVTRV445 EQU   CVTRV438                                                 16324000
CVTRV444 EQU   CVTRV438                                                 16325000
CVTRV443 EQU   CVTRV438                                                 16326000
CVTRV442 EQU   CVTRV438                                                 16327000
CVTRV441 EQU   CVTRV438                                                 16328000
CVTRV440 EQU   CVTRV438                                                 16329000
CVTRV439 EQU   CVTRV438                                                 16330000
CVTRV437 EQU   CVTRV429                                                 16331000
CVTRV436 EQU   CVTRV429                                                 16332000
CVTRV435 EQU   CVTRV429                                                 16333000
CVTRV434 EQU   CVTRV429                                                 16334000
CVTRV433 EQU   CVTRV429                                                 16335000
CVTRV432 EQU   CVTRV429                                                 16336000
CVTRV431 EQU   CVTRV429                                                 16337000
CVTRV430 EQU   CVTRV429                                                 16338000
CVTRV428 EQU   CVTXTNT2+80                                              16339000
CVTRV427 EQU   CVTXTNT2+76                                              16340000
CVTRV426 EQU   CVTXTNT2+72                                              16341000
CVTRV425 EQU   CVTXTNT2+68                                              16342000
CVTATACT EQU   CVTATCVT                                                 16343000
CVTRV423 EQU   CVTXTNT2+62                                              16344000
CVTRV422 EQU   CVTXTNT2+60                                              16345000
CVTRV421 EQU   CVTXTNT2+58                                              16346000
CVTRV420 EQU   CVTXTNT2+56                                              16347000
CVTRV419 EQU   CVTXTNT2+55                                              16348000
CVTRV418 EQU   CVTXTNT2+54                                              16349000
CVTRV417 EQU   CVTRV409                                                 16350000
CVTRV416 EQU   CVTRV409                                                 16351000
CVTRV415 EQU   CVTRV409                                                 16352000
CVTRV414 EQU   CVTRV409                                                 16353000
CVTRV413 EQU   CVTRV409                                                 16354000
CVTRV412 EQU   CVTRV409                                                 16355000
CVTRV411 EQU   CVTRV409                                                 16356000
CVTRV410 EQU   CVTRV409                                                 16357000
CVTRV408 EQU   CVTRV400                                                 16358000
CVTRV407 EQU   CVTRV400                                                 16359000
CVTRV406 EQU   CVTRV400                                                 16360000
CVTRV405 EQU   CVTRV400                                                 16361000
CVTRV404 EQU   CVTRV400                                                 16362000
CVTRV403 EQU   CVTRV400                                                 16363000
CVTRV402 EQU   CVTRV400                                                 16364000
CVTRV401 EQU   CVTRV400                                                 16365000
CVTICB   EQU   CVTXTNT2+48                                              16366000
CVTSKTA  EQU   CVTXTNT2+44                                              16367000
CVTRSV99 EQU   CVTXTNT2+40                                              16368000
CVTRSV98 EQU   CVTXTNT2+36                                              16369000
CVTRSV97 EQU   CVTXTNT2+34                                              16370000
CVTRSV96 EQU   CVTXTNT2+32                                              16371000
CVTOLTEP EQU   CVTXTNT2+28                                              16372000
CVTQIDA  EQU   CVTQID+1                                                 16373000
CVTRSV95 EQU   CVTQID                                                   16374000
CVTRSV94 EQU   CVTXTNT2+20                                              16375000
CVTRSV93 EQU   CVTXTNT2+16                                              16376000
CVTRSV92 EQU   CVTXTNT2+12                                              16377000
CVTDEBVR EQU   CVTXTNT2+8                                               16378000
CVTRSV91 EQU   CVTXTNT2+6                                               16379000
CVTRSV9H EQU   CVTFLGBT                                                 16380000
CVTRSV9G EQU   CVTFLGBT                                                 16381000
CVTRSV9F EQU   CVTFLGBT                                                 16382000
CVTRSV9E EQU   CVTFLGBT                                                 16383000
CVTRSV9D EQU   CVTFLGBT                                                 16384000
CVTRSV9C EQU   CVTFLGBT                                                 16385000
CVTVME   EQU   CVTFLGBT                                                 16386000
CVTNPE   EQU   CVTFLGBT                                                 16387000
CVTDSSVA EQU   CVTDSSV+1                                                16388000
CVTRSV89 EQU   CVTDSSV                                                  16389000
CVTRSV88 EQU   CVTXTNT1+8                                               16390000
CVTRSV87 EQU   CVTXTNT1+4                                               16391000
CVTFACHN EQU   CVTXTNT1                                                 16392000
CVTRV488 EQU   CVTMAP+412                                               16393000
CVTRV487 EQU   CVTMAP+408                                               16394000
CVTRV486 EQU   CVTMAP+404                                               16395000
CVTRV485 EQU   CVTMAP+400                                               16396000
CVTACTAP EQU   CVTMAP+396                                               16397000
CVTAUTH  EQU   CVTMAP+392                                               16398000
CVTATMCA EQU   CVTATMCT+1                                               16399000
CVTATMST EQU   CVTATMCT                                                 16400000
CVTRSV61 EQU   CVTMAP+384                                               16401000
CVTVOLT1 EQU   CVTVOLM1+1                                               16402000
CVTVOLI1 EQU   CVTVOLF1                                                 16403000
CVTSTOA  EQU   CVTMAP+376                                               16404000
CVTRSV58 EQU   CVTMAP+374                                               16405000
CVTRSV57 EQU   CVTMAP+372                                               16406000
CVTDDCE  EQU   CVTMAP+368                                               16407000
CVTPNWFR EQU   CVTMAP+364                                               16408000
CVTSMF   EQU   CVTMAP+360                                               16409000
CVTSULK  EQU   CVTMAP+358                                               16410000
CVTSLKO  EQU   CVTSYSK                                                  16411000
CVTSLKP  EQU   CVTSYSK                                                  16412000
CVTSLKQ  EQU   CVTSYSK                                                  16413000
CVTSLKR  EQU   CVTSYSK                                                  16414000
CVTRSV56 EQU   CVTSYSK                                                  16415000
CVTRSV55 EQU   CVTSYSK                                                  16416000
CVTRSV54 EQU   CVTSYSK                                                  16417000
CVTRSV53 EQU   CVTSYSK                                                  16418000
CVTRSV52 EQU   CVTA1F1                                                  16419000
CVTRSV51 EQU   CVTA1F1                                                  16420000
CVTRSV50 EQU   CVTA1F1                                                  16421000
CVTRSV49 EQU   CVTA1F1                                                  16422000
CVTRSV48 EQU   CVTA1F1                                                  16423000
CVTRSV47 EQU   CVTA1F1                                                  16424000
CVTSRSW  EQU   CVTA1F1                                                  16425000
CVTPFSW  EQU   CVTA1F1                                                  16426000
CVTPCVT  EQU   CVTMAP+352                                               16427000
CVTRSV46 EQU   CVTMAP+344                                               16428000
CVTRSV45 EQU   CVTMAP+340                                               16429000
CVTRSV44 EQU   CVTMAP+338                                               16430000
CVTRSV43 EQU   CVTMAP+336                                               16431000
CVTHJESA EQU   CVTHJES+1                                                16432000
CVTRSV42 EQU   CVTHJES                                                  16433000
CVTEXT2A EQU   CVTEXT2+1                                                16434000
CVTRSV41 EQU   CVTEXT2                                                  16435000
CVTAPFA  EQU   CVTAPF+1                                                 16436000
CVTRSV40 EQU   CVTAPF                                                   16437000
CVTRV518 EQU   CVTINTLA                                                 16438000
CVTRV517 EQU   CVTERPV                                                  16439000
CVTMCHPR EQU   CVTMAP+308                                               16440000
CVTTZ    EQU   CVTMAP+304                                               16441000
CVTJEPS  EQU   CVTMAP+300                                               16442000
CVTJESCT EQU   CVTMAP+296                                               16443000
CVTMODE  EQU   CVTMAP+292                                               16444000
CVTPTRV  EQU   CVTMAP+288                                               16445000
CVTRSV39 EQU   CVTMAP+280                                               16446000
CVTRSV38 EQU   CVTMAP+276                                               16447000
CVTDMSRA EQU   CVTDMSR+1                                                16448000
CVTRV634 EQU   CVTDMSRF                                                 16449000
CVTRV633 EQU   CVTDMSRF                                                 16450000
CVTRV632 EQU   CVTDMSRF                                                 16451000
CVTRV631 EQU   CVTDMSRF                                                 16452000
CVTRV630 EQU   CVTDMSRF                                                 16453000
CVTRV629 EQU   CVTDMSRF                                                 16454000
CVTUDUMP EQU   CVTDMSRF                                                 16455000
CVTSDUMP EQU   CVTDMSRF                                                 16456000
CVTQMSGA EQU   CVTQMSG+1                                                16457000
CVTRSV36 EQU   CVTQMSG                                                  16458000
CVTAMFF  EQU   CVTMAP+264                                               16459000
CVTPURGA EQU   CVTPURG+1                                                16460000
CVTRSV35 EQU   CVTPURG                                                  16461000
CVTCBSP  EQU   CVTMAP+256                                               16462000
CVTATERA EQU   CVTATER+1                                                16463000
CVTSYST  EQU   CVTATER                                                  16464000
CVTVOLT2 EQU   CVTTAT                                                   16465000
CVTVOLI2 EQU   CVTVOLF2                                                 16466000
CVTAQAVB EQU   CVTAQAVT+1                                               16467000
CVTRSV34 EQU   CVTTCMFG                                                 16468000
CVTRSV33 EQU   CVTTCMFG                                                 16469000
CVTRSV32 EQU   CVTTCMFG                                                 16470000
CVTRSV31 EQU   CVTTCMFG                                                 16471000
CVTRSV30 EQU   CVTTCMFG                                                 16472000
CVTRSV29 EQU   CVTTCMFG                                                 16473000
CVTLDEV  EQU   CVTTCMFG                                                 16474000
CVTTCRDY EQU   CVTTCMFG                                                 16475000
CVTGTFA  EQU   CVTGTF+1                                                 16476000
CVTRSV27 EQU   CVTGTFST                                                 16477000
CVTRNIO  EQU   CVTGTFST                                                 16478000
CVTUSR   EQU   CVTGTFST                                                 16479000
CVTRV318 EQU   CVTFORM                                                  16480000
CVTRV317 EQU   CVTTMODE                                                 16481000
CVTRV316 EQU   CVTSTATE                                                 16482000
CVTRV315 EQU   CVTGTFS                                                  16483000
CVTGTFAV EQU   CVTGTFS                                                  16484000
CVT0SCR1 EQU   CVTMAP+232                                               16485000
CVTRV515 EQU   CVTMAP+228                                               16486000
CVTRMS   EQU   CVTMAP+224                                               16487000
CVTPATCH EQU   CVTMAP+220                                               16488000
CVTTSCE  EQU   CVTMAP+216                                               16489000
CVTLNKSC EQU   CVTMAP+214                                               16490000
CVTQABST EQU   CVTMAP+212                                               16491000
CVTMDLDS EQU   CVTMAP+208                                               16492000
CVTUSER  EQU   CVTMAP+204                                               16493000
CVTSMCA  EQU   CVTMAP+196                                               16494000
CVTRSV18 EQU   CVTMAP+192                                               16495000
CVTQLPAQ EQU   CVTMAP+188                                               16496000
CVTQCDSR EQU   CVTMAP+184                                               16497000
CVTRSV17 EQU   CVTOPTB                                                  16498000
CVTRSV16 EQU   CVTOPTB                                                  16499000
CVTFP    EQU   CVTOPTB                                                  16500000
CVTAPTHR EQU   CVTOPTB                                                  16501000
CVTNLOG  EQU   CVTOPTB                                                  16502000
CVTTOD   EQU   CVTOPTB                                                  16503000
CVTCTIMS EQU   CVTOPTB                                                  16504000
CVTPROT  EQU   CVTOPTB                                                  16505000
CVTASCII EQU   CVTOPTA                                                  16506000
CVTRSV13 EQU   CVTOPTA                                                  16507000
CVTRSV12 EQU   CVTOPTA                                                  16508000
CVTNIP   EQU   CVTOPTA                                                  16509000
CVTDDR   EQU   CVTOPTA                                                  16510000
CVTAPR   EQU   CVTOPTA                                                  16511000
CVTCCH   EQU   CVTOPTA                                                  16512000
CVTSNCTR EQU   CVTMAP+180                                               16513000
CVTQMWR  EQU   CVTMAP+176                                               16514000
CVTQOCR  EQU   CVTMAP+172                                               16515000
CVT1EF00 EQU   CVTMAP+168                                               16516000
CVTMZ00  EQU   CVTMAP+164                                               16517000
CVTSV76Q EQU   CVTSV76C                                                 16518000
CVTRSV11 EQU   CVTMAP+156                                               16519000
CVT0PT01 EQU   CVTMAP+152                                               16520000
CVTMSER  EQU   CVTMAP+148                                               16521000
CVTRV516 EQU   CVTIERLC                                                 16522000
CVTFBOSV EQU   CVTMAP+132                                               16523000
CVTSV76M EQU   CVTIOQET                                                 16524000
CVTDCBA  EQU   CVTMAP+117                                               16525000
CVTMVS2  EQU   CVTDCB                                                   16526000
CVT6DAT  EQU   CVTDCB                                                   16527000
CVT4MPS  EQU   CVTDCB                                                   16528000
CVTRSV09 EQU   CVTDCB                                                   16529000
CVT4MS1  EQU   CVTDCB                                                   16530000
CVT2SPS  EQU   CVTDCB                                                   16531000
CVT1SSS  EQU   CVTDCB                                                   16532000
CVTRSV08 EQU   CVTDCB                                                   16533000
CVTSTB   EQU   CVTMAP+112                                               16534000
CVTQTD00 EQU   CVTMAP+108                                               16535000
CVTQTE00 EQU   CVTMAP+104                                               16536000
CVTCUCB  EQU   CVTMAP+100                                               16537000
CVTSJQ   EQU   CVTMAP+96                                                16538000
CVTPBLDL EQU   CVTMAP+92                                                16539000
CVTTPC   EQU   CVTMAP+88                                                16540000
CVTSVDCB EQU   CVTMAP+84                                                16541000
CVTBRET  EQU   CVTMAP+82                                                16542000
CVTEXIT  EQU   CVTMAP+80                                                16543000
CVT0FN00 EQU   CVTMAP+76                                                16544000
CVTDARA  EQU   CVTDAR+1                                                 16545000
CVTRSV07 EQU   CVTFLGS1                                                 16546000
CVTRSV06 EQU   CVTFLGS1                                                 16547000
CVTRSV05 EQU   CVTFLGS1                                                 16548000
CVTRSV04 EQU   CVTFLGS1                                                 16549000
CVTRSV03 EQU   CVTFLGS1                                                 16550000
CVTRSV02 EQU   CVTFLGS1                                                 16551000
CVTRSV01 EQU   CVTFLGS1                                                 16552000
CVTDMPLK EQU   CVTFLGS1                                                 16553000
CVTXITP  EQU   CVTMAP+68                                                16554000
CVTZDTAB EQU   CVTMAP+64                                                16555000
CVTMSLT  EQU   CVTMAP+60                                                16556000
CVTDATE  EQU   CVTMAP+56                                                16557000
CVTXTLER EQU   CVTMAP+44                                                16558000
CVTPCNVT EQU   CVTMAP+28                                                16559000
CVT0VL00 EQU   CVTMAP+24                                                16560000
CVTBUF   EQU   CVTMAP+16                                                16561000
CVTJOB   EQU   CVTMAP+12                                                16562000
CVTLINK  EQU   CVTMAP+8                                                 16563000
CVT0EF00 EQU   CVTMAP+4                                                 16564000
CVTTCBP  EQU   CVTMAP                                                   16565000
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS      16566000
@RT00574 EQU   NP0NNIPM                                                 16567000
@RT00684 EQU   NP0NMP                                                   16568000
@RT01033 EQU   NP0INSRS                                                 16569000
@RT01110 EQU   NP0INSRS                                                 16570000
@RT01446 EQU   NPTCHAN1                                                 16571000
@RF01446 EQU   NPCHNIO1                                                 16572000
@RT01535 EQU   NP0BLCPF                                                 16573000
@RT01560 EQU   NP0INSRS                                                 16574000
@RT01562 EQU   NP0RSME                                                  16575000
@RT01614 EQU   NP0LEAVE                                                 16576000
@RF01640 EQU   NCPUCHEK                                                 16577000
@RT01648 EQU   NCPUSTEP                                                 16578000
@RT01669 EQU   NP0FRPCC                                                 16579000
@RT01679 EQU   NIP0IPR                                                  16580000
@RT01693 EQU   CPUSNS                                                   16581000
@RT01725 EQU   NP0SPSAE                                                 16582000
@RT01760 EQU   NP0STOP                                                  16583000
@RT01765 EQU   NMPSYNC2                                                 16584000
@RT01785 EQU   NP0SPSAE                                                 16585000
@RT01812 EQU   NXTRSTRT                                                 16586000
@RF01805 EQU   NPREINIT                                                 16587000
@RT01817 EQU   NP0ONLIN                                                 16588000
@RT01863 EQU   STOPCPU                                                  16589000
@RT01868 EQU   NXTRSTRT                                                 16590000
@RT01877 EQU   CPUCHEK2                                                 16591000
@RT01920 EQU   NP0BLIOE                                                 16592000
@RT01922 EQU   NP0NNIPM                                                 16593000
@RT01924 EQU   NP0BLDLE                                                 16594000
@RT01934 EQU   NMFRCVY                                                  16595000
@RT01961 EQU   NPWRAPUP                                                 16596000
@RF01968 EQU   NMFSTEP                                                  16597000
@RT01981 EQU   NP0SPSAE                                                 16598000
@RT02022 EQU   NRNAWCHK                                                 16599000
@RT02027 EQU   NP0SRNAW                                                 16600000
@RF02045 EQU   NP0SRNAW                                                 16601000
@RT02104 EQU   NPTCHAN2                                                 16602000
@RF02104 EQU   NPCHNIO2                                                 16603000
@RT02160 EQU   NP0DSSHK                                                 16604000
@RF02174 EQU   NP0SRNAW                                                 16605000
@RT02204 EQU   NSPAL01                                                  16606000
@PB00003 EQU   @EC02207                                                 16607000
@RT02208 EQU   NMCHTWT                                                  16608000
@PB00011 EQU   @PB00012                                                 16609000
@RT02391 EQU   NP0TPCHK                                                 16610000
@RF02391 EQU   NP0UXPC                                                  16611000
@RC02526 EQU   @RC02518                                                 16612000
@RC02512 EQU   @EL00013                                                 16613000
@PB00014 EQU   @EL00001                                                 16614000
@PB00002 EQU   @PB00003                                                 16615000
@PB00010 EQU   @PB00011                                                 16616000
@RC02556 EQU   @RC02512                                                 16617000
@PB00013 EQU   @PB00014                                                 16618000
@PB00009 EQU   @PB00010                                                 16619000
@PB00008 EQU   @PB00009                                                 16620000
@PB00007 EQU   @PB00008                                                 16621000
@PB00006 EQU   @PB00007                                                 16622000
@PB00005 EQU   @PB00006                                                 16623000
@PB00004 EQU   @PB00005                                                 16624000
@ENDDATA EQU   *                                                        16625000
         END   IEAVNIP0,(C'PLS1949',0701,77129)                         16626000
