         TITLE 'TOD CLOCK MANAGER--MODULE IEAVRTOD                     *00001000
                        '                                               00002000
IEAVRTOD CSECT ,                                                   0001 00003000
IEAVRINT DS    0H                                                  0001 00004000
         ENTRY IEAVRINT                                                 00005000
@MAINENT DS    0H                                                  0001 00006000
         USING *,@15                                               0001 00007000
         B     @PROLOG                                             0001 00008000
         DC    AL2(@EP00001-@MAINENT)                                   00009000
         DC    AL1(16)                                             0001 00010000
         DC    C'IEAVRTOD  78.156'                                 0001 00011000
IEAVRSSC DS    0H                                                  0001 00012000
         USING *,@15                                               0001 00013000
         B     @PROLOG                                             0001 00014000
         DC    AL2(@EP00251-IEAVRSSC)                                   00015000
         ENTRY IEAVRSSC                                                 00016000
IEAVRNOT DS    0H                                                  0001 00017000
         USING *,@15                                               0001 00018000
         B     @PROLOG                                             0001 00019000
         DC    AL2(@EP00827-IEAVRNOT)                                   00020000
         ENTRY IEAVRNOT                                                 00021000
IEAVRCAN DS    0H                                                  0001 00022000
         USING *,@15                                               0001 00023000
         B     @PROLOG                                             0001 00024000
         DC    AL2(@EP00899-IEAVRCAN)                                   00025000
         ENTRY IEAVRCAN                                                 00026000
         DROP  @15                                                      00027000
@PROLOG  STM   @14,@12,12(@13)                                     0001 00028000
         BALR  @09,0                                               0001 00029000
@PSTART  LA    @10,4095(,@09)                                      0001 00030000
         USING @PSTART,@09                                         0001 00031000
         USING @PSTART+4095,@10                                    0001 00032000
         L     @00,@SIZDATD                                        0001 00033000
         GETMAIN  R,LV=(0)                                              00034000
         LR    @08,@01                                             0001 00035000
         USING @DATD,@08                                           0001 00036000
         ST    @13,@SA00001+4                                      0001 00037000
         LM    @15,@01,16(@13)                                     0001 00038000
         ST    @08,8(,@13)                                         0001 00039000
         LR    @13,@08                                             0001 00040000
         AH    @15,4(,@15)                                         0001 00041000
         BR    @15                                                 0001 00042000
@EP00001 DS    0H                                                  0002 00043000
*                                                                  0132 00044000
*/********************************************************************/ 00045000
*/*                                                                  */ 00046000
*/* SAVE THE ADDRESS OF THE SAVEAREA, AND RE-BASE THE CVT FOR MORE   */ 00047000
*/* EFFICIENT CODE GENERATION.                                       */ 00048000
*/*                                                                  */ 00049000
*/********************************************************************/ 00050000
*                                                                  0133 00051000
*BEGTOD:                                                           0133 00052000
*   R13SAV=REG13;                                                  0133 00053000
BEGTOD   ST    REG13,R13SAV                                        0133 00054000
*   LCVTPTR=CVTPTR;                                                0134 00055000
         L     LCVTPTR,CVTPTR                                      0134 00056000
*   RESPECIFY                                                      0135 00057000
*     CVTMAP BASED(LCVTPTR);                                       0135 00058000
*                                                                  0135 00059000
*/********************************************************************/ 00060000
*/*                                                                  */ 00061000
*/* GET THE NUMBER OF CPU'S CURRENTLY ONLINE, AND CALCULATE THE      */ 00062000
*/* NUMBER OF BYTES REQUIRED FOR THE TOD CLOCK WORKAREA AND ONE TOD  */ 00063000
*/* CLOCK WORKAREA ENTRY PER CPU.  THEN, GET THE AMOUNT OF STORAGE   */ 00064000
*/* JUST CALCULATED FROM SUBPOOL 245.                                */ 00065000
*/*                                                                  */ 00066000
*/********************************************************************/ 00067000
*                                                                  0136 00068000
*   REG0=LENGTH(TCWA)+(LENGTH(TCENTRY)*CSDCPUOL);                  0136 00069000
         L     @07,CVTCSD(,LCVTPTR)                                0136 00070000
         LH    REG0,CSDCPUOL(,@07)                                 0136 00071000
         SLA   REG0,4                                              0136 00072000
         AH    REG0,@CH01364                                       0136 00073000
*   GENERATE CODE                                                  0137 00074000
*       (GETMAIN RU,LV=(0),SP=245      OBTAIN WORKAREA FROM SP 245);    00075000
*                                                                  0137 00076000
         GETMAIN RU,LV=(0),SP=245      OBTAIN WORKAREA FROM SP 245      00077000
*/********************************************************************/ 00078000
*/*                                                                  */ 00079000
*/* USE A COMPARE AND SWAP LOOP IN ORDER TO SERIALIZE MANIPULATION   */ 00080000
*/* OF THE TOD CLOCKS.  IF THE POINTER TO THE TOD CLOCK WORKAREA IS  */ 00081000
*/* 0, THEN THE CLOCKS ARE NOT CURRENTLY BEING MANIPULATED.          */ 00082000
*/*                                                                  */ 00083000
*/********************************************************************/ 00084000
*                                                                  0138 00085000
*LOOP1:                                                            0138 00086000
*   REG11=0;                        /* CLEAR REG 11 FOR COMPARE AND     00087000
*                                      SWAP                          */ 00088000
LOOP1    SLR   REG11,REG11                                         0138 00089000
*   CS(REG11,REG1,TPCTCWA);         /* TEST FOR CODE IN EXECUTION    */ 00090000
         L     @07,TPCPTR(,LCVTPTR)                                0139 00091000
         CS    REG11,@01,TPCTCWA(@07)                              0139 00092000
*   BC(7,LOOP1);                    /* BRANCH IF CODE IN EXECUTION   */ 00093000
         BC    7,LOOP1                                             0140 00094000
*/********************************************************************/ 00095000
*/*                                                                  */ 00096000
*/* SAVE THE IPL-TIME TIME ZONE CONSTANT IN THE TPC FOR POTENTIAL    */ 00097000
*/* LATER USE IN A SET COMMAND WITH THE RESET PARAMETER.             */ 00098000
*/*                                                                  */ 00099000
*/********************************************************************/ 00100000
*                                                                  0141 00101000
*   TPCTZORG=CVTTZ;                                                0141 00102000
*                                                                  0141 00103000
         L     @07,TPCPTR(,LCVTPTR)                                0141 00104000
         MVC   TPCTZORG(4,@07),CVTTZ(LCVTPTR)                      0141 00105000
*/********************************************************************/ 00106000
*/*                                                                  */ 00107000
*/* ESTABLISH ADDRESSABILITY FOR THE TOD CLOCK WORKAREA, SAVE THE    */ 00108000
*/* COUNT OF ONLINE CPU'S, CLEAR THE FLAGS IN THE WORKAREA, AND SAVE */ 00109000
*/* ITS LENGTH FOR THE FREEMAIN TO COME.                             */ 00110000
*/*                                                                  */ 00111000
*/********************************************************************/ 00112000
*                                                                  0142 00113000
*   TCWAPTR=REG1;                                                  0142 00114000
         LR    TCWAPTR,REG1                                        0142 00115000
*   RESPECIFY                                                      0143 00116000
*     TCWA BASED(TCWAPTR);                                         0143 00117000
*   TCCPUCNT=CSDCPUOL;                                             0144 00118000
         L     @07,CVTCSD(,LCVTPTR)                                0144 00119000
         LH    @06,CSDCPUOL(,@07)                                  0144 00120000
         STH   @06,TCCPUCNT(,TCWAPTR)                              0144 00121000
*   CSDGDTOD=CSDCPUOL;              /* COUNT OF GOOD TOD CLOCKS TO 0145 00122000
*                                      CSD                           */ 00123000
         ST    @06,CSDGDTOD(,@07)                                  0145 00124000
*   CSDGDCC=CSDCPUOL;               /* COUNT OF GOOD CLK COMP TO CSD */ 00125000
         ST    @06,CSDGDCC(,@07)                                   0146 00126000
*   CSDGDINT=CSDCPUOL;              /* COUNT OF GOOD CPU TIMERS TO 0147 00127000
*                                      CSD                           */ 00128000
         ST    @06,CSDGDINT(,@07)                                  0147 00129000
*   TCWAGFLG='00'X;                                                0148 00130000
         MVI   TCWAGFLG(TCWAPTR),X'00'                             0148 00131000
*   TCWALN=REG0;                                                   0149 00132000
*                                                                  0149 00133000
         STH   REG0,TCWALN                                         0149 00134000
*/********************************************************************/ 00135000
*/*                                                                  */ 00136000
*/* SET UP THE INTERFACE FOR GETTING A PAGE FIXED, AND ISSUE THE     */ 00137000
*/* PGFIX SVC TO FIX THIS MODULE.                                    */ 00138000
*/*                                                                  */ 00139000
*/********************************************************************/ 00140000
*                                                                  0150 00141000
*   REG1=ADDR(BEGTOD);              /* GET POINTER TO START OF MODULE*/ 00142000
         LA    REG1,BEGTOD                                         0150 00143000
*   REG15=ADDR(ENDTOD);             /* GET POINTER TO END OF MODULE  */ 00144000
         LA    REG15,ENDTOD                                        0151 00145000
*   REG0=ADDR(TODECB);              /* GET POINTER TO ECB            */ 00146000
         LA    REG0,TODECB                                         0152 00147000
*   TODECB=0;                       /* CLEAR ECB                     */ 00148000
         SLR   @07,@07                                             0153 00149000
         ST    @07,TODECB                                          0153 00150000
*   GENERATE CODE(PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N);           0154 00151000
         PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N                           00152000
*                                                                  0155 00153000
*/********************************************************************/ 00154000
*/*                                                                  */ 00155000
*/* THIS CODE INITIALIZES A WORKAREA ENTRY FOR EVERY CPU ONLINE.     */ 00156000
*/*                                                                  */ 00157000
*/********************************************************************/ 00158000
*                                                                  0155 00159000
*   PTREBEG=TCWAPTR+LENGTH(TCWA);   /* SAVE PTR TO FIRST TCWA ENTRY  */ 00160000
         LA    @07,112                                             0155 00161000
         ALR   @07,TCWAPTR                                         0155 00162000
         ST    @07,PTREBEG                                         0155 00163000
*   PTREEND=PTREBEG+TCCPUCNT*LENGTH(TCENTRY)-1;/* SAVE PTR TO END OF    00164000
*                                      TCWA ENTRIES                  */ 00165000
         LH    @06,TCCPUCNT(,TCWAPTR)                              0156 00166000
         SLA   @06,4                                               0156 00167000
         ALR   @06,@07                                             0156 00168000
         BCTR  @06,0                                               0156 00169000
         ST    @06,PTREEND                                         0156 00170000
*   REG12=CVTPCCAT+LENGTH(PCCAVT)-LENGTH(PCCAT00P);/* GET PTR TO LAST   00171000
*                                      PCCAVT ENTRY                  */ 00172000
         L     REG12,CVTPCCAT(,LCVTPTR)                            0157 00173000
         SH    REG12,@CH02779                                      0157 00174000
*   RESPECIFY                                                      0158 00175000
*     PCCAVT BASED(REG12);                                         0158 00176000
*   RESPECIFY                                                      0159 00177000
*     PCCA BASED(PTRPCCA);                                         0159 00178000
*   REG11=PTREBEG;                  /* GET PTR TO FIRST TCWA ENTRY   */ 00179000
         LR    REG11,@07                                           0160 00180000
*   RESPECIFY                                                      0161 00181000
*     TCENTRY BASED(REG11);                                        0161 00182000
*   MASKHLDR=CSDCPUAL;              /* GET MASK OF ALIVE CPU'S       */ 00183000
         L     @07,CVTCSD(,LCVTPTR)                                0162 00184000
         SLR   MASKHLDR,MASKHLDR                                   0162 00185000
         ICM   MASKHLDR,3,CSDCPUAL(@07)                            0162 00186000
*/********************************************************************/ 00187000
*/*                                                                  */ 00188000
*/* THIS LOOP DECREMENTS THE INDEX THROUGH THE MASK OF ONLINE CPU'S  */ 00189000
*/* AS LONG AS THE MASK BIT FOR THE CPU IS OFF, INDICATING THAT THE  */ 00190000
*/* CPU IS NOT ONLINE.                                               */ 00191000
*/*                                                                  */ 00192000
*/********************************************************************/ 00193000
*                                                                  0163 00194000
*   DO REG1=LENGTH(CSDCPUAL) TO 1 BY-1;                            0163 00195000
         LA    REG1,16                                             0163 00196000
@DL00163 DS    0H                                                  0164 00197000
*     IF MASKHLDR//2^=0             /* SEE IF THE NEXT BIT IS ON     */ 00198000
*       THEN                                                       0164 00199000
*                                                                  0164 00200000
         LR    @07,MASKHLDR                                        0164 00201000
         N     @07,@CF00096                                        0164 00202000
         LTR   @07,@07                                             0164 00203000
         BZ    @RF00164                                            0164 00204000
*/********************************************************************/ 00205000
*/*                                                                  */ 00206000
*/* WHEN A BIT IN THE MASK IS FOUND TO BE ON, INDICATING THAT THE CPU*/ 00207000
*/* IS ONLINE, FILL IN THE PCCA ADDRESS FIELD AND THE CPU ADDRESS    */ 00208000
*/* FIELD IN THE NEXT AVAILABLE TOD CLOCK WORKAREA ENTRY.            */ 00209000
*/*                                                                  */ 00210000
*/********************************************************************/ 00211000
*                                                                  0165 00212000
*       DO;                                                        0165 00213000
*         TCWAPCCA=PTRPCCA;                                        0166 00214000
         L     @07,PTRPCCA(,REG12)                                 0166 00215000
         ST    @07,TCWAPCCA(,REG11)                                0166 00216000
*         TCWAIADD=PCCACPUA;                                       0167 00217000
         MVC   TCWAIADD(2,REG11),PCCACPUA(@07)                     0167 00218000
*         REG11=REG11+LENGTH(TCENTRY);                             0168 00219000
         AH    REG11,@CH00045                                      0168 00220000
*       END;                                                       0169 00221000
*     MASKHLDR=MASKHLDR/2;          /* SHIFT OFF BIT JUST PROCESSED  */ 00222000
@RF00164 SRL   MASKHLDR,1                                          0170 00223000
*     REG12=REG12-LENGTH(PCCAT00P); /* POINT TO NEXT PCCAVT ENTRY    */ 00224000
         SH    REG12,@CH00108                                      0171 00225000
*   END;                                                           0172 00226000
*                                                                  0172 00227000
         BCTR  REG1,0                                              0172 00228000
         LTR   REG1,REG1                                           0172 00229000
         BP    @DL00163                                            0172 00230000
*/********************************************************************/ 00231000
*/*                                                                  */ 00232000
*/* AFTER INITIALIZING THE TOD CLOCK WORKAREA ENTRIES, WAIT FOR      */ 00233000
*/* COMPLETION OF THE PAGE FIXING OPERATION.                         */ 00234000
*/*                                                                  */ 00235000
*/********************************************************************/ 00236000
*                                                                  0173 00237000
*   REG1=ADDR(TODECB);                                             0173 00238000
         LA    REG1,TODECB                                         0173 00239000
*   GENERATE CODE(WAIT  1,ECB=(1));                                0174 00240000
*                                                                  0174 00241000
         WAIT  1,ECB=(1)                                                00242000
*/********************************************************************/ 00243000
*/*                                                                  */ 00244000
*/* INITIALIZE THE RETURN CODE SO THAT THE FOLLOWING LOOP WILL BE    */ 00245000
*/* EXECUTED AT LEAST ONE TIME.                                      */ 00246000
*/*                                                                  */ 00247000
*/********************************************************************/ 00248000
*                                                                  0175 00249000
*   RETCODE=4;                                                     0175 00250000
*                                                                  0175 00251000
         LA    RETCODE,4                                           0175 00252000
*/********************************************************************/ 00253000
*/*                                                                  */ 00254000
*/* STARTING WITH THE FIRST TOD CLOCK WORKAREA ENTRY, CALL           */ 00255000
*/* THE SYNCHRONIZATION TESTING ROUTINE TO TEST THE SYNCHRONIZATION  */ 00256000
*/* OF ALL OTHER CLOCKS AGAINST THIS ONE.  DO THIS AS LONG AS THERE  */ 00257000
*/* ARE ENTRIES TO PROCESS AND THE TESTING ROUTINE INDICATES THAT    */ 00258000
*/* EITHER THE SUBJECT CLOCK WAS NOT SET (RETURN CODE=4),            */ 00259000
*/* OR THAT THE TESTING PROCEDURE COULD NOT BE COMPLETED IN LESS     */ 00260000
*/* THAN 2**20 MICROSECONDS (RETURN CODE=16).                        */ 00261000
*/*                                                                  */ 00262000
*/********************************************************************/ 00263000
*                                                                  0176 00264000
*   REG11=PTREBEG;                  /* GET PTR TO FIRST TCWA ENTRY   */ 00265000
         L     REG11,PTREBEG                                       0176 00266000
*   DO REG1=TCCPUCNT TO 1 BY-1 WHILE RETCODE=4|RETCODE=16;         0177 00267000
*                                                                  0177 00268000
         LH    REG1,TCCPUCNT(,TCWAPTR)                             0177 00269000
         B     @DE00177                                            0177 00270000
@DL00177 CH    RETCODE,@CH00108                                    0177 00271000
         BE    @DB00177                                            0177 00272000
         CH    RETCODE,@CH00045                                    0177 00273000
         BNE   @DC00177                                            0177 00274000
@DB00177 DS    0H                                                  0178 00275000
*/********************************************************************/ 00276000
*/*                                                                  */ 00277000
*/* MAKE SURE THAT THE ENTRY FOR THE SUBJECT CLOCK IS THE            */ 00278000
*/* FIRST, BY INTERCHANGING THE FIRST AND SUBJECT ENTRIES.           */ 00279000
*/*                                                                  */ 00280000
*/********************************************************************/ 00281000
*                                                                  0178 00282000
*     TCWAWRK=PTREBEG->TCENTRY;     /* SAVE FIRST ENTRY              */ 00283000
         L     @07,PTREBEG                                         0178 00284000
         MVC   TCWAWRK(16,TCWAPTR),TCENTRY(@07)                    0178 00285000
*     PTREBEG->TCENTRY=TCENTRY;     /* NEXT ENTRY TO FIRST           */ 00286000
         MVC   TCENTRY(16,@07),TCENTRY(REG11)                      0179 00287000
*     TCENTRY=TCWAWRK;              /* FIRST ENTRY TO NEXT           */ 00288000
         MVC   TCENTRY(16,REG11),TCWAWRK(TCWAPTR)                  0180 00289000
*/********************************************************************/ 00290000
*/*                                                                  */ 00291000
*/* CALL THE SYNCHRONIZATION TESTING ROUTINE.                        */ 00292000
*/*                                                                  */ 00293000
*/********************************************************************/ 00294000
*                                                                  0181 00295000
*     CALL IEAVRTST;                                               0181 00296000
*                                                                  0181 00297000
         BAL   @14,IEAVRTST                                        0181 00298000
*/********************************************************************/ 00299000
*/*                                                                  */ 00300000
*/* TEST FOR A RETURN CODE OF 0.                                     */ 00301000
*/*                                                                  */ 00302000
*/********************************************************************/ 00303000
*                                                                  0182 00304000
*     IF RETCODE=0 THEN                                            0182 00305000
*                                                                  0182 00306000
         LTR   RETCODE,RETCODE                                     0182 00307000
         BNZ   @RF00182                                            0182 00308000
*/********************************************************************/ 00309000
*/*                                                                  */ 00310000
*/* IF THE RETURN CODE IS 0, INDICATING THAT ALL CLOCKS ARE IN       */ 00311000
*/* SYNCHRONISM OR THAT THE ONLY CLOCK IS SET, TURN ON THE FLAG WHICH*/ 00312000
*/* INDICATES THAT MESSAGE IEA888A SHOULD BE ISSUED.                 */ 00313000
*/*                                                                  */ 00314000
*/********************************************************************/ 00315000
*                                                                  0183 00316000
*       TCGXXX='1'B;                                               0183 00317000
         OI    TCGXXX(TCWAPTR),B'10000000'                         0183 00318000
*     ELSE                                                         0184 00319000
*                                                                  0184 00320000
*/********************************************************************/ 00321000
*/*                                                                  */ 00322000
*/* IF THE RETURN CODE WAS NOT 0, INDICATE THAT PROMPTING MUST       */ 00323000
*/* BE DONE, AND THEN TEST FOR A RETURN CODE OF 8 OR 12.             */ 00324000
*/*                                                                  */ 00325000
*/********************************************************************/ 00326000
*                                                                  0184 00327000
*       DO;                                                        0184 00328000
         B     @RC00182                                            0184 00329000
@RF00182 DS    0H                                                  0185 00330000
*         MSTODWTO='0'B;            /*                        @Y02675*/ 00331000
         L     @07,CVTMSER(,LCVTPTR)                               0185 00332000
         NI    MSTODWTO(@07),B'10111111'                           0185 00333000
*         IF RETCODE=8|RETCODE=12 THEN                             0186 00334000
*                                                                  0186 00335000
         CH    RETCODE,@CH00038                                    0186 00336000
         BE    @RT00186                                            0186 00337000
         CH    RETCODE,@CH01265                                    0186 00338000
         BNE   @RF00186                                            0186 00339000
@RT00186 DS    0H                                                  0187 00340000
*/********************************************************************/ 00341000
*/*                                                                  */ 00342000
*/* IF THE RETURN CODE WAS 8 OR 12, INDICATING THAT THE THE CLOCKS   */ 00343000
*/* WERE OUT OF LOW ORDER OR HIGH ORDER SYNCHRONIZATION RESPECTIVELY,*/ 00344000
*/* THEN LOOP THROUGH THE TOD CLOCK WORKAREA ENTRIES EXAMINING THE   */ 00345000
*/* CONDITION CODE FIELD, TO DETERMINE IF MORE THAN ONE SET CLOCK    */ 00346000
*/* WAS FOUND.  NOTE: IF MORE THAN ONE SET CLOCK WAS FOUND, THE      */ 00347000
*/* VALUES OF ALL SET CLOCKS MUST BE DISPLAYED TO THE OPERATOR.      */ 00348000
*/*                                                                  */ 00349000
*/********************************************************************/ 00350000
*                                                                  0187 00351000
*           DO;                                                    0187 00352000
*             REG12=PTREBEG;        /* GET PTR TO FIRST TCWA ENTRY   */ 00353000
         L     REG12,PTREBEG                                       0188 00354000
*             REG15=1;              /* INITIALIZE COUNTER FOR SET  0189 00355000
*                                      CLOCKS                        */ 00356000
         LA    REG15,1                                             0189 00357000
*/********************************************************************/ 00358000
*/*                                                                  */ 00359000
*/* TEST EACH ENTRY FOR A SET CLOCK UNTIL ALL ENTRIES ARE CHECKED,   */ 00360000
*/* OR MORE THAN 1 SET CLOCK HAS BEEN FOUND.                         */ 00361000
*/*                                                                  */ 00362000
*/********************************************************************/ 00363000
*                                                                  0190 00364000
*             RESPECIFY                                            0190 00365000
*              (REG0) RESTRICTED;                                  0190 00366000
*             DO REG0=TCCPUCNT TO 1 BY-1 WHILE REG15=>0;           0191 00367000
         LH    REG0,TCCPUCNT(,TCWAPTR)                             0191 00368000
         B     @DE00191                                            0191 00369000
@DL00191 LTR   REG15,REG15                                         0191 00370000
         BM    @DC00191                                            0191 00371000
*               IF REG12->TCLCC='00'B/* TEST FOR CC=0                */ 00372000
*                 THEN                                             0192 00373000
         TM    TCLCC(REG12),B'00110000'                            0192 00374000
         BNZ   @RF00192                                            0192 00375000
*                 REG15=REG15-1;                                   0193 00376000
         BCTR  REG15,0                                             0193 00377000
*               REG12=REG12+LENGTH(TCENTRY);/* POINT TO NEXT TCWA  0194 00378000
*                                      ENTRY                         */ 00379000
@RF00192 AH    REG12,@CH00045                                      0194 00380000
*             END;                                                 0195 00381000
         BCTR  REG0,0                                              0195 00382000
@DE00191 LTR   REG0,REG0                                           0195 00383000
         BP    @DL00191                                            0195 00384000
@DC00191 DS    0H                                                  0196 00385000
*             RESPECIFY                                            0196 00386000
*              (REG0) UNRESTRICTED;                                0196 00387000
*                                                                  0196 00388000
*/********************************************************************/ 00389000
*/*                                                                  */ 00390000
*/* TEST FOR ONLY ONE SET CLOCK FOUND.                               */ 00391000
*/*                                                                  */ 00392000
*/********************************************************************/ 00393000
*                                                                  0197 00394000
*             IF REG15=0 THEN                                      0197 00395000
*                                                                  0197 00396000
         LTR   REG15,REG15                                         0197 00397000
         BNZ   @RF00197                                            0197 00398000
*/********************************************************************/ 00399000
*/*                                                                  */ 00400000
*/* IF ONLY ONE SET CLOCK WAS FOUND, TURN ON THE FLAG WHICH INDI-    */ 00401000
*/* CATES THAT MESSAGE IEA888A SHOULD BE ISSUED.                     */ 00402000
*/*                                                                  */ 00403000
*/********************************************************************/ 00404000
*                                                                  0198 00405000
*               TCGXXX='1'B;                                       0198 00406000
         OI    TCGXXX(TCWAPTR),B'10000000'                         0198 00407000
*             ELSE                                                 0199 00408000
*                                                                  0199 00409000
*/********************************************************************/ 00410000
*/*                                                                  */ 00411000
*/* IF MORE THAN ONE SET CLOCK WAS FOUND, TURN ON THE FLAG WHICH IN- */ 00412000
*/* DICATES THAT MESSAGE IEA887A SHOULD BE ISSUED.                   */ 00413000
*/*                                                                  */ 00414000
*/********************************************************************/ 00415000
*                                                                  0199 00416000
*               TCGZZZ='1'B;                                       0199 00417000
         B     @RC00197                                            0199 00418000
@RF00197 OI    TCGZZZ(TCWAPTR),B'00100000'                         0199 00419000
*           END;                                                   0200 00420000
*         ELSE                                                     0201 00421000
*                                                                  0201 00422000
*/********************************************************************/ 00423000
*/*                                                                  */ 00424000
*/* IF THE RETURN CODE WAS NOT 0, 8, OR 12, IT MUST BE 4 OR 16.      */ 00425000
*/* THEREFORE, TEST REG1 FOR A VALUE OF 1, INDICATING THAT THE       */ 00426000
*/* SUBJECT ENTRY WAS THE LAST ENTRY.                                */ 00427000
*/*                                                                  */ 00428000
*/********************************************************************/ 00429000
*                                                                  0201 00430000
*           IF REG1=1 THEN                                         0201 00431000
*                                                                  0201 00432000
         B     @RC00186                                            0201 00433000
@RF00186 CH    REG1,@CH00096                                       0201 00434000
         BNE   @RF00201                                            0201 00435000
*/********************************************************************/ 00436000
*/*                                                                  */ 00437000
*/* IF THE VALUE IS 1, TURN ON THE FLAG WHICH INDICATES THAT MESSAGE */ 00438000
*/* IEA886A SHOULD BE ISSUED. (NOTE: IF THE VALUE IS NOT 1, THE LOOP */ 00439000
*/* WILL BE EXECUTED AGAIN BECAUSE THE RETURN CODE IS 4 OR 16.)      */ 00440000
*/*                                                                  */ 00441000
*/********************************************************************/ 00442000
*                                                                  0202 00443000
*             TCGYYY='1'B;                                         0202 00444000
         OI    TCGYYY(TCWAPTR),B'01000000'                         0202 00445000
*       END;                                                       0203 00446000
@RF00201 DS    0H                                                  0203 00447000
@RC00186 DS    0H                                                  0204 00448000
*     REG11=REG11+LENGTH(TCENTRY);  /* POINT TO NEXT TCWA ENTRY      */ 00449000
@RC00182 AH    REG11,@CH00045                                      0204 00450000
*   END;                                                           0205 00451000
         BCTR  REG1,0                                              0205 00452000
@DE00177 LTR   REG1,REG1                                           0205 00453000
         BP    @DL00177                                            0205 00454000
@DC00177 DS    0H                                                  0206 00455000
*                                                                  0206 00456000
*/********************************************************************/ 00457000
*/*                                                                  */ 00458000
*/* CALL THE COMMUNICATIONS ROUTINE TO WRITE MESSAGES TO THE         */ 00459000
*/* OPERATOR CONCERNING TOD CLOCK AND LOCAL TIME VALUES, AND TO PRO- */ 00460000
*/* CESS HIS REPLIES TO THESE MESSAGES.  THE MESSAGES TO BE WRITTEN  */ 00461000
*/* ARE INDICATED BY THE FLAGS JUST SET IN THE TCWAGFLG FIELD OF THE */ 00462000
*/* TOD CLOCK WORKAREA.                                              */ 00463000
*/*                                                                  */ 00464000
*/********************************************************************/ 00465000
*                                                                  0206 00466000
*   CALL IEAVRCOM;                                                 0206 00467000
*                                                                  0206 00468000
         BAL   @14,IEAVRCOM                                        0206 00469000
*/********************************************************************/ 00470000
*/*                                                                  */ 00471000
*/* CALL THE SYNCHRONIZATION TESTING ROUTINE TO DETERMINE IF THE     */ 00472000
*/* CLOCKS NOW REQUIRE SYNCHRONIZING, SINCE THE OPERATOR MAY HAVE    */ 00473000
*/* MADE CHANGES.                                                    */ 00474000
*/*                                                                  */ 00475000
*/********************************************************************/ 00476000
*                                                                  0207 00477000
*   CALL IEAVRTST;                                                 0207 00478000
*                                                                  0207 00479000
         BAL   @14,IEAVRTST                                        0207 00480000
*/********************************************************************/ 00481000
*/*                                                                  */ 00482000
*/* TEST FOR A RETURN CODE OF 0.                                     */ 00483000
*/*                                                                  */ 00484000
*/********************************************************************/ 00485000
*                                                                  0208 00486000
*   IF RETCODE^=0 THEN                                             0208 00487000
*                                                                  0208 00488000
         LTR   RETCODE,RETCODE                                     0208 00489000
         BZ    @RF00208                                            0208 00490000
*/********************************************************************/ 00491000
*/*                                                                  */ 00492000
*/* IF THE RETURN WAS 0, THERE IS ONLY ONE CPU IN THE CONFIGURATION  */ 00493000
*/* AND ITS CLOCK IS NOW SET,  OR ALL CLOCKS ARE SET AND IN          */ 00494000
*/* SYNCHRONISM.  IF THE RETURN CODE IS NOT 0, TEST FOR A RETURN     */ 00495000
*/* CODE OF 8 OR 12.                                                 */ 00496000
*/*                                                                  */ 00497000
*/********************************************************************/ 00498000
*                                                                  0209 00499000
*     IF RETCODE=8|RETCODE=12 THEN                                 0209 00500000
*                                                                  0209 00501000
         CH    RETCODE,@CH00038                                    0209 00502000
         BE    @RT00209                                            0209 00503000
         CH    RETCODE,@CH01265                                    0209 00504000
         BNE   @RF00209                                            0209 00505000
@RT00209 DS    0H                                                  0210 00506000
*/********************************************************************/ 00507000
*/*                                                                  */ 00508000
*/* IF THE RETURN CODE IS 8 OR 12, THE TOD CLOCKS REQUIRE SYN-       */ 00509000
*/* CHRONIZING.  THEREFORE, CALL THE SYNCHRONIZING ROUTINE TO AT-    */ 00510000
*/* TEMPT SYNCHRONIZATION OF THE CLOCKS, AND THEN CALL THE SYNCHRONI-*/ 00511000
*/* ZATION TESTING ROUTINE TO ENSURE THAT THE CLOCKS WERE ACTUALLY   */ 00512000
*/* SYNCHRONIZED.  (NOTE: THE RETURN CODE NOW SET BY THE TESTING     */ 00513000
*/* ROUTINE WILL BE PASSED BACK TO THE CALLER TO INDICATE THE SUCCESS*/ 00514000
*/* OR FAILURE OF THE SYNCHRONIZING OPERATION.)                      */ 00515000
*/*                                                                  */ 00516000
*/********************************************************************/ 00517000
*                                                                  0210 00518000
*       DO;                                                        0210 00519000
*         CALL IEAVRSYN;                                           0211 00520000
         BAL   @14,IEAVRSYN                                        0211 00521000
*         CALL IEAVRTST;                                           0212 00522000
         BAL   @14,IEAVRTST                                        0212 00523000
*       END;                                                       0213 00524000
*   RCSAVE=REG15;                   /* SAVE THE RETURN CODE FROM   0214 00525000
*                                      IEAVRTST                      */ 00526000
@RF00209 DS    0H                                                  0214 00527000
@RF00208 ST    REG15,RCSAVE                                        0214 00528000
*/********************************************************************/ 00529000
*/*                                                                  */ 00530000
*/* SAVE THE ADDRESS OF THE ASYNCHRONOUS RECOVERY ROUTINE (IEAVRCLA) */ 00531000
*/* IN THE TPC SO THAT IT CAN BE SCHEDULED BY THE SYNCHRONOUS        */ 00532000
*/* ROUTINE (IEAVRCLS).                                              */ 00533000
*/*                                                                  */ 00534000
*/********************************************************************/ 00535000
*                                                                  0215 00536000
*   TPCCLA=ADDR(IEAVRCLA);                                         0215 00537000
*                                                                  0215 00538000
         L     @07,TPCPTR(,LCVTPTR)                                0215 00539000
         LA    @06,IEAVRCLA                                        0215 00540000
         ST    @06,TPCCLA(,@07)                                    0215 00541000
*/********************************************************************/ 00542000
*/*                                                                  */ 00543000
*/* SEARCH THE LOGICAL CCA VECTOR TABLE.  WHEN A NON-ZERO ENTRY      */ 00544000
*/* IS FOUND, SET THE WAIT TIME FIELD IN THE LCCA TO 0, AND SET      */ 00545000
*/* THE TIME AT DISPATCH FIELD TO THE CURRENT TOD CLOCK VALUE.       */ 00546000
*/*                                                                  */ 00547000
*/********************************************************************/ 00548000
*                                                                  0216 00549000
*   REG12=CVTLCCAT;                 /* GET PTR TO LCCAVT             */ 00550000
         L     REG12,CVTLCCAT(,LCVTPTR)                            0216 00551000
*   RESPECIFY                                                      0217 00552000
*     LCCAVT BASED(REG12);                                         0217 00553000
*   DO REG1=DIM(LCCAT00P) TO 1 BY-1;                               0218 00554000
         LA    REG1,16                                             0218 00555000
@DL00218 DS    0H                                                  0219 00556000
*     IF PTRLCCA^=0                 /* TEST FOR NON-ZERO ENTRY       */ 00557000
*       THEN                                                       0219 00558000
         L     @07,PTRLCCA(,REG12)                                 0219 00559000
         LTR   @07,@07                                             0219 00560000
         BZ    @RF00219                                            0219 00561000
*       DO;                                                        0220 00562000
*         LCCAPTR=PTRLCCA;                                         0221 00563000
         LR    LCCAPTR,@07                                         0221 00564000
*         LCCAWTIM='0000000000000000'X;                            0222 00565000
         MVC   LCCAWTIM(8,LCCAPTR),@CB02630                        0222 00566000
*         GENERATE CODE REFS(LCCADTOD,LCCAPTR)(STCK  LCCADTOD(LCCAPTR)) 00567000
*             ;                                                    0223 00568000
         STCK  LCCADTOD(LCCAPTR)                                        00569000
*       END;                                                       0224 00570000
*     REG12=REG12+LENGTH(LCCAT00P); /* POINT TO NEXT LCCAVT ENTRY    */ 00571000
@RF00219 AH    REG12,@CH00108                                      0225 00572000
*   END;                                                           0226 00573000
*                                                                  0226 00574000
         BCTR  REG1,0                                              0226 00575000
         LTR   REG1,REG1                                           0226 00576000
         BP    @DL00218                                            0226 00577000
*/********************************************************************/ 00578000
*/*                                                                  */ 00579000
*/* ZERO OUT THE ACCUMULATED JOB STEP TIME FIELD FOR ALL MEMORIES.   */ 00580000
*/*                                                                  */ 00581000
*/********************************************************************/ 00582000
*                                                                  0227 00583000
*   REG12=CVTASVT;                  /* GET POINTER TO ASVT           */ 00584000
         L     REG12,CVTASVT(,LCVTPTR)                             0227 00585000
*   RESPECIFY                                                      0228 00586000
*     ASVT BASED(REG12);                                           0228 00587000
*   RESPECIFY                                                      0229 00588000
*     ASCB BASED(ASVTENTY);                                        0229 00589000
*   DO REG1=ASVTMAXU TO 1 BY-1;                                    0230 00590000
         L     REG1,ASVTMAXU(,REG12)                               0230 00591000
         B     @DE00230                                            0230 00592000
@DL00230 DS    0H                                                  0231 00593000
*     IF ASVTAVAL='0'B THEN         /* TEST FOR IN-USE ASVT ENTRY    */ 00594000
         TM    ASVTAVAL(REG12),B'10000000'                         0231 00595000
         BNZ   @RF00231                                            0231 00596000
*       ASCBEJST='0000000000000000'X;                              0232 00597000
         L     @07,ASVTENTY(,REG12)                                0232 00598000
         MVC   ASCBEJST(8,@07),@CB02630                            0232 00599000
*     REG12=REG12+LENGTH(ASVTENTY); /* POINT TO NEXT ASVT ENTRY      */ 00600000
@RF00231 AH    REG12,@CH00108                                      0233 00601000
*   END;                                                           0234 00602000
*                                                                  0234 00603000
         BCTR  REG1,0                                              0234 00604000
@DE00230 LTR   REG1,REG1                                           0234 00605000
         BP    @DL00230                                            0234 00606000
*/********************************************************************/ 00607000
*/*                                                                  */ 00608000
*/* CALL THE ROUTINE WHICH ENQUEUES THE JOBSTEP TIMING TQE AND THE   */ 00609000
*/* MIDNIGHT TQE, AND NOTIFIES THE SRM THAT INITIALIZATION OF THE    */ 00610000
*/* TOD CLOCKS IS COMPLETE.                                          */ 00611000
*/*                                                                  */ 00612000
*/********************************************************************/ 00613000
*                                                                  0235 00614000
*   CALL TQEINIT;                                                  0235 00615000
*                                                                  0235 00616000
         LA    @15,TQEINIT                                         0235 00617000
         BALR  @14,@15                                             0235 00618000
*/********************************************************************/ 00619000
*/*                                                                  */ 00620000
*/* INITIALIZE THE TIMER STATUS BYTES IN THE PCCA OF EACH ONLINE CPU */ 00621000
*/*                                                                  */ 00622000
*/********************************************************************/ 00623000
*                                                                  0236 00624000
*   REG11=PTREBEG;                  /* GET PTR TO FIRST TCWA ENTRY   */ 00625000
         L     REG11,PTREBEG                                       0236 00626000
*   DO REG1=TCCPUCNT TO 1 BY-1;                                    0237 00627000
         LH    REG1,TCCPUCNT(,TCWAPTR)                             0237 00628000
         B     @DE00237                                            0237 00629000
@DL00237 DS    0H                                                  0238 00630000
*     TCWAPCCA->PCCATMST=TMSTINIT;                                 0238 00631000
         L     @07,TCWAPCCA(,REG11)                                0238 00632000
         MVC   PCCATMST(4,@07),TMSTINIT                            0238 00633000
*     REG11=REG11+LENGTH(TCENTRY);  /* POINT TO NEXT TCWA ENTRY      */ 00634000
         AH    REG11,@CH00045                                      0239 00635000
*   END;                                                           0240 00636000
*                                                                  0240 00637000
         BCTR  REG1,0                                              0240 00638000
@DE00237 LTR   REG1,REG1                                           0240 00639000
         BP    @DL00237                                            0240 00640000
*/********************************************************************/ 00641000
*/*                                                                  */ 00642000
*/* FREE THE TOD CLOCK WORKAREA AND THE FIXED PAGE.                  */ 00643000
*/*                                                                  */ 00644000
*/********************************************************************/ 00645000
*                                                                  0241 00646000
*   REG0=TCWALN;                    /* GET LENGTH OF TCWA            */ 00647000
         LH    REG0,TCWALN                                         0241 00648000
*   REG1=TCWAPTR;                   /* GET ADDRESS OF TCWA           */ 00649000
         LR    REG1,TCWAPTR                                        0242 00650000
*   GENERATE CODE(FREEMAIN RU,LV=(0),A=(1),SP=245);                0243 00651000
         FREEMAIN RU,LV=(0),A=(1),SP=245                                00652000
*   REG1=ADDR(BEGTOD);              /* GET POINTER TO START OF MODULE*/ 00653000
         LA    REG1,BEGTOD                                         0244 00654000
*   REG15=ADDR(ENDTOD);             /* GET PTR TO END OF MODULE      */ 00655000
         LA    REG15,ENDTOD                                        0245 00656000
*   GENERATE CODE(PGFREE R,A=(1),EA=(15));                         0246 00657000
*                                                                  0246 00658000
         PGFREE R,A=(1),EA=(15)                                         00659000
*/********************************************************************/ 00660000
*/*                                                                  */ 00661000
*/* INDICATE THAT PROMPTING IS REQUIRED FROM NOW ON, AND ZERO THE    */ 00662000
*/* POINTER TO THE TOD CLOCK WORKAREA IN THE TPC TO INDICATE THAT    */ 00663000
*/* MANIPULATION OF THE TOD CLOCKS HAS CEASED.                       */ 00664000
*/*                                                                  */ 00665000
*/********************************************************************/ 00666000
*                                                                  0247 00667000
*   MSTODWTO='0'B;                  /*                        @Y02675*/ 00668000
         L     @07,CVTMSER(,LCVTPTR)                               0247 00669000
         NI    MSTODWTO(@07),B'10111111'                           0247 00670000
*   TPCTCWA=0;                                                     0248 00671000
*                                                                  0248 00672000
         L     @07,TPCPTR(,LCVTPTR)                                0248 00673000
         SLR   @06,@06                                             0248 00674000
         ST    @06,TPCTCWA(,@07)                                   0248 00675000
*/********************************************************************/ 00676000
*/*                                                                  */ 00677000
*/* RESTORE THE SAVEAREA ADDRESS, AND RETURN TO THE CALLER WITH A    */ 00678000
*/* RETURN CODE IN REGISTER 15.                                      */ 00679000
*/*                                                                  */ 00680000
*/********************************************************************/ 00681000
*                                                                  0249 00682000
*   REG13=R13SAV;                                                  0249 00683000
         L     REG13,R13SAV                                        0249 00684000
*   RETURN CODE(RCSAVE);                                           0250 00685000
         L     @07,RCSAVE                                          0250 00686000
         L     @13,4(,@13)                                         0250 00687000
         L     @00,@SIZDATD                                        0250 00688000
         LR    @01,@08                                             0250 00689000
         FREEMAIN R,LV=(0),A=(1)                                        00690000
         LR    @15,@07                                             0250 00691000
         L     @14,12(,@13)                                        0250 00692000
         LM    @00,@12,20(@13)                                     0250 00693000
         BR    @14                                                 0250 00694000
*                                                                  0251 00695000
*/********************************************************************/ 00696000
*/*                                                                  */ 00697000
*/*          IEAVRSSC--TOD SET SPECIFIC CLOCK ROUTINE                */ 00698000
*/*                                                                  */ 00699000
*/* THIS ROUTINE RECEIVES CONTROL FROM IEAVRCLA AND THE VARY CPU     */ 00700000
*/* COMMAND PROCESSOR.  IT BUILDS A WORKAREA CONTAINING A LIST OF 2  */ 00701000
*/* CPU'S, ONE REPRESENTING THE CPU WHOSE CLOCK IS TO BE SET/SYNCHED */ 00702000
*/* AND THE OTHER REPRESENTING THE CPU TO WHICH THE "SPECIFIC" CLOCK */ 00703000
*/* WILL BE SYNCHRONIZED.  IT THEN USES ROUTINES IEAVRTST,IEAVRCOM,  */ 00704000
*/* AND IEAVRSYN TO SET/SYNCH THE "SPECIFIC" CLOCK.                  */ 00705000
*/*                                                                  */ 00706000
*/* FIRST, USING IEAVRTST, AN ATTEMPT IS MADE TO FIND AN ONLINE CPU  */ 00707000
*/* WHOSE CLOCK IS SET.  IF FOUND, IEAVRSYN IS INVOKED TO SYNCHRO-   */ 00708000
*/* NIZE THE "SPECIFIC" CLOCK.  IF NO SET CLOCK CAN BE FOUND, USING  */ 00709000
*/* THE RETURN CODE FROM IEAVRTST, A FLAG IS SET IN THE WORKAREA TO  */ 00710000
*/* INDICATE WHICH MESSAGE SHOULD BE DISPLAYED TO THE OPERATOR.      */ 00711000
*/* THEN IEAVRCOM IS INVOKED TO COMMUNICATE WITH THE OPERATOR, AND   */ 00712000
*/* THE "SPECIFIC" CLOCK IS ULTIMATELY SET.                          */ 00713000
*/*                                                                  */ 00714000
*/* TIMER SUPERVISION RELATED FIELDS IN VARIOUS CONTROL BLOCKS ARE   */ 00715000
*/* UPDATED OR INITIALIZED, DEPENDING ON THE SUCCESS OR FAILURE OF   */ 00716000
*/* THE SETTING/SYNCHRONIZING OPERATION.  CONTROL IS RETURNED TO THE */ 00717000
*/* CALLER WITH A RETURN CODE IN REGISTER 15.                        */ 00718000
*/*                                                                  */ 00719000
*/********************************************************************/ 00720000
*                                                                  0251 00721000
*IEAVRSSC:                                                         0251 00722000
*   ENTRY(NEWPCCA);                                                0251 00723000
*                                                                  0251 00724000
@EP00251 MVC   @PC00001(4),0(@01)                                  0251 00725000
*/********************************************************************/ 00726000
*/*                                                                  */ 00727000
*/* SAVE THE CALLER'S ID, AND THE ADDRESS OF THE SAVEAREA.           */ 00728000
*/*                                                                  */ 00729000
*/********************************************************************/ 00730000
*                                                                  0252 00731000
*   CALLERID=REG0;                                                 0252 00732000
         STH   REG0,CALLERID                                       0252 00733000
*   R13SAV=REG13;                                                  0253 00734000
*                                                                  0253 00735000
         ST    REG13,R13SAV                                        0253 00736000
*/********************************************************************/ 00737000
*/*                                                                  */ 00738000
*/* SAVE THE CODE AND DATA REGISTERS FOR USE IN RECOVERY EXIT.       */ 00739000
*/*                                                                  */ 00740000
*/********************************************************************/ 00741000
*                                                                  0254 00742000
*   STM(REG8,REG10,SSCBASE);                                       0254 00743000
*                                                                  0254 00744000
         STM   REG8,REG10,SSCBASE                                  0254 00745000
*/********************************************************************/ 00746000
*/*                                                                  */ 00747000
*/* ESTABLISH ERROR EXIT FOR UNLOCKED CODE.                          */ 00748000
*/*                                                                  */ 00749000
*/********************************************************************/ 00750000
*                                                                  0255 00751000
*   REG1=ADDR(ESTAEL);              /* GET ADDR OF MACRO PARM LIST   */ 00752000
         LA    REG1,ESTAEL                                         0255 00753000
*   REG2=ADDR(SSCESTAE);            /* GET EXIT ADDRESS              */ 00754000
         LA    REG2,SSCESTAE                                       0256 00755000
*   REG3=ADDR(SSCRPARM);            /* GET EXIT PARMLIST ADDRESS     */ 00756000
         LA    REG3,SSCRPARM                                       0257 00757000
*   GEN CODE REFS(REG1,REG2,REG3)                                  0258 00758000
*       (ESTAE (2),CT,PARAM=(3),PURGE=NONE,RECORD=YES,MF=(E,(1))); 0258 00759000
*                                                                  0258 00760000
         ESTAE (2),CT,PARAM=(3),PURGE=NONE,RECORD=YES,MF=(E,(1))        00761000
*/********************************************************************/ 00762000
*/*                                                                  */ 00763000
*/* RE-BASE THE CVT FOR MORE EFFICIENT CODE GENERATION.              */ 00764000
*/*                                                                  */ 00765000
*/********************************************************************/ 00766000
*                                                                  0259 00767000
*   LCVTPTR=CVTPTR;                                                0259 00768000
*                                                                  0259 00769000
         L     LCVTPTR,CVTPTR                                      0259 00770000
*/********************************************************************/ 00771000
*/*                                                                  */ 00772000
*/* GET A TOD CLOCK WORKAREA WITH 2 ENTRIES.                         */ 00773000
*/*                                                                  */ 00774000
*/********************************************************************/ 00775000
*                                                                  0260 00776000
*   REG0=LENGTH(TCWA)+(2*LENGTH(TCENTRY));                         0260 00777000
         LA    REG0,144                                            0260 00778000
*   GENERATE CODE(GETMAIN RC,LV=(0),SP=245     GET TOD CLOCK WORKAREA); 00779000
*                                                                  0261 00780000
         GETMAIN RC,LV=(0),SP=245     GET TOD CLOCK WORKAREA            00781000
*/********************************************************************/ 00782000
*/*                                                                  */ 00783000
*/* TEST FOR A SUCCESSFUL GETMAIN.                                   */ 00784000
*/*                                                                  */ 00785000
*/********************************************************************/ 00786000
*                                                                  0262 00787000
*   IF RETCODE=0 THEN                                              0262 00788000
*                                                                  0262 00789000
         LTR   RETCODE,RETCODE                                     0262 00790000
         BNZ   @RF00262                                            0262 00791000
*/********************************************************************/ 00792000
*/*                                                                  */ 00793000
*/* IF THE GETMAIN WAS SUCCESSFUL, SERIALIZE THE EXECUTION OF THIS   */ 00794000
*/* CODE.                                                            */ 00795000
*/*                                                                  */ 00796000
*/********************************************************************/ 00797000
*                                                                  0263 00798000
*     DO;                                                          0263 00799000
*LOOP2:                                                            0264 00800000
*       REG11=0;                    /* CLEAR REG11 FOR COMPARE AND 0264 00801000
*                                      SWAP                          */ 00802000
LOOP2    SLR   REG11,REG11                                         0264 00803000
*       CS(REG11,REG1,TPCTCWA);     /* TEST FOR CODE IN EXECUTION    */ 00804000
         L     @07,TPCPTR(,LCVTPTR)                                0265 00805000
         CS    REG11,@01,TPCTCWA(@07)                              0265 00806000
*       BC(7,LOOP2);                /* BRANCH IF CODE IN EXECUTION   */ 00807000
         BC    7,LOOP2                                             0266 00808000
*/********************************************************************/ 00809000
*/*                                                                  */ 00810000
*/* ESTABLISH ADDRESSABILITY TO THE TOD CLOCK WORKAREA, SAVE THE     */ 00811000
*/* NUMBER OF TOD CLOCK WORKAREA ENTRIES, AND SET THE WORKAREA FLAGS */ 00812000
*/* TO ZEROES.                                                       */ 00813000
*/*                                                                  */ 00814000
*/********************************************************************/ 00815000
*                                                                  0267 00816000
*       TCWAPTR=REG1;                                              0267 00817000
         LR    TCWAPTR,REG1                                        0267 00818000
*       TCCPUCNT=2;                                                0268 00819000
         MVC   TCCPUCNT(2,TCWAPTR),@CH00119                        0268 00820000
*       TCWAGFLG='00'X;             /*                       @YM08621*/ 00821000
         MVI   TCWAGFLG(TCWAPTR),X'00'                             0269 00822000
*/********************************************************************/ 00823000
*/*                                                                  */ 00824000
*/* SET UP THE INTERFACE TO GET A PAGE FIXED, AND FIX THIS MODULE    */ 00825000
*/*                                                                  */ 00826000
*/********************************************************************/ 00827000
*                                                                  0270 00828000
*       REG1=ADDR(BEGTOD);          /* GET POINTER TO START OF MODULE*/ 00829000
         LA    REG1,BEGTOD                                         0270 00830000
*       REG15=ADDR(ENDTOD);         /* GET POINTER TO END OF MODULE  */ 00831000
         LA    REG15,ENDTOD                                        0271 00832000
*       REG0=ADDR(TODECB);          /* GET POINTER TO ECB            */ 00833000
         LA    REG0,TODECB                                         0272 00834000
*       TODECB=0;                   /* CLEAR ECB                     */ 00835000
         SLR   @07,@07                                             0273 00836000
         ST    @07,TODECB                                          0273 00837000
*       GENERATE CODE(PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N);       0274 00838000
*                                                                  0274 00839000
         PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N                           00840000
*/********************************************************************/ 00841000
*/*                                                                  */ 00842000
*/* WAIT FOR COMPLETION OF THE PAGE FIXING OPERATION.                */ 00843000
*/*                                                                  */ 00844000
*/********************************************************************/ 00845000
*                                                                  0275 00846000
*       REG1=ADDR(TODECB);          /* GET ECB ADDRESS               */ 00847000
         LA    REG1,TODECB                                         0275 00848000
*       GENERATE CODE(WAIT  1,ECB=(1));                            0276 00849000
*                                                                  0276 00850000
         WAIT  1,ECB=(1)                                                00851000
*/********************************************************************/ 00852000
*/*                                                                  */ 00853000
*/* SET THE RETURN CODE TO 4 SO THAT THE LOOP WILL BE EXECUTED AT    */ 00854000
*/* AT LEAST ONCE.                                                   */ 00855000
*/*                                                                  */ 00856000
*/********************************************************************/ 00857000
*                                                                  0277 00858000
*       RETCODE=4;                                                 0277 00859000
         LA    RETCODE,4                                           0277 00860000
*                                                                  0278 00861000
*/********************************************************************/ 00862000
*/*                                                                  */ 00863000
*/* PERFORM THE FOLLOWING UNTIL A SET CLOCK IS FOUND, OR UNTIL ALL   */ 00864000
*/* OSTENSIBLY GOOD CLOCKS HAVE BEEN TESTED AND HAVE BEEN FOUND NOT  */ 00865000
*/* TO BE SET.  THE SET CLOCK WILL BE USED TO SYNCHRONIZE THE NEW    */ 00866000
*/* CLOCK TO.                                                        */ 00867000
*/*                                                                  */ 00868000
*/********************************************************************/ 00869000
*                                                                  0278 00870000
*       PTREBEG=TCWAPTR+LENGTH(TCWA);/* SAVE PTR TO FIRST TCWA ENTRY */ 00871000
         LA    @07,112                                             0278 00872000
         ALR   @07,TCWAPTR                                         0278 00873000
         ST    @07,PTREBEG                                         0278 00874000
*       REG12=CVTPCCAT+LENGTH(PCCAVT)-LENGTH(PCCAT00P);/* GET PTR TO    00875000
*                                      LAST PCCAVT ENTRY             */ 00876000
         L     REG12,CVTPCCAT(,LCVTPTR)                            0279 00877000
         SH    REG12,@CH02779                                      0279 00878000
*       MASKHLDR=CSDCPUAL;          /* GET MASK OF ALIVE CPU'S       */ 00879000
         L     @07,CVTCSD(,LCVTPTR)                                0280 00880000
         SLR   MASKHLDR,MASKHLDR                                   0280 00881000
         ICM   MASKHLDR,3,CSDCPUAL(@07)                            0280 00882000
*       CPUSLEFT=LENGTH(CSDCPUAL);  /* SAVE THE NUMBER OF BITS IN THE   00883000
*                                      MASK STILL TO BE TESTED       */ 00884000
         MVC   CPUSLEFT(2),@CH00045                                0281 00885000
*       DO WHILE RETCODE=4;                                        0282 00886000
*                                                                  0282 00887000
         B     @DE00282                                            0282 00888000
@DL00282 DS    0H                                                  0283 00889000
*/********************************************************************/ 00890000
*/*                                                                  */ 00891000
*/* SEARCH THE CPU-ALIVE MASK FOR A BIT ON INDICATING AN ONLINE CPU. */ 00892000
*/* WHEN ONE IS FOUND, TEST THE TOD CLOCK STATUS BYTE IN THE PCCA FOR*/ 00893000
*/* THAT CPU TO DETERMINE IF THE CLOCK IS GOOD.                      */ 00894000
*/*                                                                  */ 00895000
*/********************************************************************/ 00896000
*                                                                  0283 00897000
*         DO REG1=CPUSLEFT TO 1 BY-1;                              0283 00898000
         LH    REG1,CPUSLEFT                                       0283 00899000
         B     @DE00283                                            0283 00900000
@DL00283 DS    0H                                                  0284 00901000
*           IF MASKHLDR//2^=0&PCCANUTD='0'B THEN                   0284 00902000
*                                                                  0284 00903000
         LR    @07,MASKHLDR                                        0284 00904000
         N     @07,@CF00096                                        0284 00905000
         LTR   @07,@07                                             0284 00906000
         BZ    @RF00284                                            0284 00907000
         L     @07,PTRPCCA(,REG12)                                 0284 00908000
         TM    PCCANUTD(@07),B'10000000'                           0284 00909000
         BNZ   @RF00284                                            0284 00910000
*/********************************************************************/ 00911000
*/*                                                                  */ 00912000
*/* IF THE CPU IS ONLINE AND ITS CLOCK IS GOOD, INITIALIZE THE TWO   */ 00913000
*/* TOD CLOCK WORKAREA ENTRIES WITH THE THE PCCA ADDRESSES AND THE   */ 00914000
*/* CPU ADDRESSES FOR THE CPU BEING VARY'ED ONLINE, AND FOR THE      */ 00915000
*/* CPU WITH THE GOOD CLOCK.                                         */ 00916000
*/*                                                                  */ 00917000
*/********************************************************************/ 00918000
*                                                                  0285 00919000
*             DO;                                                  0285 00920000
*               REG11=PTREBEG;      /* GET PTR TO FIRST TCWA ENTRY   */ 00921000
         L     REG11,PTREBEG                                       0286 00922000
*               TCWAPCCA=PTRPCCA;                                  0287 00923000
         ST    @07,TCWAPCCA(,REG11)                                0287 00924000
*               TCWAIADD=PCCACPUA;                                 0288 00925000
         MVC   TCWAIADD(2,REG11),PCCACPUA(@07)                     0288 00926000
*               REG11=REG11+LENGTH(TCENTRY);/* POINT TO 2ND TCWA   0289 00927000
*                                      ENTRY                         */ 00928000
         AH    REG11,@CH00045                                      0289 00929000
*               TCWAPCCA=ADDR(NEWPCCA);                            0290 00930000
         L     @07,@PC00001                                        0290 00931000
         ST    @07,TCWAPCCA(,REG11)                                0290 00932000
*               TCWAIADD=ADDR(NEWPCCA)->PCCACPUA;                  0291 00933000
*                                                                  0291 00934000
         MVC   TCWAIADD(2,REG11),PCCACPUA(@07)                     0291 00935000
*/********************************************************************/ 00936000
*/*                                                                  */ 00937000
*/* SET THE RETURN CODE AND LOOP CONTROL TO 0 SO THAT AN EXIT FROM   */ 00938000
*/* THE LOOP WILL OCCUR. THEN,                                       */ 00939000
*/* DECREMENT AND SAVE THE INDEX THROUGH THE CPU-ALIVE MASK SO       */ 00940000
*/* THAT IF THE APPARENTLY GOOD CLOCK TURNS OUT NOT TO BE SET, THE   */ 00941000
*/* THE SEARCH THROUGH THE MASK WILL BEGIN WITH THE NEXT BIT.        */ 00942000
*/*                                                                  */ 00943000
*/********************************************************************/ 00944000
*                                                                  0292 00945000
*               CPUSLEFT=REG1-1;                                   0292 00946000
         LR    @07,REG1                                            0292 00947000
         BCTR  @07,0                                               0292 00948000
         STH   @07,CPUSLEFT                                        0292 00949000
*               REG1=0;                                            0293 00950000
         SLR   REG1,REG1                                           0293 00951000
*               RETCODE=0;                                         0294 00952000
         SLR   RETCODE,RETCODE                                     0294 00953000
*             END;                                                 0295 00954000
*           MASKHLDR=MASKHLDR/2;    /* GET NEXT BIT TO TEST          */ 00955000
@RF00284 SRL   MASKHLDR,1                                          0296 00956000
*           REG12=REG12-LENGTH(PCCAT00P);/* POINT TO NEXT PCCAVT   0297 00957000
*                                      ENTRY                         */ 00958000
         SH    REG12,@CH00108                                      0297 00959000
*         END;                                                     0298 00960000
         BCTR  REG1,0                                              0298 00961000
@DE00283 LTR   REG1,REG1                                           0298 00962000
         BP    @DL00283                                            0298 00963000
*                                                                  0299 00964000
*/********************************************************************/ 00965000
*/*                                                                  */ 00966000
*/* TEST FOR GOOD TOD CLOCK FOUND.                                   */ 00967000
*/*                                                                  */ 00968000
*/********************************************************************/ 00969000
*                                                                  0299 00970000
*         IF RETCODE=0 THEN                                        0299 00971000
*                                                                  0299 00972000
         LTR   RETCODE,RETCODE                                     0299 00973000
         BNZ   @RF00299                                            0299 00974000
*/********************************************************************/ 00975000
*/*                                                                  */ 00976000
*/* IF IT IS 0, CALL THE SYNCHRONIZATION TESTING ROUTINE.            */ 00977000
*/*                                                                  */ 00978000
*/********************************************************************/ 00979000
*                                                                  0300 00980000
*           DO;                                                    0300 00981000
*             CALL IEAVRTST;                                       0301 00982000
*                                                                  0301 00983000
         BAL   @14,IEAVRTST                                        0301 00984000
*/********************************************************************/ 00985000
*/*                                                                  */ 00986000
*/* TEST THE RETURN CODE FROM THE SYNCHRONIZATION TESTING ROUTINE    */ 00987000
*/* FOR A VALUE OF 0 OR 4 INDICATING A SET OR NOT SET SUBJECT CLOCK, */ 00988000
*/* OR A RETURN CODE OF 20 INDICATING A FAILURE TO SIGNAL SOME       */ 00989000
*/* PROCESSOR OTHER THAN THE SUBJECT.                        @ZA15781*/ 00990000
*/*                                                                  */ 00991000
*/********************************************************************/ 00992000
*                                                                  0302 00993000
*             IF RETCODE^=0&RETCODE^=4&RETCODE^=20 THEN/*    @ZA15781*/ 00994000
         LTR   RETCODE,RETCODE                                     0302 00995000
         BZ    @RF00302                                            0302 00996000
         CH    RETCODE,@CH00108                                    0302 00997000
         BE    @RF00302                                            0302 00998000
         CH    RETCODE,@CH00507                                    0302 00999000
         BE    @RF00302                                            0302 01000000
*               DO;                                                0303 01001000
*                                                                  0303 01002000
*/********************************************************************/ 01003000
*/*                                                                  */ 01004000
*/* IF THE RETURN CODE ISN'T 0 OR 4, SEE IF IT IS 16, INDICATING THAT*/ 01005000
*/* THE TESTING COULD NOT BE PERFORMED WITHIN 2**20 MICROSECONDS.    */ 01006000
*/*                                                                  */ 01007000
*/********************************************************************/ 01008000
*                                                                  0304 01009000
*                 IF RETCODE=16 THEN                               0304 01010000
*                                                                  0304 01011000
         CH    RETCODE,@CH00045                                    0304 01012000
         BNE   @RF00304                                            0304 01013000
*/********************************************************************/ 01014000
*/*                                                                  */ 01015000
*/* IF IT IS 16, INDICATE THAT THE NEW CPU REQUIRES SYNCHRONIZING.   */ 01016000
*/*                                                                  */ 01017000
*/********************************************************************/ 01018000
*                                                                  0305 01019000
*                   ADDR(NEWPCCA)->PCCASYNC='1'B;                  0305 01020000
*                                                                  0305 01021000
         L     @07,@PC00001                                        0305 01022000
         OI    PCCASYNC(@07),B'01000000'                           0305 01023000
*/********************************************************************/ 01024000
*/*                                                                  */ 01025000
*/* IF IT WAS 8, 12, OR 16, CALL THE SYNCHRONIZING ROUTINE TO PERFORM*/ 01026000
*/* THE SYNCHING OPERATION, AND THEN CALL THE TESTING ROUTINE TO     */ 01027000
*/* TEST FOR SUCCESSFUL PERFORMANCE.                                 */ 01028000
*/*                                                                  */ 01029000
*/********************************************************************/ 01030000
*                                                                  0306 01031000
*                 CALL IEAVRSYN;                                   0306 01032000
@RF00304 BAL   @14,IEAVRSYN                                        0306 01033000
*                 CALL IEAVRTST;                                   0307 01034000
         BAL   @14,IEAVRTST                                        0307 01035000
*               END;                                               0308 01036000
*           END;                                                   0309 01037000
*         ELSE                                                     0310 01038000
*                                                                  0310 01039000
*/********************************************************************/ 01040000
*/*                                                                  */ 01041000
*/* IF NO GOOD CLOCK WAS FOUND TO WHICH TO SYNCHRONIZE THE NEW CLOCK,*/ 01042000
*/* SET BAIN TO 0 TO DISALLOW EXTERNAL SET COMMANDS, AND THEN DEQUEUE*/ 01043000
*/* THE MIDNIGHT AND JOBSTEP TIMING TQES.                            */ 01044000
*/*                                                                  */ 01045000
*/********************************************************************/ 01046000
*                                                                  0310 01047000
*           DO;                                                    0310 01048000
         B     @RC00299                                            0310 01049000
@RF00299 DS    0H                                                  0311 01050000
*             BAIN='0'B;                                           0311 01051000
         L     @07,CVTMSER(,LCVTPTR)                               0311 01052000
         NI    BAIN(@07),B'01111111'                               0311 01053000
*             REG1=ADDR(TPCMNTQE);  /* GET ADDR OF MIDNIGHT TQE      */ 01054000
         L     REG1,TPCPTR(,LCVTPTR)                               0312 01055000
         LA    REG1,TPCMNTQE(,REG1)                                0312 01056000
*             REG15=ADDR(DEQTQE);   /* GET ADDR OF DEQ ROUTINE       */ 01057000
         L     REG15,CVTQTD00(,LCVTPTR)                            0313 01058000
*             GENERATE CODE REFS(REG15,PSALITA) SETS(REG2);        0314 01059000
         SETLOCK OBTAIN,TYPE=DISP,MODE=UNCOND,                        **01060000
               RELATED=('REQUIRED BY TQE DEQ',(IEAVRTOD,(NOLABEL)))     01061000
         BALR  REG2,REG15     DEQUEUE THE MIDNIGHT TQE                  01062000
*             REG1->TQEVALLH=0;     /* SET TQEVAL OF MIDNIGHT = 0...    01063000
*                                                            @YM06393*/ 01064000
         SLR   @07,@07                                             0315 01065000
         ST    @07,TQEVALLH(,REG1)                                 0315 01066000
*             REG1->TQEVALRH=0;     /* ...TO NOP TIME SVC    @YM06393*/ 01067000
         ST    @07,TQEVALRH(,REG1)                                 0316 01068000
*             LCVTPTR=CVTPTR;       /* RESTORE CVT ADDRESSABILITY    */ 01069000
         L     LCVTPTR,CVTPTR                                      0317 01070000
*             REG1=ADDR(TPCLMTQE);  /* GET ADDR OF JOB STEP TIMING 0318 01071000
*                                      TQE                           */ 01072000
         L     REG1,TPCPTR(,LCVTPTR)                               0318 01073000
         LA    REG1,TPCLMTQE(,REG1)                                0318 01074000
*             REG15=ADDR(DEQTQE);   /* GET ADDR OF DEQ ROUTINE       */ 01075000
         L     REG15,CVTQTD00(,LCVTPTR)                            0319 01076000
*             GENERATE CODE REFS(REG15,PSALITA) SETS(REG2);        0320 01077000
         BALR  REG2,REG15     DEQUEUE THE JOB STEP TIMING TQE           01078000
         SETLOCK RELEASE,TYPE=DISP,                                   **01079000
               RELATED=('REQUIRED BY TQE DEQ',(IEAVRTOD,(NOLABEL)))     01080000
*             LCVTPTR=CVTPTR;       /* RESTORE CVT ADDRESSABILITY    */ 01081000
         L     LCVTPTR,CVTPTR                                      0321 01082000
*             REG13=R13SAV;         /* RESTORE SAVE AREA POINTER     */ 01083000
         L     REG13,R13SAV                                        0322 01084000
*/********************************************************************/ 01085000
*/*                                                                  */ 01086000
*/* INITIALIZE THE FIRST TOD CLOCK WORKAREA ENTRY FOR THE NEW CPU,   */ 01087000
*/* SET THE COUNT OF CPU'S TO 1, AND CALL THE TESTING ROUTINE TO     */ 01088000
*/* TEST THE STATUS OF THE NEW CLOCK BY ITSELF.                      */ 01089000
*/*                                                                  */ 01090000
*/********************************************************************/ 01091000
*                                                                  0323 01092000
*             REG11=PTREBEG;        /* GET PTR TO FIRST ENTRY        */ 01093000
         L     REG11,PTREBEG                                       0323 01094000
*             TCWAPCCA=ADDR(NEWPCCA);/* FILL IN PCCA ADDRESS         */ 01095000
         L     @07,@PC00001                                        0324 01096000
         ST    @07,TCWAPCCA(,REG11)                                0324 01097000
*             TCWAIADD=ADDR(NEWPCCA)->PCCACPUA;/* FILL IN CPU ADDRESS*/ 01098000
         MVC   TCWAIADD(2,REG11),PCCACPUA(@07)                     0325 01099000
*             TCCPUCNT=1;                                          0326 01100000
         MVC   TCCPUCNT(2,TCWAPTR),@CH00096                        0326 01101000
*             CALL IEAVRTST;        /* CALL SYNCHRONIZATION TESTING     01102000
*                                      ROUTINE                       */ 01103000
         BAL   @14,IEAVRTST                                        0327 01104000
*/********************************************************************/ 01105000
*/*                                                                  */ 01106000
*/* TEST FOR A RETURN CODE OF 0 INDICATING THAT THE CLOCK IS SET.    */ 01107000
*/*                                                                  */ 01108000
*/********************************************************************/ 01109000
*                                                                  0328 01110000
*             IF RETCODE=0 THEN                                    0328 01111000
*                                                                  0328 01112000
         LTR   RETCODE,RETCODE                                     0328 01113000
         BNZ   @RF00328                                            0328 01114000
*/********************************************************************/ 01115000
*/*                                                                  */ 01116000
*/* IF THE RETURN CODE IS 0, INDICATE THAT MESSAGE IEA888A SHOULD    */ 01117000
*/* BE ISSUED.                                                       */ 01118000
*/*                                                                  */ 01119000
*/********************************************************************/ 01120000
*                                                                  0329 01121000
*               TCGXXX='1'B;                                       0329 01122000
         OI    TCGXXX(TCWAPTR),B'10000000'                         0329 01123000
*             ELSE                                                 0330 01124000
*                                                                  0330 01125000
*/********************************************************************/ 01126000
*/*                                                                  */ 01127000
*/* IF THE RETURN CODE IS NOT 0, INDICATE THAT MESSAGE IEA886A       */ 01128000
*/* SHOULD BE ISSUED.                                                */ 01129000
*/*                                                                  */ 01130000
*/********************************************************************/ 01131000
*                                                                  0330 01132000
*               TCGYYY='1'B;                                       0330 01133000
*                                                                  0330 01134000
         B     @RC00328                                            0330 01135000
@RF00328 OI    TCGYYY(TCWAPTR),B'01000000'                         0330 01136000
*/********************************************************************/ 01137000
*/*                                                                  */ 01138000
*/* CALL THE COMMUNICATIONS ROUTINE TO ISSUE THE INDICATED MESSAGE.  */ 01139000
*/*                                                                  */ 01140000
*/********************************************************************/ 01141000
*                                                                  0331 01142000
*             CALL IEAVRCOM;                                       0331 01143000
*                                                                  0331 01144000
@RC00328 BAL   @14,IEAVRCOM                                        0331 01145000
*/********************************************************************/ 01146000
*/*                                                                  */ 01147000
*/* CALL THE SYNCHRONIZATION TESTING ROUTINE TO ENSURE THAT THE CLOCK*/ 01148000
*/* IS STILL SET, SINCE THE OPERATOR MAY HAVE CHANGED IT.  (NOTE:    */ 01149000
*/* THE RETURN CODE FROM THIS TEST CAN ONLY BE 0 OR 4.)              */ 01150000
*/*                                                                  */ 01151000
*/********************************************************************/ 01152000
*                                                                  0332 01153000
*             CALL IEAVRTST;                                       0332 01154000
*                                                                  0332 01155000
         BAL   @14,IEAVRTST                                        0332 01156000
*/********************************************************************/ 01157000
*/*                                                                  */ 01158000
*/* SEE IF THE RETURN CODE IS NON-0, AND IF IT IS SET IT TO 16.      */ 01159000
*/* (NOTE: THE ONLY POSSIBLE NON-0 RETURN CODE AT THIS POINT IS 4,   */ 01160000
*/* WHICH WILL CAUSE RE-CHECKING FOR ANOTHER ONLINE CPU HAVING A     */ 01161000
*/* CLOCK THAT MAY BE SYNCHRONIZED TO.  THIS MUST BE AVOIDED BECAUSE */ 01162000
*/* THE PRESENT PATH WAS TAKEN WHEN IT WAS FOUND THAT THERE WERE     */ 01163000
*/* NO MORE ONLINE CPU'S.)                                           */ 01164000
*/*                                                                  */ 01165000
*/********************************************************************/ 01166000
*                                                                  0333 01167000
*             IF RETCODE^=0 THEN                                   0333 01168000
         LTR   RETCODE,RETCODE                                     0333 01169000
         BZ    @RF00333                                            0333 01170000
*               RETCODE=16;                                        0334 01171000
         LA    RETCODE,16                                          0334 01172000
*             ELSE                                                 0335 01173000
*                                                                  0335 01174000
*/********************************************************************/ 01175000
*/*                                                                  */ 01176000
*/* IF THE RETURN CODE IS 0, THE NEW CLOCK IS ALL RIGHT, SO TURN ON  */ 01177000
*/* THE FLAG WHICH INDICATES THAT THE MIDNIGHT AND JOB STEP TIMING   */ 01178000
*/* TQES SHOULD BE RE-ENQUEUED, AND THAT THE SRM SHOULD BE NOTIFIED. */ 01179000
*/*                                                                  */ 01180000
*/********************************************************************/ 01181000
*                                                                  0335 01182000
*               TCGTQE='1'B;                                       0335 01183000
         B     @RC00333                                            0335 01184000
@RF00333 OI    TCGTQE(TCWAPTR),B'00000001'                         0335 01185000
*           END;                                                   0336 01186000
@RC00333 DS    0H                                                  0337 01187000
*       END;                                                       0337 01188000
@RC00299 DS    0H                                                  0337 01189000
@DE00282 CH    RETCODE,@CH00108                                    0337 01190000
         BE    @DL00282                                            0337 01191000
*                                                                  0338 01192000
*/********************************************************************/ 01193000
*/*                                                                  */ 01194000
*/* IF AN APPARENTLY GOOD CLOCK WAS FOUND, SEE IF THE TESTING ROUTINE*/ 01195000
*/* SENT BACK A RETURN CODE OF 8, INDICATING THAT A SYNC CHECK OC-   */ 01196000
*/* CURED.                                                           */ 01197000
*/*                                                                  */ 01198000
*/********************************************************************/ 01199000
*                                                                  0338 01200000
*       IF RETCODE=8 THEN                                          0338 01201000
*                                                                  0338 01202000
         CH    RETCODE,@CH00038                                    0338 01203000
         BNE   @RF00338                                            0338 01204000
*/********************************************************************/ 01205000
*/*                                                                  */ 01206000
*/* IF THAT IS THE CASE, SEARCH ALL ONLINE CPU'S FOR ONE WHICH IS NOT*/ 01207000
*/* THE NEW CPU, AND WHOSE CLOCK IS MARKED AS NOT USEABLE.           */ 01208000
*/*                                                                  */ 01209000
*/********************************************************************/ 01210000
*                                                                  0339 01211000
*         DO;                                                      0339 01212000
*           MASKHLDR=CSDCPUAL;      /* GET THE MASK OF ALIVE CPU'S   */ 01213000
         L     @07,CVTCSD(,LCVTPTR)                                0340 01214000
         SLR   MASKHLDR,MASKHLDR                                   0340 01215000
         ICM   MASKHLDR,3,CSDCPUAL(@07)                            0340 01216000
*           REG12=CVTPCCAT+LENGTH(PCCAVT)-LENGTH(PCCAT00P);/* GET PTR   01217000
*                                      TO LAST PCCAVT ENTRY          */ 01218000
         L     REG12,CVTPCCAT(,LCVTPTR)                            0341 01219000
         SH    REG12,@CH02779                                      0341 01220000
*           DO REG1=LENGTH(CSDCPUAL) TO 1 BY-1;                    0342 01221000
         LA    REG1,16                                             0342 01222000
@DL00342 DS    0H                                                  0343 01223000
*             IF MASKHLDR//2^=0&PTRPCCA^=ADDR(NEWPCCA)&PCCANUTD='1'B    01224000
*               THEN                                               0343 01225000
*                                                                  0343 01226000
         LR    @07,MASKHLDR                                        0343 01227000
         N     @07,@CF00096                                        0343 01228000
         LTR   @07,@07                                             0343 01229000
         BZ    @RF00343                                            0343 01230000
         L     @07,PTRPCCA(,REG12)                                 0343 01231000
         L     @06,@PC00001                                        0343 01232000
         CR    @07,@06                                             0343 01233000
         BE    @RF00343                                            0343 01234000
         TM    PCCANUTD(@07),B'10000000'                           0343 01235000
         BNO   @RF00343                                            0343 01236000
*/********************************************************************/ 01237000
*/*                                                                  */ 01238000
*/* IF ONE IS FOUND, ASSUME THAT IT CAUSED THE SYNC CHECK.  ZERO THE */ 01239000
*/* LOOP CONTROL TO EXIT FROM THE LOOP, AND SET THE RETURN CODE FOR  */ 01240000
*/* THE CALLER TO 0 TO INDICATE SUCCESS.                             */ 01241000
*/*                                                                  */ 01242000
*/********************************************************************/ 01243000
*                                                                  0344 01244000
*               DO;                                                0344 01245000
*                 REG1=0;                                          0345 01246000
         SLR   REG1,REG1                                           0345 01247000
*                 RETCODE=0;                                       0346 01248000
         SLR   RETCODE,RETCODE                                     0346 01249000
*               END;                                               0347 01250000
*             MASKHLDR=MASKHLDR/2;  /* GET NEXT BIT TO TEST          */ 01251000
@RF00343 SRL   MASKHLDR,1                                          0348 01252000
*             REG12=REG12-LENGTH(PCCAT00P);/* POINT TO NEXT PCCAVT 0349 01253000
*                                      ENTRY                         */ 01254000
         SH    REG12,@CH00108                                      0349 01255000
*           END;                                                   0350 01256000
         BCTR  REG1,0                                              0350 01257000
         LTR   REG1,REG1                                           0350 01258000
         BP    @DL00342                                            0350 01259000
*         END;                                                     0351 01260000
*                                                                  0351 01261000
*/********************************************************************/ 01262000
*/*                                                                  */ 01263000
*/* SAVE THE RETURN CODE TO PASS BACK TO THE CALLER.  THEN GET THE   */ 01264000
*/* ADDRESS OF THE ESTAE PARAMETER LIST FOR COMPATABILITY WITH AN    */ 01265000
*/* ENTRY FROM THE ESTAE EXIT AT SSCRETRY.                           */ 01266000
*/*                                                                  */ 01267000
*/********************************************************************/ 01268000
*                                                                  0352 01269000
*       RCSAVE=RETCODE;                                            0352 01270000
@RF00338 ST    RETCODE,RCSAVE                                      0352 01271000
*       REG1=ADDR(SSCRPARM);                                       0353 01272000
*                                                                  0353 01273000
         LA    REG1,SSCRPARM                                       0353 01274000
*/********************************************************************/ 01275000
*/*                                                                  */ 01276000
*/* RESTORE BASE REGS, DATA REG, AND CVT POINTER FOR POSSIBLE ENTRY  */ 01277000
*/* FROM THE ESTAE EXIT.                                             */ 01278000
*/*                                                                  */ 01279000
*/********************************************************************/ 01280000
*                                                                  0354 01281000
*SSCRETRY:                                                         0354 01282000
*       GEN CODE REFS(REG1) SETS(REG8,REG9,REG10)                  0354 01283000
*           (LM    REG8,REG10,0(REG1));                            0354 01284000
SSCRETRY LM    REG8,REG10,0(REG1)                                       01285000
*       LCVTPTR=CVTPTR;                                            0355 01286000
*                                                                  0355 01287000
         L     LCVTPTR,CVTPTR                                      0355 01288000
*/********************************************************************/ 01289000
*/*                                                                  */ 01290000
*/* TEST THE CONTENTS OF THE RETURN CODE FOR 0.  IT WILL BE 0 IF     */ 01291000
*/* THE NEW CLOCK WAS SUCCESSFULLY SET OR SYNCHRONIZED, AND NON 0 IF */ 01292000
*/* IT WAS NOT, OR IF ENTRY HERE IS FROM THE ESTAE EXIT.             */ 01293000
*/*                                                                  */ 01294000
*/********************************************************************/ 01295000
*                                                                  0356 01296000
*       IF RCSAVE^=0 THEN                                          0356 01297000
*                                                                  0356 01298000
         SLR   @07,@07                                             0356 01299000
         C     @07,RCSAVE                                          0356 01300000
         BE    @RF00356                                            0356 01301000
*/********************************************************************/ 01302000
*/*                                                                  */ 01303000
*/* IF THE RETURN CODE IS NOT 0, SEE IF THE CALLER WAS THE VARY      */ 01304000
*/* COMMAND PROCESSOR.                                               */ 01305000
*/*                                                                  */ 01306000
*/********************************************************************/ 01307000
*                                                                  0357 01308000
*         DO;                                                      0357 01309000
*           IF CALLERID=0 THEN                                     0358 01310000
*                                                                  0358 01311000
         CH    @07,CALLERID                                        0358 01312000
         BNE   @RF00358                                            0358 01313000
*/********************************************************************/ 01314000
*/*                                                                  */ 01315000
*/* IF THE CALLER IS VARY, INDICATE THAT THE VARY PROCESS SHOULD BE  */ 01316000
*/* STOPPED, AND RELEASE THE NEW CPU FROM ITS SPIN.                  */ 01317000
*/*                                                                  */ 01318000
*/********************************************************************/ 01319000
*                                                                  0359 01320000
*             DO;                                                  0359 01321000
*               ADDR(NEWPCCA)->PCCAVKIL='1'B;                      0360 01322000
         L     @07,@PC00001                                        0360 01323000
         OI    PCCAVKIL(@07),B'00100000'                           0360 01324000
*               ADDR(NEWPCCA)->PCCAPSAV->PSALCCAV->LCCATIMR='0'B;  0361 01325000
         L     @07,PCCAPSAV(,@07)                                  0361 01326000
         L     @07,PSALCCAV(,@07)                                  0361 01327000
         NI    LCCATIMR(@07),B'11101111'                           0361 01328000
*             END;                                                 0362 01329000
*                                                                  0362 01330000
*/********************************************************************/ 01331000
*/*                                                                  */ 01332000
*/* IF THE CALLER IS HARDWARE RECOVERY, SEE IF THE MIDNIGHT AND      */ 01333000
*/* JOBSTEP TIMING TQE'S WERE DEQUEUED BECAUSE THERE WERE NO GOOD    */ 01334000
*/* TOD CLOCKS IN THE CONFIGURATION.  IF SO, SET THE VAULE OF THE    */ 01335000
*/* MIDNIGHT TQEVAL FIELD TO 1.048576 SECONDS SO THAT THE TIME SVC   */ 01336000
*/* ROUTINE WILL NOT NOP.                                            */ 01337000
*/*                                                                  */ 01338000
*/********************************************************************/ 01339000
*                                                                  0363 01340000
*           ELSE                    /*                       @YM06393*/ 01341000
*             DO;                   /*                       @YM06393*/ 01342000
         B     @RC00358                                            0363 01343000
@RF00358 DS    0H                                                  0364 01344000
*               IF TCGTQE='1'B THEN /* IF TQE'S DEQUEUED...  @YM06393*/ 01345000
         TM    TCGTQE(TCWAPTR),B'00000001'                         0364 01346000
         BNO   @RF00364                                            0364 01347000
*                 MNIGHTLH=1;       /* ...SET MIDNIGHT TQEVAL TO   0365 01348000
*                                      NON-0                 @YM06393*/ 01349000
         L     @07,TPCPTR(,LCVTPTR)                                0365 01350000
         MVC   MNIGHTLH(4,@07),@CF00096                            0365 01351000
*             END;                  /*                       @YM06393*/ 01352000
*         END;                                                     0367 01353000
*       ELSE                                                       0368 01354000
*                                                                  0368 01355000
*/********************************************************************/ 01356000
*/*                                                                  */ 01357000
*/* IF THE RETURN CODE WAS 0, SEE IF THE JOB STEP TIMING AND MIDNIGHT*/ 01358000
*/* TQES NEED TO BE RE-ENQUEUED, AND THE SRM NOTIFIED THAT THERE IS  */ 01359000
*/* ONCE AGAIN A GOOD TOD CLOCK AND CLOCK COMPARATOR. IF SO, CALL THE*/ 01360000
*/* ROUTINE TO PERFORM THESE ACTIONS.                                */ 01361000
*/*                                                                  */ 01362000
*/********************************************************************/ 01363000
*                                                                  0368 01364000
*         DO;                                                      0368 01365000
         B     @RC00356                                            0368 01366000
@RF00356 DS    0H                                                  0369 01367000
*           IF TCGTQE='1'B THEN                                    0369 01368000
         TM    TCGTQE(TCWAPTR),B'00000001'                         0369 01369000
         BNO   @RF00369                                            0369 01370000
*             CALL TQEINIT;                                        0370 01371000
*                                                                  0370 01372000
         LA    @15,TQEINIT                                         0370 01373000
         BALR  @14,@15                                             0370 01374000
*/********************************************************************/ 01375000
*/*                                                                  */ 01376000
*/* GET THE DISPATCHER LOCK FOR SETTING THE TPCABND FLAG, AND        */ 01377000
*/* INVOKING THE SET CC ROUTINE.                                     */ 01378000
*/*                                                                  */ 01379000
*/********************************************************************/ 01380000
*                                                                  0371 01381000
*           GENERATE CODE REFS(PSALITA);                           0371 01382000
*                                                                  0371 01383000
@RF00369 DS    0H                                                  0371 01384000
*                                    /*                                 01385000
         SETLOCK  OBTAIN,TYPE=DISP,MODE=UNCOND,                       **01386000
               RELATED=('REAL TQE QUEUE',(IEAVRTOD,(NOLABEL)))  */      01387000
*/********************************************************************/ 01388000
*/*                                                                  */ 01389000
*/* SEE IF THE CALLER WAS VARY.                                      */ 01390000
*/*                                                                  */ 01391000
*/********************************************************************/ 01392000
*                                                                  0372 01393000
*           IF CALLERID=0 THEN                                     0372 01394000
*                                                                  0372 01395000
         ICM   @07,3,CALLERID                                      0372 01396000
         BNZ   @RF00372                                            0372 01397000
*/********************************************************************/ 01398000
*/*                                                                  */ 01399000
*/* IF THE CALLER IS VARY, INITIALIZE THE TIMER STATUS BYTES IN THE  */ 01400000
*/* PCCA FOR THE NEW CPU.                                            */ 01401000
*/*                                                                  */ 01402000
*/********************************************************************/ 01403000
*                                                                  0373 01404000
*             DO;                                                  0373 01405000
*               ADDR(NEWPCCA)->PCCATMST=TMSTINIT;                  0374 01406000
*                                                                  0374 01407000
         L     @07,@PC00001                                        0374 01408000
         MVC   PCCATMST(4,@07),TMSTINIT                            0374 01409000
*/********************************************************************/ 01410000
*/*                                                                  */ 01411000
*/* ADD 1 TO THE COUNT OF GOOD TOD CLOCKS IN THE CSD.                */ 01412000
*/*                                                                  */ 01413000
*/********************************************************************/ 01414000
*                                                                  0375 01415000
*               CURRENT=CSDGDTOD;                                  0375 01416000
         L     @07,CVTCSD(,LCVTPTR)                                0375 01417000
         L     CURRENT,CSDGDTOD(,@07)                              0375 01418000
*ADD1:                                                             0376 01419000
*               NEW=CURRENT+1;      /* SET UP FOR COMPARE AND SWAP   */ 01420000
ADD1     LA    NEW,1                                               0376 01421000
         ALR   NEW,CURRENT                                         0376 01422000
*               CS(CURRENT,NEW,CSDGDTOD);                          0377 01423000
         L     @07,CVTCSD(,LCVTPTR)                                0377 01424000
         CS    CURRENT,@01,CSDGDTOD(@07)                           0377 01425000
*               BC(7,ADD1);                                        0378 01426000
*                                                                  0378 01427000
         BC    7,ADD1                                              0378 01428000
*/********************************************************************/ 01429000
*/*                                                                  */ 01430000
*/* ADD 1 TO THE COUNT OF GOOD CLOCK COMPARATORS IN THE CSD.         */ 01431000
*/*                                                                  */ 01432000
*/********************************************************************/ 01433000
*                                                                  0379 01434000
*               CURRENT=CSDGDCC;                                   0379 01435000
         L     @07,CVTCSD(,LCVTPTR)                                0379 01436000
         L     CURRENT,CSDGDCC(,@07)                               0379 01437000
*ADD7:                                                             0380 01438000
*               NEW=CURRENT+1;      /* SET UP FOR COMPARE AND SWAP   */ 01439000
ADD7     LA    NEW,1                                               0380 01440000
         ALR   NEW,CURRENT                                         0380 01441000
*               CS(CURRENT,NEW,CSDGDCC);                           0381 01442000
         L     @07,CVTCSD(,LCVTPTR)                                0381 01443000
         CS    CURRENT,@01,CSDGDCC(@07)                            0381 01444000
*               BC(7,ADD7);                                        0382 01445000
*                                                                  0382 01446000
         BC    7,ADD7                                              0382 01447000
*/********************************************************************/ 01448000
*/*                                                                  */ 01449000
*/* ADD 1 TO THE COUNT OF GOOD CPU TIMERS IN THE CSD.                */ 01450000
*/*                                                                  */ 01451000
*/********************************************************************/ 01452000
*                                                                  0383 01453000
*               CURRENT=CSDGDINT;                                  0383 01454000
         L     @07,CVTCSD(,LCVTPTR)                                0383 01455000
         L     CURRENT,CSDGDINT(,@07)                              0383 01456000
*ADD8:                                                             0384 01457000
*               NEW=CURRENT+1;      /* SET UP FOR COMPARE AND SWAP   */ 01458000
ADD8     LA    NEW,1                                               0384 01459000
         ALR   NEW,CURRENT                                         0384 01460000
*               CS(CURRENT,NEW,CSDGDINT);                          0385 01461000
         L     @07,CVTCSD(,LCVTPTR)                                0385 01462000
         CS    CURRENT,@01,CSDGDINT(@07)                           0385 01463000
*               BC(7,ADD8);                                        0386 01464000
*                                                                  0386 01465000
         BC    7,ADD8                                              0386 01466000
*/********************************************************************/ 01467000
*/*                                                                  */ 01468000
*/* INDICATE THAT TASKS WITH REAL TQE'S NO LONGER NEED BE ABEND'ED   */ 01469000
*/* SINCE THERE IS NOW A GOOD TOD CLOCK AND CLOCK COMPARATOR IN THE  */ 01470000
*/* SYSTEM.  (NOTE: UNLIKE RELEASE 2, THE NEW CPU IS NOT RELEASED    */ 01471000
*/* FROM ITS SPIN WHEN THE SETTING/SYNCHRONIZING PROCEDURE IS SUC-   */ 01472000
*/* CESSFUL.  THE RELEASE WILL BE PERFORMED BY THE VARY CPU COMMAND  */ 01473000
*/* PROCESSOR.)                                                      */ 01474000
*/*                                                                  */ 01475000
*/********************************************************************/ 01476000
*/* D207820                                                  @Y30CQYA*/ 01477000
*                                                                  0387 01478000
*               TPCABND='0'B;                                      0387 01479000
         L     @07,TPCPTR(,LCVTPTR)                                0387 01480000
         NI    TPCABND(@07),B'01111111'                            0387 01481000
*             END;                                                 0388 01482000
*                                                                  0388 01483000
*/********************************************************************/ 01484000
*/*                                                                  */ 01485000
*/* MAKE SURE THAT THE QUEUE OF REAL TIME TQE'S IS KEPT ALIVE.       */ 01486000
*/*                                                                  */ 01487000
*/********************************************************************/ 01488000
*                                                                  0389 01489000
*           REG12=TPCCKQ;                                          0389 01490000
@RF00372 L     @07,TPCPTR(,LCVTPTR)                                0389 01491000
         L     REG12,TPCCKQ(,@07)                                  0389 01492000
*           GENERATE CODE REFS(REG12) SETS(REG2)(BALR  REG2,REG12);     01493000
         BALR  REG2,REG12                                               01494000
*           LCVTPTR=CVTPTR;         /* RESTORE THE CVT BASE          */ 01495000
         L     LCVTPTR,CVTPTR                                      0391 01496000
*/********************************************************************/ 01497000
*/*                                                                  */ 01498000
*/* RELEASE THE DISPATCHER LOCK.                                     */ 01499000
*/*                                                                  */ 01500000
*/********************************************************************/ 01501000
*                                                                  0392 01502000
*           GENERATE CODE REFS(PSALITA);                           0392 01503000
*                                   /*                                  01504000
         SETLOCK RELEASE,TYPE=DISP,                                   **01505000
               RELATED=('REAL TQE QUEUE',(IEAVRTOD,(NOLABEL)))  */      01506000
*         END;                                                     0393 01507000
*                                                                  0394 01508000
*/********************************************************************/ 01509000
*/*                                                                  */ 01510000
*/* ENSURE THAT EXTERNAL SET COMMANDS ARE NOW ALLOWED.               */ 01511000
*/*                                                                  */ 01512000
*/********************************************************************/ 01513000
*                                                                  0394 01514000
*       BAIN='1'B;                                                 0394 01515000
*                                                                  0394 01516000
@RC00356 L     @07,CVTMSER(,LCVTPTR)                               0394 01517000
         OI    BAIN(@07),B'10000000'                               0394 01518000
*/********************************************************************/ 01519000
*/*                                                                  */ 01520000
*/* UNCONDITIONALLY FREE THE TIME OF DAY CLOCK WORKAREA.             */ 01521000
*/*                                                                  */ 01522000
*/********************************************************************/ 01523000
*                                                                  0395 01524000
*       REG0=LENGTH(TCWA)+(2*LENGTH(TCENTRY));/* GET LENGTH OF TCWA  */ 01525000
         LA    REG0,144                                            0395 01526000
*       REG1=TCWAPTR;               /* GET ADDRESS OF TCWA           */ 01527000
         LR    REG1,TCWAPTR                                        0396 01528000
*       GENERATE CODE                                              0397 01529000
*           (FREEMAIN RU,LV=(0),A=(1),SP=245       FREE WORKAREA); 0397 01530000
*                                                                  0397 01531000
         FREEMAIN RU,LV=(0),A=(1),SP=245       FREE WORKAREA            01532000
*/********************************************************************/ 01533000
*/*                                                                  */ 01534000
*/* FREE THE PAGE WITH THE MODULE AND ZERO THE POINTER IN THE TPC TO */ 01535000
*/* THE TOD CLOCK WORKAREA.                                          */ 01536000
*/*                                                                  */ 01537000
*/********************************************************************/ 01538000
*                                                                  0398 01539000
*       REG1=ADDR(BEGTOD);          /* GET POINTER TO START OF MODULE*/ 01540000
         LA    REG1,BEGTOD                                         0398 01541000
*       REG15=ADDR(ENDTOD);         /* GET POINTER TO END OF MODULE  */ 01542000
         LA    REG15,ENDTOD                                        0399 01543000
*       GENERATE CODE(PGFREE R,A=(1),EA=(15));                     0400 01544000
         PGFREE R,A=(1),EA=(15)                                         01545000
*       TPCTCWA=0;                                                 0401 01546000
         L     @07,TPCPTR(,LCVTPTR)                                0401 01547000
         SLR   @06,@06                                             0401 01548000
         ST    @06,TPCTCWA(,@07)                                   0401 01549000
*     END;                                                         0402 01550000
*   ELSE                                                           0403 01551000
*                                                                  0403 01552000
*/********************************************************************/ 01553000
*/*                                                                  */ 01554000
*/* IF THE GETMAIN FOR THE WORKAREA WAS UNSUCCESSFUL, SAVE THE RE-   */ 01555000
*/* TURN CODE AS A FAILURE INDICATOR TO THE CALLER.                  */ 01556000
*/*                                                                  */ 01557000
*/********************************************************************/ 01558000
*                                                                  0403 01559000
*     DO;                                                          0403 01560000
         B     @RC00262                                            0403 01561000
@RF00262 DS    0H                                                  0404 01562000
*       RCSAVE=RETCODE;                                            0404 01563000
*                                                                  0404 01564000
         ST    RETCODE,RCSAVE                                      0404 01565000
*/********************************************************************/ 01566000
*/*                                                                  */ 01567000
*/* SEE IF THE CALLER IS VARY.                                       */ 01568000
*/*                                                                  */ 01569000
*/********************************************************************/ 01570000
*                                                                  0405 01571000
*       IF CALLERID=0 THEN                                         0405 01572000
*                                                                  0405 01573000
         ICM   @07,3,CALLERID                                      0405 01574000
         BNZ   @RF00405                                            0405 01575000
*/********************************************************************/ 01576000
*/*                                                                  */ 01577000
*/* IF THE CALLER IS VARY, INDICATE THAT THE PROCESS SHOULD BE       */ 01578000
*/* KILLED, AND RELEASE THE NEW CPU FROM ITS SPIN.                   */ 01579000
*/*                                                                  */ 01580000
*/********************************************************************/ 01581000
*                                                                  0406 01582000
*         DO;                                                      0406 01583000
*           ADDR(NEWPCCA)->PCCAVKIL='1'B;                          0407 01584000
         L     @07,@PC00001                                        0407 01585000
         OI    PCCAVKIL(@07),B'00100000'                           0407 01586000
*           ADDR(NEWPCCA)->PCCAPSAV->PSALCCAV->LCCATIMR='0'B;      0408 01587000
         L     @07,PCCAPSAV(,@07)                                  0408 01588000
         L     @07,PSALCCAV(,@07)                                  0408 01589000
         NI    LCCATIMR(@07),B'11101111'                           0408 01590000
*         END;                                                     0409 01591000
*     END;                                                         0410 01592000
*                                                                  0410 01593000
@RF00405 DS    0H                                                  0411 01594000
*/********************************************************************/ 01595000
*/*                                                                  */ 01596000
*/* DELETE ERROR EXIT FOR UNLOCKED CODE.                             */ 01597000
*/*                                                                  */ 01598000
*/********************************************************************/ 01599000
*                                                                  0411 01600000
*   GEN CODE(ESTAE 0);                                             0411 01601000
*                                                                  0411 01602000
@RC00262 DS    0H                                                  0411 01603000
         ESTAE 0                                                        01604000
*/********************************************************************/ 01605000
*/*                                                                  */ 01606000
*/* RESTORE THE SAVEAREA ADDRESS, AND RETURN TO THE CALLER WITH A    */ 01607000
*/* RETURN CODE IN REGISTER 15.                                      */ 01608000
*/*                                                                  */ 01609000
*/********************************************************************/ 01610000
*                                                                  0412 01611000
*   REG13=R13SAV;                                                  0412 01612000
         L     REG13,R13SAV                                        0412 01613000
*   RETURN CODE(RCSAVE);                                           0413 01614000
         L     @07,RCSAVE                                          0413 01615000
         L     @13,4(,@13)                                         0413 01616000
         L     @00,@SIZDATD                                        0413 01617000
         LR    @01,@08                                             0413 01618000
         FREEMAIN R,LV=(0),A=(1)                                        01619000
         LR    @15,@07                                             0413 01620000
         L     @14,12(,@13)                                        0413 01621000
         LM    @00,@12,20(@13)                                     0413 01622000
         BR    @14                                                 0413 01623000
*                                                                  0414 01624000
*/********************************************************************/ 01625000
*/*                                                                  */ 01626000
*/*             TQEINIT--TQE INITIALIZATION ROUTINE                  */ 01627000
*/*                                                                  */ 01628000
*/* THIS ROUTINE RECEIVES CONTROL FROM IEAVRINT AFTER THE TOD        */ 01629000
*/* CLOCK(S) HAVE BEEN INITIALIZED, AND FROM IEAVRSSC WHEN THE CLOCK */ 01630000
*/* IN THE CPU BEING VARY'ED ONLINE OR IN THE CPU WITH THE FAILING   */ 01631000
*/* CLOCK HAD TO BE SET BECAUSE THERE WAS NO OTHER CLOCK ALREADY IN  */ 01632000
*/* THE CONFIGURATION WITH WHICH TO SYNCHRONIZE IT.  THE DISPATCHER  */ 01633000
*/* LOCK IS HELD UPON ENTRY.                                         */ 01634000
*/*                                                                  */ 01635000
*/* IT CALCULATES THE INITIAL VALUES FOR THE MIDNIGHT AND JOB STEP   */ 01636000
*/* TIMING TQES AND ENQUEUES THEM, AND THEN NOTIFIES THE SRM.        */ 01637000
*/*                                                                  */ 01638000
*/********************************************************************/ 01639000
*                                                                  0414 01640000
*TQEINIT:                                                          0414 01641000
*   PROCEDURE OPTIONS(NOSAVE,NOSAVEAREA,ENTREG,RETREG,NOPARMREG);  0414 01642000
*                                                                  0414 01643000
TQEINIT  DS    0H                                                  0415 01644000
*/********************************************************************/ 01645000
*/*                                                                  */ 01646000
*/* GET THE NUMBER OF DAYS (LOCAL) ELAPSED SINCE THE EPOCH PLUS 1.   */ 01647000
*/*                                                                  */ 01648000
*/********************************************************************/ 01649000
*                                                                  0415 01650000
*   RETSAVE=REG14;                  /* SAVE RETURN ADDRESS           */ 01651000
         ST    REG14,RETSAVE                                       0415 01652000
*   TMICSECR=TCELDAYS;                                             0416 01653000
*                                                                  0416 01654000
         L     TMICSECR,TCELDAYS(,TCWAPTR)                         0416 01655000
*/********************************************************************/ 01656000
*/*                                                                  */ 01657000
*/* CALCULATE THE VALUE FOR THE MIDNIGHT TQE.                        */ 01658000
*/*                                                                  */ 01659000
*/********************************************************************/ 01660000
*                                                                  0417 01661000
*   GENERATE CODE REFS(MINSDAY,MICSMIN) SETS(TMICSECL,TMICSECR);   0417 01662000
*                                                                  0417 01663000
          MH    TMICSECR,MINSDAY    CONVERT DAYS TO MINUTES             01664000
          M     TMICSECL,MICSMIN    CONVERT MINUTES TO MICROSECONDS     01665000
          SLDL  TMICSECL,12         SHIFT MICROSECONDS TO BIT 51        01666000
*/********************************************************************/ 01667000
*/*                                                                  */ 01668000
*/* ADJUST CALCULATED VALUE BY TIME ZONE CONSTANT AND PUT INTO TQE.  */ 01669000
*/*                                                                  */ 01670000
*/********************************************************************/ 01671000
*                                                                  0418 01672000
*   TMICSECL=TMICSECL-CVTTZ;                                       0418 01673000
         SL    TMICSECL,CVTTZ(,LCVTPTR)                            0418 01674000
*   REG15=ADDR(TPCMNTQE);                                          0419 01675000
         L     REG15,TPCPTR(,LCVTPTR)                              0419 01676000
         LA    REG15,TPCMNTQE(,REG15)                              0419 01677000
*   STM(TMICSECL,TMICSECR,REG15->TQEVAL);                          0420 01678000
*                                                                  0420 01679000
         STM   TMICSECL,TMICSECR,TQEVAL(REG15)                     0420 01680000
*/********************************************************************/ 01681000
*/*                                                                  */ 01682000
*/* OBTAIN THE DISPATCHER LOCK FOR ENQUEING THE JOBTEP TIMING AND    */ 01683000
*/* MIDNIGHT TQES.                                                   */ 01684000
*/*                                                                  */ 01685000
*/********************************************************************/ 01686000
*                                                                  0421 01687000
*   GENERATE CODE REFS(PSALITA);                                   0421 01688000
*                                                                  0421 01689000
*                                 /*                                    01690000
         SETLOCK OBTAIN,TYPE=DISP,MODE=UNCOND,                        **01691000
               RELATED=('REQUIRED BY TQE ENQ',(IEAVRTOD,(NOLABEL))) */  01692000
*/********************************************************************/ 01693000
*/*                                                                  */ 01694000
*/* SET REGISTER 1 TO ADDRESS OF MIDNIGHT TQE, AND ENQUEUE THE TQE.  */ 01695000
*/*                                                                  */ 01696000
*/********************************************************************/ 01697000
*                                                                  0422 01698000
*   TQEPTR=REG15;                                                  0422 01699000
         LR    TQEPTR,REG15                                        0422 01700000
*   REG15=ADDR(ENQTQE);                                            0423 01701000
         L     REG15,CVTQTE00(,LCVTPTR)                            0423 01702000
*   GENERATE CODE REFS(REG15) SETS(REG2)(BALR  REG2,REG15);        0424 01703000
         BALR  REG2,REG15                                               01704000
*   LCVTPTR=CVTPTR;                 /* RE-ESTABLISH ADDRESSABILITY TO   01705000
*                                      THE CVT                       */ 01706000
         L     LCVTPTR,CVTPTR                                      0425 01707000
*/********************************************************************/ 01708000
*/*                                                                  */ 01709000
*/* GET THE ADDRESS OF THE JOBSTEP TIMING TQE, AND THEN TEST TO SEE  */ 01710000
*/* IF THIS IS EITHER A MULTIPROCESSOR OR HALF DUPLEX CONFIGURATION. */ 01711000
*/* IF SO, SIGNAL THE CPU REPRESENTED BY THE FIRST TCWA ENTRY TO     */ 01712000
*/* STORE ITS CLOCK INTO THE JOB STEP TIMING TQE.  (NOTE: THE CPU    */ 01713000
*/* REPRESENTED BY THE FIRST TCWA ENTRY IS SIGNALLED BECAUSE IF THE  */ 01714000
*/* THE ENTRY WAS FROM IEAVRSSC, THAT ENTRY REPRESENTS THE ONLY      */ 01715000
*/* VALID CLOCK IN THE SYSTEM.)                                      */ 01716000
*/*                                                                  */ 01717000
*/********************************************************************/ 01718000
*                                                                  0426 01719000
*   TQEPTR=ADDR(TPCLMTQE);                                         0426 01720000
         L     TQEPTR,TPCPTR(,LCVTPTR)                             0426 01721000
         LA    TQEPTR,TPCLMTQE(,TQEPTR)                            0426 01722000
*   IF CSDMP='1'B THEN                                             0427 01723000
         L     @07,CVTCSD(,LCVTPTR)                                0427 01724000
         TM    CSDMP(@07),B'10000000'                              0427 01725000
         BNO   @RF00427                                            0427 01726000
*     DO;                           /* IF NOT STRICTLY A           0428 01727000
*                                      UNIPROCESSOR,                 */ 01728000
*       REG11=ADDR(TQEVAL);         /* POINT PARMREG TO TQEVAL OF JST   01729000
*                                      TQE                           */ 01730000
         LA    REG11,TQEVAL(,TQEPTR)                               0429 01731000
*       REG12=ADDR(DELTA3);         /* GET ADDR OF ROUTINE TO STCK   */ 01732000
         LA    REG12,DELTA3                                        0430 01733000
*       REG1=PTREBEG->TCWAPCCA;     /* GET PCCA ADDR OF CPU TO SIGNAL*/ 01734000
         L     @07,PTREBEG                                         0431 01735000
         L     REG1,TCWAPCCA(,@07)                                 0431 01736000
*       GENERATE CODE REFS(CVTIPCRI,CVT)                           0432 01737000
*           (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));             0432 01738000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        01739000
*       TQEPTR=ADDR(TPCLMTQE);      /* RESTORE TQE POINTER           */ 01740000
         L     TQEPTR,TPCPTR(,LCVTPTR)                             0433 01741000
         LA    TQEPTR,TPCLMTQE(,TQEPTR)                            0433 01742000
*     END;                                                         0434 01743000
*   ELSE                                                           0435 01744000
*                                                                  0435 01745000
*/********************************************************************/ 01746000
*/*                                                                  */ 01747000
*/* IF STRICTLY UNIPROCESSOR, STCK INTO JOB STEP TIMING TQE.         */ 01748000
*/*                                                                  */ 01749000
*/********************************************************************/ 01750000
*                                                                  0435 01751000
*     DO;                                                          0435 01752000
         B     @RC00427                                            0435 01753000
@RF00427 DS    0H                                                  0436 01754000
*       GENERATE CODE REFS(TQEPTR) SETS(TQEVAL)(STCK  TQEVAL(TQEPTR));  01755000
         STCK  TQEVAL(TQEPTR)                                           01756000
*     END;                                                         0437 01757000
*                                                                  0437 01758000
*/********************************************************************/ 01759000
*/*                                                                  */ 01760000
*/* ADD 1 TO STORED VALUE  AND ENQUEUE THE TQE SO THAT JOB STEP      */ 01761000
*/* TIMING TQE WILL START INTERRUPTING.                              */ 01762000
*/*                                                                  */ 01763000
*/********************************************************************/ 01764000
*                                                                  0438 01765000
*   TQEVALLH=TQEVALLH+1;                                           0438 01766000
@RC00427 LA    @07,1                                               0438 01767000
         AL    @07,TQEVALLH(,TQEPTR)                               0438 01768000
         ST    @07,TQEVALLH(,TQEPTR)                               0438 01769000
*   REG15=ADDR(ENQTQE);                                            0439 01770000
         L     REG15,CVTQTE00(,LCVTPTR)                            0439 01771000
*   GENERATE CODE REFS(REG15) SETS(REG2)                           0440 01772000
*       (BALR  REG2,REG15     ENQUEUE THE JST TQE);                0440 01773000
         BALR  REG2,REG15     ENQUEUE THE JST TQE                       01774000
*   LCVTPTR=CVTPTR;                 /* RE-ESTABLISH CVT            0441 01775000
*                                      ADDRESSABILITY                */ 01776000
         L     LCVTPTR,CVTPTR                                      0441 01777000
*/********************************************************************/ 01778000
*/*                                                                  */ 01779000
*/* RELEASE THE DISPATCHER LOCK.                                     */ 01780000
*/*                                                                  */ 01781000
*/********************************************************************/ 01782000
*                                                                  0442 01783000
*   GENERATE CODE REFS(PSALITA);                                   0442 01784000
*                                                                  0442 01785000
*                                  /*                                   01786000
         SETLOCK RELEASE,TYPE=DISP,                                   **01787000
               RELATED=('REQUIRED BY TQE ENQ',(IEAVRTOD,(NOLABEL))) */  01788000
*/********************************************************************/ 01789000
*/*                                                                  */ 01790000
*/* GET THE ENTRY CODE, AND NOTIFY THE SRM THAT THE CLOCKS HAVE BEEN */ 01791000
*/* BEEN INITIALIZED/CHANGED.                                        */ 01792000
*/*                                                                  */ 01793000
*/********************************************************************/ 01794000
*                                                                  0443 01795000
*   REG1=1;                                                        0443 01796000
         LA    REG1,1                                              0443 01797000
*   GENERATE CODE(SYSEVENT TIMEREXP);                              0444 01798000
*                                                                  0444 01799000
         SYSEVENT TIMEREXP                                              01800000
*/********************************************************************/ 01801000
*/*                                                                  */ 01802000
*/* RESTORE RETURN ADDRESS AND RETURN TO CALLER.                     */ 01803000
*/*                                                                  */ 01804000
*/********************************************************************/ 01805000
*                                                                  0445 01806000
*   REG14=RETSAVE;                                                 0445 01807000
         L     REG14,RETSAVE                                       0445 01808000
*   END TQEINIT;                                                   0446 01809000
@EL00002 DS    0H                                                  0446 01810000
@EF00002 DS    0H                                                  0446 01811000
@ER00002 BR    @14                                                 0446 01812000
*   RESPECIFY                                                      0447 01813000
*    (LCVTPTR) UNRESTRICTED;                                       0447 01814000
*                                                                  0448 01815000
*/********************************************************************/ 01816000
*/*                                                                  */ 01817000
*/*        SSCESTAE--IEAVRSSC RECOVERY FOR UNLOCKED CODE             */ 01818000
*/*                                                                  */ 01819000
*/* THIS ROUTINE RECEIVES CONTROL WHEN AN ERROR OCCURS IN UNLOCKED   */ 01820000
*/* TOD SET SPECIFIC CLOCK CODE, OR WHEN PERCOLATED TO FROM AN       */ 01821000
*/* ERROR EXIT FOR CODE INVOKED BY TOD SET SPECIFIC CLOCK.  AFTER    */ 01822000
*/* ESTABLISHING ADDRESSABILITY, IT DETERMINES WHO IT WAS CALLED     */ 01823000
*/* BY, AND IF THE CALLER WAS IEEVCPU (FOR VARYING A CPU ONLINE) IT  */ 01824000
*/* SETS INDICATORS THAT WILL RELEASE THE CPU BEING VARY'ED ONLINE   */ 01825000
*/* FROM THE LOOP IT IS SPINNING IN, AND TERMINATE THE VARY PROCESS. */ 01826000
*/*                                                                  */ 01827000
*/********************************************************************/ 01828000
*                                                                  0448 01829000
*SSCESTAE:                                                         0448 01830000
*   PROC OPTIONS(NOSAVE,NOSAVEAREA,NOENTREG,RETREG);               0448 01831000
SSCESTAE DS    0H                                                  0449 01832000
*   RESPECIFY                                                      0449 01833000
*    (REG2) RESTRICTED;                                            0449 01834000
*   RESPECIFY                                                      0450 01835000
*     CVTMAP BASED(CVTPTR);                                        0450 01836000
*                                                                  0450 01837000
*/********************************************************************/ 01838000
*/*                                                                  */ 01839000
*/* ESTABLISH TEMPORARY ADDRESSABILITY.                              */ 01840000
*/*                                                                  */ 01841000
*/********************************************************************/ 01842000
*                                                                  0451 01843000
*   GEN CODE SETS(REG12) REFS(REG8,REG9,REG10);                    0451 01844000
*                                                                  0451 01845000
         BALR  REG12,0                                                  01846000
         USING *,REG12                                                  01847000
         DROP  REG8,REG9,REG10                                          01848000
*/********************************************************************/ 01849000
*/*                                                                  */ 01850000
*/* SEE IF AN SDWA IS SUPPLIED.                                      */ 01851000
*/*                                                                  */ 01852000
*/********************************************************************/ 01853000
*                                                                  0452 01854000
*   IF REG0^=12 THEN                                               0452 01855000
*                                                                  0452 01856000
         CH    REG0,@CH01265                                       0452 01857000
         BE    @RF00452                                            0452 01858000
*/********************************************************************/ 01859000
*/*                                                                  */ 01860000
*/* IF SO, PUT POINTER TO PARAMETER AREA INTO REG 2.  (NOTE: IF NOT, */ 01861000
*/* THE POINTER IS ALREADY IN REG 2.)  ISSUE SETRP TO ESTABLISH      */ 01862000
*/* INTERFACE BACK TO RTM.                                           */ 01863000
*/*                                                                  */ 01864000
*/********************************************************************/ 01865000
*                                                                  0453 01866000
*     DO;                                                          0453 01867000
*       REG2=SDWAPARM;                                             0454 01868000
         L     REG2,SDWAPARM(,SDWAPTR)                             0454 01869000
*       DO;                         /* SETRP RECPARM(SSCID)RC(4)FRESD   01870000
*                                      WA(YES)RETADDR(RETRYSSC)DUMP(N   01871000
*                                      O)                            */ 01872000
*         RESPECIFY                                                0456 01873000
*          (GPR00P,                                                0456 01874000
*           GPR01P,                                                0456 01875000
*           GPR14P,                                                0456 01876000
*           GPR15P) RSTD;                                          0456 01877000
*         GPR01P->SDWARCDE=4;       /* STORE RC INTO SDWA            */ 01878000
         MVI   SDWARCDE(GPR01P),X'04'                              0457 01879000
*         GPR01P->SDWARTYA=ADDR(RETRYSSC);/* SAVE RETRY ADDRESS      */ 01880000
         MVC   SDWARTYA(4,GPR01P),SSCRTYA                          0458 01881000
*         GPR01P->SDWAFREE='1'B;    /* SET FLAG TO FREE SDWA         */ 01882000
         OI    SDWAFREE(GPR01P),B'00000100'                        0459 01883000
*         GPR15P=ADDR(SSCID);       /* ACCESS RECORD PARAMETER LIST  */ 01884000
         LA    GPR15P,SSCID                                        0460 01885000
*         GPR01P->SDWARECP=GPR15P->I256C(1:24);/* COPY RECORD      0461 01886000
*                                      PARAMETERS                    */ 01887000
         MVC   SDWARECP(24,GPR01P),I256C(GPR15P)                   0461 01888000
*         GPR01P->SDWAREQ='0'B;     /* TURN OFF DUMP INDICATOR       */ 01889000
         NI    SDWAREQ(GPR01P),B'01111111'                         0462 01890000
*         RESPECIFY                                                0463 01891000
*          (GPR00P,                                                0463 01892000
*           GPR01P,                                                0463 01893000
*           GPR14P,                                                0463 01894000
*           GPR15P) UNRSTD;                                        0463 01895000
*       END;                                                       0464 01896000
*     END;                                                         0465 01897000
*                                                                  0465 01898000
*/********************************************************************/ 01899000
*/*                                                                  */ 01900000
*/* IF NOT, PUT RETRY ADDRESS IN REG 0, AND SET REG 15 TO 4 TO       */ 01901000
*/* INDICATE RETRY.                                                  */ 01902000
*/*                                                                  */ 01903000
*/********************************************************************/ 01904000
*                                                                  0466 01905000
*   ELSE                                                           0466 01906000
*     DO;                                                          0466 01907000
         B     @RC00452                                            0466 01908000
@RF00452 DS    0H                                                  0467 01909000
*       REG0=SSCRTYA;                                              0467 01910000
         L     REG0,SSCRTYA                                        0467 01911000
*       RETCODE=4;                                                 0468 01912000
         LA    RETCODE,4                                           0468 01913000
*     END;                                                         0469 01914000
*                                                                  0469 01915000
*/********************************************************************/ 01916000
*/*                                                                  */ 01917000
*/* ESTABLISH PERMANENT ADDRESSABILITY TO DATA BY RESTORING DATA     */ 01918000
*/* REGISTER SAVED BY IEAVRSSC.                                      */ 01919000
*/*                                                                  */ 01920000
*/********************************************************************/ 01921000
*                                                                  0470 01922000
*   GEN CODE REFS(@DATD) SETS(REG8);                               0470 01923000
*                                                                  0470 01924000
@RC00452 DS    0H                                                  0470 01925000
         L     REG8,0(REG2)                                             01926000
         USING @DATD,REG8                                               01927000
*/********************************************************************/ 01928000
*/*                                                                  */ 01929000
*/* SET RETURN CODE TO NON-ZERO TO INDICATE FAILURE.                 */ 01930000
*/*                                                                  */ 01931000
*/********************************************************************/ 01932000
*                                                                  0471 01933000
*   RCSAVE=16;                                                     0471 01934000
*                                                                  0471 01935000
         MVC   RCSAVE(4),@CF00045                                  0471 01936000
*/********************************************************************/ 01937000
*/*                                                                  */ 01938000
*/* RETURN TO RTM.                                                   */ 01939000
*/*                                                                  */ 01940000
*/********************************************************************/ 01941000
*                                                                  0472 01942000
*   END SSCESTAE;                                                  0472 01943000
@EL00003 DS    0H                                                  0472 01944000
@EF00003 DS    0H                                                  0472 01945000
@ER00003 BR    @14                                                 0472 01946000
*   RESPECIFY                                                      0473 01947000
*    (REG2) UNRESTRICTED;                                          0473 01948000
*   GENERATE CODE REFS(REG9,REG10,REG12,@PSTART);                  0474 01949000
         USING @PSTART,REG9                                             01950000
         USING @PSTART+4095,REG10                                       01951000
         DROP  REG12                                                    01952000
*                                                                  0475 01953000
*/********************************************************************/ 01954000
*/*                                                                  */ 01955000
*/*          IEAVRTST--TOD CLOCK STATUS TESTING ROUTINE              */ 01956000
*/*                                                                  */ 01957000
*/* THIS ROUTINE RECEIVES CONTROL FROM ROUTINES IEAVRINT AND         */ 01958000
*/* IEAVRSSC, AND IS PASSED A LIST OF CPU'S WHOSE CLOCK STATUS IS TO */ 01959000
*/* BE TESTED.  ALL OTHER CLOCKS ARE TESTED FOR SYNCHRONISM AGAINST  */ 01960000
*/* THE FIRST CLOCK IN THE LIST.  (NOTE: IF THERE IS ONLY ONE CLOCK  */ 01961000
*/* IN THE LIST, IT IS ONLY TESTED TO SEE IF IT IS SET.)  BEFORE RE- */ 01962000
*/* TURNING, A CODE IS SET IN REGISTER 15 TO INDICATE THE RESULTS OF */ 01963000
*/* THE TEST.  THE RETURN CODES ARE DEFINED AS FOLLOWS:              */ 01964000
*/*                                                                  */ 01965000
*/*          0   ALL CLOCKS SET AND IN SYNCHRONISM, OR THE ONLY      */ 01966000
*/*              CLOCK IS SET                                        */ 01967000
*/*          4   FIRST OR ONLY CLOCK IN LIST NOT SET, OR SIGP TO     */ 01968000
*/*              IT'S CPU FAILED                                     */ 01969000
*/*          8   CLOCKS OUT OF LOW ORDER SYNCHHRONISM                */ 01970000
*/*         12   CLOCKS OUT OF HIGH ORDER SYNCHRONISM                */ 01971000
*/*         16   TRIED 5 TIMES BUT COULD NOT COMPLETE TESTING        */ 01972000
*/*              PROCEDURE IN ALLOTTED TIME, STATUS UNKNOWN          */ 01973000
*/*         20   SIGP FAILED TRYING TO SIGNAL SOME CPU OTHER THAN    */ 01974000
*/*              THE FIRST IN THE LIST                               */ 01975000
*/*                                                                  */ 01976000
*/********************************************************************/ 01977000
*                                                                  0475 01978000
*IEAVRTST:                                                         0475 01979000
*   PROCEDURE OPTIONS(NOSAVEAREA,NOSAVE(15));                      0475 01980000
*                                                                  0475 01981000
         B     @PB00004                                            0475 01982000
IEAVRTST ST    @14,12(,@13)                                        0475 01983000
         STM   @00,@12,20(@13)                                     0475 01984000
*/********************************************************************/ 01985000
*/*                                                                  */ 01986000
*/* SET THE RETURN CODE TO 16 SO THAT THE LOOP WILL BE EXECUTED AT   */ 01987000
*/* LEAST ONCE, AND THEN PERFORM THE LOOP A MAXIMUM OF 5 TIMES.      */ 01988000
*/*                                                                  */ 01989000
*/********************************************************************/ 01990000
*                                                                  0476 01991000
*   RESPECIFY                                                      0476 01992000
*     CVTMAP BASED(CVTPTR);                                        0476 01993000
*   RETCODE=16;                                                    0477 01994000
         LA    RETCODE,16                                          0477 01995000
*   DO LOOPCTR=5 TO 1 BY-1 WHILE RETCODE=16;                       0478 01996000
         LA    @02,5                                               0478 01997000
         ST    @02,LOOPCTR                                         0478 01998000
@DL00478 CH    RETCODE,@CH00045                                    0478 01999000
         BNE   @DC00478                                            0478 02000000
*     REG11=PTREBEG;                /* GET PTR TO FIRST TCWA ENTRY 0479 02001000
*                                                            @YM01705*/ 02002000
         L     @02,PTREBEG                                         0479 02003000
         LR    REG11,@02                                           0479 02004000
*/********************************************************************/ 02005000
*/*                                                                  */ 02006000
*/* TEST FOR STRICTLY UNI-PROCESSOR CONFIGURATION.  IF SO, INVOKE    */ 02007000
*/* ROUTINE TO STORE TOD CLOCK VIA BRANCH AND LINK.  IF NOT, INVOKE  */ 02008000
*/* THE ROUITNE VIA THE IPC.                                         */ 02009000
*/*                                                                  */ 02010000
*/********************************************************************/ 02011000
*                                                                  0480 02012000
*     IF CSDMP='0'B THEN                                           0480 02013000
         L     @07,CVTPTR                                          0480 02014000
         L     @07,CVTCSD(,@07)                                    0480 02015000
         TM    CSDMP(@07),B'10000000'                              0480 02016000
         BNZ   @RF00480                                            0480 02017000
*       DO;                                                        0481 02018000
*         REG15=ADDR(DELTA1);       /* GET ENTRY POINT ADDRESS       */ 02019000
         LA    REG15,DELTA1                                        0482 02020000
*         REG1=PTREBEG;             /* GET ADDRESS OF FIRST TCWA   0483 02021000
*                                      ENTRY                         */ 02022000
         LR    REG1,@02                                            0483 02023000
*         GENERATE CODE REFS(REG15) SETS(REG14)(BALR  REG14,REG15);/*   02024000
*                                      BALR TO ROUTINE               */ 02025000
         BALR  REG14,REG15                                              02026000
*       END;                                                       0485 02027000
*     ELSE                                                         0486 02028000
*                                                                  0486 02029000
*/********************************************************************/ 02030000
*/*                                                                  */ 02031000
*/* SET UP THE IPC INTERFACE AND THEN SIGNAL THE CPU REPRESENTED BY  */ 02032000
*/* THE FIRST TOD CLOCK WORKAREA ENTRY TO STORE ITS CLOCK            */ 02033000
*/* AND THE CONDITION CODE RESULTING FROM THE STCK INSTRUCTION INTO  */ 02034000
*/* ITS WORKAREA ENTRY.  (NOTE: BEFORE ACTUALLY INVOKING IPC, THE    */ 02035000
*/* CONDITION CODE BITS IN THE ENTRY ARE SET TO NON-ZERO, SO THAT A  */ 02036000
*/* FAILURE TO GET THROUGH TO THE OTHER CPU WILL BE TREATED AS IF THE*/ 02037000
*/* CLOCK WAS NOT SET.)                                              */ 02038000
*/*                                                                  */ 02039000
*/********************************************************************/ 02040000
*                                                                  0486 02041000
*       DO;                                                        0486 02042000
         B     @RC00480                                            0486 02043000
@RF00480 DS    0H                                                  0487 02044000
*         TCLCC='11'B;              /* DEFAULT COND CODE TO NON-ZERO */ 02045000
         OI    TCLCC(REG11),B'00110000'                            0487 02046000
*         REG1=TCWAPCCA;            /* GET PCCA POINTER              */ 02047000
         L     REG1,TCWAPCCA(,REG11)                               0488 02048000
*         REG12=ADDR(DELTA1);       /* GET ROUTINE ADDRESS           */ 02049000
         LA    REG12,DELTA1                                        0489 02050000
*         GENERATE CODE REFS(CVTIPCRI,CVT)                         0490 02051000
*             (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));           0490 02052000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        02053000
*       END;                                                       0491 02054000
*                                                                  0491 02055000
*/********************************************************************/ 02056000
*/*                                                                  */ 02057000
*/* TEST THE RESULTING CONDITION CODE FOR 0, INDICATING THE CLOCK IS */ 02058000
*/* SET.                                                             */ 02059000
*/********************************************************************/ 02060000
*                                                                  0492 02061000
*     IF TCLCC='00'B THEN                                          0492 02062000
*                                                                  0492 02063000
@RC00480 TM    TCLCC(REG11),B'00110000'                            0492 02064000
         BNZ   @RF00492                                            0492 02065000
*/********************************************************************/ 02066000
*/*                                                                  */ 02067000
*/* IF THE CLOCK IS SET, THEN SEE IF THERE IS ONLY ONE CPU IN THE    */ 02068000
*/* CONFIGURATION.                                                   */ 02069000
*/*                                                                  */ 02070000
*/********************************************************************/ 02071000
*                                                                  0493 02072000
*       DO;                                                        0493 02073000
*         IF TCCPUCNT=1 THEN                                       0494 02074000
*                                                                  0494 02075000
         CLC   TCCPUCNT(2,TCWAPTR),@CH00096                        0494 02076000
         BNE   @RF00494                                            0494 02077000
*/********************************************************************/ 02078000
*/*                                                                  */ 02079000
*/* IF THERE IS ONLY ONE CPU, SET THE RETURN CODE TO 0 TO INDICATE   */ 02080000
*/* THAT ITS CLOCK IS SET.                                           */ 02081000
*/*                                                                  */ 02082000
*/********************************************************************/ 02083000
*                                                                  0495 02084000
*           RETCODE=0;                                             0495 02085000
         SLR   RETCODE,RETCODE                                     0495 02086000
*         ELSE                                                     0496 02087000
*                                                                  0496 02088000
*/********************************************************************/ 02089000
*/*                                                                  */ 02090000
*/* IF THERE IS MORE THAN ONE CPU, SET UP THE IPC INTERFACE, AND     */ 02091000
*/* SIGNAL THE CPU WITH THE SET CLOCK TO PERFORM A ROUTINE WHICH WHEN*/ 02092000
*/* DONE TWICE WILL CAUSE A DELAY OF A MINIMUM OF 1 SECOND.  THIS IS */ 02093000
*/* TO SATISFY THE REQUIREMENT OF THE SYNC CHECK DEFINITION.  (NOTE: */ 02094000
*/* THE LAST VALUE STORED BY THIS ROUTINE WILL BE USED TO BEGIN      */ 02095000
*/* TIMING A 2**20 MICROSECOND INTERVAL.)                            */ 02096000
*/*                                                                  */ 02097000
*/********************************************************************/ 02098000
*                                                                  0496 02099000
*           DO;                                                    0496 02100000
         B     @RC00494                                            0496 02101000
@RF00494 DS    0H                                                  0497 02102000
*             REG12=ADDR(DELTA4);   /* GET ROUTINE ADDRESS           */ 02103000
         LA    REG12,DELTA4                                        0497 02104000
*             REG11=ADDR(TCWA);     /* GET PARAMETER ADDRESS         */ 02105000
         LR    REG11,TCWAPTR                                       0498 02106000
*             RESPECIFY                                            0499 02107000
*              (REG2) RESTRICTED;                                  0499 02108000
*             DO REG2=2 TO 1 BY-1;                                 0500 02109000
         LA    REG2,2                                              0500 02110000
@DL00500 DS    0H                                                  0501 02111000
*               REG1=PTREBEG->TCWAPCCA;/* GET PCCA PTR FROM FIRST  0501 02112000
*                                      TCWA ENTRY                    */ 02113000
         L     @07,PTREBEG                                         0501 02114000
         L     REG1,TCWAPCCA(,@07)                                 0501 02115000
*               GENERATE CODE REFS(CVTIPCRI,CVT)                   0502 02116000
*                   (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));     0502 02117000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        02118000
*             END;                                                 0503 02119000
         BCTR  REG2,0                                              0503 02120000
         LTR   REG2,REG2                                           0503 02121000
         BP    @DL00500                                            0503 02122000
*             RESPECIFY                                            0504 02123000
*              (REG2) UNRESTRICTED;                                0504 02124000
*                                                                  0504 02125000
*/********************************************************************/ 02126000
*/*                                                                  */ 02127000
*/* BEGINNING WITH THE LAST TOD CLOCK WORKAREA ENTRY, USE THE IPC TO */ 02128000
*/* SIGNAL EACH CPU TO STORE ITS TOD CLOCK AND THE RESULTING CONDI-  */ 02129000
*/* TION CODE, AND TO TURN OFF THE SYNC CHECK INDICATOR IN ITS PCCA. */ 02130000
*/*                                                                  */ 02131000
*/* (NOTE1: BEFORE ACTUALLY INVOKING IPC, THE CONDITION CODE BITS IN */ 02132000
*/* THE ENTRY ARE SET TO NON-ZERO, SO THAT A FAILURE TO GET THROUGH  */ 02133000
*/* TO THE OTHER CPU WILL BE TREATED AS IF THE CLOCK WAS NOT SET.)   */ 02134000
*/*                                                                  */ 02135000
*/* (NOTE2: THE SUBJECT CPU STORES ITS CLOCK LAST.  THIS IS THE      */ 02136000
*/* ENDING VALUE FOR THE 2**20 MICROSECOND INTERVAL.)                */ 02137000
*/*                                                                  */ 02138000
*/********************************************************************/ 02139000
*                                                                  0505 02140000
*             REG11=PTREBEG+(TCCPUCNT-1)*LENGTH(TCENTRY);/* GET PTR     02141000
*                                      TO LAST TCWA ENTRY            */ 02142000
         LH    @02,TCCPUCNT(,TCWAPTR)                              0505 02143000
         LR    REG11,@02                                           0505 02144000
         BCTR  REG11,0                                             0505 02145000
         SLA   REG11,4                                             0505 02146000
         AL    REG11,PTREBEG                                       0505 02147000
*             REG12=ADDR(DELTA1);   /* GET ROUTINE ADDRESS           */ 02148000
         LA    REG12,DELTA1                                        0506 02149000
*             RESPECIFY                                            0507 02150000
*              (REG2) RESTRICTED;                                  0507 02151000
*             DO REG2=TCCPUCNT TO 1 BY-1;                          0508 02152000
         LH    @07,TCCPUCNT(,TCWAPTR)                              0508 02153000
         LR    REG2,@07                                            0508 02154000
         B     @DE00508                                            0508 02155000
@DL00508 DS    0H                                                  0509 02156000
*               TCLCC='11'B;        /* DEFAULT STCK CC TO NON-ZERO   */ 02157000
         OI    TCLCC(REG11),B'00110000'                            0509 02158000
*               REG1=TCWAPCCA;      /* GET ADDRESS PCCA              */ 02159000
         L     REG1,TCWAPCCA(,REG11)                               0510 02160000
*               GENERATE CODE REFS(CVTIPCRI,CVT)                   0511 02161000
*                   (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));     0511 02162000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        02163000
*               REG11=REG11-LENGTH(TCENTRY);/* POINT TO NEXT TCWA  0512 02164000
*                                      ENTRY                         */ 02165000
         SL    REG11,@CF00045                                      0512 02166000
*               IF RETCODE^=0 THEN  /* DID SIGP FAIL?        @ZA15781*/ 02167000
         LTR   RETCODE,RETCODE                                     0513 02168000
         BZ    @RF00513                                            0513 02169000
*                 DO;               /* YES                   @ZA15781*/ 02170000
*                   IF REG2=1 THEN  /* SUBJECT CPU?          @ZA15781*/ 02171000
         CH    REG2,@CH00096                                       0515 02172000
         BNE   @RF00515                                            0515 02173000
*                     RETCODE=4;    /* IEAVRTST R. C. = 4    @ZA15781*/ 02174000
         LA    RETCODE,4                                           0516 02175000
*                   ELSE            /* SOME OTHER CPU        @ZA15781*/ 02176000
*                     DO;           /*                       @ZA15781*/ 02177000
         B     @RC00515                                            0517 02178000
@RF00515 DS    0H                                                  0518 02179000
*                       RETCODE=20; /* IEAVRTST R. C. = 20   @ZA15781*/ 02180000
         LA    RETCODE,20                                          0518 02181000
*                       REG2=1;     /* FORCE LOOP EXIT       @ZA15781*/ 02182000
         LA    REG2,1                                              0519 02183000
*                     END;          /*                       @ZA15781*/ 02184000
*                 END;              /* END SIGP FAILED       @ZA15781*/ 02185000
*               ELSE                /* SIGP DID NOT FAIL     @ZA15781*/ 02186000
*                 RETCODE=16;       /* IEAVRTST R. C. = 16   @ZA15781*/ 02187000
         B     @RC00513                                            0522 02188000
@RF00513 LA    RETCODE,16                                          0522 02189000
*             END;                                                 0523 02190000
@RC00513 BCTR  REG2,0                                              0523 02191000
@DE00508 LTR   REG2,REG2                                           0523 02192000
         BP    @DL00508                                            0523 02193000
*             RESPECIFY                                            0524 02194000
*              (REG2) UNRESTRICTED;                                0524 02195000
*           END;                                                   0525 02196000
*       END;                                                       0526 02197000
*     ELSE                                                         0527 02198000
*                                                                  0527 02199000
*/********************************************************************/ 02200000
*/*                                                                  */ 02201000
*/* IF THE SUBJECT CLOCK WAS NOT SET, SET THE RETURN CODE TO 4.      */ 02202000
*/*                                                                  */ 02203000
*/********************************************************************/ 02204000
*                                                                  0527 02205000
*       RETCODE=4;                                                 0527 02206000
*                                                                  0527 02207000
         B     @RC00492                                            0527 02208000
@RF00492 LA    RETCODE,4                                           0527 02209000
*/********************************************************************/ 02210000
*/*                                                                  */ 02211000
*/* SEE IF THE RETURN CODE IS 16, ITS INITIAL VALUE.                 */ 02212000
*/*                                                                  */ 02213000
*/********************************************************************/ 02214000
*                                                                  0528 02215000
*     IF RETCODE=16 THEN                                           0528 02216000
*                                                                  0528 02217000
@RC00492 CH    RETCODE,@CH00045                                    0528 02218000
         BNE   @RF00528                                            0528 02219000
*/********************************************************************/ 02220000
*/*                                                                  */ 02221000
*/* IF IT IS 16, SEE IF ALL CLOCKS WERE STORED WITHIN 2**20          */ 02222000
*/* MICROSECONDS.  (NOTE: IF THEY WERE, THE HIGH ORDER 32 BITS OF THE*/ 02223000
*/* BEGINNING AND ENDING VALUES WILL BE EQUAL.)                      */ 02224000
*/*                                                                  */ 02225000
*/********************************************************************/ 02226000
*                                                                  0529 02227000
*       DO;                                                        0529 02228000
*         IF PTREBEG->TCWACLKL=TCWAA2L THEN                        0530 02229000
*                                                                  0530 02230000
         L     @02,PTREBEG                                         0530 02231000
         CLC   TCWACLKL(4,@02),TCWAA2L(TCWAPTR)                    0530 02232000
         BNE   @RF00530                                            0530 02233000
*/********************************************************************/ 02234000
*/*                                                                  */ 02235000
*/* IF SO, ENABLE FOR SYNC CHECKS.  (NOTE: IF A SYNC CHECK OCCURS,   */ 02236000
*/* THE TIMER SLIH WILL FIELD THE INTERRUPT, AND THEN DISABLE        */ 02237000
*/* FURTHER SYNC CHECKS.)                                            */ 02238000
*/*                                                                  */ 02239000
*/********************************************************************/ 02240000
*                                                                  0531 02241000
*           DO;                                                    0531 02242000
*             GENERATE CODE REFS(TCWAPTR) SETS(TCWACTL)            0532 02243000
*                 (STCTL 0,0,TCWACTL(TCWAPTR)  SAVE CONTROL REG 0);     02244000
         STCTL 0,0,TCWACTL(TCWAPTR)  SAVE CONTROL REG 0                 02245000
*             TCSYNCK='1'B;         /* TURN ON SYNC CK BIT IN CTL REG   02246000
*                                      0                             */ 02247000
         OI    TCSYNCK(TCWAPTR),B'00010000'                        0533 02248000
*             GENERATE CODE REFS(TCWAPTR,TCWACTL)                  0534 02249000
*                 (LCTL  0,0,TCWACTL(TCWAPTR)  ENABLE SYNC CHECKS);     02250000
         LCTL  0,0,TCWACTL(TCWAPTR)  ENABLE SYNC CHECKS                 02251000
*                                                                  0535 02252000
*/********************************************************************/ 02253000
*/*                                                                  */ 02254000
*/* IF THE TPCSYNC FLAG IS NOT ON, NO SYNC CHECK OCCURRED, AND       */ 02255000
*/* SYNC CHECK INTERRUPTS ARE STILL ENABLED, SO DISABLE THEM.        */ 02256000
*/*                                                                  */ 02257000
*/********************************************************************/ 02258000
*                                                                  0535 02259000
*             IF TPCSYNC='0'B THEN                                 0535 02260000
         L     @02,CVTPTR                                          0535 02261000
         L     @02,TPCPTR(,@02)                                    0535 02262000
         TM    TPCSYNC(@02),B'01000000'                            0535 02263000
         BNZ   @RF00535                                            0535 02264000
*               DO;                                                0536 02265000
*                 GENERATE CODE REFS(TCWAPTR) SETS(TCWACTL)        0537 02266000
*                     (STCTL 0,0,TCWACTL(TCWAPTR)  SAVE CONTROL REG 0); 02267000
         STCTL 0,0,TCWACTL(TCWAPTR)  SAVE CONTROL REG 0                 02268000
*                 TCSYNCK='0'B;     /* TURN OFF SYNC CK BIT IN CTL 0538 02269000
*                                      REG 0                         */ 02270000
         NI    TCSYNCK(TCWAPTR),B'11101111'                        0538 02271000
*                 GENERATE CODE REFS(TCWAPTR,TCWACTL)              0539 02272000
*                     (LCTL  0,0,TCWACTL(TCWAPTR)  DISABLE SYNC CHECKS) 02273000
*                     ;                                            0539 02274000
         LCTL  0,0,TCWACTL(TCWAPTR)  DISABLE SYNC CHECKS                02275000
*               END;                                               0540 02276000
*             ELSE                                                 0541 02277000
*                                                                  0541 02278000
*/********************************************************************/ 02279000
*/*                                                                  */ 02280000
*/* IF THE TPCSYNC FLAG IS ON INDICATING THAT A SYNC CHECK OCCURRED. */ 02281000
*/* SET THE RETURN CODE TO 8 TO INDICATE AN OUT OF LOW ORDER SYNC    */ 02282000
*/* CONDITION, AND THEN SET THE PCCASYNC FLAG FOR                    */ 02283000
*/* ALL OTHER CPU'S (EXCEPTING THE SUBJECT) TO INDICATE              */ 02284000
*/* THAT THEIR CLOCKS ARE OUT OF SYNC. (NOTE: THE PCCASYNC FLAG NOW  */ 02285000
*/* SERVES TO INDICATE WHICH CLOCKS REQUIRE SYNCHRONIZING.)          */ 02286000
*/*                                                                  */ 02287000
*/********************************************************************/ 02288000
*                                                                  0541 02289000
*               DO;                                                0541 02290000
         B     @RC00535                                            0541 02291000
@RF00535 DS    0H                                                  0542 02292000
*                 REG11=PTREBEG+LENGTH(TCENTRY);/* POINT TO 2ND TCWA    02293000
*                                      ENTRY                         */ 02294000
         LA    REG11,16                                            0542 02295000
         AL    REG11,PTREBEG                                       0542 02296000
*                 RETCODE=8;        /* SET RETURN CODE TO 8          */ 02297000
         LA    RETCODE,8                                           0543 02298000
*                 TPCSYNC='0'B;     /* TURN OFF SYNC CK INDICATOR IN    02299000
*                                      TPC                           */ 02300000
         L     @02,CVTPTR                                          0544 02301000
         L     @02,TPCPTR(,@02)                                    0544 02302000
         NI    TPCSYNC(@02),B'10111111'                            0544 02303000
*                 RESPECIFY                                        0545 02304000
*                  (REG2) RESTRICTED;                              0545 02305000
*                 DO REG2=TCCPUCNT-1 TO 1 BY-1;                    0546 02306000
         LH    REG2,TCCPUCNT(,TCWAPTR)                             0546 02307000
         BCTR  REG2,0                                              0546 02308000
         B     @DE00546                                            0546 02309000
@DL00546 DS    0H                                                  0547 02310000
*                   TCWAPCCA->PCCASYNC='1'B;                       0547 02311000
         L     @07,TCWAPCCA(,REG11)                                0547 02312000
         OI    PCCASYNC(@07),B'01000000'                           0547 02313000
*                   REG11=REG11+LENGTH(TCENTRY);/* POINT TO NEXT TCWA   02314000
*                                      ENTRY                         */ 02315000
         AL    REG11,@CF00045                                      0548 02316000
*                 END;                                             0549 02317000
         BCTR  REG2,0                                              0549 02318000
@DE00546 LTR   REG2,REG2                                           0549 02319000
         BP    @DL00546                                            0549 02320000
*                 RESPECIFY                                        0550 02321000
*                  (REG2) UNRESTRICTED;                            0550 02322000
*               END;                                               0551 02323000
*             RESPECIFY                                            0552 02324000
*               TPC BASED(TPCPTR);                                 0552 02325000
*                                                                  0552 02326000
@RC00535 DS    0H                                                  0553 02327000
*/********************************************************************/ 02328000
*/*                                                                  */ 02329000
*/* SEE IF THE RETURN CODE IS STILL SET TO 16.                       */ 02330000
*/*                                                                  */ 02331000
*/********************************************************************/ 02332000
*                                                                  0553 02333000
*             IF RETCODE=16 THEN                                   0553 02334000
*                                                                  0553 02335000
         LA    @02,16                                              0553 02336000
         CR    RETCODE,@02                                         0553 02337000
         BNE   @RF00553                                            0553 02338000
*/********************************************************************/ 02339000
*/*                                                                  */ 02340000
*/* IF IT IS, THERE IS MORE THAN ONE CPU IN THE CONFIGURATION, THE   */ 02341000
*/* CLOCKS WERE STORED WITHIN 2**20 MICROSECONDS, AND THEY ARE IN LOW*/ 02342000
*/* ORDER SYNCHRONISM.  NOW, CHECK TO SEE IF ALL CLOCKS ARE SET      */ 02343000
*/* AND IN HIGH ORDER SYNCHRONISM.                                   */ 02344000
*/*                                                                  */ 02345000
*/********************************************************************/ 02346000
*                                                                  0554 02347000
*               DO;                                                0554 02348000
*                 REG11=PTREBEG+LENGTH(TCENTRY);                   0555 02349000
         AL    @02,PTREBEG                                         0555 02350000
         LR    REG11,@02                                           0555 02351000
*                 RESPECIFY                                        0556 02352000
*                  (REG2) RESTRICTED;                              0556 02353000
*                 DO REG2=TCCPUCNT-1 TO 1 BY-1;                    0557 02354000
*                                                                  0557 02355000
         LH    REG2,TCCPUCNT(,TCWAPTR)                             0557 02356000
         BCTR  REG2,0                                              0557 02357000
         B     @DE00557                                            0557 02358000
@DL00557 DS    0H                                                  0558 02359000
*/********************************************************************/ 02360000
*/*                                                                  */ 02361000
*/* SEE IF THE CLOCK FOR THE ENTRY IS SET, AND IF ITS VALUE FALLS    */ 02362000
*/* BETWEEN THE SUBJECT'S BEGINNING AND ENDING VALUES.               */ 02363000
*/*                                                                  */ 02364000
*/********************************************************************/ 02365000
*                                                                  0558 02366000
*                   IF TCLCC^='00'B|TCWACLKL^=TCWAA2L|TCWACLKR<=TCWAA2R 02367000
*                       |TCWACLKR>=PTREBEG->TCWACLKR THEN          0558 02368000
*                                                                  0558 02369000
         TM    TCLCC(REG11),B'00110000'                            0558 02370000
         BNZ   @RT00558                                            0558 02371000
         CLC   TCWACLKL(4,REG11),TCWAA2L(TCWAPTR)                  0558 02372000
         BNE   @RT00558                                            0558 02373000
         L     @07,TCWACLKR(,REG11)                                0558 02374000
         CL    @07,TCWAA2R(,TCWAPTR)                               0558 02375000
         BNH   @RT00558                                            0558 02376000
         L     @06,PTREBEG                                         0558 02377000
         CL    @07,TCWACLKR(,@06)                                  0558 02378000
         BL    @RF00558                                            0558 02379000
@RT00558 DS    0H                                                  0559 02380000
*/********************************************************************/ 02381000
*/*                                                                  */ 02382000
*/* FOR EVERY ONE THAT DOES NOT MEET THESE CRITERIA, SET THE OUT OF  */ 02383000
*/* SYNC INDICATOR IN ITS PCCA, AND SET THE RETURN CODE TO 12        */ 02384000
*/* INDICATING AN OUT OF HIGH ORDER SYNC CONDITION.                  */ 02385000
*/*                                                                  */ 02386000
*/********************************************************************/ 02387000
*                                                                  0559 02388000
*                     DO;                                          0559 02389000
*                       TCWAPCCA->PCCASYNC='1'B;                   0560 02390000
         L     @07,TCWAPCCA(,REG11)                                0560 02391000
         OI    PCCASYNC(@07),B'01000000'                           0560 02392000
*                       RETCODE=12;                                0561 02393000
         LA    RETCODE,12                                          0561 02394000
*                     END;                                         0562 02395000
*                   REG11=REG11+LENGTH(TCENTRY);/* POINT TO NEXT TCWA   02396000
*                                      ENTRY                         */ 02397000
@RF00558 AL    REG11,@CF00045                                      0563 02398000
*                 END;                                             0564 02399000
         BCTR  REG2,0                                              0564 02400000
@DE00557 LTR   REG2,REG2                                           0564 02401000
         BP    @DL00557                                            0564 02402000
*                 RESPECIFY                                        0565 02403000
*                  (REG2) UNRESTRICTED;                            0565 02404000
*                                                                  0565 02405000
*/********************************************************************/ 02406000
*/*                                                                  */ 02407000
*/* AGAIN, SEE IF THE RETURN CODE IS STILL 16.                       */ 02408000
*/*                                                                  */ 02409000
*/********************************************************************/ 02410000
*                                                                  0566 02411000
*                 IF RETCODE=16 THEN                               0566 02412000
*                                                                  0566 02413000
         CH    RETCODE,@CH00045                                    0566 02414000
         BNE   @RF00566                                            0566 02415000
*/********************************************************************/ 02416000
*/*                                                                  */ 02417000
*/* IF IT STILL IS, ALL CLOCKS ARE SET AND IN SYNCHRONISM, SO SET    */ 02418000
*/* THE RETURN CODE TO 0 TO INDICATE THIS FACT TO THE CALLER.        */ 02419000
*/*                                                                  */ 02420000
*/********************************************************************/ 02421000
*                                                                  0567 02422000
*                   RETCODE=0;                                     0567 02423000
         SLR   RETCODE,RETCODE                                     0567 02424000
*               END;                                               0568 02425000
@RF00566 DS    0H                                                  0569 02426000
*           END;                                                   0569 02427000
@RF00553 DS    0H                                                  0570 02428000
*       END;                                                       0570 02429000
@RF00530 DS    0H                                                  0571 02430000
*   END;                                                           0571 02431000
*                                                                  0571 02432000
@RF00528 SLR   @02,@02                                             0571 02433000
         BCTR  @02,0                                               0571 02434000
         AL    @02,LOOPCTR                                         0571 02435000
         ST    @02,LOOPCTR                                         0571 02436000
         LTR   @02,@02                                             0571 02437000
         BP    @DL00478                                            0571 02438000
@DC00478 DS    0H                                                  0572 02439000
*/********************************************************************/ 02440000
*/*                                                                  */ 02441000
*/* RETURN TO THE CALLER.                                            */ 02442000
*/*                                                                  */ 02443000
*/********************************************************************/ 02444000
*                                                                  0572 02445000
*   END IEAVRTST;                                                  0572 02446000
@EL00004 DS    0H                                                  0572 02447000
@EF00004 DS    0H                                                  0572 02448000
@ER00004 L     @14,12(,@13)                                        0572 02449000
         LM    @00,@12,20(@13)                                     0572 02450000
         BR    @14                                                 0572 02451000
*                                                                  0573 02452000
*/********************************************************************/ 02453000
*/*                                                                  */ 02454000
*/*            IEAVRCOM--OPERATOR COMMUNICATIONS ROUTINE             */ 02455000
*/*                                                                  */ 02456000
*/* THIS ROUTINE RECEIVES CONTROL FROM ROUTINES IEAVRINT AND         */ 02457000
*/* IEAVRSSC.  IT TESTS FLAGS IN THE TOD CLOCK WORKAREA TO DETERMINE */ 02458000
*/* WHICH MESSAGE TO ISSUE, AND THEN ISSUES THE MESSAGE.  (NOTE: IF  */ 02459000
*/* THE INSTALLATION HAS CHOSEN THE IMPROVED IPL OPTION, AND ALL     */ 02460000
*/* CLOCKS ARE SET AND IN SYNCHRONISM, NO MESSAGES ARE ISSUED.)  IT  */ 02461000
*/* THEN ACCEPTS THE OPERATOR'S REPLY AND ISSUES AN INTERNAL SET     */ 02462000
*/* COMMAND TO PROCESS THE REPLY.  IF THE REPLY IS NOT SUCCESSFULLY  */ 02463000
*/* PROCESSED, THE MESSAGE IS REPEATED.  OTHERWISE, THE NEXT MESSAGE */ 02464000
*/* IS ISSUED, IF REQUIRED, AND ULTIMATELY, RETURN IS MADE TO THE    */ 02465000
*/* CALLER.                                                          */ 02466000
*/*                                                                  */ 02467000
*/********************************************************************/ 02468000
*                                                                  0573 02469000
*IEAVRCOM:                                                         0573 02470000
*   PROCEDURE OPTIONS(NOSAVEAREA);                                 0573 02471000
*                                                                  0573 02472000
IEAVRCOM STM   @14,@12,12(@13)                                     0573 02473000
*/********************************************************************/ 02474000
*/*                                                                  */ 02475000
*/* SET UP THE COMMAND LENGTH AND NAME FOR THE INTERNAL SET COMMAND. */ 02476000
*/*                                                                  */ 02477000
*/********************************************************************/ 02478000
*                                                                  0574 02479000
*   RESPECIFY                                                      0574 02480000
*    (LCVTPTR) RESTRICTED;                                         0574 02481000
*   RESPECIFY                                                      0575 02482000
*     CVTMAP BASED(LCVTPTR);                                       0575 02483000
*   TCWARLEN=LENGTH(TCWARPLY);      /* LENGTH TO TCWA                */ 02484000
         MVC   TCWARLEN(2,TCWAPTR),@CH00707                        0576 02485000
*   TCWASET=CHARSET;                /* NAME TO TCWA                  */ 02486000
         MVC   TCWASET(4,TCWAPTR),CHARSET                          0577 02487000
*/********************************************************************/ 02488000
*/*                                                                  */ 02489000
*/* TURN ON THE TOD CLOCK NOT SET INDICATOR SO THAT THE LOOP WILL BE */ 02490000
*/* EXECUTED AT LEAST ONCE.                                          */ 02491000
*/*                                                                  */ 02492000
*/********************************************************************/ 02493000
*                                                                  0578 02494000
*   TCGNSET='1'B;                                                  0578 02495000
*                                                                  0578 02496000
         OI    TCGNSET(TCWAPTR),B'00001000'                        0578 02497000
*/********************************************************************/ 02498000
*/*                                                                  */ 02499000
*/* SEE IF MESSAGE IEA886A SHOULD BE ISSUED.                         */ 02500000
*/*                                                                  */ 02501000
*/********************************************************************/ 02502000
*                                                                  0579 02503000
*   IF TCGYYY='1'B THEN                                            0579 02504000
*                                                                  0579 02505000
         TM    TCGYYY(TCWAPTR),B'01000000'                         0579 02506000
         BNO   @RF00579                                            0579 02507000
*/********************************************************************/ 02508000
*/*                                                                  */ 02509000
*/* IF SO, SET UP THE PARAMETER LIST FOR THE MESSAGE.                */ 02510000
*/*                                                                  */ 02511000
*/********************************************************************/ 02512000
*                                                                  0580 02513000
*     DO;                                                          0580 02514000
*       WPLPTR=ADDR(MSGYYY);        /* ADDRESSABILITY FOR PARMLIST   */ 02515000
         LA    WPLPTR,MSGYYY                                       0581 02516000
*       WPLRPTRA=ADDR(TCWATXT);     /* REPLY ADDRESS TO PARMLIST     */ 02517000
         LA    @07,TCWATXT(,TCWAPTR)                               0582 02518000
         STCM  @07,7,WPLRPTRA(WPLPTR)                              0582 02519000
*       WPLRECB=ADDR(TODECB);       /* ECB ADDRESS TO PARMLIST       */ 02520000
         LA    @07,TODECB                                          0583 02521000
         ST    @07,WPLRECB(,WPLPTR)                                0583 02522000
*/********************************************************************/ 02523000
*/*                                                                  */ 02524000
*/* KEEP ISSUING THE MESSAGE UNTIL THE OPERATOR'S REPLY IS           */ 02525000
*/* SYNTACTICALLY CORRECT (AS DETERMINED BY THE SET COMMAND PROCES-  */ 02526000
*/* SOR--MODULE IEE0603D) AND A TOD CLOCK HAS BEEN SET.              */ 02527000
*/*                                                                  */ 02528000
*/********************************************************************/ 02529000
*                                                                  0584 02530000
*       DO WHILE BAIPLCC^='00'X|TCGNSET='1'B;                      0584 02531000
         B     @DE00584                                            0584 02532000
@DL00584 DS    0H                                                  0585 02533000
*         TODECB=0;                 /* ZERO THE REPLY ECB            */ 02534000
         SLR   @07,@07                                             0585 02535000
         ST    @07,TODECB                                          0585 02536000
*         TCWATXT='';               /* CLEAR THE REPLY AREA          */ 02537000
         MVI   TCWATXT(TCWAPTR),C' '                               0586 02538000
         MVC   TCWATXT+1(39,TCWAPTR),TCWATXT(TCWAPTR)              0586 02539000
*         WPLPTR=ADDR(MSGYYY);                                     0587 02540000
         LA    WPLPTR,MSGYYY                                       0587 02541000
*         GENERATE CODE(WTOR  MF=(E,(1)));                         0588 02542000
*                                                                  0588 02543000
         WTOR  MF=(E,(1))                                               02544000
*/********************************************************************/ 02545000
*/*                                                                  */ 02546000
*/* WAIT FOR REPLY.                                                  */ 02547000
*/*                                                                  */ 02548000
*/********************************************************************/ 02549000
*                                                                  0589 02550000
*         REG1=ADDR(TODECB);                                       0589 02551000
         LA    REG1,TODECB                                         0589 02552000
*         GENERATE CODE(WAIT  1,ECB=(1));                          0590 02553000
*                                                                  0590 02554000
         WAIT  1,ECB=(1)                                                02555000
*/********************************************************************/ 02556000
*/*                                                                  */ 02557000
*/* AFTER RECEIVING THE OPERATOR'S REPLY, INDICATE THAT THIS IS AN   */ 02558000
*/* INTERNAL SET COMMAND AND ISSUE SVC 34 TO EXECUTE IT.             */ 02559000
*/*                                                                  */ 02560000
*/********************************************************************/ 02561000
*                                                                  0591 02562000
*         BAIPLCC='00'X;            /* CLEAR ERROR BYTE IN BASEA     */ 02563000
         L     @07,CVTMSER(,LCVTPTR)                               0591 02564000
         MVI   BAIPLCC(@07),X'00'                                  0591 02565000
*         REG0=0;                                                  0592 02566000
         SLR   REG0,REG0                                           0592 02567000
*         REG1=ADDR(TCWARPLY);                                     0593 02568000
         LA    REG1,TCWARPLY(,TCWAPTR)                             0593 02569000
*         BAINTSET='1'B;            /* INDICATE INTERNAL SET COMMAND */ 02570000
         OI    BAINTSET(@07),B'00100000'                           0594 02571000
*         GENERATE CODE(MGCR  (1));                                0595 02572000
         MGCR  (1)                                                      02573000
*         BAINTSET='0'B;                                           0596 02574000
         L     @07,CVTMSER(,LCVTPTR)                               0596 02575000
         NI    BAINTSET(@07),B'11011111'                           0596 02576000
*       END;                                                       0597 02577000
@DE00584 L     @07,CVTMSER(,LCVTPTR)                               0597 02578000
         CLI   BAIPLCC(@07),X'00'                                  0597 02579000
         BNE   @DL00584                                            0597 02580000
         TM    TCGNSET(TCWAPTR),B'00001000'                        0597 02581000
         BO    @DL00584                                            0597 02582000
*     END;                                                         0598 02583000
*   ELSE                                                           0599 02584000
*                                                                  0599 02585000
*/********************************************************************/ 02586000
*/*                                                                  */ 02587000
*/* IF MESSAGE IEA886A SHOULD NOT BE ISSUED, SEE IF MESSAGE IEA887A  */ 02588000
*/* SHOULD BE.                                                       */ 02589000
*/*                                                                  */ 02590000
*/********************************************************************/ 02591000
*                                                                  0599 02592000
*     IF TCGZZZ='1'B THEN                                          0599 02593000
*                                                                  0599 02594000
         B     @RC00579                                            0599 02595000
@RF00579 TM    TCGZZZ(TCWAPTR),B'00100000'                         0599 02596000
         BNO   @RF00599                                            0599 02597000
*/********************************************************************/ 02598000
*/*                                                                  */ 02599000
*/* IF SO, SET UP THE PARAMETER LIST FOR THE MESSAGE.                */ 02600000
*/*                                                                  */ 02601000
*/********************************************************************/ 02602000
*                                                                  0600 02603000
*       DO;                                                        0600 02604000
*         WPLPTR=ADDR(MSGZZZ2);     /* ADDRESSABILITY FOR PARMLIST   */ 02605000
         LA    WPLPTR,MSGZZZ2                                      0601 02606000
*         WPLRPTRA=ADDR(TCWATXT);   /* REPLY ADDRESS TO PARMLIST     */ 02607000
         LA    @07,TCWATXT(,TCWAPTR)                               0602 02608000
         STCM  @07,7,WPLRPTRA(WPLPTR)                              0602 02609000
*         WPLRECB=ADDR(TODECB);     /* ECB ADDRESS TO PARMLIST       */ 02610000
         LA    @07,TODECB                                          0603 02611000
         ST    @07,WPLRECB(,WPLPTR)                                0603 02612000
*/********************************************************************/ 02613000
*/*                                                                  */ 02614000
*/* KEEP ISSUING THIS MESSAGE USING THE SAME CRITERIA AS ABOVE.      */ 02615000
*/*                                                                  */ 02616000
*/********************************************************************/ 02617000
*                                                                  0604 02618000
*         DO WHILE BAIPLCC^='00'X|TCGNSET='1'B;                    0604 02619000
*                                                                  0604 02620000
         B     @DE00604                                            0604 02621000
@DL00604 DS    0H                                                  0605 02622000
*/********************************************************************/ 02623000
*/*                                                                  */ 02624000
*/* SEARCH THE TOD CLOCK WORKAREA ENTRIES FOR CLOCKS THAT ARE SET.   */ 02625000
*/*                                                                  */ 02626000
*/********************************************************************/ 02627000
*                                                                  0605 02628000
*           DO REG11=PTREBEG TO PTREEND BY LENGTH(TCENTRY);        0605 02629000
         L     REG11,PTREBEG                                       0605 02630000
         B     @DE00605                                            0605 02631000
@DL00605 DS    0H                                                  0606 02632000
*             IF TCLCC='00'B THEN                                  0606 02633000
*                                                                  0606 02634000
         TM    TCLCC(REG11),B'00110000'                            0606 02635000
         BNZ   @RF00606                                            0606 02636000
*/********************************************************************/ 02637000
*/*                                                                  */ 02638000
*/* IF THE CLOCK IS SET (AS DETERMINED BY THE CONDITION CODE FIELD   */ 02639000
*/* OF THE ENTRY), STORE THE CURRENT CLOCK VALUE.  THEN,             */ 02640000
*/* CALCULATE THE LOCAL TIME AND DATE ACCORDING TO THE CLOCK VALUE   */ 02641000
*/* JUST STORED, AND WRITE THE FIRST LINE OF MESSAGE IEA887A FOR     */ 02642000
*/* THAT CPU.                                                        */ 02643000
*/*                                                                  */ 02644000
*/********************************************************************/ 02645000
*                                                                  0607 02646000
*               DO;                                                0607 02647000
*                 REG12=ADDR(DELTA3);                              0608 02648000
         LA    REG12,DELTA3                                        0608 02649000
*                 REG1=TCWAPCCA;                                   0609 02650000
         L     REG1,TCWAPCCA(,REG11)                               0609 02651000
*                 GENERATE CODE REFS(CVTIPCRI,CVT)                 0610 02652000
*                     (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));   0610 02653000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        02654000
*                 TCWAA2L=TCWACLKL+CVTTZ;/* CALCULATE LOCAL CLOCK  0611 02655000
*                                      VALUE                         */ 02656000
         L     @07,TCWACLKL(,REG11)                                0611 02657000
         AL    @07,CVTTZ(,LCVTPTR)                                 0611 02658000
         ST    @07,TCWAA2L(,TCWAPTR)                               0611 02659000
*                 TCWAA2R=TCWACLKR; /* USE L. O. BITS        @ZA10129*/ 02660000
         MVC   TCWAA2R(4,TCWAPTR),TCWACLKR(REG11)                  0612 02661000
*                 TCWAPTP=ADDR(TCWAPLT);                           0613 02662000
         LA    @07,TCWAPLT(,TCWAPTR)                               0613 02663000
         ST    @07,TCWAPTP(,TCWAPTR)                               0613 02664000
*                 TCWAPDP=ADDR(TCWAPLD);                           0614 02665000
         LA    @07,TCWAPLD(,TCWAPTR)                               0614 02666000
         ST    @07,TCWAPDP(,TCWAPTR)                               0614 02667000
*                 TCWACVP=ADDR(TCWAA2);                            0615 02668000
         LA    @07,TCWAA2(,TCWAPTR)                                0615 02669000
         ST    @07,TCWACVP(,TCWAPTR)                               0615 02670000
*                 REG1=ADDR(TCWAPTP);                              0616 02671000
         LA    REG1,TCWAPTP(,TCWAPTR)                              0616 02672000
*                 CALL CUTODATE;    /* CALL CONVERSION ROUTINE       */ 02673000
         BAL   @14,CUTODATE                                        0617 02674000
*/********************************************************************/ 02675000
*/*                                                                  */ 02676000
*/* ASSEMBLE THE VARIABLE TEXT INTO THE MESSAGE AND DISPLAY THE LOCAL*/ 02677000
*/* TIME AND DATE FOR THIS CPU'S CLOCK.                              */ 02678000
*/*                                                                  */ 02679000
*/********************************************************************/ 02680000
*                                                                  0618 02681000
*                 WPLPTR=ADDR(MSGZZZ1);                            0618 02682000
         LA    WPLPTR,MSGZZZ1                                      0618 02683000
*                 DATEZ=DTEPATRN;   /* EDITING PATTERN TO MSG        */ 02684000
         MVC   DATEZ(7,WPLPTR),DTEPATRN                            0619 02685000
*                 ED(DATEZ,TCWAPLD(2:4));/* EDIT DATE INTO MSG       */ 02686000
         ED    DATEZ(7,WPLPTR),TCWAPLD+1(TCWAPTR)                  0620 02687000
*                 DATEZ(1)='=';     /* PUT = SIGN AFTER DATE         */ 02688000
         MVI   DATEZ(WPLPTR),C'='                                  0621 02689000
*                 CLOCKZ=CLKPATRN;  /* EDITING PATTERN TO MSG        */ 02690000
         MVC   CLOCKZ(9,WPLPTR),CLKPATRN                           0622 02691000
*                 ED(CLOCKZ,TCWAPLT);/* EDIT CLOCK INTO MSG          */ 02692000
         ED    CLOCKZ(9,WPLPTR),TCWAPLT(TCWAPTR)                   0623 02693000
*                 CLOCKZ(1)='=';    /* PUT = SIGN AFTER CLOCK        */ 02694000
         MVI   CLOCKZ(WPLPTR),C'='                                 0624 02695000
*                 CVD(TCWAIADD,TCWAWRK1);                          0625 02696000
         SLR   @07,@07                                             0625 02697000
         ICM   @07,3,TCWAIADD(REG11)                               0625 02698000
         CVD   @07,TCWAWRK1(,TCWAPTR)                              0625 02699000
*                 UNPK(CPUADDRZ,TCWAWRK1(7:8));                    0626 02700000
         UNPK  CPUADDRZ(2,WPLPTR),TCWAWRK1+6(2,TCWAPTR)            0626 02701000
*                 CPUADDRZ(2)=CPUADDRZ(2)|'F0'X;                   0627 02702000
         OI    CPUADDRZ+1(WPLPTR),X'F0'                            0627 02703000
*                 GENERATE CODE(WTO   MF=(E,(1)));                 0628 02704000
         WTO   MF=(E,(1))                                               02705000
*               END;                                               0629 02706000
*           END;                                                   0630 02707000
@RF00606 AL    REG11,@CF00045                                      0630 02708000
@DE00605 C     REG11,PTREEND                                       0630 02709000
         BNH   @DL00605                                            0630 02710000
*           TODECB=0;               /* ZERO REPLY ECB                */ 02711000
         SLR   @07,@07                                             0631 02712000
         ST    @07,TODECB                                          0631 02713000
*           TCWATXT='';             /* CLEAR REPLY AREA              */ 02714000
         MVI   TCWATXT(TCWAPTR),C' '                               0632 02715000
         MVC   TCWATXT+1(39,TCWAPTR),TCWATXT(TCWAPTR)              0632 02716000
*           WPLPTR=ADDR(MSGZZZ2);                                  0633 02717000
*                                                                  0633 02718000
         LA    WPLPTR,MSGZZZ2                                      0633 02719000
*/********************************************************************/ 02720000
*/*                                                                  */ 02721000
*/* THEN ISSUE THE SECOND LINE OF MESSAGE IEA887A TO PROMPT THE      */ 02722000
*/* OPERATOR FOR A REPLY.                                            */ 02723000
*/*                                                                  */ 02724000
*/********************************************************************/ 02725000
*                                                                  0634 02726000
*           GENERATE CODE;                                         0634 02727000
*                                                                  0634 02728000
*                            /*                                         02729000
         WTOR  MF=(E,(1))                                          */   02730000
*/********************************************************************/ 02731000
*/*                                                                  */ 02732000
*/* WAIT FOR REPLY.                                                  */ 02733000
*/*                                                                  */ 02734000
*/********************************************************************/ 02735000
*                                                                  0635 02736000
*           REG1=ADDR(TODECB);                                     0635 02737000
         LA    REG1,TODECB                                         0635 02738000
*           GENERATE CODE(WAIT  1,ECB=(1));                        0636 02739000
*                                                                  0636 02740000
         WAIT  1,ECB=(1)                                                02741000
*/********************************************************************/ 02742000
*/*                                                                  */ 02743000
*/* INDICATE AN INTERNAL SET COMMAND AND ISSUE SVC 34 USING THE OPER-*/ 02744000
*/* ATOR'S REPLY AS THE COMMAND OPERAND.                             */ 02745000
*/*                                                                  */ 02746000
*/********************************************************************/ 02747000
*                                                                  0637 02748000
*           BAIPLCC='00'X;          /* CLEAR ERROR BYTE IN BASEA     */ 02749000
         L     @07,CVTMSER(,LCVTPTR)                               0637 02750000
         MVI   BAIPLCC(@07),X'00'                                  0637 02751000
*           REG0=0;                                                0638 02752000
         SLR   REG0,REG0                                           0638 02753000
*           REG1=ADDR(TCWARPLY);                                   0639 02754000
         LA    REG1,TCWARPLY(,TCWAPTR)                             0639 02755000
*           BAINTSET='1'B;          /* INDICATE AN INTERNAL SET    0640 02756000
*                                      COMMAND                       */ 02757000
         OI    BAINTSET(@07),B'00100000'                           0640 02758000
*           GENERATE CODE(MGCR  (1));                              0641 02759000
         MGCR  (1)                                                      02760000
*           BAINTSET='0'B;                                         0642 02761000
         L     @07,CVTMSER(,LCVTPTR)                               0642 02762000
         NI    BAINTSET(@07),B'11011111'                           0642 02763000
*         END;                                                     0643 02764000
@DE00604 L     @07,CVTMSER(,LCVTPTR)                               0643 02765000
         CLI   BAIPLCC(@07),X'00'                                  0643 02766000
         BNE   @DL00604                                            0643 02767000
         TM    TCGNSET(TCWAPTR),B'00001000'                        0643 02768000
         BO    @DL00604                                            0643 02769000
*       END;                                                       0644 02770000
*                                                                  0644 02771000
*/********************************************************************/ 02772000
*/*                                                                  */ 02773000
*/* AFTER MESSAGE IEA886A OR MESSAGE IEA887A IS ISSUED, OR IF        */ 02774000
*/* NEITHER WAS TO BE ISSUED, ISSUE MESSAGE IEA888A UNTIL THE OPERA- */ 02775000
*/* TOR'S SYNTAX IS CORRECT AND A CLOCK HAS BEEN SET.                */ 02776000
*/*                                                                  */ 02777000
*/* FIRST, INDICATE THAT NEITHER MESSAGE IEA886A NOR IEA887A IS OUT- */ 02778000
*/* STANDING AND THAT THE CONVERSION ROUTINE SHOULD NOT SAVE ELAPSED */ 02779000
*/* DAYS.                                                            */ 02780000
*/*                                                                  */ 02781000
*/* THEN INDICATE THAT MESSAGE IEA888A IS OUTSTANDING, AND THAT THE  */ 02782000
*/* CVTDATE MUST BE SET.  TURN ON THE CLOCK NOT SET INDICATOR TO     */ 02783000
*/* ENSURE THAT THE LOOP WILL BE EXECUTED AT LEAST ONCE.             */ 02784000
*/*                                                                  */ 02785000
*/********************************************************************/ 02786000
*                                                                  0645 02787000
*   DO;                                                            0645 02788000
@RF00599 DS    0H                                                  0645 02789000
@RC00579 DS    0H                                                  0646 02790000
*     TCGYYY='0'B;                  /* NOT MSG IEA886A       @YM08621*/ 02791000
*     TCGZZZ='0'B;                  /* NOT MSG IEA887A       @YM08621*/ 02792000
*     TCGLELD='0'B;                 /* DO NOT SAVE DAYS      @YM08621*/ 02793000
*     TCGXXX='1'B;                  /* MSG IEA888A           @YM08621*/ 02794000
*     TCGCVTD='1'B;                 /* SET CVTDATE           @YM08621*/ 02795000
*     TCGNSET='1'B;                 /* CLOCK NOT SET         @YM08621*/ 02796000
         OI    TCGXXX(TCWAPTR),B'10001010'                         0651 02797000
         NI    TCGYYY(TCWAPTR),B'10011011'                         0651 02798000
*/********************************************************************/ 02799000
*/*                                                                  */ 02800000
*/* SET UP THE INTERFACE TO HAVE THE CPU REPRESENTED BY THE          */ 02801000
*/* FIRST TOD CLOCK WORKAREA ENTRY STORE ITS CLOCK IN ORDER TO GET   */ 02802000
*/* A CURRENT VALUE.                                                 */ 02803000
*/*                                                                  */ 02804000
*/********************************************************************/ 02805000
*                                                                  0652 02806000
*     DO WHILE BAIPLCC^='00'X|TCGNSET='1'B;                        0652 02807000
*                                                                  0652 02808000
         B     @DE00652                                            0652 02809000
@DL00652 DS    0H                                                  0653 02810000
*/********************************************************************/ 02811000
*/*                                                                  */ 02812000
*/* TEST FOR STRICTLY UNI-PROCESSOR CONFIGURATION.  IF SO, INVOKE    */ 02813000
*/* ROUTINE TO STORE TOD CLOCK VIA BRANCH AND LINK.  IF NOT, INVOKE  */ 02814000
*/* THE ROUITNE VIA THE IPC.                                         */ 02815000
*/*                                                                  */ 02816000
*/********************************************************************/ 02817000
*                                                                  0653 02818000
*       IF CSDMP='0'B THEN                                         0653 02819000
         L     @07,CVTCSD(,LCVTPTR)                                0653 02820000
         TM    CSDMP(@07),B'10000000'                              0653 02821000
         BNZ   @RF00653                                            0653 02822000
*         DO;                                                      0654 02823000
*           REG15=ADDR(DELTA3);     /* GET ENTRY POINT ADDRESS       */ 02824000
         LA    REG15,DELTA3                                        0655 02825000
*           REG1=ADDR(TCWAA1);      /* GET ADDRESS OF STCK AREA      */ 02826000
         LA    REG1,TCWAA1(,TCWAPTR)                               0656 02827000
*           GENERATE CODE REFS(REG15) SETS(REG14)(BALR  REG14,REG15);   02828000
         BALR  REG14,REG15                                              02829000
*                                   /* BALR TO ROUTINE               */ 02830000
*         END;                                                     0658 02831000
*       ELSE                                                       0659 02832000
*                                                                  0659 02833000
*/********************************************************************/ 02834000
*/*                                                                  */ 02835000
*/* SET UP IPC INTERFACE.                                            */ 02836000
*/*                                                                  */ 02837000
*/********************************************************************/ 02838000
*                                                                  0659 02839000
*         DO;                                                      0659 02840000
         B     @RC00653                                            0659 02841000
@RF00653 DS    0H                                                  0660 02842000
*           REG11=ADDR(TCWAA1);     /* GET PARAMETER ADDRESS         */ 02843000
         LA    REG11,TCWAA1(,TCWAPTR)                              0660 02844000
*           REG12=ADDR(DELTA3);     /* GET ROUTINE ADDRESS           */ 02845000
         LA    REG12,DELTA3                                        0661 02846000
*           REG1=PTREBEG->TCWAPCCA; /* GET ADDRESS PCCA              */ 02847000
         L     @07,PTREBEG                                         0662 02848000
         L     REG1,TCWAPCCA(,@07)                                 0662 02849000
*           GENERATE CODE REFS(CVTIPCRI,CVT)                       0663 02850000
*               (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));         0663 02851000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        02852000
*         END;                                                     0664 02853000
*                                                                  0664 02854000
*/********************************************************************/ 02855000
*/*                                                                  */ 02856000
*/* ADD THE TIME ZONE CONSTANT TO THE STORED VALUE TO GET THE LOCAL  */ 02857000
*/* CLOCK VALUE, AND SET UP THE PARAMETER LIST POINTERS FOR THE TIME */ 02858000
*/* VALUE TO BE CONVERTED.                                           */ 02859000
*/*                                                                  */ 02860000
*/********************************************************************/ 02861000
*                                                                  0665 02862000
*       TCWAA2L=TCWAA1L+CVTTZ;                                     0665 02863000
@RC00653 L     @07,TCWAA1L(,TCWAPTR)                               0665 02864000
         AL    @07,CVTTZ(,LCVTPTR)                                 0665 02865000
         ST    @07,TCWAA2L(,TCWAPTR)                               0665 02866000
*       TCWAA2R=TCWAA1R;            /* USE LOW ORDER BITS TOO      0666 02867000
*                                                            @ZA10129*/ 02868000
         MVC   TCWAA2R(4,TCWAPTR),TCWAA1R(TCWAPTR)                 0666 02869000
*       TCWAPTP=ADDR(TCWAPLT);                                     0667 02870000
         LA    @07,TCWAPLT(,TCWAPTR)                               0667 02871000
         ST    @07,TCWAPTP(,TCWAPTR)                               0667 02872000
*       TCWACVP=ADDR(TCWAA2);                                      0668 02873000
*                                                                  0668 02874000
         LA    @07,TCWAA2(,TCWAPTR)                                0668 02875000
         ST    @07,TCWACVP(,TCWAPTR)                               0668 02876000
*/********************************************************************/ 02877000
*/*                                                                  */ 02878000
*/* THEN SEE IF THE CVTDATE REQUIRES INITIALIZING.                   */ 02879000
*/*                                                                  */ 02880000
*/********************************************************************/ 02881000
*                                                                  0669 02882000
*       IF TCGCVTD='1'B THEN                                       0669 02883000
*                                                                  0669 02884000
         TM    TCGCVTD(TCWAPTR),B'00000010'                        0669 02885000
         BNO   @RF00669                                            0669 02886000
*/********************************************************************/ 02887000
*/*                                                                  */ 02888000
*/* IF SO, SET UP THE DATE PARAMETER POINTER SO THAT THE CONVERSION  */ 02889000
*/* ROUTINE WILL STORE THE DATE INTO  THE CVT.  THEN INDICATE THAT   */ 02890000
*/* IT HAS BEEN INITIALIZED.                                         */ 02891000
*/*                                                                  */ 02892000
*/********************************************************************/ 02893000
*                                                                  0670 02894000
*         DO;                                                      0670 02895000
*           TCWAPDP=ADDR(CVTDATE);                                 0671 02896000
         LA    @07,CVTDATE(,LCVTPTR)                               0671 02897000
         ST    @07,TCWAPDP(,TCWAPTR)                               0671 02898000
*           TCGCVTD='0'B;                                          0672 02899000
         NI    TCGCVTD(TCWAPTR),B'11111101'                        0672 02900000
*         END;                                                     0673 02901000
*       ELSE                                                       0674 02902000
*                                                                  0674 02903000
*/********************************************************************/ 02904000
*/*                                                                  */ 02905000
*/* IF CVTDATE HAS BEEN INITIALIZED, HAVE THE CONVERSION ROUTINE     */ 02906000
*/* STORE THE DATE INTO THE TOD CLOCK WORKAREA.                      */ 02907000
*/*                                                                  */ 02908000
*/********************************************************************/ 02909000
*                                                                  0674 02910000
*         TCWAPDP=ADDR(TCWAPLD);                                   0674 02911000
*                                                                  0674 02912000
         B     @RC00669                                            0674 02913000
@RF00669 LA    @07,TCWAPLD(,TCWAPTR)                               0674 02914000
         ST    @07,TCWAPDP(,TCWAPTR)                               0674 02915000
*/********************************************************************/ 02916000
*/*                                                                  */ 02917000
*/* POINT THE PARAMETER REGISTER TO THE PARAMETER LIST AND CALL THE  */ 02918000
*/* ROUTINE THAT CONVERTS A TOD CLOCK VALUE TO PACKED DATE AND TIME. */ 02919000
*/* INDICATE TO THE CONVERSION ROUTINE TO SAVE DAYS ELAPSED PLUS 1   */ 02920000
*/* FOR LATER USE IN CALCULATING THE VALUE OF THE MIDNIGHT TQE.      */ 02921000
*/*                                                                  */ 02922000
*/********************************************************************/ 02923000
*                                                                  0675 02924000
*       REG1=ADDR(TCWAPTP);                                        0675 02925000
@RC00669 LA    REG1,TCWAPTP(,TCWAPTR)                              0675 02926000
*       TCGLELD='1'B;                                              0676 02927000
         OI    TCGLELD(TCWAPTR),B'00000100'                        0676 02928000
*       CALL CUTODATE;                                             0677 02929000
         BAL   @14,CUTODATE                                        0677 02930000
*       TCGLELD='0'B;                                              0678 02931000
*                                                                  0678 02932000
         NI    TCGLELD(TCWAPTR),B'11111011'                        0678 02933000
*/********************************************************************/ 02934000
*/*                                                                  */ 02935000
*/* SEE IF THE OPERATOR IS TO BE PROMPTED.                           */ 02936000
*/*                                                                  */ 02937000
*/********************************************************************/ 02938000
*                                                                  0679 02939000
*       IF MSTODWTO='0'B            /*                        @Y02675*/ 02940000
*/********************************************************************/ 02941000
*/*                                                                  */ 02942000
*/* IF SO, SET UP THE INTERFACE TO GET THE TOD CLOCK VALUE JUST      */ 02943000
*/* STORED INTO PACKED GREENWICH MEAN TIME AND DATE, AND CALL THE    */ 02944000
*/* CONVERSION ROUTINE.                                              */ 02945000
*/*                                                                  */ 02946000
*/********************************************************************/ 02947000
*                                                                  0679 02948000
*         THEN                                                     0679 02949000
         L     @07,CVTMSER(,LCVTPTR)                               0679 02950000
         TM    MSTODWTO(@07),B'01000000'                           0679 02951000
         BNZ   @RF00679                                            0679 02952000
*         DO;                                                      0680 02953000
*           TCWAPTP=ADDR(TCWAPGT);                                 0681 02954000
         LA    @07,TCWAPGT(,TCWAPTR)                               0681 02955000
         ST    @07,TCWAPTP(,TCWAPTR)                               0681 02956000
*           TCWAPDP=ADDR(TCWAPGD);                                 0682 02957000
         LA    @07,TCWAPGD(,TCWAPTR)                               0682 02958000
         ST    @07,TCWAPDP(,TCWAPTR)                               0682 02959000
*           TCWACVP=ADDR(TCWAA1);                                  0683 02960000
         LA    @07,TCWAA1(,TCWAPTR)                                0683 02961000
         ST    @07,TCWACVP(,TCWAPTR)                               0683 02962000
*           REG1=ADDR(TCWAPTP);                                    0684 02963000
         LA    REG1,TCWAPTP(,TCWAPTR)                              0684 02964000
*           CALL CUTODATE;                                         0685 02965000
*                                                                  0685 02966000
         BAL   @14,CUTODATE                                        0685 02967000
*/********************************************************************/ 02968000
*/*                                                                  */ 02969000
*/* ASSEMBLE THE MESSAGE FOR DISPLAYING THE GREENWICH MEAN TIME AND  */ 02970000
*/* DATE, AND WRITE THE MESSAGE.                                     */ 02971000
*/*                                                                  */ 02972000
*/********************************************************************/ 02973000
*                                                                  0686 02974000
*           WPLPTR=ADDR(MSGXXX1);                                  0686 02975000
*                                                                  0686 02976000
         LA    WPLPTR,MSGXXX1                                      0686 02977000
*/* C271100-271500                                           @YM04380*/ 02978000
*                                                                  0687 02979000
*           DATEX1=DTEPATRN;        /* EDITING PATTERN TO MSG        */ 02980000
         MVC   DATEX1(7,WPLPTR),DTEPATRN                           0687 02981000
*           ED(DATEX1,TCWAPGD(2:4));/* EDIT DATE INTO MSG            */ 02982000
         ED    DATEX1(7,WPLPTR),TCWAPGD+1(TCWAPTR)                 0688 02983000
*           DATEX1(1)='=';          /* PUT = SIGN AFTER DATE         */ 02984000
         MVI   DATEX1(WPLPTR),C'='                                 0689 02985000
*           CLOCKX1=CLKPATRN;       /* EDITING PATTERN TO MSG        */ 02986000
         MVC   CLOCKX1(9,WPLPTR),CLKPATRN                          0690 02987000
*           ED(CLOCKX1,TCWAPGT);    /* EDIT CLOCK INTO MSG           */ 02988000
         ED    CLOCKX1(9,WPLPTR),TCWAPGT(TCWAPTR)                  0691 02989000
*           CLOCKX1(1)='=';         /* PUT = SIGN AFTER CLOCK        */ 02990000
         MVI   CLOCKX1(WPLPTR),C'='                                0692 02991000
*           GENERATE CODE(WTO    MF=(E,(1)));                      0693 02992000
*                                                                  0693 02993000
         WTO    MF=(E,(1))                                              02994000
*/********************************************************************/ 02995000
*/*                                                                  */ 02996000
*/* ASSEMBLE THE MESSAGE FOR DISPLAYING THE LOCAL TIME AND DATE,     */ 02997000
*/* AND WRITE THE MESSAGE.                                           */ 02998000
*/*                                                                  */ 02999000
*/********************************************************************/ 03000000
*                                                                  0694 03001000
*           WPLPTR=ADDR(MSGXXX2)+LENGTH(WPLRF);                    0694 03002000
*                                                                  0694 03003000
         LA    @07,MSGXXX2                                         0694 03004000
         LA    WPLPTR,8                                            0694 03005000
         ALR   WPLPTR,@07                                          0694 03006000
*/* C272600-273000                                           @YM04380*/ 03007000
*                                                                  0695 03008000
*           DATEX2=DTEPATRN;        /* EDITING PATTERN TO MSG        */ 03009000
         MVC   DATEX2(7,WPLPTR),DTEPATRN                           0695 03010000
*           ED(DATEX2,CVTDATE(2:4));/* EDIT DATE INTO MSG            */ 03011000
         ED    DATEX2(7,WPLPTR),CVTDATE+1(LCVTPTR)                 0696 03012000
*           DATEX2(1)='=';          /* PUT = SIGN AFTER DATE         */ 03013000
         MVI   DATEX2(WPLPTR),C'='                                 0697 03014000
*           CLOCKX2=CLKPATRN;       /* EDITING PATTERN TO MSG        */ 03015000
         MVC   CLOCKX2(9,WPLPTR),CLKPATRN                          0698 03016000
*           ED(CLOCKX2,TCWAPLT);    /* EDIT CLOCK INTO MSG           */ 03017000
         ED    CLOCKX2(9,WPLPTR),TCWAPLT(TCWAPTR)                  0699 03018000
*           CLOCKX2(1)='=';         /* PUT = SIGN AFTER CLOCK        */ 03019000
         MVI   CLOCKX2(WPLPTR),C'='                                0700 03020000
*           WPLPTR=ADDR(MSGXXX2);   /* MSG ADDR TO WPL               */ 03021000
         LR    WPLPTR,@07                                          0701 03022000
*           WPLRPTRA=ADDR(TCWATXT); /* REPLY ADDR TO WPL             */ 03023000
         LA    @07,TCWATXT(,TCWAPTR)                               0702 03024000
         STCM  @07,7,WPLRPTRA(WPLPTR)                              0702 03025000
*           WPLRECB=ADDR(TODECB);   /* ECB ADDR TO WPL               */ 03026000
         LA    @07,TODECB                                          0703 03027000
         ST    @07,WPLRECB(,WPLPTR)                                0703 03028000
*           TODECB=0;                                              0704 03029000
         SLR   @07,@07                                             0704 03030000
         ST    @07,TODECB                                          0704 03031000
*           TCWATXT='';                                            0705 03032000
         MVI   TCWATXT(TCWAPTR),C' '                               0705 03033000
         MVC   TCWATXT+1(39,TCWAPTR),TCWATXT(TCWAPTR)              0705 03034000
*           GENERATE CODE;                                         0706 03035000
*                                                                  0706 03036000
*                                /*                                     03037000
         WTOR  MF=(E,(1))                                         */    03038000
*/********************************************************************/ 03039000
*/*                                                                  */ 03040000
*/* WAIT FOR REPLY.                                                  */ 03041000
*/*                                                                  */ 03042000
*/********************************************************************/ 03043000
*                                                                  0707 03044000
*           REG1=ADDR(TODECB);                                     0707 03045000
         LA    REG1,TODECB                                         0707 03046000
*           GENERATE CODE(WAIT  1,ECB=(1));                        0708 03047000
         WAIT  1,ECB=(1)                                                03048000
*         END;                                                     0709 03049000
*       ELSE                                                       0710 03050000
*                                                                  0710 03051000
*/********************************************************************/ 03052000
*/*                                                                  */ 03053000
*/* IF NO PROMPTING IS REQUIRED, SIMULATE THE OPERATORS ACCEPTANCE   */ 03054000
*/* OF THE CLOCK VALUE BY PLACING A CAPITAL U IN THE REPLY BUFFER.   */ 03055000
*/*                                                                  */ 03056000
*/********************************************************************/ 03057000
*                                                                  0710 03058000
*         TCWATXT(1:2)=CAPU;                                       0710 03059000
*                                                                  0710 03060000
         B     @RC00679                                            0710 03061000
@RF00679 MVC   TCWATXT(2,TCWAPTR),CAPU                             0710 03062000
*/********************************************************************/ 03063000
*/*                                                                  */ 03064000
*/* SEE IF THE OPERATOR HAS ACCEPTED THE CLOCK VALUES.               */ 03065000
*/*                                                                  */ 03066000
*/********************************************************************/ 03067000
*                                                                  0711 03068000
*       BAIPLCC='00'X;              /* CLEAR ERROR BYTE IN BASEA     */ 03069000
@RC00679 L     @07,CVTMSER(,LCVTPTR)                               0711 03070000
         MVI   BAIPLCC(@07),X'00'                                  0711 03071000
*       TCGNSET='0'B;               /* TURN OFF CLOCK NOT SET      0712 03072000
*                                      INDICATOR                     */ 03073000
         NI    TCGNSET(TCWAPTR),B'11110111'                        0712 03074000
*       IF TCWATXT(1:2)^=CAPU&TCWATXT(1:2)^=SMALLU THEN            0713 03075000
*                                                                  0713 03076000
         CLC   TCWATXT(2,TCWAPTR),CAPU                             0713 03077000
         BE    @RF00713                                            0713 03078000
         CLC   TCWATXT(2,TCWAPTR),SMALLU                           0713 03079000
         BE    @RF00713                                            0713 03080000
*/********************************************************************/ 03081000
*/*                                                                  */ 03082000
*/* IF NOT, INDICATE AN INTERNAL SET COMMAND, AND ISSUE SVC 34 USING */ 03083000
*/* THE OPERATOR'S REPLY AS THE COMMAND OPERAND(S).                  */ 03084000
*/* UPON RETURN, TURN OFF THE INTERNAL SET INDICATOR, AND TURN ON    */ 03085000
*/* THE CLOCK NOT SET INDICATOR.  THE LATTER ENSURES THAT MESSAGE    */ 03086000
*/* IEA888A  WILL BE ISSUED AGAIN, DISPLAYING THE NEW VALUES TO THE  */ 03087000
*/* OPERATOR.                                                        */ 03088000
*/*                                                                  */ 03089000
*/********************************************************************/ 03090000
*                                                                  0714 03091000
*         DO;                                                      0714 03092000
*           REG0=0;                                                0715 03093000
         SLR   REG0,REG0                                           0715 03094000
*           REG1=ADDR(TCWARPLY);                                   0716 03095000
         LA    REG1,TCWARPLY(,TCWAPTR)                             0716 03096000
*           BAINTSET='1'B;          /* INDICATE INTERNAL SET COMMAND */ 03097000
         OI    BAINTSET(@07),B'00100000'                           0717 03098000
*           GENERATE CODE(MGCR  (1));                              0718 03099000
         MGCR  (1)                                                      03100000
*           BAINTSET='0'B;                                         0719 03101000
         L     @07,CVTMSER(,LCVTPTR)                               0719 03102000
         NI    BAINTSET(@07),B'11011111'                           0719 03103000
*           TCGNSET='1'B;                                          0720 03104000
         OI    TCGNSET(TCWAPTR),B'00001000'                        0720 03105000
*         END;                                                     0721 03106000
*     END;                                                         0722 03107000
@RF00713 DS    0H                                                  0722 03108000
@DE00652 L     @07,CVTMSER(,LCVTPTR)                               0722 03109000
         CLI   BAIPLCC(@07),X'00'                                  0722 03110000
         BNE   @DL00652                                            0722 03111000
         TM    TCGNSET(TCWAPTR),B'00001000'                        0722 03112000
         BO    @DL00652                                            0722 03113000
*   END;                                                           0723 03114000
*                                                                  0723 03115000
*/********************************************************************/ 03116000
*/*                                                                  */ 03117000
*/* RETURN TO THE CALLER.                                            */ 03118000
*/*                                                                  */ 03119000
*/********************************************************************/ 03120000
*                                                                  0724 03121000
*   RESPECIFY                                                      0724 03122000
*     CVTMAP BASED(CVTPTR);                                        0724 03123000
*                                                                  0725 03124000
*/********************************************************************/ 03125000
*/*                                                                  */ 03126000
*/* THIS PROCEDURE CONVERTS TOD CLOCK VALUES TO PACKED DATE AND TIME.*/ 03127000
*/* IT USES A 2 STEP PROCESS.  THE FIRST STEP FACTORS COMPLETE DAYS  */ 03128000
*/* ELAPSED SINCE THE EPOCH OUT OF THE HIGH ORDER 39 BITS OF THE TOD */ 03129000
*/* CLOCK VALUE, AND THEN CONVERTS TO YEAR AND DAY OF YEAR.  THE     */ 03130000
*/* SECOND STEP TAKES THE REMAINDER OF THE FIRST STEP, CONCATENATES  */ 03131000
*/* IT TO THE LOW ORDER 13 BITS OF THE TOD CLOCK, AND CONVERTS TO    */ 03132000
*/* HOURS, MINUTES, AND SECONDS ELAPSED SINCE THE LAST MIDNIGHT.     */ 03133000
*/*                                                                  */ 03134000
*/********************************************************************/ 03135000
*                                                                  0725 03136000
*CUTODATE:                                                         0725 03137000
*   PROCEDURE(PARMTIME,PARMDATE,CONVALUE) OPTIONS(NOSAVE,NOSAVEAREA);   03138000
         B     @PB00006                                            0725 03139000
CUTODATE MVC   @PC00006(12),0(@01)                                 0725 03140000
*   DECLARE                                                        0726 03141000
*     PARMTIME CHAR(4);             /* CONVERTED PACKED TIME         */ 03142000
*   DECLARE                                                        0727 03143000
*     PARMDATE CHAR(4);             /* CONVERTED PACKED DATE         */ 03144000
*   DECLARE                                                        0728 03145000
*     1 CONVALUE BIT(64) BDY(WORD), /* 64 BIT TOD CLOCK VALUE TO BE     03146000
*                                      CONVERTED             @ZA10129*/ 03147000
*       3 HO32BITS FIXED(32) UNSIGNED,/* H. O. TOD CLOCK     @ZA10129*/ 03148000
*       3 LO32BITS FIXED(32) UNSIGNED;/* L. O. TOD CLOCK     @ZA10129*/ 03149000
*/********************************************************************/ 03150000
*/*                                                                  */ 03151000
*/* SAVE THE RETURN REGISTER ACROSS THE ROUTINE.                     */ 03152000
*/*                                                                  */ 03153000
*/********************************************************************/ 03154000
*                                                                  0729 03155000
*   RETSAVE=REG14;                                                 0729 03156000
*                                                                  0729 03157000
         ST    REG14,RETSAVE                                       0729 03158000
*/********************************************************************/ 03159000
*/*                                                                  */ 03160000
*/* SAVE THE LOW ORDER PART OF THE TOD CLOCK FOR LATER USE.  PUT THE */ 03161000
*/* TOD CLOCK VALUE TO BE CONVERTED INTO REGISTERS 14 AND 15.  NOTE  */ 03162000
*/* THAT BIT 19 OF REGISTER 15 (BIT 51 OF THE TOD CLOCK) REPRESENTS  */ 03163000
*/* 1 MICROSECOND.                                                   */ 03164000
*/*                                                                  */ 03165000
*/********************************************************************/ 03166000
*                                                                  0730 03167000
*   REG1=LO32BITS;                  /*                       @ZA10129*/ 03168000
         L     @07,@PC00006+8                                      0730 03169000
         L     REG1,LO32BITS(,@07)                                 0730 03170000
*   LM(REG14,REG15,CONVALUE);       /*                       @ZA10129*/ 03171000
         LM    REG14,REG15,CONVALUE(@07)                           0731 03172000
*/********************************************************************/ 03173000
*/*                                                                  */ 03174000
*/* THE NEXT 2 INSTRUCTIONS EFFECTIVELY SHIFT BIT 51 OF THE TOD CLOCK*/ 03175000
*/* VALUE TO BIT 63 OF THE DIVIDEND, AND THEN DIVIDE THE RESULTANT   */ 03176000
*/* MICROSECOND VALUE BY 86,400,000,000, THE NUMBER OF MICROSECONDS  */ 03177000
*/* IN 1 DAY.  THIS DIVISION PROVIDES DAYS ELAPSED SINCE THE EPOCH   */ 03178000
*/* IN REGISTER 15, AND THE NUMBER OF 8192 (2**13) MICROSECOND UNITS */ 03179000
*/* ELAPSED SINCE THE LAST MIDNIGHT IN REGISTER 14.                  */ 03180000
*/*                                                                  */ 03181000
*/* NOTE THAT 86,400,000,000 IS EQUAL TO (86,400)*(1,000,000), OR    */ 03182000
*/* THE NUMBER OF SECONDS IN A DAY TIMES THE NUMBER OF MICROSECONDS  */ 03183000
*/* IN A SECOND.                                                     */ 03184000
*/*              86,400 = (2**7)*(5**2)*(3**3)                       */ 03185000
*/*           1,000,000 = (2**6)*(5**6)                              */ 03186000
*/*      86,400,000,000 = (2**13)*(5**8)*(3**3)                      */ 03187000
*/*                                                                  */ 03188000
*/* SINCE A SHIFT OF 12 BITS TO THE RIGHT IS THE EQUIVALENT OF       */ 03189000
*/* 1/(2**12), THE SHIFT AND DIVISION INSTRUCTIONS ARE THE SAME AS   */ 03190000
*/* 1/((2**25)*(5**8)*(3**3)).  THE SHIFT DOES 1/(2**25) AND THE     */ 03191000
*/* DIVISION DOES 1/((5**8)*(3**3)).                                 */ 03192000
*/*                                                                  */ 03193000
*/********************************************************************/ 03194000
*                                                                  0732 03195000
*   SRDL(REG14,25);                 /* SHIFT 12 RIGHT AND DIVIDE BY     03196000
*                                      2**13                 @ZA10129*/ 03197000
         SRDL  REG14,25                                            0732 03198000
*   GENERATE CODE REFS(DAYSFACT) SETS(REG14,REG15)                 0733 03199000
*       (D     REG14,DAYSFACT);     /* DIVIDE BY (5**8)*(3**3)       */ 03200000
         D     REG14,DAYSFACT                                           03201000
*/********************************************************************/ 03202000
*/*                                                                  */ 03203000
*/* ADD 1 DAY.  (NOTE: ADDING 1 MAKES UP FOR THE FACT THAT DATE IS   */ 03204000
*/* ONE-ORIGINED.)                                                   */ 03205000
*/*                                                                  */ 03206000
*/********************************************************************/ 03207000
*                                                                  0734 03208000
*   REG15=REG15+1;                                                 0734 03209000
*                                                                  0734 03210000
         AL    REG15,@CF00096                                      0734 03211000
*/********************************************************************/ 03212000
*/*                                                                  */ 03213000
*/* SEE IF A LOCAL VALUE IS BEING CALCULATED, AND IF SO, SAVE THE    */ 03214000
*/* NUMBER OF DAYS THAT WILL HAVE ELAPSED AT LOCAL MIDNIGHT IN THE   */ 03215000
*/* TOD CLOCK WORKAREA.                                              */ 03216000
*/*                                                                  */ 03217000
*/********************************************************************/ 03218000
*                                                                  0735 03219000
*   IF TCGLELD='1'B THEN                                           0735 03220000
         TM    TCGLELD(TCWAPTR),B'00000100'                        0735 03221000
         BNO   @RF00735                                            0735 03222000
*     TCELDAYS=REG15;                                              0736 03223000
         ST    REG15,TCELDAYS(,TCWAPTR)                            0736 03224000
*   REG15=4*REG15;                  /* MULTIPLY DAYS ELAPSED BY 4    */ 03225000
@RF00735 SLL   REG15,2                                             0737 03226000
*/********************************************************************/ 03227000
*/*                                                                  */ 03228000
*/* SAVE REGISTER 14 FOR LATER USE.  THEN CLEAR IT FOR DIVISION.     */ 03229000
*/* (NOTE:  REGISTER 14 CONTAINS THE NUMBER OF 2**13 MICROSECOND     */ 03230000
*/* UNITS ELAPSED SINCE THE LAST MIDNIGHT.)                          */ 03231000
*/*                                                                  */ 03232000
*/********************************************************************/ 03233000
*                                                                  0738 03234000
*   REG0=REG14;                                                    0738 03235000
         LR    REG0,REG14                                          0738 03236000
*   REG14=0;                                                       0739 03237000
*                                                                  0739 03238000
         SLR   REG14,REG14                                         0739 03239000
*/********************************************************************/ 03240000
*/*                                                                  */ 03241000
*/* DIVIDE BY THE NUMBER OF DAYS IN A "NORMAL" 4 YEAR PERIOD GIVING  */ 03242000
*/* YEAR OF THE CENTURY IN REGISTER 15.  DIVIDE THE REMAINDER BY 4   */ 03243000
*/* GIVING DAYS ELAPSED SINCE THE BEGINNING OF THE YEAR  (EXCEPT     */ 03244000
*/* 1900) IN REGISTER 14.                                            */ 03245000
*/*                                                                  */ 03246000
*/********************************************************************/ 03247000
*                                                                  0740 03248000
*   GENERATE CODE REFS(DAYS4YRS) SETS(REG14,REG15)                 0740 03249000
*       (D     REG14,DAYS4YRS);                                    0740 03250000
         D     REG14,DAYS4YRS                                           03251000
*   SRL(REG14,2);                                                  0741 03252000
*                                                                  0741 03253000
         SRL   REG14,2                                             0741 03254000
*/********************************************************************/ 03255000
*/*                                                                  */ 03256000
*/* TEST FOR A YEAR NOT 1900.                                        */ 03257000
*/*                                                                  */ 03258000
*/********************************************************************/ 03259000
*                                                                  0742 03260000
*   IF REG15^=0 THEN                                               0742 03261000
*                                                                  0742 03262000
         LTR   REG15,REG15                                         0742 03263000
         BZ    @RF00742                                            0742 03264000
*/********************************************************************/ 03265000
*/*                                                                  */ 03266000
*/* IF THE YEAR IS NOT 1900, ADD 1 DAY TO MAKE IT ONE-ORIGIN.  THEN  */ 03267000
*/* SHIFT YEARS FOR CORRECT ALIGNMENT WITH DAYS.                     */ 03268000
*/*                                                                  */ 03269000
*/********************************************************************/ 03270000
*                                                                  0743 03271000
*     DO;                                                          0743 03272000
*       REG14=REG14+1;                                             0744 03273000
         AL    REG14,@CF00096                                      0744 03274000
*       REG15=REG15*K1000;                                         0745 03275000
         LR    @07,REG15                                           0745 03276000
         MH    @07,K1000                                           0745 03277000
         LR    REG15,@07                                           0745 03278000
*     END;                                                         0746 03279000
*                                                                  0746 03280000
*/********************************************************************/ 03281000
*/*                                                                  */ 03282000
*/* ADD DAYS TO YEARS.                                               */ 03283000
*/*                                                                  */ 03284000
*/********************************************************************/ 03285000
*                                                                  0747 03286000
*   REG15=REG15+REG14;                                             0747 03287000
*                                                                  0747 03288000
@RF00742 ALR   REG15,REG14                                         0747 03289000
*/********************************************************************/ 03290000
*/*                                                                  */ 03291000
*/* CONVERT TO PACKED DECIMAL AND PLACE IN THE PARAMETER AREA.       */ 03292000
*/* THEN, MAKE THE SIGN A HEX F SO THAT THE VALUE CAN BE UNPACKED.   */ 03293000
*/*                                                                  */ 03294000
*/********************************************************************/ 03295000
*                                                                  0748 03296000
*   CVD(REG15,PARMDATE);                                           0748 03297000
         L     @07,@PC00006+4                                      0748 03298000
         CVD   REG15,@TS00001                                      0748 03299000
         MVC   PARMDATE(4,@07),@TS00001+4                          0748 03300000
*   PARMDATE(4)=PARMDATE(4)|'0F'X;  /*                       @OY02031*/ 03301000
         OI    PARMDATE+3(@07),X'0F'                               0749 03302000
*/********************************************************************/ 03303000
*/*                                                                  */ 03304000
*/* CONCATENATE THE LOW ORDER 13 BITS OF THE TOD CLOCK TO THE        */ 03305000
*/* REMAINDER FROM THE PREVIOUS DIVISION AND SHIFT THE CONCATENATED  */ 03306000
*/* VALUE SO THAT TOD CLOCK BIT 51 (1 MICROSECOND) IS IN THE UNITS   */ 03307000
*/* POSITION OF THE DIVIDEND, BIT 63. THEN DIVIDE BY 1 MILLION TO    */ 03308000
*/* GIVE THE NUMBER OF SECONDS ELAPSED SINCE THE LAST MIDNIGHT IN    */ 03309000
*/* REGISTER 1.                                                      */ 03310000
*/*                                                                  */ 03311000
*/********************************************************************/ 03312000
*                                                                  0750 03313000
*   SLL(REG1,7);                    /* THROW AWAY TOD CLOCK BITS   0750 03314000
*                                      33-39 THAT WERE USED IN THE 0750 03315000
*                                      INITIAL CALCULATIONS  @ZA10129*/ 03316000
         SLL   REG1,7                                              0750 03317000
*   SRDL(REG0,19);                  /* TOD CLOCK BIT 51 TO DIVIDEND     03318000
*                                      BIT 63                @ZA10129*/ 03319000
         SRDL  REG0,19                                             0751 03320000
*   GENERATE CODE REFS(MICSSEC) SETS(REG0,REG1)(D     REG0,MICSSEC);    03321000
*                                                                  0752 03322000
         D     REG0,MICSSEC                                             03323000
*/********************************************************************/ 03324000
*/*                                                                  */ 03325000
*/* DIVIDE SECONDS ELAPSED SINCE THE LAST MIDNIGHT BY 60 GIVING SEC- */ 03326000
*/* ONDS ELAPSED SINCE THE LAST MINUTE IN REGISTER 0, AND MINUTES    */ 03327000
*/* ELAPSED SINCE THE LAST MIDNIGHT IN REGISTER 1.                   */ 03328000
*/*                                                                  */ 03329000
*/********************************************************************/ 03330000
*                                                                  0753 03331000
*   REG0=0;                                                        0753 03332000
         SLR   REG0,REG0                                           0753 03333000
*   GENERATE CODE REFS(REG0,SECSMIN)(D     REG0,SECSMIN);          0754 03334000
*                                                                  0754 03335000
         D     REG0,SECSMIN                                             03336000
*/********************************************************************/ 03337000
*/*                                                                  */ 03338000
*/* SAVE THE SECONDS AND CLEAR REGISTER 0 FOR DIVISION.              */ 03339000
*/*                                                                  */ 03340000
*/********************************************************************/ 03341000
*                                                                  0755 03342000
*   REG14=REG0;                                                    0755 03343000
         LR    REG14,REG0                                          0755 03344000
*   REG0=0;                                                        0756 03345000
*                                                                  0756 03346000
         SLR   REG0,REG0                                           0756 03347000
*/********************************************************************/ 03348000
*/*                                                                  */ 03349000
*/* DIVIDE MINUTES ELAPSED SINCE MIDNIGHT BY 60 GIVING MINUTES ELAP- */ 03350000
*/* SED SINCE THE LAST HOUR IN REGISTER 0, AND HOURS ELAPSED SINCE   */ 03351000
*/* THE LAST MIDNIGHT IN REGISTER 1.                                 */ 03352000
*/*                                                                  */ 03353000
*/********************************************************************/ 03354000
*                                                                  0757 03355000
*   GENERATE CODE REFS(REG0,MINSHOUR)(D     REG0,MINSHOUR);        0757 03356000
*                                                                  0757 03357000
         D     REG0,MINSHOUR                                            03358000
*/********************************************************************/ 03359000
*/*                                                                  */ 03360000
*/* SHIFT HOURS AND MINUTES FOR CORRECT ALIGNMENT AND ADD TO SECONDS.*/ 03361000
*/* CONVERT TO PACKED DECIMAL AND PLACE IN THE PARAMETER AREA.       */ 03362000
*/*                                                                  */ 03363000
*/********************************************************************/ 03364000
*                                                                  0758 03365000
*   REG14=REG14+(REG0*K100)+(REG1*K10000);                         0758 03366000
         LR    @07,REG0                                            0758 03367000
         MH    @07,K100                                            0758 03368000
         ALR   @07,REG14                                           0758 03369000
         LR    @06,REG1                                            0758 03370000
         MH    @06,K10000                                          0758 03371000
         ALR   @07,@06                                             0758 03372000
         LR    REG14,@07                                           0758 03373000
*   CVD(REG14,PARMTIME);                                           0759 03374000
*                                                                  0759 03375000
         L     @07,@PC00006                                        0759 03376000
         CVD   REG14,@TS00001                                      0759 03377000
         MVC   PARMTIME(4,@07),@TS00001+4                          0759 03378000
*/********************************************************************/ 03379000
*/*                                                                  */ 03380000
*/* RETRIEVE THE CALLER'S RETURN ADDRESS.                            */ 03381000
*/*                                                                  */ 03382000
*/********************************************************************/ 03383000
*                                                                  0760 03384000
*   REG14=RETSAVE;                                                 0760 03385000
*                                                                  0760 03386000
         L     REG14,RETSAVE                                       0760 03387000
*/********************************************************************/ 03388000
*/*                                                                  */ 03389000
*/* RETURN TO THE CALLER                                             */ 03390000
*/*                                                                  */ 03391000
*/********************************************************************/ 03392000
*                                                                  0761 03393000
*   END CUTODATE;                                                  0761 03394000
@EL00006 DS    0H                                                  0761 03395000
@EF00006 DS    0H                                                  0761 03396000
@ER00006 BR    @14                                                 0761 03397000
*   END IEAVRCOM;                                                  0762 03398000
@EL00005 DS    0H                                                  0762 03399000
@EF00005 DS    0H                                                  0762 03400000
@ER00005 LM    @14,@12,12(@13)                                     0762 03401000
         BR    @14                                                 0762 03402000
*   RESPECIFY                                                      0763 03403000
*     CVTMAP BASED(CVTPTR);                                        0763 03404000
*   RESPECIFY                                                      0764 03405000
*    (LCVTPTR) UNRESTRICTED;                                       0764 03406000
*                                                                  0765 03407000
*/********************************************************************/ 03408000
*/*                                                                  */ 03409000
*/*            IEAVRSYN--TOD CLOCK SYNCHRONIZING ROUTINE             */ 03410000
*/*                                                                  */ 03411000
*/* THIS ROUTINE RECEIVES CONTROL FROM IEAVRINT AND IEAVRSSC WHEN IT */ 03412000
*/* HAS BEEN DETERMINED THAT THE TOD CLOCKS NEED TO BE SYNCHRONIZED. */ 03413000
*/* IT IS PASSED A LIST OF CLOCKS, THE FIRST ONE BEING THE ONE TO    */ 03414000
*/* WHICH THE OTHERS WILL BE SYNCHRONIZED.                           */ 03415000
*/*                                                                  */ 03416000
*/* WHEN THE CLOCKS HAVE APPARENTLY BEEN SYNCHRONIZED, OR IF THEY    */ 03417000
*/* CANNOT BE SYNCHRONIZED AFTER 5 ATTEMPTS, CONTROL IS RETURNED TO  */ 03418000
*/* THE CALLER.                                                      */ 03419000
*/*                                                                  */ 03420000
*/********************************************************************/ 03421000
*                                                                  0765 03422000
*IEAVRSYN:                                                         0765 03423000
*   PROCEDURE OPTIONS(NOSAVEAREA);                                 0765 03424000
*                                                                  0765 03425000
IEAVRSYN STM   @14,@12,12(@13)                                     0765 03426000
*/********************************************************************/ 03427000
*/*                                                                  */ 03428000
*/* INITIALIZE THE SECURITY SWITCH RELEASED INDICATOR IN THE TOD     */ 03429000
*/* CLOCK WORKAREA SO THE LOOP WILL BE EXECUTED AT LEAST ONCE.       */ 03430000
*/*                                                                  */ 03431000
*/********************************************************************/ 03432000
*                                                                  0766 03433000
*   TCGNSET='1'B;                                                  0766 03434000
         OI    TCGNSET(TCWAPTR),B'00001000'                        0766 03435000
*   DO WHILE TCGNSET='1'B;                                         0767 03436000
*                                                                  0767 03437000
         B     @DE00767                                            0767 03438000
@DL00767 DS    0H                                                  0768 03439000
*/********************************************************************/ 03440000
*/*                                                                  */ 03441000
*/* SEARCH THE TCWA ENTRIES UNTIL A CLOCK REQUIRING SYNCHRONIZATION  */ 03442000
*/* IS FOUND. START WITH THE SECOND ENTRY SINCE THE FIRST REPRESENTS */ 03443000
*/* THE CLOCK BEING SYNCHRONIZED TO (HEREAFTER CALLED THE MASTER),   */ 03444000
*/* AND SO CANNOT REQUIRE SYNCHRONIZING.                             */ 03445000
*/*                                                                  */ 03446000
*/********************************************************************/ 03447000
*                                                                  0768 03448000
*     REG11=PTREBEG+LENGTH(TCENTRY);/* GET POINTER TO 2ND TCWA ENTRY */ 03449000
         LA    REG11,16                                            0768 03450000
         AL    REG11,PTREBEG                                       0768 03451000
*     RESPECIFY                                                    0769 03452000
*      (REG2) RESTRICTED;                                          0769 03453000
*     DO REG2=TCCPUCNT-1 TO 1 BY-1 WHILE TCWAPCCA->PCCASYNC='0'B;  0770 03454000
         LH    REG2,TCCPUCNT(,TCWAPTR)                             0770 03455000
         BCTR  REG2,0                                              0770 03456000
         B     @DE00770                                            0770 03457000
@DL00770 L     @07,TCWAPCCA(,REG11)                                0770 03458000
         TM    PCCASYNC(@07),B'01000000'                           0770 03459000
         BNZ   @DC00770                                            0770 03460000
*       REG11=REG11+LENGTH(TCENTRY);/* POINT TO NEXT TCWA ENTRY      */ 03461000
         AL    REG11,@CF00045                                      0771 03462000
*     END;                                                         0772 03463000
         BCTR  REG2,0                                              0772 03464000
@DE00770 LTR   REG2,REG2                                           0772 03465000
         BP    @DL00770                                            0772 03466000
@DC00770 DS    0H                                                  0773 03467000
*     REG2=REG11;                   /* SAVE POINTER TO SELECTED ENTRY*/ 03468000
         LR    REG2,REG11                                          0773 03469000
*/********************************************************************/ 03470000
*/*                                                                  */ 03471000
*/* SET UP WTOR PARAMETER LIST FOR MESSAGE IEA889A.                  */ 03472000
*/*                                                                  */ 03473000
*/********************************************************************/ 03474000
*                                                                  0774 03475000
*     WPLPTR=ADDR(MSGDEPSS);        /* ADDRESSABILITY FOR PARMLIST   */ 03476000
         LA    WPLPTR,MSGDEPSS                                     0774 03477000
*     WPLRPTRA=ADDR(TCWATXT);       /* REPLY ADDRESS TO PARMLIST     */ 03478000
         LA    @07,TCWATXT(,TCWAPTR)                               0775 03479000
         STCM  @07,7,WPLRPTRA(WPLPTR)                              0775 03480000
*     WPLRECB=ADDR(TODECB);         /* ECB ADDRESS TO PARMLIST       */ 03481000
         LA    @07,TODECB                                          0776 03482000
         ST    @07,WPLRECB(,WPLPTR)                                0776 03483000
*/********************************************************************/ 03484000
*/*                                                                  */ 03485000
*/* TELL THE OPERATOR TO DEPRESS THE TOD CLOCK SECURITY SWITCH SO    */ 03486000
*/* THAT THE CLOCKS CAN BE SET.  GIVE HIM 30 SECONDS TO DO SO.  IF HE*/ 03487000
*/* DOES NOT COMPLY WITHIN THAT PERIOD, REPEAT THE MESSAGE AND BEGIN */ 03488000
*/* A NEW TIME PERIOD. REPEAT THIS PROCESS UNTIL HE COMPLIES.        */ 03489000
*/*                                                                  */ 03490000
*/********************************************************************/ 03491000
*                                                                  0777 03492000
*     DO WHILE TCGNSET='1'B;                                       0777 03493000
*                                                                  0777 03494000
         B     @DE00777                                            0777 03495000
@DL00777 DS    0H                                                  0778 03496000
*/********************************************************************/ 03497000
*/*                                                                  */ 03498000
*/* MOVE THE HIGH ORDER 32 BITS OF THE CURRENT VALUE OF THE "MASTER" */ 03499000
*/* CLOCK TO THE AREA FROM WHICH A CLOCK TO BE SYNCHRONIZED WILL     */ 03500000
*/* RETRIEVE A TEMPORARY CLOCK SETTING VALUE, AND SET THE LOW ORDER  */ 03501000
*/* 32 BITS TO ZERO.                                                 */ 03502000
*/*                                                                  */ 03503000
*/* (NOTE:  THIS VALUE IS THE VALUE WITH WHICH SOME CLOCK REQUIRING  */ 03504000
*/* SYNCHRONIZATION WILL BE INITIALLY SET SO THAT IT CAN BE DETER-   */ 03505000
*/* MINED IF THE OPERATOR HAS DEPRESSED THE SECURITY SWITCH.  THIS   */ 03506000
*/* APPROXIMATE VALUE MUST BE USED IN ORDER TO PREVENT A POTENTIAL   */ 03507000
*/* LOOP IN THE TIME SVC (SVC 11), WHILE THE LOW ORDER MUST BE ZERO  */ 03508000
*/* TO ACOMMODATE THE SYSTEM STATUS RECORDER OF THE MODEL 158.       */ 03509000
*/*                                                                  */ 03510000
*/********************************************************************/ 03511000
*                                                                  0778 03512000
*       TCWACVL=PTREBEG->TCWACLKL;                                 0778 03513000
         L     @07,PTREBEG                                         0778 03514000
         MVC   TCWACVL(4,TCWAPTR),TCWACLKL(@07)                    0778 03515000
*       TCWACVR=0;                                                 0779 03516000
*                                                                  0779 03517000
         SLR   @07,@07                                             0779 03518000
         ST    @07,TCWACVR(,TCWAPTR)                               0779 03519000
*/********************************************************************/ 03520000
*/*                                                                  */ 03521000
*/* CLEAR THE ECB, AND TELL THE OPERATOR TO DEPRESS THE TOD CLOCK    */ 03522000
*/* SECURITY SWITCH.                                                 */ 03523000
*/*                                                                  */ 03524000
*/********************************************************************/ 03525000
*                                                                  0780 03526000
*       TODECB=0;                   /* CLEAR ECB                     */ 03527000
         ST    @07,TODECB                                          0780 03528000
*       WPLPTR=ADDR(MSGDEPSS);      /* GET PARMLIST ADDR     @YM06228*/ 03529000
         LA    WPLPTR,MSGDEPSS                                     0781 03530000
*       GENERATE CODE(WTOR  MF=(E,(1)));                           0782 03531000
*                                                                  0782 03532000
         WTOR  MF=(E,(1))                                               03533000
*/********************************************************************/ 03534000
*/*                                                                  */ 03535000
*/* WAIT FOR THE OPERATOR TO REPLY BEFORE TRYING TO SET THE CLOCK.   */ 03536000
*/* (NOTE:  WTOR/WAIT IS USED HERE RATHER THAN WTO, EVEN THOUGH NO   */ 03537000
*/* PARTICULAR REPLY IS REQUIRED.  THE PURPOSE IS TO ALLOW THE       */ 03538000
*/* SYSTEM TO DISPATCH THE COMMUNICATIONS TASK IN ORDER TO GET THE   */ 03539000
*/* MESSAGE TO THE OPERATOR BEFORE THE 30 SECOND LOOP ATTEMPTING TO  */ 03540000
*/* SET THE CLOCK BEGINS.  IF WTO WAS USED, THE COMMUNICATIONS TASK  */ 03541000
*/* MIGHT NOT BE DISPATCHED, AND THE LOOP WOULD BE EXECUTED WITHOUT  */ 03542000
*/* TELLING THE OPERATOR WHAT TO DO.)                                */ 03543000
*/*                                                                  */ 03544000
*/********************************************************************/ 03545000
*                                                                  0783 03546000
*       REG1=ADDR(TODECB);          /* GET ECB ADDRESS               */ 03547000
         LA    REG1,TODECB                                         0783 03548000
*       GENERATE CODE(WAIT  1,ECB=(1));                            0784 03549000
*                                                                  0784 03550000
         WAIT  1,ECB=(1)                                                03551000
*/********************************************************************/ 03552000
*/*                                                                  */ 03553000
*/* SET UP THE INTERFACE TO IPC SO THAT THE CLOCK REQUIRING SYN-     */ 03554000
*/* CHRONIZATION WILL ATTEMPT TO SET ITS CLOCK AND SET THE SECURITY  */ 03555000
*/* SWITCH RELEASED INDICATOR.  (NOTE: REGISTER 2 CONTAINS A POINTER */ 03556000
*/* TO THE TCWA ENTRY FOR A CPU WHOSE CLOCK REQUIRES SYNCHRONIZING.) */ 03557000
*/*                                                                  */ 03558000
*/********************************************************************/ 03559000
*                                                                  0785 03560000
*       REG1=REG2->TCWAPCCA;        /* GET PCCA ADDRESS              */ 03561000
         L     REG1,TCWAPCCA(,REG2)                                0785 03562000
*       REG12=ADDR(DELTA7);         /* GET ROUTINE ADDRESS           */ 03563000
         LA    REG12,DELTA7                                        0786 03564000
*       REG11=ADDR(TCWA);           /* GET PARAMETER ADDRESS         */ 03565000
         LR    REG11,TCWAPTR                                       0787 03566000
*       GENERATE CODE REFS(CVTIPCRI,CVT)                           0788 03567000
*           (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));             0788 03568000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        03569000
*     END;                                                         0789 03570000
@DE00777 TM    TCGNSET(TCWAPTR),B'00001000'                        0789 03571000
         BO    @DL00777                                            0789 03572000
*     RESPECIFY                                                    0790 03573000
*      (REG2) UNRESTRICTED;                                        0790 03574000
*                                                                  0790 03575000
*/********************************************************************/ 03576000
*/*                                                                  */ 03577000
*/* PERFORM THE SYNCHRONIZING PROCEDURE UNTIL ONE OR MORE OF THE     */ 03578000
*/* FOLLOWING EVENTS OCCUR:                                          */ 03579000
*/*   (1) THE PROCEDURE IS COMPLETED IN LESS THAT 2**20 MICROSECONDS */ 03580000
*/*   (2) THE PROCEDURE IS PERFORMED 5 TIMES                         */ 03581000
*/*   (3) THE OPERATOR PREMATURELY RELEASES THE TOD CLOCK SECURITY   */ 03582000
*/*       SWITCH                                                     */ 03583000
*/* THE PROCEDURE CONSISTS OF THE FOLLOWING:                         */ 03584000
*/*  (1) OBTAINING A VALUE WITH WHICH ALL CLOCKS REQUIRING SYNCHRON- */ 03585000
*/*      IZATION ARE TO BE SET                                       */ 03586000
*/*  (2) SIGNALING  ALL CPU'S WITH SUCH CLOCKS TO SET THE TOD SYNC   */ 03587000
*/*      BIT TO ONE, AND TO SET THEIR CLOCKS TO THE GIVEN VALUE.     */ 03588000
*/*      NOTE:  SETTING THE TOD SYNC BIT CAUSES THE CLOCK TO ENTER   */ 03589000
*/*      THE STOPPED STATE WHEN IT IS SET.  SUBSEQUENTLY, WHEN BIT 31*/ 03590000
*/*      OF A RUNNING CLOCK CHANGES, THE STOPPED CLOCKS WILL START.  */ 03591000
*/*  (3) AGAIN SIGNALING ALL CPU'S WITH CLOCKS REQUIRING SYNCHRONI-  */ 03592000
*/*      ZATION TO SET THEIR CLOCKS TO THE GIVEN VALUE.  NOTE: THIS  */ 03593000
*/*      STEP IS REQUIRED WHERE MORE THAN 2 CLOCKS EXIST IN ORDER TO */ 03594000
*/*      GET ALL CLOCKS REQUIRING SYNCHRONIZATION STOPPED.  OTHER-   */ 03595000
*/*      WISE, A CLOCK WHICH HAD NOT YET BEEN STOPPED COULD CHANGE   */ 03596000
*/*      IN BIT 31 AND CAUSE THE ALREADY STOPPED CLOCKS TO START.    */ 03597000
*/*  (4) TESTING TO MAKE SURE THAT THE PROCEDURE HAS BEEN PERFORMED  */ 03598000
*/*      IN LESS THAN 2*20 MICROSECONDS.                             */ 03599000
*/*                                                                  */ 03600000
*/********************************************************************/ 03601000
*                                                                  0791 03602000
*     PTREBEG->TCWACLKL=0;          /* INITIALIZE THE MASTER'S CLOCK    03603000
*                                      VALUE IN HIS TCWA ENTRY       */ 03604000
         L     @02,PTREBEG                                         0791 03605000
         SLR   @07,@07                                             0791 03606000
         ST    @07,TCWACLKL(,@02)                                  0791 03607000
*/********************************************************************/ 03608000
*/*                                                                  */ 03609000
*/* PERFORM THE LOOP 5 TIMES AS LONG AS IT HAS NOT BEEN COMPLETED IN */ 03610000
*/* IN LESS THAN 2**20 MICROSECONDS.  (NOTE: THE FIRST TIME THRU THIS*/ 03611000
*/* LOOP, TCWAA2 WILL NOT EQUAL TCWACLKL BECAUSE THE LATTER WILL BE  */ 03612000
*/* 0, AND THE FORMER WILL CONTAIN THE LAST CPU TIMER VALUE STORED   */ 03613000
*/* ABOVE.)                                                          */ 03614000
*/*                                                                  */ 03615000
*/********************************************************************/ 03616000
*                                                                  0792 03617000
*     DO LOOPCTR=5 TO 1 BY-1 WHILE PTREBEG->TCWACLKL^=TCWAA2L;     0792 03618000
*                                                                  0792 03619000
         LA    @02,5                                               0792 03620000
         ST    @02,LOOPCTR                                         0792 03621000
@DL00792 L     @02,PTREBEG                                         0792 03622000
         CLC   TCWACLKL(4,@02),TCWAA2L(TCWAPTR)                    0792 03623000
         BE    @DC00792                                            0792 03624000
*/********************************************************************/ 03625000
*/*                                                                  */ 03626000
*/* SET UP THE INTERFACE TO IPC FOR OBTAINING THE CLOCK-SETTING      */ 03627000
*/* VALUE, AND THE BEGINNING VALUE.                                  */ 03628000
*/*                                                                  */ 03629000
*/********************************************************************/ 03630000
*                                                                  0793 03631000
*       REG1=PTREBEG->TCWAPCCA;     /* GET PCCA ADDRESS              */ 03632000
         L     REG1,TCWAPCCA(,@02)                                 0793 03633000
*       REG12=ADDR(DELTA4);         /* GET ROUTINE ADDRESS           */ 03634000
         LA    REG12,DELTA4                                        0794 03635000
*       REG11=ADDR(TCWA);           /* GET PARAMETER ADDRESS         */ 03636000
         LR    REG11,TCWAPTR                                       0795 03637000
*       GENERATE CODE REFS(CVTIPCRI,CVT)                           0796 03638000
*           (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));             0796 03639000
*                                                                  0796 03640000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        03641000
*/********************************************************************/ 03642000
*/*                                                                  */ 03643000
*/* CALCULATE THE VALUE BY SETTING THE LOW ORDER 32 BITS TO 0, AND   */ 03644000
*/* HIGH ORDER 32 BITS TO THE CURRENT VALUE OF THE HIGH ORDER 32     */ 03645000
*/* BITS PLUS 2**20 MICROSECONDS.  (NOTE: THE CLOCK SETTING VALUE    */ 03646000
*/* (TCWACVAL) WILL BE APPROXIMATELY 2**20 MICROSECONDS GREATER      */ 03647000
*/* THAN THE BEGIN VALUE(TCWAA2), BUT CAN NEVER BE MORE THAN 2**20   */ 03648000
*/* MICROSECONDS GREATER.)                                           */ 03649000
*/*                                                                  */ 03650000
*/********************************************************************/ 03651000
*                                                                  0797 03652000
*       TCWACVR=0;                                                 0797 03653000
         SLR   @02,@02                                             0797 03654000
         ST    @02,TCWACVR(,TCWAPTR)                               0797 03655000
*       TCWACVL=TCWAA2L+1;                                         0798 03656000
*                                                                  0798 03657000
         LA    @02,1                                               0798 03658000
         AL    @02,TCWAA2L(,TCWAPTR)                               0798 03659000
         ST    @02,TCWACVL(,TCWAPTR)                               0798 03660000
*/********************************************************************/ 03661000
*/*                                                                  */ 03662000
*/* LOOP THRU TWICE, FOR THE REASONS EXPLAINED ABOVE.                */ 03663000
*/*                                                                  */ 03664000
*/********************************************************************/ 03665000
*                                                                  0799 03666000
*       RESPECIFY                                                  0799 03667000
*        (REG2) RESTRICTED;                                        0799 03668000
*       DO SETLOOP=2 TO 1 BY-1;                                    0800 03669000
         LA    @07,2                                               0800 03670000
         ST    @07,SETLOOP                                         0800 03671000
@DL00800 DS    0H                                                  0801 03672000
*         REG2=PTREBEG+LENGTH(TCENTRY);/* GET PTR TO 2ND TCWA ENTRY  */ 03673000
         LA    REG2,16                                             0801 03674000
         AL    REG2,PTREBEG                                        0801 03675000
*/********************************************************************/ 03676000
*/*                                                                  */ 03677000
*/* BEGINNING WITH THE SECOND ONE, PROCESS ALL TCWA ENTRIES.         */ 03678000
*/* NOTE: THE FIRST ENTRY REPRESENTS THE CLOCK BEING SYNCHRONIZED TO.*/ 03679000
*/*                                                                  */ 03680000
*/********************************************************************/ 03681000
*                                                                  0802 03682000
*         DO I5=TCCPUCNT-1 TO 1 BY-1;                              0802 03683000
*                                                                  0802 03684000
         LH    @07,TCCPUCNT(,TCWAPTR)                              0802 03685000
         BCTR  @07,0                                               0802 03686000
         ST    @07,I5                                              0802 03687000
         B     @DE00802                                            0802 03688000
@DL00802 DS    0H                                                  0803 03689000
*/********************************************************************/ 03690000
*/*                                                                  */ 03691000
*/* TEST TO SEE IF THE CLOCK REPRESENTED BY THIS ENTRY REQUIRES SYN- */ 03692000
*/* CHRONIZING.                                                      */ 03693000
*/*                                                                  */ 03694000
*/********************************************************************/ 03695000
*                                                                  0803 03696000
*           IF REG2->TCWAPCCA->PCCASYNC='1'B THEN                  0803 03697000
*                                                                  0803 03698000
         L     @07,TCWAPCCA(,REG2)                                 0803 03699000
         TM    PCCASYNC(@07),B'01000000'                           0803 03700000
         BNO   @RF00803                                            0803 03701000
*/********************************************************************/ 03702000
*/*                                                                  */ 03703000
*/* IF IT DOES, SET UP THE IPC INTERFACE TO HAVE THE CLOCK SET.      */ 03704000
*/*                                                                  */ 03705000
*/********************************************************************/ 03706000
*                                                                  0804 03707000
*             DO;                                                  0804 03708000
*               REG1=REG2->TCWAPCCA;/* GET PCCA ADDRESS              */ 03709000
         LR    REG1,@07                                            0805 03710000
*               REG12=ADDR(DELTA2); /* GET ROUTINE ADDRESS           */ 03711000
         LA    REG12,DELTA2                                        0806 03712000
*               REG11=ADDR(TCWA);   /* GET PARAMETER ADDRESS         */ 03713000
         LR    REG11,TCWAPTR                                       0807 03714000
*               GENERATE CODE REFS(CVTIPCRI,CVT)                   0808 03715000
*                   (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));     0808 03716000
*                                                                  0808 03717000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        03718000
*/********************************************************************/ 03719000
*/*                                                                  */ 03720000
*/* SEE IF THE CLOCK WAS SUCCESSFULLY SET. (IE. THE OPERATOR HAS NOT */ 03721000
*/* PREMATURELY RELEASED THE TOD CLOCK SECURITY SWITCH.)             */ 03722000
*/*                                                                  */ 03723000
*/********************************************************************/ 03724000
*                                                                  0809 03725000
*               IF TCGNSET='1'B THEN                               0809 03726000
*                                                                  0809 03727000
         TM    TCGNSET(TCWAPTR),B'00001000'                        0809 03728000
         BNO   @RF00809                                            0809 03729000
*/********************************************************************/ 03730000
*/*                                                                  */ 03731000
*/* IF THE SWITCH WAS RELEASED, SET THE LOOP COUNTS OF ALL 3 LOOPS SO*/ 03732000
*/* THAT AN EXIT FROM THEM WILL OCCUR.                               */ 03733000
*/*                                                                  */ 03734000
*/********************************************************************/ 03735000
*                                                                  0810 03736000
*                 DO;                                              0810 03737000
*                   I5=1;                                          0811 03738000
         LA    @07,1                                               0811 03739000
         ST    @07,I5                                              0811 03740000
*                   SETLOOP=1;                                     0812 03741000
         ST    @07,SETLOOP                                         0812 03742000
*                   LOOPCTR=1;                                     0813 03743000
         ST    @07,LOOPCTR                                         0813 03744000
*                 END;                                             0814 03745000
*             END;                                                 0815 03746000
@RF00809 DS    0H                                                  0816 03747000
*           REG2=REG2+LENGTH(TCENTRY);/* POINT TO NEXT TCWA ENTRY    */ 03748000
@RF00803 AL    REG2,@CF00045                                       0816 03749000
*         END;                                                     0817 03750000
         SLR   @07,@07                                             0817 03751000
         BCTR  @07,0                                               0817 03752000
         AL    @07,I5                                              0817 03753000
         ST    @07,I5                                              0817 03754000
@DE00802 LTR   @07,@07                                             0817 03755000
         BP    @DL00802                                            0817 03756000
*       END;                                                       0818 03757000
         SLR   @07,@07                                             0818 03758000
         BCTR  @07,0                                               0818 03759000
         AL    @07,SETLOOP                                         0818 03760000
         ST    @07,SETLOOP                                         0818 03761000
         LTR   @07,@07                                             0818 03762000
         BP    @DL00800                                            0818 03763000
*       RESPECIFY                                                  0819 03764000
*        (REG2) UNRESTRICTED;                                      0819 03765000
*                                                                  0819 03766000
*/********************************************************************/ 03767000
*/*                                                                  */ 03768000
*/* SET UP THE INTERFACE TO IPC SO THAT THE CLOCK BEING SYNCHRONIZED */ 03769000
*/* TO WILL STORE AN ENDING VALUE.  (NOTE: THE ENDING VALUE IS STORED*/ 03770000
*/* IN THE MASTER'S TCWA ENTRY.  IF ITS HIGH ORDER 32 BITS ARE EQUAL */ 03771000
*/* TO THE HIGH ORDER 32 BITS OF THE BEGIN VALUE(TCWAA2), THE LOOP   */ 03772000
*/* HAS BEEN COMPLETED WITHIN 2**20 MICROSECONDS.)                   */ 03773000
*/*                                                                  */ 03774000
*/********************************************************************/ 03775000
*                                                                  0820 03776000
*       REG1=PTREBEG->TCWAPCCA;     /* GET PCCA ADDRESS              */ 03777000
         L     @02,PTREBEG                                         0820 03778000
         L     REG1,TCWAPCCA(,@02)                                 0820 03779000
*       REG12=ADDR(DELTA3);         /* GET ROUTINE ADDRESS           */ 03780000
         LA    REG12,DELTA3                                        0821 03781000
*       REG11=PTREBEG;              /* GET PARAMETER ADDRESS         */ 03782000
         LR    REG11,@02                                           0822 03783000
*       GENERATE CODE REFS(CVTIPCRI,CVT)                           0823 03784000
*           (RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11));             0823 03785000
         RISGNL SERIAL,CPU=(1),EP=(12),PARM=(11)                        03786000
*     END;                                                         0824 03787000
         SLR   @02,@02                                             0824 03788000
         BCTR  @02,0                                               0824 03789000
         AL    @02,LOOPCTR                                         0824 03790000
         ST    @02,LOOPCTR                                         0824 03791000
         LTR   @02,@02                                             0824 03792000
         BP    @DL00792                                            0824 03793000
@DC00792 DS    0H                                                  0825 03794000
*   END;                                                           0825 03795000
*                                                                  0825 03796000
@DE00767 TM    TCGNSET(TCWAPTR),B'00001000'                        0825 03797000
         BO    @DL00767                                            0825 03798000
*/********************************************************************/ 03799000
*/*                                                                  */ 03800000
*/* RETURN TO THE CALLER.                                            */ 03801000
*/*                                                                  */ 03802000
*/********************************************************************/ 03803000
*                                                                  0826 03804000
*   END IEAVRSYN;                                                  0826 03805000
@EL00007 DS    0H                                                  0826 03806000
@EF00007 DS    0H                                                  0826 03807000
@ER00007 LM    @14,@12,12(@13)                                     0826 03808000
         BR    @14                                                 0826 03809000
*                                                                  0827 03810000
*/********************************************************************/ 03811000
*/*                                                                  */ 03812000
*/*             IEAVRNOT--VARY CPU OFFLINE NOTIFICATION              */ 03813000
*/*                                                                  */ 03814000
*/* THIS ROUTINE IS ENTERED FROM IEEVCPU WHENVER A CPU IS BEING      */ 03815000
*/* VARY'ED OFFLINE.  IT CHECKS TO MAKE SURE THAT THE REMOVAL OF THE */ 03816000
*/* SUBJECT CPU WILL NOT CAUSE THE LAST TOD CLOCK, CLOCK COMPARATOR, */ 03817000
*/* OR CPU TIMER TO BE REMOVED FROM THE CONFIGURATION. IF REMOVAL OF */ 03818000
*/* THE CPU WOULD CREATE SUCH A SITUATION, THE RETURN CODE IS SET TO */ 03819000
*/* 4 TO INDICATE THAT THE VARY PROCESS SHOULD BE CANCELLED.  IF NOT,*/ 03820000
*/* THE CPU CAN BE TAKEN OFFLINE.                                    */ 03821000
*/*                                                                  */ 03822000
*/* IF THE CPU BEING TAKEN OFFLINE IS TIMING A REAL TIME TQE, IT     */ 03823000
*/* MUST BE ENSURED THE THE TQE WILL CONTINUE TO BE TIMED ON SOME    */ 03824000
*/* CPU REMAINING ONLINE.                                            */ 03825000
*/*                                                                  */ 03826000
*/********************************************************************/ 03827000
*                                                                  0827 03828000
*IEAVRNOT:                                                         0827 03829000
*   ENTRY(OLDPCCA);                                                0827 03830000
         B     @EC00827                                            0827 03831000
@EP00827 MVC   @PC00001+4(4),0(@01)                                0827 03832000
@EC00827 DS    0H                                                  0828 03833000
*   RESPECIFY                                                      0828 03834000
*     CVTMAP BASED(CVTPTR);                                        0828 03835000
*   R13SAV=REG13;                   /* SAVE THE SAVEAREA ADDRESS     */ 03836000
         ST    REG13,R13SAV                                        0829 03837000
*/********************************************************************/ 03838000
*/*                                                                  */ 03839000
*/* SET UP THE INTERFACE TO FIX THE PAGE CONTAINING THE EXECUTING    */ 03840000
*/* CODE AND ISSUE THE PAGE FIX SVC.                                 */ 03841000
*/*                                                                  */ 03842000
*/********************************************************************/ 03843000
*                                                                  0830 03844000
*   REG1=ADDR(BEGNOT);              /* GET PTR TO START OF CODE      */ 03845000
         LA    REG1,BEGNOT                                         0830 03846000
*   REG15=ADDR(ENDTOD);             /* GET PTR TO END OF MODULE      */ 03847000
         LA    REG15,ENDTOD                                        0831 03848000
*   REG0=ADDR(TODECB);              /* GET ECB ADDRESS               */ 03849000
         LA    REG0,TODECB                                         0832 03850000
*   TODECB=0;                       /* CLEAR ECB                     */ 03851000
         SLR   @02,@02                                             0833 03852000
         ST    @02,TODECB                                          0833 03853000
*   GENERATE CODE(PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N);           0834 03854000
*                                                                  0834 03855000
         PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N                           03856000
*/********************************************************************/ 03857000
*/*                                                                  */ 03858000
*/* WAIT FOR PAGE FIX.                                               */ 03859000
*/*                                                                  */ 03860000
*/********************************************************************/ 03861000
*                                                                  0835 03862000
*   REG1=ADDR(TODECB);              /* GET ECB ADDRESS               */ 03863000
         LA    REG1,TODECB                                         0835 03864000
*   GENERATE CODE(WAIT  1,ECB=(1));                                0836 03865000
*                                                                  0836 03866000
         WAIT  1,ECB=(1)                                                03867000
*/********************************************************************/ 03868000
*/*                                                                  */ 03869000
*/* GET DISPATCHER LOCK TO PROTECT REAL TQE AND FOR INVOKING SETCC   */ 03870000
*/*                                                                  */ 03871000
*/********************************************************************/ 03872000
*                                                                  0837 03873000
*   GENERATE CODE REFS(PSALITA);                                   0837 03874000
*                                                                  0837 03875000
*                            /*                                         03876000
         SETLOCK OBTAIN,TYPE=DISP,MODE=UNCOND,                        **03877000
               RELATED=('REQUIRED BY SETCC',(IEAVRTOD,(NOLABEL))) */    03878000
*/********************************************************************/ 03879000
*/*                                                                  */ 03880000
*/* GET ADDRESSABILITY TO CSD, AND TO PCCA OF CPU GOING OFFLINE.     */ 03881000
*/*                                                                  */ 03882000
*/********************************************************************/ 03883000
*                                                                  0838 03884000
*BEGNOT:                                                           0838 03885000
*   REG12=CVTCSD;                   /* ADDRESSABILITY TO CSD         */ 03886000
BEGNOT   L     @02,CVTPTR                                          0838 03887000
         L     REG12,CVTCSD(,@02)                                  0838 03888000
*   RESPECIFY                                                      0839 03889000
*     CSD BASED(REG12);                                            0839 03890000
*   REG11=ADDR(OLDPCCA);            /* ADDRESSABILITY TO PCCA        */ 03891000
         L     REG11,@PC00001+4                                    0840 03892000
*   RESPECIFY                                                      0841 03893000
*     PCCA BASED(REG11);                                           0841 03894000
*   RETCODE=0;                      /* INITIALIZE RETURN CODE        */ 03895000
         SLR   RETCODE,RETCODE                                     0842 03896000
*/********************************************************************/ 03897000
*/*                                                                  */ 03898000
*/* SEE IF THE TOD CLOCK IN THE CPU GOING OFFLINE IS PERMANENTLY     */ 03899000
*/* DAMAGED.                                                         */ 03900000
*/*                                                                  */ 03901000
*/********************************************************************/ 03902000
*                                                                  0843 03903000
*   IF PCCANFTD='0'B THEN                                          0843 03904000
*                                                                  0843 03905000
         TM    PCCANFTD(REG11),B'01000000'                         0843 03906000
         BNZ   @RF00843                                            0843 03907000
*/********************************************************************/ 03908000
*/*                                                                  */ 03909000
*/* IF NOT, SEE IF IT IS THE LAST GOOD TOD CLOCK IN THE CONFIGURATION*/ 03910000
*/*                                                                  */ 03911000
*/********************************************************************/ 03912000
*                                                                  0844 03913000
*     DO;                                                          0844 03914000
*LASTTODC:                                                         0845 03915000
*       IF CSDGDTOD=1 THEN          /* IF LAST GOOD TOD CLOCK,       */ 03916000
LASTTODC CLC   CSDGDTOD(4,REG12),@CF00096                          0845 03917000
         BNE   @RF00845                                            0845 03918000
*         RETCODE=4;                /* INDICATE TO CANCEL THE VARY   */ 03919000
         LA    RETCODE,4                                           0846 03920000
*       ELSE                                                       0847 03921000
*         DO;                       /* IF NOT LAST GOOD TOD CLOCK,   */ 03922000
         B     @RC00845                                            0847 03923000
@RF00845 DS    0H                                                  0848 03924000
*           CURRENT=CSDGDTOD;       /* GET CURRENT COUNT             */ 03925000
         L     CURRENT,CSDGDTOD(,REG12)                            0848 03926000
*           NEW=CURRENT-1;                                         0849 03927000
         LR    NEW,CURRENT                                         0849 03928000
         BCTR  NEW,0                                               0849 03929000
*           CS(CURRENT,NEW,CSDGDTOD);/* DECREMENT BY 1               */ 03930000
         CS    CURRENT,@01,CSDGDTOD(REG12)                         0850 03931000
*           BC(7,LASTTODC);                                        0851 03932000
         BC    7,LASTTODC                                          0851 03933000
*           PCCATODE='FF'X;         /* INDICATE ERROR COUNT CHANGED  */ 03934000
         MVI   PCCATODE(REG11),X'FF'                               0852 03935000
*         END;                                                     0853 03936000
*     END;                                                         0854 03937000
*                                                                  0854 03938000
@RC00845 DS    0H                                                  0855 03939000
*/********************************************************************/ 03940000
*/*                                                                  */ 03941000
*/* TEST FOR THE VARY PROCESS NOT YET HAVING BEEN CANCELLED.         */ 03942000
*/*                                                                  */ 03943000
*/********************************************************************/ 03944000
*                                                                  0855 03945000
*   IF RETCODE=0 THEN                                              0855 03946000
*                                                                  0855 03947000
@RF00843 LTR   RETCODE,RETCODE                                     0855 03948000
         BNZ   @RF00855                                            0855 03949000
*/********************************************************************/ 03950000
*/*                                                                  */ 03951000
*/* IF NOT YET CANCELLED, CHECK THE CLOCK COMPARATOR FOR PERMANENT   */ 03952000
*/* DAMAGE.                                                          */ 03953000
*/*                                                                  */ 03954000
*/********************************************************************/ 03955000
*                                                                  0856 03956000
*     DO;                                                          0856 03957000
*       IF PCCANFCC='0'B THEN                                      0857 03958000
*                                                                  0857 03959000
         TM    PCCANFCC(REG11),B'01000000'                         0857 03960000
         BNZ   @RF00857                                            0857 03961000
*/********************************************************************/ 03962000
*/*                                                                  */ 03963000
*/* IF O.K., SEE IF IT IS THE LAST GOOD CLOCK COMPARATOR IN THE      */ 03964000
*/* CONFIGURATION.                                                   */ 03965000
*/*                                                                  */ 03966000
*/********************************************************************/ 03967000
*                                                                  0858 03968000
*         DO;                                                      0858 03969000
*LASTCC:                                                           0859 03970000
*           IF CSDGDCC=1 THEN       /* IF LAST GOOD CLOCK COMPARATOR */ 03971000
LASTCC   CLC   CSDGDCC(4,REG12),@CF00096                           0859 03972000
         BNE   @RF00859                                            0859 03973000
*             RETCODE=4;            /* INDICATE TO CANCEL THE VARY   */ 03974000
         LA    RETCODE,4                                           0860 03975000
*           ELSE                                                   0861 03976000
*             DO;                   /* IF NOT LAST GOOD CLOCK      0861 03977000
*                                      COMPARATOR,                   */ 03978000
         B     @RC00859                                            0861 03979000
@RF00859 DS    0H                                                  0862 03980000
*               CURRENT=CSDGDCC;    /* GET CURRENT COUNT             */ 03981000
         L     CURRENT,CSDGDCC(,REG12)                             0862 03982000
*               NEW=CURRENT-1;                                     0863 03983000
         LR    NEW,CURRENT                                         0863 03984000
         BCTR  NEW,0                                               0863 03985000
*               CS(CURRENT,NEW,CSDGDCC);/* DECREMENT BY 1            */ 03986000
         CS    CURRENT,@01,CSDGDCC(REG12)                          0864 03987000
*               BC(7,LASTCC);                                      0865 03988000
         BC    7,LASTCC                                            0865 03989000
*               PCCACCE='FF'X;      /* INDICATE ERROR COUNT CHANGED  */ 03990000
         MVI   PCCACCE(REG11),X'FF'                                0866 03991000
*             END;                                                 0867 03992000
*         END;                                                     0868 03993000
*                                                                  0868 03994000
@RC00859 DS    0H                                                  0869 03995000
*/********************************************************************/ 03996000
*/*                                                                  */ 03997000
*/* TEST FOR VARY PROCESS NOT YET HAVING BEEN CANCELLED.             */ 03998000
*/*                                                                  */ 03999000
*/********************************************************************/ 04000000
*                                                                  0869 04001000
*       IF RETCODE=0 THEN                                          0869 04002000
*                                                                  0869 04003000
@RF00857 LTR   RETCODE,RETCODE                                     0869 04004000
         BNZ   @RF00869                                            0869 04005000
*/********************************************************************/ 04006000
*/*                                                                  */ 04007000
*/* IF NOT YET CANCELLED, CHECK CPU TIMER FOR PERMANENT DAMAGE.      */ 04008000
*/*                                                                  */ 04009000
*/********************************************************************/ 04010000
*                                                                  0870 04011000
*         DO;                                                      0870 04012000
*           IF PCCANFIN='0'B THEN                                  0871 04013000
*                                                                  0871 04014000
         TM    PCCANFIN(REG11),B'01000000'                         0871 04015000
         BNZ   @RF00871                                            0871 04016000
*/********************************************************************/ 04017000
*/*                                                                  */ 04018000
*/* IF O.K., SEE IF IT IS THE LAST CPU TIMER IN THE CONFIGURATION.   */ 04019000
*/*                                                                  */ 04020000
*/********************************************************************/ 04021000
*                                                                  0872 04022000
*             DO;                                                  0872 04023000
*LASTCPUT:                                                         0873 04024000
*               IF CSDGDINT=1 THEN  /* IF LAST GOOD CPU TIMER,       */ 04025000
LASTCPUT CLC   CSDGDINT(4,REG12),@CF00096                          0873 04026000
         BNE   @RF00873                                            0873 04027000
*                 RETCODE=4;        /* INDICATE TO CANCEL THE VARY   */ 04028000
         LA    RETCODE,4                                           0874 04029000
*               ELSE                                               0875 04030000
*                 DO;               /* IF NOT LAST GOOD CPU TIMER,   */ 04031000
         B     @RC00873                                            0875 04032000
@RF00873 DS    0H                                                  0876 04033000
*                   CURRENT=CSDGDINT;/* GET CURRENT COUNT            */ 04034000
         L     CURRENT,CSDGDINT(,REG12)                            0876 04035000
*                   NEW=CURRENT-1;                                 0877 04036000
         LR    NEW,CURRENT                                         0877 04037000
         BCTR  NEW,0                                               0877 04038000
*                   CS(CURRENT,NEW,CSDGDINT);/* DECREMENT BY 1       */ 04039000
         CS    CURRENT,@01,CSDGDINT(REG12)                         0878 04040000
*                   BC(7,LASTCPUT);                                0879 04041000
         BC    7,LASTCPUT                                          0879 04042000
*                   PCCAINTE='FF'X; /* INDICATE ERROR COUNT CHANGED  */ 04043000
         MVI   PCCAINTE(REG11),X'FF'                               0880 04044000
*                 END;                                             0881 04045000
*             END;                                                 0882 04046000
@RC00873 DS    0H                                                  0883 04047000
*         END;                                                     0883 04048000
@RF00871 DS    0H                                                  0884 04049000
*     END;                                                         0884 04050000
*                                                                  0884 04051000
@RF00869 DS    0H                                                  0885 04052000
*/********************************************************************/ 04053000
*/*                                                                  */ 04054000
*/* SAVE THE RETURN CODE ACROSS POTENTIAL DESTRUCTIVE INTERFACES.    */ 04055000
*/* IF THE CPU IS GOING OFFLINE AND IT IS TIMING A REAL TIME TQE,    */ 04056000
*/* ENSURE THAT THE TQE WILL BE TIMED ON SOME OTHER CPU REMAINING    */ 04057000
*/* ONLINE.                                                          */ 04058000
*/*                                                                  */ 04059000
*/********************************************************************/ 04060000
*                                                                  0885 04061000
*   REG3=RETCODE;                   /*                       @YM04766*/ 04062000
@RF00855 LR    REG3,RETCODE                                        0885 04063000
*   IF RETCODE=0&PCCATQEP^=0 THEN                                  0886 04064000
         SLR   @02,@02                                             0886 04065000
         CR    RETCODE,@02                                         0886 04066000
         BNE   @RF00886                                            0886 04067000
         L     @07,PCCATQEP(,REG11)                                0886 04068000
         CR    @07,@02                                             0886 04069000
         BE    @RF00886                                            0886 04070000
*     DO;                                                          0887 04071000
*       PCCATQEP->TQECOMP='0'B;     /* INDICATE TQE NOT BEING TIMED  */ 04072000
         NI    TQECOMP(@07),B'01111111'                            0888 04073000
*       PCCATQEP=0;                 /* INDICATE THIS CPU NOT TIMING A   04074000
*                                      TQE                           */ 04075000
         ST    @02,PCCATQEP(,REG11)                                0889 04076000
*       REG15=TPCCKQ;               /* GET ADRESS OF SETCC           */ 04077000
         L     @02,CVTPTR                                          0890 04078000
         L     @02,TPCPTR(,@02)                                    0890 04079000
         L     REG15,TPCCKQ(,@02)                                  0890 04080000
*       GENERATE CODE REFS(REG15) SETS(REG2)(BALR  REG2,REG15);    0891 04081000
         BALR  REG2,REG15                                               04082000
*     END;                                                         0892 04083000
*                                                                  0892 04084000
*/********************************************************************/ 04085000
*/*                                                                  */ 04086000
*/* RELEASE DISPATCHER LOCK.                                         */ 04087000
*/*                                                                  */ 04088000
*/********************************************************************/ 04089000
*                                                                  0893 04090000
*   GENERATE CODE REFS(PSALITA);                                   0893 04091000
*                                                                  0893 04092000
@RF00886 DS    0H                                                  0893 04093000
*                              /*                                       04094000
         SETLOCK RELEASE,TYPE=DISP,                                   **04095000
               RELATED=('REQUIRED BY SETCC',(IEAVRTOD,(NOLABEL)))  */   04096000
*/********************************************************************/ 04097000
*/*                                                                  */ 04098000
*/* RELEASE FIXED PAGE.                                              */ 04099000
*/*                                                                  */ 04100000
*/********************************************************************/ 04101000
*                                                                  0894 04102000
*   REG1=ADDR(BEGNOT);              /* GET PTR TO BEGINNING OF CODE  */ 04103000
         LA    REG1,BEGNOT                                         0894 04104000
*   REG15=ADDR(ENDTOD);             /* GET PTR TO END OF MODULE      */ 04105000
         LA    REG15,ENDTOD                                        0895 04106000
*   GENERATE CODE(PGFREE R,A=(1),EA=(15));                         0896 04107000
*                                                                  0896 04108000
         PGFREE R,A=(1),EA=(15)                                         04109000
*/********************************************************************/ 04110000
*/*                                                                  */ 04111000
*/* RESTORE THE SAVEAREA ADDRESS, AND RETURN TO IEEVCPU.             */ 04112000
*/*                                                                  */ 04113000
*/********************************************************************/ 04114000
*                                                                  0897 04115000
*   REG13=R13SAV;                                                  0897 04116000
         L     REG13,R13SAV                                        0897 04117000
*   RETURN CODE(REG3);              /*                       @YM04766*/ 04118000
         L     @13,4(,@13)                                         0898 04119000
         L     @00,@SIZDATD                                        0898 04120000
         LR    @01,@08                                             0898 04121000
         FREEMAIN R,LV=(0),A=(1)                                        04122000
         LR    @15,@03                                             0898 04123000
         L     @14,12(,@13)                                        0898 04124000
         LM    @00,@12,20(@13)                                     0898 04125000
         BR    @14                                                 0898 04126000
*                                                                  0899 04127000
*/********************************************************************/ 04128000
*/*                                                                  */ 04129000
*/*             IEAVRCAN--VARY CPU OFFLINE CANCELLATION              */ 04130000
*/*                                                                  */ 04131000
*/* THIS ROUTINE IS ENTERED FROM IEEVCPU WHENEVER A VARY CPU OFFLINE */ 04132000
*/* COMMAND HAS BEEN INTERNALLY CANCELLED, AND ROUTINE IEAVRNOT HAS  */ 04133000
*/* PREVIOUSLY RECEIVED CONTROL.  IT RESETS THE COUNTS IN THE CSD    */ 04134000
*/* AND THE ERROR COUNTS IN THE PCCA FOR ANY TIMING COMPONENTS WHICH */ 04135000
*/* HAD THESE FIELDS CHANGED BY ROUTINE IEAVRNOT.                    */ 04136000
*/*                                                                  */ 04137000
*/********************************************************************/ 04138000
*                                                                  0899 04139000
*IEAVRCAN:                                                         0899 04140000
*   ENTRY(OLDPCCA);                                                0899 04141000
@EP00899 MVC   @PC00001+4(4),0(@01)                                0899 04142000
*   REG12=CVTCSD;                   /* ADDRESSABILITY TO CSD         */ 04143000
         L     @02,CVTPTR                                          0900 04144000
         L     REG12,CVTCSD(,@02)                                  0900 04145000
*   REG11=ADDR(OLDPCCA);            /* ADDRESSABILITY TO PCCA        */ 04146000
         L     REG11,@PC00001+4                                    0901 04147000
*/********************************************************************/ 04148000
*/*                                                                  */ 04149000
*/* SEE IF THE TOD CLOCK ERROR COUNT WAS CHANGED BY IEAVRNOT.        */ 04150000
*/*                                                                  */ 04151000
*/********************************************************************/ 04152000
*                                                                  0902 04153000
*   IF PCCATODE='FF'X THEN                                         0902 04154000
         CLI   PCCATODE(REG11),255                                 0902 04155000
         BNE   @RF00902                                            0902 04156000
*     DO;                           /* IF SO,                        */ 04157000
*       PCCATODE='00'X;             /* RESET ERROR COUNT             */ 04158000
         MVI   PCCATODE(REG11),X'00'                               0904 04159000
*CURRTODC:                                                         0905 04160000
*       CURRENT=CSDGDTOD;           /* GET COUNT OF GOOD TOD CLOCKS  */ 04161000
CURRTODC L     CURRENT,CSDGDTOD(,REG12)                            0905 04162000
*       NEW=CURRENT+1;                                             0906 04163000
         LA    NEW,1                                               0906 04164000
         ALR   NEW,CURRENT                                         0906 04165000
*       CS(CURRENT,NEW,CSDGDTOD);   /* INCREMENT COUNT BY 1          */ 04166000
         CS    CURRENT,@01,CSDGDTOD(REG12)                         0907 04167000
*       BC(7,CURRTODC);                                            0908 04168000
         BC    7,CURRTODC                                          0908 04169000
*     END;                                                         0909 04170000
*                                                                  0909 04171000
*/********************************************************************/ 04172000
*/*                                                                  */ 04173000
*/* SEE IF THE CLOCK COMPARATOR ERROR COUNT WAS CHANGED BY IEAVRNOT. */ 04174000
*/*                                                                  */ 04175000
*/********************************************************************/ 04176000
*                                                                  0910 04177000
*   IF PCCACCE='FF'X THEN                                          0910 04178000
@RF00902 CLI   PCCACCE(REG11),255                                  0910 04179000
         BNE   @RF00910                                            0910 04180000
*     DO;                           /* IF SO,                        */ 04181000
*       PCCACCE='00'X;              /* RESET ERROR COUNT             */ 04182000
         MVI   PCCACCE(REG11),X'00'                                0912 04183000
*CURRCC:                                                           0913 04184000
*       CURRENT=CSDGDCC;            /* GET COUNT OF GOOD CLOCK     0913 04185000
*                                      COMPARATORS                   */ 04186000
CURRCC   L     CURRENT,CSDGDCC(,REG12)                             0913 04187000
*       NEW=CURRENT+1;                                             0914 04188000
         LA    NEW,1                                               0914 04189000
         ALR   NEW,CURRENT                                         0914 04190000
*       CS(CURRENT,NEW,CSDGDCC);    /* INCREMENT COUNT BY 1          */ 04191000
         CS    CURRENT,@01,CSDGDCC(REG12)                          0915 04192000
*       BC(7,CURRCC);                                              0916 04193000
         BC    7,CURRCC                                            0916 04194000
*     END;                                                         0917 04195000
*                                                                  0917 04196000
*/********************************************************************/ 04197000
*/*                                                                  */ 04198000
*/* SEE IF THE CPU TIMER ERROR COUNT WAS CHANGED BY IEAVRNOT.        */ 04199000
*/*                                                                  */ 04200000
*/********************************************************************/ 04201000
*                                                                  0918 04202000
*   IF PCCAINTE='FF'X THEN                                         0918 04203000
@RF00910 CLI   PCCAINTE(REG11),255                                 0918 04204000
         BNE   @RF00918                                            0918 04205000
*     DO;                                                          0919 04206000
*       PCCAINTE='00'X;             /* RESET ERROR COUNT             */ 04207000
         MVI   PCCAINTE(REG11),X'00'                               0920 04208000
*CURRCPUT:                                                         0921 04209000
*       CURRENT=CSDGDINT;           /* GET COUNT OF GOOD CPU TIMERS  */ 04210000
CURRCPUT L     CURRENT,CSDGDINT(,REG12)                            0921 04211000
*       NEW=CURRENT+1;                                             0922 04212000
         LA    NEW,1                                               0922 04213000
         ALR   NEW,CURRENT                                         0922 04214000
*       CS(CURRENT,NEW,CSDGDINT);   /* INCREMENT COUNT BY 1          */ 04215000
         CS    CURRENT,@01,CSDGDINT(REG12)                         0923 04216000
*       BC(7,CURRCPUT);                                            0924 04217000
         BC    7,CURRCPUT                                          0924 04218000
*     END;                                                         0925 04219000
*   RETURN;                                                        0926 04220000
@EL00001 L     @13,4(,@13)                                         0926 04221000
@EF00001 L     @00,@SIZDATD                                        0926 04222000
         LR    @01,@08                                             0926 04223000
         FREEMAIN R,LV=(0),A=(1)                                        04224000
@ER00001 LM    @14,@12,12(@13)                                     0926 04225000
         BR    @14                                                 0926 04226000
*   RESPECIFY                                                      0927 04227000
*     CSD BASED(CVTCSD);                                           0927 04228000
*                                                                  0928 04229000
*/********************************************************************/ 04230000
*/*                                                                  */ 04231000
*/*          IEAVRCLA--TIMING COMPONENT HARDWARE RECOVERY            */ 04232000
*/*                                                                  */ 04233000
*/* THIS ROUTINE IS SCHEDULED INTO THE MASTER MEMORY BY AN SRB THAT  */ 04234000
*/* IS SCHEDULED BY ROUTINE IEAVRCLS, AND IS SUBSEQUENTLY GIVEN      */ 04235000
*/* CONTROL BY THE DISPATCHER.                                       */ 04236000
*/*                                                                  */ 04237000
*/* AFTER SAVING THE RETURN ADDRESS, IT BEGINS A SCAN OF THE PCCA    */ 04238000
*/* VECTOR TABLE SEARCHING FOR NON-ZERO ENTRIES.  WHEN ONE IS FOUND, */ 04239000
*/* IT DETERMINES IF ANY OF THE 3 TIMING COMPONENTS FOR THE CPU REP- */ 04240000
*/* RESENTED BY THAT PCCA REQUIRES RECOVERY, AND IF SO, TAKES APPRO- */ 04241000
*/* PRIATE RECOVERY MEASURES.                                        */ 04242000
*/*                                                                  */ 04243000
*/* WHEN ALL PCCAVT ENTRIES HAVE BEEN SCANNED, IT GOES TO THE SET    */ 04244000
*/* CLOCK COMPARATOR ROUTINE TO ENSURE THAT THE TOP REAL TIME TQE IS */ 04245000
*/* BEING TIMED.  THEN, USING COMPARE AND SWAP ON THE PARAMETER      */ 04246000
*/* FIELD IN THE SRB THAT WAS USED TO SCHEDULE IT, A TEST IS MADE TO */ 04247000
*/* DETERMINE IF FURTHER ERRORS HAVE OCCURRED WHILE IT WAS PROCESS-  */ 04248000
*/* ING.  IF THEY HAVE, IEAVRCLA BEGINS A NEW SCAN OF THE PCCAVT.    */ 04249000
*/* IF NO NEW ERRORS OCCURRED, IT RETURNS TO THE DISPATCHER.         */ 04250000
*/*                                                                  */ 04251000
*/********************************************************************/ 04252000
*                                                                  0928 04253000
*IEAVRCLA:                                                         0928 04254000
*   RESPECIFY                                                      0928 04255000
*    (PCCAPTR,                                                     0928 04256000
*     SLOTCNT,                                                     0928 04257000
*     REG2,                                                        0928 04258000
*     REG9) RESTRICTED;                                            0928 04259000
IEAVRCLA DS    0H                                                  0929 04260000
*   GENERATE CODE REFS(REG8,REG10) SETS(REG9);                     0929 04261000
*                                                                  0929 04262000
         DROP  REG9                 DROP FIRST CODEREG                  04263000
         BALR  REG9,0               ESTABLISH ADDRESSABILITY            04264000
         USING *,REG9                                                   04265000
         DROP  REG8                 DROP DATAREG                        04266000
         DROP  REG10                DROP SECOND CODEREG                 04267000
*/********************************************************************/ 04268000
*/*                                                                  */ 04269000
*/* SET UP THE INTERFACE TO GET THE PAGE CONTAINING IEAVRCLA FIXED.  */ 04270000
*/*                                                                  */ 04271000
*/********************************************************************/ 04272000
*                                                                  0930 04273000
*CLABSLBL:                                                         0930 04274000
*   REG1=ADDR(SETTC);               /* GET POINTER TO START OF     0930 04275000
*                                      IEAVRCLA                      */ 04276000
CLABSLBL LA    REG1,SETTC                                          0930 04277000
*   REG15=ADDR(ENDTOD);             /* GET POINTER TO END OF IEAVRTOD*/ 04278000
         LA    REG15,ENDTOD                                        0931 04279000
*   REG0=ADDR(CLAECB);              /* GET ADDRESS OF ECB            */ 04280000
         LA    REG0,CLAECB                                         0932 04281000
*   CLAECB=0;                       /* INITIALIZE ECB                */ 04282000
         SLR   @07,@07                                             0933 04283000
         ST    @07,CLAECB                                          0933 04284000
*/********************************************************************/ 04285000
*/*                                                                  */ 04286000
*/* ISSUE THE PAGE FIX SVC.                                          */ 04287000
*/*                                                                  */ 04288000
*/********************************************************************/ 04289000
*                                                                  0934 04290000
*   GENERATE CODE(PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N);           0934 04291000
*                                                                  0934 04292000
         PGFIX R,A=(1),EA=(15),ECB=(0),LONG=N                           04293000
*/********************************************************************/ 04294000
*/*                                                                  */ 04295000
*/* WAIT ON PAGE FIX.                                                */ 04296000
*/*                                                                  */ 04297000
*/********************************************************************/ 04298000
*                                                                  0935 04299000
*   GENERATE CODE SETS(CLAECB)(WAIT  1,ECB=CLAECB);                0935 04300000
*                                                                  0935 04301000
         WAIT  1,ECB=CLAECB                                             04302000
*/********************************************************************/ 04303000
*/*                                                                  */ 04304000
*/* ESTABLISH ERROR EXIT FOR UNLOCKED CODE.                          */ 04305000
*/*                                                                  */ 04306000
*/********************************************************************/ 04307000
*                                                                  0936 04308000
*   REG2=ADDR(CLAESTAE);            /* GET EXIT ADDRESS              */ 04309000
         LA    REG2,CLAESTAE                                       0936 04310000
*   GEN CODE REFS(REG2,REG3)(ESTAE (2),CT,PURGE=NONE,RECORD=YES);  0937 04311000
*                                                                  0937 04312000
         ESTAE (2),CT,PURGE=NONE,RECORD=YES                             04313000
*/********************************************************************/ 04314000
*/*                                                                  */ 04315000
*/* RE-BASE THE CVT AND CSD FOR MORE EFFICIENT CODE GENERATION.      */ 04316000
*/*                                                                  */ 04317000
*/********************************************************************/ 04318000
*                                                                  0938 04319000
*   CLACVTP=CVTPTR;                 /* GET POINTER TO CVT            */ 04320000
         L     CLACVTP,CVTPTR                                      0938 04321000
*   RESPECIFY                                                      0939 04322000
*     CVTMAP BASED(CLACVTP);                                       0939 04323000
*   REG3=CVTCSD;                    /* GET POINTER TO CSD            */ 04324000
         L     REG3,CVTCSD(,CLACVTP)                               0940 04325000
*   RESPECIFY                                                      0941 04326000
*     CSD BASED(REG3);                                             0941 04327000
*                                                                  0941 04328000
*/********************************************************************/ 04329000
*/*                                                                  */ 04330000
*/* INDICATE THAT THE SEARCH CYCLE HAS BEGUN                         */ 04331000
*/*                                                                  */ 04332000
*/********************************************************************/ 04333000
*                                                                  0942 04334000
*SETTC:                                                            0942 04335000
*   SRBPTR=ADDR(TPCRSRB);           /* GET ADDRESSABILITY TO RECOVERY   04336000
*                                      SRB                           */ 04337000
SETTC    L     SRBPTR,TPCPTR(,CLACVTP)                             0942 04338000
         LA    SRBPTR,TPCRSRB(,SRBPTR)                             0942 04339000
*   CLATC='0'B;                                                    0943 04340000
         NI    CLATC(SRBPTR),B'11111110'                           0943 04341000
*   CLABND='0'B;                    /* INITIALIZE ABEND-REAL-TQE'S 0944 04342000
*                                      INDICATOR                     */ 04343000
         NI    CLABND,B'01111111'                                  0944 04344000
*/********************************************************************/ 04345000
*/*                                                                  */ 04346000
*/* SEARCH THE TIMER STATUS BYTES OF ALL PHYSICAL CCA'S LOOKING FOR  */ 04347000
*/* THOSE WHICH INDICATE THAT AN ERROR HAS OCCURRED FOR WHICH RECOV- */ 04348000
*/* ERY HAS NOT YET BEEN ATTEMPTED.                                  */ 04349000
*/*                                                                  */ 04350000
*/********************************************************************/ 04351000
*                                                                  0945 04352000
*   REG2=CVTPCCAT;                  /* GET PTR TO PCCAVT             */ 04353000
         L     REG2,CVTPCCAT(,CLACVTP)                             0945 04354000
*   RESPECIFY                                                      0946 04355000
*     PTRPCCA BASED(REG2);                                         0946 04356000
*   DO SLOTCNT=DIM(PCCAT00P) TO 1 BY-1;                            0947 04357000
*                                                                  0947 04358000
         LA    SLOTCNT,16                                          0947 04359000
@DL00947 DS    0H                                                  0948 04360000
*/********************************************************************/ 04361000
*/*                                                                  */ 04362000
*/* SEE IF THE NEXT PCCA VECTOR TABLE SLOT IS NON-ZERO, INDICATING   */ 04363000
*/* THAT THE PCCA EXISTS.                                            */ 04364000
*/*                                                                  */ 04365000
*/********************************************************************/ 04366000
*                                                                  0948 04367000
*     IF PTRPCCA^=0 THEN                                           0948 04368000
         L     @07,PTRPCCA(,REG2)                                  0948 04369000
         LTR   @07,@07                                             0948 04370000
         BZ    @RF00948                                            0948 04371000
*       DO;                                                        0949 04372000
*                                                                  0949 04373000
*/********************************************************************/ 04374000
*/*                                                                  */ 04375000
*/* IF SO, ESTABLISH ADDRESSABILTIY TO THE PCCA.                     */ 04376000
*/*                                                                  */ 04377000
*/********************************************************************/ 04378000
*                                                                  0950 04379000
*         PCCAPTR=PTRPCCA;                                         0950 04380000
         LR    PCCAPTR,@07                                         0950 04381000
*         RESPECIFY                                                0951 04382000
*           PCCA BASED(PCCAPTR);                                   0951 04383000
*                                                                  0951 04384000
*/********************************************************************/ 04385000
*/*                                                                  */ 04386000
*/* CHECK THE TOD CLOCK STATUS BITS TO DETERMINE IF THE CLOCK RE-    */ 04387000
*/* QUIRES RECOVERY.                                                 */ 04388000
*/*                                                                  */ 04389000
*/********************************************************************/ 04390000
*                                                                  0952 04391000
*         IF PCCANUTD='1'B&PCCANFTD='0'B THEN                      0952 04392000
*                                                                  0952 04393000
         TM    PCCANUTD(PCCAPTR),B'10000000'                       0952 04394000
         BNO   @RF00952                                            0952 04395000
         TM    PCCANFTD(PCCAPTR),B'01000000'                       0952 04396000
         BNZ   @RF00952                                            0952 04397000
*/********************************************************************/ 04398000
*/*                                                                  */ 04399000
*/* IF SO, INDICATE THAT NO FURTHER ATTEMPTS SHOULD BE MADE TO FIX   */ 04400000
*/* THE CLOCK AND SUBTRACT ONE FROM THE NUMBER OF GOOD TOD CLOCKS    */ 04401000
*/* IN THE CONFIGURATION.                                            */ 04402000
*/*                                                                  */ 04403000
*/********************************************************************/ 04404000
*                                                                  0953 04405000
*           DO;                                                    0953 04406000
*             PCCANFTD='1'B;        /* INDICATE NOT TO FIX THE CLOCK */ 04407000
         OI    PCCANFTD(PCCAPTR),B'01000000'                       0954 04408000
*             CURRENT=CSDGDTOD;                                    0955 04409000
         L     CURRENT,CSDGDTOD(,REG3)                             0955 04410000
*SUB2:                                                             0956 04411000
*             NEW=CURRENT-1;                                       0956 04412000
SUB2     LR    NEW,CURRENT                                         0956 04413000
         BCTR  NEW,0                                               0956 04414000
*             CS(CURRENT,NEW,CSDGDTOD);                            0957 04415000
         CS    CURRENT,@01,CSDGDTOD(REG3)                          0957 04416000
*             BC(7,SUB2);                                          0958 04417000
*                                                                  0958 04418000
         BC    7,SUB2                                              0958 04419000
*/********************************************************************/ 04420000
*/*                                                                  */ 04421000
*/* SET REGISTER 13 TO THE ADDRESS OF                                */ 04422000
*/* THE SAVEAREA, REGISTER 1 TO THE ADDRESS OF THE OF A FULL WORD    */ 04423000
*/* CONTAINING A POINTER TO THE PCCA, AND REGISTER 0 TO 1 TO INDI-   */ 04424000
*/* CATE THAT THE CALLER IS ASYNCHRONOUS RECOVERY.  THEN CALL THE    */ 04425000
*/* ROUTINE TO RESET OR RE-SYNCHRONIZE THE CLOCK.                    */ 04426000
*/*                                                                  */ 04427000
*/********************************************************************/ 04428000
*                                                                  0959 04429000
*             REG13=ADDR(CLASAV);                                  0959 04430000
         LA    REG13,CLASAV                                        0959 04431000
*             REG1=REG2;                                           0960 04432000
         LR    REG1,REG2                                           0960 04433000
*             REG0=1;                                              0961 04434000
         LA    REG0,1                                              0961 04435000
*             CALL IEAVRSSC;                                       0962 04436000
*                                                                  0962 04437000
         L     @15,@CA02635                                        0962 04438000
         BALR  @14,@15                                             0962 04439000
*/********************************************************************/ 04440000
*/*                                                                  */ 04441000
*/* SEE IF THE CLOCK WAS SUCCESSFULLY RECOVERED.                     */ 04442000
*/*                                                                  */ 04443000
*/********************************************************************/ 04444000
*                                                                  0963 04445000
*             IF RETCODE=0 THEN                                    0963 04446000
*                                                                  0963 04447000
         LTR   RETCODE,RETCODE                                     0963 04448000
         BNZ   @RF00963                                            0963 04449000
*/********************************************************************/ 04450000
*/*                                                                  */ 04451000
*/* IF IT WAS RECOVERED, INDICATE THAT IT IS NOW ALL RIGHT TO ATTEMPT*/ 04452000
*/* TO RECOVER THE CLOCK IF IT FAILS AGAIN, AND ADD ONE TO THE COUNT */ 04453000
*/* OF ERRORS FOR THIS CLOCK.                                        */ 04454000
*/*                                                                  */ 04455000
*/********************************************************************/ 04456000
*                                                                  0964 04457000
*               DO;                                                0964 04458000
*                 PCCANFTD='0'B;    /* INDICATE CLOCK CAN BE FIXED   */ 04459000
         NI    PCCANFTD(PCCAPTR),B'10111111'                       0965 04460000
*                 PCCATODE=PCCATODE+ERRINCR;/* BUMP TOD CLOCK ERR  0966 04461000
*                                      COUNT                         */ 04462000
         LA    @07,32                                              0966 04463000
         SLR   @06,@06                                             0966 04464000
         IC    @06,PCCATODE(,PCCAPTR)                              0966 04465000
         ALR   @07,@06                                             0966 04466000
         STC   @07,PCCATODE(,PCCAPTR)                              0966 04467000
*               END;                                               0967 04468000
*             CLACVTP=CVTPTR;       /* RESTORE BASE FOR CVT          */ 04469000
@RF00963 L     CLACVTP,CVTPTR                                      0968 04470000
*/********************************************************************/ 04471000
*/*                                                                  */ 04472000
*/* SEE IF THE NO-FIX BIT IS ON. (NOTE: THIS BIT MAY HAVE BEEN TURNED*/ 04473000
*/* BACK ON AS A RESULT OF BUMPING THE ERROR COUNT.)                 */ 04474000
*/*                                                                  */ 04475000
*/********************************************************************/ 04476000
*                                                                  0969 04477000
*             IF PCCANFTD='1'B THEN                                0969 04478000
*                                                                  0969 04479000
         TM    PCCANFTD(PCCAPTR),B'01000000'                       0969 04480000
         BNO   @RF00969                                            0969 04481000
*/********************************************************************/ 04482000
*/*                                                                  */ 04483000
*/* IF IT IS ON, SEE IF THE COMPARABLE BIT FOR THE CLOCK COMPARATOR  */ 04484000
*/* IS OFF.  (NOTE: IF THE CLOCK WAS NOT RECOVERED, OR THIS WAS THE  */ 04485000
*/* NTH FAILURE ON IT, THE CLOCK IS CONSIDERED TO BE PERMANENTLY     */ 04486000
*/* DAMAGED, AND WILL NOT BE USED ANY MORE.  IF IT CANNOT BE USED,   */ 04487000
*/* THE CLOCK COMPARATOR MUST ALSO NOT BE USED, AND THE COUNT OF     */ 04488000
*/* GOOD CLOCK COMPARATORS IN THE CONFIGURATION MUST BE DECREMENTED, */ 04489000
*/* UNLESS THE CLOCK COMPARATOR WAS ALREADY PERMANENTLY DAMAGED.)    */ 04490000
*/*                                                                  */ 04491000
*/********************************************************************/ 04492000
*                                                                  0970 04493000
*               DO;                                                0970 04494000
*                 IF PCCANFCC='0'B THEN                            0971 04495000
*                                                                  0971 04496000
         TM    PCCANFCC(PCCAPTR),B'01000000'                       0971 04497000
         BNZ   @RF00971                                            0971 04498000
*/********************************************************************/ 04499000
*/*                                                                  */ 04500000
*/* INDICATE THAT THE CLOCK COMPARATOR SHOULD NOT BE RECOVERED, AND  */ 04501000
*/* DECREMENT THE COUNT OF GOOD CLOCK COMPARATORS.                   */ 04502000
*/*                                                                  */ 04503000
*/********************************************************************/ 04504000
*                                                                  0972 04505000
*                   DO;                                            0972 04506000
*                     PCCANFCC='1'B;                               0973 04507000
         OI    PCCANFCC(PCCAPTR),B'01000000'                       0973 04508000
*                     CURRENT=CSDGDCC;                             0974 04509000
         L     CURRENT,CSDGDCC(,REG3)                              0974 04510000
*SUB3:                                                             0975 04511000
*                     NEW=CURRENT-1;                               0975 04512000
SUB3     LR    NEW,CURRENT                                         0975 04513000
         BCTR  NEW,0                                               0975 04514000
*                     CS(CURRENT,NEW,CSDGDCC);                     0976 04515000
         CS    CURRENT,@01,CSDGDCC(REG3)                           0976 04516000
*                     BC(7,SUB3);                                  0977 04517000
         BC    7,SUB3                                              0977 04518000
*                   END;                                           0978 04519000
*                                                                  0978 04520000
*/********************************************************************/ 04521000
*/*                                                                  */ 04522000
*/* ASSEMBLE THE ERROR MSG, AND TELL THE OPERATOR THAT THE TOD CLOCK */ 04523000
*/* IS PERMANENTLY DAMAGED.                                          */ 04524000
*/*                                                                  */ 04525000
*/********************************************************************/ 04526000
*                                                                  0979 04527000
*                 CVD(PCCACPUA,CVRTAREA);                          0979 04528000
@RF00971 LH    @07,PCCACPUA(,PCCAPTR)                              0979 04529000
         CVD   @07,CVRTAREA                                        0979 04530000
*                 WPLPTR=ADDR(EMSGTOD);                            0980 04531000
         LA    WPLPTR,EMSGTOD                                      0980 04532000
*                 UNPK(CPUADDRE,CVRTAREA(7:8));                    0981 04533000
         UNPK  CPUADDRE(2,WPLPTR),CVRTAREA+6(2)                    0981 04534000
*                 CPUADDRE(2)=CPUADDRE(2)|'F0'X;                   0982 04535000
         OI    CPUADDRE+1(WPLPTR),X'F0'                            0982 04536000
*                 GENERATE CODE(WTO MF=(E,(1)));                   0983 04537000
         WTO MF=(E,(1))                                                 04538000
*               END;                                               0984 04539000
*             ELSE                                                 0985 04540000
*                                                                  0985 04541000
*/********************************************************************/ 04542000
*/*                                                                  */ 04543000
*/* IF THE NO-FIX BIT IS STILL OFF, INDICATING THAT THE CLOCK IS     */ 04544000
*/* USEABLE, TURN OFF THE NO-USE BIT TO INDICATE SO, AND INCREMENT   */ 04545000
*/* THE COUNT OF GOOD TOD CLOCKS.                                    */ 04546000
*/*                                                                  */ 04547000
*/********************************************************************/ 04548000
*                                                                  0985 04549000
*               DO;                                                0985 04550000
         B     @RC00969                                            0985 04551000
@RF00969 DS    0H                                                  0986 04552000
*                 PCCANUTD='0'B;                                   0986 04553000
         NI    PCCANUTD(PCCAPTR),B'01111111'                       0986 04554000
*                 CURRENT=CSDGDTOD;                                0987 04555000
         L     CURRENT,CSDGDTOD(,REG3)                             0987 04556000
*ADD6:                                                             0988 04557000
*                 NEW=CURRENT+1;                                   0988 04558000
ADD6     LA    NEW,1                                               0988 04559000
         ALR   NEW,CURRENT                                         0988 04560000
*                 CS(CURRENT,NEW,CSDGDTOD);                        0989 04561000
         CS    CURRENT,@01,CSDGDTOD(REG3)                          0989 04562000
*                 BC(7,ADD6);                                      0990 04563000
*                                                                  0990 04564000
         BC    7,ADD6                                              0990 04565000
*/********************************************************************/ 04566000
*/*                                                                  */ 04567000
*/* NOW SEE IF THE CLOCK COMPARATOR WAS PERMANENTLY DAMAGED.         */ 04568000
*/*                                                                  */ 04569000
*/********************************************************************/ 04570000
*                                                                  0991 04571000
*                 IF PCCANFCC='0'B THEN                            0991 04572000
*                                                                  0991 04573000
         TM    PCCANFCC(PCCAPTR),B'01000000'                       0991 04574000
         BNZ   @RF00991                                            0991 04575000
*/********************************************************************/ 04576000
*/*                                                                  */ 04577000
*/* IF NOT, INDICATE THAT THE CLOCK COMPARATOR IS NOW USEABLE, AND   */ 04578000
*/* THAT TASKS WITH REAL TQE'S NO LONGER NEED BE ABEND'ED SINCE THERE*/ 04579000
*/* IS NOW A GOOD TOD CLOCK AND CLOCK COMPARATOR IN THE SYSTEM.      */ 04580000
*/* (NOTE: THE CLOCK COMPARATOR WAS MARKED UNUSEABLE BY IEAVRCLS     */ 04581000
*/* WHEN THE TOD CLOCK FAILED.)                                      */ 04582000
*/*                                                                  */ 04583000
*/********************************************************************/ 04584000
*                                                                  0992 04585000
*                   DO;                                            0992 04586000
*                     PCCANUCC='0'B;                               0993 04587000
         NI    PCCANUCC(PCCAPTR),B'01111111'                       0993 04588000
*                     CLABND='1'B;                                 0994 04589000
         OI    CLABND,B'10000000'                                  0994 04590000
*                   END;                                           0995 04591000
*               END;                                               0996 04592000
@RF00991 DS    0H                                                  0997 04593000
*           END;                                                   0997 04594000
@RC00969 DS    0H                                                  0998 04595000
*                                                                  0998 04596000
*/********************************************************************/ 04597000
*/*                                                                  */ 04598000
*/* NOW CHECK THE CLOCK COMPARATOR STATUS BITS TO DETERMINE IF THE   */ 04599000
*/* CLOCK COMPARATOR REQUIRES RECOVERY.                              */ 04600000
*/*                                                                  */ 04601000
*/********************************************************************/ 04602000
*                                                                  0998 04603000
*         IF PCCANUCC='1'B&PCCANFCC='0'B THEN                      0998 04604000
*                                                                  0998 04605000
@RF00952 TM    PCCANUCC(PCCAPTR),B'10000000'                       0998 04606000
         BNO   @RF00998                                            0998 04607000
         TM    PCCANFCC(PCCAPTR),B'01000000'                       0998 04608000
         BNZ   @RF00998                                            0998 04609000
*/********************************************************************/ 04610000
*/*                                                                  */ 04611000
*/* IF S0, TEST TO SEE IF SYNCHRONOUS RECOVERY HAS BEEN UNABLE TO    */ 04612000
*/* RECOVER THE ERROR.                                               */ 04613000
*/*                                                                  */ 04614000
*/********************************************************************/ 04615000
*                                                                  0999 04616000
*           DO;                                                    0999 04617000
*             IF PCCAMCC='1'B THEN                                 1000 04618000
*                                                                  1000 04619000
         TM    PCCAMCC(PCCAPTR),B'00010000'                        1000 04620000
         BNO   @RF01000                                            1000 04621000
*/********************************************************************/ 04622000
*/*                                                                  */ 04623000
*/* IF SO, INDICATE THAT NO FURTHER ATTEMPTS SHOULD BE MADE TO RE-   */ 04624000
*/* COVER THE CLOCK COMPARATOR.  THEN, DECREMENT THE COUNT OF GOOD   */ 04625000
*/* CLOCK COMPARATORS BY 1.                                          */ 04626000
*/*                                                                  */ 04627000
*/********************************************************************/ 04628000
*                                                                  1001 04629000
*               DO;                                                1001 04630000
*                 PCCANFCC='1'B;                                   1002 04631000
         OI    PCCANFCC(PCCAPTR),B'01000000'                       1002 04632000
*                 CURRENT=CSDGDCC;                                 1003 04633000
         L     CURRENT,CSDGDCC(,REG3)                              1003 04634000
*SUB4:                                                             1004 04635000
*                 NEW=CURRENT-1;                                   1004 04636000
SUB4     LR    NEW,CURRENT                                         1004 04637000
         BCTR  NEW,0                                               1004 04638000
*                 CS(CURRENT,NEW,CSDGDCC);                         1005 04639000
         CS    CURRENT,@01,CSDGDCC(REG3)                           1005 04640000
*                 BC(7,SUB4);                                      1006 04641000
         BC    7,SUB4                                              1006 04642000
*                 PCCAMCC='0'B;                                    1007 04643000
*                                                                  1007 04644000
         NI    PCCAMCC(PCCAPTR),B'11101111'                        1007 04645000
*/********************************************************************/ 04646000
*/*                                                                  */ 04647000
*/* ASSEMBLE THE ERROR MSG, AND TELL THE OPERATOR THAT THE CLOCK     */ 04648000
*/* COMPARATOR IS PERMANENTLY DAMAGED.                               */ 04649000
*/*                                                                  */ 04650000
*/********************************************************************/ 04651000
*                                                                  1008 04652000
*                 CVD(PCCACPUA,CVRTAREA);                          1008 04653000
         LH    @07,PCCACPUA(,PCCAPTR)                              1008 04654000
         CVD   @07,CVRTAREA                                        1008 04655000
*                 WPLPTR=ADDR(EMSGCC);                             1009 04656000
         LA    WPLPTR,EMSGCC                                       1009 04657000
*                 UNPK(CPUADDRE,CVRTAREA(7:8));                    1010 04658000
         UNPK  CPUADDRE(2,WPLPTR),CVRTAREA+6(2)                    1010 04659000
*                 CPUADDRE(2)=CPUADDRE(2)|'F0'X;                   1011 04660000
         OI    CPUADDRE+1(WPLPTR),X'F0'                            1011 04661000
*                 GENERATE CODE(WTO   MF=(E,(1)));                 1012 04662000
         WTO   MF=(E,(1))                                               04663000
*               END;                                               1013 04664000
*           END;                                                   1014 04665000
@RF01000 DS    0H                                                  1015 04666000
*                                                                  1015 04667000
*/********************************************************************/ 04668000
*/*                                                                  */ 04669000
*/* NOW CHECK THE CPU TIMER STATUS BITS TO DETERMINE IF THE CPU TIMER*/ 04670000
*/* REQUIRES RECOVERY.                                               */ 04671000
*/*                                                                  */ 04672000
*/********************************************************************/ 04673000
*                                                                  1015 04674000
*         IF PCCANUIN='1'B&PCCANFIN='0'B THEN                      1015 04675000
*                                                                  1015 04676000
@RF00998 TM    PCCANUIN(PCCAPTR),B'10000000'                       1015 04677000
         BNO   @RF01015                                            1015 04678000
         TM    PCCANFIN(PCCAPTR),B'01000000'                       1015 04679000
         BNZ   @RF01015                                            1015 04680000
*/********************************************************************/ 04681000
*/*                                                                  */ 04682000
*/* IF SO, TEST TO SEE IF SYNCHRONOUS RECOVERY HAS BEEN UNABLE TO    */ 04683000
*/* RECOVER THE ERROR.                                               */ 04684000
*/*                                                                  */ 04685000
*/********************************************************************/ 04686000
*                                                                  1016 04687000
*           DO;                                                    1016 04688000
*             IF PCCAMINT='1'B THEN                                1017 04689000
*                                                                  1017 04690000
         TM    PCCAMINT(PCCAPTR),B'00001000'                       1017 04691000
         BNO   @RF01017                                            1017 04692000
*/********************************************************************/ 04693000
*/*                                                                  */ 04694000
*/* IF SO, INDICATE THAT NO ATTEMPTS SHOULD BE MADE TO RECOVER THE   */ 04695000
*/* CPU TIMER.  THEN, DECREMENT THE COUNT OF GOOD CPU TIMERS BY 1.   */ 04696000
*/*                                                                  */ 04697000
*/********************************************************************/ 04698000
*                                                                  1018 04699000
*               DO;                                                1018 04700000
*                 PCCANFIN='1'B;                                   1019 04701000
         OI    PCCANFIN(PCCAPTR),B'01000000'                       1019 04702000
*                 CURRENT=CSDGDINT;                                1020 04703000
         L     CURRENT,CSDGDINT(,REG3)                             1020 04704000
*SUB5:                                                             1021 04705000
*                 NEW=CURRENT-1;                                   1021 04706000
SUB5     LR    NEW,CURRENT                                         1021 04707000
         BCTR  NEW,0                                               1021 04708000
*                 CS(CURRENT,NEW,CSDGDINT);                        1022 04709000
         CS    CURRENT,@01,CSDGDINT(REG3)                          1022 04710000
*                 BC(7,SUB5);                                      1023 04711000
         BC    7,SUB5                                              1023 04712000
*                 PCCAMINT='0'B;                                   1024 04713000
*                                                                  1024 04714000
         NI    PCCAMINT(PCCAPTR),B'11110111'                       1024 04715000
*/********************************************************************/ 04716000
*/*                                                                  */ 04717000
*/* ASSEMBLE THE ERROR MSG, AND TELL THE OPERATOR THAT THE CPU TIMER */ 04718000
*/* IS PERMANENTLY DAMAGED.                                          */ 04719000
*/*                                                                  */ 04720000
*/********************************************************************/ 04721000
*                                                                  1025 04722000
*                 CVD(PCCACPUA,CVRTAREA);                          1025 04723000
         LH    @07,PCCACPUA(,PCCAPTR)                              1025 04724000
         CVD   @07,CVRTAREA                                        1025 04725000
*                 WPLPTR=ADDR(EMSGCPUT);                           1026 04726000
         LA    WPLPTR,EMSGCPUT                                     1026 04727000
*                 UNPK(CPUADDRE,CVRTAREA(7:8));                    1027 04728000
         UNPK  CPUADDRE(2,WPLPTR),CVRTAREA+6(2)                    1027 04729000
*                 CPUADDRE(2)=CPUADDRE(2)|'F0'X;                   1028 04730000
         OI    CPUADDRE+1(WPLPTR),X'F0'                            1028 04731000
*                 GENERATE CODE(WTO   MF=(E,(1)));                 1029 04732000
         WTO   MF=(E,(1))                                               04733000
*               END;                                               1030 04734000
*           END;                                                   1031 04735000
@RF01017 DS    0H                                                  1032 04736000
*       END;                                                       1032 04737000
@RF01015 DS    0H                                                  1033 04738000
*     REG2=REG2+LENGTH(PCCAT00P);   /* POINT TO NEXT PCCAVT ENTRY    */ 04739000
@RF00948 AH    REG2,@CH00108                                       1033 04740000
*   END;                                                           1034 04741000
         BCTR  SLOTCNT,0                                           1034 04742000
         LTR   SLOTCNT,SLOTCNT                                     1034 04743000
         BP    @DL00947                                            1034 04744000
*                                                                  1035 04745000
*/********************************************************************/ 04746000
*/*                                                                  */ 04747000
*/* THIS IS THE RETRY POINT FROM THE ESTAE EXIT.  REGISTER 15 MUST   */ 04748000
*/* BE USED FOR TEMPORARY ADDRESSABILITY IN THE MAINLINE BECAUSE IT  */ 04749000
*/* WILL CONTAIN THE RETRY ENTRY POINT ADDRESS IN A RETRY SITUATION. */ 04750000
*/*                                                                  */ 04751000
*/********************************************************************/ 04752000
*                                                                  1035 04753000
*   GENERATE CODE REFS(CLABASE) SETS(REG9,REG15) DEFS(CLARETRY);   1035 04754000
*                                                                  1035 04755000
*                                                              /*       04756000
         BALR  REG15,0            ESTABLISH ADDRESSABILITY FOR          04757000
         USING *,REG15               RETRY POINT COMPATABILITY          04758000
CLARETRY L     REG9,CLABASE       GET ORIGINAL BASE ADDRESS             04759000
         USING CLABSLBL,REG9                                            04760000
         DROP  REG15                                                    04761000
*/********************************************************************/ 04762000
*/*                                                                  */ 04763000
*/* MAKE SURE THAT THE REAL TIME TQE QUEUE IS KEPT ALIVE.            */ 04764000
*/*                                                                  */ 04765000
*/********************************************************************/ 04766000
*                                                                  1036 04767000
*   GENERATE CODE REFS(PSALITA);                                   1036 04768000
*                             /*                                        04769000
         SETLOCK  OBTAIN,TYPE=DISP,MODE=UNCOND,                       **04770000
               RELATED=('REAL TQE QUEUE',(IEAVRTOD,(NOLABEL))) */       04771000
*   CLACVTP=CVTPTR;                 /* RESTORE POINTER TO CVT        */ 04772000
         L     CLACVTP,CVTPTR                                      1037 04773000
*   REG12=TPCCKQ;                   /* GET ADDRESS OF REAL TIME Q  1038 04774000
*                                      CHECKING ROUTINE              */ 04775000
         L     @07,TPCPTR(,CLACVTP)                                1038 04776000
         L     REG12,TPCCKQ(,@07)                                  1038 04777000
*   IF CLABND='1'B THEN             /* IF THERE IS NOW A GOOD CLOCK     04778000
*                                      COMP/TODC,                    */ 04779000
         TM    CLABND,B'10000000'                                  1039 04780000
         BNO   @RF01039                                            1039 04781000
*     TPCABND='0'B;                 /* INDICATE IT TO SET CC         */ 04782000
         NI    TPCABND(@07),B'01111111'                            1040 04783000
*/********************************************************************/ 04784000
*/*                                                                  */ 04785000
*/* GO TO SET CC ROUTINE.  THEN RESTORE POINTER TO CVT AND RELEASE   */ 04786000
*/* THE DISPATCHER LOCK.                                             */ 04787000
*/*                                                                  */ 04788000
*/********************************************************************/ 04789000
*                                                                  1041 04790000
*   GENERATE CODE REFS(REG12) SETS(REG2)(BALR  REG2,REG12);        1041 04791000
@RF01039 DS    0H                                                  1041 04792000
         BALR  REG2,REG12                                               04793000
*   CLACVTP=CVTPTR;                 /* RESTORE POINTER TO CVT        */ 04794000
         L     CLACVTP,CVTPTR                                      1042 04795000
*   GENERATE CODE REFS(PSALITA);                                   1043 04796000
*                                                                  1043 04797000
*                              /*                                       04798000
         SETLOCK RELEASE,TYPE=DISP,                                   **04799000
               RELATED=('REAL TQE QUEUE',(IEAVRTOD,(NOLABEL)))  */      04800000
*/********************************************************************/ 04801000
*/*                                                                  */ 04802000
*/* SEE IF IEAVRCLA HAS BEEN SCHEDULED AGAIN TO RECOVER AN ERROR     */ 04803000
*/* THAT OCCURRED WHILE IT WAS IN THE PROCESS OF RECOVERING OTHER    */ 04804000
*/* ERRORS.  IT IT HAS, ANOTHER PASS WILL BE MADE THROUGH THE PCCA'S */ 04805000
*/* TO FIND THE NEW ERROR.  (NOTE:  THE COMBINATION OF THE TEST CYCLE*/ 04806000
*/* BIT(CLATC) = 0 AND THE IN-USE BIT(CLASIU) = 1 INDICATES THAT NO  */ 04807000
*/* FURTHER ERROR HAS OCCURRED.)  IF IT HAS NOT BEEN SCHEDULED AGAIN,*/ 04808000
*/* SET BOTH BITS TO 0.                                              */ 04809000
*/*                                                                  */ 04810000
*/********************************************************************/ 04811000
*                                                                  1044 04812000
*   CURRENT=2;                                                     1044 04813000
         LA    CURRENT,2                                           1044 04814000
*   NEW=0;                                                         1045 04815000
         SLR   NEW,NEW                                             1045 04816000
*   REG12=ADDR(TPCRSRB);            /* GET ADDRESSABILITY TO SRB     */ 04817000
         L     REG12,TPCPTR(,CLACVTP)                              1046 04818000
         LA    REG12,TPCRSRB(,REG12)                               1046 04819000
*   CS(CURRENT,NEW,REG12->SRBPARM);                                1047 04820000
         CS    CURRENT,@01,SRBPARM(REG12)                          1047 04821000
*   BC(7,SETTC);                    /* BRANCH IF MORE TO RECOVER     */ 04822000
         BC    7,SETTC                                             1048 04823000
*/********************************************************************/ 04824000
*/*                                                                  */ 04825000
*/* FREE THE PAGE CONTAINING IEAVRCLA.                               */ 04826000
*/*                                                                  */ 04827000
*/********************************************************************/ 04828000
*                                                                  1049 04829000
*   RESPECIFY                                                      1049 04830000
*     CVTMAP BASED(CVTPTR);         /*                       @ZA20300*/ 04831000
*   REG1=ADDR(SETTC);               /* GET POINTER TO START OF     1050 04832000
*                                      IEAVRCLA                      */ 04833000
         LA    REG1,SETTC                                          1050 04834000
*   REG15=ADDR(ENDTOD);             /* GET POINTER TO END OF IEAVRTOD*/ 04835000
         LA    REG15,ENDTOD                                        1051 04836000
*   GENERATE CODE(PGFREE R,A=(1),EA=(15));                         1052 04837000
*                                                                  1052 04838000
         PGFREE R,A=(1),EA=(15)                                         04839000
*/********************************************************************/ 04840000
*/*                                                                  */ 04841000
*/* GET RETURN ADDRESS.                                      @ZA20300*/ 04842000
*/*                                                                  */ 04843000
*/********************************************************************/ 04844000
*                                                                  1053 04845000
*   REG14=ADDR(CVTEXIT);            /*                       @ZA20300*/ 04846000
         L     REG14,CVTPTR                                        1053 04847000
         LA    REG14,CVTEXIT(,REG14)                               1053 04848000
*/********************************************************************/ 04849000
*/*                                                                  */ 04850000
*/* DELETE ERROR EXIT FOR UNLOCKED CODE, AND RETURN TO DISPATCHER.   */ 04851000
*/*                                                                  */ 04852000
*/********************************************************************/ 04853000
*                                                                  1054 04854000
*   GEN CODE(ESTAE 0);                                             1054 04855000
         ESTAE 0                                                        04856000
*   GENERATE CODE REFS(REG14)(BR    REG14);                        1055 04857000
         BR    REG14                                                    04858000
*   RESPECIFY                                                      1056 04859000
*    (PCCAPTR) UNRESTRICTED;                                       1056 04860000
*   RESPECIFY                                                      1057 04861000
*     CSD BASED(CVTCSD);                                           1057 04862000
*                                                                  1058 04863000
*/********************************************************************/ 04864000
*/*                                                                  */ 04865000
*/*         CLAESTAE--IEAVRCLA RECOVERY FOR UNLOCKED CODE            */ 04866000
*/*                                                                  */ 04867000
*/********************************************************************/ 04868000
*                                                                  1058 04869000
*CLAESTAE:                                                         1058 04870000
*   PROC OPTIONS(NOSAVE,NOSAVEAREA,NOENTREG,RETREG);               1058 04871000
*                                                                  1058 04872000
         B     @PB00008                                            1058 04873000
CLAESTAE DS    0H                                                  1059 04874000
*/********************************************************************/ 04875000
*/*                                                                  */ 04876000
*/* ESTABLISH TEMPORARY ADDRESSABILITY.                              */ 04877000
*/*                                                                  */ 04878000
*/********************************************************************/ 04879000
*                                                                  1059 04880000
*   GEN CODE SETS(REG12) REFS(REG9);                               1059 04881000
*                                                                  1059 04882000
         BALR  REG12,0                                                  04883000
         USING *,REG12                                                  04884000
         DROP  REG9                                                     04885000
*/********************************************************************/ 04886000
*/*                                                                  */ 04887000
*/* SEE IF SDWA WAS SUPPLIED                                         */ 04888000
*/*                                                                  */ 04889000
*/********************************************************************/ 04890000
*                                                                  1060 04891000
*   IF REG0=12 THEN                                                1060 04892000
*                                                                  1060 04893000
         CH    REG0,@CH01265                                       1060 04894000
         BNE   @RF01060                                            1060 04895000
*/********************************************************************/ 04896000
*/*                                                                  */ 04897000
*/* IF THE SDWA WAS NOT SUPPLIED, PUT RETRY ADDRESS IN REG 0 AND A   */ 04898000
*/* RETURN CODE OF 4 INTO REG 15 TO INDICATE RETRY.                  */ 04899000
*/*                                                                  */ 04900000
*/********************************************************************/ 04901000
*                                                                  1061 04902000
*     DO;                                                          1061 04903000
*       REG0=CLARTYA;               /* PUT RETRY ADDRESS INTO REG 0  */ 04904000
         L     REG0,CLARTYA                                        1062 04905000
*       RETCODE=4;                                                 1063 04906000
         LA    RETCODE,4                                           1063 04907000
*     END;                                                         1064 04908000
*                                                                  1064 04909000
*/********************************************************************/ 04910000
*/*                                                                  */ 04911000
*/* IF SUPPLIED, ISSUE SETRP TO ESTABLISH INTERFACE BACK TO RTM.     */ 04912000
*/*                                                                  */ 04913000
*/********************************************************************/ 04914000
*                                                                  1065 04915000
*   ELSE                                                           1065 04916000
*     DO;                           /* SETRP RECPARM(CLAID)RC(4)RETAD   04917000
*                                      DR(RETRYCLA)FRESDWA(YES)DUMP(N   04918000
*                                      O)                            */ 04919000
         B     @RC01060                                            1065 04920000
@RF01060 DS    0H                                                  1066 04921000
*       RESPECIFY                                                  1066 04922000
*        (GPR00P,                                                  1066 04923000
*         GPR01P,                                                  1066 04924000
*         GPR14P,                                                  1066 04925000
*         GPR15P) RSTD;                                            1066 04926000
*       GPR01P->SDWARCDE=4;         /* STORE RC INTO SDWA            */ 04927000
         MVI   SDWARCDE(GPR01P),X'04'                              1067 04928000
*       GPR01P->SDWARTYA=ADDR(RETRYCLA);/* SAVE RETRY ADDRESS        */ 04929000
         MVC   SDWARTYA(4,GPR01P),CLARTYA                          1068 04930000
*       GPR01P->SDWAFREE='1'B;      /* SET FLAG TO FREE SDWA         */ 04931000
         OI    SDWAFREE(GPR01P),B'00000100'                        1069 04932000
*       GPR15P=ADDR(CLAID);         /* ACCESS RECORD PARAMETER LIST  */ 04933000
         LA    GPR15P,CLAID                                        1070 04934000
*       GPR01P->SDWARECP=GPR15P->I256C(1:24);/* COPY RECORD        1071 04935000
*                                      PARAMETERS                    */ 04936000
         MVC   SDWARECP(24,GPR01P),I256C(GPR15P)                   1071 04937000
*       GPR01P->SDWAREQ='0'B;       /* TURN OFF DUMP INDICATOR       */ 04938000
         NI    SDWAREQ(GPR01P),B'01111111'                         1072 04939000
*       RESPECIFY                                                  1073 04940000
*        (GPR00P,                                                  1073 04941000
*         GPR01P,                                                  1073 04942000
*         GPR14P,                                                  1073 04943000
*         GPR15P) UNRSTD;                                          1073 04944000
*     END;                                                         1074 04945000
*                                                                  1074 04946000
*/********************************************************************/ 04947000
*/*                                                                  */ 04948000
*/* RETURN TO RTM.                                                   */ 04949000
*/*                                                                  */ 04950000
*/********************************************************************/ 04951000
*                                                                  1075 04952000
*   END CLAESTAE;                                                  1075 04953000
@EL00008 DS    0H                                                  1075 04954000
@EF00008 DS    0H                                                  1075 04955000
@ER00008 BR    @14                                                 1075 04956000
@PB00008 DS    0H                                                  1076 04957000
*                                                                  1076 04958000
*/********************************************************************/ 04959000
*/*                                                                  */ 04960000
*/* THIS ROUTINE GAINS CONTROL WHEN IT IS NECESSARY TO GET THE CUR-  */ 04961000
*/* RENT VALUE OF THE TOD CLOCK ON A GIVEN CPU, AND ALSO TO DETERMINE*/ 04962000
*/* ITS STATE.  IN AN MP CONFIGURATION, IT RECEIVES CONTROL VIA THE  */ 04963000
*/* IPC, WHILE ON A STRICTLY UP SYSTEM IT RECEIVES CONTROL VIA BALR. */ 04964000
*/*                                                                  */ 04965000
*/********************************************************************/ 04966000
*                                                                  1076 04967000
*DELTA1:                                                           1076 04968000
*   GENERATE CODE REFS(REG1,REG14,REG15,TCENTRY,TCWAPCCA) SETS(TCWACLKE 04969000
*       ,REG12,TCWALFLG,PCCASYNC);                                 1076 04970000
DELTA1   DS    0H                                                  1076 04971000
         USING *,REG15                  ADDRESSABILITY FOR ROUTINE      04972000
         USING TCENTRY,REG1             ADDRESSABILITY FOR TCWA         04973000
         STCK  TCWACLKE                 STORE CLOCK INTO TCWA ENTRY     04974000
         BALR  REG12,0                  GET CC FROM STCK INSTRUCTION    04975000
         STCM  REG12,8,TCWALFLG         STORE IT INTO TCWA ENTRY        04976000
         L     REG12,TCWAPCCA           GET PCCA ADDRESS                04977000
         NI    PCCASYNC(REG12),X'BF'    TURN OFF SYNC FALG IN PCCA      04978000
         BR    REG14                    RETURN                          04979000
         DROP  REG15                                                    04980000
         DROP  REG1                                                     04981000
*                                                                  1077 04982000
*/********************************************************************/ 04983000
*/*                                                                  */ 04984000
*/* THIS ROUTINE GAINS CONTROL WHEN IT IS NECESSARY TO SET THE TOD   */ 04985000
*/* CLOCK ON A GIVEN CPU.  IN AN MP CONFIGURATION, IT RECEIVES CON-  */ 04986000
*/* TROL VIA THE IPC, WHILE ON A STRICTLY UP SYSTEM IT RECEIVES CON- */ 04987000
*/* TROL VIA BALR.                                                   */ 04988000
*/*                                                                  */ 04989000
*/********************************************************************/ 04990000
*                                                                  1077 04991000
*   GENERATE CODE REFS(REG15)(USING *,REG15);                      1077 04992000
         USING *,REG15                                                  04993000
*DELTA2:                                                           1078 04994000
*   GENERATE CODE REFS(REG1) SETS(TCWACTL)                         1078 04995000
*       (STCTL 0,0,TCWACTL(REG1)  STORE CONTROL REG 0);            1078 04996000
DELTA2   STCTL 0,0,TCWACTL(REG1)  STORE CONTROL REG 0                   04997000
*   REG1->TCSTOP='1'B;              /* TURN ON BIT TO STOP TOD CLOCK */ 04998000
         OI    TCSTOP(REG1),B'00100000'                            1079 04999000
*   GENERATE CODE REFS(REG1,TCWACTL)                               1080 05000000
*       (LCTL  0,0,TCWACTL(REG1)  LOAD CONTROL REG 0);             1080 05001000
         LCTL  0,0,TCWACTL(REG1)  LOAD CONTROL REG 0                    05002000
*   REG1->TCGNSET='0'B;             /* INDICATE SECURITY SW DEPRESSED*/ 05003000
         NI    TCGNSET(REG1),B'11110111'                           1081 05004000
*   GENERATE CODE REFS(TCWACVAL)(SCK   TCWACVAL(REG1)  SET THE CLOCK);  05005000
         SCK   TCWACVAL(REG1)  SET THE CLOCK                            05006000
*   GENERATE CODE REFS(REG14)(BCR   8,REG14     RETURN IF SWITCH DOWN); 05007000
         BCR   8,REG14     RETURN IF SWITCH DOWN                        05008000
*   REG1->TCGNSET='1'B;             /* ELSE, INDICATE SW RELEASED    */ 05009000
         OI    TCGNSET(REG1),B'00001000'                           1084 05010000
*   GENERATE CODE REFS(REG14)(BR    REG14         RETURN);         1085 05011000
         BR    REG14         RETURN                                     05012000
*   GENERATE CODE REFS(REG15)(DROP  REG15);                        1086 05013000
         DROP  REG15                                                    05014000
*                                                                  1087 05015000
*/********************************************************************/ 05016000
*/*                                                                  */ 05017000
*/* THIS ROUTINE GAINS CONTROL WHEN IT IS NECESSARY TO GET THE CUR-  */ 05018000
*/* VALUE OF THE TOD CLOCK ON A GIVEN CPU.  IN AN MP CONFIGURATION,  */ 05019000
*/* IT RECEIVES CONTROL VIA THE IPC, WHILE IN A STRICTLY UP SYSTEM   */ 05020000
*/* IT RECEIVES CONTROL VIA BALR.                                    */ 05021000
*/*                                                                  */ 05022000
*/********************************************************************/ 05023000
*                                                                  1087 05024000
*DELTA3:                                                           1087 05025000
*   GENERATE CODE REFS(REG1,REG14,REG15);                          1087 05026000
DELTA3   DS    0H                                                  1087 05027000
         USING *,REG15                 ADDRESSABILITY FOR ROUTINE       05028000
         STCK  0(REG1)                 STORE CURRENT CLOCK VALUE        05029000
         BR    REG14                   RETURN                           05030000
         DROP  REG15                                                    05031000
*                                                                  1088 05032000
*/********************************************************************/ 05033000
*/*                                                                  */ 05034000
*/* THIS ROUTINE STORES THE TOD CLOCK ON A GIVEN CPU UNTIL BIT 31    */ 05035000
*/* CHANGES IN ORDER TO ALLOW A MAXIMUM INTERVAL (UNTIL BIT 31       */ 05036000
*/* CHANGES AGAIN) FOR SYNCHRONIZING THE TOD CLOCKS.  IT ALWAYS      */ 05037000
*/* RECEIVES CONTROL VIA THE IPC.                                    */ 05038000
*/*                                                                  */ 05039000
*/********************************************************************/ 05040000
*                                                                  1088 05041000
*DELTA4:                                                           1088 05042000
*   GENERATE CODE REFS(REG15,REG1,TCWA);                           1088 05043000
*                                                                  1088 05044000
DELTA4   DS    0H                                                  1088 05045000
         USING *,REG15                ADDRESSABILITY FOR ROUTINE        05046000
         USING TCWA,REG1              ADDRESSABILITY FOR TCWA           05047000
*/********************************************************************/ 05048000
*/*                                                                  */ 05049000
*/* INITIALIZE STARTING AND ENDING CLOCK VALUES.                     */ 05050000
*/*                                                                  */ 05051000
*/********************************************************************/ 05052000
*                                                                  1089 05053000
*   RESPECIFY                                                      1089 05054000
*     TCWA BASED(REG1);                                            1089 05055000
*   GENERATE CODE SETS(TCWAA1,TCWAA2);                             1090 05056000
*                                                                  1090 05057000
*                                                         /*@ZA28478*/  05058000
         STCK  TCWAA1                                        @ZA28478   05059000
         STCK  TCWAA2                                        @ZA28478   05060000
*/********************************************************************/ 05061000
*/*                                                                  */ 05062000
*/* STORE THE TOD CLOCK SUCCESSIVELY INTO TCWAA2 UNTIL BIT           */ 05063000
*/* 31 CHANGES.  (NOTE: THIS CHANGE IS INDICATED BY THE HIGH ORDER   */ 05064000
*/* 32 BITS OF THE 2 VALUES NOT BEING EQUAL.)                        */ 05065000
*/*                                                                  */ 05066000
*/********************************************************************/ 05067000
*                                                                  1091 05068000
*   DO WHILE TCWAA2L=TCWAA1L;                                      1091 05069000
         B     @DE01091                                            1091 05070000
@DL01091 DS    0H                                                  1092 05071000
*     GENERATE CODE SETS(TCWAA2)(STCK  TCWAA2);/*            @ZA28478*/ 05072000
         STCK  TCWAA2                                                   05073000
*   END;                                                           1093 05074000
@DE01091 CLC   TCWAA2L(4,REG1),TCWAA1L(REG1)                       1093 05075000
         BE    @DL01091                                            1093 05076000
*   GENERATE CODE REFS(REG14)(BR    REG14                 RETURN); 1094 05077000
         BR    REG14                 RETURN                             05078000
*                                                                  1095 05079000
*/********************************************************************/ 05080000
*/*                                                                  */ 05081000
*/* THIS ROUTINE GAINS CONTROL WHEN IT IS NECESSARY FOR THE OPERATOR */ 05082000
*/* TO PLACE THE TOD CLOCK SECURITY SWITCH IN THE ENABLED POSITION   */ 05083000
*/* SO THAT THE CLOCKS CAN BE SYNCHRONIZED.  IT ATTEMPTS FOR 30      */ 05084000
*/* SECONDS TO SET THE CLOCK, THE PURPOSE BEING TO DETERMINE IF THE  */ 05085000
*/* SECURITY SWITCH HAS BEEN ENABLED.  IT EXITS EITHER AFTER 30      */ 05086000
*/* SECONDS HAS ELAPSED, OR WHEN THE SWITCH HAS BEEN ENABLED.        */ 05087000
*/*                                                                  */ 05088000
*/********************************************************************/ 05089000
*                                                                  1095 05090000
*DELTA7:                                                           1095 05091000
*   RESPECIFY                                                      1095 05092000
*     TCWA BASED(REG1);                                            1095 05093000
DELTA7   DS    0H                                                  1096 05094000
*   GENERATE CODE REFS(REG1,REG15,TCWA) SETS(TCWAA1,TCWAA2);       1096 05095000
*                                                                  1096 05096000
         USING *,REG15                                                  05097000
         USING TCWA,REG1                                                05098000
         STPT  TCWAA1               STORE INTERVAL START VALUE          05099000
         STPT  TCWAA2               STORE INTERVAL END VALUE            05100000
*/********************************************************************/ 05101000
*/*                                                                  */ 05102000
*/* LOOP ON A SET CLOCK INSTRUCTION UNTIL THE OPERATOR DEPRESSES THE */ 05103000
*/* SECURITY SWITCH, OR THE ALLOTTED INTERVAL EXPIRES.               */ 05104000
*/*                                                                  */ 05105000
*/********************************************************************/ 05106000
*                                                                  1097 05107000
*   DO WHILE TCWAA1L-TCWAA2L<30&TCGNSET='1'B;                      1097 05108000
         B     @DE01097                                            1097 05109000
@DL01097 DS    0H                                                  1098 05110000
*     GENERATE CODE REFS(TCWACVAL)(SCK   TCWACVAL);                1098 05111000
*                                                                  1098 05112000
         SCK   TCWACVAL                                                 05113000
*/********************************************************************/ 05114000
*/*                                                                  */ 05115000
*/* TEST FOR SUCCESSFUL EXECUTION OF THE SET CLOCK INSTRUCTION.      */ 05116000
*/*                                                                  */ 05117000
*/********************************************************************/ 05118000
*                                                                  1099 05119000
*     BC(7,STCPUT);                                                1099 05120000
*                                                                  1099 05121000
         BC    7,STCPUT                                            1099 05122000
*/********************************************************************/ 05123000
*/*                                                                  */ 05124000
*/* IF SUCCESSFUL, INDICATE IN TCWA THAT SWITCH IS ENABLED.  THEN,   */ 05125000
*/* WHETHER ENABLED OR NOT, STORE AN INTERVAL ENDING VALUE.          */ 05126000
*/*                                                                  */ 05127000
*/********************************************************************/ 05128000
*                                                                  1100 05129000
*     TCGNSET='0'B;                                                1100 05130000
         NI    TCGNSET(REG1),B'11110111'                           1100 05131000
*STCPUT:                                                           1101 05132000
*     GENERATE CODE SETS(TCWAA2)(STPT  TCWAA2);                    1101 05133000
STCPUT   STPT  TCWAA2                                                   05134000
*   END;                                                           1102 05135000
*                                                                  1102 05136000
@DE01097 L     @07,TCWAA1L(,REG1)                                  1102 05137000
         SL    @07,TCWAA2L(,REG1)                                  1102 05138000
         CL    @07,@CF00189                                        1102 05139000
         BNL   @DC01097                                            1102 05140000
         TM    TCGNSET(REG1),B'00001000'                           1102 05141000
         BO    @DL01097                                            1102 05142000
@DC01097 DS    0H                                                  1103 05143000
*/********************************************************************/ 05144000
*/*                                                                  */ 05145000
*/* RETURN TO EXTERNAL SECOND LEVEL INTERRUPT HANDLER.               */ 05146000
*/*                                                                  */ 05147000
*/********************************************************************/ 05148000
*                                                                  1103 05149000
*   GENERATE CODE REFS(REG9,REG10,REG14);                          1103 05150000
         BR    REG14                                                    05151000
         USING @PSTART,REG9                                             05152000
         USING @PSTART+4095,REG10                                       05153000
*   DECLARE                         /* GENERAL PURPOSE REGISTERS     */ 05154000
*     GPR00P PTR(31) REG(0),                                       1104 05155000
*     GPR01P PTR(31) REG(1),                                       1104 05156000
*     GPR14P PTR(31) REG(14),                                      1104 05157000
*     GPR15P PTR(31) REG(15);                                      1104 05158000
*   DECLARE                         /* COMMON VARIABLES              */ 05159000
*     I256C CHAR(256) BASED,                                       1105 05160000
*     I031F FIXED(31) BASED,                                       1105 05161000
*     I031P PTR(31) BASED,                                         1105 05162000
*     I015F FIXED(15) BASED,                                       1105 05163000
*     I015P PTR(15) BASED,                                         1105 05164000
*     I008P PTR(8) BASED,                                          1105 05165000
*     I001C CHAR(1) BASED;                                         1105 05166000
*   END IEAVRTOD                                                   1106 05167000
*                                                                  1106 05168000
*/* THE FOLLOWING INCLUDE STATEMENTS WERE FOUND IN THIS PROGRAM.     */ 05169000
*/*%INCLUDE SYSLIB  (IEAVVTPC)                                       */ 05170000
*/*%INCLUDE SYSLIB  (IEZWPL  )                                       */ 05171000
*/*%INCLUDE SYSLIB  (IEEBASEA)                                       */ 05172000
*/*%INCLUDE SYSLIB  (IHALCCAT)                                       */ 05173000
*/*%INCLUDE SYSLIB  (IHALCCA )                                       */ 05174000
*/*%INCLUDE SYSLIB  (IHAASVT )                                       */ 05175000
*/*%INCLUDE SYSLIB  (IHAPSA  )                                       */ 05176000
*/*%INCLUDE SYSLIB  (IHASRB  )                                       */ 05177000
*/*%INCLUDE SYSLIB  (IHAASCB )                                       */ 05178000
*/*%INCLUDE SYSLIB  (IHACSD  )                                       */ 05179000
*/*%INCLUDE SYSLIB  (IHAPCCA )                                       */ 05180000
*/*%INCLUDE SYSLIB  (IHAPCCAT)                                       */ 05181000
*/*%INCLUDE SYSLIB  (IHATQE  )                                       */ 05182000
*/*%INCLUDE SYSLIB  (CVT     )                                       */ 05183000
*/*%INCLUDE SYSLIB  (IHASDWA )                                       */ 05184000
*                                                                  1106 05185000
*       ;                                                          1106 05186000
         B     @EL00001                                            1106 05187000
@DATA    DS    0H                                                       05188000
@CH00119 DC    H'2'                                                     05189000
@CH00108 DC    H'4'                                                     05190000
@CH00038 DC    H'8'                                                     05191000
@CH01265 DC    H'12'                                                    05192000
@CH00507 DC    H'20'                                                    05193000
@CH00707 DC    H'48'                                                    05194000
@CH01364 DC    H'112'                                                   05195000
@CH02779 DC    H'-60'                                                   05196000
@DATD    DSECT                                                          05197000
         DS    0F                                                       05198000
@SA00001 DS    18F                                                      05199000
@PC00001 DS    2F                                                       05200000
@PC00006 DS    3F                                                       05201000
IEAVRTOD CSECT                                                          05202000
         DS    0F                                                       05203000
@CF00096 DC    F'1'                                                     05204000
@CH00096 EQU   @CF00096+2                                               05205000
@CF00045 DC    F'16'                                                    05206000
@CH00045 EQU   @CF00045+2                                               05207000
@CF00189 DC    F'30'                                                    05208000
@DATD    DSECT                                                          05209000
         DS    0D                                                       05210000
PTREBEG  DS    A                                                        05211000
PTREEND  DS    A                                                        05212000
RCSAVE   DS    F                                                        05213000
I5       DS    F                                                        05214000
LOOPCTR  DS    F                                                        05215000
SETLOOP  DS    F                                                        05216000
TODECB   DS    F                                                        05217000
TCWALN   DS    H                                                        05218000
CALLERID DS    H                                                        05219000
CPUSLEFT DS    H                                                        05220000
         DS    0D                                                       05221000
@TS00001 DS    CL8                                                      05222000
R1314SAV DS    CL8                                                      05223000
         ORG   R1314SAV                                                 05224000
R13SAV   DS    AL4                                                      05225000
RETSAVE  DS    AL4                                                      05226000
         ORG   R1314SAV+8                                               05227000
SSCRPARM DS    CL12                                                     05228000
         ORG   SSCRPARM                                                 05229000
SSCBASE  DS    CL12                                                     05230000
         ORG   SSCBASE                                                  05231000
SSCREG8  DS    AL4                                                      05232000
SSCREG9  DS    AL4                                                      05233000
SSCREG10 DS    AL4                                                      05234000
         ORG   SSCRPARM+12                                              05235000
IEAVRTOD CSECT                                                          05236000
         DS    0F                                                       05237000
@SIZDATD DC    AL1(0)                                                   05238000
         DC    AL3(@ENDDATD-@DATD)                                      05239000
@CA02635 DC    A(IEAVRSSC)                                              05240000
         DS    0D                                                       05241000
CLAECB   DS    F                                                        05242000
CLABASE  DC    AL4(CLABSLBL)                                            05243000
CLARTYA  DC    AL4(CLARETRY)                                            05244000
SSCRTYA  DC    AL4(SSCRETRY)                                            05245000
MICSMIN  DC    F'60000000'                                              05246000
MINSHOUR DC    F'60'                                                    05247000
DAYS4YRS DC    F'1461'                                                  05248000
DAYSFACT DC    F'10546875'                                              05249000
MICSSEC  DC    F'1000000'                                               05250000
K100     DC    H'100'                                                   05251000
K1000    DC    H'1000'                                                  05252000
K10000   DC    H'10000'                                                 05253000
MINSDAY  DC    H'1440'                                                  05254000
@CB02630 DC    X'0000000000000000'                                      05255000
CLAFLGS  DC    X'00'                                                    05256000
         ORG   CLAFLGS                                                  05257000
CLABND   DS    BL1                                                      05258000
@NM00001 EQU   CLAFLGS+0                                                05259000
         ORG   CLAFLGS+1                                                05260000
CLAID    DS    CL24                                                     05261000
         ORG   CLAID                                                    05262000
CLAMODNM DC    CL8'IEAVRTOD'                                            05263000
CLACSECT DC    CL8'IEAVRTOD'                                            05264000
CLAFRRID DC    CL8'CLAESTAE'                                            05265000
         ORG   CLAID+24                                                 05266000
IDVRSSC  DC    X'03808000'                                              05267000
SSCID    DS    CL24                                                     05268000
         ORG   SSCID                                                    05269000
SSCMODNM DC    CL8'IEAVRTOD'                                            05270000
SSCCSECT DC    CL8'IEAVRTOD'                                            05271000
SSCFRRID DC    CL8'SSCESTAE'                                            05272000
         ORG   SSCID+24                                                 05273000
         DS    CL7                                                      05274000
CVRTAREA DS    CL8                                                      05275000
TMSTINIT DC    X'80000000'                                              05276000
CAPU     DC    CL2'U '                                                  05277000
SMALLU   DC    X'A440'                                                  05278000
CHARSET  DC    CL4'SET '                                                05279000
DTEPATRN DC    X'F021204B202020'                                        05280000
CLKPATRN DC    X'2120204B20204B2020'                                    05281000
PATCHTOD DC    CL250' '                                                 05282000
         DS    CL2                                                      05283000
CLASAV   DS    18F                                                      05284000
@DATD    DSECT                                                          05285000
*                           /*                                          05286000
*                                                                       05287000
ESTAEL   ESTAE ,MF=L                                                    05288000
*                                                            */         05289000
IEAVRTOD CSECT                                                          05290000
*                                                /*                     05291000
*                                                                       05292000
* c117500                                                    @YM04380   05293000
MSGXXX1  WTO   '   IEA888A GMT   DATE=YY.DDD,CLOCK=HH.MM.SS',         **05294000
               ROUTCDE=(1),DESC=(3),MCSFLAG=(NOTIME),MF=L               05295000
*                                                                       05296000
* c117800-117900                                             @YM04380   05297000
* C117900                                                    @YM08124   05298000
MSGXXX2  WTOR  'IEA888A LOCAL DATE=YY.DDD,CLOCK=HH.MM.SS  REPLY U, OR GG05299000
               MT/LOCAL TIME',,40,ROUTCDE=(1),DESC=(2),               **05300000
               MCSFLAG=(NOTIME),MF=L                                    05301000
*                                                                       05302000
MSGYYY   WTOR  'IEA886A TOD CLOCK(S) MUST BE SET',,40,                **05303000
               ROUTCDE=(1),DESC=(2),MCSFLAG=(NOTIME),MF=L               05304000
*                                                                       05305000
* c118500                                                    @YM04380   05306000
MSGZZZ1  WTO   '   IEA887A CPU XX LOCAL DATE=YY.DDD,CLOCK=HH.MM.SS',  **05307000
               ROUTCDE=(1),DESC=(3),MCSFLAG=(NOTIME),MF=L               05308000
*                                                                       05309000
MSGZZZ2  WTOR  'IEA887A TOD CLOCKS MUST BE SET, OR SELECT ADDRESS',,  **05310000
               40,ROUTCDE=(1),DESC=(2),MCSFLAG=(NOTIME),MF=L            05311000
*                                                                       05312000
MSGDEPSS WTOR  'IEA889A DEPRESS TOD CLOCK SECURITY SWITCH',,40,       **05313000
               ROUTCDE=(1),DESC=(2),MCSFLAG=(NOTIME),MF=L               05314000
*                                                                       05315000
EMSGTOD  WTO   'IEA898I CPU XX HAS PERMANENTLY DAMAGED TOD CLOCK',    **05316000
               ROUTCDE=(2,10),DESC=(4),MCSFLAG=(NOTIME),MF=L            05317000
*                                                                       05318000
EMSGCC   WTO   'IEA898I CPU XX HAS PERMANENTLY DAMAGED CLOCK COMPARATORR05319000
               ',ROUTCDE=(2,10),DESC=(4),MCSFLAG=(NOTIME),MF=L          05320000
*                                                                       05321000
EMSGCPUT WTO   'IEA898I CPU XX HAS PERMANENTLY DAMAGED CPU TIMER',    XX05322000
               ROUTCDE=(2,10),DESC=(4),MCSFLAG=(NOTIME),MF=L            05323000
*                                                                       05324000
ENDTOD   EQU   *                      END OF IEAVRTOD                   05325000
*                                                                  */   05326000
@DATD    DSECT                                                          05327000
         ORG   *+1-(*-@DATD)/(*-@DATD) INSURE DSECT DATA                05328000
@ENDDATD EQU   *                                                        05329000
IEAVRTOD CSECT                                                          05330000
@00      EQU   00                      EQUATES FOR REGISTERS 0-15       05331000
@01      EQU   01                                                       05332000
@02      EQU   02                                                       05333000
@03      EQU   03                                                       05334000
@04      EQU   04                                                       05335000
@05      EQU   05                                                       05336000
@06      EQU   06                                                       05337000
@07      EQU   07                                                       05338000
@08      EQU   08                                                       05339000
@09      EQU   09                                                       05340000
@10      EQU   10                                                       05341000
@11      EQU   11                                                       05342000
@12      EQU   12                                                       05343000
@13      EQU   13                                                       05344000
@14      EQU   14                                                       05345000
@15      EQU   15                                                       05346000
REG0     EQU   @00                                                      05347000
TMICSECL EQU   @00                                                      05348000
CURRENT  EQU   @00                                                      05349000
MASKHLDR EQU   @00                                                      05350000
REG1     EQU   @01                                                      05351000
TMICSECR EQU   @01                                                      05352000
NEW      EQU   @01                                                      05353000
SDWAPTR  EQU   @01                                                      05354000
TQEPTR   EQU   @01                                                      05355000
WPLPTR   EQU   @01                                                      05356000
SRBPTR   EQU   @01                                                      05357000
REG2     EQU   @02                                                      05358000
LCVTPTR  EQU   @02                                                      05359000
TCWAPTR  EQU   @03                                                      05360000
REG3     EQU   @03                                                      05361000
REG8     EQU   @08                                                      05362000
SLOTCNT  EQU   @08                                                      05363000
REG9     EQU   @09                                                      05364000
REG10    EQU   @10                                                      05365000
PCCAPTR  EQU   @10                                                      05366000
REG11    EQU   @11                                                      05367000
REG12    EQU   @12                                                      05368000
REG13    EQU   @13                                                      05369000
REG14    EQU   @14                                                      05370000
LCCAPTR  EQU   @14                                                      05371000
REG15    EQU   @15                                                      05372000
RETCODE  EQU   @15                                                      05373000
CLACVTP  EQU   @15                                                      05374000
GPR00P   EQU   @00                                                      05375000
GPR01P   EQU   @01                                                      05376000
GPR14P   EQU   @14                                                      05377000
GPR15P   EQU   @15                                                      05378000
CVTPTR   EQU   16                                                       05379000
RETRYCLA EQU   0                                                        05380000
RETRYSSC EQU   0                                                        05381000
ENQTQE   EQU   0                                                        05382000
DEQTQE   EQU   0                                                        05383000
PTRPCCA  EQU   0                                                        05384000
PTRLCCA  EQU   0                                                        05385000
TPC      EQU   0                                                        05386000
IEATPC   EQU   TPC                                                      05387000
TPCFLGS1 EQU   IEATPC+4                                                 05388000
TPCABND  EQU   TPCFLGS1                                                 05389000
TPCSYNC  EQU   TPCFLGS1                                                 05390000
TPCTZORG EQU   IEATPC+8                                                 05391000
TPCHDCCQ EQU   IEATPC+12                                                05392000
TPCDMTQE EQU   IEATPC+16                                                05393000
DFD      EQU   TPCDMTQE+4                                               05394000
TPCMNTQE EQU   IEATPC+40                                                05395000
MNIGHT   EQU   TPCMNTQE+16                                              05396000
MNIGHTLH EQU   MNIGHT                                                   05397000
TPCMFTQE EQU   IEATPC+64                                                05398000
IEATSELM EQU   IEATPC+88                                                05399000
TPCLMTQE EQU   IEATPC+112                                               05400000
TPCWORK  EQU   IEATPC+264                                               05401000
TPCTCWA  EQU   IEATPC+356                                               05402000
TPCRSRB  EQU   IEATPC+360                                               05403000
TPCCKQ   EQU   IEATPC+404                                               05404000
TPCCLA   EQU   IEATPC+408                                               05405000
WPLRF    EQU   0                                                        05406000
WPLRPTR  EQU   WPLRF                                                    05407000
WPLRPTRA EQU   WPLRPTR+1                                                05408000
WPLRECB  EQU   WPLRF+4                                                  05409000
WPL      EQU   0                                                        05410000
WPLMCSF  EQU   WPL+2                                                    05411000
WPLMCSF1 EQU   WPLMCSF                                                  05412000
WPLMCSF2 EQU   WPLMCSF+1                                                05413000
WPLTXT   EQU   WPL+4                                                    05414000
WPLFLGS  EQU   0                                                        05415000
WPLDESC  EQU   WPLFLGS                                                  05416000
WPLDESC1 EQU   WPLDESC                                                  05417000
WPLDESC2 EQU   WPLDESC+1                                                05418000
WPLROUT  EQU   WPLFLGS+2                                                05419000
WPLROUT1 EQU   WPLROUT                                                  05420000
WPLROUT2 EQU   WPLROUT+1                                                05421000
WPLMSGTY EQU   WPLFLGS+4                                                05422000
WPLMSGT1 EQU   WPLMSGTY                                                 05423000
WPLMSGT2 EQU   WPLMSGTY+1                                               05424000
WPLLS01  EQU   0                                                        05425000
WPLLTF   EQU   WPLLS01                                                  05426000
WPLLTF1  EQU   WPLLTF                                                   05427000
WPLML    EQU   0                                                        05428000
WPLMLLTF EQU   WPLML+2                                                  05429000
WPLMLLT1 EQU   WPLMLLTF                                                 05430000
BASE     EQU   0                                                        05431000
@NM00039 EQU   BASE+13                                                  05432000
BAIPLCC  EQU   @NM00039+2                                               05433000
BALGSTAT EQU   BASE+24                                                  05434000
BALOG    EQU   BALGSTAT+4                                               05435000
BASFL    EQU   BASE+36                                                  05436000
BARSW    EQU   BASFL                                                    05437000
BAIN     EQU   BARSW                                                    05438000
MSTODWTO EQU   BARSW                                                    05439000
BAINTSET EQU   BARSW                                                    05440000
MSLOGST  EQU   BASE+46                                                  05441000
BASPBYTE EQU   BASE+47                                                  05442000
BAMONITR EQU   BASE+56                                                  05443000
@NM00061 EQU   BASE+104                                                 05444000
MSLGCLOZ EQU   BASE+108                                                 05445000
MSCLOSSW EQU   MSLGCLOZ                                                 05446000
MSLGWLOG EQU   BASE+112                                                 05447000
MSWLOGSW EQU   MSLGWLOG                                                 05448000
MSLGWTR  EQU   BASE+116                                                 05449000
MSWTRSW  EQU   MSLGWTR                                                  05450000
MSLGSTRT EQU   BASE+120                                                 05451000
MSSTRTSW EQU   MSLGSTRT                                                 05452000
MS1BASEX EQU   BASE+136                                                 05453000
BASES01  EQU   0                                                        05454000
MSNTAL   EQU   BASES01                                                  05455000
MSSSB    EQU   BASES01+1                                                05456000
MSBTN    EQU   MSSSB                                                    05457000
MSPFG    EQU   BASES01+2                                                05458000
MSECBFL  EQU   BASES01+3                                                05459000
MSTUS    EQU   BASES01+4                                                05460000
MSSSA    EQU   MSTUS                                                    05461000
MSINLSW  EQU   MSSSA                                                    05462000
MSREOF   EQU   MSSSA                                                    05463000
MSNWP    EQU   MSSSA                                                    05464000
MSFHF    EQU   BASES01+5                                                05465000
LCCAVT   EQU   0                                                        05466000
LCCAT00P EQU   LCCAVT                                                   05467000
LCCA     EQU   0                                                        05468000
LCCAIHRC EQU   LCCA+520                                                 05469000
LCCAIHR1 EQU   LCCAIHRC                                                 05470000
LCCAIHR2 EQU   LCCAIHRC+1                                               05471000
LCCAIHR3 EQU   LCCAIHRC+2                                               05472000
LCCAIHR4 EQU   LCCAIHRC+3                                               05473000
LCCASPIN EQU   LCCA+524                                                 05474000
LCCASPN1 EQU   LCCASPIN                                                 05475000
LCCASPN2 EQU   LCCASPIN+1                                               05476000
LCCASPN3 EQU   LCCASPIN+2                                               05477000
LCCASPN4 EQU   LCCASPIN+3                                               05478000
LCCADSF1 EQU   LCCA+540                                                 05479000
LCCATIMR EQU   LCCADSF1                                                 05480000
LCCADSF2 EQU   LCCA+541                                                 05481000
LCCASPSA EQU   LCCA+544                                                 05482000
LCCADTOD EQU   LCCA+600                                                 05483000
LCCAWTIM EQU   LCCA+616                                                 05484000
LCCACRFL EQU   LCCA+692                                                 05485000
LCCACREX EQU   LCCA+693                                                 05486000
LCCALKFG EQU   LCCA+694                                                 05487000
LCCASRBF EQU   LCCA+720                                                 05488000
ASVT     EQU   0                                                        05489000
ASVTMAXU EQU   ASVT+516                                                 05490000
ASVTFRST EQU   ASVT+524                                                 05491000
ASVTENTY EQU   ASVT+528                                                 05492000
ASVTAVAL EQU   ASVTENTY                                                 05493000
PSA      EQU   0                                                        05494000
FLCRNPSW EQU   PSA                                                      05495000
FLCROPSW EQU   PSA+8                                                    05496000
FLCICCW2 EQU   PSA+16                                                   05497000
PSAEEPSW EQU   PSA+132                                                  05498000
PSAESPSW EQU   PSA+136                                                  05499000
FLCSVILC EQU   PSAESPSW+1                                               05500000
PSAEPPSW EQU   PSA+140                                                  05501000
FLCPIILC EQU   PSAEPPSW+1                                               05502000
FLCPICOD EQU   PSAEPPSW+2                                               05503000
PSAPICOD EQU   FLCPICOD+1                                               05504000
FLCTEA   EQU   PSAEPPSW+4                                               05505000
FLCPER   EQU   PSA+152                                                  05506000
FLCMCLA  EQU   PSA+168                                                  05507000
FLCIOEL  EQU   FLCMCLA+4                                                05508000
FLCIOA   EQU   FLCMCLA+16                                               05509000
FLCFSA   EQU   FLCMCLA+80                                               05510000
PSALCCAV EQU   PSA+528                                                  05511000
PSASUPER EQU   PSA+552                                                  05512000
PSASUP1  EQU   PSASUPER                                                 05513000
PSASUP2  EQU   PSASUPER+1                                               05514000
PSASUP3  EQU   PSASUPER+2                                               05515000
PSASUP4  EQU   PSASUPER+3                                               05516000
PSACLHT  EQU   PSA+640                                                  05517000
PSALKSA  EQU   PSA+696                                                  05518000
PSAHLHI  EQU   PSA+760                                                  05519000
PSALITA  EQU   PSA+764                                                  05520000
PSADSSFL EQU   PSA+836                                                  05521000
PSADSSF1 EQU   PSADSSFL                                                 05522000
PSADSSF3 EQU   PSADSSFL+2                                               05523000
PSADSSF4 EQU   PSADSSFL+3                                               05524000
PSARSVT  EQU   PSA+896                                                  05525000
SRBSECT  EQU   0                                                        05526000
SRB      EQU   SRBSECT                                                  05527000
SRBFLC   EQU   SRB+12                                                   05528000
SRBPARM  EQU   SRB+28                                                   05529000
ASCB     EQU   0                                                        05530000
ASCBEJST EQU   ASCB+64                                                  05531000
ASCBFW1  EQU   ASCB+100                                                 05532000
ASCBRCTF EQU   ASCBFW1+2                                                05533000
ASCBFLG1 EQU   ASCBFW1+3                                                05534000
ASCBDSP1 EQU   ASCB+114                                                 05535000
ASCBFLG2 EQU   ASCB+115                                                 05536000
CSD      EQU   0                                                        05537000
CSDCPUAL EQU   CSD+8                                                    05538000
CSDCPUOL EQU   CSD+10                                                   05539000
CSDSCWRD EQU   CSD+12                                                   05540000
CSDSCFL1 EQU   CSDSCWRD                                                 05541000
CSDSCFL2 EQU   CSDSCWRD+1                                               05542000
CSDSCFL3 EQU   CSDSCWRD+2                                               05543000
CSDSCFL4 EQU   CSDSCWRD+3                                               05544000
CSDFLAGS EQU   CSD+23                                                   05545000
CSDMP    EQU   CSDFLAGS                                                 05546000
CSDGDCC  EQU   CSD+108                                                  05547000
CSDGDINT EQU   CSD+112                                                  05548000
CSDGDTOD EQU   CSD+116                                                  05549000
PCCA     EQU   0                                                        05550000
PCCACPUA EQU   PCCA+16                                                  05551000
PCCATQEP EQU   PCCA+20                                                  05552000
PCCAPSAV EQU   PCCA+24                                                  05553000
PCCATMST EQU   PCCA+128                                                 05554000
PCCATMFL EQU   PCCATMST                                                 05555000
PCCASYNC EQU   PCCATMFL                                                 05556000
PCCAVKIL EQU   PCCATMFL                                                 05557000
PCCAMCC  EQU   PCCATMFL                                                 05558000
PCCAMINT EQU   PCCATMFL                                                 05559000
PCCATODE EQU   PCCATMST+1                                               05560000
PCCANUTD EQU   PCCATODE                                                 05561000
PCCANFTD EQU   PCCATODE                                                 05562000
PCCACCE  EQU   PCCATMST+2                                               05563000
PCCANUCC EQU   PCCACCE                                                  05564000
PCCANFCC EQU   PCCACCE                                                  05565000
PCCAINTE EQU   PCCATMST+3                                               05566000
PCCANUIN EQU   PCCAINTE                                                 05567000
PCCANFIN EQU   PCCAINTE                                                 05568000
PCCAEMSB EQU   PCCA+136                                                 05569000
PCCAEMSI EQU   PCCAEMSB                                                 05570000
PCCARISP EQU   PCCAEMSI                                                 05571000
PCCAEMS2 EQU   PCCAEMSI+1                                               05572000
PCCAEMS3 EQU   PCCAEMSI+2                                               05573000
PCCARMSB EQU   PCCAEMSI+3                                               05574000
PCCAWERP EQU   PCCA+280                                                 05575000
PCCACHPF EQU   PCCAWERP+4                                               05576000
PCCACHBL EQU   PCCAWERP+5                                               05577000
PCCACHVA EQU   PCCAWERP+6                                               05578000
PCCACHTS EQU   PCCAWERP+7                                               05579000
PCCACHS1 EQU   PCCA+288                                                 05580000
PCCACHS2 EQU   PCCA+289                                                 05581000
PCCACHRB EQU   PCCA+290                                                 05582000
PCCACHF1 EQU   PCCA+308                                                 05583000
PCCACHF2 EQU   PCCA+309                                                 05584000
PCCACHF3 EQU   PCCA+310                                                 05585000
PCCACHF4 EQU   PCCA+311                                                 05586000
PCCAVT   EQU   0                                                        05587000
PCCAT00P EQU   PCCAVT                                                   05588000
TQE      EQU   0                                                        05589000
TQEFLGS  EQU   TQE+14                                                   05590000
TQEFLGS2 EQU   TQE+15                                                   05591000
TQECOMP  EQU   TQEFLGS2                                                 05592000
TQEVAL   EQU   TQE+16                                                   05593000
TQEVALLH EQU   TQEVAL                                                   05594000
TQEVALRH EQU   TQEVAL+4                                                 05595000
TQEEXIT  EQU   TQE+28                                                   05596000
CVTMAP   EQU   0                                                        05597000
CVT      EQU   CVTMAP                                                   05598000
CVTDATE  EQU   CVTMAP+56                                                05599000
CVTDAR   EQU   CVTMAP+72                                                05600000
CVTFLGS1 EQU   CVTDAR                                                   05601000
CVTEXIT  EQU   CVTMAP+80                                                05602000
CVTTPC   EQU   CVTMAP+88                                                05603000
CVTQTE00 EQU   CVTMAP+104                                               05604000
CVTQTD00 EQU   CVTMAP+108                                               05605000
CVTDCB   EQU   CVTMAP+116                                               05606000
CVTIOQET EQU   CVTMAP+120                                               05607000
CVTIERLC EQU   CVTMAP+144                                               05608000
CVTMSER  EQU   CVTMAP+148                                               05609000
CVTHEAD  EQU   CVTMAP+160                                               05610000
CVTSV76C EQU   CVTHEAD                                                  05611000
CVTOPTA  EQU   CVTMAP+182                                               05612000
CVTOPTB  EQU   CVTMAP+183                                               05613000
CVTGTF   EQU   CVTMAP+236                                               05614000
CVTGTFST EQU   CVTGTF                                                   05615000
CVTGTFS  EQU   CVTGTFST                                                 05616000
CVTSTATE EQU   CVTGTFST                                                 05617000
CVTTMODE EQU   CVTGTFST                                                 05618000
CVTFORM  EQU   CVTGTFST                                                 05619000
CVTAQAVT EQU   CVTMAP+240                                               05620000
CVTTCMFG EQU   CVTAQAVT                                                 05621000
CVTVOLM2 EQU   CVTMAP+244                                               05622000
CVTTATA  EQU   CVTVOLM2                                                 05623000
CVTTSKS  EQU   CVTTATA                                                  05624000
CVTVOLF2 EQU   CVTTSKS                                                  05625000
CVTTAT   EQU   CVTTATA+1                                                05626000
CVTATER  EQU   CVTMAP+248                                               05627000
CVTEXT1  EQU   CVTMAP+252                                               05628000
CVTPURG  EQU   CVTMAP+260                                               05629000
CVTQMSG  EQU   CVTMAP+268                                               05630000
CVTDMSR  EQU   CVTMAP+272                                               05631000
CVTRSV37 EQU   CVTDMSR                                                  05632000
CVTDMSRF EQU   CVTRSV37                                                 05633000
CVTTZ    EQU   CVTMAP+304                                               05634000
CVTERPV  EQU   CVTMAP+316                                               05635000
CVTINTLA EQU   CVTMAP+320                                               05636000
CVTAPF   EQU   CVTMAP+324                                               05637000
CVTEXT2  EQU   CVTMAP+328                                               05638000
CVTHJES  EQU   CVTMAP+332                                               05639000
CVTPGSIA EQU   CVTMAP+348                                               05640000
CVTA1F1  EQU   CVTMAP+356                                               05641000
CVTSYSK  EQU   CVTMAP+357                                               05642000
CVTVOLM1 EQU   CVTMAP+380                                               05643000
CVTVOLF1 EQU   CVTVOLM1                                                 05644000
CVTATMCT EQU   CVTMAP+388                                               05645000
CVTXTNT1 EQU   0                                                        05646000
CVTXTNT2 EQU   0                                                        05647000
CVTDSSV  EQU   CVTXTNT2                                                 05648000
CVTFLGBT EQU   CVTXTNT2+5                                               05649000
CVTQID   EQU   CVTXTNT2+24                                              05650000
CVTRV400 EQU   CVTXTNT2+52                                              05651000
CVTRV409 EQU   CVTXTNT2+53                                              05652000
CVTATCVT EQU   CVTXTNT2+64                                              05653000
CVTRV429 EQU   CVTXTNT2+84                                              05654000
CVTRV438 EQU   CVTXTNT2+85                                              05655000
CVTRV457 EQU   CVTXTNT2+112                                             05656000
CVTRV466 EQU   CVTXTNT2+113                                             05657000
CVTFIX   EQU   0                                                        05658000
CVTRELNO EQU   CVTFIX+252                                               05659000
SDWA     EQU   0                                                        05660000
SDWAPARM EQU   SDWA                                                     05661000
SDWAFIOB EQU   SDWA+4                                                   05662000
SDWAABCC EQU   SDWAFIOB                                                 05663000
SDWACMPF EQU   SDWAABCC                                                 05664000
SDWAREQ  EQU   SDWACMPF                                                 05665000
SDWACTL1 EQU   SDWA+8                                                   05666000
SDWACMKA EQU   SDWACTL1                                                 05667000
SDWAMWPA EQU   SDWACTL1+1                                               05668000
SDWAPMKA EQU   SDWACTL1+4                                               05669000
SDWACTL2 EQU   SDWA+16                                                  05670000
SDWACMKP EQU   SDWACTL2                                                 05671000
SDWAMWPP EQU   SDWACTL2+1                                               05672000
SDWAPMKP EQU   SDWACTL2+4                                               05673000
SDWAGRSV EQU   SDWA+24                                                  05674000
SDWANAME EQU   SDWA+88                                                  05675000
SDWAEC1  EQU   SDWA+104                                                 05676000
SDWAEMK1 EQU   SDWAEC1                                                  05677000
SDWAMWP1 EQU   SDWAEC1+1                                                05678000
SDWAINT1 EQU   SDWAEC1+2                                                05679000
SDWANXT1 EQU   SDWAEC1+4                                                05680000
SDWAAEC1 EQU   SDWA+112                                                 05681000
SDWAILC1 EQU   SDWAAEC1+1                                               05682000
SDWAINC1 EQU   SDWAAEC1+2                                               05683000
SDWAICD1 EQU   SDWAINC1+1                                               05684000
SDWAEC2  EQU   SDWA+120                                                 05685000
SDWAEMK2 EQU   SDWAEC2                                                  05686000
SDWAMWP2 EQU   SDWAEC2+1                                                05687000
SDWAINT2 EQU   SDWAEC2+2                                                05688000
SDWANXT2 EQU   SDWAEC2+4                                                05689000
SDWAAEC2 EQU   SDWA+128                                                 05690000
SDWAILC2 EQU   SDWAAEC2+1                                               05691000
SDWAINC2 EQU   SDWAAEC2+2                                               05692000
SDWAICD2 EQU   SDWAINC2+1                                               05693000
SDWASRSV EQU   SDWA+136                                                 05694000
SDWAIDNT EQU   SDWA+200                                                 05695000
SDWAMCH  EQU   SDWA+204                                                 05696000
SDWASTCK EQU   SDWAMCH                                                  05697000
SDWAMCHI EQU   SDWAMCH+8                                                05698000
SDWAMCHS EQU   SDWAMCHI                                                 05699000
SDWAMCHD EQU   SDWAMCHI+1                                               05700000
SDWARSR1 EQU   SDWAMCH+12                                               05701000
SDWARSR2 EQU   SDWAMCH+13                                               05702000
SDWAFLGS EQU   SDWA+232                                                 05703000
SDWAERRA EQU   SDWAFLGS                                                 05704000
SDWAERRB EQU   SDWAFLGS+1                                               05705000
SDWAERRC EQU   SDWAFLGS+2                                               05706000
SDWAERRD EQU   SDWAFLGS+3                                               05707000
SDWAIOFS EQU   SDWA+238                                                 05708000
SDWARTYA EQU   SDWA+240                                                 05709000
SDWACPUA EQU   SDWA+248                                                 05710000
SDWAPARQ EQU   SDWA+252                                                 05711000
SDWARCDE EQU   SDWAPARQ                                                 05712000
SDWAACF2 EQU   SDWAPARQ+1                                               05713000
SDWAFREE EQU   SDWAACF2                                                 05714000
SDWAACF3 EQU   SDWAPARQ+2                                               05715000
SDWAACF4 EQU   SDWAPARQ+3                                               05716000
SDWALKWA EQU   SDWA+256                                                 05717000
SDWALKWS EQU   SDWALKWA                                                 05718000
SDWARECP EQU   SDWA+292                                                 05719000
SDWASNPA EQU   SDWA+320                                                 05720000
SDWADUMP EQU   SDWASNPA                                                 05721000
SDWADPFS EQU   SDWADUMP+1                                               05722000
SDWADDAT EQU   SDWASNPA+4                                               05723000
SDWASDAT EQU   SDWADDAT                                                 05724000
SDWAPDAT EQU   SDWADDAT+2                                               05725000
SDWADPSA EQU   SDWA+328                                                 05726000
SDWADPSL EQU   SDWADPSA                                                 05727000
SDWARA   EQU   SDWA+400                                                 05728000
SDWADPVA EQU   SDWARA+2                                                 05729000
TCWA     EQU   0                                                        05730000
TCWACVAL EQU   TCWA                                                     05731000
TCWACVL  EQU   TCWACVAL                                                 05732000
TCWACVR  EQU   TCWACVAL+4                                               05733000
TCWAWRK  EQU   TCWA+8                                                   05734000
TCWAWRK1 EQU   TCWAWRK                                                  05735000
TCWAA1   EQU   TCWAWRK1                                                 05736000
TCWAA1L  EQU   TCWAA1                                                   05737000
TCWAA1R  EQU   TCWAA1+4                                                 05738000
TCWAWRK2 EQU   TCWAWRK+8                                                05739000
TCWAA2   EQU   TCWAWRK2                                                 05740000
TCWAA2L  EQU   TCWAA2                                                   05741000
TCWAA2R  EQU   TCWAA2+4                                                 05742000
TCWAPGT  EQU   TCWA+24                                                  05743000
TCWAPGD  EQU   TCWA+28                                                  05744000
TCWAPLT  EQU   TCWA+32                                                  05745000
TCWAPLD  EQU   TCWA+36                                                  05746000
TCWAPTP  EQU   TCWA+40                                                  05747000
TCWAPDP  EQU   TCWA+44                                                  05748000
TCWACVP  EQU   TCWA+48                                                  05749000
TCWAGFLG EQU   TCWA+52                                                  05750000
TCGXXX   EQU   TCWAGFLG                                                 05751000
TCGYYY   EQU   TCWAGFLG                                                 05752000
TCGZZZ   EQU   TCWAGFLG                                                 05753000
TCGNSET  EQU   TCWAGFLG                                                 05754000
TCGLELD  EQU   TCWAGFLG                                                 05755000
TCGCVTD  EQU   TCWAGFLG                                                 05756000
TCGTQE   EQU   TCWAGFLG                                                 05757000
TCCPUCNT EQU   TCWA+54                                                  05758000
TCWARPLY EQU   TCWA+56                                                  05759000
TCWARLEN EQU   TCWARPLY                                                 05760000
TCWASET  EQU   TCWARPLY+4                                               05761000
TCWATXT  EQU   TCWARPLY+8                                               05762000
TCWACTL  EQU   TCWA+104                                                 05763000
TCSTOP   EQU   TCWACTL                                                  05764000
TCSYNCK  EQU   TCWACTL+2                                                05765000
TCELDAYS EQU   TCWA+108                                                 05766000
TCENTRY  EQU   0                                                        05767000
TCWACLKE EQU   TCENTRY                                                  05768000
TCWACLKL EQU   TCWACLKE                                                 05769000
TCWACLKR EQU   TCWACLKE+4                                               05770000
TCWAPCCA EQU   TCENTRY+8                                                05771000
TCWAIADD EQU   TCENTRY+12                                               05772000
TCWALFLG EQU   TCENTRY+15                                               05773000
TCLCC    EQU   TCWALFLG                                                 05774000
I256C    EQU   0                                                        05775000
I001C    EQU   0                                                        05776000
I008P    EQU   0                                                        05777000
I015F    EQU   0                                                        05778000
I015P    EQU   0                                                        05779000
I031F    EQU   0                                                        05780000
I031P    EQU   0                                                        05781000
NEWPCCA  EQU   0                                                        05782000
PARMTIME EQU   0                                                        05783000
PARMDATE EQU   0                                                        05784000
CONVALUE EQU   0                                                        05785000
LO32BITS EQU   CONVALUE+4                                               05786000
OLDPCCA  EQU   0                                                        05787000
SECSMIN  EQU   MINSHOUR                                                 05788000
ASCBPTR  EQU   ASVTENTY                                                 05789000
TPCPTR   EQU   CVTTPC                                                   05790000
CVTS01   EQU   CVTPGSIA                                                 05791000
CVTLPDIA EQU   CVTS01+12                                                05792000
CVTDIRST EQU   CVTLPDIA                                                 05793000
CVTSLIDA EQU   CVTS01+24                                                05794000
CVTCTLFG EQU   CVTS01+50                                                05795000
CVTASVT  EQU   CVTS01+208                                               05796000
CVTCSD   EQU   CVTS01+312                                               05797000
CVTIPCRI EQU   CVTS01+408                                               05798000
CVTPCCAT EQU   CVTS01+416                                               05799000
CVTLCCAT EQU   CVTS01+420                                               05800000
CVTRV210 EQU   CVTS01+424                                               05801000
CVTRV219 EQU   CVTS01+425                                               05802000
CVTRV228 EQU   CVTS01+426                                               05803000
CVTRV237 EQU   CVTS01+427                                               05804000
CVTMFRTR EQU   CVTS01+452                                               05805000
CVTRV262 EQU   CVTS01+468                                               05806000
CVTRV271 EQU   CVTS01+469                                               05807000
CVTRV280 EQU   CVTS01+470                                               05808000
CVTRV289 EQU   CVTS01+471                                               05809000
CVTGSDA  EQU   CVTS01+600                                               05810000
ASVTPTR  EQU   CVTASVT                                                  05811000
CLASIUTC EQU   SRBPARM                                                  05812000
CLATC    EQU   CLASIUTC+3                                               05813000
PSARSVTE EQU   PSARSVT                                                  05814000
TEXTZZZ  EQU   WPLTXT                                                   05815000
CPUADDRZ EQU   TEXTZZZ+15                                               05816000
DATEZ    EQU   TEXTZZZ+28                                               05817000
CLOCKZ   EQU   TEXTZZZ+41                                               05818000
TEXTXXX1 EQU   WPLTXT                                                   05819000
DATEX1   EQU   TEXTXXX1+21                                              05820000
CLOCKX1  EQU   TEXTXXX1+34                                              05821000
TEXTXXX2 EQU   WPLTXT                                                   05822000
DATEX2   EQU   TEXTXXX2+18                                              05823000
CLOCKX2  EQU   TEXTXXX2+31                                              05824000
TEXTERR  EQU   WPLTXT                                                   05825000
CPUADDRE EQU   TEXTERR+12                                               05826000
FLC      EQU   PSA                                                      05827000
TQEECB   EQU   TQEEXIT                                                  05828000
         AGO   .@UNREFD                START UNREFERENCED COMPONENTS    05829000
@NM00175 EQU   TEXTERR                                                  05830000
@NM00174 EQU   TEXTXXX2+25                                              05831000
@NM00173 EQU   TEXTXXX2                                                 05832000
@NM00172 EQU   TEXTXXX1+28                                              05833000
@NM00171 EQU   TEXTXXX1                                                 05834000
@NM00170 EQU   TEXTZZZ+35                                               05835000
@NM00169 EQU   TEXTZZZ+17                                               05836000
@NM00168 EQU   TEXTZZZ                                                  05837000
PSARSAV  EQU   PSARSVTE+60                                              05838000
PSARSTK  EQU   PSARSVTE+56                                              05839000
PSAESAV3 EQU   PSARSVTE+52                                              05840000
PSAESTK3 EQU   PSARSVTE+48                                              05841000
PSAESAV2 EQU   PSARSVTE+44                                              05842000
PSAESTK2 EQU   PSARSVTE+40                                              05843000
PSAESAV1 EQU   PSARSVTE+36                                              05844000
PSAESTK1 EQU   PSARSVTE+32                                              05845000
PSAPSAV  EQU   PSARSVTE+28                                              05846000
PSAPSTK  EQU   PSARSVTE+24                                              05847000
PSAMSAV  EQU   PSARSVTE+20                                              05848000
PSAMSTK  EQU   PSARSVTE+16                                              05849000
PSASSAV  EQU   PSARSVTE+12                                              05850000
PSASSTK  EQU   PSARSVTE+8                                               05851000
PSANSTK  EQU   PSARSVTE+4                                               05852000
PSACSTK  EQU   PSARSVTE                                                 05853000
CLASIU   EQU   CLASIUTC+3                                               05854000
@NM00002 EQU   CLASIUTC                                                 05855000
CVTRV628 EQU   CVTS01+728                                               05856000
CVTRV627 EQU   CVTS01+724                                               05857000
CVTRV626 EQU   CVTS01+720                                               05858000
CVTRV625 EQU   CVTS01+716                                               05859000
CVTRV624 EQU   CVTS01+712                                               05860000
CVTRV623 EQU   CVTS01+708                                               05861000
CVTRV622 EQU   CVTS01+704                                               05862000
CVTRV621 EQU   CVTS01+700                                               05863000
CVTIHASU EQU   CVTS01+696                                               05864000
CVTRV619 EQU   CVTS01+692                                               05865000
CVTRV618 EQU   CVTS01+688                                               05866000
CVTRV617 EQU   CVTS01+684                                               05867000
CVTRV616 EQU   CVTS01+680                                               05868000
CVTRV615 EQU   CVTS01+676                                               05869000
CVTRV614 EQU   CVTS01+672                                               05870000
CVTRV613 EQU   CVTS01+668                                               05871000
CVTTCASP EQU   CVTS01+664                                               05872000
CVT0PT03 EQU   CVTS01+660                                               05873000
CVT0PT0E EQU   CVTS01+656                                               05874000
CVTRV609 EQU   CVTS01+652                                               05875000
CVTCGK   EQU   CVTS01+648                                               05876000
CVTRAC   EQU   CVTS01+644                                               05877000
CVTHSM   EQU   CVTS01+640                                               05878000
CVTRV605 EQU   CVTS01+636                                               05879000
CVTRV604 EQU   CVTS01+632                                               05880000
CVTEFF02 EQU   CVTS01+628                                               05881000
CVTCBBR  EQU   CVTS01+624                                               05882000
CVTSSCR  EQU   CVTS01+620                                               05883000
CVTEVENT EQU   CVTS01+616                                               05884000
CVTCRCA  EQU   CVTS01+612                                               05885000
CVTTPIO  EQU   CVTS01+608                                               05886000
CVTADV   EQU   CVTS01+604                                               05887000
CVTGSDAB EQU   CVTGSDA                                                  05888000
CVTQV3   EQU   CVTS01+596                                               05889000
CVTQV2   EQU   CVTS01+592                                               05890000
CVTQV1   EQU   CVTS01+588                                               05891000
CVTRPT   EQU   CVTS01+584                                               05892000
CVTSSRB  EQU   CVTS01+580                                               05893000
CVTCSDRL EQU   CVTS01+576                                               05894000
CVTEXP1  EQU   CVTS01+572                                               05895000
CVTRMPMT EQU   CVTS01+568                                               05896000
CVTRMPTT EQU   CVTS01+564                                               05897000
CVTVPSA  EQU   CVTS01+560                                               05898000
CVTVSTOP EQU   CVTS01+556                                               05899000
CVTGTFR8 EQU   CVTS01+552                                               05900000
CVTQUIT  EQU   CVTS01+548                                               05901000
CVTVACR  EQU   CVTS01+544                                               05902000
CVTWTCB  EQU   CVTS01+540                                               05903000
CVTSTPRS EQU   CVTS01+536                                               05904000
CVT0PT02 EQU   CVTS01+532                                               05905000
CVTDARCM EQU   CVTS01+528                                               05906000
CVTIRECM EQU   CVTS01+524                                               05907000
CVTJRECM EQU   CVTS01+520                                               05908000
CVTVEMS0 EQU   CVTS01+516                                               05909000
CVTSPFRR EQU   CVTS01+512                                               05910000
CVTRLSTG EQU   CVTS01+508                                               05911000
CVT0TC0A EQU   CVTS01+504                                               05912000
CVTGMBR  EQU   CVTS01+500                                               05913000
CVTLFRM  EQU   CVTS01+496                                               05914000
CVTRMBR  EQU   CVTS01+492                                               05915000
CVTVIOP  EQU   CVTS01+488                                               05916000
CVTRV307 EQU   CVTS01+486                                               05917000
CVTRV306 EQU   CVTS01+484                                               05918000
CVTRV305 EQU   CVTS01+482                                               05919000
CVTRV304 EQU   CVTS01+480                                               05920000
CVTRV303 EQU   CVTS01+478                                               05921000
CVTRV302 EQU   CVTS01+476                                               05922000
CVTTRCA  EQU   CVTS01+472                                               05923000
CVTRV297 EQU   CVTRV289                                                 05924000
CVTRV296 EQU   CVTRV289                                                 05925000
CVTRV295 EQU   CVTRV289                                                 05926000
CVTRV294 EQU   CVTRV289                                                 05927000
CVTRV293 EQU   CVTRV289                                                 05928000
CVTRV292 EQU   CVTRV289                                                 05929000
CVTRV291 EQU   CVTRV289                                                 05930000
CVTRV290 EQU   CVTRV289                                                 05931000
CVTRV288 EQU   CVTRV280                                                 05932000
CVTRV287 EQU   CVTRV280                                                 05933000
CVTRV286 EQU   CVTRV280                                                 05934000
CVTRV285 EQU   CVTRV280                                                 05935000
CVTRV284 EQU   CVTRV280                                                 05936000
CVTRV283 EQU   CVTRV280                                                 05937000
CVTRV282 EQU   CVTRV280                                                 05938000
CVTRV281 EQU   CVTRV280                                                 05939000
CVTRV279 EQU   CVTRV271                                                 05940000
CVTRV278 EQU   CVTRV271                                                 05941000
CVTRV277 EQU   CVTRV271                                                 05942000
CVTRV276 EQU   CVTRV271                                                 05943000
CVTRV275 EQU   CVTRV271                                                 05944000
CVTRV274 EQU   CVTRV271                                                 05945000
CVTRV273 EQU   CVTRV271                                                 05946000
CVTRV272 EQU   CVTRV271                                                 05947000
CVTRV270 EQU   CVTRV262                                                 05948000
CVTRV269 EQU   CVTRV262                                                 05949000
CVTRV268 EQU   CVTRV262                                                 05950000
CVTRV267 EQU   CVTRV262                                                 05951000
CVTRV266 EQU   CVTRV262                                                 05952000
CVTRV265 EQU   CVTRV262                                                 05953000
CVTRV264 EQU   CVTRV262                                                 05954000
CVTRV263 EQU   CVTRV262                                                 05955000
CVTVFP   EQU   CVTS01+464                                               05956000
CVTVSI   EQU   CVTS01+460                                               05957000
CVTVPSIB EQU   CVTS01+456                                               05958000
CVTMFACT EQU   CVTMFRTR                                                 05959000
CVTMFCTL EQU   CVTS01+448                                               05960000
CVTPVBP  EQU   CVTS01+444                                               05961000
CVTPWI   EQU   CVTS01+440                                               05962000
CVTRV254 EQU   CVTS01+438                                               05963000
CVTRV253 EQU   CVTS01+436                                               05964000
CVTRV252 EQU   CVTS01+434                                               05965000
CVTRV251 EQU   CVTS01+433                                               05966000
CVTRV250 EQU   CVTS01+432                                               05967000
CVTRV249 EQU   CVTS01+431                                               05968000
CVTRV248 EQU   CVTS01+430                                               05969000
CVTRV247 EQU   CVTS01+429                                               05970000
CVTRV246 EQU   CVTS01+428                                               05971000
CVTRV245 EQU   CVTRV237                                                 05972000
CVTRV244 EQU   CVTRV237                                                 05973000
CVTRV243 EQU   CVTRV237                                                 05974000
CVTRV242 EQU   CVTRV237                                                 05975000
CVTRV241 EQU   CVTRV237                                                 05976000
CVTRV240 EQU   CVTRV237                                                 05977000
CVTRV239 EQU   CVTRV237                                                 05978000
CVTRV238 EQU   CVTRV237                                                 05979000
CVTRV236 EQU   CVTRV228                                                 05980000
CVTRV235 EQU   CVTRV228                                                 05981000
CVTRV234 EQU   CVTRV228                                                 05982000
CVTRV233 EQU   CVTRV228                                                 05983000
CVTRV232 EQU   CVTRV228                                                 05984000
CVTRV231 EQU   CVTRV228                                                 05985000
CVTRV230 EQU   CVTRV228                                                 05986000
CVTRV229 EQU   CVTRV228                                                 05987000
CVTRV227 EQU   CVTRV219                                                 05988000
CVTRV226 EQU   CVTRV219                                                 05989000
CVTRV225 EQU   CVTRV219                                                 05990000
CVTRV224 EQU   CVTRV219                                                 05991000
CVTRV223 EQU   CVTRV219                                                 05992000
CVTRV222 EQU   CVTRV219                                                 05993000
CVTRV221 EQU   CVTRV219                                                 05994000
CVTRV220 EQU   CVTRV219                                                 05995000
CVTRV218 EQU   CVTRV210                                                 05996000
CVTRV217 EQU   CVTRV210                                                 05997000
CVTRV216 EQU   CVTRV210                                                 05998000
CVTRV215 EQU   CVTRV210                                                 05999000
CVTRV214 EQU   CVTRV210                                                 06000000
CVTRV213 EQU   CVTRV210                                                 06001000
CVTRV212 EQU   CVTRV210                                                 06002000
CVTRV211 EQU   CVTRV210                                                 06003000
CVTIPCRP EQU   CVTS01+412                                               06004000
CVTIPCDS EQU   CVTS01+404                                               06005000
CVTAIDVT EQU   CVTS01+400                                               06006000
CVTSSAP  EQU   CVTS01+396                                               06007000
CVTEHCIR EQU   CVTS01+392                                               06008000
CVTEHDEF EQU   CVTS01+388                                               06009000
CVTDAIR  EQU   CVTS01+384                                               06010000
CVTPERFM EQU   CVTS01+380                                               06011000
CVT044R2 EQU   CVTS01+376                                               06012000
CVTFETCH EQU   CVTS01+372                                               06013000
CVTRSTWD EQU   CVTS01+368                                               06014000
CVTSPOST EQU   CVTS01+364                                               06015000
CVTIOBP  EQU   CVTS01+360                                               06016000
CVTASMVT EQU   CVTS01+356                                               06017000
CVTRECRQ EQU   CVTS01+352                                               06018000
CVTWSAC  EQU   CVTS01+348                                               06019000
CVTRV149 EQU   CVTS01+344                                               06020000
CVTWSAL  EQU   CVTS01+340                                               06021000
CVTSPSA  EQU   CVTS01+336                                               06022000
CVTGLMN  EQU   CVTS01+332                                               06023000
CVTVEAC0 EQU   CVTS01+328                                               06024000
CVT062R1 EQU   CVTS01+324                                               06025000
CVTRPOST EQU   CVTS01+320                                               06026000
CVTDQIQE EQU   CVTS01+316                                               06027000
CVTLKRMA EQU   CVTS01+308                                               06028000
CVTRSPIE EQU   CVTS01+304                                               06029000
CVTRENQ  EQU   CVTS01+300                                               06030000
CVTLQCB  EQU   CVTS01+296                                               06031000
CVTFQCB  EQU   CVTS01+292                                               06032000
CVTQCS01 EQU   CVTS01+288                                               06033000
CVTAPFT  EQU   CVTS01+284                                               06034000
CVTPARRL EQU   CVTS01+280                                               06035000
CVTVWAIT EQU   CVTS01+276                                               06036000
CVTGSPL  EQU   CVTS01+272                                               06037000
CVTLSMQ  EQU   CVTS01+268                                               06038000
CVTGSMQ  EQU   CVTS01+264                                               06039000
CVTEXPRO EQU   CVTS01+260                                               06040000
CVTOPCTP EQU   CVTS01+256                                               06041000
CVTSIC   EQU   CVTS01+252                                               06042000
CVTTPIOS EQU   CVTS01+248                                               06043000
CVTRTMS  EQU   CVTS01+244                                               06044000
CVTSDBF  EQU   CVTS01+240                                               06045000
CVTSCBP  EQU   CVTS01+236                                               06046000
CVTSDMP  EQU   CVTS01+232                                               06047000
CVTSV60  EQU   CVTS01+228                                               06048000
CVTRTMCT EQU   CVTS01+224                                               06049000
CVTASCBL EQU   CVTS01+220                                               06050000
CVTASCBH EQU   CVTS01+216                                               06051000
CVTGDA   EQU   CVTS01+212                                               06052000
CVTVVMDI EQU   CVTS01+204                                               06053000
CVTAQTOP EQU   CVTS01+200                                               06054000
CVTIOSCS EQU   CVTS01+196                                               06055000
CVTSDRM  EQU   CVTS01+192                                               06056000
CVTOPTE  EQU   CVTS01+188                                               06057000
CVTSTXU  EQU   CVTS01+184                                               06058000
CVTQUIS  EQU   CVTS01+180                                               06059000
CVTPARS  EQU   CVTS01+176                                               06060000
CVTS1EE  EQU   CVTS01+172                                               06061000
CVTFRAS  EQU   CVTS01+168                                               06062000
CVTQSAS  EQU   CVTS01+164                                               06063000
CVTCRAS  EQU   CVTS01+160                                               06064000
CVTCRMN  EQU   CVTS01+156                                               06065000
CVTDELCP EQU   CVTS01+152                                               06066000
CVTFRECL EQU   CVTS01+148                                               06067000
CVTGETCL EQU   CVTS01+144                                               06068000
CVTBLDCP EQU   CVTS01+140                                               06069000
CVTAUTHL EQU   CVTS01+136                                               06070000
CVTSCAN  EQU   CVTS01+132                                               06071000
CVTRV144 EQU   CVTS01+130                                               06072000
CVTMAXMP EQU   CVTS01+128                                               06073000
CVTSTCK  EQU   CVTS01+124                                               06074000
CVTRV139 EQU   CVTS01+123                                               06075000
CVTDSSAC EQU   CVTS01+122                                               06076000
CVTRV513 EQU   CVTS01+121                                               06077000
CVTIOSPL EQU   CVTS01+120                                               06078000
CVTPTGT  EQU   CVTS01+116                                               06079000
CVTCSPIE EQU   CVTS01+112                                               06080000
CVTSMFEX EQU   CVTS01+108                                               06081000
CVTOLT0A EQU   CVTS01+104                                               06082000
CVTSRBRT EQU   CVTS01+100                                               06083000
CVTPUTL  EQU   CVTS01+96                                                06084000
CVTASCRL EQU   CVTS01+92                                                06085000
CVTASCRF EQU   CVTS01+88                                                06086000
CVTRV326 EQU   CVTS01+84                                                06087000
CVTRV325 EQU   CVTS01+80                                                06088000
CVTRV324 EQU   CVTS01+76                                                06089000
CVT0VL01 EQU   CVTS01+72                                                06090000
CVTSHRVM EQU   CVTS01+68                                                06091000
CVTRV332 EQU   CVTS01+64                                                06092000
CVTTAS   EQU   CVTS01+60                                                06093000
CVTRSCN  EQU   CVTS01+56                                                06094000
CVTTRAC2 EQU   CVTS01+54                                                06095000
CVTTRACE EQU   CVTS01+52                                                06096000
CVTAPG   EQU   CVTS01+51                                                06097000
CVTSDTRC EQU   CVTCTLFG                                                 06098000
CVTGTRCE EQU   CVTCTLFG                                                 06099000
CVTNOMP  EQU   CVTCTLFG                                                 06100000
CVTRSV79 EQU   CVTCTLFG                                                 06101000
CVTDSTAT EQU   CVTCTLFG                                                 06102000
CVTRSV78 EQU   CVTCTLFG                                                 06103000
CVTRV333 EQU   CVTCTLFG                                                 06104000
CVTRV323 EQU   CVTCTLFG                                                 06105000
CVTSPVLK EQU   CVTS01+49                                                06106000
CVTRSV77 EQU   CVTS01+48                                                06107000
CVTRV331 EQU   CVTS01+44                                                06108000
CVTRV330 EQU   CVTS01+40                                                06109000
CVTRV329 EQU   CVTS01+36                                                06110000
CVTRV328 EQU   CVTS01+32                                                06111000
CVTRV322 EQU   CVTS01+28                                                06112000
CVTSLID  EQU   CVTSLIDA+1                                               06113000
CVTSYLK  EQU   CVTSLIDA                                                 06114000
CVTRV321 EQU   CVTS01+20                                                06115000
CVTRV320 EQU   CVTS01+16                                                06116000
CVTLPDIR EQU   CVTLPDIA+1                                               06117000
CVTRSV69 EQU   CVTDIRST                                                 06118000
CVTRSV68 EQU   CVTDIRST                                                 06119000
CVTRSV67 EQU   CVTDIRST                                                 06120000
CVTRSV66 EQU   CVTDIRST                                                 06121000
CVTRSV65 EQU   CVTDIRST                                                 06122000
CVTRSV64 EQU   CVTDIRST                                                 06123000
CVTRSV63 EQU   CVTDIRST                                                 06124000
CVTDICOM EQU   CVTDIRST                                                 06125000
CVTPVTP  EQU   CVTS01+8                                                 06126000
CVTLPDSR EQU   CVTS01+4                                                 06127000
CVTGETL  EQU   CVTS01                                                   06128000
HO32BITS EQU   CONVALUE                                                 06129000
@NM00167 EQU   TCWALFLG                                                 06130000
@NM00166 EQU   TCWALFLG                                                 06131000
@NM00165 EQU   TCENTRY+14                                               06132000
@NM00164 EQU   TCWACTL+2                                                06133000
@NM00163 EQU   TCWACTL                                                  06134000
@NM00162 EQU   TCWACTL                                                  06135000
@NM00161 EQU   TCWARPLY+2                                               06136000
@NM00160 EQU   TCWA+53                                                  06137000
@NM00159 EQU   TCWAGFLG                                                 06138000
@NM00158 EQU   SDWA+512                                                 06139000
SDWAVRA  EQU   SDWARA+4                                                 06140000
SDWAURAL EQU   SDWARA+3                                                 06141000
@NM00157 EQU   SDWADPVA                                                 06142000
SDWAEBC  EQU   SDWADPVA                                                 06143000
SDWAHEX  EQU   SDWADPVA                                                 06144000
SDWAVRAL EQU   SDWARA                                                   06145000
@NM00156 EQU   SDWA+396                                                 06146000
SDWACOMP EQU   SDWA+392                                                 06147000
SDWARCPL EQU   SDWA+364                                                 06148000
@NM00155 EQU   SDWADPSA+32                                              06149000
SDWATO4  EQU   SDWADPSL+28                                              06150000
SDWAFRM4 EQU   SDWADPSL+24                                              06151000
SDWATO3  EQU   SDWADPSL+20                                              06152000
SDWAFRM3 EQU   SDWADPSL+16                                              06153000
SDWATO2  EQU   SDWADPSL+12                                              06154000
SDWAFRM2 EQU   SDWADPSL+8                                               06155000
SDWATO1  EQU   SDWADPSL+4                                               06156000
SDWAFRM1 EQU   SDWADPSL                                                 06157000
@NM00154 EQU   SDWADDAT+3                                               06158000
@NM00153 EQU   SDWAPDAT                                                 06159000
SDWAUSPL EQU   SDWAPDAT                                                 06160000
SDWADPSW EQU   SDWAPDAT                                                 06161000
SDWATJPA EQU   SDWAPDAT                                                 06162000
SDWATLPA EQU   SDWAPDAT                                                 06163000
SDWADREG EQU   SDWAPDAT                                                 06164000
SDWADSAH EQU   SDWAPDAT                                                 06165000
SDWADSAS EQU   SDWAPDAT                                                 06166000
@NM00152 EQU   SDWADDAT+1                                               06167000
@NM00151 EQU   SDWASDAT                                                 06168000
SDWAQQS  EQU   SDWASDAT                                                 06169000
SDWACBS  EQU   SDWASDAT                                                 06170000
SDWAGTF  EQU   SDWASDAT                                                 06171000
SDWASWA  EQU   SDWASDAT                                                 06172000
SDWALSQA EQU   SDWASDAT                                                 06173000
SDWASQA  EQU   SDWASDAT                                                 06174000
SDWANUC  EQU   SDWASDAT                                                 06175000
@NM00150 EQU   SDWADUMP+2                                               06176000
@NM00149 EQU   SDWADPFS                                                 06177000
SDWASLST EQU   SDWADPFS                                                 06178000
@NM00148 EQU   SDWADPFS                                                 06179000
SDWADLST EQU   SDWADPFS                                                 06180000
SDWADPT  EQU   SDWADPFS                                                 06181000
SDWADPID EQU   SDWADUMP                                                 06182000
SDWADPLA EQU   SDWA+316                                                 06183000
SDWAREXN EQU   SDWARECP+16                                              06184000
SDWACSCT EQU   SDWARECP+8                                               06185000
SDWAMODN EQU   SDWARECP                                                 06186000
@NM00147 EQU   SDWA+290                                                 06187000
SDWAASID EQU   SDWA+288                                                 06188000
SDWATALW EQU   SDWALKWS+28                                              06189000
SDWATDLW EQU   SDWALKWS+24                                              06190000
SDWATNLW EQU   SDWALKWS+20                                              06191000
SDWAAPLW EQU   SDWALKWS+16                                              06192000
SDWAIPLW EQU   SDWALKWS+12                                              06193000
SDWAILLW EQU   SDWALKWS+8                                               06194000
SDWAIULW EQU   SDWALKWS+4                                               06195000
SDWAICLW EQU   SDWALKWS                                                 06196000
SDWAFLLK EQU   SDWAACF4                                                 06197000
SDWACMS  EQU   SDWAACF4                                                 06198000
SDWAOPTM EQU   SDWAACF4                                                 06199000
SDWATADB EQU   SDWAACF4                                                 06200000
SDWATDNB EQU   SDWAACF4                                                 06201000
SDWATNCB EQU   SDWAACF4                                                 06202000
SDWAILCH EQU   SDWAACF4                                                 06203000
SDWAIUCB EQU   SDWAACF4                                                 06204000
SDWAICAT EQU   SDWAACF3                                                 06205000
SDWAIPRG EQU   SDWAACF3                                                 06206000
SDWASALL EQU   SDWAACF3                                                 06207000
SDWAASMP EQU   SDWAACF3                                                 06208000
SDWADISP EQU   SDWAACF3                                                 06209000
@NM00146 EQU   SDWAACF3                                                 06210000
@NM00145 EQU   SDWAACF2                                                 06211000
SDWAUPRG EQU   SDWAACF2                                                 06212000
@NM00144 EQU   SDWAACF2                                                 06213000
SDWASPIN EQU   SDWAACF2                                                 06214000
@NM00143 EQU   SDWAACF2                                                 06215000
SDWARCRD EQU   SDWAACF2                                                 06216000
SDWALCPU EQU   SDWACPUA+2                                               06217000
@NM00142 EQU   SDWACPUA                                                 06218000
SDWARECA EQU   SDWA+244                                                 06219000
@NM00141 EQU   SDWA+239                                                 06220000
@NM00140 EQU   SDWAIOFS                                                 06221000
SDWANIOP EQU   SDWAIOFS                                                 06222000
SDWANOIO EQU   SDWAIOFS                                                 06223000
SDWAIOHT EQU   SDWAIOFS                                                 06224000
SDWAIOQR EQU   SDWAIOFS                                                 06225000
SDWAFMID EQU   SDWA+236                                                 06226000
@NM00139 EQU   SDWAERRD                                                 06227000
SDWAMCIV EQU   SDWAERRD                                                 06228000
SDWARPIV EQU   SDWAERRD                                                 06229000
SDWAMABD EQU   SDWAERRD                                                 06230000
SDWACTS  EQU   SDWAERRD                                                 06231000
SDWASTAE EQU   SDWAERRD                                                 06232000
SDWANRBE EQU   SDWAERRD                                                 06233000
SDWACLUP EQU   SDWAERRD                                                 06234000
@NM00138 EQU   SDWAERRC                                                 06235000
SDWAEAS  EQU   SDWAERRC                                                 06236000
SDWAPERC EQU   SDWAERRC                                                 06237000
SDWAIRB  EQU   SDWAERRC                                                 06238000
SDWASTAI EQU   SDWAERRC                                                 06239000
SDWASTAF EQU   SDWAERRC                                                 06240000
SDWASRBM EQU   SDWAERRB                                                 06241000
SDWALDIS EQU   SDWAERRB                                                 06242000
SDWAENRB EQU   SDWAERRB                                                 06243000
SDWATYP1 EQU   SDWAERRB                                                 06244000
@NM00137 EQU   SDWAERRB                                                 06245000
SDWAPGIO EQU   SDWAERRA                                                 06246000
SDWATEXC EQU   SDWAERRA                                                 06247000
SDWASVCE EQU   SDWAERRA                                                 06248000
SDWAABTM EQU   SDWAERRA                                                 06249000
SDWASVCD EQU   SDWAERRA                                                 06250000
SDWARKEY EQU   SDWAERRA                                                 06251000
SDWAPCHK EQU   SDWAERRA                                                 06252000
SDWAMCHK EQU   SDWAERRA                                                 06253000
SDWATIME EQU   SDWAMCH+20                                               06254000
SDWARFSA EQU   SDWAMCH+16                                               06255000
@NM00136 EQU   SDWAMCH+14                                               06256000
SDWAVEQR EQU   SDWARSR2                                                 06257000
SDWAPGFX EQU   SDWARSR2                                                 06258000
SDWAFLSQ EQU   SDWARSR2                                                 06259000
SDWAFSQA EQU   SDWARSR2                                                 06260000
SDWANUCL EQU   SDWARSR2                                                 06261000
SDWASPER EQU   SDWARSR2                                                 06262000
SDWAINTC EQU   SDWARSR2                                                 06263000
SDWAOFLN EQU   SDWARSR2                                                 06264000
SDWACHNG EQU   SDWARSR1                                                 06265000
SDWAMSER EQU   SDWARSR1                                                 06266000
@NM00135 EQU   SDWARSR1                                                 06267000
SDWACPID EQU   SDWAMCH+10                                               06268000
SDWATERR EQU   SDWAMCHD                                                 06269000
SDWAFPRX EQU   SDWAMCHD                                                 06270000
SDWAINSF EQU   SDWAMCHD                                                 06271000
SDWAACR  EQU   SDWAMCHD                                                 06272000
SDWASCK  EQU   SDWAMCHD                                                 06273000
SDWAPSWU EQU   SDWAMCHD                                                 06274000
SDWAREGU EQU   SDWAMCHD                                                 06275000
SDWASKYF EQU   SDWAMCHD                                                 06276000
@NM00134 EQU   SDWAMCHS                                                 06277000
SDWARSRF EQU   SDWAMCHS                                                 06278000
SDWARSRC EQU   SDWAMCHS                                                 06279000
SDWAINVP EQU   SDWAMCHS                                                 06280000
SDWATSVL EQU   SDWAMCHS                                                 06281000
SDWARCDF EQU   SDWAMCHS                                                 06282000
SDWASRVL EQU   SDWAMCHS                                                 06283000
SDWASCKE EQU   SDWASTCK+4                                               06284000
SDWASCKB EQU   SDWASTCK                                                 06285000
SDWALNTH EQU   SDWAIDNT+1                                               06286000
SDWASPID EQU   SDWAIDNT                                                 06287000
SDWASR15 EQU   SDWASRSV+60                                              06288000
SDWASR14 EQU   SDWASRSV+56                                              06289000
SDWASR13 EQU   SDWASRSV+52                                              06290000
SDWASR12 EQU   SDWASRSV+48                                              06291000
SDWASR11 EQU   SDWASRSV+44                                              06292000
SDWASR10 EQU   SDWASRSV+40                                              06293000
SDWASR09 EQU   SDWASRSV+36                                              06294000
SDWASR08 EQU   SDWASRSV+32                                              06295000
SDWASR07 EQU   SDWASRSV+28                                              06296000
SDWASR06 EQU   SDWASRSV+24                                              06297000
SDWASR05 EQU   SDWASRSV+20                                              06298000
SDWASR04 EQU   SDWASRSV+16                                              06299000
SDWASR03 EQU   SDWASRSV+12                                              06300000
SDWASR02 EQU   SDWASRSV+8                                               06301000
SDWASR01 EQU   SDWASRSV+4                                               06302000
SDWASR00 EQU   SDWASRSV                                                 06303000
SDWATRN2 EQU   SDWAAEC2+4                                               06304000
SDWAIPC2 EQU   SDWAICD2                                                 06305000
SDWAIMC2 EQU   SDWAICD2                                                 06306000
SDWAIPR2 EQU   SDWAICD2                                                 06307000
@NM00133 EQU   SDWAINC2                                                 06308000
@NM00132 EQU   SDWAILC2                                                 06309000
SDWAIL2  EQU   SDWAILC2                                                 06310000
@NM00131 EQU   SDWAILC2                                                 06311000
@NM00130 EQU   SDWAAEC2                                                 06312000
SDWAADD2 EQU   SDWANXT2+1                                               06313000
@NM00129 EQU   SDWANXT2                                                 06314000
@NM00128 EQU   SDWAEC2+3                                                06315000
SDWASGN2 EQU   SDWAINT2                                                 06316000
SDWAEXP2 EQU   SDWAINT2                                                 06317000
SDWADEC2 EQU   SDWAINT2                                                 06318000
SDWAFPO2 EQU   SDWAINT2                                                 06319000
SDWACC2  EQU   SDWAINT2                                                 06320000
@NM00127 EQU   SDWAINT2                                                 06321000
SDWAPGM2 EQU   SDWAMWP2                                                 06322000
SDWAWAT2 EQU   SDWAMWP2                                                 06323000
SDWAMCK2 EQU   SDWAMWP2                                                 06324000
SDWAECT2 EQU   SDWAMWP2                                                 06325000
SDWAKEY2 EQU   SDWAMWP2                                                 06326000
SDWAEXT2 EQU   SDWAEMK2                                                 06327000
SDWAIO2  EQU   SDWAEMK2                                                 06328000
SDWATRM2 EQU   SDWAEMK2                                                 06329000
@NM00126 EQU   SDWAEMK2                                                 06330000
SDWAPER2 EQU   SDWAEMK2                                                 06331000
@NM00125 EQU   SDWAEMK2                                                 06332000
SDWATRAN EQU   SDWAAEC1+4                                               06333000
SDWAIPC1 EQU   SDWAICD1                                                 06334000
SDWAIMC1 EQU   SDWAICD1                                                 06335000
SDWAIPR1 EQU   SDWAICD1                                                 06336000
@NM00124 EQU   SDWAINC1                                                 06337000
@NM00123 EQU   SDWAILC1                                                 06338000
SDWAIL1  EQU   SDWAILC1                                                 06339000
@NM00122 EQU   SDWAILC1                                                 06340000
@NM00121 EQU   SDWAAEC1                                                 06341000
SDWAADD1 EQU   SDWANXT1+1                                               06342000
@NM00120 EQU   SDWANXT1                                                 06343000
@NM00119 EQU   SDWAEC1+3                                                06344000
SDWASGN1 EQU   SDWAINT1                                                 06345000
SDWAEXP1 EQU   SDWAINT1                                                 06346000
SDWADEC1 EQU   SDWAINT1                                                 06347000
SDWAFPO1 EQU   SDWAINT1                                                 06348000
SDWACC1  EQU   SDWAINT1                                                 06349000
@NM00118 EQU   SDWAINT1                                                 06350000
SDWAPGM1 EQU   SDWAMWP1                                                 06351000
SDWAWAT1 EQU   SDWAMWP1                                                 06352000
SDWAMCK1 EQU   SDWAMWP1                                                 06353000
SDWAECT1 EQU   SDWAMWP1                                                 06354000
SDWAKEY1 EQU   SDWAMWP1                                                 06355000
SDWAEXT1 EQU   SDWAEMK1                                                 06356000
SDWAIO1  EQU   SDWAEMK1                                                 06357000
SDWATRM1 EQU   SDWAEMK1                                                 06358000
@NM00117 EQU   SDWAEMK1                                                 06359000
SDWAPER1 EQU   SDWAEMK1                                                 06360000
@NM00116 EQU   SDWAEMK1                                                 06361000
SDWAIOBR EQU   SDWA+100                                                 06362000
SDWAEPA  EQU   SDWA+96                                                  06363000
@NM00115 EQU   SDWANAME+4                                               06364000
SDWARBAD EQU   SDWANAME                                                 06365000
SDWAGR15 EQU   SDWAGRSV+60                                              06366000
SDWAGR14 EQU   SDWAGRSV+56                                              06367000
SDWAGR13 EQU   SDWAGRSV+52                                              06368000
SDWAGR12 EQU   SDWAGRSV+48                                              06369000
SDWAGR11 EQU   SDWAGRSV+44                                              06370000
SDWAGR10 EQU   SDWAGRSV+40                                              06371000
SDWAGR09 EQU   SDWAGRSV+36                                              06372000
SDWAGR08 EQU   SDWAGRSV+32                                              06373000
SDWAGR07 EQU   SDWAGRSV+28                                              06374000
SDWAGR06 EQU   SDWAGRSV+24                                              06375000
SDWAGR05 EQU   SDWAGRSV+20                                              06376000
SDWAGR04 EQU   SDWAGRSV+16                                              06377000
SDWAGR03 EQU   SDWAGRSV+12                                              06378000
SDWAGR02 EQU   SDWAGRSV+8                                               06379000
SDWAGR01 EQU   SDWAGRSV+4                                               06380000
SDWAGR00 EQU   SDWAGRSV                                                 06381000
SDWANXTP EQU   SDWACTL2+5                                               06382000
SDWASGP  EQU   SDWAPMKP                                                 06383000
SDWAEUP  EQU   SDWAPMKP                                                 06384000
SDWADOP  EQU   SDWAPMKP                                                 06385000
SDWAFPP  EQU   SDWAPMKP                                                 06386000
SDWACCP  EQU   SDWAPMKP                                                 06387000
SDWAILP  EQU   SDWAPMKP                                                 06388000
SDWAINTP EQU   SDWACTL2+2                                               06389000
SDWASPVP EQU   SDWAMWPP                                                 06390000
SDWAWATP EQU   SDWAMWPP                                                 06391000
SDWAMCKP EQU   SDWAMWPP                                                 06392000
@NM00114 EQU   SDWAMWPP                                                 06393000
SDWAKEYP EQU   SDWAMWPP                                                 06394000
SDWAEXTP EQU   SDWACMKP                                                 06395000
SDWAIOP  EQU   SDWACMKP                                                 06396000
SDWANXTA EQU   SDWACTL1+5                                               06397000
SDWASGA  EQU   SDWAPMKA                                                 06398000
SDWAEUA  EQU   SDWAPMKA                                                 06399000
SDWADOA  EQU   SDWAPMKA                                                 06400000
SDWAFPA  EQU   SDWAPMKA                                                 06401000
SDWACCA  EQU   SDWAPMKA                                                 06402000
SDWAILA  EQU   SDWAPMKA                                                 06403000
SDWAINTA EQU   SDWACTL1+2                                               06404000
SDWASPVA EQU   SDWAMWPA                                                 06405000
SDWAWATA EQU   SDWAMWPA                                                 06406000
SDWAMCKA EQU   SDWAMWPA                                                 06407000
@NM00113 EQU   SDWAMWPA                                                 06408000
SDWAKEYA EQU   SDWAMWPA                                                 06409000
SDWAEXTA EQU   SDWACMKA                                                 06410000
SDWAIOA  EQU   SDWACMKA                                                 06411000
SDWACMPC EQU   SDWAABCC+1                                               06412000
@NM00112 EQU   SDWACMPF                                                 06413000
SDWASTCC EQU   SDWACMPF                                                 06414000
@NM00111 EQU   SDWACMPF                                                 06415000
SDWASTEP EQU   SDWACMPF                                                 06416000
CVTLEVL  EQU   CVTRELNO+2                                               06417000
CVTNUMB  EQU   CVTRELNO                                                 06418000
CVTMDL   EQU   CVTFIX+250                                               06419000
@NM00110 EQU   CVTFIX+248                                               06420000
@NM00109 EQU   CVTFIX                                                   06421000
CVTRV482 EQU   CVTXTNT2+128                                             06422000
CVTRV481 EQU   CVTXTNT2+124                                             06423000
CVTRV480 EQU   CVTXTNT2+120                                             06424000
CVTRV479 EQU   CVTXTNT2+118                                             06425000
CVTRV478 EQU   CVTXTNT2+117                                             06426000
CVTRV477 EQU   CVTXTNT2+116                                             06427000
CVTRV476 EQU   CVTXTNT2+115                                             06428000
CVTRV475 EQU   CVTXTNT2+114                                             06429000
CVTRV474 EQU   CVTRV466                                                 06430000
CVTRV473 EQU   CVTRV466                                                 06431000
CVTRV472 EQU   CVTRV466                                                 06432000
CVTRV471 EQU   CVTRV466                                                 06433000
CVTRV470 EQU   CVTRV466                                                 06434000
CVTRV469 EQU   CVTRV466                                                 06435000
CVTRV468 EQU   CVTRV466                                                 06436000
CVTRV467 EQU   CVTRV466                                                 06437000
CVTRV465 EQU   CVTRV457                                                 06438000
CVTRV464 EQU   CVTRV457                                                 06439000
CVTRV463 EQU   CVTRV457                                                 06440000
CVTRV462 EQU   CVTRV457                                                 06441000
CVTRV461 EQU   CVTRV457                                                 06442000
CVTRV460 EQU   CVTRV457                                                 06443000
CVTRV459 EQU   CVTRV457                                                 06444000
CVTRV458 EQU   CVTRV457                                                 06445000
CVTRV456 EQU   CVTXTNT2+108                                             06446000
CVTRV455 EQU   CVTXTNT2+104                                             06447000
CVTRV454 EQU   CVTXTNT2+100                                             06448000
CVTRV453 EQU   CVTXTNT2+96                                              06449000
CVTRV452 EQU   CVTXTNT2+94                                              06450000
CVTRV451 EQU   CVTXTNT2+92                                              06451000
CVTRV450 EQU   CVTXTNT2+90                                              06452000
CVTRV449 EQU   CVTXTNT2+88                                              06453000
CVTRV448 EQU   CVTXTNT2+87                                              06454000
CVTRV447 EQU   CVTXTNT2+86                                              06455000
CVTRV446 EQU   CVTRV438                                                 06456000
CVTRV445 EQU   CVTRV438                                                 06457000
CVTRV444 EQU   CVTRV438                                                 06458000
CVTRV443 EQU   CVTRV438                                                 06459000
CVTRV442 EQU   CVTRV438                                                 06460000
CVTRV441 EQU   CVTRV438                                                 06461000
CVTRV440 EQU   CVTRV438                                                 06462000
CVTRV439 EQU   CVTRV438                                                 06463000
CVTRV437 EQU   CVTRV429                                                 06464000
CVTRV436 EQU   CVTRV429                                                 06465000
CVTRV435 EQU   CVTRV429                                                 06466000
CVTRV434 EQU   CVTRV429                                                 06467000
CVTRV433 EQU   CVTRV429                                                 06468000
CVTRV432 EQU   CVTRV429                                                 06469000
CVTRV431 EQU   CVTRV429                                                 06470000
CVTRV430 EQU   CVTRV429                                                 06471000
CVTRV428 EQU   CVTXTNT2+80                                              06472000
CVTRV427 EQU   CVTXTNT2+76                                              06473000
CVTRV426 EQU   CVTXTNT2+72                                              06474000
CVTRV425 EQU   CVTXTNT2+68                                              06475000
CVTATACT EQU   CVTATCVT                                                 06476000
CVTRV423 EQU   CVTXTNT2+62                                              06477000
CVTRV422 EQU   CVTXTNT2+60                                              06478000
CVTRV421 EQU   CVTXTNT2+58                                              06479000
CVTRV420 EQU   CVTXTNT2+56                                              06480000
CVTRV419 EQU   CVTXTNT2+55                                              06481000
CVTRV418 EQU   CVTXTNT2+54                                              06482000
CVTRV417 EQU   CVTRV409                                                 06483000
CVTRV416 EQU   CVTRV409                                                 06484000
CVTRV415 EQU   CVTRV409                                                 06485000
CVTRV414 EQU   CVTRV409                                                 06486000
CVTRV413 EQU   CVTRV409                                                 06487000
CVTRV412 EQU   CVTRV409                                                 06488000
CVTRV411 EQU   CVTRV409                                                 06489000
CVTRV410 EQU   CVTRV409                                                 06490000
CVTRV408 EQU   CVTRV400                                                 06491000
CVTRV407 EQU   CVTRV400                                                 06492000
CVTRV406 EQU   CVTRV400                                                 06493000
CVTRV405 EQU   CVTRV400                                                 06494000
CVTRV404 EQU   CVTRV400                                                 06495000
CVTRV403 EQU   CVTRV400                                                 06496000
CVTRV402 EQU   CVTRV400                                                 06497000
CVTRV401 EQU   CVTRV400                                                 06498000
CVTICB   EQU   CVTXTNT2+48                                              06499000
CVTSKTA  EQU   CVTXTNT2+44                                              06500000
CVTCCVT  EQU   CVTXTNT2+40                                              06501000
CVTRSV98 EQU   CVTXTNT2+36                                              06502000
CVTRSV97 EQU   CVTXTNT2+34                                              06503000
CVTRSV96 EQU   CVTXTNT2+32                                              06504000
CVTOLTEP EQU   CVTXTNT2+28                                              06505000
CVTQIDA  EQU   CVTQID+1                                                 06506000
CVTRSV95 EQU   CVTQID                                                   06507000
CVTRSV94 EQU   CVTXTNT2+20                                              06508000
CVTRSV93 EQU   CVTXTNT2+16                                              06509000
CVTRSV92 EQU   CVTXTNT2+12                                              06510000
CVTDEBVR EQU   CVTXTNT2+8                                               06511000
CVTRSV91 EQU   CVTXTNT2+6                                               06512000
CVTRSV9H EQU   CVTFLGBT                                                 06513000
CVTRSV9G EQU   CVTFLGBT                                                 06514000
CVTRSV9F EQU   CVTFLGBT                                                 06515000
CVTRSV9E EQU   CVTFLGBT                                                 06516000
CVTRSV9D EQU   CVTFLGBT                                                 06517000
CVTRSV9C EQU   CVTFLGBT                                                 06518000
CVTVME   EQU   CVTFLGBT                                                 06519000
CVTNPE   EQU   CVTFLGBT                                                 06520000
CVTNUCLS EQU   CVTXTNT2+4                                               06521000
CVTDSSVA EQU   CVTDSSV+1                                                06522000
CVTRSV89 EQU   CVTDSSV                                                  06523000
CVTRSV88 EQU   CVTXTNT1+8                                               06524000
CVTRSV87 EQU   CVTXTNT1+4                                               06525000
CVTFACHN EQU   CVTXTNT1                                                 06526000
CVTRV488 EQU   CVTMAP+412                                               06527000
CVTRV487 EQU   CVTMAP+408                                               06528000
CVTRV486 EQU   CVTMAP+404                                               06529000
CVTRV485 EQU   CVTMAP+400                                               06530000
CVTACTAP EQU   CVTMAP+396                                               06531000
CVTAUTH  EQU   CVTMAP+392                                               06532000
CVTATMCA EQU   CVTATMCT+1                                               06533000
CVTATMST EQU   CVTATMCT                                                 06534000
CVTRSV61 EQU   CVTMAP+384                                               06535000
CVTVOLT1 EQU   CVTVOLM1+1                                               06536000
CVTVOLI1 EQU   CVTVOLF1                                                 06537000
CVTSTOA  EQU   CVTMAP+376                                               06538000
CVTRSV58 EQU   CVTMAP+374                                               06539000
CVTRSV57 EQU   CVTMAP+372                                               06540000
CVTDDCE  EQU   CVTMAP+368                                               06541000
CVTPNWFR EQU   CVTMAP+364                                               06542000
CVTSMF   EQU   CVTMAP+360                                               06543000
CVTSULK  EQU   CVTMAP+358                                               06544000
CVTSLKO  EQU   CVTSYSK                                                  06545000
CVTSLKP  EQU   CVTSYSK                                                  06546000
CVTSLKQ  EQU   CVTSYSK                                                  06547000
CVTSLKR  EQU   CVTSYSK                                                  06548000
CVTRSV56 EQU   CVTSYSK                                                  06549000
CVTRSV55 EQU   CVTSYSK                                                  06550000
CVTRSV54 EQU   CVTSYSK                                                  06551000
CVTRSV53 EQU   CVTSYSK                                                  06552000
CVTRSV52 EQU   CVTA1F1                                                  06553000
CVTRSV51 EQU   CVTA1F1                                                  06554000
CVTRSV50 EQU   CVTA1F1                                                  06555000
CVTRSV49 EQU   CVTA1F1                                                  06556000
CVTRSV48 EQU   CVTA1F1                                                  06557000
CVTRSV47 EQU   CVTA1F1                                                  06558000
CVTSRSW  EQU   CVTA1F1                                                  06559000
CVTPFSW  EQU   CVTA1F1                                                  06560000
CVTPCVT  EQU   CVTMAP+352                                               06561000
CVTRSV46 EQU   CVTMAP+344                                               06562000
CVTRSV45 EQU   CVTMAP+340                                               06563000
CVTRSV44 EQU   CVTMAP+338                                               06564000
CVTRSV43 EQU   CVTMAP+336                                               06565000
CVTHJESA EQU   CVTHJES+1                                                06566000
CVTRSV42 EQU   CVTHJES                                                  06567000
CVTEXT2A EQU   CVTEXT2+1                                                06568000
CVTRSV41 EQU   CVTEXT2                                                  06569000
CVTAPFA  EQU   CVTAPF+1                                                 06570000
CVTRSV40 EQU   CVTAPF                                                   06571000
CVTRV518 EQU   CVTINTLA                                                 06572000
CVTRV517 EQU   CVTERPV                                                  06573000
CVTEORM  EQU   CVTMAP+312                                               06574000
CVTMCHPR EQU   CVTMAP+308                                               06575000
CVTJEPS  EQU   CVTMAP+300                                               06576000
CVTJESCT EQU   CVTMAP+296                                               06577000
CVTMODE  EQU   CVTMAP+292                                               06578000
CVTPTRV  EQU   CVTMAP+288                                               06579000
CVTREAL  EQU   CVTMAP+284                                               06580000
CVTRSV39 EQU   CVTMAP+280                                               06581000
CVTRSV38 EQU   CVTMAP+276                                               06582000
CVTDMSRA EQU   CVTDMSR+1                                                06583000
CVTRV634 EQU   CVTDMSRF                                                 06584000
CVTRV633 EQU   CVTDMSRF                                                 06585000
CVTRV632 EQU   CVTDMSRF                                                 06586000
CVTRV631 EQU   CVTDMSRF                                                 06587000
CVTRV630 EQU   CVTDMSRF                                                 06588000
CVTRV629 EQU   CVTDMSRF                                                 06589000
CVTUDUMP EQU   CVTDMSRF                                                 06590000
CVTSDUMP EQU   CVTDMSRF                                                 06591000
CVTQMSGA EQU   CVTQMSG+1                                                06592000
CVTRSV36 EQU   CVTQMSG                                                  06593000
CVTAMFF  EQU   CVTMAP+264                                               06594000
CVTPURGA EQU   CVTPURG+1                                                06595000
CVTRSV35 EQU   CVTPURG                                                  06596000
CVTCBSP  EQU   CVTMAP+256                                               06597000
CVTATERA EQU   CVTATER+1                                                06598000
CVTSYST  EQU   CVTATER                                                  06599000
CVTVOLT2 EQU   CVTTAT                                                   06600000
CVTVOLI2 EQU   CVTVOLF2                                                 06601000
CVTAQAVB EQU   CVTAQAVT+1                                               06602000
CVTRSV34 EQU   CVTTCMFG                                                 06603000
CVTRSV33 EQU   CVTTCMFG                                                 06604000
CVTRSV32 EQU   CVTTCMFG                                                 06605000
CVTRSV31 EQU   CVTTCMFG                                                 06606000
CVTRSV30 EQU   CVTTCMFG                                                 06607000
CVTRSV29 EQU   CVTTCMFG                                                 06608000
CVTRSV28 EQU   CVTTCMFG                                                 06609000
CVTTCRDY EQU   CVTTCMFG                                                 06610000
CVTGTFA  EQU   CVTGTF+1                                                 06611000
CVTRSV27 EQU   CVTGTFST                                                 06612000
CVTRNIO  EQU   CVTGTFST                                                 06613000
CVTUSR   EQU   CVTGTFST                                                 06614000
CVTRV318 EQU   CVTFORM                                                  06615000
CVTRV317 EQU   CVTTMODE                                                 06616000
CVTRV316 EQU   CVTSTATE                                                 06617000
CVTRV315 EQU   CVTGTFS                                                  06618000
CVTGTFAV EQU   CVTGTFS                                                  06619000
CVT0SCR1 EQU   CVTMAP+232                                               06620000
CVTRV515 EQU   CVTMAP+228                                               06621000
CVTRMS   EQU   CVTMAP+224                                               06622000
CVTPATCH EQU   CVTMAP+220                                               06623000
CVTTSCE  EQU   CVTMAP+216                                               06624000
CVTLNKSC EQU   CVTMAP+214                                               06625000
CVTQABST EQU   CVTMAP+212                                               06626000
CVTMDLDS EQU   CVTMAP+208                                               06627000
CVTUSER  EQU   CVTMAP+204                                               06628000
CVTABEND EQU   CVTMAP+200                                               06629000
CVTSMCA  EQU   CVTMAP+196                                               06630000
CVTRSV18 EQU   CVTMAP+192                                               06631000
CVTQLPAQ EQU   CVTMAP+188                                               06632000
CVTQCDSR EQU   CVTMAP+184                                               06633000
CVTRSV17 EQU   CVTOPTB                                                  06634000
CVTRSV16 EQU   CVTOPTB                                                  06635000
CVTFP    EQU   CVTOPTB                                                  06636000
CVTAPTHR EQU   CVTOPTB                                                  06637000
CVTNLOG  EQU   CVTOPTB                                                  06638000
CVTTOD   EQU   CVTOPTB                                                  06639000
CVTCTIMS EQU   CVTOPTB                                                  06640000
CVTPROT  EQU   CVTOPTB                                                  06641000
CVTXPFP  EQU   CVTOPTA                                                  06642000
CVTASCII EQU   CVTOPTA                                                  06643000
CVTRSV13 EQU   CVTOPTA                                                  06644000
CVTRSV12 EQU   CVTOPTA                                                  06645000
CVTNIP   EQU   CVTOPTA                                                  06646000
CVTDDR   EQU   CVTOPTA                                                  06647000
CVTAPR   EQU   CVTOPTA                                                  06648000
CVTCCH   EQU   CVTOPTA                                                  06649000
CVTSNCTR EQU   CVTMAP+180                                               06650000
CVTQMWR  EQU   CVTMAP+176                                               06651000
CVTQOCR  EQU   CVTMAP+172                                               06652000
CVT1EF00 EQU   CVTMAP+168                                               06653000
CVTMZ00  EQU   CVTMAP+164                                               06654000
CVTSV76Q EQU   CVTSV76C                                                 06655000
CVTRSV11 EQU   CVTMAP+156                                               06656000
CVT0PT01 EQU   CVTMAP+152                                               06657000
CVTRV516 EQU   CVTIERLC                                                 06658000
CVTILCH  EQU   CVTMAP+140                                               06659000
CVT0DS   EQU   CVTMAP+136                                               06660000
CVTFBOSV EQU   CVTMAP+132                                               06661000
CVTNUCB  EQU   CVTMAP+128                                               06662000
CVTIXAVL EQU   CVTMAP+124                                               06663000
CVTSV76M EQU   CVTIOQET                                                 06664000
CVTDCBA  EQU   CVTMAP+117                                               06665000
CVTMVS2  EQU   CVTDCB                                                   06666000
CVT6DAT  EQU   CVTDCB                                                   06667000
CVT4MPS  EQU   CVTDCB                                                   06668000
CVTRSV09 EQU   CVTDCB                                                   06669000
CVT4MS1  EQU   CVTDCB                                                   06670000
CVT2SPS  EQU   CVTDCB                                                   06671000
CVT1SSS  EQU   CVTDCB                                                   06672000
CVTRSV08 EQU   CVTDCB                                                   06673000
CVTSTB   EQU   CVTMAP+112                                               06674000
CVTCUCB  EQU   CVTMAP+100                                               06675000
CVTSJQ   EQU   CVTMAP+96                                                06676000
CVTPBLDL EQU   CVTMAP+92                                                06677000
CVTSVDCB EQU   CVTMAP+84                                                06678000
CVTBRET  EQU   CVTMAP+82                                                06679000
CVT0FN00 EQU   CVTMAP+76                                                06680000
CVTDARA  EQU   CVTDAR+1                                                 06681000
CVTRSV07 EQU   CVTFLGS1                                                 06682000
CVTRSV06 EQU   CVTFLGS1                                                 06683000
CVTRSV05 EQU   CVTFLGS1                                                 06684000
CVTRSV04 EQU   CVTFLGS1                                                 06685000
CVTRSV03 EQU   CVTFLGS1                                                 06686000
CVTRSV02 EQU   CVTFLGS1                                                 06687000
CVTRSV01 EQU   CVTFLGS1                                                 06688000
CVTDMPLK EQU   CVTFLGS1                                                 06689000
CVTXITP  EQU   CVTMAP+68                                                06690000
CVTZDTAB EQU   CVTMAP+64                                                06691000
CVTMSLT  EQU   CVTMAP+60                                                06692000
CVTBTERM EQU   CVTMAP+52                                                06693000
CVTSYSAD EQU   CVTMAP+48                                                06694000
CVTXTLER EQU   CVTMAP+44                                                06695000
CVTILK2  EQU   CVTMAP+40                                                06696000
CVTILK1  EQU   CVTMAP+36                                                06697000
CVTPRLTV EQU   CVTMAP+32                                                06698000
CVTPCNVT EQU   CVTMAP+28                                                06699000
CVT0VL00 EQU   CVTMAP+24                                                06700000
CVTXAPG  EQU   CVTMAP+20                                                06701000
CVTBUF   EQU   CVTMAP+16                                                06702000
CVTJOB   EQU   CVTMAP+12                                                06703000
CVTLINK  EQU   CVTMAP+8                                                 06704000
CVT0EF00 EQU   CVTMAP+4                                                 06705000
CVTTCBP  EQU   CVTMAP                                                   06706000
@NM00108 EQU   TQE+88                                                   06707000
TQESRB   EQU   TQE+44                                                   06708000
TQELHPSW EQU   TQE+40                                                   06709000
TQEASCB  EQU   TQE+36                                                   06710000
TQETCB   EQU   TQE+32                                                   06711000
TQESADDR EQU   TQE+24                                                   06712000
TQEMIDN  EQU   TQEFLGS2                                                 06713000
TQEMF1   EQU   TQEFLGS2                                                 06714000
TQEOPT   EQU   TQEFLGS2                                                 06715000
TQELM    EQU   TQEFLGS2                                                 06716000
TQEDUM   EQU   TQEFLGS2                                                 06717000
TQECRH   EQU   TQEFLGS2                                                 06718000
TQEUSER  EQU   TQEFLGS2                                                 06719000
TQETYPE  EQU   TQEFLGS                                                  06720000
TQEXITSP EQU   TQEFLGS                                                  06721000
TQEINCOM EQU   TQEFLGS                                                  06722000
TQEWLIM  EQU   TQEFLGS                                                  06723000
@NM00107 EQU   TQEFLGS                                                  06724000
TQETOD   EQU   TQEFLGS                                                  06725000
TQEOFF   EQU   TQEFLGS                                                  06726000
TQEAID   EQU   TQE+12                                                   06727000
TQEBLNK  EQU   TQE+8                                                    06728000
TQEFLNK  EQU   TQE+4                                                    06729000
TQETQE   EQU   TQE                                                      06730000
@NM00106 EQU   PCCA+512                                                 06731000
PCCACAT  EQU   PCCA+384                                                 06732000
PCCARV36 EQU   PCCA+380                                                 06733000
PCCARV35 EQU   PCCA+378                                                 06734000
PCCARV01 EQU   PCCA+377                                                 06735000
PCCACPUM EQU   PCCA+376                                                 06736000
PCCARV63 EQU   PCCA+372                                                 06737000
PCCARV62 EQU   PCCA+368                                                 06738000
PCCARV61 EQU   PCCA+364                                                 06739000
PCCARV60 EQU   PCCA+360                                                 06740000
PCCARV59 EQU   PCCA+356                                                 06741000
PCCARV58 EQU   PCCA+352                                                 06742000
PCCARV57 EQU   PCCA+348                                                 06743000
PCCARV56 EQU   PCCA+344                                                 06744000
PCCARV55 EQU   PCCA+340                                                 06745000
PCCARV54 EQU   PCCA+336                                                 06746000
PCCALOGA EQU   PCCA+332                                                 06747000
PCCACHID EQU   PCCA+324                                                 06748000
PCCACHSV EQU   PCCA+312                                                 06749000
PCCARV79 EQU   PCCACHF4                                                 06750000
PCCARV78 EQU   PCCACHF4                                                 06751000
PCCARV77 EQU   PCCACHF4                                                 06752000
PCCARV76 EQU   PCCACHF4                                                 06753000
PCCARV75 EQU   PCCACHF4                                                 06754000
PCCARV74 EQU   PCCACHF4                                                 06755000
PCCARV73 EQU   PCCACHF4                                                 06756000
PCCARV72 EQU   PCCACHF4                                                 06757000
PCCARV71 EQU   PCCACHF3                                                 06758000
PCCARV70 EQU   PCCACHF3                                                 06759000
PCCARV69 EQU   PCCACHF3                                                 06760000
PCCARV68 EQU   PCCACHF3                                                 06761000
PCCARV67 EQU   PCCACHF3                                                 06762000
PCCARV66 EQU   PCCACHF3                                                 06763000
PCCARV65 EQU   PCCACHF3                                                 06764000
PCCARV64 EQU   PCCACHF3                                                 06765000
PCCACF28 EQU   PCCACHF2                                                 06766000
PCCACF27 EQU   PCCACHF2                                                 06767000
PCCACF26 EQU   PCCACHF2                                                 06768000
PCCACF25 EQU   PCCACHF2                                                 06769000
PCCACF24 EQU   PCCACHF2                                                 06770000
PCCACF23 EQU   PCCACHF2                                                 06771000
PCCACF22 EQU   PCCACHF2                                                 06772000
PCCACF21 EQU   PCCACHF2                                                 06773000
PCCACF18 EQU   PCCACHF1                                                 06774000
PCCACF17 EQU   PCCACHF1                                                 06775000
PCCACF16 EQU   PCCACHF1                                                 06776000
PCCACF15 EQU   PCCACHF1                                                 06777000
PCCACF14 EQU   PCCACHF1                                                 06778000
PCCACF13 EQU   PCCACHF1                                                 06779000
PCCACF12 EQU   PCCACHF1                                                 06780000
PCCACF11 EQU   PCCACHF1                                                 06781000
PCCARV05 EQU   PCCA+306                                                 06782000
PCCACHPB EQU   PCCA+305                                                 06783000
PCCALGP2 EQU   PCCA+304                                                 06784000
PCCALGP1 EQU   PCCA+303                                                 06785000
PCCALOGL EQU   PCCA+302                                                 06786000
PCCARV80 EQU   PCCA+300                                                 06787000
PCCACHW2 EQU   PCCA+296                                                 06788000
PCCACHW1 EQU   PCCA+292                                                 06789000
PCCAIOSI EQU   PCCA+291                                                 06790000
PCCACNRB EQU   PCCACHRB                                                 06791000
PCCACCVB EQU   PCCACHRB                                                 06792000
PCCACSNB EQU   PCCACHRB                                                 06793000
PCCARV52 EQU   PCCACHRB                                                 06794000
PCCACHIB EQU   PCCACHRB                                                 06795000
PCCACTIB EQU   PCCACHRB                                                 06796000
PCCACINB EQU   PCCACHRB                                                 06797000
PCCACSIB EQU   PCCACHRB                                                 06798000
PCCARV51 EQU   PCCACHS2                                                 06799000
PCCARV50 EQU   PCCACHS2                                                 06800000
PCCACCRA EQU   PCCACHS2                                                 06801000
PCCACURC EQU   PCCACHS2                                                 06802000
PCCACNLG EQU   PCCACHS2                                                 06803000
PCCACMOD EQU   PCCACHS2                                                 06804000
PCCACALT EQU   PCCACHS2                                                 06805000
PCCACIOR EQU   PCCACHS2                                                 06806000
PCCARV47 EQU   PCCACHS1                                                 06807000
PCCACUCB EQU   PCCACHS1                                                 06808000
PCCACIBC EQU   PCCACHS1                                                 06809000
PCCACAND EQU   PCCACHS1                                                 06810000
PCCACNLS EQU   PCCACHS1                                                 06811000
PCCACFRR EQU   PCCACHS1                                                 06812000
PCCACNRE EQU   PCCACHS1                                                 06813000
PCCACCMP EQU   PCCACHS1                                                 06814000
PCCACSEQ EQU   PCCACHTS                                                 06815000
PCCACDIN EQU   PCCACHTS                                                 06816000
PCCARV44 EQU   PCCACHTS                                                 06817000
PCCARV43 EQU   PCCACHTS                                                 06818000
PCCACTEC EQU   PCCACHTS                                                 06819000
PCCACDAV EQU   PCCACHVA                                                 06820000
PCCACCHV EQU   PCCACHVA                                                 06821000
PCCACCMD EQU   PCCACHVA                                                 06822000
PCCACUNS EQU   PCCACHVA                                                 06823000
PCCACSQV EQU   PCCACHVA                                                 06824000
PCCARV42 EQU   PCCACHVA                                                 06825000
PCCARV41 EQU   PCCACHVA                                                 06826000
PCCACITF EQU   PCCACHVA                                                 06827000
PCCARV40 EQU   PCCACHBL                                                 06828000
PCCARV39 EQU   PCCACHBL                                                 06829000
PCCARV38 EQU   PCCACHBL                                                 06830000
PCCACCUE EQU   PCCACHBL                                                 06831000
PCCACSTG EQU   PCCACHBL                                                 06832000
PCCACSCU EQU   PCCACHBL                                                 06833000
PCCACCHA EQU   PCCACHBL                                                 06834000
PCCACCPU EQU   PCCACHBL                                                 06835000
PCCACNOR EQU   PCCACHPF                                                 06836000
PCCACCNT EQU   PCCACHPF                                                 06837000
PCCACSNS EQU   PCCACHPF                                                 06838000
PCCARV37 EQU   PCCACHPF                                                 06839000
PCCACHIO EQU   PCCACHPF                                                 06840000
PCCACTIO EQU   PCCACHPF                                                 06841000
PCCACINT EQU   PCCACHPF                                                 06842000
PCCACSIO EQU   PCCACHPF                                                 06843000
PCCACHUB EQU   PCCAWERP                                                 06844000
PCCACHEL EQU   PCCA+168                                                 06845000
PCCALRBR EQU   PCCA+164                                                 06846000
PCCALRBV EQU   PCCA+160                                                 06847000
PCCAPWAR EQU   PCCA+156                                                 06848000
PCCAPWAV EQU   PCCA+152                                                 06849000
PCCAEMSA EQU   PCCAEMSB+12                                              06850000
PCCAEMSE EQU   PCCAEMSB+8                                               06851000
PCCAEMSP EQU   PCCAEMSB+4                                               06852000
PCCARMS  EQU   PCCARMSB                                                 06853000
PCCARV34 EQU   PCCARMSB                                                 06854000
PCCARV33 EQU   PCCARMSB                                                 06855000
PCCARV32 EQU   PCCARMSB                                                 06856000
PCCARV31 EQU   PCCARMSB                                                 06857000
PCCARV30 EQU   PCCARMSB                                                 06858000
PCCARV29 EQU   PCCARMSB                                                 06859000
PCCARV28 EQU   PCCARMSB                                                 06860000
PCCARV27 EQU   PCCAEMS3                                                 06861000
PCCARV26 EQU   PCCAEMS3                                                 06862000
PCCARV25 EQU   PCCAEMS3                                                 06863000
PCCARV24 EQU   PCCAEMS3                                                 06864000
PCCARV23 EQU   PCCAEMS3                                                 06865000
PCCARV22 EQU   PCCAEMS3                                                 06866000
PCCARV21 EQU   PCCAEMS3                                                 06867000
PCCARV20 EQU   PCCAEMS3                                                 06868000
PCCARV19 EQU   PCCAEMS2                                                 06869000
PCCARV18 EQU   PCCAEMS2                                                 06870000
PCCARV17 EQU   PCCAEMS2                                                 06871000
PCCARV16 EQU   PCCAEMS2                                                 06872000
PCCARV15 EQU   PCCAEMS2                                                 06873000
PCCARV14 EQU   PCCAEMS2                                                 06874000
PCCARV13 EQU   PCCAEMS2                                                 06875000
PCCARV12 EQU   PCCAEMS2                                                 06876000
PCCARV11 EQU   PCCARISP                                                 06877000
PCCARV10 EQU   PCCARISP                                                 06878000
PCCARV09 EQU   PCCARISP                                                 06879000
PCCARV08 EQU   PCCARISP                                                 06880000
PCCARV07 EQU   PCCARISP                                                 06881000
PCCARV06 EQU   PCCARISP                                                 06882000
PCCASERL EQU   PCCARISP                                                 06883000
PCCAPARL EQU   PCCARISP                                                 06884000
PCCARPB  EQU   PCCA+132                                                 06885000
PCCACTIN EQU   PCCAINTE                                                 06886000
PCCACTCC EQU   PCCACCE                                                  06887000
PCCACTTD EQU   PCCATODE                                                 06888000
PCCARV04 EQU   PCCATMFL                                                 06889000
PCCARV03 EQU   PCCATMFL                                                 06890000
PCCARV02 EQU   PCCATMFL                                                 06891000
PCCAINIT EQU   PCCATMFL                                                 06892000
PCCARV9E EQU   PCCA+124                                                 06893000
PCCARV9D EQU   PCCA+120                                                 06894000
PCCARV9C EQU   PCCA+116                                                 06895000
PCCARV9B EQU   PCCA+112                                                 06896000
PCCARV9A EQU   PCCA+108                                                 06897000
PCCARV99 EQU   PCCA+104                                                 06898000
PCCARV98 EQU   PCCA+100                                                 06899000
PCCARV97 EQU   PCCA+96                                                  06900000
PCCARV96 EQU   PCCA+92                                                  06901000
PCCARV95 EQU   PCCA+88                                                  06902000
PCCARV94 EQU   PCCA+84                                                  06903000
PCCARV93 EQU   PCCA+80                                                  06904000
PCCARV92 EQU   PCCA+76                                                  06905000
PCCARV91 EQU   PCCA+72                                                  06906000
PCCARV90 EQU   PCCA+68                                                  06907000
PCCARV89 EQU   PCCA+64                                                  06908000
PCCARV88 EQU   PCCA+60                                                  06909000
PCCARV87 EQU   PCCA+56                                                  06910000
PCCARV86 EQU   PCCA+52                                                  06911000
PCCARV85 EQU   PCCA+48                                                  06912000
PCCARV84 EQU   PCCA+44                                                  06913000
PCCARV83 EQU   PCCA+40                                                  06914000
PCCARV82 EQU   PCCA+36                                                  06915000
PCCARV81 EQU   PCCA+32                                                  06916000
PCCAPSAR EQU   PCCA+28                                                  06917000
PCCACAFM EQU   PCCA+18                                                  06918000
PCCACPID EQU   PCCA+4                                                   06919000
PCCAPCCA EQU   PCCA                                                     06920000
@NM00105 EQU   CSD+160                                                  06921000
CSDMASK  EQU   CSD+128                                                  06922000
CSDUCNT  EQU   CSD+124                                                  06923000
CSDTCNT  EQU   CSD+120                                                  06924000
CSDDDRCT EQU   CSD+106                                                  06925000
CSDRV044 EQU   CSD+104                                                  06926000
CSDMAFF  EQU   CSD+24                                                   06927000
CSDRV038 EQU   CSDFLAGS                                                 06928000
CSDRV037 EQU   CSDFLAGS                                                 06929000
CSDRV036 EQU   CSDFLAGS                                                 06930000
CSDRV035 EQU   CSDFLAGS                                                 06931000
CSDRV034 EQU   CSDFLAGS                                                 06932000
CSDRV033 EQU   CSDFLAGS                                                 06933000
CSDRV032 EQU   CSDFLAGS                                                 06934000
CSDACR   EQU   CSD+22                                                   06935000
CSDMF1CP EQU   CSD+20                                                   06936000
CSDRV043 EQU   CSD+16                                                   06937000
CSDRV030 EQU   CSDSCFL4                                                 06938000
CSDRV029 EQU   CSDSCFL4                                                 06939000
CSDRV028 EQU   CSDSCFL4                                                 06940000
CSDRV027 EQU   CSDSCFL4                                                 06941000
CSDRV026 EQU   CSDSCFL4                                                 06942000
CSDRV025 EQU   CSDSCFL4                                                 06943000
CSDRV024 EQU   CSDSCFL4                                                 06944000
CSDRV023 EQU   CSDSCFL4                                                 06945000
CSDRV022 EQU   CSDSCFL3                                                 06946000
CSDRV021 EQU   CSDSCFL3                                                 06947000
CSDRV020 EQU   CSDSCFL3                                                 06948000
CSDRV019 EQU   CSDSCFL3                                                 06949000
CSDRV018 EQU   CSDSCFL3                                                 06950000
CSDRV017 EQU   CSDSCFL3                                                 06951000
CSDRV016 EQU   CSDSCFL3                                                 06952000
CSDRV015 EQU   CSDSCFL3                                                 06953000
CSDRV014 EQU   CSDSCFL2                                                 06954000
CSDRV013 EQU   CSDSCFL2                                                 06955000
CSDRV012 EQU   CSDSCFL2                                                 06956000
CSDRV011 EQU   CSDSCFL2                                                 06957000
CSDRV010 EQU   CSDSCFL2                                                 06958000
CSDRV009 EQU   CSDSCFL2                                                 06959000
CSDRV008 EQU   CSDSCFL2                                                 06960000
CSDRV007 EQU   CSDSCFL2                                                 06961000
CSDRV006 EQU   CSDSCFL1                                                 06962000
CSDRV005 EQU   CSDSCFL1                                                 06963000
CSDRV004 EQU   CSDSCFL1                                                 06964000
CSDRV003 EQU   CSDSCFL1                                                 06965000
CSDRV002 EQU   CSDSCFL1                                                 06966000
CSDRV001 EQU   CSDSCFL1                                                 06967000
CSDSYSND EQU   CSDSCFL1                                                 06968000
CSDRV042 EQU   CSDSCFL1                                                 06969000
CSDSAFF  EQU   CSDCPUAL                                                 06970000
CSDCHAD  EQU   CSD+6                                                    06971000
CSDCPUJS EQU   CSD+4                                                    06972000
CSDCSD   EQU   CSD                                                      06973000
ASCBEND  EQU   ASCB+208                                                 06974000
ASCBSRBT EQU   ASCB+200                                                 06975000
ASCBSWTL EQU   ASCB+196                                                 06976000
ASCBRS14 EQU   ASCB+195                                                 06977000
ASCBSMCT EQU   ASCB+194                                                 06978000
ASCBRS12 EQU   ASCB+192                                                 06979000
ASCBPCTT EQU   ASCB+188                                                 06980000
ASCBVGTT EQU   ASCB+184                                                 06981000
ASCBLGCB EQU   ASCB+180                                                 06982000
ASCBJBNS EQU   ASCB+176                                                 06983000
ASCBJBNI EQU   ASCB+172                                                 06984000
ASCBMCC  EQU   ASCB+168                                                 06985000
ASCBRTWA EQU   ASCB+164                                                 06986000
ASCBIQEA EQU   ASCB+160                                                 06987000
ASCBXMPQ EQU   ASCB+156                                                 06988000
ASCBRS01 EQU   ASCB+154                                                 06989000
ASCBFMCT EQU   ASCB+152                                                 06990000
ASCBOUXB EQU   ASCB+148                                                 06991000
ASCBOUCB EQU   ASCB+144                                                 06992000
ASCBMECB EQU   ASCB+140                                                 06993000
ASCBQECB EQU   ASCB+136                                                 06994000
ASCBCMSB EQU   ASCB+132                                                 06995000
ASCBCMSF EQU   ASCB+128                                                 06996000
ASCBTCBS EQU   ASCB+124                                                 06997000
ASCBNVSC EQU   ASCB+122                                                 06998000
ASCBVSC  EQU   ASCB+120                                                 06999000
ASCBSRBS EQU   ASCB+118                                                 07000000
ASCBSSRB EQU   ASCB+116                                                 07001000
ASCBRV06 EQU   ASCBFLG2                                                 07002000
ASCBRV05 EQU   ASCBFLG2                                                 07003000
ASCBRV04 EQU   ASCBFLG2                                                 07004000
ASCBSNQS EQU   ASCBFLG2                                                 07005000
ASCBS2S  EQU   ASCBFLG2                                                 07006000
ASCBCEXT EQU   ASCBFLG2                                                 07007000
ASCBPXMT EQU   ASCBFLG2                                                 07008000
ASCBXMPT EQU   ASCBFLG2                                                 07009000
ASCBRF07 EQU   ASCBDSP1                                                 07010000
ASCBRF06 EQU   ASCBDSP1                                                 07011000
ASCBRF05 EQU   ASCBDSP1                                                 07012000
ASCBRF04 EQU   ASCBDSP1                                                 07013000
ASCBRF03 EQU   ASCBDSP1                                                 07014000
ASCBRF02 EQU   ASCBDSP1                                                 07015000
ASCBFAIL EQU   ASCBDSP1                                                 07016000
ASCBNOQ  EQU   ASCBDSP1                                                 07017000
ASCBSWCT EQU   ASCB+112                                                 07018000
ASCBASXB EQU   ASCB+108                                                 07019000
ASCBTMCH EQU   ASCB+104                                                 07020000
ASCBNSWP EQU   ASCBFLG1                                                 07021000
ASCBTYP1 EQU   ASCBFLG1                                                 07022000
ASCBSTND EQU   ASCBFLG1                                                 07023000
ASCBABNT EQU   ASCBFLG1                                                 07024000
ASCBTERM EQU   ASCBFLG1                                                 07025000
ASCBS3S  EQU   ASCBFLG1                                                 07026000
ASCBCMSH EQU   ASCBFLG1                                                 07027000
ASCBTOFF EQU   ASCBFLG1                                                 07028000
ASCBRF01 EQU   ASCBRCTF                                                 07029000
ASCBTMLW EQU   ASCBRCTF                                                 07030000
ASCBOUT  EQU   ASCBRCTF                                                 07031000
ASCBWAIT EQU   ASCBRCTF                                                 07032000
ASCBRV08 EQU   ASCBRCTF                                                 07033000
ASCBFQU  EQU   ASCBRCTF                                                 07034000
ASCBFRS  EQU   ASCBRCTF                                                 07035000
ASCBTMNO EQU   ASCBRCTF                                                 07036000
ASCBAFFN EQU   ASCBFW1                                                  07037000
ASCBDUMP EQU   ASCB+96                                                  07038000
ASCBQSVC EQU   ASCB+92                                                  07039000
ASCBUBET EQU   ASCB+88                                                  07040000
ASCBECB  EQU   ASCB+84                                                  07041000
ASCBJSTL EQU   ASCB+80                                                  07042000
ASCBEWST EQU   ASCB+72                                                  07043000
ASCBTSB  EQU   ASCB+60                                                  07044000
ASCBCSCB EQU   ASCB+56                                                  07045000
ASCBRSM  EQU   ASCB+52                                                  07046000
ASCBLDA  EQU   ASCB+48                                                  07047000
ASCBSTOR EQU   ASCB+44                                                  07048000
ASCBDP   EQU   ASCB+43                                                  07049000
ASCBRV07 EQU   ASCB+42                                                  07050000
ASCBIOSM EQU   ASCB+40                                                  07051000
ASCBSEQN EQU   ASCB+38                                                  07052000
ASCBASID EQU   ASCB+36                                                  07053000
ASCBCPUS EQU   ASCB+32                                                  07054000
ASCBSPL  EQU   ASCB+28                                                  07055000
ASCBLSLQ EQU   ASCB+24                                                  07056000
ASCBFSLQ EQU   ASCB+20                                                  07057000
ASCBIOSP EQU   ASCB+16                                                  07058000
ASCBLOCK EQU   ASCB+12                                                  07059000
ASCBBWDP EQU   ASCB+8                                                   07060000
ASCBFWDP EQU   ASCB+4                                                   07061000
ASCBASCB EQU   ASCB                                                     07062000
ASCBEGIN EQU   ASCB                                                     07063000
@NM00104 EQU   SRB+40                                                   07064000
@NM00103 EQU   SRB+38                                                   07065000
SRBPRIOR EQU   SRB+37                                                   07066000
SRBPKF   EQU   SRB+36                                                   07067000
SRBSAVE  EQU   SRB+32                                                   07068000
SRBRMTR  EQU   SRB+24                                                   07069000
SRBEP    EQU   SRB+20                                                   07070000
SRBPTCB  EQU   SRBFLC+4                                                 07071000
SRBPASID EQU   SRBFLC+2                                                 07072000
SRBCPAFF EQU   SRBFLC                                                   07073000
SRBASCB  EQU   SRB+8                                                    07074000
SRBFLNK  EQU   SRB+4                                                    07075000
SRBID    EQU   SRB                                                      07076000
@NM00102 EQU   PSA+3668                                                 07077000
PSASTAK  EQU   PSA+3072                                                 07078000
@NM00101 EQU   PSA+1048                                                 07079000
PSAUSEND EQU   PSA+1048                                                 07080000
PSARV062 EQU   PSA+1044                                                 07081000
PSACDAL  EQU   PSA+1040                                                 07082000
PSAWTCOD EQU   PSA+1036                                                 07083000
PSAATCVT EQU   PSA+1032                                                 07084000
PSAPCPSW EQU   PSA+1024                                                 07085000
PSAPIR2  EQU   PSA+1020                                                 07086000
PSARV059 EQU   PSA+1018                                                 07087000
PSASVC13 EQU   PSA+1016                                                 07088000
PSALSFCC EQU   PSA+1012                                                 07089000
PSASFACC EQU   PSA+1008                                                 07090000
PSASTOP  EQU   PSA+992                                                  07091000
PSASTART EQU   PSA+976                                                  07092000
PSARSPSW EQU   PSA+968                                                  07093000
PSASRPSW EQU   PSA+960                                                  07094000
PSARV045 EQU   PSA+892                                                  07095000
PSARV044 EQU   PSA+888                                                  07096000
PSARV043 EQU   PSA+884                                                  07097000
PSARV042 EQU   PSA+880                                                  07098000
PSARV041 EQU   PSA+876                                                  07099000
PSARV040 EQU   PSA+872                                                  07100000
PSARV025 EQU   PSA+868                                                  07101000
PSADSSED EQU   PSA+868                                                  07102000
PSADSSPR EQU   PSA+864                                                  07103000
PSADSSFW EQU   PSA+860                                                  07104000
PSADSS14 EQU   PSA+856                                                  07105000
PSADSSPP EQU   PSA+848                                                  07106000
PSADSSRP EQU   PSA+840                                                  07107000
PSADSS05 EQU   PSADSSF4                                                 07108000
PSADSS10 EQU   PSADSSF4                                                 07109000
PSADSSVE EQU   PSADSSF4                                                 07110000
PSADSSDE EQU   PSADSSF4                                                 07111000
PSADSSC0 EQU   PSADSSF4                                                 07112000
PSADSSIE EQU   PSADSSF4                                                 07113000
PSADSS12 EQU   PSADSSF4                                                 07114000
PSADSSRC EQU   PSADSSF4                                                 07115000
PSARV057 EQU   PSADSSF3                                                 07116000
PSARV056 EQU   PSADSSF3                                                 07117000
PSARV055 EQU   PSADSSF3                                                 07118000
PSADSSMC EQU   PSADSSF3                                                 07119000
PSADSSRW EQU   PSADSSF3                                                 07120000
PSADSSNM EQU   PSADSSF3                                                 07121000
PSADSSES EQU   PSADSSF3                                                 07122000
PSADSSGP EQU   PSADSSF3                                                 07123000
PSADSSF2 EQU   PSADSSFL+1                                               07124000
PSADSSPI EQU   PSADSSF1                                                 07125000
PSADSSOI EQU   PSADSSF1                                                 07126000
PSADSSSP EQU   PSADSSF1                                                 07127000
PSADSSTP EQU   PSADSSF1                                                 07128000
PSADSSDW EQU   PSADSSF1                                                 07129000
PSADSSDD EQU   PSADSSF1                                                 07130000
PSADSSDM EQU   PSADSSF1                                                 07131000
PSADSSMV EQU   PSADSSF1                                                 07132000
PSADSSTS EQU   PSA+816                                                  07133000
PSADSSWK EQU   PSA+812                                                  07134000
PSADSSR3 EQU   PSA+808                                                  07135000
PSADSSR2 EQU   PSA+804                                                  07136000
PSADSSRS EQU   PSA+800                                                  07137000
PSASTOR  EQU   PSA+796                                                  07138000
PSACPUSA EQU   PSA+794                                                  07139000
PSAVSTAP EQU   PSA+792                                                  07140000
PSAWKVAP EQU   PSA+788                                                  07141000
PSAWKRAP EQU   PSA+784                                                  07142000
PSAMCHIC EQU   PSA+783                                                  07143000
PSARV061 EQU   PSA+782                                                  07144000
PSASYMSK EQU   PSA+781                                                  07145000
PSAMCHFL EQU   PSA+780                                                  07146000
PSACR0   EQU   PSA+776                                                  07147000
PSAPSWSV EQU   PSA+768                                                  07148000
PSACLHS  EQU   PSAHLHI                                                  07149000
PSALKR15 EQU   PSALKSA+60                                               07150000
PSALKR14 EQU   PSALKSA+56                                               07151000
PSALKR13 EQU   PSALKSA+52                                               07152000
PSALKR12 EQU   PSALKSA+48                                               07153000
PSALKR11 EQU   PSALKSA+44                                               07154000
PSALKR10 EQU   PSALKSA+40                                               07155000
PSALKR9  EQU   PSALKSA+36                                               07156000
PSALKR8  EQU   PSALKSA+32                                               07157000
PSALKR7  EQU   PSALKSA+28                                               07158000
PSALKR6  EQU   PSALKSA+24                                               07159000
PSALKR5  EQU   PSALKSA+20                                               07160000
PSALKR4  EQU   PSALKSA+16                                               07161000
PSALKR3  EQU   PSALKSA+12                                               07162000
PSALKR2  EQU   PSALKSA+8                                                07163000
PSALKR1  EQU   PSALKSA+4                                                07164000
PSALKR0  EQU   PSALKSA                                                  07165000
PSARV023 EQU   PSACLHT+52                                               07166000
PSALOCAL EQU   PSACLHT+48                                               07167000
PSACMSL  EQU   PSACLHT+44                                               07168000
PSAOPTL  EQU   PSACLHT+40                                               07169000
PSATPACL EQU   PSACLHT+36                                               07170000
PSATPDNL EQU   PSACLHT+32                                               07171000
PSATPNCL EQU   PSACLHT+28                                               07172000
PSAIOSLL EQU   PSACLHT+24                                               07173000
PSAIOSUL EQU   PSACLHT+20                                               07174000
PSAIOSCL EQU   PSACLHT+16                                               07175000
PSAIOSSL EQU   PSACLHT+12                                               07176000
PSASALCL EQU   PSACLHT+8                                                07177000
PSAASML  EQU   PSACLHT+4                                                07178000
PSADISPL EQU   PSACLHT                                                  07179000
PSASRSA  EQU   PSA+636                                                  07180000
PSARV050 EQU   PSA+634                                                  07181000
PSADSSGO EQU   PSA+633                                                  07182000
PSARECUR EQU   PSA+632                                                  07183000
PSAHLHIS EQU   PSA+628                                                  07184000
PSAIPCSA EQU   PSA+624                                                  07185000
@NM00100 EQU   PSA+621                                                  07186000
PSAIPCDM EQU   PSA+620                                                  07187000
PSAIPCD  EQU   PSA+616                                                  07188000
@NM00099 EQU   PSA+613                                                  07189000
PSAIPCRM EQU   PSA+612                                                  07190000
PSAIPCR  EQU   PSA+608                                                  07191000
PSAMCHEX EQU   PSA+600                                                  07192000
PSAMPSW  EQU   PSA+592                                                  07193000
PSAEXPS2 EQU   PSA+584                                                  07194000
PSAEXPS1 EQU   PSA+576                                                  07195000
PSAPIREG EQU   PSA+572                                                  07196000
PSARSREG EQU   PSA+568                                                  07197000
PSAGPREG EQU   PSA+556                                                  07198000
PSARV022 EQU   PSASUP4                                                  07199000
PSARV021 EQU   PSASUP4                                                  07200000
PSARV020 EQU   PSASUP4                                                  07201000
PSARV019 EQU   PSASUP4                                                  07202000
PSARV018 EQU   PSASUP4                                                  07203000
PSARV017 EQU   PSASUP4                                                  07204000
PSARV016 EQU   PSASUP4                                                  07205000
PSARV015 EQU   PSASUP4                                                  07206000
PSARV014 EQU   PSASUP3                                                  07207000
PSAULCMS EQU   PSASUP3                                                  07208000
PSARV012 EQU   PSASUP3                                                  07209000
PSAESTA  EQU   PSASUP3                                                  07210000
PSASPR   EQU   PSASUP3                                                  07211000
PSAPSREG EQU   PSASUP3                                                  07212000
PSAPI2   EQU   PSASUP3                                                  07213000
PSAIOSUP EQU   PSASUP3                                                  07214000
PSALCR   EQU   PSASUP2                                                  07215000
PSARTM   EQU   PSASUP2                                                  07216000
PSAACR   EQU   PSASUP2                                                  07217000
PSAIPCE2 EQU   PSASUP2                                                  07218000
PSAIPCES EQU   PSASUP2                                                  07219000
PSAIPCEC EQU   PSASUP2                                                  07220000
PSAGTF   EQU   PSASUP2                                                  07221000
PSAIPCRI EQU   PSASUP2                                                  07222000
PSATYPE6 EQU   PSASUP1                                                  07223000
PSATCTL  EQU   PSASUP1                                                  07224000
PSADISP  EQU   PSASUP1                                                  07225000
PSALOCK  EQU   PSASUP1                                                  07226000
PSAPI    EQU   PSASUP1                                                  07227000
PSAEXT   EQU   PSASUP1                                                  07228000
PSASVC   EQU   PSASUP1                                                  07229000
PSAIO    EQU   PSASUP1                                                  07230000
PSAAOLD  EQU   PSA+548                                                  07231000
PSAANEW  EQU   PSA+544                                                  07232000
PSATOLD  EQU   PSA+540                                                  07233000
PSATNEW  EQU   PSA+536                                                  07234000
PSALCCAR EQU   PSA+532                                                  07235000
PSAPCCAR EQU   PSA+524                                                  07236000
PSAPCCAV EQU   PSA+520                                                  07237000
PSACPULA EQU   PSA+518                                                  07238000
PSACPUPA EQU   PSA+516                                                  07239000
PSAPSA   EQU   PSA+512                                                  07240000
FLCHDEND EQU   PSA+512                                                  07241000
FLCCRSAV EQU   FLCMCLA+280                                              07242000
FLCGRSAV EQU   FLCMCLA+216                                              07243000
FLCFPSAV EQU   FLCMCLA+184                                              07244000
FLCFLA   EQU   FLCMCLA+88                                               07245000
FLCRGNCD EQU   FLCMCLA+84                                               07246000
FLCFSAA  EQU   FLCFSA+1                                                 07247000
@NM00098 EQU   FLCFSA                                                   07248000
@NM00097 EQU   FLCMCLA+72                                               07249000
FLCMCIC  EQU   FLCMCLA+64                                               07250000
@NM00096 EQU   FLCMCLA+20                                               07251000
FLCIOAA  EQU   FLCIOA+1                                                 07252000
@NM00095 EQU   FLCIOA                                                   07253000
@NM00094 EQU   FLCMCLA+15                                               07254000
@NM00093 EQU   FLCMCLA+14                                               07255000
@NM00092 EQU   FLCMCLA+12                                               07256000
FLCLCL   EQU   FLCMCLA+8                                                07257000
FLCIOELA EQU   FLCIOEL+1                                                07258000
@NM00091 EQU   FLCIOEL                                                  07259000
FLCCHNID EQU   FLCMCLA                                                  07260000
@NM00090 EQU   PSA+160                                                  07261000
FLCMTRCD EQU   PSA+157                                                  07262000
@NM00089 EQU   PSA+156                                                  07263000
FLCPERA  EQU   FLCPER+1                                                 07264000
@NM00088 EQU   FLCPER                                                   07265000
@NM00087 EQU   PSA+151                                                  07266000
FLCPERCD EQU   PSA+150                                                  07267000
FLCMCNUM EQU   PSA+149                                                  07268000
@NM00086 EQU   PSA+148                                                  07269000
FLCTEAA  EQU   FLCTEA+1                                                 07270000
@NM00085 EQU   FLCTEA                                                   07271000
PSAPIPC  EQU   PSAPICOD                                                 07272000
PSAPIMC  EQU   PSAPICOD                                                 07273000
PSAPIPER EQU   PSAPICOD                                                 07274000
PSARV049 EQU   FLCPICOD                                                 07275000
FLCPILCB EQU   FLCPIILC                                                 07276000
@NM00084 EQU   FLCPIILC                                                 07277000
@NM00083 EQU   PSAEPPSW                                                 07278000
FLCSVCN  EQU   PSAESPSW+2                                               07279000
FLCSILCB EQU   FLCSVILC                                                 07280000
@NM00082 EQU   FLCSVILC                                                 07281000
@NM00081 EQU   PSAESPSW                                                 07282000
FLCEICOD EQU   PSAEEPSW+2                                               07283000
PSASPAD  EQU   PSAEEPSW                                                 07284000
@NM00080 EQU   PSA+128                                                  07285000
FLCINPSW EQU   PSA+120                                                  07286000
FLCMNPSW EQU   PSA+112                                                  07287000
FLCPNPSW EQU   PSA+104                                                  07288000
FLCSNPSW EQU   PSA+96                                                   07289000
FLCENPSW EQU   PSA+88                                                   07290000
FLCTRACE EQU   PSA+84                                                   07291000
FLCTIMER EQU   PSA+80                                                   07292000
FLCCVT2  EQU   PSA+76                                                   07293000
FLCCAW   EQU   PSA+72                                                   07294000
FLCCSW   EQU   PSA+64                                                   07295000
FLCIOPSW EQU   PSA+56                                                   07296000
FLCMOPSW EQU   PSA+48                                                   07297000
FLCPOPSW EQU   PSA+40                                                   07298000
FLCSOPSW EQU   PSA+32                                                   07299000
FLCEOPSW EQU   PSA+24                                                   07300000
@NM00079 EQU   FLCICCW2+4                                               07301000
FLCCVT   EQU   FLCICCW2                                                 07302000
FLCICCW1 EQU   FLCROPSW                                                 07303000
FLCIPPSW EQU   FLCRNPSW                                                 07304000
ASVTEND  EQU   ASVT+528                                                 07305000
ASVTAVAI EQU   ASVTFRST                                                 07306000
ASVTRS00 EQU   ASVT+520                                                 07307000
ASVTASVT EQU   ASVT+512                                                 07308000
ASVTBEGN EQU   ASVT+512                                                 07309000
@NM00078 EQU   ASVT                                                     07310000
LCCAR125 EQU   LCCA+964                                                 07311000
LCCAR124 EQU   LCCA+960                                                 07312000
LCCASGPR EQU   LCCA+896                                                 07313000
LCCADRT2 EQU   LCCA+888                                                 07314000
LCCADRT1 EQU   LCCA+880                                                 07315000
LCCAR103 EQU   LCCA+876                                                 07316000
LCCAESS2 EQU   LCCA+872                                                 07317000
LCCASPLJ EQU   LCCA+868                                                 07318000
LCCASMQJ EQU   LCCA+864                                                 07319000
LCCAIRT  EQU   LCCA+736                                                 07320000
LCCAASID EQU   LCCA+732                                                 07321000
LCCARV89 EQU   LCCA+728                                                 07322000
LCCAPGTA EQU   LCCASRBF+2                                               07323000
LCCASAFN EQU   LCCASRBF                                                 07324000
LCCAECSA EQU   LCCA+716                                                 07325000
LCCAICR0 EQU   LCCA+712                                                 07326000
LCCALWTM EQU   LCCA+704                                                 07327000
LCCARV78 EQU   LCCA+700                                                 07328000
LCCAPINV EQU   LCCA+696                                                 07329000
LCCARV88 EQU   LCCA+695                                                 07330000
LCCARV87 EQU   LCCALKFG                                                 07331000
LCCARV86 EQU   LCCALKFG                                                 07332000
LCCARV85 EQU   LCCALKFG                                                 07333000
LCCARV84 EQU   LCCALKFG                                                 07334000
LCCALKRD EQU   LCCALKFG                                                 07335000
LCCALKAQ EQU   LCCALKFG                                                 07336000
LCCALKSA EQU   LCCALKFG                                                 07337000
LCCALKDP EQU   LCCALKFG                                                 07338000
LCCACRST EQU   LCCACREX                                                 07339000
LCCACRDP EQU   LCCACREX                                                 07340000
LCCACRLM EQU   LCCACREX                                                 07341000
LCCACRIN EQU   LCCACREX                                                 07342000
LCCACRRT EQU   LCCACREX                                                 07343000
LCCACRLE EQU   LCCACREX                                                 07344000
LCCACRRM EQU   LCCACREX                                                 07345000
LCCACREF EQU   LCCACREX                                                 07346000
LCCAVARY EQU   LCCACRFL                                                 07347000
LCCARV73 EQU   LCCACRFL                                                 07348000
LCCARV72 EQU   LCCACRFL                                                 07349000
LCCARV71 EQU   LCCACRFL                                                 07350000
LCCARV70 EQU   LCCACRFL                                                 07351000
LCCARV69 EQU   LCCACRFL                                                 07352000
LCCACLMS EQU   LCCACRFL                                                 07353000
LCCACRTM EQU   LCCACRFL                                                 07354000
LCCALCR0 EQU   LCCA+688                                                 07355000
LCCACRLC EQU   LCCA+684                                                 07356000
LCCARCPU EQU   LCCA+680                                                 07357000
LCCADCPU EQU   LCCA+676                                                 07358000
LCCASRBJ EQU   LCCA+672                                                 07359000
LCCADSSR EQU   LCCA+668                                                 07360000
LCCADSSC EQU   LCCA+660                                                 07361000
LCCADSS3 EQU   LCCA+648                                                 07362000
LCCADSS2 EQU   LCCA+636                                                 07363000
LCCADSS1 EQU   LCCA+624                                                 07364000
LCCAITOD EQU   LCCA+608                                                 07365000
LCCASTOD EQU   LCCA+592                                                 07366000
LCCARIR5 EQU   LCCASPSA+44                                              07367000
LCCARIR4 EQU   LCCASPSA+40                                              07368000
LCCARIR3 EQU   LCCASPSA+36                                              07369000
LCCARIR2 EQU   LCCASPSA+32                                              07370000
LCCARPR5 EQU   LCCASPSA+28                                              07371000
LCCARPR4 EQU   LCCASPSA+24                                              07372000
LCCARPR3 EQU   LCCASPSA+20                                              07373000
LCCARPR2 EQU   LCCASPSA+16                                              07374000
LCCADSR5 EQU   LCCASPSA+12                                              07375000
LCCADSR4 EQU   LCCASPSA+8                                               07376000
LCCADSR3 EQU   LCCASPSA+4                                               07377000
LCCADSR2 EQU   LCCASPSA                                                 07378000
LCCARV68 EQU   LCCA+543                                                 07379000
LCCAPSMK EQU   LCCA+542                                                 07380000
LCCARV67 EQU   LCCADSF2                                                 07381000
LCCARV66 EQU   LCCADSF2                                                 07382000
LCCARV65 EQU   LCCADSF2                                                 07383000
LCCARV64 EQU   LCCADSF2                                                 07384000
LCCADSRW EQU   LCCADSF2                                                 07385000
LCCADSPL EQU   LCCADSF2                                                 07386000
LCCAGSRB EQU   LCCADSF2                                                 07387000
LCCASRBM EQU   LCCADSF2                                                 07388000
LCCARV61 EQU   LCCADSF1                                                 07389000
LCCARV60 EQU   LCCADSF1                                                 07390000
LCCARV59 EQU   LCCADSF1                                                 07391000
LCCARV58 EQU   LCCADSF1                                                 07392000
LCCADSS  EQU   LCCADSF1                                                 07393000
LCCAVCPU EQU   LCCADSF1                                                 07394000
LCCAACR  EQU   LCCADSF1                                                 07395000
LCCACPUS EQU   LCCA+536                                                 07396000
LCCAASCP EQU   LCCA+532                                                 07397000
LCCAESSA EQU   LCCA+528                                                 07398000
LCCARV55 EQU   LCCASPN4                                                 07399000
LCCARV54 EQU   LCCASPN4                                                 07400000
LCCARV53 EQU   LCCASPN4                                                 07401000
LCCARV52 EQU   LCCASPN4                                                 07402000
LCCARV51 EQU   LCCASPN4                                                 07403000
LCCARV50 EQU   LCCASPN4                                                 07404000
LCCARV49 EQU   LCCASPN4                                                 07405000
LCCARV48 EQU   LCCASPN4                                                 07406000
LCCARV47 EQU   LCCASPN3                                                 07407000
LCCARV46 EQU   LCCASPN3                                                 07408000
LCCARV45 EQU   LCCASPN3                                                 07409000
LCCARV44 EQU   LCCASPN3                                                 07410000
LCCARV43 EQU   LCCASPN3                                                 07411000
LCCARV42 EQU   LCCASPN3                                                 07412000
LCCARV41 EQU   LCCASPN3                                                 07413000
LCCARV40 EQU   LCCASPN3                                                 07414000
LCCARV39 EQU   LCCASPN2                                                 07415000
LCCARV38 EQU   LCCASPN2                                                 07416000
LCCARV37 EQU   LCCASPN2                                                 07417000
LCCARV36 EQU   LCCASPN2                                                 07418000
LCCARV35 EQU   LCCASPN2                                                 07419000
LCCARV34 EQU   LCCASPN2                                                 07420000
LCCARV33 EQU   LCCASPN2                                                 07421000
LCCARV32 EQU   LCCASPN2                                                 07422000
LCCARV31 EQU   LCCASPN1                                                 07423000
LCCARV30 EQU   LCCASPN1                                                 07424000
LCCAMFIO EQU   LCCASPN1                                                 07425000
LCCARSTR EQU   LCCASPN1                                                 07426000
LCCATSPN EQU   LCCASPN1                                                 07427000
LCCALOCK EQU   LCCASPN1                                                 07428000
LCCASIGP EQU   LCCASPN1                                                 07429000
LCCAPTLB EQU   LCCASPN1                                                 07430000
LCCARV27 EQU   LCCAIHR4                                                 07431000
LCCARV26 EQU   LCCAIHR4                                                 07432000
LCCARV25 EQU   LCCAIHR4                                                 07433000
LCCARV24 EQU   LCCAIHR4                                                 07434000
LCCARV23 EQU   LCCAIHR4                                                 07435000
LCCARV22 EQU   LCCAIHR4                                                 07436000
LCCARV21 EQU   LCCAIHR4                                                 07437000
LCCARV20 EQU   LCCAIHR4                                                 07438000
LCCARV19 EQU   LCCAIHR3                                                 07439000
LCCARV18 EQU   LCCAIHR3                                                 07440000
LCCARV17 EQU   LCCAIHR3                                                 07441000
LCCARV16 EQU   LCCAIHR3                                                 07442000
LCCARV15 EQU   LCCAIHR3                                                 07443000
LCCARV14 EQU   LCCAIHR3                                                 07444000
LCCARV13 EQU   LCCAIHR3                                                 07445000
LCCARV12 EQU   LCCAIHR3                                                 07446000
LCCARV11 EQU   LCCAIHR2                                                 07447000
LCCARV10 EQU   LCCAIHR2                                                 07448000
LCCARV09 EQU   LCCAIHR2                                                 07449000
LCCARV08 EQU   LCCAIHR2                                                 07450000
LCCARV07 EQU   LCCAIHR2                                                 07451000
LCCARV06 EQU   LCCAIHR2                                                 07452000
LCCARV05 EQU   LCCAIHR2                                                 07453000
LCCARV04 EQU   LCCAIHR2                                                 07454000
LCCARV03 EQU   LCCAIHR1                                                 07455000
LCCARV02 EQU   LCCAIHR1                                                 07456000
LCCARV01 EQU   LCCAIHR1                                                 07457000
LCCAPPIE EQU   LCCAIHR1                                                 07458000
LCCAPSG1 EQU   LCCAIHR1                                                 07459000
LCCAPDAT EQU   LCCAIHR1                                                 07460000
LCCAXRC2 EQU   LCCAIHR1                                                 07461000
LCCAXRC1 EQU   LCCAIHR1                                                 07462000
LCCAIOPS EQU   LCCA+512                                                 07463000
LCCAGPGR EQU   LCCA+448                                                 07464000
LCCAR133 EQU   LCCA+444                                                 07465000
LCCAR132 EQU   LCCA+440                                                 07466000
LCCAR131 EQU   LCCA+436                                                 07467000
LCCAR130 EQU   LCCA+432                                                 07468000
LCCAR129 EQU   LCCA+428                                                 07469000
LCCAR128 EQU   LCCA+424                                                 07470000
LCCAR127 EQU   LCCA+420                                                 07471000
LCCAR126 EQU   LCCA+416                                                 07472000
LCCARSGR EQU   LCCA+352                                                 07473000
LCCAXGR3 EQU   LCCA+288                                                 07474000
LCCAXGR2 EQU   LCCA+224                                                 07475000
LCCAXGR1 EQU   LCCA+160                                                 07476000
LCCACR0  EQU   LCCA+156                                                 07477000
LCCAMCR1 EQU   LCCA+152                                                 07478000
LCCAPVAD EQU   LCCA+148                                                 07479000
LCCAPINT EQU   LCCA+144                                                 07480000
LCCAPPSW EQU   LCCA+136                                                 07481000
LCCAPGR2 EQU   LCCA+72                                                  07482000
LCCAPGR1 EQU   LCCA+8                                                   07483000
LCCARV77 EQU   LCCA+6                                                   07484000
LCCACPUA EQU   LCCA+4                                                   07485000
LCCALCCA EQU   LCCA                                                     07486000
MSSPARE  EQU   BASES01+48                                               07487000
MSUCBAL  EQU   BASES01+44                                               07488000
MSUCBPR  EQU   BASES01+40                                               07489000
MSBOBECB EQU   BASES01+36                                               07490000
MSSJQ    EQU   BASES01+32                                               07491000
MSECB    EQU   BASES01+28                                               07492000
MSPBP    EQU   BASES01+24                                               07493000
MSERM    EQU   BASES01+22                                               07494000
MSPASS   EQU   BASES01+14                                               07495000
MSVRB    EQU   BASES01+6                                                07496000
MSQHR    EQU   MSFHF                                                    07497000
@NM00077 EQU   MSFHF                                                    07498000
MSPSDT   EQU   MSFHF                                                    07499000
MSREPLYB EQU   MSFHF                                                    07500000
MSFAX    EQU   MSFHF                                                    07501000
MSTTT    EQU   MSFHF                                                    07502000
MSCSD    EQU   MSFHF                                                    07503000
MSNMF    EQU   MSFHF                                                    07504000
MSJNF    EQU   MSSSA                                                    07505000
MSYOUT   EQU   MSNWP                                                    07506000
MSNRP    EQU   MSSSA                                                    07507000
MSSRDR   EQU   MSREOF                                                   07508000
MSWRLOG  EQU   MSSSA                                                    07509000
MSNUPSW  EQU   MSSSA                                                    07510000
MSWRPEN  EQU   MSSSA                                                    07511000
MSSSSIPL EQU   MSINLSW                                                  07512000
MSSUM    EQU   MSECBFL                                                  07513000
MSMCR    EQU   MSECBFL                                                  07514000
MSYSOUT  EQU   MSECBFL                                                  07515000
MSYSIN   EQU   MSECBFL                                                  07516000
MSATTN   EQU   MSECBFL                                                  07517000
MSWTL    EQU   MSECBFL                                                  07518000
MSWTO    EQU   MSECBFL                                                  07519000
MSEXT    EQU   MSECBFL                                                  07520000
MSCCS    EQU   MSPFG                                                    07521000
MSBSP    EQU   MSPFG                                                    07522000
MSSYT    EQU   MSPFG                                                    07523000
MSSYN    EQU   MSPFG                                                    07524000
MSICR    EQU   MSPFG                                                    07525000
MSCMC    EQU   MSPFG                                                    07526000
MSPNB    EQU   MSPFG                                                    07527000
MSDATE   EQU   MSPFG                                                    07528000
@NM00076 EQU   MSBTN                                                    07529000
MSTN     EQU   MSBTN                                                    07530000
@NM00075 EQU   MSBTN                                                    07531000
@NM00074 EQU   MSBTN                                                    07532000
MSSO     EQU   MSBTN                                                    07533000
MSROLFLG EQU   MSBTN                                                    07534000
MSCANFLG EQU   MSBTN                                                    07535000
MSCONFLG EQU   MSBTN                                                    07536000
MSPNIP   EQU   MSNTAL                                                   07537000
MSQNIP   EQU   MSNTAL                                                   07538000
MSCURE34 EQU   MSNTAL                                                   07539000
@NM00073 EQU   MSNTAL                                                   07540000
@NM00072 EQU   MSNTAL                                                   07541000
@NM00071 EQU   MSNTAL                                                   07542000
@NM00070 EQU   MSNTAL                                                   07543000
MSNIP    EQU   MSNTAL                                                   07544000
@NM00069 EQU   MS1BASEX+40                                              07545000
@NM00068 EQU   MS1BASEX+20                                              07546000
@NM00067 EQU   MS1BASEX                                                 07547000
@NM00066 EQU   BASE+128                                                 07548000
MSLGJSCB EQU   BASE+124                                                 07549000
@NM00065 EQU   MSSTRTSW                                                 07550000
MSSTRTP  EQU   MSSTRTSW                                                 07551000
MSSTRTW  EQU   MSSTRTSW                                                 07552000
@NM00064 EQU   MSWTRSW                                                  07553000
MSWTRP   EQU   MSWTRSW                                                  07554000
MSWTRW   EQU   MSWTRSW                                                  07555000
@NM00063 EQU   MSWLOGSW                                                 07556000
MSWLOGP  EQU   MSWLOGSW                                                 07557000
MSWLOGW  EQU   MSWLOGSW                                                 07558000
@NM00062 EQU   MSCLOSSW                                                 07559000
MSCLOSP  EQU   MSCLOSSW                                                 07560000
MSCLOSW  EQU   MSCLOSSW                                                 07561000
MSLOGLMT EQU   @NM00061+1                                               07562000
MSLOGCLS EQU   @NM00061                                                 07563000
BAASCB   EQU   BASE+100                                                 07564000
MSSMFPRM EQU   BASE+96                                                  07565000
MSCOMMND EQU   BASE+92                                                  07566000
BASP12   EQU   BASE+90                                                  07567000
BASTCNT  EQU   BASE+88                                                  07568000
BASESCT  EQU   BASE+86                                                  07569000
BAJNCNT  EQU   BASE+84                                                  07570000
BASUBECB EQU   BASE+80                                                  07571000
BALOGCOM EQU   BASE+76                                                  07572000
BADACNT  EQU   BASE+74                                                  07573000
BATACNT  EQU   BASE+72                                                  07574000
BAJBNR   EQU   BASE+64                                                  07575000
BASP11   EQU   BASE+62                                                  07576000
BALCCNT  EQU   BASE+61                                                  07577000
BADUMPID EQU   BASE+60                                                  07578000
BABCMAX  EQU   BASE+58                                                  07579000
BAMONTR2 EQU   BASE+57                                                  07580000
@NM00060 EQU   BAMONITR                                                 07581000
BAMACTVE EQU   BAMONITR                                                 07582000
@NM00059 EQU   BAMONITR                                                 07583000
@NM00058 EQU   BAMONITR                                                 07584000
@NM00057 EQU   BAMONITR                                                 07585000
@NM00056 EQU   BAMONITR                                                 07586000
BASPACE  EQU   BAMONITR                                                 07587000
BADSN    EQU   BAMONITR                                                 07588000
BADSO    EQU   BASE+52                                                  07589000
BALOGECB EQU   BASE+48                                                  07590000
@NM00055 EQU   BASPBYTE                                                 07591000
@NM00054 EQU   BASPBYTE                                                 07592000
@NM00053 EQU   BASPBYTE                                                 07593000
@NM00052 EQU   BASPBYTE                                                 07594000
@NM00051 EQU   BASPBYTE                                                 07595000
BAMASCH  EQU   BASPBYTE                                                 07596000
BATRACE  EQU   BASPBYTE                                                 07597000
BAMSSTAR EQU   BASPBYTE                                                 07598000
@NM00050 EQU   MSLOGST                                                  07599000
@NM00049 EQU   MSLOGST                                                  07600000
MSLOGSTA EQU   MSLOGST                                                  07601000
MSLOGIPL EQU   MSLOGST                                                  07602000
MSLOGDAR EQU   MSLOGST                                                  07603000
MSLOGCOM EQU   MSLOGST                                                  07604000
MSLOGTHD EQU   MSLOGST                                                  07605000
MSLOGENQ EQU   MSLOGST                                                  07606000
BAMIPAR2 EQU   BASE+44                                                  07607000
BAMINPAR EQU   BASE+42                                                  07608000
BAPKES   EQU   BASE+40                                                  07609000
BAICTR   EQU   BASE+38                                                  07610000
@NM00048 EQU   BASE+37                                                  07611000
BADSET   EQU   BARSW                                                    07612000
BANOSET  EQU   BARSW                                                    07613000
BAMIDNT  EQU   BARSW                                                    07614000
BAHR     EQU   BARSW                                                    07615000
BAVU     EQU   BARSW                                                    07616000
BACV     EQU   BASE+32                                                  07617000
@NM00047 EQU   BALOG                                                    07618000
@NM00046 EQU   BALOG                                                    07619000
@NM00045 EQU   BALOG                                                    07620000
@NM00044 EQU   BALOG                                                    07621000
@NM00043 EQU   BALOG                                                    07622000
@NM00042 EQU   BALOG                                                    07623000
@NM00041 EQU   BALOG                                                    07624000
BALOGINT EQU   BALOG                                                    07625000
MSLOGSVC EQU   BALGSTAT                                                 07626000
BAPRC    EQU   BASE+20                                                  07627000
BAQ      EQU   BASE+16                                                  07628000
@NM00040 EQU   @NM00039                                                 07629000
BAIPL    EQU   BASE+12                                                  07630000
BALAD    EQU   BASE+8                                                   07631000
BATRM    EQU   BASE+4                                                   07632000
BACHN    EQU   BASE                                                     07633000
WPLMLTXT EQU   WPLML+4                                                  07634000
WPLMLLT2 EQU   WPLMLLTF+1                                               07635000
WPLRSV24 EQU   WPLMLLT1                                                 07636000
WPLRSV23 EQU   WPLMLLT1                                                 07637000
WPLRSV22 EQU   WPLMLLT1                                                 07638000
WPLRSV21 EQU   WPLMLLT1                                                 07639000
WPLMLLTD EQU   WPLMLLT1                                                 07640000
WPLMLLTC EQU   WPLMLLT1                                                 07641000
WPLMLLTB EQU   WPLMLLT1                                                 07642000
WPLMLLTA EQU   WPLMLLT1                                                 07643000
WPLMLLEN EQU   WPLML+1                                                  07644000
WPLML0   EQU   WPLML                                                    07645000
WPLLINES EQU   WPLLS01+3                                                07646000
WPLAREA  EQU   WPLLS01+2                                                07647000
WPLLTF2  EQU   WPLLTF+1                                                 07648000
WPLRSV20 EQU   WPLLTF1                                                  07649000
WPLRSV19 EQU   WPLLTF1                                                  07650000
WPLRSV18 EQU   WPLLTF1                                                  07651000
WPLRSV17 EQU   WPLLTF1                                                  07652000
WPLLTFD  EQU   WPLLTF1                                                  07653000
WPLLTFC  EQU   WPLLTF1                                                  07654000
WPLLTFB  EQU   WPLLTF1                                                  07655000
WPLLTFA  EQU   WPLLTF1                                                  07656000
WPLQID   EQU   WPLFLGS+6                                                07657000
WPLRSV32 EQU   WPLMSGT2                                                 07658000
WPLRSV31 EQU   WPLMSGT2                                                 07659000
WPLRSV30 EQU   WPLMSGT2                                                 07660000
WPLRSV29 EQU   WPLMSGT2                                                 07661000
WPLRSV28 EQU   WPLMSGT2                                                 07662000
WPLRSV27 EQU   WPLMSGT2                                                 07663000
WPLRSV26 EQU   WPLMSGT2                                                 07664000
WPLRSV25 EQU   WPLMSGT2                                                 07665000
WPLRSV16 EQU   WPLMSGT1                                                 07666000
WPLRSV15 EQU   WPLMSGT1                                                 07667000
WPLMSGTF EQU   WPLMSGT1                                                 07668000
WPLRSV14 EQU   WPLMSGT1                                                 07669000
WPLMSGTD EQU   WPLMSGT1                                                 07670000
WPLMSGTC EQU   WPLMSGT1                                                 07671000
WPLMSGTB EQU   WPLMSGT1                                                 07672000
WPLMSGTA EQU   WPLMSGT1                                                 07673000
WPLRSV13 EQU   WPLROUT2                                                 07674000
WPLROUTO EQU   WPLROUT2                                                 07675000
WPLROUTN EQU   WPLROUT2                                                 07676000
WPLROUTM EQU   WPLROUT2                                                 07677000
WPLROUTL EQU   WPLROUT2                                                 07678000
WPLROUTK EQU   WPLROUT2                                                 07679000
WPLROUTJ EQU   WPLROUT2                                                 07680000
WPLROUTI EQU   WPLROUT2                                                 07681000
WPLROUTH EQU   WPLROUT1                                                 07682000
WPLROUTG EQU   WPLROUT1                                                 07683000
WPLROUTF EQU   WPLROUT1                                                 07684000
WPLROUTE EQU   WPLROUT1                                                 07685000
WPLROUTD EQU   WPLROUT1                                                 07686000
WPLROUTC EQU   WPLROUT1                                                 07687000
WPLROUTB EQU   WPLROUT1                                                 07688000
WPLROUTA EQU   WPLROUT1                                                 07689000
WPLRSV12 EQU   WPLDESC2                                                 07690000
WPLRSV11 EQU   WPLDESC2                                                 07691000
WPLRSV10 EQU   WPLDESC2                                                 07692000
WPLRSV09 EQU   WPLDESC2                                                 07693000
WPLRSV08 EQU   WPLDESC2                                                 07694000
WPLRSV07 EQU   WPLDESC2                                                 07695000
WPLDESCJ EQU   WPLDESC2                                                 07696000
WPLDESCI EQU   WPLDESC2                                                 07697000
WPLDESCH EQU   WPLDESC1                                                 07698000
WPLDESCG EQU   WPLDESC1                                                 07699000
WPLDESCF EQU   WPLDESC1                                                 07700000
WPLDESCE EQU   WPLDESC1                                                 07701000
WPLDESCD EQU   WPLDESC1                                                 07702000
WPLDESCC EQU   WPLDESC1                                                 07703000
WPLDESCB EQU   WPLDESC1                                                 07704000
WPLDESCA EQU   WPLDESC1                                                 07705000
WPLTXTL  EQU   WPLTXT+125                                               07706000
@NM00038 EQU   WPLTXT                                                   07707000
WPLRSV05 EQU   WPLMCSF2                                                 07708000
WPLRSV04 EQU   WPLMCSF2                                                 07709000
WPLMCSFN EQU   WPLMCSF2                                                 07710000
WPLRSV03 EQU   WPLMCSF2                                                 07711000
WPLNOWTP EQU   WPLMCSF2                                                 07712000
WPLMCSFK EQU   WPLMCSF2                                                 07713000
WPLMCSFJ EQU   WPLMCSF2                                                 07714000
WPLMCSFI EQU   WPLMCSF2                                                 07715000
WPLMCSFH EQU   WPLMCSF1                                                 07716000
WPLMCSFG EQU   WPLMCSF1                                                 07717000
WPLMCSFF EQU   WPLMCSF1                                                 07718000
WPLMCSFE EQU   WPLMCSF1                                                 07719000
WPLMCSFD EQU   WPLMCSF1                                                 07720000
WPLMCSFC EQU   WPLMCSF1                                                 07721000
WPLMCSFB EQU   WPLMCSF1                                                 07722000
WPLMCSFA EQU   WPLMCSF1                                                 07723000
WPLLGH   EQU   WPL                                                      07724000
WPLRLN   EQU   WPLRPTR                                                  07725000
TPCCRSAV EQU   IEATPC+352                                               07726000
TPCFRRP  EQU   IEATPC+348                                               07727000
TPCVPTR  EQU   IEATPC+344                                               07728000
TPCMISC  EQU   IEATPC+272                                               07729000
TPCWORKR EQU   TPCWORK+4                                                07730000
TPCWORKL EQU   TPCWORK                                                  07731000
TPCSAVE2 EQU   IEATPC+200                                               07732000
TPCSAVE1 EQU   IEATPC+136                                               07733000
@NM00037 EQU   TPCLMTQE+16                                              07734000
@NM00036 EQU   TPCLMTQE+15                                              07735000
@NM00035 EQU   TPCLMTQE+14                                              07736000
@NM00034 EQU   TPCLMTQE+12                                              07737000
@NM00033 EQU   TPCLMTQE+8                                               07738000
@NM00032 EQU   TPCLMTQE+4                                               07739000
@NM00031 EQU   TPCLMTQE                                                 07740000
@NM00030 EQU   IEATSELM+16                                              07741000
@NM00029 EQU   IEATSELM+15                                              07742000
@NM00028 EQU   IEATSELM+14                                              07743000
@NM00027 EQU   IEATSELM+12                                              07744000
@NM00026 EQU   IEATSELM+8                                               07745000
@NM00025 EQU   IEATSELM+4                                               07746000
@NM00024 EQU   IEATSELM                                                 07747000
@NM00023 EQU   TPCMFTQE+16                                              07748000
@NM00022 EQU   TPCMFTQE+15                                              07749000
@NM00021 EQU   TPCMFTQE+14                                              07750000
@NM00020 EQU   TPCMFTQE+12                                              07751000
@NM00019 EQU   TPCMFTQE+8                                               07752000
@NM00018 EQU   TPCMFTQE+4                                               07753000
@NM00017 EQU   TPCMFTQE                                                 07754000
MNIGHTRH EQU   MNIGHT+4                                                 07755000
@NM00016 EQU   TPCMNTQE+15                                              07756000
@NM00015 EQU   TPCMNTQE+14                                              07757000
@NM00014 EQU   TPCMNTQE+12                                              07758000
@NM00013 EQU   TPCMNTQE+8                                               07759000
@NM00012 EQU   TPCMNTQE+4                                               07760000
@NM00011 EQU   TPCMNTQE                                                 07761000
@NM00010 EQU   TPCDMTQE+16                                              07762000
@NM00009 EQU   TPCDMTQE+15                                              07763000
@NM00008 EQU   TPCDMTQE+14                                              07764000
@NM00007 EQU   TPCDMTQE+12                                              07765000
@NM00006 EQU   TPCDMTQE+8                                               07766000
@NM00005 EQU   TPCDMTQE                                                 07767000
TPCCC    EQU   IEATPC+7                                                 07768000
@NM00004 EQU   IEATPC+5                                                 07769000
@NM00003 EQU   TPCFLGS1                                                 07770000
TPCTPCA  EQU   IEATPC                                                   07771000
.@UNREFD ANOP                          END UNREFERENCED COMPONENTS      07772000
@RC00197 EQU   @RC00186                                                 07773000
@RF00302 EQU   @RC00299                                                 07774000
@RC00358 EQU   @RC00356                                                 07775000
@RF00364 EQU   @RC00356                                                 07776000
@RC00515 EQU   @RC00513                                                 07777000
@RC00494 EQU   @RC00492                                                 07778000
@PB00006 EQU   @EL00005                                                 07779000
@PB00007 EQU   @EC00827                                                 07780000
@RF00918 EQU   @EL00001                                                 07781000
@RC01060 EQU   @EL00008                                                 07782000
@PB00005 EQU   @PB00007                                                 07783000
@PB00004 EQU   @PB00005                                                 07784000
@ENDDATA EQU   *                                                        07785000
         END   IEAVRTOD,(C'PLS1200',0701,78156)                         07786000
